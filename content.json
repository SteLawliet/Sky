{"meta":{"title":"stelawliet","subtitle":"迁移整理中...","description":"sky","author":"Stelawliet","url":"http://io.stelawliet.top"},"pages":[{"title":"","date":"2018-06-24T13:43:54.000Z","updated":"2018-06-24T13:43:54.000Z","comments":false,"path":"tags/index.html","permalink":"http://io.stelawliet.top/tags/index.html","excerpt":"","text":""},{"title":"","date":"2018-06-24T14:14:16.000Z","updated":"2018-06-24T14:14:16.000Z","comments":false,"path":"categories/index.html","permalink":"http://io.stelawliet.top/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"CentOS7最小化安装配置@jianshu","slug":"Linux/CentOS7Min","date":"2018-10-28T04:45:26.000Z","updated":"2018-10-28T04:48:33.000Z","comments":true,"path":"2018/10/28/Linux/CentOS7Min/","link":"","permalink":"http://io.stelawliet.top/2018/10/28/Linux/CentOS7Min/","excerpt":"","text":"CentOS7最小化安装配置from [开心的许久)(https://www.jianshu.com/u/ea3c5d42b91e) 环境 安装版本为CentOS-7-x86_64-Minimal-1511 显示ip命令：ip addr 新建用户：useradd xujiu 会在home下创建同名主目录 设置用户密码：passwd xujiu 切换用户：su - xujiu 删除用户及主目录：userdel -rf xujiu 把用户xuduo设为sudoers 1vim /etc/sudoers 更换源：安装wget备份 1mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup 下载新的CentOS-Base.repo 到/etc/yum.repos.d/ 1wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo 之后运行yum makecache生成缓存 升级更新系统：1234sudo yum updatesudo yum upgradesudo yum autoremoveyum clean all SSH服务最小化系统镜像带SSH服务，不用安装 查看是否安装SSH：rpm -qa|grep openssh 查看服务状态：service sshd status 卸载自带jdk通过 rpm -qa | grep java查看JDK相关的包， 然后通过命令删除下面三个相关的包： 123rpm -e --nodeps java-1.7.0-openjdk-1.7.0.75-2.5.4.2.el7_0.x86_64rpm -e --nodeps java-1.7.0-openjdk-headless-1.7.0.75-2.5.4.2.el7_0.x86_64rpm -e --nodeps tzdata-java-2015a-1.el7.noarch jdk安装sudo rpm -ivh jdk-8u77-linux-x64.rpm 不用配置环境变量也可以java -version 但还是配置一下以备不时之需 查看jdk安装位置：rpm -qal|grep jdk 三种配置环境变量的方法 修改/etc/profile文件如果你的计算机仅仅作为开发使用时推荐使用这种方法，因为所有用户的shell都有权使用这些环境变量，可能会给系统带来安全性问题。用文本编辑器打开/etc/profile在profile文件末尾加入： 123export JAVA_HOME=/usr/share/jdk1.6.0_14 export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 重新登录 修改.bash_profile文件这种方法更为安全，它可以把使用这些环境变量的权限控制到用户级别，如果你需要给某个用户权限使用这些环境变量，你只需要修改其个人用户主目录下的.bash_profile文件就可以了。用文本编辑器打开用户目录下的.bash_profile文件在.bash_profile文件末尾加入： 123export JAVA_HOME=/usr/share/jdk1.6.0_14 export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 重新登录 直接在shell下设置变量不赞成使用这种方法，因为换个shell，你的设置就无效了，因此这种方法仅仅是临时使用，以后要使用的时候又要重新设置，比较麻烦。只需在shell终端执行下列命令： 123export JAVA_HOME=/usr/share/jdk1.6.0_14 export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar tar.gz解压 压缩命令： 命令格式：tar -zcvf 压缩文件名.tar.gz 被压缩文件名可先切换到当前目录下。压缩文件名和被压缩文件名都可加入路径。 解压缩命令： 命令格式：tar -zxvf 压缩文件名.tar.gz -C 目标目录 解压缩后的文件只能放在当前的目录 mysql安装123456789sudo rpm -Uvh platform-and-version-specific-package-name.rpmyum repolist all | grep mysqlsudo yum install mysql-community-serversudo service mysqld startsudo grep &apos;temporary password&apos; /var/log/mysqld.logmysql -uroot -p ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;MyNewPass4!&apos;;mysql允许远程访问GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;XuDuo123!@#&apos; WITH GRANT OPTION; 最小化安装无防火墙CentOS7使用firewalld打开关闭防火墙与端口 firewalld的基本使用 1234启动： systemctl start firewalld查看状态： systemctl status firewalld 停止： systemctl disable firewalld禁用： systemctl stop firewalld systemctl是CentOS7的服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体。 123456789启动一个服务：systemctl start firewalld.service关闭一个服务：systemctl stop firewalld.service重启一个服务：systemctl restart firewalld.service显示一个服务的状态：systemctl status firewalld.service在开机时启用一个服务：systemctl enable firewalld.service在开机时禁用一个服务：systemctl disable firewalld.service查看服务是否开机启动：systemctl is-enabled firewalld.service查看已启动的服务列表：systemctl list-unit-files|grep enabled查看启动失败的服务列表：systemctl --failed 配置firewalld-cmd 12345678910查看版本： firewall-cmd --version查看帮助： firewall-cmd --help显示状态： firewall-cmd --state查看所有打开的端口： firewall-cmd --zone=public --list-ports更新防火墙规则： firewall-cmd --reload查看区域信息: firewall-cmd --get-active-zones查看指定接口所属区域： firewall-cmd --get-zone-of-interface=eth0拒绝所有包：firewall-cmd --panic-on取消拒绝状态： firewall-cmd --panic-off查看是否拒绝： firewall-cmd --query-panic 那怎么开启一个端口呢 12345678添加firewall-cmd --zone=public --add-port=80/tcp --permanent （--permanent永久生效，没有此参数重启后失效）重新载入firewall-cmd --reload查看firewall-cmd --zone= public --query-port=80/tcp删除firewall-cmd --zone= public --remove-port=80/tcp --permanent","categories":[],"tags":[{"name":"firewall-cmd","slug":"firewall-cmd","permalink":"http://io.stelawliet.top/tags/firewall-cmd/"},{"name":"centos7","slug":"centos7","permalink":"http://io.stelawliet.top/tags/centos7/"}]},{"title":"mapReduce 切片源码分析","slug":"hadoop/MR切片","date":"2018-10-25T08:04:35.000Z","updated":"2018-10-25T17:58:13.000Z","comments":true,"path":"2018/10/25/hadoop/MR切片/","link":"","permalink":"http://io.stelawliet.top/2018/10/25/hadoop/MR切片/","excerpt":"","text":"FileSplit mapreduce.input.fileinputformat.split.minsize=1 mapreduce.input.fileinputformat.split.maxsize=Long.MAXValue computeSplitSize(){ Math.max(minsize,Math.min(maxSize,blockSize))} 12345678910111213141516171819202122232425//获取文件块大小 2.x以后yarn 默认128m.本地32mlong blockSize = file.getBlockSize();//计算切片大小//minSize=1,maxSize=Long.MaxValue//所以blockSize没有到上限和下限的话默认为块大小long splitSize = computeSplitSize(blockSize,minSize=1,maxSize);long bytesRemaining = length;//SPLIT_SLOP=1.1//当剩余的切片长度大于splitSize的1.1倍时才会继续切//例如当剩余129m小于128m的1.1就会停止切片while (((double)bytesRemaining)/splitSize &gt; SPLIT_SLOP) &#123; int blkIndex = getBlockIndex(blkLocations,length-bytesRemaining); splits.add( makeSplit(path,length-bytesRemaining,splitSize, blkLocation[blkIndex].getHosts(), blkLocation[blkIndex].getCachedHosts())); bytesRemaining -= splitSize;&#125; 获取切片信息api FileSplit in = (FileSplit) context.getInputSplit(); 所以最后切片的个数决定了后面maptask的个数 文件个数(每个文件最小都会默认分配一个maptask),每个文件大小,块大小 小文件处理CombineTextInputFormat job.setInputFormatClass(combineTextInputFormat.class) CombineTextInputFormat.setMaxInputSplitSize(job,4194304) //4mb","categories":[{"name":"hadoop","slug":"hadoop","permalink":"http://io.stelawliet.top/categories/hadoop/"},{"name":"mapreduce","slug":"hadoop/mapreduce","permalink":"http://io.stelawliet.top/categories/hadoop/mapreduce/"}],"tags":[]},{"title":"hadoop configuration","slug":"hadoop/configuration","date":"2018-10-22T12:36:23.000Z","updated":"2018-10-25T09:00:32.000Z","comments":true,"path":"2018/10/22/hadoop/configuration/","link":"","permalink":"http://io.stelawliet.top/2018/10/22/hadoop/configuration/","excerpt":"","text":"hadoop-env.sh 12#配置java-homeexport JAVA_HOME=/opt/server/jdk1.8.0_144 core-site.xml 1234567891011&lt;!-- 指定HDFS中NameNode的地址 --&gt;&lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://hadoop101:9000&lt;/value&gt;&lt;/property&gt;&lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;&lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/opt/server/hadoop/data/tmp&lt;/value&gt;&lt;/property&gt; hdfs-site.xml 1234567891011&lt;!-- 指定HDFS副本的数量 --&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt;/property&gt;&lt;!-- secondary namenode--&gt; &lt;property&gt; &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt; &lt;value&gt;hadoop104:50090&lt;/value&gt; &lt;/property&gt;&lt;/configuration&gt; slaves 123node0node1node2","categories":[{"name":"hadoop","slug":"hadoop","permalink":"http://io.stelawliet.top/categories/hadoop/"}],"tags":[]},{"title":"raft","slug":"paper/raft","date":"2018-10-19T08:34:08.000Z","updated":"2018-10-19T09:03:03.000Z","comments":true,"path":"2018/10/19/paper/raft/","link":"","permalink":"http://io.stelawliet.top/2018/10/19/paper/raft/","excerpt":"","text":"img 喜欢;) | 作者 罗远航 发布于 2017年2月5日. 估计阅读时间: 114 分钟 | 来 ArchSummit北京2018 共同探讨机器学习、信息安全、微服务治理的关键点2 讨论 分享到： 微博 微信 Facebook Twitter 有道云笔记 邮件分享 稍后阅读 我的阅读清单 本篇博客为著名的 RAFT 一致性算法论文的中文翻译，论文名为《In search of an Understandable Consensus Algorithm (Extended Version)》(寻找一种易于理解的一致性算法)。 Raft 是一种用来管理日志复制的一致性算法。它和 Paxos 的性能和功能是一样的，但是它和 Paxos 的结构不一样；这使得 Raft 更容易理解并且更易于建立实际的系统。为了提高理解性，Raft 将一致性算法分为了几个部分，例如领导选取（leader selection），日志复制（log replication）和安全性（safety），同时它使用了更强的一致性来减少了必须需要考虑的状态。从用户学习的结果来看，Raft 比 Paxos 更容易学会。Raft 还包括了一种新的机制来使得动态改变集群成员，它使用重叠大多数（overlapping majorities）来保证安全。 1. 引言一致性算法允许一组机器像一个整体一样工作，即使其中的一些机器出了错误也能正常工作。正因为此，他们扮演着建立大规模可靠的软件系统的关键角色。在过去的十年中 Paxos 一直都主导着有关一致性算法的讨论：大多数一致性算法的实现都基于它或者受它影响，并且 Paxos 也成为了教学生关于一致性知识的主要工具。 不幸的是，尽管在降低它的复杂性方面做了许多努力，Paxos 依旧很难理解。并且，Paxos 需要经过复杂的修改才能应用于实际中。这些导致了系统构构建者和学生都十分头疼。 在被 Paxos 折磨之后，我们开始寻找一种在系统构建和教学上更好的新的一致性算法。我们的首要目标是让它易于理解：我们能不能定义一种面向实际系统的一致性算法并且比 Paxos 更容易学习呢？并且，我们希望这种算法能凭直觉就能明白，这对于一个系统构建者来说是十分必要的。对于一个算法，不仅仅是让它工作起来很重要，知道它是如何工作的更重要。 我们工作的结果是一种新的一致性算法，叫做 Raft。在设计 Raft 的过程中我们应用了许多专门的技巧来提升理解性，包括算法分解（分为领导选取（leader selection），日志复制（log replication）和安全性（safety））和减少状态（state space reduction）（相对于 Paxos，Raft 减少了非确定性的程度和服务器互相不一致的方式）。在两所学校的43个学生的研究中发现，Raft 比 Paxos 要更容易理解：在学习了两种算法之后，其中的33个学生回答 Raft 的问题要比回答 Paxos 的问题要好。 Raft 算法和现在一些已经有的算法在一些地方很相似（主要是 Oki 和 Liskov 的 Viewstamped Replication。但是 Raft 有几个新的特性： 强领导者（Strong Leader）：Raft 使用一种比其他算法更强的领导形式。例如，日志条目只从领导者发送向其他服务器。这样就简化了对日志复制的管理，使得 Raft 更易于理解。 领导选取（Leader Selection）：Raft 使用随机定时器来选取领导者。这种方式仅仅是在所有算法都需要实现的心跳机制上增加了一点变化，它使得在解决冲突时更简单和快速。 成员变化（Membership Change）：Raft 为了调整集群中成员关系使用了新的联合一致性（joint consensus）的方法，这种方法中大多数不同配置的机器在转换关系的时候会交迭（overlap）。这使得在配置改变的时候，集群能够继续操作。 我们认为，Raft 在教学方面和实际实现方面比 Paxos 和其他算法更出众。它比其他算法更简单、更容易理解；它能满足一个实际系统的需求；它拥有许多开源的实现并且被许多公司所使用；它的安全特性已经被证明；并且它的效率和其他算法相比也具有竞争力。 这篇论文剩下的部分会讲如下内容：复制状态机（replicated state machine）问题（第2节），讨论 Paxos 的优缺点（第3节），讨论我们用的为了达到提升理解性的方法（第4节），陈述 Raft 一致性算法（第5~8节），评价 Raft 算法（第9节），对相关工作的讨论（第10节）。 2. 复制状态机（Replicated State Machine）一致性算法是在复制状态机的背景下提出来的。在这个方法中，在一组服务器的状态机产生同样的状态的副本因此即使有一些服务器崩溃了这组服务器也还能继续执行。复制状态机在分布式系统中被用于解决许多有关容错的问题。例如，GFS，HDFS还有 RAMCloud 这些大规模的系统都是用一个单独的集群领导者，使用一个单独的复制状态机来进行领导选取和存储配置信息来应对领导者的崩溃。使用复制状态机的例子有 Chubby 和 ZooKeeper。 图-1：复制状态机的架构。一致性算法管理来自客户端状态命令的复制日志。状态机处理的日志中的命令的顺序都是一致的，因此会得到相同的执行结果。 如图-1所示，复制状态机是通过复制日志来实现的。每一台服务器保存着一份日志，日志中包含一系列的命令，状态机会按顺序执行这些命令。因为每一台计算机的状态机都是确定的，所以每个状态机的状态都是相同的，执行的命令是相同的，最后的执行结果也就是一样的了。 如何保证复制日志一致就是一致性算法的工作了。在一台服务器上，一致性模块接受客户端的命令并且把命令加入到它的日志中。它和其他服务器上的一致性模块进行通信来确保每一个日志最终包含相同序列的请求，即使有一些服务器宕机了。一旦这些命令被正确的复制了，每一个服务器的状态机都会按同样的顺序去执行它们，然后将结果返回给客户端。最终，这些服务器看起来就像一台可靠的状态机。 应用于实际系统的一致性算法一般有以下特性： 确保安全性（从来不会返回一个错误的结果），即使在所有的非拜占庭（Non-Byzantine）情况下，包括网络延迟、分区、丢包、冗余和乱序的情况下。 高可用性，只要集群中的大部分机器都能运行，可以互相通信并且可以和客户端通信，这个集群就可用。因此，一般来说，一个拥有 5 台机器的集群可以容忍其中的 2 台的失败（fail）。服务器停止工作了我们就认为它失败（fail）了，没准一会当它们拥有稳定的存储时就能从中恢复过来，重新加入到集群中。 不依赖时序保证一致性，时钟错误和极端情况下的消息延迟在最坏的情况下才会引起可用性问题。 通常情况下，一条命令能够尽可能快的在大多数节点对一轮远程调用作出相应时完成，一少部分慢的机器不会影响系统的整体性能。 3. Paxos 算法的不足在过去的10年中，Leslie Lamport 的 Paxos 算法几乎已经成为了一致性算法的代名词：它是授课中最常见的算法，同时也是许多一致性算法实现的起点。Paxos 首先定义了一个能够达成单一决策一致的协议，例如一个单一复制日志条目（single replicated log entry）。我们把这个子集叫做单一决策 Paxos（single-decree Paxos）。之后 Paxos通过组合多个这种协议来完成一系列的决策，例如一个日志（multi-Paxos）。Paxos 确保安全性和活跃性（liveness），并且它支持集群成员的变更。它的正确性已经被证明，通常情况下也很高效。 不幸的是，Paxos 有两个致命的缺点。第一个是 Paxos 太难以理解。它的完整的解释晦涩难懂；很少有人能完全理解，只有少数人成功的读懂了它。并且大家做了许多努力来用一些简单的术语来描述它。尽管这些解释都关注于单一决策子集问题，但仍具有挑战性。在 NSDI 2012 会议上的一次非正式调查显示，我们发现大家对 Paxos 都感到不满意，其中甚至包括一些有经验的研究员。我们自己也曾深陷其中，我们在读过几篇简化它的文章并且设计了我们自己的算法之后才完全理解了 Paxos，而整个过程花费了将近一年的时间。 我们假定 Paxos 的晦涩来源于它将单决策子集作为它的基础。单决策（Single-decree）Paxos 是晦涩且微妙的：它被划分为两个没有简单直观解释的阶段，并且难以独立理解。正因为如此，它不能很直观的让我们知道为什么单一决策协议能够工作。为多决策 Paxos 设计的规则又添加了额外的复杂性和精巧性。我们相信多决策问题能够分解为其它更直观的方式。 Paxos 的第二个缺点是它难以在实际环境中实现。其中一个原因是，对于多决策 Paxos （multi-Paxos） ，大家还没有一个一致同意的算法。Lamport 的描述大部分都是有关于单决策 Paxos （single-decree Paxos）；他仅仅描述了实现多决策的可能的方法，缺少许多细节。有许多实现 Paxos 和优化 Paxos 的尝试，但是他们都和 Lamport 的描述有些出入。例如，Chubby 实现的是一个类似 Paxos 的算法，但是在许多情况下的细节没有公开。 另外，Paxos 的结构也是不容易在一个实际系统中进行实现的，这是单决策问题分解带来的又一个问题。例如，从许多日志条目中选出条目然后把它们融合到一个序列化的日志中并没有带来什么好处，它仅仅增加了复杂性。围绕着日志来设计一个系统是更简单、更高效的：新日志按照严格的顺序添加到日志中去。另一个问题是，Paxos 使用对等的点对点的实现作为它的核心（尽管它最终提出了一种弱领导者的形式来优化性能）。这种方法在只有一个决策被制定的情况下才显得有效，但是很少有现实中的系统使用它。如果要做许多的决策，选择一个领导人，由领带人来协调是更简单有效的方法。 因此，在实际的系统应用中和 Paxos 算法都相差很大。所有开始于 Paxos 的实现都会遇到很多问题，然后由此衍生出了许多与 Paxos 有很大不同的架构。这是既费时又容易出错的，并且理解 Paxos 的难度又非常大。Paxos 算法在它正确性的理论证明上是很好的，但是在实现上的价值就远远不足了。来自 Chubby 的实现的一条评论就能够说明： Paxos 算法的描述与实际实现之间存在巨大的鸿沟…最终的系统往往建立在一个没有被证明的算法之上。 正因为存在这些问题，我们认为 Paxos 不仅对于系统的构建者来说不友好，同时也不利于教学。鉴于一致性算法对于大规模软件系统的重要性，我们决定试着来设计一种另外的比 Paxos 更好的一致性算法。Raft 就是这样的一个算法。 4. 易于理解的设计设计 Raft 的目标有如下几个： 它必须提供一个完整的、实际的基础来进行系统构建，为的是减少开发者的工作； 它必须在所有情况下都能保证安全可用； 它对于常规操作必须高效； 最重要的目标是：易于理解，它必须使得大多数人能够很容易的理解； 另外，它必须能让开发者有一个直观的认识，这样才能使系统构建者们去对它进行扩展。 在设计 Raft 的过程中，我们不得不在许多种方法中做出选择。当面临这种情况时，我们通常会权衡可理解性：每种方法的可理解性是如何的？（例如，它的状态空间有多复杂？它是不是有很细微的含义？）它的可读性如何？读者能不能轻易地理解这个方法和它的含义？ 我们意识到对这种可理解性的分析具有高度的主观性；尽管如此，我们使用了两种适用的方式。第一种是众所周知的问题分解：我们尽可能将问题分解成为若干个可解决的、可被理解的小问题。例如，在 Raft 中，我们把问题分解成为了领导选取（leader election）、日志复制（log replication）、安全（safety）和成员变化（membership changes）。 我们采用的第二个方法是通过减少需要考虑的状态的数量将状态空间简化，这能够使得整个系统更加一致并且尽可能消除不确定性。特别地，日志之间不允许出现空洞，并且 Raft 限制了限制了日志不一致的可能性。尽管在大多数情况下，我们都都在试图消除不确定性，但是有时候有些情况下，不确定性使得算法更易理解。尤其是，随机化方法使得不确定性增加，但是它减少了状态空间。我们使用随机化来简化了 Raft 中的领导选取算法。 5. Raft 一致性算法Raft 是一种用来管理第 2 章中提到的复制日志的算法。表-2 为了方便参考是一个算法的总结版本，表-3 列举了算法中的关键性质；表格中的这些元素将会在这一章剩下的部分中分别进行讨论。 状态： 在所有服务器上持久存在的：（在响应远程过程调用 RPC 之前稳定存储的） 名称 描述 currentTerm 服务器最后知道的任期号（从0开始递增） votedFor 在当前任期内收到选票的候选人 id（如果没有就为 null） log[] 日志条目；每个条目包含状态机的要执行命令和从领导人处收到时的任期号 在所有服务器上不稳定存在的： 名称 描述 commitIndex 已知的被提交的最大日志条目的索引值（从0开始递增） lastApplied 被状态机执行的最大日志条目的索引值（从0开始递增） 在领导人服务器上不稳定存在的：（在选举之后初始化的） 名称 描述 nextIndex[] 对于每一个服务器，记录需要发给它的下一个日志条目的索引（初始化为领导人上一条日志的索引值+1） matchIndex[] 对于每一个服务器，记录已经复制到该服务器的日志的最高索引值（从0开始递增） 表-2-i 附加日志远程过程调用 （AppendEntries RPC） 由领导人来调用复制日志（5.3节）；也会用作heartbeat 参数 描述 term 领导人的任期号 leaderId 领导人的 id，为了其他服务器能重定向到客户端 prevLogIndex 最新日志之前的日志的索引值 prevLogTerm 最新日志之前的日志的领导人任期号 entries[] 将要存储的日志条目（表示 heartbeat 时为空，有时会为了效率发送超过一条） leaderCommit 领导人提交的日志条目索引值 返回值 描述 term 当前的任期号，用于领导人更新自己的任期号 success 如果其它服务器包含能够匹配上 prevLogIndex 和 prevLogTerm 的日志时为真 接受者需要实现： 如果 term &lt; currentTerm返回 false（5.1节） 如果在prevLogIndex处的日志的任期号与prevLogTerm不匹配时，返回 false（5.3节） 如果一条已经存在的日志与新的冲突（index 相同但是任期号 term 不同），则删除已经存在的日志和它之后所有的日志（5.3节） 添加任何在已有的日志中不存在的条目 如果leaderCommit &gt; commitIndex，将commitIndex设置为leaderCommit和最新日志条目索引号中较小的一个 表-2-ii 投票请求 RPC（RequestVote RPC） 由候选人发起收集选票（5.2节） 参数 描述 term 候选人的任期号 candidateId 请求投票的候选人 id lastLogIndex 候选人最新日志条目的索引值 lastLogTerm 候选人最新日志条目对应的任期号 返回值 描述 term 目前的任期号，用于候选人更新自己 voteGranted 如果候选人收到选票为 true 接受者需要实现： 如果term &lt; currentTerm返回 false（5.1节） 如果votedFor为空或者与candidateId相同，并且候选人的日志和自己的日志一样新，则给该候选人投票（5.2节 和 5.4节） 表-2-iii 服务器需要遵守的规则： 所有服务器： 如果commitIndex &gt; lastApplied，lastApplied自增，将log[lastApplied]应用到状态机（5.3节） 如果 RPC 的请求或者响应中包含一个 term T 大于 currentTerm，则currentTerm赋值为 T，并切换状态为追随者（Follower）（5.1节） 追随者（followers）: 5.2节 响应来自候选人和领导人的 RPC 如果在超过选取领导人时间之前没有收到来自当前领导人的AppendEntries RPC或者没有收到候选人的投票请求，则自己转换状态为候选人 候选人：5.2节 转变为选举人之后开始选举： currentTerm自增 给自己投票 重置选举计时器 向其他服务器发送RequestVote RPC 如果收到了来自大多数服务器的投票：成为领导人 如果收到了来自新领导人的AppendEntries RPC（heartbeat）：转换状态为追随者 如果选举超时：开始新一轮的选举 领导人： 一旦成为领导人：向其他所有服务器发送空的AppendEntries RPC（heartbeat）;在空闲时间重复发送以防止选举超时（5.2节） 如果收到来自客户端的请求：向本地日志增加条目，在该条目应用到状态机后响应客户端（5.3节） 对于一个追随者来说，如果上一次收到的日志索引大于将要收到的日志索引（nextIndex）：通过 1AppendEntries RPC 将 nextIndex 之后的所有日志条目发送出去 如果发送成功：将该追随者的 nextIndex和matchIndex更新 如果由于日志不一致导致AppendEntries RPC失败：nextIndex递减并且重新发送（5.3节） 如果存在一个满足N &gt; commitIndex和matchIndex[i] &gt;= N并且log[N].term == currentTerm的 N，则将commitIndex赋值为 N 表-2-iv 表-2：Raft 一致性算法的总结（不包括成员变化 membership changes 和日志压缩 log compaction） 性质 描述 选举安全原则（Election Safety） 一个任期（term）内最多允许有一个领导人被选上（5.2节） 领导人只增加原则（Leader Append-Only） 领导人永远不会覆盖或者删除自己的日志，它只会增加条目 日志匹配原则（Log Matching） 如果两个日志在相同的索引位置上的日志条目的任期号相同，那么我们就认为这个日志从头到这个索引位置之间的条目完全相同（5.3 节） 领导人完全原则（Leader Completeness) 如果一个日志条目在一个给定任期内被提交，那么这个条目一定会出现在所有任期号更大的领导人中 状态机安全原则（State Machine Safety） 如果一个服务器已经将给定索引位置的日志条目应用到状态机中，则所有其他服务器不会在该索引位置应用不同的条目（5.4.3节） 表-3：Raft 算法保证这些特性任何时刻都成立 Raft 通过首先选出一个领导人来实现一致性，然后给予领导人完全管理复制日志（replicated log）的责任。领导人接收来自客户端的日志条目，并把它们复制到其他的服务器上，领带人还要告诉服务器们什么时候将日志条目应用到它们的状态机是安全的。通过选出领导人能够简化复制日志的管理工作。例如，领导人能够决定将新的日志条目放到哪，而并不需要和其他的服务器商议，数据流被简化成从领导人流向其他服务器。如果领导人宕机或者和其他服务器失去连接，就可以选取下一个领导人。 通过选出领导人，Raft 将一致性问题分解成为三个相对独立的子问题： 领导人选取（Leader election）： 在一个领导人宕机之后必须要选取一个新的领导人（5.2节） 日志复制（Log replication）： 领导人必须从客户端接收日志然后复制到集群中的其他服务器，并且强制要求其他服务器的日志保持和自己相同 安全性（Safety）： Raft 的关键的安全特性是 表-3 中提到的状态机安全原则（State Machine Safety）:如果一个服务器已经将给定索引位置的日志条目应用到状态机中，则所有其他服务器不会在该索引位置应用不同的条目。5.4节阐述了 Raft 是如何保证这条原则的，解决方案涉及到一个对于选举机制另外的限制，这一部分会在 5.2节 中说明。 在说明了一致性算法之后，本章会讨论有关可用性（availability）的问题和系统中时序（timing）的问题。 5.1 Raft 基础一个 Raft 集群包括若干服务器；对于一个典型的 5 服务器集群，该集群能够容忍 2 台机器不能正常工作，而整个系统保持正常。在任意的时间，每一个服务器一定会处于以下三种状态中的一个：领导人、候选人、追随者。在正常情况下，只有一个服务器是领导人，剩下的服务器是追随者。追随者们是被动的：他们不会发送任何请求，只是响应来自领导人和候选人的请求。领导人来处理所有来自客户端的请求（如果一个客户端与追随者进行通信，追随者会将信息发送给领导人）。候选人是用来选取一个新的领导人的，这一部分会在 5.2节 进行阐释。图-4 阐述了这些状态，和它们之间的转换；它们的转换会在下边进行讨论。 图-4：服务器的状态。追随者只响应其他服务器的请求。如果追随者没有收到任何消息，它会成为一个候选人并且开始一次选举。收到大多数服务器投票的候选人会成为新的领导人。领导人在它们宕机之前会一直保持领导人的状态。 图-5：时间被分为一个个的任期（term），每一个任期的开始都是领导人选举。在成功选举之后，一个领导人会在任期内管理整个集群。如果选举失败，该任期就会因为没有领带人而结束。这个转变会在不同的时间的不同服务器上观察到。 如 图-5 所示，Raft 算法将时间划分成为任意不同长度的任期（term）。任期用连续的数字进行表示。每一个任期的开始都是一次选举（election），就像 5.2节 所描述的那样，一个或多个候选人会试图成为领导人。如果一个候选人赢得了选举，它就会在该任期的剩余时间担任领导人。在某些情况下，选票会被瓜分，有可能没有选出领导人，那么，将会开始另一个任期，并且立刻开始下一次选举。Raft 算法保证在给定的一个任期最少要有一个领导人。 不同的服务器可能会在任期内观察到多次不同的状态转换，在某些情况下，一台服务器可能看不到一次选举或者一个完整的任期。任期在 Raft 中充当逻辑时钟的角色，并且它们允许服务器检测过期的信息，比如过时的领导人。每一台服务器都存储着一个当前任期的数字，这个数字会单调的增加。当服务器之间进行通信时，会互相交换当前任期号；如果一台服务器的当前任期号比其它服务器的小，则更新为较大的任期号。如果一个候选人或者领导人意识到它的任期号过时了，它会立刻转换为追随者状态。如果一台服务器收到的请求的任期号是过时的，那么它会拒绝此次请求。 Raft 中的服务器通过远程过程调用（RPC）来通信，基本的 Raft 一致性算法仅需要 2 种 RPC。RequestVote RPC 是候选人在选举过程中触发的（5.2节），AppendEntries RPC 是领导人触发的，为的是复制日志条目和提供一种心跳（heartbeat）机制（5.3节）。第7章加入了第三种 RPC 来在各个服务器之间传输快照（snapshot）。如果服务器没有及时收到 RPC 的响应，它们会重试，并且它们能够并行的发出 RPC 来获得最好的性能。 5.2 领导人选取Raft 使用一种心跳机制（heartbeat）来触发领导人的选取。当服务器启动时，它们会初始化为追随者。一太服务器会一直保持追随者的状态只要它们能够收到来自领导人或者候选人的有效 RPC。领导人会向所有追随者周期性发送心跳（heartbeat，不带有任何日志条目的 AppendEntries RPC）来保证它们的领导人地位。如果一个追随者在一个周期内没有收到心跳信息，就叫做选举超时（election timeout）,然后它就会假定没有可用的领导人并且开始一次选举来选出一个新的领导人。 为了开始选举，一个追随者会自增它的当前任期并且转换状态为候选人。然后，它会给自己投票并且给集群中的其他服务器发送 RequestVote RPC。一个候选人会一直处于该状态，直到下列三种情形之一发生： 它赢得了选举； 另一台服务器赢得了选举； 一段时间后没有任何一台服务器赢得了选举 这些情形会在下面的章节中分别讨论。 一个候选人如果在一个任期内收到了来自集群中大多数服务器的投票就会赢得选举。在一个任期内，一台服务器最多能给一个候选人投票，按照先到先服务原则（first-come-first-served）（注意：在 5.4节 针对投票添加了一个额外的限制）。大多数原则使得在一个任期内最多有一个候选人能赢得选举（表-3 中提到的选举安全原则）。一旦有一个候选人赢得了选举，它就会成为领导人。然后它会像其他服务器发送心跳信息来建立自己的领导地位并且组织新的选举。 当一个候选人等待别人的选票时，它有可能会收到来自其他服务器发来的声明其为领导人的 AppendEntries RPC。如果这个领导人的任期（包含在它的 RPC 中）比当前候选人的当前任期要大，则候选人认为该领导人合法，并且转换自己的状态为追随者。如果在这个 RPC 中的任期小于候选人的当前任期，则候选人会拒绝此次 RPC， 继续保持候选人状态。 第三种情形是一个候选人既没有赢得选举也没有输掉选举：如果许多追随者在同一时刻都成为了候选人，选票会被分散，可能没有候选人能获得大多数的选票。当这种情形发生时，每一个候选人都会超时，并且通过自增任期号和发起另一轮 RequestVote RPC 来开始新的选举。然而，如果没有其它手段来分配选票的话，这种情形可能会无限的重复下去。 Raft 使用随机的选举超时时间来确保第三种情形很少发生，并且能够快速解决。为了防止在一开始是选票就被瓜分，选举超时时间是在一个固定的间隔内随机选出来的（例如，150~300ms）。这种机制使得在大多数情况下只有一个服务器会率先超时，它会在其它服务器超时之前赢得选举并且向其它服务器发送心跳信息。同样的机制被用于选票一开始被瓜分的情况下。每一个候选人在开始一次选举的时候会重置一个随机的选举超时时间，在超时进行下一次选举之前一直等待。这能够减小在新的选举中一开始选票就被瓜分的可能性。9.3节 展示了这种方法能够快速的选出一个领导人。 选举是一个理解性引导我们设计替代算法的一个例子。最开始时，我们计划使用一种排名系统：给每一个候选人分配一个唯一的排名，用于在竞争的候选人之中选择领导人。如果一个候选人发现了另一个比它排名高的候选人，那么它会回到追随者的状态，这样排名高的候选人会很容易地赢得选举。但是我们发现这种方法在可用性方面有一点问题（一个低排名的服务器在高排名的服务器宕机后，需要等待超时才能再次成为候选人，但是如果它这么做的太快，它能重置选举领带人的过程）。我们对这个算法做了多次调整，但是每次调整后都会出现一些新的问题。最终我们认为随机重试的方法是更明确并且更易于理解的。 5.3 日志复制一旦选出了领导人，它就开始接收客户端的请求。每一个客户端请求都包含一条需要被复制状态机（replicated state machine）执行的命令。领导人把这条命令作为新的日志条目加入到它的日志中去，然后并行的向其他服务器发起 AppendEntries RPC ，要求其它服务器复制这个条目。当这个条目被安全的复制之后（下面的部分会详细阐述），领导人会将这个条目应用到它的状态机中并且会向客户端返回执行结果。如果追随者崩溃了或者运行缓慢或者是网络丢包了，领导人会无限的重试 AppendEntries RPC（甚至在它向客户端响应之后）知道所有的追随者最终存储了所有的日志条目。 img 图-6：日志由有序编号的日志条目组成。每个日志条目包含它被创建时的任期号（每个方块中的数字），并且包含用于状态机执行的命令。如果一个条目能够被状态机安全执行，就被认为可以提交了。 日志就像 图-6 所示那样组织的。每个日志条目存储着一条被状态机执行的命令和当这条日志条目被领导人接收时的任期号。日志条目中的任期号用来检测在不同服务器上日志的不一致性，并且能确保 图-3 中的一些特性。每个日志条目也包含一个整数索引来表示它在日志中的位置。 领导人决定什么时候将日志条目应用到状态机是安全的；这种条目被称为可被提交（commited）。Raft 保证可被提交（commited）的日志条目是持久化的并且最终会被所有可用的状态机执行。一旦被领导人创建的条目已经复制到了大多数的服务器上，这个条目就称为可被提交的（例如，图-6中的7号条目）。领导人日志中之前的条目都是可被提交的（commited），包括由之前的领导人创建的条目。5.4节将会讨论当领导人更替之后这条规则的应用问题的细节，并且也讨论了这种提交方式是安全的。领导人跟踪记录它所知道的被提交条目的最大索引值，并且这个索引值会包含在之后的 AppendEntries RPC 中（包括心跳 heartbeat 中），为的是让其他服务器都知道这条条目已经提交。一旦一个追随者知道了一个日志条目已经被提交，它会将该条目应用至本地的状态机（按照日志顺序）。 我们设计了 Raft 日志机制来保证不同服务器上日志的一致性。这样做不仅简化了系统的行为使得它更可预测，并且也是保证安全性不可或缺的一部分。Raft 保证以下特性，并且也保证了 表-3 中的日志匹配原则（Log Matching Property）: 如果在不同日志中的两个条目有着相同的索引和任期号，则它们所存储的命令是相同的。 如果在不同日志中的两个条目有着相同的索引和任期号，则它们之间的所有条目都是完全一样的。 第一条特性源于领导人在一个任期里在给定的一个日志索引位置最多创建一条日志条目，同时该条目在日志中的位置也从来不会改变。第二条特性源于 AppendEntries 的一个简单的一致性检查。当发送一个 AppendEntries RPC 时，领导人会把新日志条目紧接着之前的条目的索引位置和任期号都包含在里面。如果追随者没有在它的日志中找到相同索引和任期号的日志，它就会拒绝新的日志条目。这个一致性检查就像一个归纳步骤：一开始空的日志的状态一定是满足日志匹配原则的，一致性检查保证了当日志添加时的日志匹配原则。因此，只要 AppendEntries 返回成功的时候，领导人就知道追随者们的日志和它的是一致的了。 图-7：当最上边的领导人掌权之后，追随者日志可能有以下情况（a~f）。一个格子表示一个日志条目；格子中的数字是它的任期。一个追随者可能会丢失一些条目（a, b）；可能多出来一些未提交的条目（c, d）；或者两种情况都有（e, f）。例如，场景 f 在如下情况下就会发生：如果一台服务器在任期2时是领导人并且往它的日志中添加了一些条目，然后在将它们提交之前就宕机了，之后它很快重启了，成为了任期3的领导人，又往它的日志中添加了一些条目，然后在任期2和任期3中的条目提交之前它又宕机了并且几个任期内都一直处于宕机状态。 在一般情况下，领导人和追随者们的日志保持一致，因此 AppendEntries 一致性检查通常不会失败。然而，领导人的崩溃会导致日志不一致（旧的领导人可能没有完全复制完日志中的所有条目）。这些不一致会导致一系列领导人和追随者崩溃。图-7 阐述了一些追随者可能和新的领导人日志不同的情况。一个追随者可能会丢失掉领导人上的一些条目，也有可能包含一些领导人没有的条目，也有可能两者都会发生。丢失的或者多出来的条目可能会持续多个任期。 在 Raft 算法中，领导人通过强制追随者们复制它的日志来处理日志的不一致。这就意味着，在追随者上的冲突日志会被领导者的日志覆盖。5.4节会说明当添加了一个额外的限制之后这是安全的。 为了使得追随者的日志同自己的一致，领导人需要找到追随者同它的日志一致的地方，然后删除追随者在该位置之后的条目，然后将自己在该位置之后的条目发送给追随者。这些操作都在 AppendEntries RPC 进行一致性检查时完成。领导人给每一个追随者维护了一个nextIndex，它表示领导人将要发送给该追随者的下一条日志条目的索引。当一个领导人开始掌权时，它会将nextIndex初始化为它的最新的日志条目索引数+1（图-7 中的 11）。如果一个追随者的日志和领导者的不一致，AppendEntries 一致性检查会在下一次 AppendEntries RPC 时返回失败。在失败之后，领导人会将nextIndex递减然后重试 AppendEntries RPC。最终nextIndex会达到一个领导人和追随者日志一致的地方。这时，AppendEntries 会返回成功，追随者中冲突的日志条目都被移除了，并且添加所缺少的上了领导人的日志条目。一旦 AppendEntries 返回成功，追随者和领导人的日志就一致了，这样的状态会保持到该任期结束。 如果需要的话，算法还可以进行优化来减少 AppendEntries RPC 失败的次数。例如，当拒绝了一个 AppendEntries 请求，追随者可以记录下冲突日志条目的任期号和自己存储那个任期的最早的索引。通过这些信息，领导人能够直接递减nextIndex跨过那个任期内所有的冲突条目；这样的话，一个冲突的任期需要一次 AppendEntries RPC，而不是每一个冲突条目需要一次 AppendEntries RPC。在实践中，我们怀疑这种优化是否是必要的，因为AppendEntries 一致性检查很少失败并且也不太可能出现大量的日志条目不一致的情况。 通过这种机制，一个领导人在掌权时不需要采取另外特殊的方式来恢复日志的一致性。它只需要使用一些常规的操作，通过响应 AppendEntries 一致性检查的失败能使得日志自动的趋于一致。一个领导人从来不会覆盖或者删除自己的日志（表-3 中的领导人只增加原则）。 这个日志复制机制展示了在第2章中阐述的所希望的一致性特性：Raft 能够接受，复制并且应用新的日志条目只要大部分的服务器是正常的。在通常情况下，一条新的日志条目可以在一轮 RPC 内完成在集群的大多数服务器上的复制；并且一个速度很慢的追随者并不会影响整体的性能。 5.4 安全性之前的章节中讨论了 Raft 算法是如何进行领导选取和复制日志的。然而，到目前为止这个机制还不能保证每一个状态机能按照相同的顺序执行同样的指令。例如，当领导人提交了若干日志条目的同时一个追随者可能宕机了，之后它又被选为了领导人然后用新的日志条目覆盖掉了旧的那些，最后，不同的状态机可能执行不同的命令序列。 这一节通过在领带人选取部分加入了一个限制来完善了 Raft 算法。这个限制能够保证对于固定的任期，任何的领导人都拥有之前任期提交的全部日志条目（表-3 中的领导人完全原则）。有了这一限制，日志提交的规则就更清晰了。最后，我们提出了对于领导人完全原则的简单证明并且展示了它是如何修正复制状态机的行为的。 5.4.1 选举限制在所有的以领导人为基础的一致性算法中，领导人最终必须要存储全部已经提交的日志条目。在一些一致性算法中，例如：Viewstamped Replication，即使一开始没有包含全部已提交的条目也可以被选为领导人。这些算法都有一些另外的机制来保证找到丢失的条目并将它们传输给新的领导人，这个过程要么在选举过程中完成，要么在选举之后立即开始。不幸的是，这种方式大大增加了复杂性。Raft 使用了一种更简单的方式来保证在新的领导人开始选举的时候在之前任期的所有已提交的日志条目都会出现在上边，而不需要将这些条目传送给领导人。这就意味着日志条目只有一个流向：从领导人流向追随者。领导人永远不会覆盖已经存在的日志条目。 Raft 使用投票的方式来阻止没有包含全部日志条目的服务器赢得选举。一个候选人为了赢得选举必须要和集群中的大多数进行通信，这就意味着每一条已经提交的日志条目最少在其中一台服务器上出现。如果候选人的日志至少和大多数服务器上的日志一样新（up-to-date，这个概念会在下边有详细介绍），那么它一定包含有全部的已经提交的日志条目。RequestVote RPC 实现了这个限制：这个 RPC（远程过程调用）包括候选人的日志信息，如果它自己的日志比候选人的日志要新，那么它会拒绝候选人的投票请求。 Raft 通过比较日志中最后一个条目的索引和任期号来决定两个日志哪一个更新。如果两个日志的任期号不同，任期号大的更新；如果任期号相同，更长的日志更新。 5.4.2 提交之前任期的日志条目 img 图-8：如图的时间序列说明了为什么领导人不能通过之前任期的日志条目判断它的提交状态。（a）中的 S1 是领导人并且部分复制了索引2上的日志条目。（b）中 S1 崩溃了；S5 通过 S3，S4 和自己的选票赢得了选举，并且在索引2上接收了另一条日志条目。（c）中 S5 崩溃了，S1 重启了，通过 S2，S3 和自己的选票赢得了选举，并且继续索引2处的复制，这时任期2的日志条目已经在大部分服务器上完成了复制，但是还并没有提交。如果在（d）时刻 S1 崩溃了，S5 会通过 S2，S3，S4 的选票成为领导人，然后用它自己在任期3的日志条目覆盖掉其他服务器的日志条目。然而，如果在崩溃之前，S1 在它的当前任期在大多数服务器上复制了一条日志条目，就像在（e）中那样，那么这条条目就会被提交（S5就不会赢得选举）。在这时，之前的日志条目就会正常被提交。 正如 5.3节 中描述的那样，只要一个日志条目被存在了在多数的服务器上，领导人就知道当前任期就可以提交该条目了。如果领导人在提交之前就崩溃了，之后的领导人会试着继续完成对日志的复制。然而，领导人并不能断定存储在大多数服务器上的日志条目一定在之前的任期中被提交了。图-8 说明了一种情况，一条存储在了大多数服务器上的日志条目仍然被新上任的领导人覆盖了。 为了消除 图-8 中描述的问题，Raft 从来不会通过计算复制的数目来提交之前人气的日志条目。只有领导人当前任期的日志条目才能通过计算数目来进行提交。一旦当前任期的日志条目以这种方式被提交，那么由于日志匹配原则（Log Matching Property），之前的日志条目也都会被间接的提交。在某些情况下，领导人可以安全的知道一个老的日志条目是否已经被提交（例如，通过观察该条目是否存储到所有服务器上），但是 Raft 为了简化问题使用了一种更加保守的方法。 因为当领导人从之前任期复制日志条目时日志条目保留了它们最开始的任期号，所以这使得 Raft 在提交规则中增加了额外的复杂性。在其他的一致性算法中，如果一个新的领导人要从之前的任期中复制日志条目，它必须要使用当前的新任期号。Raft 的方法使得判断日志更加容易，因为它们全程都保持着同样的任期号。另外，和其它的一致性算法相比，Raft 算法中的新领导人会发送更少的之前任期的日志条目（其他算法必须要发送冗余的日志条目并且在它们被提交之前来重新排序）。 5.4.3 安全性论证 img 图-9：如果 S1（任期 T 的领导人）在它的任期提交了一条日志条目，并且 S5 在之后的任期 U 成为了领导人，那么最少会有一台服务器（S3）接收了这条日志条目并且会给 S5 投票。 给出了完整的 Raft 算法，现在我们能够更精确的论证领导人完全原则（Leader Completeness)（这基于 9.2节 提出的安全性证明）。我们假定领导人完全原则是不成立的，然后推导出矛盾。假定任期 T 的领导人 leaderT在它的任期提交了一个日志条目，但是这条日志条目并没有存储在之后的任期中的领导人上。我们设大于 T 的最小的任期 U 的领导人（leaderU） 没有存储这条日志条目。 在 leaderU 选举时一定没有那条被提交的日志条目（领导人从来不会删除或者覆盖日志条目）。 leaderT 复制了这个条目到集群的大多数的服务器上。因此，只是有一台服务器（投票者）即接收了来自 leaderT 的日志条目并且给 leaderU 投票，就像 图-9 中所示那样。这个投票者是产生矛盾的关键。 投票者必须在给 leaderU 投票之前接收来自 leaderT 的日志条目；否则它会拒绝来自 leaderT 的 AppendEntries 请求（它的当前任期会比 T 要大）。 投票者会在它给 leaderU 投票时存储那个条目，因为任何中间的领导人都保有该条目（基于假设），领导人从来不会移除这个条目，并且追随者也只会在和领导人冲突时才会移除日志条目。 投票者给 leaderU 投票了，所以 leaderU 的日志必须和投票者的一样新。这就导致了一个矛盾。 首先，如果投票者和 leaderU 最后一条日志条目的任期号相同，那么 leaderU 的日志一定和投票者的一样长，因此它的日志包含全部投票者的日志条目。这是矛盾的，因为在假设中投票者和 leaderU 包含的已提交条目是不同的。 除此之外， leaderU 的最后一条日志的任期号一定比投票者的大。另外，它也比 T 要大，因为投票者的最后一条日志条目的任期号最小也要是 T（它包含了所有任期 T 提交的日志条目）。创建 leaderU 最后一条日志条目的上一任领导人必须包含已经提交的日志条目（基于假设）。那么，根据日志匹配原则（Log Matching），leaderU 也一定包含那条提交的日志条目，这也是矛盾的。 这时就完成了矛盾推导。因此，所有比任期 T 大的领导人一定包含所有在任期 T 提交的日志条目。 日志匹配原则（Log Matching）保证了未来的领导人也会包含被间接提交的日志条目，就像 图-8 中（d）时刻索引为2的条目。 通过给出了 领导人完全原则（Leader Completeness)，我们能够证明 表-3 中的状态机安全原则（State Machine Safety），状态机安全原则（State Machine Safety）讲的是如果一台服务器将给定索引上的日志条目应用到了它自己的状态机上，其它服务器的同一索引位置不可能应用的是其它条目。在一个服务器应用一条日志条目到它自己的状态机中时，它的日志必须和领导人的日志在该条目和之前的条目上相同，并且已经被提交。现在我们来考虑在任何一个服务器应用一个指定索引位置的日志的最小任期；日志完全特性（Log Completeness Property）保证拥有更高任期号的领导人会存储相同的日志条目，所以之后的任期里应用某个索引位置的日志条目也会是相同的值。因此，状态机安全特性是成立的。 最后，Raft 算法需要服务器按照日志中索引位置顺序应用日志条目。和状态机安全特性结合起来看，这就意味着所有的服务器会应用相同的日志序列集到自己的状态机中，并且是按照相同的顺序。 5.5 追随者和候选人崩溃截止到目前，我们只讨论了领导人崩溃的问题。追随者和候选人崩溃的问题解决起来要比领导人崩溃要简单得多，这两者崩溃的处理方式是一样的。如果一个追随者或者候选人崩溃了，那么之后的发送给它的 RequestVote RPC 和 AppendEntries RPC 会失败。Raft 通过无限的重试来处理这些失败；如果崩溃的服务器重启了，RPC 就会成功完成。如果一个服务器在收到了 RPC 之后但是在响应之前崩溃了，那么它会在重启之后再次收到同一个 RPC。因为 Raft 中的 RPC 都是幂等的，因此不会有什么问题。例如，如果一个追随者收到了一个已经包含在它的日志中的 AppendEntries 请求，它会忽视这个新的请求。 5.6 时序和可用性我们对于 Raft 的要求之一就是安全性不依赖于时序（timing）：系统不能仅仅因为一些事件发生的比预想的快一些或慢一些就产生错误。然而，可用性（系统可以及时响应客户端的特性）不可避免的要依赖时序。例如，如果消息交换在服务器崩溃时花费更多的时间，候选人不会等待太长的时间来赢得选举；没有一个稳定的领导人，Raft 将无法工作。 领导人选取是 Raft 中对时序要求最关键的地方。Raft 会选出并且保持一个稳定的领导人只有系统满足下列时序要求（timing requirement）： broadcastTime &lt;&lt; electionTimeout &lt;&lt; MTBF 在这个不等式中，broadcastTime指的是一台服务器并行的向集群中的其他服务器发送 RPC 并且收到它们的响应的平均时间；electionTimeout指的就是在 5.2节 描述的选举超时时间；MTBF指的是单个服务器发生故障的间隔时间的平均数。broadcastTime应该比electionTimeout小一个数量级，为的是使领导人能够持续发送心跳信息（heartbeat）来阻止追随者们开始选举；根据已经给出的随机化选举超时时间方法，这个不等式也使得瓜分选票的情况变成不可能。electionTimeout也要比MTBF小几个数量级，为的是使得系统稳定运行。当领导人崩溃时，整个大约会在electionTimeout的时间内不可用；我们希望这种情况仅占全部时间的很小的一部分。 broadcastTime和MTBF是由系统决定的性质，但是electionTimeout是我们必须做出选择的。Raft 的 RPC 需要接收方将信息持久化的保存到稳定存储中去，所以广播时间大约是 0.5 毫秒到 20 毫秒，这取决于存储的技术。因此，electionTimeout一般在 10ms 到 500ms 之间。大多数的服务器的MTBF都在几个月甚至更长，很容易满足这个时序需求。 6. 集群成员变化截止到目前，我们都假定集群的配置（加入到一致性算法的服务器集合）是固定的。在实际中，我们会经常更改配置，例如，替换掉那些崩溃的机器或者更改复制级别。虽然通过关闭整个集群，升级配置文件，然后重启整个集群也可以解决这个问题，但是这回导致在更改配置的过程中，整个集群不可用。另外，如果存在需要手工操作，那么就会有操作失误的风险。为了避免这些问题，我们决定采用自动改变配置并且把这部分加入到了 Raft 一致性算法中。 为了让配置修改机制能够安全，那么在转换的过程中在任何时间点两个领导人不能再同一个任期被同时选为领导人。不幸的是，服务器集群从旧的配置直接升级到新的配置的任何方法都是不安全的，一次性自动的转换所有服务器是不可能的，所以集群可以在转换的过程中划分成两个单独的组（如 图-10 所示）。 图-10：从一个配置切换到另一个配置是不安全的因为不同的服务器会在不同的时间点进行切换。在这个例子中，集群数量从三台转换成五台。不幸的是，在一个时间点有两个服务器能被选举成为领导人，一个是在使用旧的配置的机器中（Cold）选出的领导人，另一个领导人是通过新的配置（Cnew）选出来的。 为了保证安全性，集群配置的调整必须使用两阶段（two-phase）方法。有许多种实现两阶段方法的实现。例如，一些系统在第一个阶段先把旧的配置设为无效使得它无法处理客户端请求，然后在第二阶段启用新的配置。在 Raft 中，集群先切换到一个过渡配置，我们称其为共同一致（joint consensus）；一旦共同一致被提交了，然后系统再切换到新的配置。共同一致是旧的配置和新的配置的组合： 日志条目被复制给集群中新、老配置的所有服务器。 新、老配置的服务器都能成为领导人。 需要分别在两种配置上获得大多数的支持才能达成一致（针对选举和提交） 共同一致允许独立的服务器在不影响安全性的前提下，在不同的时间进行配置转换过程。此外，共同一致可以让集群在配置转换的过程中依然能够响应服务器请求。 图-11：集群配置变更的时间线。虚线表示的是已经被创建但是还没提交的配置条目，实线表示的是最新提交的配置条目。领导人首先在它的日志中创建 Cold,new配置条目并且将它提交到Cold,new（使用旧配置的大部分服务器和使用新配置的大部分服务器）。然后创建它创建Cnew配置条目并且将它提交到使用新配置的大部分机器上。这样就不存在Cold和Cnew能够分别同时做出决定的时刻。 集群配置在复制日志中用特殊的日志条目来存储和通信；图-11 展示了配置变更的过程。当一个领导人接收到一个改变配置 Cold 为 Cnew 的请求，它会为了共同一致以前面描述的日志条目和副本的形式将配置存储起来（图中的 Cold,new）。一旦一个服务器将新的配置日志条目增加到它的日志中，它就会用这个配置来做出未来所有的决定（服务器总是使用最新的配置，无论它是否已经被提交）。这意味着领导人要使用 Cold,new 的规则来决定日志条目 Cold,new 什么时候需要被提交。如果领导人崩溃了，被选出来的新领导人可能是使用 Cold 配置也可能是 Cold,new 配置，这取决于赢得选举的候选人是否已经接收到了 Cold,new 配置。在任何情况下， Cnew 配置在这一时期都不会单方面的做出决定。 一旦 Cold,new 被提交，那么无论是 Cold 还是 Cnew，在没有经过他人批准的情况下都不可能做出决定，并且领导人完全特性（Leader Completeness Property）保证了只有拥有 Cold,new 日志条目的服务器才有可能被选举为领导人。这个时候，领导人创建一条关于 Cnew 配置的日志条目并复制给集群就是安全的了。另外，每个服务器在收到新的配置的时候就会立即生效。当新的配置在 Cnew的规则下被提交，旧的配置就变得无关紧要，同时不使用新的配置的服务器就可以被关闭了。如 图-11，Cold 和 Cnew 没有任何机会同时做出单方面的决定；这就保证了安全性。 针对重新配置提出了三个问题。第一个问题是一开始的时候新的服务器可能没有任何日志条目。如果它们在这个状态下加入到集群中，那么它们需要一段时间来更新追赶，在这个阶段它们还不能提交新的日志条目。为了避免这种可用性的间隔时间，Raft 在配置更新的时候使用了一种额外的阶段，在这个阶段，新的服务器以没有投票权的身份加入到集群中来（领导人复制日志给他们，但是不把它们考虑到大多数中）。一旦新的服务器追赶上了集群中的其它机器，重新配置可以像上面描述的一样处理。 第二个问题是，集群的领导人可能不是新配置的一员。在这种情况下，领导人就会在提交了 Cnew日志之后退位（回到跟随者状态）。这意味着有这样的一段时间，领导人管理着集群，但是不包括自己；它复制日志但是不把它自己看作是大多数之一。当 Cnew 被提交时，会发生领导人过渡，因为这时是新的配置可以独立工作的最早的时间点（总是能够在 Cnew 配置下选出新的领导人）。在此之前，可能只能从 Cold 中选出领导人。 第三个问题是，移除不在 Cnew 中的服务器可能会扰乱集群。这些服务器将不会再接收到心跳（heartbeat），所以当选举超时时，它们就会进行新的选举过程。它们会发送带有新的任期号的 RequestVote RPC，这样会导致当前的领导人回退成跟随者状态。新的领导人最终会被选出来，但是被移除的服务器将会再次超时，然后这个过程会再次重复，导致整体可用性大幅降低。 为了避免这个问题，当服务器确认当前领导人存在时，服务器会忽略 RequestVote RPC。特别的，当服务器在当前最小选举超时时间内收到一个 RequestVote RPC，它不会更新当前的任期号或者投出选票。这不会影响正常的选举，每个服务器在开始一次选举之前，至少等待一个最小选举超时时间。然而，这有利于避免被移除的服务器扰乱：如果领导人能够发送心跳给集群，那么它就不会被更大的任期号废除。 7. 日志压缩Raft 产生的日志在持续的正常操作中不断增长，但是在实际的系统中，它不会无限的增长下去。随着日志的不断增长，它会占据越来越多的空间并且花费更多的时间重置。如果没有一个机制使得它能够废弃在日志中不断累积的过时的信息就会引起可用性问题。 快照（snapshot）是最简单的压缩方式。在快照中，全部的当前系统状态都被写入到快照中，存储到持久化的存储中，然后在那个时刻之前的全部日志都可以被丢弃。在 Chubby 和 ZooKeeper 中都使用了快照技术，这一章的剩下的部分会介绍 Raft 中使用的快照技术。 增量压缩（incremental approaches）的方法，例如日志清理（log cleaning）或者日志结构合并树（log-structured merge trees），都是可行的。这些方法每次只对一小部分数据进行操作，这样就分散了压缩的负载压力。首先，他们先选择一个已经积累的大量已经被删除或者被覆盖对象的区域，然后重写那个区域还活跃的对象，之后释放那个区域。和简单操作整个数据集合的快照相比，需要增加复杂的机制来实现。状态机可以使用和快照相同的接口来实现 LSM tree ，但是日志清除方法就需要修改 Raft 了。 图-12：一个服务器用新的快照替换了从 1 到 5 的条目，快照值存储了当前的状态。快照中包含了最后的索引位置和任期号。 图-12 展示了 Raft 中快照的基础思想。每个服务器独立的创建快照，只包括已经被提交的日志。主要的工作包括将状态机的状态写入到快照中。Raft 也将一些少量的元数据包含到快照中：最后被包含的索引（last included index）指的是被快照取代的最后的条目在日志中的索引值（状态机最后应用的日志），最后被包含的任期（last included term）指的是该条目的任期号。保留这些数据是为了支持快照前的第一个条目的附加日志请求时的一致性检查，因为这个条目需要最后的索引值和任期号。为了支持集群成员更新（第 6 章），快照中也将最后的一次配置作为最后一个条目存下来。一旦服务器完成一次快照，他就可以删除最后索引位置之前的所有日志和快照了。 尽管通常服务器都是独立的创建快照，但是领导人必须偶尔的发送快照给一些落后的跟随者。这通常发生在当领导人已经丢弃了下一条需要发送给跟随者的日志条目的时候。幸运的是这种情况不是常规操作：一个与领导人保持同步的跟随者通常都会有这个条目。然而一个运行非常缓慢的跟随者或者新加入集群的服务器（第 6 章）将不会有这个条目。这时让这个跟随者更新到最新的状态的方式就是通过网络把快照发送给它们。 安装快照 RPC（InstallSnapshot RPC）\\ 在领导人发送快照给跟随者时使用调用。领导人总是按顺序发送。 参数 描述 term 领导人的任期 leaderId 为了追随者能重定向到客户端 lastIncludedIndex 快照中包含的最后日志条目的索引值 lastIncludedTerm 快照中包含的最后日志条目的任期号 offset 分块在快照中的偏移量 data[] 快照块的原始数据 done 如果是最后一块数据则为真 返回值 描述 term currentTerm，用于领导人更新自己 接受者需要实现： 如果term &lt; currentTerm立刻回复 如果是第一个分块（offset 为 0）则创建新的快照 在指定的偏移量写入数据 如果 done为 false，则回复并继续等待之后的数据 保存快照文件，丢弃所有存在的或者部分有着更小索引号的快照 如果现存的日志拥有相同的最后任期号和索引值，则后面的数据继续保留并且回复 丢弃全部日志 能够使用快照来恢复状态机（并且装载快照中的集群配置） 表-13：InstallSnapshot RPC 的总结。为了便于传输，快照都是被分成分块的；每个分块都给了跟随者生存的信号，所以跟随者可以重置选举超时计时器。 在这种情况下领导人使用一种叫做安装快照（InstallSnapshot）的新的 RPC 来发送快照给太落后的跟随者；见 表-13。当跟随者通过这种 RPC 接收到快照时，它必须自己决定对于已经存在的日志该如何处理。通常快照会包含没有在接收者日志中存在的信息。在这种情况下，跟随者直接丢弃它所有的日志；这些会被快照所取代，但是可能会和没有提交的日志产生冲突。如果接收到的快照是自己日志的前面部分（由于网络重传或者错误），那么被快照包含的条目将会被全部删除，但是快照之后的条目必须是正确的和并且被保留下来。 这种快照的方式背离了 Raft 的强领导人原则（strong leader principle），因为跟随者可以在不知道领导人情况下创建快照。但是我们认为这种背离是值得的。领导人的存在，是为了解决在达成一致性的时候的冲突，但是在创建快照的时候，一致性已经达成，这时不存在冲突了，所以没有领导人也是可以的。数据依然是从领导人传给跟随者，只是跟随者可以重新组织它们的数据了。 我们考虑过一种替代的基于领导人的快照方案，即只有领导人创建快照，然后发送给所有的跟随者。但是这样做有两个缺点。第一，发送快照会浪费网络带宽并且延缓了快照处理的时间。每个跟随者都已经拥有了所有产生快照需要的信息，而且很显然，自己从本地的状态中创建快照比通过网络接收别人发来的要经济。第二，领导人的实现会更加复杂。例如，领导人需要发送快照的同时并行的将新的日志条目发送给跟随者，这样才不会阻塞新的客户端请求。 还有两个问题影响了快照的性能。首先，服务器必须决定什么时候应该创建快照。如果快照创建的过于频繁，那么就会浪费大量的磁盘带宽和其他资源；如果创建快照频率太低，它就要承受耗尽存储容量的风险，同时也增加了从日志重建的时间。一个简单的策略就是当日志大小达到一个固定大小的时候就创建一次快照。如果这个阈值设置的显著大于期望的快照的大小，那么快照对磁盘压力的影响就会很小了。 第二个影响性能的问题就是写入快照需要花费显著的一段时间，并且我们还不希望影响到正常操作。解决方案是通过写时复制（copy-on-write）的技术，这样新的更新就可以被接收而不影响到快照。例如，具有函数式数据结构的状态机天然支持这样的功能。另外，操作系统的写时复制技术的支持（如 Linux 上的 fork）可以被用来创建完整的状态机的内存快照（我们的实现就是这样的）。 8. 客户端交互这一节将介绍客户端是如何和 Raft 进行交互的，包括客户端是如何发现领导人的和 Raft 是如何支持线性化语义（linearizable semantics）的。这些问题对于所有基于一致性的系统都存在，并且 Raft 的解决方案和其他的也差不多。 Raft 中的客户端将所有请求发送给领导人。当客户端启动的时候，它会随机挑选一个服务器进行通信。如果客户端第一次挑选的服务器不是领导人，那么那个服务器会拒绝客户端的请求并且提供它最近接收到的领导人的信息（附加条目请求包含了领导人的网络地址）。如果领导人已经崩溃了，那么客户端的请求就会超时；客户端之后会再次重试随机挑选服务器的过程。 我们 Raft 的目标是要实现线性化语义（linearizable semantics）（每一次操作立即执行，在它调用和收到回复之间只执行一次）。但是，如上述所说，Raft 是可以多次执行同一条命令的：例如，如果领导人在提交了这条日志之后，但是在响应客户端之前崩溃了，那么客户端会和新的领导人重试这条指令，导致这条命令就被再次执行了。解决方案就是客户端对于每一条指令都赋予一个唯一的序列号。然后，状态机跟踪每条指令最新的序列号和相应的响应。如果接收到一条指令，它的序列号已经被执行了，那么就立即返回结果，而不重新执行指令。 只读（read-only）的操作可以直接处理而不需要记录日志。但是，在不增加任何限制的情况下，这么做可能会冒着返回过期数据(stale data)的风险，因为领导人响应客户端请求时可能已经被新的领导人作废了，但是它还不知道。线性化的读操作必须不能返回过期数据，Raft 需要使用两个额外的措施在不使用日志的情况下保证这一点。首先，领导人必须有关于被提交日志的最新信息。领导人完全原则（Leader Completeness Property）保证了领导人一定拥有所有已经被提交的日志条目，但是在它任期开始的时候，它可能不知道哪些是已经被提交的。为了知道这些信息，它需要在它的任期里提交一条日志条目。Raft 中通过领导人在任期开始的时候提交一个空白的没有任何操作的日志条目到日志中去来进行实现。第二，领导人在处理只读的请求之前必须检查自己是否已经被废除了（如果一个更新的领导人被选举出来，它自己的信息就已经过期了）。Raft 中通过让领导人在响应只读请求之前，先和集群中的大多数节点交换一次心跳（heartbeat）信息来处理这个问题。另外，领导人可以依赖心跳机制来实现一种租约的机制，但是这种方法依赖时序来保证安全性（它假设时间误差是有界的）。 9. 实现和评价我们已经为 RAMCloud 实现了 Raft 算法作为存储配置信息的复制状态机的一部分，并且帮助 RAMCloud 协调故障转移。这个 Raft 实现包含大约 2000 行 C++ 代码，其中不包括测试、注释和空行。这些代码是开源的。同时也有大约 25 个其他独立的第三方的基于这篇论文草稿的开源实现，针对不同的开发场景。同时，很多公司已经部署了基于 Raft 的系统。 这一章会从三个方面来评估 Raft 算法：可理解性、正确性和性能。 9.1 可理解性为了比较 Paxos 和 Raft 算法的可理解性，我们针对高层次的本科生和研究生，在斯坦福大学的高级操作系统课程和加州大学伯克利分校的分布式计算课程上，进行了一次学习的实验。我们分别拍了针对 Raft 和 Paxos 的视频课程，并准备了相应的小测验。Raft 的视频讲课覆盖了这篇论文除了日志压缩之外的所有内容；Paxos 课程包含了足够的资料来创建一个等价的复制状态机，包括单决策 Paxos，多决策 Paxos，重新配置和一些实际系统需要的性能优化（例如领导人选举）。小测验测试一些对算法的基本理解和解释一些示例。每个学生都是看完第一个视频，回答相应的测试，再看第二个视频，回答相应的测试。大约有一半的学生先进行 Paxos 部分，然后另一半先进行 Raft 部分，这是为了说明两者独立的区别从第一个算法处学来的经验。我们计算参加人员的每一个小测验的得分来看参与者是否对 Raft 的理解更好。 因素 消除偏见的手段 复习材料 相同的讲课质量 使用相同的讲师。Paxos 的讲义是基于之前在几所大学中使用的材料的并且做了改进。Paxos 的讲义要长 14% 视频 相同的测试难度 用难度给问题分组，在测试中成对出现 测验 公平的打分 使用红字标题。随机顺序打分，两个测验交替进行。 红字标题 表-1：考虑到的可能造成偏见的因素，以及解决方案和对应的复习材料 我们尽可能的使得 Paxos 和 Raft 的比较更加公平。这个实验偏爱 Paxos 表现在两个方面：43 个参加者中有 15 个人在之前有一些 Paxos 的经验，并且 Paxos 的视频要长 14%。如表-1 总结的那样，我们采取了一些措施来减轻这种潜在的偏见。我们所有的材料都可供审查。 图-14：表示了 43 个学生在 Paxos 和 Raft 的小测验中的成绩的散点图。在对角线之上的点表示在 Raft 获得了更高分数的学生。 参加者平均在 Raft 的测验中比 Paxos 高 4.9 分（总分 60，那么 Raft 的平均得分是 25.7，而 Paxos 是 20.8）；图-14 展示了每个参与者的得分。一对 t -测试表明，拥有 95% 的可信度，真实的 Raft 分数分布至少比 Paxos 高 2.5 分。 我们也建立了一个线性回归模型来预测一个新的学生的测验成绩，基于以下三个因素：他们使用的是哪个小测验，之前对 Paxos 的经验，和学习算法的顺序。模型显示，对小测验的选择会产生 12.5 分的差别在对 Raft 的好感度上。这显著的高于之前的 4.9 分，因为很多学生在之前都已经有了对于 Paxos 的经验，这相当明显的帮助 Paxos，对 Raft 就没什么太大影响了。但是奇怪的是，模型预测对于先进行 Paxos 小测验的人而言，Raft 的小测验得分会比 Paxos 低 6.3 分；我们不知道为什么，但这在统计学上是这样的。 图-15：通过一个 5 分制的问题，参与者（左边）被问哪个算法他们觉得在一个高效正确的系统里更容易实现，右边被问哪个更容易向学生解释。 我们同时也在测验之后调查了参与者，他们认为哪个算法更加容易实现和解释；这个的结果在图-15 上。压倒性的结果表明 Raft 算法更加容易实现和解释（41 人中的 33个）。但是，这种自己报告的结果不如参与者的成绩更加可信，并且参与者可能因为我们的 Raft 更加易于理解的假说而产生偏见。 关于 Raft 用户学习有一个更加详细的讨论，详见http://ramcloud.stanford.edu/ ̃ongaro/thesis.pdf 9.2 正确性在第5章，我们已经进行了一个正式的说明，和对一致性机制的安全性证明。这个正式说明通过 TLA+ 让 表-2 中的信息非常清晰。它大约有 400 行并且充当了证明的主题。同时对于任何想实现的人也是十分有用的。我们非常机械的通过 TLA 证明系统证明了日志完全特性（Log Completeness Property）。然而，这个证明依赖的约束前提还没有被机械证明（例如，我们还没有证明这个说明中的类型安全 type safety）。而且，我们已经写了一个非正式的证明关于状态机安全性质是完备的，并且是相当清晰的（大约 3500 个词）。 9.3 性能Raft 和其他一致性算法例如 Paxos 有着差不多的性能。在性能方面，最重要的关注点是，当领导人被选举成功时，什么时候复制新的日志条目。Raft 通过很少数量的消息包（一轮从领导人到集群大多数机器的消息）就达成了这个目的。同时，进一步提升 Raft 的性能也是可行的。例如，很容易通过支持批量操作和管道操作来提高吞吐量和降低延迟。对于其他一致性算法已经提出过很多性能优化方案；其中有很多也可以应用到 Raft 中来，但是我们暂时把这个问题放到未来的工作中去。 我们使用我们自己的 Raft 实现来衡量 Raft 领导人选举的性能并且回答以下两个问题。首先，领导人选举的过程收敛是否快速？第二，在领导人宕机之后，最小的系统宕机时间是多久？ 图-16：发现并替换一个已经崩溃的领导人的时间。上面的图考察了在选举超时时间上的随机化程度，下面的图考察了最小超时时间。每条线代表了 1000 次实验（除了 150-150 毫秒只试了 100 次），和相应的确定的选举超时时间。例如，150-155 毫秒意思是，选举超时时间从这个区间范围内随机选择并确定下来。这个实验在一个拥有 5 个节点的集群上进行，其广播时延大约是 15 毫秒。对于 9 个节点的集群，结果也差不多。 为了衡量领导人选举，我们反复的使一个拥有五个节点的服务器集群的领导人宕机，并计算需要多久才能发现领导人已经宕机并选出一个新的领导人（见图-16）。为了构建一个最坏的场景，在每一的尝试里，服务器都有不同长度的日志，意味着有些候选人是没有成为领导人的资格的。另外，为了促成选票瓜分的情况，我们的测试脚本在终止领导人之前同步的发送了一次心跳广播（这大约和领导人在崩溃前复制一个新的日志给其他机器很像）。领导人均匀的随机的在心跳间隔里宕机，也就是最小选举超时时间的一半。因此，最小宕机时间大约就是最小选举超时时间的一半。 图-16 上面的图表表明，只需要在选举超时时间上使用很少的随机化就可以大大避免选票被瓜分的情况。在没有随机化的情况下，在我们的测试里，选举过程由于太多的选票瓜分的情况往往都需要花费超过 10 秒钟。仅仅增加 5 毫秒的随机化时间，就大大的改善了选举过程，现在平均的宕机时间只有 287 毫秒。增加更多的随机化时间可以大大改善最坏情况：通过增加 50 毫秒的随机化时间，最坏的完成情况（1000 次尝试）只要 513 毫秒。 图-16 中下面的图显示，通过减少选举超时时间可以减少系统的宕机时间。在选举超时时间为 12-24 毫秒的情况下，只需要平均 35 毫秒就可以选举出新的领导人（最长的一次花费了 152 毫秒）。然而，进一步降低选举超时时间的话就会违反 Raft 的时间不等式需求：在选举新领导人之前，领导人就很难发送完心跳包。这会导致没有意义的领导人改变并降低了系统整体的可用性。我们建议使用更为保守的选举超时时间，比如 150-300 毫秒；这样的时间不大可能导致没有意义的领导人改变，而且依然提供不错的可用性。 10. 相关工作已经有很多关于一致性算法的工作被发表出来，其中很多都可以归到下面的类别中： Lamport 关于 Paxos 的原始描述，和尝试描述的更清晰的论文。 关于 Paxos 的更详尽的描述，补充遗漏的细节并修改算法，使得可以提供更加容易的实现基础。 实现一致性算法的系统，例如 Chubby，ZooKeeper 和 Spanner。对于 Chubby 和 Spanner 的算法并没有公开发表其技术细节，尽管他们都声称是基于 Paxos 的。ZooKeeper 的算法细节已经发表，但是和 Paxos 有着很大的差别。 Paxos 可以应用的性能优化。 Oki 和 Liskov 的 Viewstamped Replication（VR），一种和 Paxos 差不多的替代算法。原始的算法描述和分布式传输协议耦合在了一起，但是核心的一致性算法在最近的更新里被分离了出来。VR 使用了一种基于领导人的方法，和 Raft 有很多相似之处。 Raft 和 Paxos 最大的不同之处就在于 Raft 的强领导特性：Raft 使用领导人选举作为一致性协议里必不可少的部分，并且将尽可能多的功能集中到了领导人身上。这样就可以使得算法更加容易理解。例如，在 Paxos 中，领导人选举和基本的一致性协议是正交的：领导人选举仅仅是性能优化的手段，而且不是一致性所必须要求的。但是，这样就增加了多余的机制：Paxos 同时包含了针对基本一致性要求的两阶段提交协议和针对领导人选举的独立的机制。相比较而言，Raft 就直接将领导人选举纳入到一致性算法中，并作为两阶段一致性的第一步。这样就减少了很多机制。 像 Raft 一样，VR 和 ZooKeeper 也是基于领导人的，因此他们也拥有一些 Raft 的优点。但是，Raft 比 VR 和 ZooKeeper 拥有更少的机制因为 Raft 尽可能的减少了非领导人的功能。例如，Raft 中日志条目都遵循着从领导人发送给其他人这一个方向：附加条目 RPC 是向外发送的。在 VR 中，日志条目的流动是双向的（领导人可以在选举过程中接收日志）；这就导致了额外的机制和复杂性。根据 ZooKeeper 公开的资料看，它的日志条目也是双向传输的，但是它的实现更像 Raft。 和上述我们提及的其他基于一致性的日志复制算法中，Raft 的消息类型更少。例如，我们数了一下 VR 和 ZooKeeper 使用的用来基本一致性需要和成员改变的消息数（排除了日志压缩和客户端交互，因为这些都比较独立且和算法关系不大）。VR 和 ZooKeeper 都分别定义了 10 中不同的消息类型，相对的，Raft 只有 4 中消息类型（两种 RPC 请求和对应的响应）。Raft 的消息都稍微比其他算法的要信息量大，但是都很简单。另外，VR 和 ZooKeeper 都在领导人改变时传输了整个日志；所以为了能够实践中使用，额外的消息类型就很必要了。 Raft 的强领导人模型简化了整个算法，但是同时也排斥了一些性能优化的方法。例如，平等主义 Paxos （EPaxos）在某些没有领导人的情况下可以达到很高的性能。平等主义 Paxos 充分发挥了在状态机指令中的交换性。任何服务器都可以在一轮通信下就提交指令，除非其他指令同时被提出了。然而，如果指令都是并发的被提出，并且互相之间不通信沟通，那么 EPaxos 就需要额外的一轮通信。因为任何服务器都可以提交指令，所以 EPaxos 在服务器之间的负载均衡做的很好，并且很容易在 WAN 网络环境下获得很低的延迟。但是，他在 Paxos 上增加了非常明显的复杂性。 一些集群成员变换的方法已经被提出或者在其他的工作中被实现，包括 Lamport 的原始的讨论，VR 和 SMART。我们选择使用共同一致（joint consensus）的方法因为它对一致性协议的其他部分影响很小，这样我们只需要很少的一些机制就可以实现成员变换。Raft 没有采用 Lamport 的基于 α 的方法是因为它假设在没有领导人的情况下也可以达到一致性。和 VR 和 SMART 相比较，Raft 的重新配置算法可以在不限制正常请求处理的情况下进行；相比较而言，VR 需要停止所有的处理过程，SMART 引入了一个和 α 类似的方法，限制了请求处理的数量。和 VR、SMART 比较而言，Raft 的方法同时需要更少的额外机制来实现。 11. 总结算法的设计通常会把正确性，效率或者简洁作为主要的目标。尽管这些都是很有意义的目标，但是我们相信，可理解性也是一样的重要。在开发者把算法应用到实际的系统中之前，这些目标没有一个会被实现，这些都会必然的偏离发表时的形式。除非开发人员对这个算法有着很深的理解并且有着直观的感觉，否则将会对他们而言很难在实现的时候保持原有期望的特性。 在这篇论文中，我们尝试解决分布式一致性问题，但是一个广为接受但是十分令人费解的算法 Paxos 已经困扰了无数学生和开发者很多年了。我们创造了一种新的算法 Raft，显而易见的比 Paxos 要容易理解。我们同时也相信，Raft 也可以为实际的实现提供坚实的基础。把可理解性作为设计的目标改变了我们设计 Raft 的方式；这个过程是我们发现我们最终很少有技术上的重复，例如问题分解和简化状态空间。这些技术不仅提升了 Raft 的可理解性，同时也使我们坚信其正确性。 12. 鸣谢这项研究必须感谢以下人员的支持：Ali Ghodsi，David Mazie res，和伯克利 CS 294-91 课程、斯坦福 CS 240 课程的学生。Scott Klemmer 帮我们设计了用户调查，Nelson Ray 建议我们进行统计学的分析。在用户调查时使用的关于 Paxos 的幻灯片很大一部分是从 Lorenzo Alvisi 的幻灯片上借鉴过来的。特别的，非常感谢 DavidMazieres 和 Ezra Hoch，他们找到了 Raft 中一些难以发现的漏洞。许多人提供了关于这篇论文十分有用的反馈和用户调查材料，包括 Ed Bugnion，Michael Chan，Hugues Evrard，Daniel Giffin，Arjun Gopalan，Jon Howell，Vimalkumar Jeyakumar，Ankita Kejriwal，Aleksandar Kracun，Amit Levy，Joel Martin，Satoshi Matsushita，Oleg Pesok，David Ramos，Robbert van Renesse，Mendel Rosenblum，Nicolas Schiper，Deian Stefan，Andrew Stone，Ryan Stutsman，David Terei，Stephen Yang，Matei Zaharia 以及 24 位匿名的会议审查人员（可能有重复），并且特别感谢我们的领导人 Eddie Kohler。Werner Vogels 发了一条早期草稿链接的推特，给 Raft 带来了极大的关注。我们的工作由 Gigascale 系统研究中心和 Multiscale 系统研究中心给予支持，这两个研究中心由关注中心研究程序资金支持，一个是半导体研究公司的程序，由 STARnet 支持，一个半导体研究公司的程序由 MARCO 和 DARPA 支持，在国家科学基金会的 0963859 号批准，并且获得了来自 Facebook，Google，Mellanox，NEC，NetApp，SAP 和 Samsung 的支持。Diego Ongaro 由 Junglee 公司，斯坦福的毕业团体支持。 引用 BOLOSKY, W. J., BRADSHAW, D., HAAGENS, R. B., KUSTERS, N. P., AND LI, P. Paxos replicated state machines as the basis of a high-performance data store. In Proc. NSDI’11, USENIX Conference on Networked Systems Design and Implementation (2011), USENIX, pp. 141–154. BURROWS, M. The Chubby lock service for loosely- coupled distributed systems. In Proc. OSDI’06, Sympo- sium on Operating Systems Design and Implementation (2006), USENIX, pp. 335–350. CAMARGOS, L. J., SCHMIDT, R. M., AND PEDONE, F. Multicoordinated Paxos. In Proc. PODC’07, ACM Sym- posium on Principles of Distributed Computing (2007), ACM, pp. 316–317. CHANDRA, T. D., GRIESEMER, R., AND REDSTONE, J. Paxos made live: an engineering perspective. In Proc. PODC’07, ACM Symposium on Principles of Distributed Computing (2007), ACM, pp. 398–407. CHANG, F., DEAN, J., GHEMAWAT, S., HSIEH, W. C., WALLACH, D. A., BURROWS, M., CHANDRA, T., FIKES, A., AND GRUBER, R. E. Bigtable: a distributed storage system for structured data. In Proc. OSDI’06, USENIX Symposium on Operating Systems Design and Implementation (2006), USENIX, pp. 205–218. CORBETT, J. C., DEAN, J., EPSTEIN, M., FIKES, A., FROST, C., FURMAN, J. J., GHEMAWAT, S., GUBAREV, A., HEISER, C., HOCHSCHILD, P., HSIEH, W., KAN- THAK, S., KOGAN, E., LI, H., LLOYD, A., MELNIK, S., MWAURA, D., NAGLE, D., QUINLAN, S., RAO, R., ROLIG, L., SAITO, Y., SZYMANIAK, M., TAYLOR, C., WANG, R., AND WOODFORD, D. Spanner: Google’s globally-distributed database. In Proc. OSDI’12, USENIX Conference on Operating Systems Design and Implemen- tation (2012), USENIX, pp. 251–264. COUSINEAU, D., DOLIGEZ, D., LAMPORT, L., MERZ, S., RICKETTS, D., AND VANZETTO, H. TLA+ proofs. In Proc. FM’12, Symposium on Formal Methods (2012), D. Giannakopoulou and D. Me ́ry, Eds., vol. 7436 of Lec- ture Notes in Computer Science, Springer, pp. 147–154. GHEMAWAT, S., GOBIOFF, H., AND LEUNG, S.-T. The Google file system. In Proc. SOSP’03, ACM Symposium on Operating Systems Principles (2003), ACM, pp. 29–43. GRAY,C.,ANDCHERITON,D.Leases:Anefficientfault- tolerant mechanism for distributed file cache consistency. In Proceedings of the 12th ACM Ssymposium on Operating Systems Principles (1989), pp. 202–210. HERLIHY, M. P., AND WING, J. M. Linearizability: a correctness condition for concurrent objects. ACM Trans- actions on Programming Languages and Systems 12 (July 1990), 463–492. HUNT, P., KONAR, M., JUNQUEIRA, F. P., AND REED, B. ZooKeeper: wait-free coordination for internet-scale systems. In Proc ATC’10, USENIX Annual Technical Con- ference (2010), USENIX, pp. 145–158. JUNQUEIRA, F. P., REED, B. C., AND SERAFINI, M. Zab: High-performance broadcast for primary-backup sys- tems. In Proc. DSN’11, IEEE/IFIP Int’l Conf. on Depend- able Systems &amp; Networks (2011), IEEE Computer Society, pp. 245–256. KIRSCH, J., AND AMIR, Y. Paxos for system builders. Tech. Rep. CNDS-2008-2, Johns Hopkins University, 2008. LAMPORT, L. Time, clocks, and the ordering of events in a distributed system. Commununications of the ACM 21, 7 (July 1978), 558–565. LAMPORT, L. The part-time parliament. ACM Transac- tions on Computer Systems 16, 2 (May 1998), 133–169. LAMPORT, L. Paxos made simple. ACM SIGACT News 32, 4 (Dec. 2001), 18–25. LAMPORT, L. Specifying Systems, The TLA+ Language and Tools for Hardware and Software Engineers. Addison- Wesley, 2002. LAMPORT, L. Generalized consensus and Paxos. Tech. Rep. MSR-TR-2005-33, Microsoft Research, 2005. LAMPORT, L. Fast paxos. Distributed Computing 19, 2 (2006), 79–103. LAMPSON, B. W. How to build a highly available system using consensus. In Distributed Algorithms, O. Baboaglu and K. Marzullo, Eds. Springer-Verlag, 1996, pp. 1–17. LAMPSON, B. W. The ABCD’s of Paxos. In Proc. PODC’01, ACM Symposium on Principles of Distributed Computing (2001), ACM, pp. 13–13. LISKOV, B., AND COWLING, J. Viewstamped replica- tion revisited. Tech. Rep. MIT-CSAIL-TR-2012-021, MIT, July 2012. LogCabin source code. logcabin/logcabin. LORCH, J. R., ADYA, A., BOLOSKY, W. J., CHAIKEN, R., DOUCEUR, J. R., AND HOWELL, J. The SMART way to migrate replicated stateful services. In Proc. Eu- roSys’06, ACM SIGOPS/EuroSys European Conference on Computer Systems (2006), ACM, pp. 103–115. MAO, Y., JUNQUEIRA, F. P., AND MARZULLO, K. Mencius: building efficient replicated state machines for WANs. In Proc. OSDI’08, USENIX Conference on Operating Systems Design and Implementation (2008), USENIX, pp. 369–384. MAZIE` RES, D. Paxos made practical.http://www.scs.stanford.edu/~dm/home/papers/paxos.pdf , Jan. 2007. MORARU, I., ANDERSEN, D. G., AND KAMINSKY, M. There is more consensus in egalitarian parliaments. In Proc. SOSP’13, ACM Symposium on Operating System Principles (2013), ACM. Raft user study. http://ramcloud.stanford.edu/~ongaro/userstudy/. OKI, B. M., AND LISKOV, B. H. Viewstamped replication: A new primary copy method to support highly-available distributed systems. In Proc. PODC’88, ACM Symposium on Principles of Distributed Computing (1988), ACM, pp. 8–17. O’NEIL, P., CHENG, E., GAWLICK, D., AND ONEIL, E. The log-structured merge-tree (LSM-tree). Acta Informat- ica 33, 4 (1996), 351–385. ONGARO, D. Consensus: Bridging Theory and Practice. PhD thesis, Stanford University, 2014 (work in progress).http://ramcloud.stanford.edu/~ongaro/thesis.pdf ONGARO, D., AND OUSTERHOUT, J. In search of an understandable consensus algorithm. In Proc ATC’14, USENIX Annual Technical Conference (2014), USENIX. OUSTERHOUT, J., AGRAWAL, P., ERICKSON, D., KOZYRAKIS, C., LEVERICH, J., MAZIE`RES, D., MI- TRA, S., NARAYANAN, A., ONGARO, D., PARULKAR, G., ROSENBLUM, M., RUMBLE, S. M., STRATMANN, E., AND STUTSMAN, R. The case for RAMCloud. Com- munications of the ACM 54 (July 2011), 121–130. Raft consensus algorithm website. http://raftconsensus.github.io. REED, B. Personal communications, May 17, 2013. ROSENBLUM, M., AND OUSTERHOUT, J. K. The design and implementation of a log-structured file system. ACM Trans. Comput. Syst. 10 (February 1992), 26–52. SCHNEIDER, F. B. Implementing fault-tolerant services using the state machine approach: a tutorial. ACM Com- puting Surveys 22, 4 (Dec. 1990), 299–319. SHVACHKO, K., KUANG, H., RADIA, S., AND CHANSLER, R. The Hadoop distributed file system. In Proc. MSST’10, Symposium on Mass Storage Sys- tems and Technologies (2010), IEEE Computer Society, pp. 1–10. VAN RENESSE, R. Paxos made moderately complex. Tech. rep., Cornell University, 2012. 本文的版权归作者 罗远航 所有，采用 Attribution-NonCommercial 3.0 License。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！","categories":[],"tags":[]},{"title":"mshi","slug":"Java/faceEx/djava","date":"2018-10-18T03:35:11.000Z","updated":"2018-10-18T03:35:35.000Z","comments":true,"path":"2018/10/18/Java/faceEx/djava/","link":"","permalink":"http://io.stelawliet.top/2018/10/18/Java/faceEx/djava/","excerpt":"","text":"一）美图面试（2技术+1HR） : 大数据研发 一面（1个小时）：（1）聊项目，题主看过HDFS源码，面试官就跟我扯了很久 这个。（2）聊hadoop,namenode的职能呀， 2.0与1.0的区别， HA的实现方法。 zookeeper源码我也看过, balabala(3) 对MR 了解多少，具体讲解一下MR 。 我看过 MR google 原文， balabala 。(4) Java基础,JVM 了解多少 。 深入扯淡了一波 jvm(5) 进程，线程。 Java是如何实现线程的 。 讲了一下操作系统进程线程(6) Java线程同步和锁。 疯狂BB Java各种锁(7) 除了技术平时喜欢看什么书，巴拉巴拉扯了一堆 。 面试官推荐我看《三体》 == 二面 (30分钟 )：(1)项目相关的东西 。 继续扯淡(2)对美图公司的看法，评价(3)讲解一下Paxos 协议 。 巴拉巴拉很仔细的讲了(4) 有哪些 应用使用了这些 分布式一致性协议。 zookeeper 三面HR面(20多分钟):记不清了， 只记得。（1）你的期望工资是多少： 楼主说少了，很后悔（2）有没有对象 ： =-=。体验很棒，2轮技术面试官都非常好，HR声音超级棒。 （二）百度面试（3技术）： 研发工程师 一面:（1个小时）（1）自我介绍（2）面向对象的特点（3）java继承有哪几种？顶级类是什么？（4）Object类都有什么方法？（5）1 ==与equals的区别2 修改equals的时候为何要修改hashcode()3 如果让你设计一个类作为hashMap的key，你会注意什么 （就是设计hashcode时候会注意什么）4 equals相等hashcode一定相等吗？ hashcode相等，equals一定相等吗（6）wait() 与sleep()什么区别？（7）1 刚才讲到了hashMap,那你就讲一下hashMap的具体实现。2 你会如何做的线程安全的hashMap3 了解过jdk1.8吗？ 对于hashMap底层进行修改过。（链改成了红黑树）4 那么当数量达到多少时候，会改成红黑树？5 底层中扩容的方法叫什么？（8）1 写单例模式， 需要lazy loading的我写了2个，其中一个双重判断，然后面试问我：2 很多人在写双重判断的时候会加入双重上锁，为什么呢？回答后面试官又问我3 知道jdk 1.5之后添加的一种实现单例模式的讨巧方法吗？4 enum 如何实现单例模式？（9）1.快排会吗？ 讲一下思想 如何判断是否越界 ？3 手写快排 如果让你优化快速排序，你会如何优化（回答：递归-》非递归，基数随机选择或者选择中间数作为基础） 面试官回：可以用三位中位数（10）jvm了解吗？xmx xms xmn 这三个参数代表我对于虚拟机做了什么限制吗？ （控制内存大小）（11）Linux了解吗？我说我用ubuntu作为操作系统的， 面试官就直接跳过了这个问答。（12）设计一个图书馆管理系统的表？（13）Spring的IOC,AOP底层实现原理？（14） 你有什么问题没？二面（1个小时）： 迟点补。。。 三面（1个小时）： 迟点补。。。 百度面试体验非常棒， 虽然笔试系统比较糟糕。 面试的话： 每次都会打电话约第二天面试时间，而且是准时开始面试，如果迟到面试官还会给你打电话问情况（2面我就迟到），总之三次面试都是到了酒店直接面，面试官全程nice脸，面试难度也挺大的，一直都是问到你不会为止，尤其是三面面试官，感觉上知天文下晓地理，无所不知，献上小弟膝盖。 3轮面试是分开面试的 一共面试了一周时间。 （三）招银科技：java研发 一面：你做大数据，会java吗？ 会的。（1）自我介绍（2）抽象类和接口的区别。 他们的应用场景（3）1. equals 和 == 的区别2..为什么重写equals 的时候需要重写hashcode(4）1.java 中的锁 有什么2.sychronized 锁static方法和锁普通方法的区别 wait 和notify（5）java集合了解情况?(6) 1.java IO了解吗？2.InputStream 和reader流的区别3.给一个JDK编码的，以UTF-8编码输出的方法(7) 往一个hashMap中添加一个元素的具体步骤(8) jvm 运行时的数据区(9) jvm中哪些对象是需要被回收的GC roots都有什么(10) java调用jdbc连接数据库的具体步骤(11) preStatement和Statement的区别(12) Spring是如何实现事务的（13）Hadoop 中的MapReduce的具体步骤 面试还好，全程笑嘻嘻，然后MMP （四）今日头条 ：大数据研发 一面：（1）说一下TCP的全双工模式（2）TCP一端如果发送完数据之后，这一端关闭连接，另一端能感知到吗（3）说一下HTTP2.0与1.0的区别（4）说一下HTTP1.0的报文头（5）实现两个线程，一个线程只输出A，另外一个线程只输出B， 让他们交替输出AB（6）设计一个Hash Table（7）你这个HASHTABLE会扩容吗？ 假设这个时候已经使用了1G内存，只剩下一点点内存，你如何扩容（8）大数据解决问题：给你大量 id-&gt;ip, ip属于一个国家，请你设计大数据解决方法，统计出 对应国家数大于3的Iid 一面就GG， 头条是6. 也是在被头条GG之后题主奋发图强，最后才找到工作。。感谢头条。。 头条面试压力不小：不给你BB机会上来就是一堆问题，面试官全程平淡脸。。。。。 （五）华为面试 ： 云计算开发 一面（半个小时）： 讲了项目，然后就是围绕项目问了一堆知识，主要是分布式系统以及一致性相关的知识，个人感觉相对比较简单。 二面（半个小时）： 面试官全程打字，我就只能没话找话全程BB，吹嘘自己。。。。。 华为面试体验比较糟糕，水平一般（可能是问我比较一般），而且从早上一直弄到了很晚，疯狂延迟，一共才2面。（等了6-7来个小时，一共面1小时不到。。。。服，大写的服。） （六）京东面试（2轮技术面+1HR） ： JAVA研发 一面（半个小时）： JAVA虚拟机的知识 类加载 == equals之类的 二面（半个小时）： 自我介绍 项目 假如给你一家京东线下店，你会如何摆放商品，从而提高商品销售量。 （题主就疯狂想提高顾客与商品接触机会呀，牛奶与尿布关联呀，balabala ）。 结果是要收集各种数据，大数据分析（offline 处理（MR），online处理 （spark））等等等。。 三面（15分钟）： 这我是真地铁上面试的， 扯淡。。。。 玄学东。面试等待时间挺短，但是面试比较玄学，尤其是二面，面试官疯狂打字，我写我的思路，基本没有交集，最后还给offer了 （七）腾讯面试 云计算研发 一面（30分钟）： 掏出笔试。。。我也是无奈。。。 单例 手写搜索题代码 。。。。 二面： GG 腾讯面试体验还好，等待时间较短，面试官很nice,也很厉害。 （八）美团面试 研发 一面（40-50分钟）： 自我介绍 项目 几道java题目 二面（40分钟）： 自我介绍 项目 手写堆排序 然后GG 对于美团，还是有很多想法的。 首先面试等待时间较少这点不错，面试安排的还可以。 但是说起面试官技术，实在不敢恭维，面试阵仗很大，但是很多面试官。。。。 一面面试官，水平还好，人挺nice的，我全程怼，他还让我过了。 二面面试官，年纪略大的一个大哥，跟他说了我的项目你没有背景可能不懂，非说我不懂你就要给我讲懂，wqnmlgb, 你都没有背景跟你详细个锤子，全程思维跟不上，还硬让我说懂，跟他仔细的&amp;慢慢的说了还质疑我项目可行不可行，是不是我做的。 最后手写的堆排序，还要自己拿过去看了好久，发呆了好久，看完让我走。 堆排序难道不是一眼看完？ 当然也可能是我那天状态不好，代码没写清楚&amp;表达的不好，就导致了这样的局面。 美团面试官是让我有些难受，但是总体还是好的。 （九）阿里面试： 算法工程师 &amp; 网易：大数据平台研发 算法工程师就是一个坑，一面面了2个小时，已经忘记了自己在讲什么。 不建议选算法工程师。。。 网易是直系师兄面试我，同一实验室，知根知底，全程挑我不会的问，最后一面就GG，结束后微信指导了我一下，但是面完网易我已经决定结束秋招， 伤心了。。。。。 （十）51信用卡：JAVA研发 （三面技术面+HR面） 一面（30分钟） 一些java基础知识跟之前类似 二面（30分钟） 自我介绍 项目 github之前做的东西， jvm,spring,mybaits 三面（1个小时） 自我介绍 项目 生产者消费者，出现死锁，已经多线程的知识疯狂多线程各种锁 单向链表求倒数第N个元素（2个指针） 成环咋办（2个指针弄喽）， 环的起点，终点如何求（弄喽） 然后大谈51的前身今世，各种技术扯淡 HR面（15分钟） 三面结束后马上HR面，疯狂扯淡一堆，然后就搞定了。 51的面试非常棒，三面官是个浙大的个性大哥，长发披肩，须发茂盛，人很好。 51还给报销酒店住宿，来回车费，还送娃娃，各种贴心，各种有钱。 51非常的有钱！！！！ 有些面试详情我记不太清楚了， 想到再补充。 总之呢，首先最重要的是基础知识扎实，编程能力扎实，项目内容背的熟练 有了这3点就简单狠多了，基础一定要扎实。 然后就是面试的时候各种造航母 了， 疯狂BB&amp;不要脸是成功的一半。 面试体验分档： 一档：百度，51，美图 二档：京东，头条，招银，美团，腾讯，阿里，网易 空一档 四档：华为 作者：凉拌灰土来源：CSDN原文：https://blog.csdn.net/cnh294141800/article/details/79376883版权声明：本文为博主原创文章，转载请附上博文链接！","categories":[],"tags":[]},{"title":"Transaction 实践测试","slug":"sql/MySQL Transaction","date":"2018-10-18T01:56:37.000Z","updated":"2018-10-18T03:34:57.000Z","comments":true,"path":"2018/10/18/sql/MySQL Transaction/","link":"","permalink":"http://io.stelawliet.top/2018/10/18/sql/MySQL Transaction/","excerpt":"","text":"isolation READ-UNCOMMITED READ-COMMITED REPEATABLE_READ","categories":[{"name":"SQL","slug":"SQL","permalink":"http://io.stelawliet.top/categories/SQL/"},{"name":"transaction","slug":"SQL/transaction","permalink":"http://io.stelawliet.top/categories/SQL/transaction/"}],"tags":[]},{"title":"Collection Ex","slug":"Java/faceEx/collection","date":"2018-10-18T01:24:14.000Z","updated":"2018-10-18T01:30:16.000Z","comments":true,"path":"2018/10/18/Java/faceEx/collection/","link":"","permalink":"http://io.stelawliet.top/2018/10/18/Java/faceEx/collection/","excerpt":"","text":"javaapicollectionConcurrentHashMap实现原理 design pattern使用一个组合的设计模式 去解决文章多级分类的问题 jucReentrantLock和Synchronized区别 直接内存 如何 管理的 11.线程池 参数。 线程创建的过程。有几种方法。 线程资源如何回收的。 jvm8.CMS垃圾回收过程 特点 9.Full GC次数太多了，如何优化。 algorithm如何将一个二叉树，转为有序的双向链表。 二叉树中求最长路径 sqlindex数据库 联合索引 用法","categories":[{"name":"review","slug":"review","permalink":"http://io.stelawliet.top/categories/review/"}],"tags":[]},{"title":"","slug":"Linux/shell/shell练习","date":"2018-10-17T17:44:18.000Z","updated":"2018-10-17T17:44:53.000Z","comments":true,"path":"2018/10/18/Linux/shell/shell练习/","link":"","permalink":"http://io.stelawliet.top/2018/10/18/Linux/shell/shell练习/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"从paxos到zookeeper读书笔记","slug":"distributed system/from paxos to zookeeper","date":"2018-10-17T03:08:45.000Z","updated":"2018-10-27T06:12:32.000Z","comments":true,"path":"2018/10/17/distributed system/from paxos to zookeeper/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/distributed system/from paxos to zookeeper/","excerpt":"","text":"acid cap base 2tc 3tc paxos leslie lamport 1982 The Byzantine Generals Problem 拜占庭将军问题 一个针对点对点通信的基本问题,在存在消息丢失的不可靠信道上试图通过消息传递的方式达成一致性是不可能的 p1 p1a p2","categories":[{"name":"distributed system","slug":"distributed-system","permalink":"http://io.stelawliet.top/categories/distributed-system/"},{"name":"zookeeper","slug":"distributed-system/zookeeper","permalink":"http://io.stelawliet.top/categories/distributed-system/zookeeper/"}],"tags":[{"name":"zookeeper","slug":"zookeeper","permalink":"http://io.stelawliet.top/tags/zookeeper/"},{"name":"paxos","slug":"paxos","permalink":"http://io.stelawliet.top/tags/paxos/"},{"name":"分布式事务","slug":"分布式事务","permalink":"http://io.stelawliet.top/tags/分布式事务/"}]},{"title":"","slug":"hadoop/zookeeper/cnblog读书笔记/Untitled 1","date":"2018-10-16T17:39:19.000Z","updated":"2018-10-19T09:03:08.000Z","comments":true,"path":"2018/10/17/hadoop/zookeeper/cnblog读书笔记/Untitled 1/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/hadoop/zookeeper/cnblog读书笔记/Untitled 1/","excerpt":"","text":"《深入理解Java虚拟机：JVM高级特性与最佳实践》读书笔记第一部分 走进Java一、走进Java1、概述 java广泛应用于嵌入式系统、移动终端、企业服务器、大型机等各种场合，摆脱了硬件平台的束缚，实现了“一次编写，到处运行”的理想 2、java技术体系结构 按照功能来划分 包括以下几个组成部分：Java程序设计语言，各种硬件平台的java虚拟机，Java API类库，来自商业机构和开源社区的第三方Java类库，Class文件格式 Java程序设计语言，java虚拟机，Java API类库统称为JDK，是用于支持java程序开发的最小环境 Java API类库中的Java SE API子集和Java虚拟机统称为JRE，是支持java程序运行的基本环境 按照技术所服务的领域划分分为4个平台 Java Card：支持java小程序运行在java小内存设备（如智能卡）上的平台 Java ME：支持Java程序运行在移动设备上的平台 Java SE：支持面向桌面级应用的平台 Java EE：支持使用多层架构的企业级应用的平台 第二部分 自动内存管理机制二、内存区域和内存溢出异常1、运行时数据区 程序计数器 记录的是正在执行的虚拟机字节码指令的地址，可以看成是当前线程所执行的字节码的行号指示器，每个线程都有一个独立的程序计数器，各条线程的程序计数器互不影响，独立存储，这类内存区域成为“线程私有的内存”。 此内存区域是唯一在虚拟机规范中没有OutOfMemoryError的情况的区域 Java虚拟机栈 同程序计数器一样，也是线程私有的。每个方法在执行的时候都会创建一个栈帧，用于存储局部变量表、操作数栈、动态链接、方法出口等信息。 每一个方法从调用直至执行完成的过程，都对应着一个栈帧在虚拟机栈中入栈和出栈的过程。 局部变量表所需的内存空间在编译期间完成分配，当进入一个方法时，这个方法需要在栈帧中分配多大的局部变量空间是完全确定的，在方法运行期间不会改变局部变量表的大小。 如果请求的栈深度超过虚拟机锁允许的深度，将抛出StackOverFlowError异常。如果拓展无法申请到足够的内存，将抛出OutOfMemoryError异常。 本地方法栈 为虚拟机使用的native方法服务，和虚拟机栈一样，本地方法栈也会抛出StackOverFlowError和OutOfMemoryError异常。 Java堆 Java堆是所有线程共享的一块内存区域，用来存放对象实例，几乎所有的对象实例都在这里分配。 Java堆是垃圾回收的主要区域，采用分代收集算法。 Java堆分为新生代和老年代，在细致一点分为Eden，From Survivor，To Survivor空间。 如果堆中无法完成对象实例的内存分配，且堆也无法扩展时，将抛出OutOfMemoryError异常。 方法区 是各个线程共享的内存区域，用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据，HotSpot虚拟机的设计团队把GC分代收集扩展至方法区，或者说使用永久代来代替方法区。 在目前已经发布的JDK1.7的HotSpot中，已经把原本放在永久代的字符串常量池移出了。当方法区无法满足内存的分配需求时，将抛出OutOfMemoryError异常。 运行时常量池 是方法区的一部分，Class文件除了有类的版本、字段、方法、接口等描述信息外，还有一项信息是常量池，用于存放编译器生成的各种字面量和符号引用，这部分内容将在类加载后进入方法区的运行时常量池存放。 运行时常量池相对于Class文件常量池，具有动态性，运行期间也可以将新的常量放入常量池，比如String类的intern()方法。 当运行时常量池无法申请到更多的内存时，将会抛出OutOfMemoryError异常。 直接内存 并不是运行时区域的一部分，JDK 1.4加入的NIO 它可以使用Native函数库直接分配堆外内存，然后通过Java堆中的DirectByteBuffer对象作为这块内存的引用进行操作。 2、HotSpot虚拟机对象探秘 对象的创建 当遇到new指令时，先判断这个类是否被加载、解析、初始化过，如果没有，先执行相应类的加载过程。 类加载检查通过后，为新生对象分配内存，如果Java堆内存是规整连续的，采用“指针碰撞”的分配方式，如果是不连续规整的，采用“空闲列表”分配方式。内存是否规整取决于垃圾收集器是否带有压缩整理功能。 Serial，ParNew等带有Compact过程的收集器，采用的分配算法是“指针碰撞”。而CMS这种基于Mark-Sweep算法的收集器，通常采用“空闲列表”分配方式。 创建对象涉及到分配内存和指针指向两个操作，不是原子性的，不是线程安全的。针对这个问题，有两个解决办法：1是采用CAS加上失败重试来保证操作的原子性。2是采用TLAB（Thread Local Allocation Buffer）策略，在Java堆中预先为每一个线程分配一小块内存，称为TLAB（Thread Local Allocation Buffer），哪个线程要分配内存就在各自的TLAB上进行内存的分配，只有TLAB用完进行新的TLAB的分配时才需要同步锁定，虚拟机是否使用TLAB，可以通过 -XX:+/- UseTLAB 内存分配完成后，需要对对象头进行设置，包括这个对象是哪个类的实例、如何才能找到类的元数据信息、对象的哈希码、对象的GC分代年龄等信息。 最后执行init方法，把对象按照程序员的意愿进行初始化。这样一个真正可用的对象才算完全生产出来。 对象的内存布局 分为三块区域，对象头（Header）、实例数据（Instance Data）、对齐补充（Padding）。 对象头，存储对象自身的运行时数据，如哈希码、对象的GC分代年龄、锁状态标志、偏向线程ID、偏向时间戳，这部分数据的长度在32位和64位虚拟机中分别为32bit和64bit。 另一个部分是类型指针，虚拟机通过这个对象来确定这个对象是哪个类的实例。 对象的访问定位 Java程序需要通过栈上的reference数据来操作堆中的具体对象，具体实现有两种方式：使用句柄和直接指针两种。 使用句柄：Java堆中划分出一块内存作为句柄池，reference中存储的就是对象的句柄地址，句柄中包括了对象的实例数据和类型数据各自的地址信息。最大好处是当对象修改时，reference本身不需要修改，因为reference中存储的是稳定的句柄地址 ​ 直接指针：reference中存储的直接就是堆中的对象地址，堆对象的布局中需要考虑如何放置访问类型数据的相关信息。最大好处是速度更快，节省了一次指针定位的开销，HotSpot就采用的直接指针方式。 ​ 3、OutOfMemoryError异常​ 堆溢出 不断创建对象，保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，达到最大堆的容量限制后就会产生内存溢出异常。 -Xms20m 堆的最小值；-Xmx20m 堆的最大值；-XX:+HeapDumpOnOutOfMemoryError 内存溢出异常时Dump出当前的内存堆转储快照以便日后分析 ​ 虚拟机栈和本地方法栈溢出 -Xss 栈容量 ​ 方法区和运行常量池溢出 多次调用String.intern()方法可以产生内存溢出异常。JDK 1.6之间，可以通过 -XX:PermSize 和 -XX:MaxPermSize 限制永久代大小，从而达到限制方法区大小的目的 ​ 本地直接内存溢出 可以通过 -XX:MaxDirectMemorySize 指定。如果不指定，则默认和Java堆最大值（-Xmx 指定）一样 三、垃圾收集器和内存分配策略1、对象已死吗？如何确定对象是否还“活着” 引用计数器方法 给对象添加一个引用计数器，每当有一个地方引用它时，计数器就加1，当引用失效时，计数器就减1。 优点是判定简单，效率也很高。缺点是无法解决相互循环引用的问题 可达性分析方法 通过一系列的称为“GC Roots”的对象作为起始点，从这些节点开始向下搜索，搜索所走过的路径称为“引用链”，当一个对象到GC Roots没有任何引用链相连时，说明这个对象是可回收的。 Java语言中，可作为GC Roots的对象包括以下几种：虚拟机栈中引用的对象，方法区中类静态属性引用的对象，方法区中常量引用的对象，本地方法栈中JNI引用的对象。 再谈引用 JDK1.2 之后把引用分为了四种：强引用、软引用、弱引用、虚引用 强引用：只要强引用还存在，就不会被垃圾回收器回收。类似 Object o=new Object() 软引用：指一些有用但并非必须的对象，在系统将要发生内存溢出的时候，会将这部分对象回收。SoftReference 类来实现软引用 弱引用：被弱引用关联的对象只能生存到下一次垃圾回收。WeakReference 类来实现弱引用 虚引用：一个对象是否有虚引用的存在，完全不会对其生存时间造车影响，也无法通过虚引用取得对象的引用。一个对象设置虚引用的唯一目的是在被垃圾回收的时候收到一个系统通知 对象被回收的过程 当对象进行可达性分析没有与GC Roots相连的引用链，将会被第一次标记，并根据是否需要执行finalize()方法进行一次筛选，对象没有重写finalize()或者虚拟机已经调用过finalize(),都被视为不需要执行 如果对象有必要执行finalize，会被放入到F-Queue队列中，并在稍后由虚拟机自动创建的低优先级的Finalizer线程去触发它，并不保证等待此方法执行结束。 如果对象在finalize()方法执行中，重新和GC Roots产生了引用链，则可以逃脱此次被回收的命运，但finalize()方法只能运行一次，所以并不能通过此方法逃脱下一次被回收 笔者不建议使用这个方法，建议大家完全忘掉这个方法的存在。 回收方法区 主要包括废弃常量和无用类的回收。判断类无用：类的实例都被回收，类的ClassLoader被回收，类的Java.Lang.Class对象没有在任何地方引用。满足这三个条件，类才可以被回收（卸载） HotSpot虚拟机通过 -Xnoclassgc 参数进行控制是否启用类卸载功能。在大量使用反射、动态代理、CGLib等框架，需要虚拟机具备类卸载功能，避免方法区发生内存溢出 2、垃圾回收算法 标记-清除 先标记出所有要回收的对象，在标记完成后统一进行对象的回收。有两个不足： 1 是效率问题，标记和清除的效率都不高。 2 是空间问题，会产生大量不连续的内存碎片，碎片太多会都导致大对象无法找到足够的内存，从提前触发垃圾回收。 复制算法 新生代分为一个Eden，两个Survival空间，默认比例是8:1。回收时，将Eden和一个Survival的存活对象全部放入到另一个Survival空间中，最后清理掉刚刚的Eden和Survival空间 当Survival空间不够时，由老年代进行内存分配担保 标记-整理 根据老年代对象的特点，先标记存活对象，将存活对象移动到一端，然后直接清理掉端边界以外的对象 分代收集 新生代采用复制算法，老年代采用标记-删除，或者标记-整理算法。 3、HotSpot算法实现 枚举根节点实现 可达性分析时会进行GC停顿，停顿所有的Java线程。 HotSpot进行的是准确式GC，当系统停顿下来后，虚拟机有办法得知哪些地方存在着对象引用，HotSpot中使用一组称为OopMap的数据结构来达到这个目的 安全点 HotSpot没有为每个指令都生成OopMap，只在特定的位置记录这些信息，这些位置称为安全点。安全点的选定不能太少，也不能太频繁，安全点的选定以“是否让程序长时间执行”为标准 采用主动式中断的方式让所有线程都跑到最近的安全点上停顿下来。设置一个标志，各个程序执行的时候轮询这个标志，发现中断标志为真时自己就中断挂起 安全区域 解决没有分配Cpu时间的暂时不执行的程序停顿。 4、垃圾收集器​ 如果两个收集器之间有连线，说明可以搭配使用。没有最好的收集器，也没有万能的收集器，只有对应具体应用最合适的收集器。 Serial 收集器 新生代收集器，单线程回收。优点在于，简单而高效，对于运行在Client模式下的虚拟机来说是一个很好的选择（比如用户的桌面应用） 参数 -XX:UseSerialGC，打开此开关后，使用Serial+Serial Old的收集器组合进行内存回收 ParNew收集器 新生代收集器，Serial的多线程版本，除了Serial收集器之外，只有它能与CMS收集器配合工作。 -XX:+UseConcMarkSweepGC 选项后默认的新生代收集器，也可以使用 -XX:+UseParNewGC 选项来强制指定它 ParNew收集器在单CPU的环境中，效果不如Serial好，随着CPU的增加，对于GC时系统资源的利用还是很有效的。 默认开启的收集线程数和CPU数相等，可以使用 -XX:ParallelGCThreads 指定 Parallel Scavenge收集器 新生代收集器，并行收集器，复制算法，和其他收集器不同，关注点的是吞吐量（垃圾回收时间占总时间的比例）。提供了两个参数用于控制吞吐量。 -XX:MaxGCPauseMillis，最大垃圾收集停顿时间，减少GC的停顿时间是以牺牲吞吐量和新生代空间来换取的，不是设置的越小越好 -XX:GCTimeRatio，设置吞吐量大小，值是大于0小于100的范围，相当于吞吐量的倒数，比如设置成99，吞吐量就为1/（1+99）=1%。 -XX:UseAdaptiveSizePolicy ，这是一个开关参数，打开之后，就不需要设置新生代大小（-Xmn）、Eden和Survival的比例（-XX:SurvivalRatio）、 晋升老年代对象年龄（-XX:PretenureSizeThreshold）等细节参数，收集器会自动调节这些参数。 Serial Old 收集器 单线程收集器，老年代，主要意义是在Client模式下的虚拟机使用。在Server端，用于在JDK1.5以及之前版本和Parallel Scavenge配合使用，或者作为CMS的后备预案。 Palallel Old 收集器 是Parallel Scavenge的老年代版本。在注重吞吐量的场合，都可以优先考虑Parallel Scavenge 和Palallel Old 配合使用 CMS 收集器 Concurrent Mark Sweep，是一种以获取最短回收停顿时间为目标的收集器，尤其重视服务的响应速度。基于标记-清除算法实现。 分为四个步骤进行垃圾回收：初始标记，并发标记，重新标记，并发清除。只有初始标记和重新标记需要停顿。 初始标记只是标记一下GC Roots能直接关联到的对象，速度很快。并发标记就是进行GC Roots的Tracing。 重新标记为了修正并发标记期间因用户程序继续运作而导致标记产生变动的那一部分对象的标记记录，这个阶段的停顿时间会比初始标记阶段稍长，远比并发时间短。 耗时最长的并发标记和并发清除过程中，处理器可以与用户线程一起工作。 它并不是完美的，有如下三个比较明显的缺点： 1、垃圾回收时会占用一部分线程，导致系统变慢，总吞吐量会降低。 2、无法处理浮动垃圾，需要预留足够的内存空间给用户线程使用，可以通过 -XX:CMSInitiatingOccupancyFraction 参数控制触发垃圾回收的阈值。 如果预留的内存无法满足程序需要，就会出现“Concurrent Mode Failure”失败，这时将启动应急预案，启用Serial Old 进行垃圾回收，停顿时间会变长 所以-XX:CMSInitiatingOccupancyFraction 参数的值设置的太高，会导致频繁“Concurrent Mode Failure”失败，性能反而降低。 3、标记-清理，容易产生内存碎片。-XX:+UseCMSCompactAtFullColletion 开启碎片整理功能，默认开启，-XX:CMSFullGCsBeforeCompaction，控制多少次不压缩的FullGC之后来一次带压缩的 G1 收集器 包括新生代和老年代的垃圾回收。和其他收集器相比的优点：并行和并发，分代收集，标记-整理，可预测的停顿。垃圾回收分为以下几个步骤： 初始标记：标记GC Roots能够直接关联到的对象，这阶段需要停顿线程，时间很短 并发标记：进行可达性分析，这阶段耗时较长，可与用户程序并发执行 最终标记：修正发生变化的记录，需要停顿线程，但是可并行执行 筛选回收：对各个Region的回收价值和成本进行排序，根据用户所期望的停顿时间来执行回收计划 5、内存分配和回收策略 对象优先在Eden分配，当新生区没有足够的内存是，通过分配担保机制提前转移到老年代中去 大对象直接进入老年代。大对象是指需要大量连续内存空间的对象，虚拟机提供了参数 -XX:PretenureSizeThreshold（只对Serial，PerNew两个回收器起效），令大于这个值得对象直接在老年代分配，避免了Eden和两个Survival之间发生大量的内存复制。 长期存活的对象将进入老年代。虚拟机给每个对象定义了对象年龄计数器（Age），如果对象在Eden出生，经过第一次Minor GC后依然存活，并且能被Survival容纳的话，将被移动到Survival，对象年龄设为1。对象在Survival中每熬过一次Major GC，年龄就增加1，达到一定程度（默认是15），就会被晋升到老年代。对象晋升老年代的阈值，可以通过参数-XX:MaxTenuringThreShold 指定 动态对象年龄判断。如果在Survival空间中相同年龄所有对象的大小综合超过了Survival空间的一半，年龄大于等于这个年龄的对象都会被晋升到老年代。无需等待年龄超过MaxTenuringThreShold指定的年龄 空间分配担保。只要老年代的连续空间大于新生代对象总和或者历次晋升的平均大小，就进行Major GC，否则进行Full GC。 四、虚拟机性能监控与故障处理工具1、jps命令用法: jps [options] [hostid] 功能描述: jps是用于查看有权访问的hotspot虚拟机的进程. 当未指定hostid时，默认查看本机jvm进程 常用参数：-lmvV 详细说明：JAVA JPS 命令详解 2、jstat。监视JVM内存工具。语法结构： Usage: jstat -help|-options ​ jstat - [-t] [-h] [ []] 例子： jstat -gcutil 25444 1000 5 详细说明：JDK之jstat的用法 3、jinfo。查看和修改JVM运行参数java -XX:+PrintFlagsFinal -version|grep manageable 【查看JVM中哪些参数可以被jinfo动态修改】 jinfo -flag +PrintGCDetails 105704 【修改参数 PrintGCDetails 的值】 4、jmap。命令用于生成heap dump文件如果不使用这个命令，还可以使用-XX:+HeapDumpOnOutOfMemoryError参数来让虚拟机出现OOM的时候自动生成dump文件。 jmap不仅能生成dump文件，还可以查询finalize执行队列、Java堆和永久代的详细信息，如当前使用率、当前使用的是哪种收集器等。 详细使用：JVM调优命令-jmap 5、jstack。Java堆栈跟踪工具详细使用：使用jstack精确找到异常代码，jstack 工具使用，性能调优 注意：dead lock问题，占用cpu时间最多的线程，频繁GC 入手点总结： wait on monitor entry： 被阻塞的,肯定有问题，等待synchronized锁 runnable ： 注意IO线程，IO阻塞的线程 in Object.wait()： 注意非线程池等待，调用Object.wait()的对象 6、可视化工具 JConsole7、可视化工具 VisualVM，多合一故障处理工具五、JVM调优案例分析与实践七、虚拟机类加载机制1、虚拟机把表示类的class文件加载到内存，经过校验、转换解析、初始化，最终形成可以被虚拟机直接使用的java类型，这就是虚拟机的类加载机制2、类加载的时机 使用new关键字实例化对象的时候、读取一个类的静态字段的时候、调用类的静态方法的时候 使用java.lang.reflect包的方式对类进行反射调用的时候 初始化类，发现其父类还未初始化，需要对父类进行初始化 3、类加载的过程 加载。通过类的全限定名获取到定义此类的二进制字节流。将字节流所代表的静态存储结构转化成方法区的运行时数据结构。在方法区生成这个类的java.lang.Class对象。加载阶段和连接阶段的部分内容是交叉进行的。用户可以通过自己写的类加载器去控制字节流的获取方式（重写类加载器的loadClass()方法）， 验证。是连接阶段的第一步。目的是确保class文件中的二进制字节流符合虚拟机的要求，不会危及虚拟机自身安全。包括文件格式验证、元数据验证、字节码验证 准备。是连接阶段的第二步。是正式为类变量分配内存空间和设置初始值的阶段。这个初始值和初始化阶段的赋值不同，这里指的是变量的默认初始值。另外，如果时final修饰的变量，那么会在准备阶段赋予代码里指定的初始值 解析。是连接阶段的第三步。是虚拟机将符号引用替换为直接引用的过程 初始化。根据程序代码去初始化类变量和其他资源 4、类加载器 被不同类加载器加载的同名类，也认为是不同的类。 双亲委派模型。分为两种类加载器： 1 是启动类加载器 ，是虚拟机自身的一部分；2 是所有的其他类加载器，这些类加载器都由java语言实现。独立于虚拟机外部，全部继承自java.lang.ClassLoader抽象类。类加载器具体层次关系：启动类加载器-&gt;扩展类加载器-&gt;系统类加载器-&gt;自定义类加载器。每一个类的加载，会优先由父加载器来加载。这种方式就称为双亲委派，双亲委派保证了java基本类的不会被破坏和替代 第五部分 高效并发十二、Java内存模型与线程1、硬件的效率与一致性 完成计算任务，处理器必须和内存交互才能完成，比如读取运算数据，写入计算结果等。这个I/O操作是很难消除的。计算的处理器和存储设备的运算速度有几个数量级的差距。所以现代计算机加入了一层读写速度尽可能接近处理器的高速缓存 高速缓存解决了处理器和内存的速度矛盾，却引入了新的问题：内存一致性。多处理器系统中，各个处理器都有自己的高速缓存，又同时共用内存。为了解决这一问题，在读写内存时需要遵循缓存一致性协议。 处理器会对输入的代码进行乱序执行优化，类似的，Java虚拟机也存在着指令重排序优化。 2、Java内存模型Java内存模型规定，所有的变量（这个变量和java编程中的变量有区别，它包括了实例字段、静态字段。不包括局部变量和方法参数，因为后者是线程私有的）都存储在主内存，每条线程有自己的工作内存，工作内存中保存了该线程使用到的变量的拷贝副本，线程对变量的所有操作都必须在工作内存中进行，线程间变量值得传递需通过主内存来完成 主内存和工作内存间交互协议，8种原子操作： lock（锁定主内存） unlock（解锁主内存） read（读取主内存，为load准备） load（载入主内存至工作内存） use（执行引擎使用工作内存） assign（接受执行引擎计算后的值赋值给工作内存） store（存储工作内存至主内存，为write准备） write（把工作内存写入主内存） volatile是java虚拟机提供的轻量级的同步机制，对于volatile变量的特殊规则： 保证了变量对所有线程的可见性，当一个线程修改了这个变量的值，修改后的值对其他线程来说是立即可见的。普通变量，需要通过把新值会写到主内存，其他线程从主内存读取之后才可以看到最新值 禁止指令重排序优化。 无法保证符合操作的原子性，比如i++ 通过内存屏障实现的可见性和禁止重排序。不同硬件实现内存屏障的方式不同，Java内存模型屏蔽了这些差异，由JVM来为不同的平台生成相应的机器码来完成。X86 处理器只会对写-读进行指令重排序，写volatile变量时，会加lock总线锁，将cpu缓存写入主存，其他cpu的读都会被阻塞，然后其他核的缓存某些对应数据会被标记为失效，那么其他核下次读的时候先读缓存发现失效了，然后去主存读 关于long和double类型变量的特殊规则：允许虚拟机将没有被volatile变量修饰的64位数据的读写操作划分为两次32位的操作来进行。这点就是long和double的非原子性协定 3、Java与线程Java虚拟机实现线程，有三种方式： （1）通过内核线程实现。jvm中的一个线程对应一个轻量级进程，一个轻量级进程对应一个内核线程。CPU通过调度器对线程进行调度。缺点： 由于基于内核线程实现，各种线程操作需要系统调用，系统调用代价较高，需要在用户态和内核态之间来回切换 每个线程都需要一个内核线程的支持，因此轻量级进程会消耗内核资源，一个系统支持的轻量级进程是有限的 img （2）使用用户线程实现。不需要切换回内核态，也可以支持规模更大的线程数量。部分高性能数据库的多线程就是使用用户线程实现的。缺点是没有系统内核的支援，所有问题需要自己考虑，程序实现比较复杂 （3）内核线程和用户线程结合 img （4）JVM，对于Sun JDK来说，在Windows和LInux系统下，都是使用的一对一的线程模型实现的。 Java线程调度 协同式线程调度。线程的执行时间由自己控制，线程执行完毕，会主动通知系统 java使用的是抢占式调度。每个线程有系统分配执行时间，线程的切换也有系统来决定，线程的执行时间是可控的。线程可以设置优先级，来争取更多的执行时间。Java一共设置了10个优先级，操作系统的优先级数量可能和java定义的不一致，另外操作系统还可以更改线程的优先级，所以Java中优先级高的线程并不一定被优先执行。 Java线程状态转换 img](https://images2018.cnblogs.com/blog/1089532/201805/1089532-20180501004308988-221581556.png)![img](https://images2018.cnblogs.com/blog/1089532/201805/1089532-20180501004314419-1038645012.png)![img 十三、线程安全与锁优化高效并发是从jdk1.5 到jdk1.6的一个重要改进，HotSpot虚拟机开发团队耗费了大量的精力去实现锁优化技术 自旋锁与自适应自旋。同步互斥对性能最大的影响就是线程挂起、恢复需要从用户态切换到内核态，切换的过程会造成系统消耗。往往锁定的代码段执行时间非常短，为了这个短的时间去挂起和恢复是不值得的。所以提出了自旋锁的概念，当线程申请获取一个其他线程占用的锁时，这个线程不会立即挂起，而是通过一定次数的循环自旋，这个过程不会释放cpu的控制权，自适应自旋就是根据上一次自旋的结果来决定这一次自旋的次数 锁消除。虚拟机即时编译器在运行时会把检测到不可能发生共享数据竞争的锁消除 锁粗化。一系列的操作都是对同一个对象的加锁和解锁，虚拟机检测到这种情况会将锁的范围扩大（粗化） 轻量级锁 偏向锁。如果程序中大多数的锁总是被多个线程访问，那偏向锁模式就是多余的。可以使用参数 -XX:-UseBiasedLocking来禁止偏向锁 作者：leon66666 出处：http://www.cnblogs.com/wangzhongqiu/ 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利.","categories":[],"tags":[]},{"title":"","slug":"hadoop/zookeeper/cnblog读书笔记/redis","date":"2018-10-16T17:34:17.000Z","updated":"2018-10-17T03:07:59.000Z","comments":true,"path":"2018/10/17/hadoop/zookeeper/cnblog读书笔记/redis/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/hadoop/zookeeper/cnblog读书笔记/redis/","excerpt":"","text":"《Redis开发与运维》读书笔记一、初始Redis1、Redis特性与优点 速度快。redis所有数据都存放于内存；是用C语言实现，更加贴近硬件；使用了单线程架构，避免了多线程竞争问题 基于键值对的数据结构，支持的数据结构丰富。它主要提供了5种数据结构： 字符串、 哈希、 列表、 集合、 有序集合， 同时在字符串的基础之上演变出了位图（Bitmaps） 和HyperLogLog两种神奇的“数据结构”， 并且随着LBS（Location Based Service， 基于位置服务） 的不断发展， Redis3.2版本中加入有关GEO（地理信息定位） 的功能 功能丰富。键过期功能，用来实现缓存；提供了发布订阅功能，实现消息系统；支持Lua脚本；提供简单的事务功能；提供了Pipeline，一次性将一批命令传给redis服务器，减小了网络开销 简单，稳定。源码少，3.0版本源代码只有5w行左右 客户端语言多。 持久化。两种持久化方式： RDB和AOF 主从复制。复制功能是分布式Redis的基础 高可用和分布式。2.8版本提供了高可用实现Redis Sentinel， 它能够保证Redis节点的故障发现和故障自动转移。 Redis从3.0版本正式提供了分布式实现Redis Cluster， 它是Redis真正的分布式实现， 提供了高用、 读写和容量的扩展性。 2、应用场景 缓存。 排行榜系统。redis提供了列表和有序集合支持。 计数器应用。 社交网络。 消息队列系统。redis提供了订阅发布和阻塞队列功能，虽然和专业的消息队列软件比不够强大，但是可以满足一般的消息队列需求 3、redis常用操作 服务端启动。配置文件启动，redis-server /opt/redis/redis.conf 客户端启动。redis-cli -h 127.0.0.1 -p 6379 停止redis服务。redis-cli shutdown nosave|save 关闭过程：断开与客户端的连接；持久化文件生成。不建议kill -9 暴力杀进程，极端下会造成丢失数据的情况 二、API的理解和使用1、全局命令 查看所有键。【keys *】会遍历所有键，禁用 键总数。【dbsize】不会遍历所有键，直接获取redis内置的键总数 检查键是否存在。【exists key】存在返回1，不存在返回0 删除键。【del key】返回结果为成功删除的键的个数 设置键过期。【expire key seconds】秒级别；【expireat key timestamp 】秒级时间戳；【pexpire key milliseconds】毫秒级过期 ；【pexpireat key milliseconds-timestamp 】毫秒级时间戳 检查键过期。【ttl key】返回键的剩余过期时间，秒级；【pttl key】毫秒级；-1，键没设置过期时间；-2 键不存在； 清除过期时间。【persist】；对于字符串类型键，执行set命令也会去掉过期时间；setex命令作为set+expire的组合， 不但是原子执行， 同时减少了一次网络通讯的时间 查看键的类型。【type key】键不存在，返回none 键重命名。rename key newkey。如果在rename newkey之前，newkey已经存在，newkey的值会被覆盖。防止被覆盖，提供了renamenx命令。重命名期间会删除原来的key，如果key对应的值过大，存在阻塞redis的可能。 随机返回一个键。randomkey。 2、数据结构和内部编码每种数据结构都有底层的内部编码实现，而且是多种实现，redis会在合适的场景下选择合适的内部编码。 3、单线程架构 Redis使用了单线程架构和IO多路复用模型（epoll作为多路复用技术的实现，非阻塞IO）来实现。 每次客户端的请求都会经过发送命令、执行命令、返回结果三个阶段。 所有客户端命令都会放入到同一个队列中，然后逐个被执行。 单线程避免了线程切换和竞态产生的消耗 4、字符串，最大不能超过512M（1）命令 设置值。set key value [ex seconds] [px milliseconds] [nx|xx]。其中setnx可以作为分布式锁的实现 获取值。 get key。不存在返回 nil（空） 批量设置值，mset key value [key value …] ；批量获取值，mget key [key …] 。一次请求的网络时间大于命令处理时间。学会使用批量操作，能减少大量的网络消耗。提高业务处理效率。但是一次批量操作过多，有可能导致Redis阻塞或者网络拥堵 计数。incr、decr、incrby、decrby、incrbyfloat。很多其他的语言和存储系统通过cas实现计数，会有一定的cpu开销。redis单线程模型，完全不存在这个问题。 追加值。append key value。 字符串长度。strlen key。每个中文占用三个字节，也就是三个长度。 设置并返回原值。getset key value 设置指定位置的字符。setrange key offset value 获取部分字符串。getrange key start end。时间复杂度O（n） （2）内部编码，有三种 int。8个字节的长整型 embstr。小于等于39个字节的字符串 raw。大于39个字节的字符串 （3）应用场景 缓存 计数 共享session 限速。每个用户的请求频率，每个ip的请求频率 5、哈希（1）命令 设置field值。hset key field value。hsetnx，和setnx作用相同，只不过作用域由键变为field 获取field值。hget key field。如果field不存在，返回nil 删除field。hdel key field [field …] 计算field个数。hlen key 批量设置和获取field-value。hmget key field [field …] ；hmset key field value [field value …] 。 判断field是否存在。hexists key field。存在返回1，不存在返回0 获取所有field。hkeys key 获取所有value。hvals key 获取所有field-value。hgetall key。如果获取的元素比较多，可能会阻塞Redis。 hincrby key field；hincrbyfloat key field 计算value的字符串长度。hstrlen key field （2）内部编码 ziplist（压缩列表）。当哈希类型元素个数小于hash-max-ziplist-entries配置（默认512个） 、 同时所有值都小于hash-max-ziplist-value配置（默认64字节） 时， Redis会使用ziplist作为哈希的内部实现， ziplist使用更加紧凑的结构实现多个元素的连续存储， 所以在节省内存方面比hashtable更加优秀 hashtable（哈希表）。当哈希类型无法满足ziplist的条件时，Redis会使用hashtable作为哈希的内部实现 6、列表。列表中的每个字符串称为元素（element），一个列表最多存储2^32-1个元素。可以充当栈和队列，比较灵活。列表中的元素是有序的且可重复的，可以通过下标获取某个元素（1）命令 添加操作。从右边插入数据 rpush key value [value …]；从左边插入数据 lpush key value [value …]；向某个元素前或后插入数据 linsert key before|after pivot value 查找。获取指定范围的元素列表 lrange key start end（包含end）；获取指定下标的元素 lindex key index（-1为最后一个元素）；获取列表长度 llen key 删除。从左侧弹出元素 lpop key；从右侧弹出元素 rpop key；删除指定元素 lrem key count value（count&gt;0 从左到右，删除最多count个元素；count&lt;0 从右到左；count=0，删除所有）；按照索引范围修剪列表 ltrim key start end 修改。修改执行索引下标的元素 lset key index newValue； 阻塞操作。blpop key [key …] timeout ；brpop key [key …] timeout 。需要注意两点：第一点，如果blpop多个key，一旦有一个键能弹出元素，立刻给客户端返回；第二点，如果多个客户端对同一个key执行blpop，那么最先执行blpop的客户端可以获取到弹出的值。 （2）内部编码 ziplist（压缩列表）。当列表的元素个数小于list-max-ziplist-entries配置（默认512个），同时列表中每个元素的值都小于list-max-ziplist-value配置时（默认64字节），Redis会选用ziplist来作为列表的内部实现来减少内存的使用 linkedlist（链表）：当列表类型无法满足ziplist的条件时， Redis会使用linkedlist作为列表的内部实现。 Redis3.2版本提供了quicklist内部编码，简单地说它是以一个ziplist为节点的linkedlist，它结合了ziplist和linkedlist两者的优势，为列表类型提供了一种更为优秀的内部编码实现 （3）应用场景 消息队列。Redis的lpush+brpop命令组合即可实现阻塞队列， 生产者客户端使用lrpush从列表左侧插入元素， 多个消费者客户端使用brpop命令阻塞式的“抢”列表尾部的元素， 多个客户端保证了消费的负载均衡和高可用性。 文章列表。哈希存储每篇文章的详细信息。列表存储每个人的文章列表。支持分页获取，如果列表较大，获取列表中间元素的性能会变差，可以使用redis3.2版本的quicklist内部编码实现。 lpush+lpop=Stack（栈） ；lpush+rpop=Queue（队列） ；lpush+brpop=Message Queue（消息队列，阻塞队列）； lpush+ltrim=Capped Collection（有限集合） 7、集合（set）。不允许有重复元素，无序，不能通过索引下标获取元素。一个集合最多可以存储2^32-1个元素。支持集合内的增删改查，集合的交集、并集、差集。（1）命令。集合内操作。 添加元素。sadd key element [element …] 删除元素。srem key element [element …] 计算元素个数。scard key 。时间复杂度O（1），不会遍历集合。 判断元素是否在集合中。sismember key element 。在集合内返回1，不在返回0 随机从集合中返回指定个数元素。srandmember key [count] 从集合随机弹出指定个数的元素。spop key [count] 获取所有元素。smembers key 。如果元素过多，存在阻塞redis的可能。可以用sscan来完成。 （2）命令，集合间操作。 求多个集合的交集。sinter key [key …] 求多个集合的并集。suinon key [key …] 求多个集合的差集。sdiff key [key …] 将集合操作的结果保存。sinterstore/suionstore/sdiffstore destination key [key …] （3）内部编码 intset（整数集合） ： 当集合中的元素都是整数且元素个数小于set-maxintset-entries配置（默认512个）时， Redis会选用intset来作为集合的内部实现，从而减少内存的使用。 hashtable（哈希表） ： 当集合类型无法满足intset的条件时， Redis会使用hashtable作为集合的内部实现。 （4）使用场景 标签（tag）。使用sinter命令计算用户的共同兴趣。 生成随机数，抽奖 8、有序集合。元素可以排序，每个元素设置一个分数（score）作为排序的依据。集合成员不能重复，但是每个元素的score可以重复（1）命令。集合内的命令。 添加成员。zadd key score member [score member …] ·Redis3.2为zadd命令添加了nx、 xx、 ch、 incr四个选项：·nx： member必须不存在， 才可以设置成功， 用于添加。·xx： member必须存在， 才可以设置成功， 用于更新。·ch： 返回此次操作后， 有序集合元素和分数发生变化的个数·incr： 对score做增加， 相当于后面介绍的zincrby。 计算成员个数。zcard key 计算某个成员的分数。zscore key member 计算成员排名。zrank key member （分数由低到高）；zrevrank key member （分数由高到低） 删除成员。zrem key member [member …] 增加成员分数。zincrby key increment member 返回指定排名范围的成员。zrange key start end [withscores] （排名由低到高）；zrevrange key start end [withscores] （排名由高到低） 返回指定分数范围的成员。zrangebyscore key min max [withscores] [limit offset count] 。其中zrangebyscore按照分数从低到高返回， zrevrangebyscore反之。 例如下面操作从低到高返回200到221分的成员， withscores选项会同时返回每个成员的分数。 [limit offset count]选项可以限制输出的起始位置和个数 。同时min和max还支持开区间（小括号） 和闭区间（中括号） ， -inf和+inf分别代表无限小和无限大。 返回指定分数范围成员个数。zcount key min max 删除指定排名内的升序元素。zremrangebyrank key start end 删除指定分数范围的成员。zremrangebyscore key min max （2）命令，集合间的操作 交集。zinterstore destination numkeys key [key …] [weights weight [weight …]][aggregate sum|min|max] destination： 交集计算结果保存到这个键。·numkeys： 需要做交集计算键的个数。·key[key…]： 需要做交集计算的键。weights weight[weight…]： 每个键的权重， 在做交集计算时， 每个键中的每个member会将自己分数乘以这个权重， 每个键的权重默认是1。·aggregate sum|min|max： 计算成员交集后， 分值可以按照sum（和） 、min（最小值） 、 max（最大值） 做汇总， 默认值是sum 并集。zunionstore destination numkeys key [key …] [weights weight [weight …]][aggregate sum|min|max] 。 （3）内部编码 ziplist（压缩列表） ： 当有序集合的元素个数小于zset-max-ziplistentries配置（默认128个） ， 同时每个元素的值都小于zset-max-ziplist-value配置（默认64字节） 时， Redis会用ziplist来作为有序集合的内部实现， ziplist可以有效减少内存的使用 skiplist（跳跃表） ： 当ziplist条件不满足时， 有序集合会使用skiplist作为内部实现， 因为此时ziplist的读写效率会下降。 （4）使用场景 排行榜 9、键管理（1）键迁移 dump+restore可以实现在不同的Redis实例之间进行数据迁移的功能， 整个迁移的过程分为两步：1） 在源Redis上， dump命令会将键值序列化， 格式采用的是RDB格式。2） 在目标Redis上， restore命令将上面序列化的值进行复原， 其中ttl参数代表过期时间， 如果ttl=0代表没有过期时间。第一， 整个迁移过程并非原子性的，而是通过客户端分步完成的。 第二， 迁移过程是开启了两个客户端连接， 所以dump的结果不是在源Redis和目标Redis之间进行传输 migrate命令也是用于在Redis实例间进行数据迁移的， 实际上migrate命令就是将dump、 restore、 del三个命令进行组合， 从而简化了操作流程。migrate命令具有原子性， 而且从Redis3.0.6版本以后已经支持迁移多个键的功能， 有效地提高了迁移效率， migrate在10.4节水平扩容中起到重要作用。第一， 整个过程是原子执行的， 不需要在多个Redis实例上开启客户端的， 只需要在源Redis上执行migrate命令即可。第二， migrate命令的数据传输直接在源Redis和目标Redis上完成的。第三， 目标Redis完成restore后会发送OK给源Redis， 源Redis接收后会根据migrate对应的选项来决定是否在源Redis上删除对应的键。migrate host port key|”” destination-db timeout [copy] [replace] keys key1 key2 key3key|””。要迁移的键，多个键此处为””。keys key1 key2 key3。迁移多个键 （2）键遍历 全量遍历键。keys pattern。支持pattern匹配。如果非要使用，在一个不对外提供服务的Redis从节点上执行， 这样不会阻塞到客户端的请求， 但是会影响到主从复制 渐进式遍历。每次执行scan， 可以想象成只扫描一个字典中的一部分键， 直到将字典中的所有键遍历完毕。scan cursor [match pattern] [count number]·cursor是必需参数， 实际上cursor是一个游标，第一次遍历从0开始，每次scan遍历完都会返回当前游标的值，直到游标值为0，表示遍历结束。·match pattern是可选参数，它的作用的是做模式的匹配，这点和keys的模式匹配很像。·count number是可选参数，它的作用是表明每次要遍历的键个数，默认值是10，此参数可以适当增大。除了scan以外，Redis提供了面向哈希类型、集合类型、有序集合的扫描遍历命令，解决诸如hgetall、 smembers、 zrange可能产生的阻塞问题，对应的命令分别是hscan、 sscan、 zscan，它们的用法和scan基本类似渐进式遍历可以有效的解决keys命令可能产生的阻塞问题，但是scan并非完美无瑕，如果在scan的过程中如果有键的变化（增加、 删除、 修改），scan并不能保证完整的遍历出来所有的键 （3）数据库管理 切换数据库。select db。各个数据库之间没有联系，可以存在相同的键。redis是单线程的，多个数据库使用同一个cpu，彼此至今还是会受影响。 清除数据库。flushdb/flushall。如果当前数据库键值数量比较多，flushdb/flushall存在阻塞Redis的可能性 三、小功能，大用处1、慢查询分析（1）慢查询只是统计的命令执行的时间，不包括客户端发送命令、命令排队、返回结果的时间。 slowlog-log-slower-than预设阀值，它的单位是微秒（1秒=1000毫秒=1000000微秒），默认值是10000。slowlog-log-slower-than=0会记录所有的命令，slowlog-log-slowerthan&lt;0对于任何命令都不会进行记录。 实际上Redis使用了一个列表来存储慢查询日志，slowlog-max-len就是列表的最大长度 在Redis中有两种修改配置的方法， 一种是修改配置文件， 另一种是使用config set命令动态修改。如果要Redis将配置持久化到本地配置文件，需要执行config rewrite命令 获取慢查询日志。slowlog get [n] ，n可以指定条数。每个慢查询日志有4个属性组成， 分别是慢查询日志的标识id、 发生时间戳、 命令耗时、 执行命令和参数 获取慢查询日志当前的列表长度，slowlog len。 慢查询日志列表清空。slowlog reset。 （2）最佳实践 slowlog-max-len配置建议： 线上建议调大慢查询列表， 记录慢查询时Redis会对长命令做截断操作， 并不会占用大量内存。 增大慢查询列表可以减缓慢查询被剔除的可能， 例如线上可设置为1000以上。 slowlog-log-slower-than配置建议： 默认值超过10毫秒判定为慢查询，需要根据Redis并发量调整该值。 由于Redis采用单线程响应命令， 对于高流量的场景， 如果命令执行时间在1毫秒以上， 那么Redis最多可支撑OPS不到1000。 因此对于高OPS场景的Redis建议设置为1毫秒。 慢查询只记录命令执行时间， 并不包括命令排队和网络传输时间。 因此客户端执行命令的时间会大于命令实际执行时间。 定期执行slow get命令将慢查询日志持久化到其他存储中（例如MySQL） ， 然后可以制作可视化界面进行查询 2、Redis Shell（1）Redis-cli -h 服务端ip -p 端口 -r （repeat）将命令执行多次。redis-cli -r 3 ping -i （interval）每个几秒执行几次。redis-cli -r 5 -i 1 ping -a （auth）密码 –slave。将当前客户端模拟成服务端的从节点。 –rdb。生成RDB持久化文件，保存到本地。可用来做持久化文件的定期备份 –eval。执行lua脚本 –latency。测试客户端到目标redis服务的网络延迟；–latency-history，每隔多久输出一次网络延迟；–latency-dist，使用统计图表的形式从控制台输出延迟统计信息 –stat。实时获取redis的重要统计信息。key的数量、内存占用量、客户端数量、请求数量、连接数量 （2）redis-server redis-server –test-memory 1024。检测当前操作系统能否稳定地分配指定容量的内存给Redis。整个内存检测的时间比较长。该功能更偏向于调试和测试 （3）redis-benchmark。可以为Redis进行基准性能测试 -c。代表客户端的并发数量（默认是50） -n（num） 。代表客户端请求总量（默认是100000） 。redis-benchmark-c100-n20000代表100各个客户端同时请求Redis， 一共执行20000次 -r（random） 选项， 可以向Redis插入更多随机的键 –csv选项会将结果按照csv格式输出， 便于后续处理， 如导出到Excel等 3、Pipeline。（1）概述。Redis客户端执行一次命令，需要经历发送命令、命令排队、命令执行、返回结果四个过程。4个过程统称为一次Round Trip Time ，往返时间。 ​ Pipeline（流水线）机制能将一组Redis命令进行组装，通过一次RTT传输给Redis，再将这组Redis命令的执行结果按顺序返回给客户端 （2）性能测试。执行速度一般比逐条执行要快，客户端和服务端的网络延迟越大，Pipeline的效果越明显 （3）原生批量命令和Pipeline对比。 原生批量命令是原子的，Pipeline是非原子的。 原生批量命令是一个命令对应多个key，Pipeline支持多个命令。 原生批量命令是Redis服务端支持实现的，而Pipeline需要服务端和客户端的共同实现。 （4）最佳实践 一次组装Pipeline数据量过大， 一方面会增加客户端的等待时间， 另一方面会造成一定的网络阻塞， 可以将一次包含大量命令的Pipeline拆分成多次较小的Pipeline来完成 Pipeline只能操作一个Redis实例 4、事务与lua（1）事务 简单事务功能，multi和exec命令之间的命令，能够原子顺序执行。如果事务之中存在命令拼写错误，整个事务不会执行；如果存在运行时错误，事务并不会回滚 watch命令，是事务执行之前，确保事务中的key没有被其他客户端修改过，修改过的话就不执行事务。类似于乐观锁 Redis的事务比较简单，无法保证事务回滚，无法实现事务内命令之间的逻辑运算 （2）lua用法简述。由c语言实现，许多应用选用它作为脚本语言。尤其在游戏领域 （3）Redis中使用lua eval 执行lua脚本。eval 脚本内容 key个数 key列表 参数列表。对应 jedis.eval evalsha 执行lua脚本。 script load命令可以将脚本内容加载到Redis内存中，返回SHA1。对应jedis.scriptLoadevalsha 脚本SHA1值 key个数 key列表 参数列表 lua 的Redis API。 使用redis.call函数实现对Redis的访问。例如：redis.call(“set”, “hello”, “world”)；redis.call(“get”, “hello”)还可以使用redis.pcall函数实现对Redis的调用，如果redis.call执行失败，那么脚本执行结束会直接返回错误，而redis.pcall会忽略错误继续执行脚本 开发提示 Lua可以使用redis.log函数将Lua脚本的日志输出到Redis的日志文件中，但是一定要控制日志级别。Redis3.2提供了Lua Script Debugger功能用来调试复杂的Lua脚本 Redis管理Lua脚本 script load 将Lua脚本加载到Redis内存中scripts exists sha1 [sha1 …] 判断sha1是否已经加载到Redis内存中script flush 清除Redis内存已经加载的所有Lua脚本script kill 用于杀掉正在执行的Lua脚本。如果此时lua脚本阻塞redis了，可以使用此命令快速将脚本杀掉。如果正在执行的是写操作，script kill 将不会生效，只能通过shutdown save停掉redis服务。 5、Bitmaps（1）概述。Bitmaps本身的数据结构就是字符串，支持对字符串的位进行操作。 （2）每个独立用户是否访问过网站存放在Bitmaps中，将访问的用户记做1，没有访问的用户记做0，用偏移量作为用户的id 设置值。setbit key offset value 。初始化的时候，如果偏移量非常大，整个初始化过程会非常慢，可能会造成redis阻塞。 获取值。gitbit key offset 。返回0说明没有访问过 获取Bitmaps指定范围值为1的个数 。bitcount [start][end] 。 Bitmaps间的运算 。bitop op destkey key[key….] 。做多个Bitmaps的and（交集） 、 or（并集） 、 not（非） 、 xor（异或） 操作并将结果保存在destkey中 计算Bitmaps中第一个值为targetBit的偏移量。bitpos key targetBit [start] [end] （3）Bitmaps分析 假设网站有1亿用户， 每天独立访问的用户有5千万， 如果每天用集合类型和Bitmaps分别存储活跃用户。集合类型内存量：64位50000000=400M。Bitmaps内存量：1位50000000=12.5M。 6、HyperLogLog Redis中hyperloglog是用来做基数统计的，其优点是：在输入元素的数量或者体积非常非常大的时候，计算基数所需的空间总是固定的，并且是很小的。在Redis里面，每个Hyperloglog键只需要12Kb的大小就能计算接近2^64个不同元素的基数，但是hyperloglog只会根据输入元素来计算基数，而不会存储元素本身，所以不能像集合那样返回各个元素本身 pfadd key element [element …]。添加操作。如果添加成功返回1 pfcount key [key …]。求一个或多个key的基数，计算独立用户数 pfmerge destkey sourcekey [sourcekey …]。合并。pfmerge可以求出多个HyperLogLog的并集并赋值给destkey HyperLogLog内存占用量小得惊人， 但是用如此小空间来估算如此巨大的数据， 必然不是100%的正确， 其中一定存在误差率。 Redis官方给出的数字是0.81%的失误率 7、发布订阅 发布消息。publish channel message 。 订阅消息。subscribe channel [channel …]。多个客户端订阅同一个频道，都会受到消息推送，类似于广播。 取消订阅。unsubscribe [channel [channel …]] 按照模式订阅和取消订阅。psubscribe pattern [pattern…]；punsubscribe [pattern [pattern …]] 订阅查询。pubsub channels [pattern]，查看活跃的频道；pubsub numsub [channel …]，查看频道订阅数；pubsub numpat，查看模式订阅数 8、GEO 增加地理位置信息。geoadd key longitude latitude member [longitude latitude member …]。longitude、 latitude、 member分别是该地理位置的经度、 纬度、 成员。添加和更新都是用此命令，可以同时添加多个地理位置信息。 获取地理位置信息。geopos key member [member …] 获取两个地址位置的距离。geodist key member1 member2 [unit]。unit代表返回结果的单位，m（meters） 代表米、km（kilometers） 代表公里、mi（miles） 代表英里、ft（feet） 代表尺 获取指定位置范围内的地理信息位置集合。georadius key longitude latitude/georadiusbymember key member radiusm|km|ft|mi [withcoord] [withdist][withhash] [COUNT count] [asc|desc] [store key] [storedist key]都是以一个地理位置为中心算出指定半径内的其他地理信息位置 获取geohash。geohash key member [member …]。Redis使用geohash将二维经纬度转换为一维字符串。GEO的数据类型为zset， Redis将所有地理位置信息的geohash存放在zset中字符串越长， 表示的位置更精确， 例如geohash长度为9时， 精度在2米左右两个字符串越相似， 它们之间的距离越近， Redis利用字符串前缀匹配算法实现相关的命令geohash编码和经纬度是可以相互转换的 删除地理位置信息。zrem key member。GEO没有提供删除成员的命令， 但是因为GEO的底层实现是zset， 所以可以借用zrem命令实现对地理位置信息的删除。 四、客户端1、客户端通讯协议通讯协议是建立在TCP协议之上的。Redis制定了RESP（REdis Serialization Protocol， Redis序列化协议） 实现客户端与服务端的正常交互 2、Java客户端Jedis基本使用、Jedis连接池、Pipeline用法、执行Lua脚本等功能 3、客户端管理（1）客户端API。client .. 命令 client list。列出与Redis服务端相连的所有客户端连接信息。输出结果的每一行代表一个客户端的信息， 可以看到每行包含了十几个属性id： 客户端连接的唯一标识， 这个id是随着Redis的连接自增的， 重启Redis后会重置为0addr： 客户端连接的ip和端口。fd： socket的文件描述符， 与lsof命令结果中的fd是同一个， 如果fd=-1代表当前客户端不是外部客户端， 而是Redis内部的伪装客户端。name： 客户端的名字age和idle分别代表当前客户端已经连接的时间和最近一次的空闲时间。当age等于idle时，说明连接一直处于空闲状态flag是用于标识当前客户端的类型， 例如flag=S代表当前客户端是slave客户端、 flag=N代表当前是普通客户端， flag=O代表当前客户端正在执行monitor命令 输入缓冲区： qbuf（总容量）、 qbuf-free（剩余容量）。redis为每个客户端分配了输入缓冲区， 它的作用是将客户端发送的命令临时保存， 同时Redis从会输入缓冲区拉取命令并执行， 输入缓冲区为客户端发送命令到Redis执行命令提供了缓冲功能输入缓冲区会根据输入内容大小的不同动态调整， 只是要求每个客户端缓冲区的大小不能超过1G， 超过后客户端将被关闭。输入缓冲区过大主要是因为Redis的处理速度跟不上输入缓冲区的输入速度 输入缓冲使用不当会产生两个问题：·一旦某个客户端的输入缓冲区超过1G， 客户端将会被关闭。·输入缓冲区不受maxmemory控制，一旦超过maxmemory限制， 可能会产生数据丢失、 键值淘汰、 OOM等情况 监控输入缓冲区异常的方法有两种：通过定期执行client list命令，收集qbuf和qbuf-free找到异常的连接记录并分析，最终找到可能出问题的客户端。能精准定位客户端，但是执行速度较慢，频繁指定可能阻塞redis通过info命令的info clients模块，找到最大的输入缓冲区，client_biggest_input_buf代表最大的输入缓冲区，可以设置超过10M（阈值）就进行报警。定位不精准，执行速度快。 输出缓冲区： obl、 oll、 omem。Redis为每个客户端分配了输出缓冲区， 它的作用是保存命令执行的结果返回给客户端， 为Redis和客户端交互返回结果提供缓冲。输出缓冲区由两部分组成： 固定缓冲区（16KB） 和动态缓冲区， 其中固定缓冲区返回比较小的执行结果， 而动态缓冲区返回比较大的结果client list中的obl代表固定缓冲区的长度， oll代表动态缓冲区列表的长度， omem代表使用的字节数监控输出缓冲区的方法同输入缓冲区监控方法 输出缓冲区的容量可以通过参数client-outputbuffer-limit来进行设置，输出缓冲区也不会受到maxmemory的限制配置规则：client-output-buffer-limit ： 客户端类型， 分为三种。 a） normal： 普通客户端； b）slave： slave客户端， 用于复制； c） pubsub： 发布订阅客户端。： 如果客户端使用的输出缓冲区大于， 客户端会被立即关闭。和： 如果客户端使用的输出缓冲区超过了并且持续了秒， 客户端会被立即关闭 输出缓冲区出现异常的概率相对会比较大，如何预防；进行上述监控， 设置阀值， 超过阀值及时处理限制普通客户端输出缓冲区的， 把错误扼杀在摇篮中适当增大slave的输出缓冲区的，master节点写入较大， slave客户端的输出缓冲区可能会比较大， 一旦slave客户端连接因为输出缓冲区溢出被kill， 会造成复制重连限制容易让输出缓冲区增大的命令， 例如， 高并发下的monitor命令就是一个危险的命令。及时监控内存， 一旦发现内存抖动频繁， 可能就是输出缓冲区过大。 client setName和client getName。client setName用于给客户端设置名字， 这样比较容易标识出客户端的来源。 client kill ip:port。此命令用于杀掉指定IP地址和端口的客户端。 client pause timeout(毫秒)。client pause命令用于阻塞客户端timeout毫秒数，在此期间客户端连接将被阻塞。生产环境中，暂停客户端成本非常高该命令可以在如下场景起到作用：client pause只对普通和发布订阅客户端有效，对于主从复制（从节点内部伪装了一个客户端）是无效的，也就是此期间主从复制是正常进行的，此命令可以用来让主从复制保持一致client pause可以用一种可控的方式将客户端连接从一个Redis节点切换到另一个Redis节点。 monitor命令用于监控Redis正在执行的命令每个客户端都有自己的输出缓冲区， 既然monitor能监听到所有的命令， 一旦Redis的并发量过大，monitor客户端的输出缓冲会暴涨， 可能瞬间会占用大量内存 （2）客户端相关配置 Redis提供了maxclients参数来限制最大客户端连接数， 一旦连接数超过maxclients， 新的连接将被拒绝。可以通过info clients来查询当前Redis的连接数axclients默认值是10000，可以通过config set maxclients对最大客户端连接数进行动态设置 Redis提供了timeout（单位为秒）参数来限制连接的最大空闲时间，一旦客户端连接的idle时间超过了timeout，连接将会被关闭。默认的timeout是0，动态设置config set timeout 30 tcp-keepalive：检测TCP连接活性的周期，默认值为0，也就是不进行检测，如果需要设置，建议为60，那么Redis会每隔60秒对它创建的TCP连接进行活性检测，防止大量死连接占用系统资源 tcp-backlog：TCP三次握手后，会将接受的连接放入队列中，tcpbacklog就是队列的大小，它在Redis中的默认值是511。通常来讲这个参数不需要调整，但是这个参数会受到操作系统的影响 （3）客户端统计片段 info clients命令 connected_clients：代表当前Redis节点的客户端连接数，需要重点监控，一旦超过maxclients，新的客户端连接将被拒绝。 client_longest_output_list： 当前所有输出缓冲区中队列对象个数的最大值。 client_biggest_input_buf： 当前所有输入缓冲区中占用的最大容量。 blocked_clients：正在执行阻塞命令（例如blpop、 brpop、brpoplpush）的客户端个数。 info stats 命令 total_connections_received： Redis自启动以来处理的客户端连接数总数 rejected_connections： Redis自启动以来拒绝的客户端连接数， 需要重点监控 4、客户端常见异常（1）无法从连接池获取到连接 JedisPool中的Jedis对象个数是有限的， 默认是8个。如果连接池中没有空闲Jedis对象，新的请求就需要进行等待（例如设置了maxWaitMillis&gt;0）在maxWaitMillis时间内仍然无法获取到Jedis对象就会抛出异常：JedisConnectionException: Could not get a resource from the pool如果设置了blockWhenExhausted=false， 那么调用者发现池子中没有资源时， 会立即抛出异常不进行等待 造成没有资源的原因非常多：客户端： 高并发下连接池设置过小， 出现供不应求客户端： 没有正确使用连接池， 比如没有进行释放客户端： 存在慢查询操作， 这些慢查询持有的Jedis对象归还速度会比较慢，造成池子满了服务端： 客户端是正常的， 但是Redis服务端由于一些原因造成了客户端命令执行过程的阻塞 （2）客户端读写超时，SocketTimeoutException: Read timed out 造成该异常的原因也有以下几种：·读写超时间设置得过短。·命令本身就比较慢。·客户端与服务端网络不正常。·Redis自身发生阻塞。 （3）客户端连接超时，SocketTimeoutException: connect timed out 造成该异常的原因也有以下几种：连接超时设置得过短， 可以通过下面代码进行设置：jedis.getClient().setConnectionTimeout(time);Redis发生阻塞， 造成tcp-backlog已满， 造成新的连接失败。客户端与服务端网络不正常。 （4）客户端缓冲区异常 造成这个异常的原因可能有如下几种：输出缓冲区满。长时间闲置连接被服务端主动断开不正常并发读写： Jedis对象同时被多个线程并发操作， 可能会出现上述异常 （5）Lua脚本正在执行 如果Redis当前正在执行Lua脚本， 并且超过了lua-time-limit， 此时Jedis调用Redis时， 会收到下面的异常。 JedisDataException: BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE. （6）Redis正在加载持久化文件 Jedis调用Redis时， 如果Redis正在加载持久化文件， 那么会收到下面的异常：JedisDataException: LOADING Redis is loading the dataset in memory （7）Redis使用的内存超过maxmemory配置 Jedis执行写操作时， 如果Redis的使用内存大于maxmemory的设置， 会收到下面的异常， 此时应该调整maxmemory并找到造成内存增长的原因JedisDataException: OOM command not allowed when used memory &gt; ‘maxmemory’. （8）客户端连接数过大 如果客户端连接数超过了maxclients， 新申请的连接就会出现如下异常：JedisDataException: ERR max number of clients reached 一般来说可以从两个方面进行着手解决：如果应用方是分布式结构的话，可以通过下线部分应用节点（例如占用连接较多的节点），使得Redis的连接数先降下来。从而让绝大部分节点可以正常运行，此时再通过查找程序bug或者调整maxclients进行问题的修复。果此时客户端无法处理， 而当前Redis为高可用模式（例如Redis Sentinel和Redis Cluster） ， 可以考虑将当前Redis做故障转移。但是无论从哪个方面进行处理， 故障的快速恢复极为重要， 当然更为重要的是找到问题的所在， 否则一段时间后客户端连接数依然会超过maxclients。 5、客户端案例分析（1）Redis主节点内存陡增 服务端现象： Redis主节点内存陡增， 几乎用满maxmemory， 而从节点内存并没有变化 客户端现象： 客户端产生了OOM异常， 也就是Redis主节点使用的内存已经超过了maxmemory的设置， 无法写入新的数据 分析原因：确实有大量写入， 但是主从复制出现问题： 查询了Redis复制的相关信息， 复制是正常的， 主从数据基本一致。主从的键个数基本一致，使用dbsize命令其他原因造成主节点内存使用过大： 排查是否由客户端缓冲区造成主节点内存陡增， 使用info clients命令发现客户端输出缓冲区不正常，client_longest_output_list:225698通过client list命令找到omem不正常的连接， 一般来说大部分客户端的omem为0，redis-cli client list | grep -v “omem=0”最后发现是因为有客户端在执行monitor命令造成的 （2）客户端周期性超时 客户端现象： 客户端出现大量超时， 经过分析发现超时是周期性出现的 服务端现象： 服务端并没有明显的异常， 只是有一些慢查询操作 原因分析：网络原因： 服务端和客户端之间的网络出现周期性问题， 经过观察网络是正常的客户端： 由于是周期性出现问题， 就和慢查询日志的历史记录对应了一下时间， 发现只要慢查询出现， 客户端就会产生大量连接超时， 两个时间点基本一致最终找到问题是慢查询操作造成的， 通过执行hlen发现有200万个元素， 这种操作必然会造成Redis阻塞， 有定时任务代码每5分钟执行一次hgetall操作 五、持久化1、RDB。RDB持久化是把当前进程数据生成快照保存到硬盘的过程， 分为手动触发和自动触发（1）触发机制 手动触发：save命令。阻塞当前Redis服务器，直到RDB过程完成。线上环境不建议使用 手动触发：bgsave命令。Redis进程执行fork操作创建子进程，RDB持久化由子进程负责。阻塞只发生在fork阶段，时间很短。 自动触发：使用save相关配置：“save m n”，表示m秒内发生了n次数据修改，自动触发bgsave。 自动触发：从节点执行全量复制操作，主节点自动执行bgsave生成RDB文件，发给从节点 自动触发：执行debuge reload命令重新加载Redis时，会自动触发save操作 自动触发：执行shutdown命令时，如果没有开启AOF功能，会自动触发bgsave （2）流程说明 监测是否存在正在执行的子进程，如RDB/AOF进程，如果存在直接返回 父进程创建子进程，fork过程中父进程会阻塞，通过info stats 命令查看latest_fork_usec选项查看最近一次fork的耗时，单位为微秒 父进程fork完成后，返回“Backgroung saving started”，不在阻塞父进程，开始响应其他命令 子进程创建RDB文件，根据父进程内存生成快照，完成后对原有文件进行原子替换 子进程发送信号给父进程表示完成，父进程更新统计信息 （3）RDB文件的处理 RDB文件保存在dir配置的路径下，名字为dbfilename配置。可以通过命令动态修改 config set dir；config set dbfilename Redis采用默认的LZF算法对生成的RDB文件进行压缩，默认开启，虽然压缩过程会消耗cpu，但是可以大幅降低压缩后的文件体积，方便保存到磁盘和通过网络传输到从节点，线上建议开启 如果Redis加载损坏的RDB文件时拒绝启动，可以使用Redis提供的redis-check-dump工具检测RDB文件生成对应的错误报告 （4）RDB的优缺点 优点：RDB是一个紧凑压缩的二进制文件，代表Redis在某个时间点上的快照。适用于备份、全量复制等场景。 优点：Redis加载RDB恢复数据的速度远远快于AOF的方式 缺点：RDB没有办法做到实时持久化 缺点：REB文件使用特定的二进制格式保存，存在老版本的服务器无法兼容新版RDB格式的问题。 2、AOF。以独立日志的形式记录每次写命令。重启时再重新执行AOF文件中的命令，达到恢复数据的目的（1）配置 开启AOF功能需要设置配置： appendonly yes， 默认不开启。 AOF文件名通过appendfilename配置设置， 默认文件名是appendonly.aof。 保存路径同RDB持久化方式一致， 通过dir配置指定。 工作流程操作： 命令写入（append） 、 文件同步（sync） 、 文件重写（rewrite） 、 重启加载（load） （2）命令写入缓存 写入的命令内容直接是文本协议格式，会把内容追加到缓冲区。文本协议具有很好的兼容性 先写入缓冲区，避免了每次的命令直接追加到硬盘，提高性能。 （3）文件同步到磁盘，由参数appendfsync控制。设置不同值含义不同 always。命令写入缓冲区之后，调用系统fsync命令同步到磁盘，fsync完成后线程返回 everysec。命令写入缓冲区之后，调用系统的write操作，write操作完成后线程返回。fsync同步操作由专门的线程每秒调用一次 no。命令写入缓冲区之后，调用系统的write操作，不进行fsync操作。同步到硬盘由操作系统负责，通常同步周期最长30秒 write操作会触发延迟写（delayed write）机制，Linux内核提供页缓冲区提高硬盘IO性能。write写入系统缓冲区之后直接返回。同步硬盘操作依赖于操作系统调度机制 fsync操作，针对单个文件操作，强制磁盘同步。将阻塞直到写入硬盘完成后返回。 always配置太耗费性能，只能支持大约几百tps并发写入；no配置，每次系统不同周期不可控；everysec，建议采用的同步策略，也是默认配置 （4）AOF文件重写。把Redis进程内的数据转化成写命令同步更新到新的AOF文件，AOF重新降低了占用空间，更小的AOF文件可以更快的被Redis加载 重写之后的AOF文件变小的原因 ：进程内已经超时的数据不在写入文件旧的AOF文件中含有无效命令，新的AOF文件只保留最终数据的写入命令多条写命令可以合并成一个 十、集群1、数据分布作者：leon66666 出处：http://www.cnblogs.com/wangzhongqiu/ 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利.","categories":[],"tags":[]},{"title":"","slug":"hadoop/zookeeper/cnblog读书笔记/Untitled","date":"2018-10-16T17:32:44.000Z","updated":"2018-10-16T17:37:32.000Z","comments":true,"path":"2018/10/17/hadoop/zookeeper/cnblog读书笔记/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/hadoop/zookeeper/cnblog读书笔记/Untitled/","excerpt":"","text":"红黑树并没有我们想象的那么难(上)红黑树并没有我们想象的那么难 上、下两篇已经完成, 希望能帮助到大家. 红黑树并没有我们想象的那么难(上): http://daoluan.net/blog/rbtree-is-not-difficult/ 红黑树并没有我们想象的那么难(下): http://daoluan.net/blog/rbtree-is-not-difficult-2/ 红黑树并没有想象的那么难, 初学者觉得晦涩难读可能是因为情况太多. 红黑树的情况可以通过归结, 通过合并来得到更少的情况, 如此可以加深对红黑树的理解. 网络上的大部分红黑树的讲解因为没有「合并」. 红黑树的五个性质: [ img](assets/450px-Red-black_tree_example.svg.png) 性质1. 节点是红色或黑色。 性质2. 根是黑色。 性质3. 所有叶子都是黑色（叶子是NIL节点）。 性质4. 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点) 性质5. 从任一节点到其每个叶子的所有简单路径 都包含相同数目的黑色节点。 红黑树的数据结构摘自 sgi stl 红黑树数据结构定义: 123456789101112131415161718192021222324252627282930313233typedef bool _Rb_tree_Color_type;const _Rb_tree_Color_type _S_rb_tree_red = false;const _Rb_tree_Color_type _S_rb_tree_black = true;struct _Rb_tree_node_base&#123; typedef _Rb_tree_Color_type _Color_type; typedef _Rb_tree_node_base* _Base_ptr; _Color_type _M_color; _Base_ptr _M_parent; _Base_ptr _M_left; _Base_ptr _M_right; static _Base_ptr _S_minimum(_Base_ptr __x) &#123; while (__x-&gt;_M_left != 0) __x = __x-&gt;_M_left; return __x; &#125; static _Base_ptr _S_maximum(_Base_ptr __x) &#123; while (__x-&gt;_M_right != 0) __x = __x-&gt;_M_right; return __x; &#125;&#125;;template &lt;class _Value&gt;struct _Rb_tree_node : public _Rb_tree_node_base&#123; typedef _Rb_tree_node&lt;_Value&gt;* _Link_type; _Value _M_value_field;&#125;; 二叉搜索树的插入删除操作在展开红黑树之前, 首先来看看普通二叉搜索树的插入和删除. 插入很容易理解, 比当前值大就往右走, 比当前值小就往左走. 详细展开的是删除操作. 二叉树的删除操作有一个技巧, 即在查找到需要删除的节点 X; 接着我们找到要么在它的左子树中的最大元素节点 M、要么在它的右子树中的最小元素节点 M, 并交换(M,X). 此时, M 节点必然至多只有一个孩子; 最后一个步骤就是用 M 的子节点代替 M 节点就完成了. 所以, 所有的删除操作最后都会归结为删除一个至多只有一个孩子的节点, 而我们删除这个节点后, 用它的孩子替换就好了. 将会看到 sgi stl map 就是这样的策略. 在红黑树删除操作讲解中, 我们假设代替 M 的节点是 N(下面的讲述不再出现 M). 红黑树的插入插入新节点总是红色节点, 因为不会破坏性质 5, 尽可能维持所有性质. 假设, 新插入的节点为 N, N 节点的父节点为 P, P 的兄弟(N 的叔父)节点为 U, P 的父亲(N 的爷爷)节点为 G. 所以有如下的印象图: [ rbtree0](assets/rbtree0.png) 插入节点的关键是: 插入新节点总是红色节点 如果插入节点的父节点是黑色, 能维持性质 如果插入节点的父节点是红色, 破坏了性质. 故插入算法就是通过重新着色或旋转, 来维持性质 插入算法详解如下, 走一遍红黑树维持其性质的过程: 第 0.0 种情况, N 为根节点, 直接 N-&gt;黑. over 第 0.1 种情况, N 的父节点为黑色, 这不违反红黑树的五种性质. over 第 1 种情况, N,P,U 都红(G 肯定黑). 策略: G-&gt;红, N,P-&gt;黑. 此时, G 红, 如果 G 的父亲也是红, 性质又被破坏了, HACK: 可以将 GPUN 看成一个新的红色 N 节点, 如此递归调整下去; 特俗的, 如果碰巧将根节点染成了红色, 可以在算法的最后强制 root-&gt;黑. [ rbtre01](assets/rbtre01.png) 第 2 种情况, P 为红, N 为 P 右孩子, N 为红, U 为黑或缺少. 策略: 旋转变换, 从而进入下一种情况: [ rbtree02](assets/rbtree02.png) 第 3 种情况, 可能由第二种变化而来, 但不是一定: P 为红, N 为 P 左孩子, N 为红. 策略: 旋转, 交换 P,G 颜色, 调整后, 因为 P 为黑色, 所以不怕 P 的父节点是红色的情况. over [ rbtree03](assets/rbtree03.png) 红黑树的插入就为上面的三种情况. 你可以做镜像变换从而得到其他的情况. 红黑树的删除假设 N 节点见上面普通二叉树删除中的定义, P 为 N 父节点, S 为 N 的兄弟节点, SL,SR 分别是 S 的左右子节点. 有如下印象图: [ rbtree04](assets/rbtree04.png) N 没有任何的孩子! 删除节点的关键是: 如果删除的是红色节点, 不破坏性质 如果删除的是黑色节点, 那么这个路径上就会少一个黑色节点, 破坏了性质. 故删除算法就是通过重新着色或旋转, 来维持性质 删除算法详解如下, 走一遍红黑树维持其性质的过程: 第 0.0 情况, N 为根节点. over 第 0.1 情况, 删除的节点为红. over 第 0.2 情况, 删除节点为黑, N 为红. 策略: N-&gt;黑, 重新平衡. over 第 1 情况, N,P,S,SR,SL 都黑. 策略: S-&gt;红. 通过 PN,PS 的黑色节点数量相同了, 但会比其他路径多一个, 解决的方法是在 P 上从情况 0 开始继续调整. 为什么要这样呢? HANKS: 因为既然 PN,PS 路径上的黑节点数量相同而且比其他路径会少一个黑节点, 那何不将其整体看成了一个 N 节点! 这是递归原理. [ rbtree05](assets/rbtree05.png) 第 2 情况, S 红, 根据红黑树性质 P,SL,SR 一定黑. 策略: 旋转, 交换 P,S 颜色. 处理后关注的范围缩小, 下面的情况对应下面的框图, 算法从框图重新开始, 进入下一个情况: [ rbtree06](assets/rbtree06.png) 第 2.1 情况, S,SL,SR 都黑. 策略: P-&gt;黑. S-&gt;红, 因为通过 N 的路径多了一个黑节点, 通过 S 的黑节点个数不变, 所以维持了性质 5. over. 将看到, sgi stl map 源代码中将第 2.1 和第 1 情况合并成一种情况, 下节展开. [ rbtree07](assets/rbtree07.png) 第 2.2.1 情况, S,SR 黑, SL 红. 策略: 旋转, 变换 SL,S 颜色. 从而又进入下一种情况: [ rbtree08](assets/rbtree08.png) 第 2.2.2 情况, S 黑, SR 红. 策略: 旋转, 交换 S,P 颜色, SR-&gt;黑色, 重新获得平衡. [ rbtree09](assets/rbtree09.png) 上面情况标号 X.X.X 并不是说这些关系是嵌套的, 只是这样展开容易理解. 此时, 解释三个地方: 通过 N 的黑色节点数量多了一个 通过 SL 的黑色节点数量不变 通过 SR 的黑色节点数量不变 红黑树删除重新调整伪代码如下: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// 第 0.0 情况, N 为根节点. overif N.parent == NULL: return;// 第 0.1 情况, 删除的节点为红. overif color == RED: return;// 第 0.2 情况, 删除节点为黑, N 为红, 简单变换: N-&gt;黑, 重新平衡. overif color == BLACK &amp;&amp; N.color == RED: N.color = BLACK;// 第 1 种情况, N,P,S,SR,SL 都黑. 策略: S-&gt;红. 通过 N,S 的黑色节点数量相同了, 但会比其他路径多一个, 解决的方法是在 P 上从情况 0 开始继续调整.if N,P,S,SR,SL.color == BLACK: S.color = RED; // 调整节点关系 N = P N.parent = P.parent S = P.paernt.another_child SL = S.left_child SR = S.right_child continue;// 第 2 情况, S 红, 根据红黑树性质 P,SR,SL 一定黑. 旋转, 交换 P,S 颜色. 此时关注的范围缩小, 下面的情况对应下面的框图, 算法从框图重新开始.if S.color == RED: rotate(P); swap(P.color,S.color); // 调整节点关系 S = P.another_child SL = S.left_child SR = S.right_child// 第 2.1 情况, S,SL,SR 都黑. 策略: P-&gt;黑. S-&gt;红, 因为通过 N 的路径多了一个黑节点, 通过 S 的黑节点个数不变, 所以维持了性质 5. over. 将看到, sgi stl map 源代码中将第 2.1 和第 1 情况合并成一种情况, 下节展开.if S,SL,SR.color == BLACK: P.color = BLACK; S.color = RED; return// 第 2.2.1 情况, S,SR 黑, SL 红. 策略: 旋转, 变换 SL,S 颜色. 从而又进入下一种情况:if S,SR.color == BLACK &amp;&amp; SL.color == RED: rotate(P); swap(S.color,SL.color); // 调整节点关系 S = SL SL = S.left_child SR = S.right_child// 第 2.2.2 情况, S 黑, SR 红. 策略: 旋转, 交换 S,P 颜色.if S.color == BLACK &amp;&amp; SR.color == RED: rotate(P); swap(P.color,S.color); return; 总结所以, 插入的情况只有三种, 删除的情况只有两种. 上面的分析, 做镜像处理, 就能得到插入删除的全部算法, 脑补吧. 从上面的分析来看, 红黑树具有以下特性: 插入删除操作都是 0(lnN), 且最多旋转三次. 下节中会重点展开 sgi stl map 的源代码. 参考文档: wikipedia 捣乱 2013-9-25 http://daoluan.net","categories":[],"tags":[]},{"title":"","slug":"hadoop/zookeeper/分布式","date":"2018-10-16T17:31:58.000Z","updated":"2018-10-16T17:32:24.000Z","comments":true,"path":"2018/10/17/hadoop/zookeeper/分布式/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/hadoop/zookeeper/分布式/","excerpt":"","text":"《大型网站技术架构 核心原理与案例分析》读书笔记一、大型网站架构演化1、大型网站特点 高并发，大流量 高可用 海量数据 用户分布广泛，网络情况复杂 安全环境恶劣 需求快速变更，发布频繁 渐进式发展 2、大型网站架构发展历程 文件服务器，数据库服务器，应用服务器分离 应用服务器增加本地缓存，本地缓存优先，增加分布式缓存服务器 使用应用程序服务器集群提高网站的并发，由负载均衡服务器统一调度分发 使用分布式文件系统和分布式数据库系统 使用CDN网络加速和反向代理服务器：基本原理都是缓存，CDN部署在网络提供商的机房，是用户在请求网络服务时，可以从距离自己最近的网络提供商机房获取数据。而反向代理是部署在中心机房，当用户的请求到达中心机房后，首先访问的是反向代理服务器，如果反向代理服务器中缓存这用户请求的资源，就将其直接返回给用户，目的都是尽早返回数据给用户，加快用户访问速度，减轻后端服务器的压力。 使用Nosql和搜索服务器 业务拆分，根据不同的产品，不同的业务，将一个网站拆分成不同的应用，每个应用独立部署维护，各个应用之间通过消息中间件或者访问同一个数据存储系统来构成一个相互关联的完整系统 分布式服务，将公用的业务提取出来，独立部署，为其他应用服务器提供可复用的共用业务服务（可以通过dubbo和zookeeper集群实现） img 3、网站架构的价值观和设计误区 架构的选取随网站所需灵活应对 主要驱动力量是网站的业务发展 不可一味追随大公司的架构设计，照搬照抄 网站技术是为了业务存在的，不可为了技术而技术 不要企图使用技术解决一切问题。技术是用来解决业务问题的，同样业务问题也可以采用业务手段，通过修改业务架构来解决 二、大型网站架构模式1、分层将系统在横向纬度上分成几个部分，每个部分负责单一职责，通过上层对下层的依赖和调用组成一个完整的系统。网络的7层通讯协议，计算机硬件、操作系统、应用软件，都采用了分层的思想。将网站系统分为应用层、服务层、数据层，三层结构分别部署在不同的服务器上 应用层：负责具体业务和视图展示 服务层：为应用层提供服务支持，如用户管理服务、购物车服务 数据层：提供数据存储访问服务，如数据库、缓存、文件、搜索引擎等 2、分割在纵向方面对系统进行划分，比如应用层，可以将不同业务分割，将购物、论坛、搜索、广告分割成不同的应用，由独立的团队负责。部署在不同的服务器上。 3、分布式分层和分割的目的就是为了切分后的模块便于分布式部署，将不同的模块部署在不同的服务器上。同时，分布式也带来了很多问题， 不同服务器之间的通信对网络依赖很大 保持数据一致性比较困难 网站依赖错综复杂，开发维护困难 ​ 常见的分布式方案有以下几种 分布式应用和服务。 分布式静态资源 分布式数据和存储 分布式计算 分布式文件系统 分布式锁 分布式配置。支持网站线上服务配置实时更新 4、集群虽然分布式已经将各个应用分开部署，但是对于用户集中访问的模块，还需要独立部署服务器集群化，即多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务。并且支持线性扩展，发生故障时的失效转移。即使是访问量很小的分布式应用和服务也至少要部署两台构成小的集群，提高系统的可用性 5、缓存缓存是改善软件性能的第一手段。大型网站很多方面都使用了缓存设计： CDN，即内容分发网络。在这里缓存网站的一下静态资源（较少变化的数据），可以就近以最快速度返回给用户。如视频网站和门户网站会将用户访问量大的热点内容缓存在CDN 反向代理。当用户的请求到达数据中心时，最先访问到的是反向代理服务器，这里缓存网站的静态资源，无需继续将请求转发给应用服务器，直接返回给用户 本地缓存。在应用服务器本地缓存这热点数据，应用程序可以在本地内存中直接访问，无需访问数据层 分布式缓存。将数据存储在专门的分布式缓存集群中，应用服务器通过网络通讯访问缓存数据。 ​ 缓存同时也存在着缓存击穿、缓存雪崩、缓存热点不集中的问题 6、异步在单一服务器内部可通过多线程共享内存队列的方式实现异步，在分布式系统中，多个服务器集群通过分布式消息队列实现异步。异步架构是典型的生产者-消费者模式。使用异步消息队列能够带来如下好处： 提高系统可用性 提高系统响应速度 消除并发访问高峰。消息队列能够把突然增加的访问请求数据放入到队列中，等待消费者处理，不会对网站造成太大压力 7、冗余为了提高系统的可用性，防止某些服务器宕机的情况下系统依然可以继续服务，需要一定的服务器冗余运行、数据冗余备份。数据库除了定期备份实现冷备份之外，还需要主从分离，实时同步实现热备份。为了抵御海啸、地震等不可抗力，还需要在全球范围内部署灾备数据中心。 8、自动化发布过程自动化：自动化代码管理，自动化测试，自动化安全测试，自动化部署。系统运行过程中还有：自动化监控、自动化报警、自动化失效转移、自动化失效恢复、自动化降级、自动化资源分配。 9、架构模式在新浪微博的应用新浪微博系统分为三层： 最下层是基础服务层，提供数据库、缓存、搜索、存储等基础服务 中间层是平台服务和应用服务层，微博的核心是微博、用户、关系，这些服务被分割成独立的模块，通过依赖调用和对共享基础服务构成微博的业务基础 API层，是微博的业务层，包括网站、app、第三方应用，通过调用API集成到微博系统中，共同组成一个生态系统 微博的发布，早起使用同步推模式，用户发表微博后会立即将这条微博插入到数据库所有粉丝的订阅列表中，用户量比较大时，会引起大量的数据库写操作，超出负载，导致系统性能下降。后来改用异步推拉方式，用户发表微博之后立刻写到消息队列中然后立刻返回，消息队列消费者将微博推送给当前在线粉丝的订阅列表中，非在线用户等登录后在根据关注列表拉取微博订阅列表 由于微博频繁刷新，微博使用多级缓存策略，热门微博和明星微博缓存在所有的微博服务器上，在线用户的微博和近期微博缓存在分布式缓存集群中 三、大型网站核心结构要素1、性能。系统吞吐量几个重要参数：QPS（TPS）、并发数、响应时间​ QPS（TPS）：每秒钟request/事务 数量 ​ 并发数： 系统同时处理的request/事务数 ​ 响应时间： 一般取平均响应时间 ​ QPS（TPS）= 并发数/平均响应时间 2、高可用指的是网站可以保证大部分时间系统都是可用的，一些知名大型网站可以得到99.99%的时间都是可用的。高可用的设计目标是当有部分服务器宕机时，整体的服务或者应用依然可用。 保证网站高可用的主要手段就是冗余，应用部署在多台服务器上同时提供访问，数据存储在多个服务器上互相备份，任何一台服务器宕机都不会影响应用的整体可用。 网站的高可用还需要软件开发过程的质量保证，通过预发布验证、自动化测试、自动化发布、灰度发布等手段，减少将故障引入线上环境的可能。 3、伸缩性衡量的主要指标就是是否可以用多台服务构架集群，是否容易向集群中添加新的服务器，加入的新的服务器是否可以提供和原来服务器无差别的服务，集群可容纳的总服务器数量是否有限制。 应用服务器，通过使用合适的负载均衡设备，就可以向集群中不断加入服务器 缓存服务器集群，加入新的服务器可能会导致缓存路由失效，如果对缓存的依赖严重，可能会导致系统崩溃。 关系数据库。虽然支持主从复制，主从热备，但是很难做到大规模集群的可伸缩性。因此关系型数据库的可伸缩性方案必须在数据库之外实现，通过路由分区等手段，将多个部署的数据库服务器集成一个集群。 NoSql数据库。由于其先天就是为了海量数据而生的，因此对可伸缩性的支持非常好。 4、扩展性衡量的主要标准就是网站增加新的业务产品时，是否会对现有产品产生影响，不需要改动或很少改动既有业务就可以上线新产品，不同产品之间很少的耦合，一个产品改动对其他产品没有影响。 网站的可扩展架构的主要手段是事件驱动架构和分布式服务 事件驱动，通常利用消息队列实现，把消息的生产者和消费者分开，这样可以透明的增加新的生产者和消费者 分布式服务则是将业务和可复用服务拆分开，通过分布式服务调用可复用服务。可复用服务升级变更的时候，也可以通过提供多版本服务实现透明升级，不需要强制应用同步变更。 5、安全性网站的安全架构需要保证网站不受恶意访问和攻击、保护网站的重要数据不被窃取。 四、网站的高性能架构1、网站性能测试性能测试指标。主要指标有响应时间、并发数、吞吐量、性能计数器 ​ 2、Web前端性能优化浏览器访问优化 减少http请求。合并css、JavaScript、图片，将浏览器一次访问需要的资源合并成一个文件 使用浏览器缓存。通过设置http头部中的Cache-Control和Expires属性，设置浏览器缓存。将css、javascript、图片等静态资源通过浏览器缓存起来，如果需要静态资源及时应用到客户端浏览器，可通过改变文件名实现。 启用压缩。在服务端对文件进行压缩，在浏览器端对文件进行解压缩，有效减少通讯传输的数据量，会对服务器和浏览器产生一定的压力，通信宽带良好，服务器资源不足的情况下，不适合采用 减少cookie传输，cookie包含在每次请求和响应中，太大的cookie会影响数据传输。深入了解，cookie和session的区别 CDN加速 CDN，内容分发网络，本质上也是缓存，而且将缓存在里用户最近的地方。部署在网络运行商的机房，CDN缓存的是一些静态资源 img 反向代理 反向代理服务器位于网站机房一侧，代理网站web服务器接受http请求。具有保护网站安全的作用 代理服务器可以通过配置缓存功能加速web请求，当用户第一次请求静态内容的时候，就被缓存在反向代理服务器上 也可以实现负载均衡的功能 3、应用服务器性能优化分布式缓存 合理使用缓存，频繁修改的数据不适合缓存，读写比在2:1之上，缓存才有意义 没有热点访问的数据，不适合做缓存 数据不一致，数据库修改了数据并不会立即修改缓存，存在时间差 分布式缓存服务器，提高缓存的可用性 缓存预热，启动时就把热点数据放入缓存中。热点数据是利用LRU（最近最久未用算法）对不断访问的数据筛选淘汰出来的 缓存穿透，大量请求不存在的数据，绕过缓存直达数据库。一个简单的策略：将不存在的数据也缓存起来 分布式缓存架构：一种是需要同步更新的分布式缓存，规模较大时，缓存更新数据需要同步到所有缓存服务器，代价惊人。另一种是以memcache为代表的互不通信的分布式缓存架构，应用程序通过一致性hash等路由算法选择缓存服务器远程访问缓存数据，缓存服务器之间不通信，集群规模可以很容易的扩容，具有良好的可伸缩性。 异步操作，可以晚点做的事情都应该晚点做 使用集群 代码优化 多线程充分利用多CPU和解决IO阻塞问题，利用多线程IO阻塞与执行充分利用CPU资源。同时需要解决线程安全问题，将对象设计成无状态对象，使用局部变量，在修改共同资源时加锁 资源复用。尽量复用开销很大的资源，比如数据库连接、线程、复杂对象 优化数据结构，比如hash表，要尽量减少hash冲突，hashcode越散列，冲突越少，读写性能也就越好，目前比较好的字符串Hash散列算法有Time33算法和指纹加密算法md5结合使用。先对字符串指纹加密，对加密后的字符串进行Time33。 垃圾回收，JVM调优，尽量减少Full GC ，甚至从不进行Full GC 4、存储性能优化SSD固态硬盘vs机械硬盘 机械硬盘，每次访问数据，都需要移动磁头臂，顺序访问和随机访问性能差别很大 SSD固态硬盘，没有机械装置，数据存储在可持久记忆的硅晶体上，可以像内存一样随机访问 B+树vs LSM树 为了改善数据访问特性，文件系统和数据库系统会对数据排序后存储，加快数据检索速度，需要保证新的数据插入、更新、删除后依然有序。 传统关系型数据库通常采用B+树 目前许多NoSQL产品采用LSM树最为主要数据结构，可以看做是一个n阶合并树 五、网站的高可用架构1、高可用的应用层服务 负载均衡服务器通过心跳检测机制发现故障服务器失去响应，就会把它从服务器列表中剔除，而将请求发送到其他服务器上。 服务器集群的session管理，分布式缓存服务器，负载均衡服务器通过hash算法总是将来源于同一ip的请求分发到同一台服务器上 2、高可用的基础公共服务使用类似负载均衡的失效转移策略实现高可用的基础服务，此外，还有几点基于实践的高可用基础服务的策略： 分级管理。把基础服务分为核心服务和非核心服务，低级别的服务需要部署在不同的虚拟机上进行隔离，高优先级的服务需要部署在不同的物理机上进行隔离、而核心服务和数据甚至要部署在不同地域的数据中心进行隔离 超时设置。 异步调用。应用对服务的调用通过消息队列等异步方式完成 服务降级。在网站访问的高峰期，系统压力增大，性能下降，严重会导致系统宕机。为了核心应用正常运转，需要对服务进行降级。有两种方式：1 是拒绝低优先级应用的调用或者随机拒绝部分请求调用。2 是关闭不重要的服务，比如双十一最繁忙时段关闭“评价、确认收货”等功能 幂等性设计。重复调用和调用一次产生的效果相同，即服务具有幂等性 3、高可用的数据服务保证数据高可用的主要手段是数据备份和失效转移机制。 通过强化CAP理论中的A（可用性）、P（分区容错性，跨网络分区的伸缩性），而在某种程度上放弃C（一致性）。根据BASE理论，保证最终一致性，和用户一致性。 数据备份分为冷备、异步热备、同步热备。异步热备下，存储服务器分为主和从，写入操作在主服务操作成功之后立即返回成功，然后通过异步线程同步到从服务。同步热备，等待所有存储服务写入成功之后，再通知应用程序写操作成功。 失效转移由三部分组成。失效确认、访问转移、数据恢复。失效确认通过心跳检测或应用程序失败报告完成 4、高可用的软件质量保障 网站发布，发布过程中每次关闭的都是集群中的一小部分，并保证发布完成后立即可以访问。具体过程：先关闭负载均衡服务器上的一下部分服务器路由，关闭这些服务器，部署新的代码，启动这些服务，打开负载均衡的路由，重复操作直到集群中所有的机器发布完成。 自动化测试，自动化测试工具ThoughtWorks开发的Selenium，运行在浏览器中，模拟用户操作进行测试。 预发布验证，预发布机器是位于负载均衡路由之外的机器。一旦启动时发现错误，立刻失败抛出异常，停止启动让工程师介入排查错误，而不是启动后执行错误的操作。需要快速失败机制 代码版本控制。 自动化发布。火车发布模型来实现自动化发布 灰度发布。每天只上线一小部分服务器，一旦发现有问题，回滚一小部分服务即可，不需要回滚所有服务 5、网站运行监控监控数据采集 用户行为日志采集，分为服务端日志采集和客户端浏览器日志采集 服务器性能监控，开源性能监控工具Ganglia，支持大规模服务器集群，支持以图形的方式在浏览器展示实时的性能曲线 运行数据报告 监控管理 系统报警 失效转移 自动优雅降级 六、网站的伸缩性架构1、网站的伸缩性设计通过以下两种方式实现 根据功能从横向和纵向进行物理分离实现伸缩 分离之后的单一功能通过集群实现伸缩，集群内多台服务器部署相同应用，提供相同的功能 2、应用服务器的伸缩性设计 负载均衡服务器实现http请求的分发 http重定向负载均衡，这种方式比较简单，但是一次用户请求需要请求两次服务器，重定向服务器自身的处理能力可能成为瓶颈，实践中这种方案不常用 DNS域名解析负载均衡，控制权在域名服务商那里，无法提供更强大的管理。DNS是多级解析，修改之后较长时间才能生效。实践中，利用域名解析作为第一级负载均衡手段，即域名解析得到的是一组负载均衡服务器的ip地址 反向代理负载均衡，反向代理服务器转发请求在http协议层面，叫做应用层负载均衡，方向代理服务器的性能有可能会成为瓶颈 数据链路层负载均衡，指在通讯协议的数据链路层修改修改mac地址进行负载均衡。分发过程中不修改ip地址，只修改目的mac地址，通过配置真实物理机集群所有机器虚拟ip和负载均衡服务器ip相同，真实处理用户请求的服务器可直接将数据返回给用户浏览器，避免负载均衡服务器网卡带宽成为瓶颈。目前linux平台最好的数据链路层负载均衡产品是LVS（Linux Virtual Server） 负载均衡算法。轮询（Round Robin）、加权轮询、随机（Random）、最少连接（Least Connections）、原地址散列（Source Hashing） 3、分布式缓存的伸缩性设计Memcached分布式缓存集群，一致性hash算法来保证新缓存服务器加入集群后不会影响集群的稳定性 4、数据存储服务器的负载均衡 关系型数据库的伸缩性设计。通过数据复制主从分离，根据不同的业务分割数据分库，如果及时这样单张表还是很大，就需要进行单表分片。目前支持数据分片的关系型数据库产品主要有Amoeba和Cobar Cobar服务器集群的伸缩：是无状态的服务器，可以通过简单的负载均衡的手段实现 Mysql服务器集群的伸缩：集群中添加新服务器，需要利用一致性hash算法，进行尽量少的数据移动来保证扩容后数据一致，Mysql数据同步以Schema为单位，使用Mysql的同步机制。不支持join操作 Nosql数据库的伸缩性设计。应用最广泛的Apache的Hbase 七、网站的可扩展架构1、用分布式消息队列降低系统耦合性 2、利用分布式服务打造可复用的业务平台。分布式服务架构需要支持如下特点： 负载均衡。对于热门服务，需要部署在一个集群上，负载均衡 失效转移 高效的远程通信 整合异构系统，整合不同的语言，不同的平台 版本管理，需要支持服务多版本发布，服务发布者先升级接口发布新版本的服务，同时提供旧版本服务供请求者调用 实时监控 3、分布式服务架构框架设计。常用的Dubbo，他的远程通信模块支持多种通讯协议和数据序列化协议，使用NIO通讯框架，具有较高的网络通讯性能。 img 4、可扩展的数据结构 传统的关系型数据库设计之初，需要指定表的字段、数据类型等，比较僵硬，不利于以后的扩展。虽然可以通过预设冗余字段来解决，但是也是一种较糟糕的设计。 许多Nosql数据库使用的ColoumFamily（列族）设计就是一个解决方案，无需指定字段，可以在数据写入时再指定，通过这种方式，数据表可以包括数百万的字段 5、利用开放平台建设网站生态圈 八、网站的安全架构1、攻击与防御 xss攻击，跨站点脚本攻击，通过篡改网页，注入恶意的html脚本，在用户浏览网页时，控制用户浏览器进行恶意操作的一种攻击行为。XSS攻击者一般都是通过在请求中嵌入恶意脚本达到攻击的目的，需要对请求进行过滤和消毒处理。 sql注入攻击，通过在http请求中嵌入恶意sql命令，通过正则匹配对请求参数进行消毒处理 2、信息加密技术 单向散列加密，md5、sha等。通过对明文和salt利用单向散列加密算法得出密文，数据库中存储加密之后的密文。输入的微小变化都会导致输出的完全不同 对称加密。加密和解密使用同一个秘钥，使用场合有通信加密、cookie加密。常用算法有DES算法、RC算法 非对称加密。加密和解密使用的不是用一个秘钥，一个是公钥，一个是私钥。使用场合有信息安全传输、数字签名等场合。常用算法有RSA算法，https传输中浏览器使用的数字证书实质上就是非对称加密公钥。 九、十、十一皆为案例分析，此处略十二、秒杀系统架构设计1、应对策略 秒杀系统独立部署 秒杀商品页面静态化 租借秒杀活动网络宽带 2、秒杀系统架构设计控制秒杀按钮的点亮 img img img img 十三、大型网站典型故障案例分析，内容略十四、架构师领导艺术1、关注人而不是产品一定要坚信：一群优秀的人做一件他们热爱的事，一定能取得成功。 领导的真谛：寻找一个值得共同奋斗的目标，营造一个让大家都能最大限度发挥自我价值的工作氛围。 没有懒惰的员工，只有没被激发出来的激情。所有强迫员工加班的管理者都应该为自己的无能感到羞愧。 2、发掘人的优秀是事情成就了人，而不是人成就了事。 发掘人的优秀比发掘优秀的人更有意义。 3、共享美好蓝图架构师要和项目组全体成员共同描绘一个蓝图，这个蓝图是真个团队能够认同的，是团队共同奋斗的目标。这个蓝图应该是表述清楚的、形象的、简单的。 4、共同参与架构不要只有架构师一人拥有架构，让其他人参与架构的设计和维护 5、学会妥协不要企图在项目中证明自己是正确的，一定要记住，你是来做软件的，不是来做老大的。架构师越早被项目组遗忘，越表示架构非常成功；项目组越离不开架构师，越表示架构还有很多缺陷。 6、成就他人想要成就自己，先要成就他人 十五、网站架构师职场攻略1、发现问题，寻找突破 所谓问题，就是体验不能满足期望，就会觉得出了问题。消除问题有两个方法：降低期望、改善体验 2、提出问题，寻求支持 把“我的问题”变成“我们的问题” 给上司提封闭式问题，给下属提开放式问题 指出问题，而不是批评人 用赞同的方式提出问题 3、解决问题，达成绩效 作者：leon66666 出处：http://www.cnblogs.com/wangzhongqiu/ 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利.","categories":[],"tags":[]},{"title":"","slug":"hadoop/zookeeper/cnblog","date":"2018-10-16T17:28:06.000Z","updated":"2018-10-16T17:29:35.000Z","comments":true,"path":"2018/10/17/hadoop/zookeeper/cnblog/","link":"","permalink":"http://io.stelawliet.top/2018/10/17/hadoop/zookeeper/cnblog/","excerpt":"","text":"《从Paxos到ZooKeeper 分布式一致性原理与实践》读书笔记一、分布式架构1、分布式特点 分布性 对等性。分布式系统中的所有计算机节点都是对等的 并发性。多个节点并发的操作一些共享的资源 缺乏全局时钟。节点之间通过消息传递进行通信和协调，因为缺乏全局时钟，很难定义两个事件谁先谁后 故障总是会发生。系统设计时，需要考虑到任何异常情况 2、分布式环境的各种问题 通信异常。分布式系统中的某些节点之间无法正常通信 网络分区。这有部分节点可以正常通信，有些无法正常通信。这种现象称为网络分区，也称为“脑裂” 三态。节点之间的一次通信存在三种状态：成功、失败、超时 节点故障。节点机器宕机、失去回应 3、传统事务的ACID理论。 原子性（Atomicity）。事务内的所有操作要么全部成功，要么全部失败 一致性（Consistency）。事务的执行不能破坏数据库的一致性。如果事务执行一半停了，一部分的修改写入的数据库。这时候，数据库就处于一种不正确的状态，或者说不一致的状态 隔离性（Isolation）。多个事务并发执行，彼此不会受影响。事务的隔离级别：读未提交（可能发生脏读、重复读、幻象读）、读已提交（肯能发生重复读、幻象读）、可重复读（可能发生幻象读）、串行化。隔离级别越高，对并发的性能影响越大，越能保证数据库的一致性。 持久性（Durablility）。一旦事务成功提交，它对于数据的修改就被永久保存下来 4、分布式事务的CAP理论和BASE理论 CAP理论。一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance），在分布式系统中，最多只能满足其中的两项。 BASE理论。基本可用（Basically Available）、软状态（Soft state）、最终一致性（Eventually consistent）。基本可用指系统出现故障时，允许损失部分可用性，包括响应时间的损失和功能上的系统降级；软状态指允许节点间的通讯出现中间状态；最终一致指系统的所有的数据副本，在一定时间的同步后，最终能够达到一致的状态 二、一致性协议1、2PC。二阶段提交协议阶段一，执行事务 事务询问。协调者向所有参与者发送事务内容，等待参与者回应 执行事务。参与者执行事务，记录Undo和Redo日志 反馈事务询问响应，参与者返回给协调者Yes或No响应。全部返回Yes，进入提交事务阶段；存在No返回或者超时，进入中断事务阶段 阶段二，提交事务 发送事务提交请求 各个参与者提交事务 参与者反馈事务提交结果 如果参与者全部返回Yes，完成事务；存在返回No，进入中断事务阶段 中断事务阶段 发送回滚请求 事务回滚 反馈事务回滚结果 完成中断事务 2PC的缺点 同步阻塞。各个参与者在等待其他参与者响应的同时，无法进行任何操作，处于阻塞状态 单点问题。过度依赖协调者，一旦协调者出现问题，系统将无法正常运转 数据不一致。同上一条，一旦协调者出现问题，就可能出现各个参与者数据不一致的问题 太过保守。一旦参与者出现故障，协调者只能通过自己的超时机制发现。 2、3PC。三阶段提交协议 阶段一，CanCommit，事务询问 事务询问，询问各个参与者能否完成事务 各个参与者返回响应，全部返回Yes，进入PreCommit阶段 阶段二，PreCommit，事务预提交 发送预提交请求 事务预提交。参与者执行事务操作，记录Undo和Redo日志 参与者返回响应。全部返回Yes，继续三阶段；返回No，进入中断事务阶段 阶段三，DoCommit，真正的事务提交 发送提交请求 参与者正式执行事务提交操作 返回协调者事务执行结果 协调者完成事务。如果存在返回No或者返回超时，进入中断事务阶段 中断事务阶段 发送回滚请求 事务回滚 反馈事务回滚结果 完成中断事务 3PC优缺点 相较于2PC，3PC最大优点就是降低了参与者的阻塞范围 缺点是，还是避免不了出现数据不一致的情况 3、Paxos算法拜占庭将军问题，拜占庭帝国的不同军队处于不同的地理问题，他们之间只能通过通讯员进行通讯，但是通讯员是不可靠的，可能篡改消息 由于加密算法和校验算法的出现，所有实际的分布式系统之间的通讯，不存在数据被篡改的可能。 四、ZooKeeper和ZAB协议介绍1、初识ZeeKeeperZooKeeper可以做什么 可以基于它实现负载均衡、集群管理、Master选举、分布式队列、分布式锁、命名服务、数据发布/订阅等功能 Zookeeper能保证的分布式一致性特性 顺序一致性。同一个客户端发起的请求，会严格按照发起顺序执行 原子性。对于一个事务请求，集群中的所有机器的执行情况是一致的 可靠性。一旦服务端成功的应用了一个事务，并完成了对客户端的响应。服务端的状态会一直保存下来 实时性。保证在一段时间内的实时性 单一视图。无论客户端连接的是哪一个服务器，看到的服务端的数据模型都是一致的 Zookeeper的设计目标 简单的数据模型。Zookeeper将去数据存储在内存中，采用树形结构存储，树由ZNode节点构成 可以构建集群。只有集群中超过一半机器能够正常运作，整个集群就可以正常对外提供服务。 顺序访问。每个来自客户端的请求，都会分配一个全局唯一的递增编号 高性能。全量数据存储在内存中，3台3.4.3的Zookeeper集群，100%读请求场景的压测结果是12-13W的QPS Zookeeper的基本概念 集群角色。存在Leader、Follower、Observer三种角色。Leader服务器提供读和写服务，Follower和Observer提供读服务，但是Observer不参与选举过程，也不参与写操作的“过半写”策略，因此，Observer可以在不影响写性能的情况下提高读性能 客户端会话。客户端通过TCP长连接和服务端相连，第一次建立连接就代表客户单会话开始了。客户端能够通过心跳检测与服务器保持有效的会话。Session的SessionTimeout值用来设置会话的超时时间，连接断开后，只要在超时时间之内重新连接上了集群中的任何一台服务器，那么之前创建的会话仍然有效 节点。一方面只集群中的每一台机器，称为机器节点；另一方面指数据模型中的数据单元，称为数据节点Znode。Znode又分为持久节点和临时节点，临时节点的生命周期和会话绑定，一旦客户端会话失效，那么这个客户端创建的所有临时节点都会被移除。 版本。每个Znode，会维护一个叫做Stat的数据结构，记录了Znode的三个版本：version（当期版本）、cversion（当前Znode子节点的版本）、aversion（当前Znode的ACL版本）。 Watcher。事件监听器，允许用户在一些节点上注册一些watcher。特性事件触发的时候，服务器会将事件通知到感兴趣的客户端上去。 ACL。权限控制策略（Access Control Lists）。定义了五种权限：Create（创建子节点）、Delete（删除子节点）、read（读取节点数据和子节点列表）、write（更新节点数据）、admin（设置节点ACL的权限） 2、ZAB协议（Zookeeper Atomic Broadcast，原子消息广播协议）所有事务请求都由Leader服务器来处理分发，如果集群中的其他服务器收到了来自客户端的请求，这些非Leader服务器会首先将这个事务请求转发给Leader服务器，Leader负责将请求封装成Proposal（提议）分发给集群中所有Follower，一旦收到超过半数的正确反馈，Leader就会再次向所有的Follower分发Commit消息，要求他们将前一个Prosocal提交 两种基本模式：崩溃恢复模式和消息广播模式 消息广播模式。类似于二阶段提交，去掉了中断逻辑，当Leader服务器收到了超过半数的Follower的ACK响应后，就会广播一个Commit消息给所有的Follower进行事务提交。 崩溃恢复。一旦Leader服务器出现崩溃，或者由于网络原因失去了一半Follower服务器的联系，就会进入崩溃恢复模式。 崩溃恢复需要确保已经被Leader提交的Proposal也能被所有Follower提交 确保丢弃只在Leader服务器上提出的事务。（此处的提出指的是二阶段第一阶段）。重新选举出来的Leader拥有集群中所有服务器最高编号的事务Proposal 正常情况的数据同步：Leader服务器为每一个Follower服务器准备一个队列，将那些没有被Follower服务器同步的事务以Proposal消息的形式逐个发送给Follower，等待所有事务都同步到了Follower并成功应用到了Follower的本地数据库中后，Leader服务器就将该Follower服务器加入到真正的可用列表中 事务编号ZXID，是一个64位的数字。前32位存储Leader届数，后32位记录本届Leader处理的消息数。 3、深入ZAB协议运行分析，每一个进程都有可能处于以下三种状态之一 LOOKING：leader选举阶段 FOLLOWING：Follower服务器和Leader服务器保持同步状态 LEADING：Leader服务器作为主进程领导状态 五、使用Zookeeper1、服务端部署与运行 初次使用，需要把/conf目录下的zoo_sample.cfg文件重命名为zoo.cfg。配置如下： img server.1=IP1:2888:3888，每一行这样的配置代表一个集群中的一个机器，server.1中的1代表ServerID，同时在每台机器上需要在数据目录（dataDir指定的目录）下创建一个myid文件，文件内容就是ServerID，id范围是1~255 集群中每个机器的zoo.cfg文件都应该是相同的，最好使用git或者svn把配置管理起来 启动服务。/bin/zhServer.sh start 停止服务。/bin/zkServer.sh stop 2、客户端脚本 启动。/bin/zkCli.sh -server ip:port（不加server参数，默认连接本机） 创建节点。create 【-s】【-e】path data acl。acl用来进行权限控制 读取节点下子节点。ls path。例如：ls / 查看根节点下的所有子节点 读取节点数据。get path 更新节点数据。set path data 【version】 删除节点。delete path 【version】。无法删除一个包含子节点的节点 3、开源客户端Curator的使用直接看我的github代码：https://github.com/leon66666/zookeeper-client 六、Zookeeper的典型应用场景1、典型应用场景及实现（1）数据发布和订阅 分为推（push）模式和拉（pull）模式，push模式服务端主动把数据更新推送给所有订阅的客户端，而拉模式是由客户端定时轮询拉取的方式来获取最新数据 应用场景：分布式系统统一配置，例如机器列表信息、运行时的开关配置、数据库配置信息等，这些全局配置交给Zookeeper统一管理 这些配置具有以下特点： 数据量通常比较小 数据内容在运行时动态变化 集群中各机器共享，配置一致 （2）负载均衡 DDNS，动态DNS解析。局域网内部一般采用host绑定的方式来进行ip和域名的映射。一旦机器规模变大，这种做法就会相当的不方便。 通过Zookeeper实现，每个应用都可以创建一个属于自己的数据节点作为域名配置的根节点，在这个节点上，每个应用都可以将自己的域名配置上去。通过注册Watcher实现域名变更通知功能。 img 上图为整体的DDNS系统架构。 Register集群负责域名的动态注册。每个服务者启动的时候，都会把自己的域名信息注册到Register集群中去。 Dispatcher集群负责域名的解析。服务消费者在使用域名的时候，会向Dispatcher集群发出请求，获取相应的IP：PORT信息。 Scanner集群负责检测及维护服务状态（探测服务可用性、屏蔽异常服务节点）。（一种是心跳检测，需要客户端和服务端建立起tcp长连接。另一种是服务端主动进行状态汇报，一旦超过5秒没有收到汇报，就认为该IP地址不可用，进行域名清理） SDK，提供各个语言的系统接入 Monitor负责收集集群信息以及对DDNS自身的监控 Controller是一个后台管理，负责授权管理、流量控制、服务配置和手动屏蔽服务等功能。 （3）命名服务 即分布式环境下，生成全局唯一ID的方法。大家一般会联想到UUID，是通用唯一识别码的简称。主流ORM框架HIbernate就有对UUID的直接支持。 但是，UUID有如下缺点： 长度过长，需要更多的存储空间 含义不明，根据字符串开发人员从字面上根本看不出他的含义 利用Zookeeper来实现这类全局唯一ID的生成。当客户端创建一个顺序子节点的时候，zookeeper会自动以后缀的形式在其子节点上添加一个序号，利用了zookeeper顺序节点的特性 （4）分布式协调/通知 Zookeeper实现分布式协调通知，通常的做法是不同的客户端都对Zookeeper上同一个数据节点进行Watcher注册。监听节点数据的变化。 （5）通用的分布式系统机器间通信方法 分布西系统机器间通信包括：心跳检测、工作进度报告、系统调度 心跳检测。不同机器之间需要检测到彼此是否正常运行。传统方法通过机器之间能否互相ping通来判断；更复杂的通过机器之间建立起Tcp长连接，通过tcp固有的心跳检测机制来实现上层机器的心跳检测；基于Zookeeper的临时节点特性也可以实现心跳检测，不同的机器在指定节点下创建临时节点，不同机器可以通过判断临时节点是否存在来判断客户端机器是否存活。减少了系统耦合 工作进度报告。每个客户端创建临时子节点，各个任务机器会实时的将自己的执行进度存储到对应的子节点上，也可以判断子节点是否存在判断机器是否存活 系统调度。一个分布式系统由控制台和客户端组成。后台管理人员在控制台做一些操作（实际上就是修改Zookeeper上某些节点的数据），Zookeeper以事件通知的形式发送给对应的订阅客户端 （6）集群管理 集群管理需求点 知道集群中工作的机器数量 对集群中每台机器的运行状态进行收集 对集群中的机器进行上下线操作 传统的基于agent的管理方式，集群中每台机器部署一个agent，负责本机器的监控和向中心系统汇报 大规模升级困难 统一的agent无法满足多样的需求。无法深入应用内部，对一些业务状态进行监控 编程语言多样性。不同机器需要提供不同语言的agent 利用zookeeper监控集群 客户端可以对zookeeper节点进行监听，节点变更会受到通知 在zookeeper上创建临时节点，一旦会话失效，改临时节点会被自动删除 监控系统在/clusterServers节点上注册一个Watcher监听，添加机器会在监听节点下创建临时子节点。 zookeeper监控应用：分布式日志收集系统 注册收集器机器。以/logs/controller作为收集器的根节点，每个收集器启动的时候都会在收集器节点下创建自己的节点 任务分发。收集系统把日志源机器按照一定策略分配给注册的收集器机器，将机器列表写入到对应的收集器节点上 状态汇报。收集器节点下面创建状态子节点，每个注册的收集器机器定时向该节点写入自己的状态信息和日志收集进度信息（可以看做是一种心跳检测），根据更新时间来判断是否存活 动态分配。检测到收集器的减少或者增加之后，需要进行重新分配。通常有两种做法：全局分配（影响面大）；局部动态分配（低负载优先分配） 节点类型。收集器节点，需使用持久节点，需要保存该节点上的日志源机器列表 收集器节点监听。放弃监听设置，采用定期轮询，节省网卡流量，但是具有一些延时，考虑到日志收集需求，延时是可以接受的 （7）Master选举 在集群的所有机器中选举出一台机器作为master 可以通过数据库的主键唯一特性来实现。但是当选举出的master挂了之后，数据库无法通知我们这个事件 利用zookeeper的强一致性，客户端无法创建一个已经存在的节点。其他没有成功创建这个节点的客户端会在这个节点上注册一个子节点变更的watcher，一旦发现当前的master挂了，其余客户端会重新进行选举 （8）分布式锁 最常见的是用数据库实现。例如行锁，表锁，事务处理，乐观锁等等。但是往往分布式系统的性能瓶颈都集中在数据库的操作上。 排它锁。选择一个节点作为锁节点，客户端加锁的时候会在锁节点先创建临时子节点，利用zookeeper特性，只有一个客户端能够创建成功，其余客户端注册锁节点的子节点变更的Watcher监听，在持有锁的客户端主动删除临时节点或者由于宕机导致会话超时导致临时节点被移除，都表示锁被释放了。其他监听的客户端会再次发起分布式锁获取 共享锁。在锁节点下创建临时顺序节点。读节点为R+序号，写节点为W+序号。创建完节点后，获取所有子节点，对锁节点注册子节点变更的watcher监听，确定自己的序号在所有子节点中的位置。对于读请求，没有比自己序号小的写节点，就表示获得了共享锁，执行读取逻辑。对于写请求，如果自己不是序号最小的子节点，就需要进入等待。接收到watcher通知后，重复获取锁。 共享锁羊群效应。大量的watcher通知和子节点列表获取，两个操作重复运行。集群规模比较大的情况下，会对zookeeper服务器造成巨大的性能影响和网络冲击 改进后的共享锁。读请求，监听比自己小的写节点。写请求，监听比自己小的最后一个节点。 具体选用哪种实现的共享锁，视集群规模而定 （9）分布式队列 常规的先入先出队列。通过临时顺序节点实现。【2】通过getChildren()接口获取队列节点下的所有子节点，如果自己不是序号最小的子节点，进入等待，向比自己序号小的最后一个节点注册watcher监听。收集通知后，重复步骤【2】 Barrier模型。屏障节点的数据内容存储n代表Barrier值。所有的客户端都会在屏障节点下创建临时节点，创建完毕获取屏障节点内容，【2】获取所有子节点，注册对子节点列表变更的watcher监听，统计子节点个数，不足barrier值，进入等待，收到watcher通知，重复步骤【2】 2、zookeeper在大型分布式系统中的应用（1）hadoop。大型分布式计算框架 核心包括HDFS和MapReduce，分别提供了对海量数据的存储和计算能力。0.23.0版本开始，Hadoop又引入了全新一代MapReduce框架YARN。 YARN是为了提高计算节点Master的扩展性，引入的全新一代分布式调度框架。支持多个计算引擎，包括MapReduce、Spark、Storm等 YARN中最核心的ResourceManager，作为全局的资源管理器，负责整个系统的资源管理和分配。存在单点问题，使用Active/Standby模式，解决单点问题。只有一台处理Active状态，其他处于Standby状态，当Active节点挂掉之后，其余Standby节点会通过竞争选举产生新的Active节点 zookeeper实现Active/Standby模式。类似于master选举，启动的时候都会去创建一个临时子节点，只要一个能够创建成功，成功的机器作为Active，其他的作为Standby，并注册子节点的watcher监听。一旦Active挂点，会话断开链接，临时节点自动删除，触发watcher，再次进行master选举出新的Active。 HDFS的NameNode和ResourceManager模块都是使用该组件实现的HA 脑裂问题。选举出新的Active机器后，以前的Active恢复正常了，出现了脑裂现象。使用ACL权限控制来进行隔离，创建节点的同时增加修改这个节点的权限。当之前的Active机器恢复正常，尝试去修改节点数据的时候，发现已经没有了权限。 （2）HBase。是一个面向海量数据的高可靠性、高性能、面向列、可伸缩的分布式存储系统 与大多数分布式NoSQL数据库不同的是，HBase针对数据写入具有强一致性、甚至包括索引列也都实现了强一致性 HBase采用zookeeper服务来完成对整个系统的分布式协调工作 系统冗错。每个RegionServer服务器都会信息节点，Hmaster对这个节点注册监听，当RegionServer挂掉之后，会话断开，节点被删除，Hmaster接收到删除通知，会将挂掉的RegionServer所处理的数据分片（Region）重新路由到其他的节点上。随着系统容量的不断增加，Hmaster管理的负担会越来越重，所以使用zookeeper来完成这部分工作，减轻Hmaster负担。 RootRegion管理。数据存储的位置信息记录在元数据分片（RootRegion）上。客户端每次发起请求，需要知道数据的位置，就会去查询RootRegion。而RootRegion的位置存储在zookeeper上，当RootRegion发生变化或者发生故障时，就能够通过zookeeper感知到这一变化做出一系列响应的容灾措施。 Region状态管理。Region是HBase中数据的物理切片，每个Region中记录了全局数据的一小部分，不同的Region之间数据不相互不重复的。对于一个分布式系统来说，Region会经常变更，变更原因来自于系统故障、负载均衡、配置修改、Region分裂和合并等。一旦Region发生移动，需要做上线和下线处理。状态管理需要Zookeeper来实现。对于Hbase集群来说，Region的数量会达到10万级别。 分布式SplitLog任务管理。 （3）Kafka。开源的分布式消息系统，是一个吞吐量极高的分布式消息系统。主要用于实现低延迟的发送和收集大量的事件和日志数据。 每个broker服务器启动的时候，都会向Zookeeper注册。zookeeper作为注册中心 使用zookeeper作为他的分布式协调框架，实现了生产者和消费者的负载均衡 （4）dubbo img img 七、Zookeeper技术内幕1、系统模型 数据模型。由数据节点Znode组成树型结构。每一个事务操作（节点的创建和删除、数据节点内容变更、客户端会话的创建和失效）zookeeper会分配一个全局唯一的事务ID，ZXID，64位数字。前32位表示leader选举的届数，后32位表示事务序号 节点特性。持久节点，持久顺序节点，临时节点，临时顺序节点。节点除了存储数据，子节点之外，还存储了节点本身的一些状态信息，用Stat类来表示。 版本。版本信息也是存储在stat中的。version（当前节点数据内容的版本号）、cversion（当前节点子节点的版本号）、aversion（当前节点ACL变更版本号）。通过版本号来实现乐观锁，会从客户端请求中获取到版本号，和节点状态数据中存储的版本号对比，如果不匹配，就抛出异常。 Watcher，数据变更的通知。客户端注册watcher的时候，会将watcher对象存储在客户端的watchManager中，当服务端触发watcher事件后，会向客户端发送通知，客户端线程从watchManager中取出对应的watcher对象来执行回调逻辑。watcher机制具有如下特点：一次性（无论是客户端还是服务端，一旦一个watcher被触发，zookeeper就会从相应的存储中移除，所以需要反复注册）；客户端串行执行（客户端watcher的回调处理，是一个串行同步的过程，保证了顺序性，也需要注意watcher回调方法的处理，避免长时间执行而影响到其他的watcher回调）；轻量（只会告诉客户端发生了事件，不会说明事件的具体内容，另外，客户端注册的时候，也不会把客户端真实的watcher对象传递给服务器。如此轻量的设计，在网络开销和服务器内存开销上都是非常廉价的） ACL，权限控制。分为权限模式（Scheme）、授权对象（ID）、权限（Permission），使用scheme:id:permission来识别一个有效的acl信息 Scheme说明。IP模式：“IP:192.168.1.24”，“IP:192.168.1.1/24”；Digest模式：username:password，会进行两次编码处理，分别是SHA-1算法和BASE64编码 授权对象（ID）。IP模式下是一个ip或一个ip段；Digest模式下，是username:password；World模型下，是“anyone” 权限（Permission）。create（C）创建子节点；delete（D）删除子节点；read（R）读取节点数据和子节点列表；write（W）更新节点数据；admin（A）节点管理权限，acl操作 2、序列化和协议 jute介绍。是zookeeper的序列化组件，也是早期Hadoop中的默认序列化组件。后来由于Apache Avro具有出众的跨语言特性、丰富的数据结构和对MapReduce的天生支持，并且能非常方便的用于RPC调用，所以后来的Hadoop就抛弃了Jute。但是zookeeper由于新老版本兼容、性能瓶颈并不在jute上、其他需求优先级更高等原因，一直使用着jute这个古老的序列化组件 通讯协议。基于tcp/ip协议，zookeeper实现了自己的通讯协议来完成客户端与服务端、服务端与服务端之间的网络通信。请求包括请求头和请求体，响应包括响应头和响应体 3、客户端 （1）一次会话的创建过程 初始化zookeeper对象 设置会话默认watcher 构造zookeeper服务器地址列表管理器：HostProvider 创建并初始化客户端网络连接器：ClientCncx。内部有两个线程，SendThread（I/O线程，负责负责zookeeper客户端和服务端之间的网络I/O通信），ExentThread（事件线程，负责对服务器事件进行处理）。两个核心队列，outgoingQueue（客户端请求发送队列）、pendingQueue（服务端响应的等待队列），还会创建底层I/O处理器ClientCxcnSocket 初始化和启动SendThread，ExentThread 获取一个服务器地址，通过HostProvider获取 创建tcp长连接。ClientCxcnSocket负责创建一个tcp长连接 SendThread负责构造一个ConnectRequest请求，放入到outgoingQueue请求队列中 ClientCxcnSocket负责从outgoingQueue队列中取出一个待发送的对象，将其序列化成ByteBuffer后，发送给服务端 ClientCxcnSocket接受服务器的响应，处理response，进行反序列化， 生成连接成功事件，交给ExentThread进行处理，从ClientWatcherManager查询watcher，将其放入到EventThread的waitingEvents队列中。 处理事件watcher，EventThread不断的从waitingEvents队列中取出待处理的watcher，调用watcher的process方法，执行回调逻辑。 （2）服务器地址列表 客户端隔离命名空间 HostProvider，会把所有的地址列表打散成一个环形队列，不断的从这个队列中获取地址 自定义HostProvider，实现动态变更的地址列表管理器和同机房优先策略 4、会话（1）会话状态。整个会话的运行期间，会在不同的状态之间进行切换。这些状态包括connecting，connected，reconnecting，reconnected，close。 客户端由于网路原因断开连接，会重连服务器。这个过程中状态会在connecting和connected之间切换 会话超时、权限检查失败、客户端主动退出程序。这些情况下，客户端状态直接变为close （2）session是zookeeper的会话实体。包含以下属性 会话ID。全局唯一的sessionid。sessionid计算算法：((System.currentTimeMillis()&lt;&lt;24)&gt;&gt;&gt;8)|(id&lt;&lt;56)。当前系统时间左移24位再无符号右移8位，保证前8位都是0，用于来后边的服务器唯一表示id&lt;&lt;56做位或运算。前8位表示服务器机器id，后56位表示时间毫秒。sessionid由服务器进行创建，基于顺序执行的特定，所以所有客户端的请求的时间毫秒都是不一样的。这样就保证了sessionid的全局唯一性。 timeout。会话超时时间 ticktime。下次会话超时时间点。用于分桶策略管理 isclosing。标记一个会话是否已经关闭 （3）会话管理。由SessionTracker负责管理 分桶策略。按照ExpirationTime对会话进行分类，类似的会话放在同一区块中进行管理统一处理。ExpirationTime=（（currentTime+SessionTimeout）/ExpirationInterval+1）*ExpirationInterval。ExpirationInterval是leader服务器进行定期检查会话超时的时间间隔，默认值是tickTime的值。ExpirationTime总是ExpirationInterval的整数倍。 会话激活。当客户端向服务端发起请求的时候，会进行会话激活。重新计算会话的ExpirationTime。根据新旧两个下次超时时间点，进行会话迁移，完成会话激活。有两种情况会发生会话激活：1 是只要客户端发送了请求，就会触发一次会话激活；2 是如果客户端在sessionTimeout/3时间内未和服务器进行过任何通信，就会主动向服务器发送ping请求（心跳检测），触发服务端的会话激活 会话超时检查，按照ExpirationTime时间线，对会话桶进行检查，留下的所有会话都是尚未被激活的，对他们进行批量清理 会话清理。标记会话状态为关闭，向集群中所有机器发起会话关闭请求，收集需要删除的临时节点，删除临时节点，移除会话，关闭连接 （4）会话重连 连接断开。connection_loss。客户端会自动从服务器地址列表中重新逐个选取新的地址尝试进行连接，直到最终成功连接上服务器。断开连接和重连成功，客户端都会受到服务端的事件通知 会话失效。session_expired。断开连接之后，重连期间耗时过长，超过了会话超时时间，服务器认为这个会话已经结束，进行会话清理。客户端不知道已经失效，如果之后客户端重新连接上了服务器，会受到会话已经失效的通知（session_expired）。 会话转移。session_moved。断开重新后，成功连接上了新的服务器，会话转移到了新的服务器上。 5、集群版服务器启动流程（1）预启动 统一由QuorumPeerMain作为启动类 解析配置文件zoo.cfg 判断当前是集群模式还是单机模式启动（集群模式中，在zoo.cfg中配置了多个服务器地址） （2）初始化 （3）leader选举 （4）leader和follower启动期交互过程 创建leader服务器，创建follower服务器 follower服务器和leader建立连接，注册follower leader服务器和follower服务器同步数据 过半follower服务器完成数据同步。 启动leader服务器和follower服务器 6、leader选举（1）选举概述。服务器启动时期的Leader选举 每个server发出一个投票。初始化阶段都会投给自己。投票以（myid，ZXID）表示。 接收来自各个服务器的投票。判断投票的有效性、检查是否是本轮投票、是否来自looking状态的服务器 处理投票。把自己的投票和其他服务器的投票进行PK。PK规则：ZXID比较大的优先成为leader；ZXID相同，myid比较大的优先。把pk结果重新发给其他服务器 统计投票。每次投票后，都会统计是否有超过半数机器接收到相同的投票，大于等于n/2+1。 改变服务器状态。leader变为leading，follower变为following （2）选举概述。服务器运行期间的leader选举 变更状态，当leader挂了之后，余下的非observer服务器都会讲自己的状态变为looking，开始进入选举过程。 选举过程同上。 （3）leader选举的算法分析。3.4.0版本开始，只保留了tcp版本的FastLeaderElection。废弃了LeaderElection和udp版本的FastLeaderElection 7、服务端请求处理（1）会话创建请求 请求接收。I/O层接收请求，根据NIOServerCnxn是否初始化来判断是否是会话创建请求，反序列化请求，检查客户端Zxid（客户端Zxid需小于服务端Zxid），根据服务端的配置协商sessionTimeout 会话创建。为客户端生成sessionID，向sessionTracker中注册会话，会话激活，生成会话密码（作为会话在不同服务器中间转移的凭证） 预处理。采用责任链模式，创建请求事务头、请求事务体、注册与激活会话（为了处理非Leader服务器转发过来的会话创建请求） 事务处理。Sync流程：Leader服务器和follower服务器记录事务日志的过程 事务处理。Proposal流程：投票和统计投票过程。类似于二阶段提交协议的preCommit。生成提议Proposal，广播提议，收集投票 事务处理。Commit流程：超过半数提议通过，广播commit消息 事务应用。将事务变更应用到内存数据库中，对于会话创建需要特殊处理，会话的管理由sessionTracker负责，只需要再次向sessionTracker注册即可 会话响应。统计服务端处理所花费的时间，创建响应，序列化响应，I/O层发送响应给客户端 （2）setDate请求 预处理。接收请求，反序列化，会话检查、ACL权限检查、数据版本检查、生成事务 事务处理。同上 事务应用。将事务变更应用到内存数据库中 请求响应。同上 （3）事务请求转发。所有非Leader服务器收到了客户端发来的事务请求，都会将请求转发到Leader服务器来处理 （4）getData等非事务请求的流程 预处理。接收请求，判断是否为客户端会话创建请求，交给PrepRequestProcessor处理器进行处理，会话检查 非事务处理。反序列化请求，获取节点数据，ACL权限检查，注册Watcher 请求响应。同上 8、数据与存储（1）内存数据 DataTree。是内存数据存储的核心，是一个树的结构。底层是ConcurrentHashMap&lt;String,DataNode&gt; nodes。节点的路径（path）作为key，节点的数据内容DataNode作为value DataNode。是数据存储的最小单元。包括节点的数据内容data[]、acl列表、节点状态（stat）、还记录了父节点的引用和子节点列表 ZKDatabase。是zookeeper的内存数据库，负责管理zookeeper的所有会话、DataTree存储、事务日志。 （2）事务日志 文件存储。配置中的dataDir目录，是用来存储日志文件的。每个日志文件的大小都是64M，以事务ID（ZXID）作为后缀，高32位代表Leader周期，低32位则是真正的操作序列号 日志内容存储格式。事务日志是二进制表示，无法直接看出信息。需使用事务日志格式化工具。org.apache.zookeeper.Server.LogFormatter。使用方法如下：Java LogFormatter 事务日志文件。需要注意的是，这是一个记录事务操作的日志文件，因此里面没有任务读操作的日志记录 日志写入。1.当前日志文件剩余空间不足4k，会进行预分配。文件的不断追加写入会触发底层磁盘I/O为文件开辟新的磁盘块（磁盘seek），为了避免磁盘seek的频率，提高磁盘I/O效率；2.事务序列化；3.写入事务日志文件流；4.事务日志刷入磁盘 日志截断。非leader机器上记录的zxid比leader服务器还要大，Leader会发送TRUNC命令，进行日志截断，删除所有包含或大于peerLastZxid的事务日志文件 （3）snapshot，数据快照。用来记录Zookeeper服务器某一个时刻的全量内存数据内容，并将其写入到指定的磁盘文件中 文件存储。 通过dataDir来配置，快照文件也是用事务ID（ZXID）的十六进制作为文件后缀，该后缀标记了本次数据快照开始时刻的服务器最新ZXID。和事务日志不同，快照日志没有采用预分配机制。 存储格式，和事务日志存储格式相同，需要使用格式化工具查看内容。会将数据节点逐个依次输出，这里输出的仅仅是数据节点的元数据（stat），并没有输出每个节点的数据内容 数据快照过程：1 判断是否需要进行数据快照（采用过半随机策略，避免所有机器同时进行数据快照，影响性能。logcount&gt;(snapcount/2+randroll) snapcount是配置文件配置的数值，randroll是一个随机值）；2 切换事务日志文件，计数清零；3 创建数据快照异步线程； 4 获取全量信息和会话信息 ；5 生成快照文件名 6 数据序列化，写入磁盘 （4）初始化。服务器启动期间，会进行数据初始化过程，将磁盘上的数据加载到内存中 处理快照文件，获取最新的100个快照文件 对快照文件进行解析和校验。如果最新的快照文件未通过解析和校验，会逐个往下进行解析校验。 获取最新的ZXID 处理事务日志，获取所有大于上一步ZXID的事务日志。把事务日志应用到内存数据库中 再次获取最新的ZXID 校验epoch（leader选举届数） （5）数据同步 peerLastZxID：该learner服务器最后处理的Zxid minComminttedLog ：Leader服务器提议缓存队列ComminttedLog中最小的Zxid maxComminttedLog：Leader服务器提议缓存队列ComminttedLog中最大的Zxid 直接差异化同步（DIFF同步）。peerLastZxID介于minComminttedLog和maxComminttedLog中间 先回滚在差异化同步（TRUNC+DIFF同步）。peerLastZxID介于minComminttedLog和maxComminttedLog中间，但是leader发现了某个learner包含了一条自己没有的事务记录。 仅回滚同步（RTUNC）。peerLastZxID大于maxComminttedLog 全量同步（SNAP）。peerLastZxID小于minComminttedLog；Leader没有提议缓存队列，peerLastZxID不等于Leader服务器最大的Zxid。在这两种情况下，Leader服务器都无法直接使用提议缓存队列和learner进行同步，因此只能使用全量同步（SNAP） 八、Zookeeper运维1、配置详解（1）基本配置。必需配置 clientPort：对外的服务端口，一般配置为2181、集群中的所有端口不需要保持一致 dataDir：服务器存储快照文件的目录。dataLogDir，事务日志的存储目录 tickTime：默认值3000毫秒，用于配置Zookeeper中最小时间单位的长度。会话的最小超时时间默认是2*tickTime （2）高级配置 dataLogDir：用于存储事务日志文件。应该将事务日志单独配置在一块磁盘上，事务日志写入的性能直接影响到zookeeper的性能和吞吐量。数据快照操作会极大的影响事务日志的写性能，尽量分开磁盘 initLimit：默认值为10，即tickTime的十倍。Leader等待follower完成数据同步的时间。随着集群的数据量增大，同步时间变长，可以适当调大这个参数 syncLimit：默认值5，leader服务器和follower进行心跳检测的最大延时时间。如果网络环境较差，可以适当调大此参数 snapCount：默认值 100000。两次快照之间间隔的事务操作次数 preAllocSize：默认值65536，即64M。事务日志预分配的空间大小。随着snapCount的变化而变化，同增同减 minSessionTimeout。maxSessionTimeout：最大和最小超时时间。分别是tickTime的2倍和20倍。用于对客户端回话超时时间进行限制 maxClientCnxns：默认值60。如果设置为0，则表示没有限制。单个客户端和服务端之间的最大并发连接数。 jute.maxbuffer：单个数据节点上存储的最大数据量大小。zookeeper上不需要存储太多的数据，往往还需要将该参数设置的更小 clientPortAddress：针对多网卡的机器，zookeeper允许为每个ip地址指定不同的监听端口 server.id:host:port:port：配置组成集群的机器列表。第一个port用于leader和follower进行通信和数据同步的端口，第二个port用于leader选举过程中的投票通信 autopurge.snapRetainCount：自动清理快照日志和事务日志时，需要保留的数量。最小值为3，默认值也是3 autopurge.purgeInterval：自动清理的频率。默认值是0，单位是小时。配置为0或者负数，表示不开启自动清理功能。默认不开启此功能 fsync.warningthresholdms：配置事务日志操作消耗时间的报警阈值，超过阈值，将在日志中打印出报警日志。 forceSync：配置事务日志每次写入操作强制写入磁盘。默认值是yes。如果设置成no，在一定程度上能提高zookeeper的写性能，但存在断点的风险。 globalOutStandingLimit：默认值1000，服务器最大请求堆积数量，防止服务器资源被大量的客户端请求耗尽。 leaderServers：是否允许leader服务器向客户端提供服务。默认值yes。可以设置成no，让leader服务器专注的进行分布式协调 SkipAcl：默认值 no。配置是否跳过acl权限检查。 cnxTimeout：默认值5000毫秒。配置Leader选举过程中，个服务器间tcp连接创建的超时时间 eletionAlg：leader选举策略。3.4.0版本之后，只留下了fastLeaderElection算法。 2、四字命令 conf。输出服务器的配置信息 cons。输出这台服务器上所有客户端连接的详细信息 crst。重置所有客户端的连接统计信息 dump。输出当前集群中的所有会话信息。只有leader服务器会进行会话超时检测，leader服务器执行此命令，还会打印出会话的超时时间 envi。输出当前服务器运行时的环境信息 ruok。输出当前服务器是否正在运行。 stat。输出当前服务器运行时的状态信息，包括连接情况 srvr。和stat命令功能相同，区别是srvr命令不会打印连接情况 srst。重置所有服务器的统计信息 wchs。输出当前服务器上的watcher概要信息 wchc。输出当前服务器上管理的watcher详细信息。以会话单元进行归组 wchp。输出当前服务器上管理的watcher详细信息。以节点路径为单位进行归组 mntr。输出比stat更详细的服务器统计信息。 3、JMX。是一个为应用程序、设备、系统等植入管理功能的框架（1）开启远程JMX img 通过上述配置，就可以允许远程机器和zookeeper服务器进行jmx连接了 （2）通过JConsole连接zookeeper JConsole是一个Java内置的基于JMX的图形化管理工具，是最常用的JXM连接器。 4、监控TaoKeeper监控系统，可以在实时监控和数据统计两方面保障Zookeeper的稳定性。github地址：https://github.com/alibaba/taokeeper 5、构建一个高可用的集群（1）集群组成。最好的数量是奇数，不过偶数可以的 （2）容灾。三机房部署，2机房部署 （3）扩容与缩容。Zookeeper集群扩容需要整个集群机器的重启。整体重启和逐台重启 九、相关资料Zookeeper的优缺点 zookeeper有什么缺点？ 作者：leon66666 出处：http://www.cnblogs.com/wangzhongqiu/ 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利.","categories":[],"tags":[]},{"title":"单例模式","slug":"Java/singleton","date":"2018-10-15T13:18:06.000Z","updated":"2018-10-15T13:21:53.000Z","comments":true,"path":"2018/10/15/Java/singleton/","link":"","permalink":"http://io.stelawliet.top/2018/10/15/Java/singleton/","excerpt":"","text":"Java：单例模式的七种写法 转载出处：http://cantellow.javaeye.com/blog/838473 第一种（懒汉，线程不安全）： 1 public class Singleton { 2 private static Singleton instance; 3 private Singleton (){} 4 public static Singleton getInstance() { 5 if (instance == null) { 6 instance = new Singleton(); 7 } 8 return instance; 9 }10 }11 这种写法lazy loading很明显，但是致命的是在多线程不能正常工作。 第二种（懒汉，线程安全）： 1 public class Singleton { 2 private static Singleton instance; 3 private Singleton (){} 4 public static synchronized Singleton getInstance() { 5 if (instance == null) { 6 instance = new Singleton(); 7 } 8 return instance; 9 }10 }11 这种写法能够在多线程中很好的工作，而且看起来它也具备很好的lazy loading，但是，遗憾的是，效率很低，99%情况下不需要同步。 第三种（饿汉）： 1 public class Singleton {2 private static Singleton instance = new Singleton();3 private Singleton (){}4 public static Singleton getInstance() {5 return instance;6 }7 }8 这种方式基于classloder机制避免了多线程的同步问题，不过，instance在类装载时就实例化，虽然导致类装载的原因有很多种，在单例模式中大多数都是调用getInstance方法， 但是也不能确定有其他的方式（或者其他的静态方法）导致类装载，这时候初始化instance显然没有达到lazy loading的效果。 第四种（饿汉，变种）： 1 public class Singleton { 2 private Singleton instance = null; 3 static { 4 instance = new Singleton(); 5 } 6 private Singleton (){} 7 public static Singleton getInstance() { 8 return this.instance; 9 }10 }11 表面上看起来差别挺大，其实更第三种方式差不多，都是在类初始化即实例化instance。 第五种（静态内部类）： 1 public class Singleton { 2 private static class SingletonHolder { 3 private static final Singleton INSTANCE = new Singleton(); 4 } 5 private Singleton (){} 6 public static final Singleton getInstance() { 7 return SingletonHolder.INSTANCE; 8 } 9 }10 这种方式同样利用了classloder的机制来保证初始化instance时只有一个线程，它跟第三种和第四种方式不同的是（很细微的差别）：第三种和第四种方式是只要Singleton类被装载了，那么instance就会被实例化（没有达到lazy loading效果），而这种方式是Singleton类被装载了，instance不一定被初始化。因为SingletonHolder类没有被主动使用，只有显示通过调用getInstance方法时，才会显示装载SingletonHolder类，从而实例化instance。想象一下，如果实例化instance很消耗资源，我想让他延迟加载，另外一方面，我不希望在Singleton类加载时就实例化，因为我不能确保Singleton类还可能在其他的地方被主动使用从而被加载，那么这个时候实例化instance显然是不合适的。这个时候，这种方式相比第三和第四种方式就显得很合理。 第六种（枚举）： 1 public enum Singleton {2 INSTANCE;3 public void whateverMethod() {4 }5 }6 这种方式是Effective Java作者Josh Bloch 提倡的方式，它不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象，可谓是很坚强的壁垒啊，不过，个人认为由于1.5中才加入enum特性，用这种方式写不免让人感觉生疏，在实际工作中，我也很少看见有人这么写过。 第七种（双重校验锁）： 1 public class Singleton { 2 private volatile static Singleton singleton; 3 private Singleton (){} 4 public static Singleton getSingleton() { 5 if (singleton == null) { 6 synchronized (Singleton.class) { 7 if (singleton == null) { 8 singleton = new Singleton(); 9 }10 }11 }12 return singleton;13 }14 }15 这个是第二种方式的升级版，俗称双重检查锁定，详细介绍请查看：http://www.ibm.com/developerworks/cn/java/j-dcl.html 在JDK1.5之后，双重检查锁定才能够正常达到单例效果。 总结 有两个问题需要注意： ​ 1、如果单例由不同的类装载器装入，那便有可能存在多个单例类的实例。假定不是远端存取，例如一些servlet容器对每个servlet使用完全不同的类 装载器，这样的话如果有两个servlet访问一个单例类，它们就都会有各自的实例。 ​ 2、如果Singleton实现了java.io.Serializable接口，那么这个类的实例就可能被序列化和复原。不管怎样，如果你序列化一个单例类的对象，接下来复原多个那个对象，那你就会有多个单例类的实例。 对第一个问题修复的办法是： 1 private static Class getClass(String classname) 2 throws ClassNotFoundException { 3 ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); 4 5 if(classLoader == null) 6 classLoader = Singleton.class.getClassLoader(); 7 8 return (classLoader.loadClass(classname)); 9 }10 }11 对第二个问题修复的办法是： 1 public class Singleton implements java.io.Serializable { 2 public static Singleton INSTANCE = new Singleton(); 3 4 protected Singleton() { 5 6 } 7 private Object readResolve() { 8 return INSTANCE; 9 }10 }11 对我来说，我比较喜欢第三种和第五种方式，简单易懂，而且在JVM层实现了线程安全（如果不是多个类加载器环境），一般的情况下，我会使用第三种方式，只有在要明确实现lazy loading效果时才会使用第五种方式，另外，如果涉及到反序列化创建对象时我会试着使用枚举的方式来实现单例，不过，我一直会保证我的程序是线程安全的，而且我永远不会使用第一种和第二种方式，如果有其他特殊的需求，我可能会使用第七种方式，毕竟，JDK1.5已经没有双重检查锁定的问题了。 ======================================================================== superheizai同学总结的很到位： 不过一般来说，第一种不算单例，第四种和第三种就是一种，如果算的话，第五种也可以分开写了。所以说，一般单例都是五种写法。懒汉，恶汉，双重校验锁，枚举和静态内部类。","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"}],"tags":[{"name":"design parent","slug":"design-parent","permalink":"http://io.stelawliet.top/tags/design-parent/"}]},{"title":"node install by yum epel","slug":"Linux/yum/node","date":"2018-10-14T03:16:18.000Z","updated":"2018-10-14T03:19:43.000Z","comments":true,"path":"2018/10/14/Linux/yum/node/","link":"","permalink":"http://io.stelawliet.top/2018/10/14/Linux/yum/node/","excerpt":"","text":"@https://segmentfault.com/a/1190000015302680 1. 安装nodejs1.1 使用EPEL安装EPEL（Extra Packages for Enterprise Linux）企业版Linux的额外软件包，是Fedora小组维护的一个软件仓库项目，为RHEL/CentOS提供他们默认不提供的软件包。先确认系统是否已经安装了epel-release包： 1$ yum info epel-release 如果有输出有关epel-release的已安装信息，则说明已经安装，如果提示没有安装或可安装，则安装 1$ yum install epel-release 安装完后，就可以使用yum命令安装nodejs了，安装的一般会是6.x的版本，并且会将npm(3.x)作为依赖包一起安装 1$ sudo yum install nodejs 安装完成后，验证是否正确的安装，node -v，如果输出如下版本信息，说明成功安装 1v6.13.3 问题来了，现在nodejs发的版本比较快，有些新的框架需要node的新版本，那如何升级。到现在，node的最新版本是10.4.1，那么，下面介绍如何升级nodejs 1.2 卸载 nodejs1.2.1 使用 yum 先删除一次 1yum remove nodejs npm -y 1.2.2 手动删除残留 进入 /usr/local/lib 删除所有 node 和 node_modules文件夹 进入 /usr/local/include 删除所有 node 和 node_modules 文件夹 检查 ~ 文件夹里面的”local” “lib” “include” 文件夹，然后删除里面的所有 “node” 和 “node_modules” 文件夹 可以使用以下命令查找 $ find ~/ -name node $ find ~/ -name node_modules 1.2.3 进入 /usr/local/bin 删除 node 的可执行文件 删除: /usr/local/bin/npm 删除: /usr/local/share/man/man1/node.1 删除: /usr/local/lib/dtrace/node.d 删除: rm -rf /home/[homedir]/.npm 删除: rm -rf /home/root/.npm 2.升级nodesj2.1 安装nn是nodejs管理工具，是TJ写的，Github: https://github.com/tj/n 1$ npm install -g n 2.2 安装nodejs版本安装最新版 1$ n latest 安装指定版本 1$ n 8.11.3 2.3 切换nodejs版本1$ n 选择已安装的版本 12ο node/8.11.3 node/10.4.1 查看当前版本node -v，下面表示已切换成功 1v8.13.3 但问题来了，切换后，查看版本还是原来的v6.13.3，看下面 使用n切换nodejs版本失效的解决办法 3 切换失效的解决办法3.1 查看 node 当前安装路径 12$ which node/usr/local/bin/node #举个例子 3.2 而 n 默认安装路径是 /usr/local，若你的 node 不是在此路径下，n 切换版本就不能把bin、lib、include、share 复制该路径中，所以我们必须通过N_PREFIX变量来修改 n 的默认node安装路径。编辑环境配置文件： 1$ vim ~/.bash_profile 3.3 将下面两行代码插入到文件末尾： 12export N_PREFIX=/usr/local #node实际安装位置export PATH=$N_PREFIX/bin:$PATH 3.4 :wq保存退出 3.5 执行source使修改生效。 1$ source ~/.bash_profile 3.6 这时候再查看node -v发现版本切换成功了。 4.npm切换源@https://cnodejs.org/topic/5326e78c434e04172c006826 nrm – NPM registry 管理工具 开发的npm registry 管理工具 nrm, 能够查看和切换当前使用的registry, 最近NPM经常 down 掉, 这个还是很有用的哈哈 Install1$ npm install -g nrm Example1234567891011$ nrm ls* npm ---- https://registry.npmjs.org/ cnpm --- http://r.cnpmjs.org/ eu ----- http://registry.npmjs.eu/ au ----- http://registry.npmjs.org.au/ sl ----- http://npm.strongloop.com/ nj ----- https://registry.nodejitsu.com/$ nrm use cnpm //switch registry to cnpm Registry has been set to: http://r.cnpmjs.org/ cmd1234nrm help // show helpnrm list // show all registriesnrm use cnpm // switch to cnpmnrm home // go to a registry home page","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"}],"tags":[{"name":"node","slug":"node","permalink":"http://io.stelawliet.top/tags/node/"},{"name":"yum","slug":"yum","permalink":"http://io.stelawliet.top/tags/yum/"}]},{"title":"yum install","slug":"Linux/yum/yum","date":"2018-10-14T02:42:19.000Z","updated":"2018-10-14T03:16:21.000Z","comments":true,"path":"2018/10/14/Linux/yum/yum/","link":"","permalink":"http://io.stelawliet.top/2018/10/14/Linux/yum/yum/","excerpt":"","text":"yumyum 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495➜ ~ yum --help已加载插件：fastestmirrorUsage: yum [options] COMMANDList of Commands:check 检查 RPM 数据库问题check-update 检查是否有可用的软件包更新clean 删除缓存数据deplist 列出软件包的依赖关系distribution-synchronization 已同步软件包到最新可用版本downgrade 降级软件包erase 从系统中移除一个或多个软件包fs Acts on the filesystem data of the host, mainly for removing docs/lanuages for minimal hosts.fssnapshot Creates filesystem snapshots, or lists/deletes current snapshots.groups 显示或使用、组信息help 显示用法提示history 显示或使用事务历史info 显示关于软件包或组的详细信息install 向系统中安装一个或多个软件包list 列出一个或一组软件包load-transaction 从文件名中加载一个已存事务makecache 创建元数据缓存provides 查找提供指定内容的软件包reinstall 覆盖安装软件包repo-pkgs 将一个源当作一个软件包组，这样我们就可以一次性安装/移除全部软件包。repolist 显示已配置的源search 在软件包详细信息中搜索指定字符串shell 运行交互式的 yum shellswap Simple way to swap packages, instead of using shellupdate 更新系统中的一个或多个软件包update-minimal Works like upgrade, but goes to the 'newest' package match which fixes a problem that affects your systemupdateinfo Acts on repository update informationupgrade 更新软件包同时考虑软件包取代关系version 显示机器和/或可用的源版本。Options: -h, --help 显示此帮助消息并退出 -t, --tolerant 忽略错误 -C, --cacheonly 完全从系统缓存运行，不升级缓存 -c [config file], --config=[config file] 配置文件路径 -R [minutes], --randomwait=[minutes] 命令最长等待时间 -d [debug level], --debuglevel=[debug level] 调试输出级别 --showduplicates 在 list/search 命令下，显示源里重复的条目 -e [error level], --errorlevel=[error level] 错误输出级别 --rpmverbosity=[debug level name] RPM 调试输出级别 -q, --quiet 静默执行 -v, --verbose 详尽的操作过程 -y, --assumeyes 回答全部问题为是 --assumeno 回答全部问题为否 --version 显示 Yum 版本然后退出 --installroot=[path] 设置安装根目录 --enablerepo=[repo] 启用一个或多个软件源(支持通配符) --disablerepo=[repo] 禁用一个或多个软件源(支持通配符) -x [package], --exclude=[package] 采用全名或通配符排除软件包 --disableexcludes=[repo] 禁止从主配置，从源或者从任何位置排除 --disableincludes=[repo] disable includepkgs for a repo or for everything --obsoletes 更新时处理软件包取代关系 --noplugins 禁用 Yum 插件 --nogpgcheck 禁用 GPG 签名检查 --disableplugin=[plugin] 禁用指定名称的插件 --enableplugin=[plugin] 启用指定名称的插件 --skip-broken 忽略存在依赖关系问题的软件包 --color=COLOR 配置是否使用颜色 --releasever=RELEASEVER 在 yum 配置和 repo 文件里设置 $releasever 的值 --downloadonly 仅下载而不更新 --downloaddir=DLDIR 指定一个其他文件夹用于保存软件包 --setopt=SETOPTS 设置任意配置和源选项 --bugfix Include bugfix relevant packages, in updates --security Include security relevant packages, in updates --advisory=ADVS, --advisories=ADVS Include packages needed to fix the given advisory, in updates --bzs=BZS Include packages needed to fix the given BZ, in updates --cves=CVES Include packages needed to fix the given CVE, in updates --sec-severity=SEVS, --secseverity=SEVS Include security relevant packages matching the severity, in updates 插件选项:➜ ~","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"shell","slug":"linux/shell","permalink":"http://io.stelawliet.top/categories/linux/shell/"}],"tags":[]},{"title":"cap定理","slug":"Linux/internet/cap","date":"2018-10-12T12:47:57.000Z","updated":"2018-10-12T12:53:02.000Z","comments":true,"path":"2018/10/12/Linux/internet/cap/","link":"","permalink":"http://io.stelawliet.top/2018/10/12/Linux/internet/cap/","excerpt":"","text":"CAP定理@维基百科，自由的百科全书 link 在理论计算机科学中，CAP定理（CAP theorem），又被称作布鲁尔定理（Brewer’s theorem），它指出对于一个分布式计算系统来说，不可能同时满足以下三点： 一致性（Consistency） （等同于所有节点访问同一份最新的数据副本） 可用性（Availability）（每次请求都能获取到非错的响应——但是不保证获取的数据为最新数据） 分区容错性（Partition tolerance）（以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。） 根据定理，分布式系统只能满足三项中的两项而不可能满足全部三项理解CAP理论的最简单方式是想象两个节点分处分区两侧。允许至少一个节点更新状态会导致数据不一致，即丧失了C性质。如果为了保证数据一致性，将分区一侧的节点设置为不可用，那么又丧失了A性质。除非两个节点可以互相通信，才能既保证C又保证A，这又会导致丧失P性质。 p在目前网络通信技术背景下必然成立.于是c和a在p的条件下必然矛盾.","categories":[],"tags":[]},{"title":"rabbitmq docker","slug":"Linux/docker/rabbitmq","date":"2018-10-11T17:03:59.000Z","updated":"2018-10-11T17:16:06.000Z","comments":true,"path":"2018/10/12/Linux/docker/rabbitmq/","link":"","permalink":"http://io.stelawliet.top/2018/10/12/Linux/docker/rabbitmq/","excerpt":"","text":"docker环境下的RabbitMQ部署，Spring AMQP使用 原 荐月 月冷X心寒 发布于 2016/11/18 16:32 字数 1410 阅读 2381 收藏 34 点赞 1 评论 3 DockerRabbitMQAMQPSpring AMQPSpring Cloud AMQP简介AMQP，即 Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦和通讯。AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。 RabbitMQ是一个开源的AMQP实现，服务器端用 Erlang 语言编写，支持多种客户端，如：Python、Ruby、.NET、Java、JMS、C、PHP、ActionScript、XMPP、STOMP等，支持AJAX。用于在分布式系统中存储转发消息，具有很高的易用性和可用性。 在docker环境部署RabbitMQRabbitMQ是用 Erlang 编写的，直接部署的话需要先部署 Erlang 环境，比较麻烦。在 docker 环境下部署就比较简单了，直接使用rabbitmq官方提供的镜像即可。 登录 docker 节点，运行 docker pull rabbitmq:management，这里使用的是带 web 管理插件的镜像。 启动容器： 123docker run -d --name rabbitmq --publish 5671:5671 \\ --publish 5672:5672 --publish 4369:4369 --publish 25672:25672 --publish 15671:15671 --publish 15672:15672 \\rabbitmq:management 容器启动之后就可以访问web 管理端了 http://宿主机IP:15672，默认创建了一个 guest 用户，密码也是 guest。 img AMQP协议中的几个重要概念 Queue 是RabbitMQ的内部对象，用于存储消息。RabbitMQ中的消息只能存储在 Queue 中，消费者从 Queue 中获取消息并消费。 Exchange 生产者将消息发送到 Exchange，由 Exchange 根据一定的规则将消息路由到一个或多个 Queue 中（或者丢弃）。 Binding RabbitMQ中通过 Binding 将 Exchange 与 Queue 关联起来。 Binding key 在绑定（Binding） Exchange 与 Queue 的同时，一般会指定一个 binding key。 Routing key 生产者在将消息发送给 Exchange 的时候，一般会指定一个 routing key，来指定这个消息的路由规则。 Exchange 会根据 routing key 和 Exchange Type 以及 Binding key 的匹配情况来决定把消息路由到哪个 Queue。 Exchange Types RabbitMQ常用的Exchange Type有 fanout 、 direct 、 topic 、 headers 这四种。 fanout 这种类型的Exchange路由规则非常简单，它会把所有发送到该Exchange的消息路由到所有与它绑定的Queue中，这时 Routing key 不起作用。 direct 这种类型的Exchange路由规则也很简单，它会把消息路由到那些 binding key 与 routing key完全匹配的Queue中。 topic 这种类型的Exchange的路由规则支持 binding key 和 routing key 的模糊匹配，会把消息路由到满足条件的Queue。 binding key 中可以存在两种特殊字符 *与 #，用于做模糊匹配，其中 * 用于匹配一个单词，# 用于匹配多个单词（可以是零个），单词以 .为分隔符。 headers 这种类型的Exchange不依赖于 routing key 与 binding key 的匹配规则来路由消息，而是根据发送的消息内容中的 headers 属性进行匹配。 使用Spring AMQP收发消息新建一个maven工程，修改pom.xml引入 spring amqp 依赖: 123456789101112&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.4.2.RELEASE&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 在 java 目录中创建一个包 demo ，在包中创建启动入口 SpringAmqpApplication.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public static void main(String[] args) &#123; ConfigurableApplicationContext context = SpringApplication.run(SpringAmqpApplication.class, args); Sender sender = context.getBean(&quot;sender&quot;, Sender.class); sender.sendMsg(&quot;测试Spring AMQP发送消息&quot;); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; context.close();&#125;[@Bean](https://my.oschina.net/bean)CachingConnectionFactory myConnectionFactory() &#123; CachingConnectionFactory connectionFactory = new CachingConnectionFactory(); connectionFactory.setUsername(&quot;guest&quot;); connectionFactory.setPassword(&quot;guest&quot;); connectionFactory.setHost(&quot;10.47.160.238&quot;); connectionFactory.setPort(5672); connectionFactory.setVirtualHost(&quot;/&quot;); return connectionFactory;&#125;[@Bean](https://my.oschina.net/bean)Exchange myExchange() &#123; return ExchangeBuilder.topicExchange(&quot;test.topic&quot;).durable().build();&#125;[@Bean](https://my.oschina.net/bean)Queue myQueue() &#123; return QueueBuilder.durable(&quot;myQueue&quot;).build();&#125;[@Bean](https://my.oschina.net/bean)public Binding myExchangeBinding(@Qualifier(&quot;myExchange&quot;) Exchange topicExchange, @Qualifier(&quot;myQueue&quot;) Queue queue) &#123; return BindingBuilder.bind(queue).to(topicExchange).with(&quot;test.#&quot;).noargs();&#125;@Beanpublic RabbitTemplate myExchangeTemplate(CachingConnectionFactory myConnectionFactory) &#123; RabbitTemplate rabbitTemplate = new RabbitTemplate(myConnectionFactory); rabbitTemplate.setExchange(&quot;test.topic&quot;); rabbitTemplate.setRoutingKey(&quot;test.abc.123&quot;); return rabbitTemplate;&#125; 在 demo 包下创建 Sender.java 123456789101112@Componentpublic class Sender &#123; @Autowired private RabbitTemplate rabbitTemplate; public void sendMsg(String content) &#123; rabbitTemplate.convertAndSend(content); System.out.println(&quot;发送消息: &apos;&quot; + content + &quot;&apos;&quot;); &#125;&#125; 在 demo 包下创建Receiver.java 12345678910@Componentpublic class Receiver &#123; @RabbitListener(queues = &quot;myQueue&quot;) public void processMessage(Message message) &#123; byte[] body = message.getBody(); System.out.println(&quot;收到消息: &apos;&quot; + new String(body) + &quot;&apos;&quot;); &#125;&#125; 回头看下代码，在 SpringAmqpApplication.java 中创建了程序启动入口 main 方法，为了有时间把收到的消息打印出来，让主线程 sleep 了1秒，配置了几个和 RabbitMQ 相关的重要配置： RabbitMQ 的连接 CachingConnectionFactory 创建了一个名为 test.topic 并且类型为 topic 的 Exchange 创建了一个名为 myQueue 的 Queue 把上边创建的 Queue 和 Exchange 进行了绑定，并指定 binding key 为 test.# 最后还配置了一个spring封装的模板工具类 rabbitTemplate，指定了 Exchange 和 Routing key，用这个 rabbitTemplate 发送消息， 会把消息发送到名为 test.topic 的 Exchange，并且带有 Routing key test.abc.123 Sender.java 和 Receiver.java 的代码就比较简单了，在 sendMsg 方法中使用 rabbitTemplate 发送消息。在 processMessage 方法上加了一个 @RabbitListener(queues = &quot;myQueue&quot;) 注解，指定从 myQueue这个队列中获取消息。 运行 main 方法启动工程，可以看到控制台打印出了发送的消息和接收的消息。 demo源码 spring-amqp-demo 最后RabbitMQ在 spring cloud 中做为消息总线，负责传递和分发系统消息，是非常重要的一个角色，spring cloud bus 动态加载配置就是使用消息总线，把重新拉去配置的消息分发到各个连接到消息总线的微服务。在 spring cloud steam 的消息驱动模型中同样使用了RabbitMQ。不仅如此，RabbitMQ本身也是一个非常高效的消息服务器，可以用在服务之间异步调用，以及RPC远程调用（在消息头中增加 Reply Queue 来监听调用返回信息）。","categories":[],"tags":[]},{"title":"linux network cmd","slug":"Linux/internet/network command","date":"2018-10-11T03:11:52.000Z","updated":"2018-10-11T16:11:32.000Z","comments":true,"path":"2018/10/11/Linux/internet/network command/","link":"","permalink":"http://io.stelawliet.top/2018/10/11/Linux/internet/network command/","excerpt":"","text":"iptables12345678910111213141516171819202122232425➜ ~ iptables -t nat -vnLChain PREROUTING (policy ACCEPT 7720 packets, 360K bytes) pkts bytes target prot opt in out source destination55060 2598K DOCKER all -- * * 0.0.0.0/0 0.0.0.0/0 ADDRTYPE match dst-type LOCALChain INPUT (policy ACCEPT 7720 packets, 360K bytes) pkts bytes target prot opt in out source destinationChain OUTPUT (policy ACCEPT 2593 packets, 190K bytes) pkts bytes target prot opt in out source destination 0 0 DOCKER all -- * * 0.0.0.0/0 !127.0.0.0/8 ADDRTYPE match dst-type LOCALChain POSTROUTING (policy ACCEPT 2638 packets, 193K bytes) pkts bytes target prot opt in out source destination 75 4696 MASQUERADE all -- * !docker0 172.17.0.0/16 0.0.0.0/0 63 3818 MASQUERADE all -- * !br-929440d33a09 172.18.0.0/16 0.0.0.0/0 0 0 MASQUERADE tcp -- * * 172.17.0.3 172.17.0.3 tcp dpt:6379 0 0 MASQUERADE tcp -- * * 172.17.0.5 172.17.0.5 tcp dpt:80Chain DOCKER (2 references) pkts bytes target prot opt in out source destination 0 0 RETURN all -- docker0 * 0.0.0.0/0 0.0.0.0/0 0 0 RETURN all -- br-929440d33a09 * 0.0.0.0/0 0.0.0.0/0 6 312 DNAT tcp -- !docker0 * 0.0.0.0/0 0.0.0.0/0 tcp dpt:16379 to:172.17.0.3:6379 39 1960 DNAT tcp -- !docker0 * 0.0.0.0/0 0.0.0.0/0 tcp dpt:8081 to:172.17.0.5:80 netstat12345678➜ ~ netstat -tnlActive Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address Statetcp 0 0 0.0.0.0:80 0.0.0.0:* LISTENtcp 0 0 0.0.0.0:22 0.0.0.0:* LISTENtcp6 0 0 :::80 :::* LISTENtcp6 0 0 :::8081 :::* LISTENtcp6 0 0 :::16379 :::* LISTEN bridge-utils12345678➜ ~ yum -y install bridge-utils➜ ~ brctl showbridge name bridge id STP enabled interfacesbr-929440d33a09 8000.024241c7594d nodocker0 8000.02427b8c93e5 no veth2f2e753 veth311abfc veth638f001 veth6ba1cab wget","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"network","slug":"linux/network","permalink":"http://io.stelawliet.top/categories/linux/network/"}],"tags":[]},{"title":"","slug":"AI/Linear","date":"2018-10-07T13:10:24.000Z","updated":"2018-10-07T16:26:05.000Z","comments":true,"path":"2018/10/07/AI/Linear/","link":"","permalink":"http://io.stelawliet.top/2018/10/07/AI/Linear/","excerpt":"","text":"linear What are we going to learn? pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/02/24) Vectors, Matrices and their Products pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/02/24) Does a system of linear equations have solutions? pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/02/25) How many solutions? pdf, ppt, mp4, download (2016/03/02) Solving System of Linear Equations pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/02) What can we find from RREF? pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/03) Matrix Multiplication pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/09) Inverse of Matrix pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/10) Determinants pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/16) Subspace pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/30) Basis pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/03/30) Subspaces associated with a Matrix pdf, ppt, mp4, download (2016/03/31) Coordinate System pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/04/06) Application of Basis in Machine Learning pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/04/06) Linear Function in Coordinate System pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/04/06) Review &amp; Complement pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/04/07) Eigenvalues and Eigenvectors pdf, ppt, mp4, download (2016/04/27) Characteristic Polynomial pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar), reference (2016/04/27) Diagonalization pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/04/28) Diagonalization of Linear Operator pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/05/04) Orthogonality pdf, ppt, mp4, download (2016/05/04) Orthogonal Projection pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/05/11) First Lecture of Machine Learning pdf.pdf), ppt.pptx), pdf.ecm.mp4/index.html), ppt.ecm.mp4.rar) (2016/05/12) Orthogonal Vectors pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/05/04) Orthogonal Basis pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar) (2016/05/18) Orthogonal Matrices and Symmetric Matrices pdf.pdf), ppt.pptx), pdf.ecm.mp4/index.html), ppt.ecm.mp4.rar) (2016/05/18) SVD pdf, ppt, mp4, download (2016/05/04) PageRank pdf.pdf), ppt.pptx), mp4.ecm.mp4/index.html), download.ecm.mp4.rar), reference (2016/05/25) Beyond Vectors pdf, ppt, mp4, download, reference (2016/06/08) Review pdf.pdf), ppt.pptx) (2016/06/15)","categories":[],"tags":[]},{"title":"","slug":"Untitled 2","date":"2018-10-07T13:10:11.000Z","updated":"2018-10-07T13:10:11.000Z","comments":true,"path":"2018/10/07/Untitled 2/","link":"","permalink":"http://io.stelawliet.top/2018/10/07/Untitled 2/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"grep 过滤文本","slug":"Linux/command/grep","date":"2018-10-07T09:34:21.000Z","updated":"2018-10-07T13:10:02.000Z","comments":true,"path":"2018/10/07/Linux/command/grep/","link":"","permalink":"http://io.stelawliet.top/2018/10/07/Linux/command/grep/","excerpt":"","text":"grep 基于行匹配的文本搜索工具，并不仅仅支持单独的某个文件开始过滤，也可以基于某个目录下的所有文件开始一个文件一个文件的开始过滤每行内容，如果你想找某个关键内容或者IP的话，但是不知道在哪个文件，这个时候grep一样可以派上用场，前提是查找的目录不要太大，当前服务器负载不是特别高。 #分两类：​ 基本正则表达式：BRE​ 扩展正则表达式：ERE 字符匹配选线以及使用介绍. 匹配任意单个字符 cat /etc/passwd | grep “roo.” 查看/etc/passwd目录下 显示包含roo后面加任意单个字符的行[] 匹配指定范围内的任意单个字符 cat /etc/passwd | grep [bin] 查看/etc/passwd目录下 显示包含b、i、n其中任意一个字母的行[^] 匹配指定范围外的任意单个字符 cat /etc/passwd | grep [^bin] 查看/etc/passwd目录下 显示除b、i、n三个字母之外任意的字符全部是要找的字符[:alnum:] 任意字母和数字 cat /etc/passwd | grep [[:alnum:]] 查看/etc/passwd目录下 显示包含任意字母和数字的行[:alpha:] 代表任何英文字母大小写 例[a-z][A-Z] cat /etc/passwd | grep [[:alpha:]] 查看/etc/passwd目录下 显示包含任意大小写字母的行[:lower:] 小写字母[a-z][:upper:] 大写字母[A-Z] cat /etc/passwd | grep [[:lower:]] 查看/etc/passwd目录下 显示包含任意小写字母的行 [:upper:] 同样的使用方式[:blank:] 空白字符（空格和制表符）[:space:] 水平和垂直的空白字符[:cntrl:] 不可打印的控制字符 （退格、删除…）[:digit:] 十进制数字[:xdigit:] 十六进制数字[:graph:] 可打印的非空白字符[:print:] 可打印字符[:punct:] 标点符号下面几个命令概都类似 只是用虚拟机上的/etc/passwd这个目录来举例做简单的示范， 几个匹配字符还可以进行组合，接下来会进行举例。 匹配次数选项+ 匹配前面的字符至少一次 cat /etc/passwd | grep [“o”+] 查看/etc/passwd 目录下每行包含o后面的全部内容. 任意长度的任意字符 cat /etc/passwd | grep o. 查看/etc/passwd 目录下每行包含o后面的全部内容\\? 匹配其前面的字符0或1次 匹配前面的字符0到无穷次 尽可能长的匹配{n} 匹配前面的字符n次 n代表任意一个数字{m,n} 匹配前面的字符至少m次 至多n次{n,} 匹配前面的字符至少n次 cat /etc/passwd | grep “1{3，}“ 查看/etc/passwd 目录下前面是1后面最少跟三个1的行{,n} 匹配前面的字符至多n次 cat /etc/passwd | grep “1{,3}“ 查看/etc/passwd 目录下前面是1后面最少0最多跟三个1的行 位置锚定选项^ 锚定行首 用于模式的最左侧 cat /etc/passwd | grep ^”\\&lt;root>“ 查看/etc/passwd 目录下（用^锚定行首 用\\&lt; >锚定一个单词 ）root开头的行$ 行尾锚定 用于模式的最右侧 cat /etc/passwd | grep “[[:space:]]+”$ 查看/etc/passwd 目录下结尾是空白的行 注意区分 没有用到下面一行的命令\\&lt; > 锚定一个单词的词首词尾^$ 空行 ^[[:space:]]*$ 空白行 扩展正则表达式扩展正则表达式去正则表达式的区别是扩展正则表达式中新添加了几个与正则表达式有区别的新内容？ 0次或者1次{m} 匹配m次 m是正常数字 1次或者多次{m，n} 至少m 至多n次 m和n都是数字 但是n要大于m #用法是一样的 就不在举例说明 grep命令作用：作为强大的文本搜索工具，它能使用这则表达式搜索文本，并把匹配的打印出来。 选项-v 显示不被pattern匹配到的行 cat /etc/passwd | grep -v root 显示/etc/passwd 目录下不包含root的行-i 忽略字符大小写 cat /etc/passwd | grep -i ROOT 显示/etc/passwd 目录下包含root的行 不区分大小写-o 仅显示匹配到的字符串 cat /etc/passwd | grep -o root 仅显示/etc/passwd 目录能匹配到的几个root 别的不会显示-c 统计匹配到的行数 cat /etc/passwd | grep -c root 仅显示/etc/passwd 目录下有几行能匹配到root 如只有两行包含root 那结果只会显示”2“-e 同时实现多个选项间的逻辑or关系 grep -e “cat” -e “dog” 查找文件下面有没有cat 或dog这两个字符串 有一个显示一个 有两个显示一双-n 显示匹配到的行号 （上面这几个选项常用） cat /etc/passwd | grep -n root 结果如果只有第五行和第六行包含root 那会在这两行前面第五行前面标5 第六行前面标6-F 相当于fgrep fgrep不支持正则表达式-q 静默模式 不输出任何信息 比如不需要查看结果，但是要判断返回值是否正确的情况下，会用到或者其他场合。-E 使用ERE 相当于适用egrep–color 对匹配到的文本着色显示 在CentOs7系统上默认会显示颜色 7以下的系统会用到这个命令 几个组合小命令，很方便利用df和grep，取出磁盘各分区利用率，并从大到小排序 df -h | grep -o “[[:digit:]]+%” | grep -o “[0-9]{1,2}“ | sort -nr 将此字符串：welcome to beijing 中的每个字符去重并排序，重复次数多的排到前面 echo “welcome to beijing “ | egrep -o “[[:alpha:]]” | sort | uniq -c | sort -nr 递归查找字符串，在当前目录下。 grep -r “需检索的字符串” ./* 配置文件中空格和#过滤去除.举例redis.conf cat redis.conf | grep -Ev “^$|^#” &gt; redis.conf","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"command","slug":"linux/command","permalink":"http://io.stelawliet.top/categories/linux/command/"}],"tags":[{"name":"grep","slug":"grep","permalink":"http://io.stelawliet.top/tags/grep/"}]},{"title":"docker ecs push","slug":"Linux/docker/阿里云内网push","date":"2018-10-04T10:17:02.000Z","updated":"2018-10-07T05:34:49.000Z","comments":true,"path":"2018/10/04/Linux/docker/阿里云内网push/","link":"","permalink":"http://io.stelawliet.top/2018/10/04/Linux/docker/阿里云内网push/","excerpt":"","text":"login1docker login --username=l.loneove@gmail.com registry-vpc.cn-shanghai.aliyuncs.com registry-vpc.cn-shanghai.aliyuncs.com 为阿里云ecs专用网络的域名 公用为 build12345➜ docker build -f dockerfile -t myos:0.0.1 .➜ docker docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmyos 0.0.1 a0d6a97a4adc 33 minutes ago 376MB tag1docker tag a0 registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos:0.0.1 a0 镜像id registry-vpc.cn-shanghai.aliyuncs.com 阿里云内网仓库地址 sky_doc/myos 自定义阿里云仓库 0.0.1 版本tag push1docker push registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos:0.0.1 镜像坐标信息同上 1234567➜ docker docker push registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos:0.0.1The push refers to repository [registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos]dc41e5738923: Layer already existsdd1623a3af4a: Pushedc164b40835c9: Layer already exists1d31b5806ba4: Pushed0.0.1: digest: sha256:bed89609db9c1f0524fffffa8dfa6e5081cf8420db58a1e4eb15b387b4ecf854 size: 1158 pull12345678➜ docker docker pull registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos:0.0.10.0.1: Pulling from sky_doc/myosDigest: sha256:bed89609db9c1f0524fffffa8dfa6e5081cf8420db58a1e4eb15b387b4ecf854Status: Downloaded newer image for registry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos:0.0.1➜ docker docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmyos 0.0.1 a0d6a97a4adc About an hour ago 376MBregistry-vpc.cn-shanghai.aliyuncs.com/sky_doc/myos 0.0.1 a0d6a97a4adc About an hour ago 376MB","categories":[{"name":"docker","slug":"docker","permalink":"http://io.stelawliet.top/categories/docker/"}],"tags":[]},{"title":"redis install config","slug":"sql/Redis config","date":"2018-09-30T16:00:04.000Z","updated":"2018-10-07T05:35:02.000Z","comments":true,"path":"2018/10/01/sql/Redis config/","link":"","permalink":"http://io.stelawliet.top/2018/10/01/sql/Redis config/","excerpt":"","text":"installyum 1yum install redis -y gcc … start1234redis-server ./redis.conf #boot server------# -h ip -p port -a passwordredis-cli -h 127.0.0.1 -p 6379 -a password configconfig remote login by password 12vim ./redis.conf---- Redis默认配置是不需要密码认证的，也就是说只要连接的Redis服务器的host和port正确，就可以连接使用。这在安全性上会有一定的问题，所以需要启用Redis的认证密码，增加Redis服务器的安全性。 1. 修改配置文件 Redis的配置文件默认在/etc/redis.conf，找到如下行： 1#requirepass foobared 去掉前面的注释，并修改为所需要的密码： 1requirepass myPassword （其中myPassword就是要设置的密码） 2. 重启Redis 如果Redis已经配置为service服务，可以通过以下方式重启： 1service redis restart 如果Redis没有配置为service服务，可以通过以下方式重启： 12/usr/local/bin/redis-cli shutdown/usr/local/bin/redis-server /etc/redis.conf 3. 登录验证 设置Redis认证密码后，客户端登录时需要使用-a参数输入认证密码，不添加该参数虽然也可以登录成功，但是没有任何操作权限。如下： 123$ ./redis-cli -h 127.0.0.1 -p 6379127.0.0.1:6379&gt; keys *(error) NOAUTH Authentication required. 使用密码认证登录，并验证操作权限： 1234$ ./redis-cli -h 127.0.0.1 -p 6379 -a myPassword127.0.0.1:6379&gt; config get requirepass1) &quot;requirepass&quot;2) &quot;myPassword&quot; 看到类似上面的输出，说明Reids密码认证配置成功。 除了按上面的方式在登录时，使用-a参数输入登录密码外。也可以不指定，在连接后进行验证： 1234567$ ./redis-cli -h 127.0.0.1 -p 6379127.0.0.1:6379&gt; auth myPasswordOK127.0.0.1:6379&gt; config get requirepass1) &quot;requirepass&quot;2) &quot;myPassword&quot;127.0.0.1:6379&gt; 4. 在命令行客户端配置密码（redis重启前有效） 前面介绍了通过redis.conf配置密码，这种配置方式需要重新启动Redis。也可以通命令行客户端配置密码，这种配置方式不用重新启动Redis。配置方式如下： 12345127.0.0.1:6379&gt; config set requirepass newPasswordOK127.0.0.1:6379&gt; config get requirepass1) &quot;requirepass&quot;2) &quot;newPassword&quot; 注意：使用命令行客户端配置密码，重启Redis后仍然会使用redis.conf配置文件中的密码。 5. 在Redis集群中使用认证密码 如果Redis服务器，使用了集群。除了在master中配置密码外，也需要在slave中进行相应配置。在slave的配置文件中找到如下行，去掉注释并修改与master相同的密码即可： 1234# masterauth master-password注意：yum 安装redis , 设置密码可以 直接打开 requirepass ，后面接密码另外，必须关掉bind 127.0.0.1 之后，外部才能访问redis，否则无法访问，报错 connect refuse。","categories":[{"name":"DB","slug":"DB","permalink":"http://io.stelawliet.top/categories/DB/"},{"name":"redis","slug":"DB/redis","permalink":"http://io.stelawliet.top/categories/DB/redis/"}],"tags":[{"name":"redis","slug":"redis","permalink":"http://io.stelawliet.top/tags/redis/"}]},{"title":"data elasticsearch","slug":"Java/framework/elasticsearch/elasticsearch复合搜索","date":"2018-09-29T17:52:55.000Z","updated":"2018-10-04T10:13:20.000Z","comments":true,"path":"2018/09/30/Java/framework/elasticsearch/elasticsearch复合搜索/","link":"","permalink":"http://io.stelawliet.top/2018/09/30/Java/framework/elasticsearch/elasticsearch复合搜索/","excerpt":"","text":"商品搜索简单实现. 先通过key(all)字段分词匹配查询.然后再通过多个过滤器过滤最后对查询结果进行多个词条terms进行聚合, 以下的搜索语句是 通过spring data elasticsearch的NativeSearchQueryBuilder来构建出的json搜索语句 然后通过ElasticsearchTemplate来发起的搜索 想要查看NativeSearchQueryBuilder拼接的json搜索语句配置如下 1234&gt; logging:&gt; level:&gt; org.springframework.data.elasticsearch.core.QUERY: DEBUG&gt; 手机搜索示例: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109GET /goods/docs/_search&#123; \"from\" : 0, \"query\" : &#123; \"bool\" : &#123; \"must\" : [ &#123; \"match\" : &#123; \"all\" : &#123; \"query\" : \"手机\", \"operator\" : \"OR\", \"prefix_length\" : 0, \"max_expansions\" : 50, \"fuzzy_transpositions\" : true, \"lenient\" : false, \"zero_terms_query\" : \"NONE\", \"boost\" : 1.0 &#125; &#125; &#125; ], \"filter\" : [ &#123; \"term\" : &#123; \"specs.CPU核数.keyword\" : &#123; \"value\" : \"八核\", \"boost\" : 1.0 &#125; &#125; &#125;, &#123; \"term\" : &#123; \"specs.内存.keyword\" : &#123; \"value\" : \"6GB\", \"boost\" : 1.0 &#125; &#125; &#125;, &#123; \"term\" : &#123; \"specs.CPU品牌.keyword\" : &#123; \"value\" : \"其他\", \"boost\" : 1.0 &#125; &#125; &#125; ], \"disable_coord\" : false, \"adjust_pure_negative\" : true, \"boost\" : 1.0 &#125; &#125;, \"version\" : true, //对上面搜索出的结果进行聚合 \"aggregations\" : &#123; \"操作系统\" : &#123; \"terms\" : &#123; \"field\" : \"specs.操作系统.keyword\", \"size\" : 10, \"min_doc_count\" : 1, \"shard_min_doc_count\" : 0, \"show_term_doc_count_error\" : false, //按数量降序 \"order\" : [ &#123; \"_count\" : \"desc\" &#125;, &#123; \"_term\" : \"asc\" &#125; ] &#125; &#125;, \"CPU核数\" : &#123; \"terms\" : &#123; \"field\" : \"specs.CPU核数.keyword\", \"size\" : 10, \"min_doc_count\" : 1, \"shard_min_doc_count\" : 0, \"show_term_doc_count_error\" : false, \"order\" : [ &#123; \"_count\" : \"desc\" &#125;, &#123; \"_term\" : \"asc\" &#125; ] &#125; &#125;, \"电池容量（mAh）\" : &#123; \"terms\" : &#123; \"field\" : \"specs.电池容量（mAh）.keyword\", \"size\" : 10, \"min_doc_count\" : 1, \"shard_min_doc_count\" : 0, \"show_term_doc_count_error\" : false, \"order\" : [ &#123; \"_count\" : \"desc\" &#125;, &#123; \"_term\" : \"asc\" &#125; ] &#125; &#125; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"http://io.stelawliet.top/categories/java/spring/"},{"name":"data","slug":"java/spring/data","permalink":"http://io.stelawliet.top/categories/java/spring/data/"}],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://io.stelawliet.top/tags/elasticsearch/"}]},{"title":"反射获取泛型类型","slug":"Java/java反射泛型类型","date":"2018-09-22T12:04:07.000Z","updated":"2018-09-22T12:50:00.000Z","comments":true,"path":"2018/09/22/Java/java反射泛型类型/","link":"","permalink":"http://io.stelawliet.top/2018/09/22/Java/java反射泛型类型/","excerpt":"","text":"由于java的泛型是无法在运行时直接获得.所以需要反射来获取 获取Mapper接口上的泛型 1234Class class = (Class)(((ParameterizedType)this.getClass() .getInterfaces()[0]//获取接口类型 .getAnnotatedInterfaces()[0] .getType()).getActualTypeArguments()[0]);","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"}],"tags":[{"name":"ParameterizedType","slug":"ParameterizedType","permalink":"http://io.stelawliet.top/tags/ParameterizedType/"}]},{"title":"","slug":"TODOlist/LyToDo","date":"2018-09-16T03:28:29.000Z","updated":"2018-09-22T13:11:58.000Z","comments":true,"path":"2018/09/16/TODOlist/LyToDo/","link":"","permalink":"http://io.stelawliet.top/2018/09/16/TODOlist/LyToDo/","excerpt":"","text":"Sep 16 git 2 [ ] 封装结果 异常结果 成功结果 枚举 [ ] 封装abstractService diy freemaker axios 封装","categories":[],"tags":[]},{"title":"","slug":"Java/spring/cloud/tx","date":"2018-09-13T03:37:45.000Z","updated":"2018-09-15T02:33:12.000Z","comments":true,"path":"2018/09/13/Java/spring/cloud/tx/","link":"","permalink":"http://io.stelawliet.top/2018/09/13/Java/spring/cloud/tx/","excerpt":"","text":"spring boot client环境配置Environment 结构理解 Environment -&gt;PropertySources application.properties or application.xml 加载器: propertiesPropertySourceLoader application.yml 加载器:YamlPropertySourceLoader Environment endPoint url: /env 配置属性源码查找 command+F+shift “property” 数据来源 : environmentEndpoint controller来源: environmentMvcEndpoint Bootstrap配置参考BootstrapApplicationListener 调整 程序启动参数加载逻辑 SpringApplication.configurePropertySources() 自定义bootstrap配置Configurtion123456789impl ApplicationContextInitializervoid initialize(ConfigurableApplicationContext applicationContext)&#123; ConfigurableEnviroment enviroment = applicationContext.getEnvironment(); enviroment.getPropertySources().addFirst(car); &#125; 配置META-INF/spring.factories文件关联KEYBootstrapConfiguration server configuration基于文件系统(File System)创建本地仓库 1.创建本地目录 在idea 的src/main/resources目录下.创建configs. 配置git本地仓库uri ${user.dir}/src/main/resources/configs 1spring.cloud.config.server.git.uri=$&#123;user.dir&#125;/src/main/resources/configs restRepresentational State Transfer","categories":[],"tags":[]},{"title":"cloud-timout-config@","slug":"Java/spring/cloud/timeOut","date":"2018-09-12T01:40:34.000Z","updated":"2018-09-12T06:25:58.000Z","comments":true,"path":"2018/09/12/Java/spring/cloud/timeOut/","link":"","permalink":"http://io.stelawliet.top/2018/09/12/Java/spring/cloud/timeOut/","excerpt":"","text":"spring-cloud网关中的Timeout分析link[https://deanwangpro.com/2018/04/13/zuul-hytrix-ribbon-timeout/] Posted on 2018-04-13 | 0 Comments | 456 大家在初次使用spring-cloud的gateway的时候，肯定会被里面各种的Timeout搞得晕头转向。hytrix有设置，ribbon也有。我们一开始也是乱设一桶，Github上各种项目里也没几个设置正确的。对Timeout的研究源于一次log中的warning The Hystrix timeout of 60000 ms for the command “foo” is set lower than the combination of the Ribbon read and connect timeout, 200000ms. hytrix超时时间log出自AbstractRibbonCommand.java，那么索性研究一下源码。 假设： 这里gateway会请求一个serviceName=foo的服务 123456789101112131415161718192021222324252627protected static int getHystrixTimeout(IClientConfig config, String commandKey) &#123; int ribbonTimeout = getRibbonTimeout(config, commandKey); DynamicPropertyFactory dynamicPropertyFactory = DynamicPropertyFactory.getInstance(); // 获取默认的hytrix超时时间 int defaultHystrixTimeout = dynamicPropertyFactory.getIntProperty(\"hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds\", 0).get(); // 获取具体服务的hytrix超时时间，这里应该是hystrix.command.foo.execution.isolation.thread.timeoutInMilliseconds int commandHystrixTimeout = dynamicPropertyFactory.getIntProperty(\"hystrix.command.\" + commandKey + \".execution.isolation.thread.timeoutInMilliseconds\", 0).get(); int hystrixTimeout; // hystrixTimeout的优先级是 具体服务的hytrix超时时间 &gt; 默认的hytrix超时时间 &gt; ribbon超时时间 if(commandHystrixTimeout &gt; 0) &#123; hystrixTimeout = commandHystrixTimeout; &#125; else if(defaultHystrixTimeout &gt; 0) &#123; hystrixTimeout = defaultHystrixTimeout; &#125; else &#123; hystrixTimeout = ribbonTimeout; &#125; // 如果默认的或者具体服务的hytrix超时时间小于ribbon超时时间就会警告 if(hystrixTimeout &lt; ribbonTimeout) &#123; LOGGER.warn(\"The Hystrix timeout of \" + hystrixTimeout + \"ms for the command \" + commandKey + \" is set lower than the combination of the Ribbon read and connect timeout, \" + ribbonTimeout + \"ms.\"); &#125; return hystrixTimeout;&#125; 紧接着，看一下我们的配置是什么 12345678910111213hystrix: command: default: execution: isolation: thread: timeoutInMilliseconds: 60000 ribbon: ReadTimeout: 50000 ConnectTimeout: 50000 MaxAutoRetries: 0 MaxAutoRetriesNextServer: 1 ribbon超时时间这里ribbon的超时时间是50000ms，那么为什么log中写的ribbon时间是200000ms? 继续分析源码： 123456789101112131415161718192021protected static int getRibbonTimeout(IClientConfig config, String commandKey) &#123; int ribbonTimeout; // 这是比较异常的情况，不说 if (config == null) &#123; ribbonTimeout = RibbonClientConfiguration.DEFAULT_READ_TIMEOUT + RibbonClientConfiguration.DEFAULT_CONNECT_TIMEOUT; &#125; else &#123; // 这里获取了四个参数，ReadTimeout，ConnectTimeout，MaxAutoRetries， MaxAutoRetriesNextServer int ribbonReadTimeout = getTimeout(config, commandKey, \"ReadTimeout\", IClientConfigKey.Keys.ReadTimeout, RibbonClientConfiguration.DEFAULT_READ_TIMEOUT); int ribbonConnectTimeout = getTimeout(config, commandKey, \"ConnectTimeout\", IClientConfigKey.Keys.ConnectTimeout, RibbonClientConfiguration.DEFAULT_CONNECT_TIMEOUT); int maxAutoRetries = getTimeout(config, commandKey, \"MaxAutoRetries\", IClientConfigKey.Keys.MaxAutoRetries, DefaultClientConfigImpl.DEFAULT_MAX_AUTO_RETRIES); int maxAutoRetriesNextServer = getTimeout(config, commandKey, \"MaxAutoRetriesNextServer\", IClientConfigKey.Keys.MaxAutoRetriesNextServer, DefaultClientConfigImpl.DEFAULT_MAX_AUTO_RETRIES_NEXT_SERVER); // 原来ribbonTimeout的计算方法在这里，以上文的设置为例 // ribbonTimeout = (50000 + 50000) * (0 + 1) * (1 + 1) = 200000 ribbonTimeout = (ribbonReadTimeout + ribbonConnectTimeout) * (maxAutoRetries + 1) * (maxAutoRetriesNextServer + 1); &#125; return ribbonTimeout;&#125; 可以看到ribbonTimeout是一个总时间，所以从逻辑上来讲，作者希望hystrixTimeout要大于ribbonTimeout，否则hystrix熔断了以后，ribbon的重试就都没有意义了。 ribbon单服务设置到这里最前面的疑问已经解开了，但是hytrix可以分服务设置timeout，ribbon可不可以? 源码走起，这里看的文件是DefaultClientConfigImpl.java 123456789101112131415161718192021222324252627282930313233// 这是获取配置的入口方法，如果是null，那么用默认值// 所有ribbon的默认值的都在该类中设置了，可以自己看一下public &lt;T&gt; T get(IClientConfigKey&lt;T&gt; key, T defaultValue) &#123; T value = get(key); if (value == null) &#123; value = defaultValue; &#125; return value;&#125;// 这是核心方法 protected Object getProperty(String key) &#123; if (enableDynamicProperties) &#123; String dynamicValue = null; DynamicStringProperty dynamicProperty = dynamicProperties.get(key); // dynamicProperties其实是一个缓存，首次访问foo服务的时候会加载 if (dynamicProperty != null) &#123; dynamicValue = dynamicProperty.get(); &#125; // 如果缓存没有，那么就再获取一次，注意这里的getConfigKey(key)是生成key的方法 if (dynamicValue == null) &#123; dynamicValue = DynamicProperty.getInstance(getConfigKey(key)).getString(); // 如果还是没有取默认值，getDefaultPropName(key)生成key的方法 if (dynamicValue == null) &#123; dynamicValue = DynamicProperty.getInstance(getDefaultPropName(key)).getString(); &#125; &#125; if (dynamicValue != null) &#123; return dynamicValue; &#125; &#125; return properties.get(key);&#125; 以我们的服务为例：getConfigKey(key) returns foo.ribbon.ReadTimeoutgetDefaultPropName(key) returns ribbon.ReadTimeout 一目了然，{serviceName}.ribbon.{propertyName}就可以了。 spring cloud各种超时时间设置时间：2017-11-09 分类：收藏 如果是zuul（网关）的超时时间需要设置zuul、hystrix、ribbon等三部分：123456789101112131415161718192021222324252627282930313233343536373839404142#zuul超时设置#默认1000zuul.host.socket-timeout-millis=2000#默认2000zuul.host.connect-timeout-millis=4000#熔断器启用feign.hystrix.enabled=truehystrix.command.default.execution.timeout.enabled=true#断路器的超时时间,下级服务返回超出熔断器时间，即便成功，消费端消息也是TIMEOUT,所以一般断路器的超时时间需要大于ribbon的超时时间。#服务的返回时间大于ribbon的超时时间，会触发重试#默认=1000，太小hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=60000#断路器详细设置#当在配置时间窗口内达到此数量的失败后，进行短路。默认20个）#hystrix.command.default.circuitBreaker.requestVolumeThreshold=20#短路多久以后开始尝试是否恢复，默认5s）#hystrix.command.default.circuitBreaker.sleepWindowInMilliseconds=5#出错百分比阈值，当达到此阈值后，开始短路。默认50%）#hystrix.command.default.circuitBreaker.errorThresholdPercentage=50%#ribbon请求连接的超时时间- 限制3秒内必须请求到服务，并不限制服务处理的返回时间ribbon.ConnectTimeout=3000#请求处理的超时时间 下级服务响应最大时间,超出时间消费方（路由也是消费方）返回timeoutribbon.ReadTimeout=5000# 单独设置某个服务的超时时间，会覆盖其他的超时时间限制，服务的名称已注册中心页面显示的名称为准，超时时间不可大于断路器的超时时间#service-a.ribbon.ReadTimeout=60000#service-a.ribbon.ConnectTimeout=60000#重试机制#该参数用来开启重试机制，默认是关闭spring.cloud.loadbalancer.retry.enabled=true#对所有操作请求都进行重试ribbon.OkToRetryOnAllOperations=true#对当前实例的重试次数ribbon.MaxAutoRetries=1#切换实例的重试次数ribbon.MaxAutoRetriesNextServer=1#根据如上配置，当访问到故障请求的时候，它会再尝试访问一次当前实例（次数由MaxAutoRetries配置），#如果不行，就换一个实例进行访问，如果还是不行，再换一次实例访问（更换次数由MaxAutoRetriesNextServer配置），#如果依然不行，返回失败信息。","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"cloud","slug":"spring/cloud","permalink":"http://io.stelawliet.top/categories/spring/cloud/"}],"tags":[{"name":"spring cloud","slug":"spring-cloud","permalink":"http://io.stelawliet.top/tags/spring-cloud/"},{"name":"zuul","slug":"zuul","permalink":"http://io.stelawliet.top/tags/zuul/"},{"name":"hystrix","slug":"hystrix","permalink":"http://io.stelawliet.top/tags/hystrix/"},{"name":"ribbon","slug":"ribbon","permalink":"http://io.stelawliet.top/tags/ribbon/"}]},{"title":"","slug":"Java/spring/cloud/properties","date":"2018-09-12T01:26:35.000Z","updated":"2018-09-12T01:27:44.000Z","comments":true,"path":"2018/09/12/Java/spring/cloud/properties/","link":"","permalink":"http://io.stelawliet.top/2018/09/12/Java/spring/cloud/properties/","excerpt":"","text":"附录：配置纲要Properties 名称 默认 描述 encrypt.fail-on-error true 标记说，如果存在加密或解密错误，进程将失败。 encrypt.key 对称密钥。作为一个更强大的替代方案，考虑使用密钥库。 encrypt.key-store.alias 商店中的钥匙别名 encrypt.key-store.location 密钥存储文件的位置，例如classpath：/keystore.jks。 encrypt.key-store.password 锁定密钥库的密码。 encrypt.key-store.secret 秘密保护密钥（默认为密码相同）。 encrypt.rsa.algorithm 使用RSA算法（DEFAULT或OEAP）。一旦设置不改变它（或现有的密码将不可解密）。 encrypt.rsa.salt deadbeef Salt用于加密密文的随机秘密。一旦设置不改变它（或现有的密码将不可解密）。 encrypt.rsa.strong false 标志表示应该在内部使用“强”AES加密。如果为真，则将GCM算法应用于AES加密字节。默认值为false（在这种情况下使用“标准”CBC代替）。一旦设置不改变它（或现有的密码将不可解密）。 endpoints.bus.enabled endpoints.bus.id endpoints.bus.sensitive endpoints.consul.enabled endpoints.consul.id endpoints.consul.sensitive endpoints.env.post.enabled true 通过POST将环境更改为/ env。 endpoints.features.enabled endpoints.features.id endpoints.features.sensitive endpoints.pause.enabled true 启用/暂停端点（发送Lifecycle.stop（））。 endpoints.pause.id endpoints.pause.sensitive endpoints.refresh.enabled true 启用/ refresh端点刷新配置并重新初始化刷新作用域bean。 endpoints.refresh.id endpoints.refresh.sensitive endpoints.restart.enabled true 启用/ restart端点重新启动应用程序上下文。 endpoints.restart.id endpoints.restart.pause-endpoint.enabled endpoints.restart.pause-endpoint.id endpoints.restart.pause-endpoint.sensitive endpoints.restart.resume-endpoint.enabled endpoints.restart.resume-endpoint.id endpoints.restart.resume-endpoint.sensitive endpoints.restart.sensitive endpoints.restart.timeout 0 endpoints.resume.enabled true 启用/ resume端点（发送Lifecycle.start（））。 endpoints.resume.id endpoints.resume.sensitive endpoints.zookeeper.enabled true 启用/ zookeeper端点来检查zookeeper的状态。 eureka.client.allow-redirects false 指示服务器是否可以将客户端请求重定向到备份服务器/集群。如果设置为false，服务器将直接处理请求，如果设置为true，则可能会向客户端发送HTTP重定向，并具有新的服务器位置。 eureka.client.availability-zones 获取此实例所在区域的可用性区域列表（用于AWS数据中心）。更改在运行时在registryFetchIntervalSeconds指定的下一个注册表提取周期中有效。 eureka.client.backup-registry-impl 获取执行BackupRegistry的实现的名称，以便仅在eureka客户端启动时首次将注册表信息作为回退选项提取。对于需要额外的弹性的注册表信息的应用程序可能需要这一点，而无法运行它们。 eureka.client.cache-refresh-executor-exponential-back-off-bound 10 缓存刷新执行者指数退出相关属性。在发生超时序列的情况下，它是重试延迟的最大乘数值。 eureka.client.cache-refresh-executor-thread-pool-size 2 cacheRefreshExecutor初始化的线程池大小 eureka.client.client-data-accept EurekaAccept客户端数据接受名称 eureka.client.decoder-name 这是一个瞬态配置，一旦最新的编解码器稳定，可以删除（因为只有一个） eureka.client.disable-delta false 指示eureka客户端是否应该禁用提取delta，而应该诉诸于获取完整的注册表信息。请注意，增量获取可以极大地减少流量，因为尤利卡服务器的更改速率通常远低于提取速率。更改在运行时在registryFetchIntervalSeconds指定的下一个注册表提取周期中有效 eureka.client.dollar-replacement _- 在eureka服务器的序列化/反序列化信息期间，获取Dollar符号 $ &lt;/ code&gt;的替换字符串。 eureka.client.enabled true 标记以指示启用Eureka客户端。 eureka.client.encoder-name 这是一个瞬态配置，一旦最新的编解码器稳定，可以删除（因为只有一个） eureka.client.escape-char-replacement __ 在eureka服务器的序列化/反序列化信息期间获取下划线符号 _ &lt;/ code&gt;的替换字符串。 eureka.client.eureka-connection-idle-timeout-seconds 30 表示到eureka服务器的HTTP连接可以在关闭之前保持空闲状态的时间（以秒为单位）。在AWS环境中，建议值为30秒或更短，因为防火墙在几分钟内清除连接信息，将连接挂在空中 eureka.client.eureka-server-connect-timeout-seconds 5 指示在连接到eureka服务器需要超时之前等待（以秒为单位）的时间。请注意，客户端中的连接由org.apache.http.client.HttpClient汇集，此设置会影响实际的连接创建以及从池中获取连接的等待时间。 eureka.client.eureka-server-d-n-s-name 获取要查询的DNS名称以获取eureka服务器的列表。如果合同通过实现serviceUrls返回服务URL，则不需要此信息。当useDnsForFetchingServiceUrls设置为true时，使用DNS机制，而eureka客户端希望DNS以某种方式配置，以便可以动态获取更改的eureka服务器。更改在运行时有效。 eureka.client.eureka-server-port 获取用于构建服务url的端口，以在eureka服务器列表来自DNS时联系eureka服务器。如果合同返回服务url eurekaServerServiceUrls（String），则不需要此信息。当useDnsForFetchingServiceUrls设置为true时，使用DNS机制，而eureka客户端希望DNS以某种方式配置，以便可以动态获取更改的eureka服务器。更改在运行时有效。 eureka.client.eureka-server-read-timeout-seconds 8 指示从eureka服务器读取之前需要等待（秒）多久才能超时。 eureka.client.eureka-server-total-connections 200 获取从eureka客户端到所有eureka服务器允许的总连接数。 eureka.client.eureka-server-total-connections-per-host 50 获取从eureka客户端到eureka服务器主机允许的总连接数。 eureka.client.eureka-server-u-r-l-context 获取用于构建服务网址的URL上下文，以便在eureka服务器列表来自DNS时联系eureka服务器。如果合同从eurekaServerServiceUrls返回服务网址，则不需要此信息。当useDnsForFetchingServiceUrls设置为true时，使用DNS机制，而eureka客户端希望DNS以某种方式配置，以便可以动态获取更改的eureka服务器。更改在运行时有效。 eureka.client.eureka-service-url-poll-interval-seconds 0 表示轮询对eureka服务器信息进行更改的频率（以秒为单位）。可以添加或删除Eureka服务器，此设置控制eureka客户端应该知道的时间。 eureka.client.fetch-registry true 指示该客户端是否应从eureka服务器获取eureka注册表信息。 eureka.client.fetch-remote-regions-registry 逗号分隔将获取eureka注册表信息的区域列表。必须为availabilityZones返回的每个区域定义可用性区域。否则，将导致发现客户端启动失败。 eureka.client.filter-only-up-instances true 指示是否在仅具有InstanceStatus UP状态的实例的过滤应用程序之后获取应用程序。 eureka.client.g-zip-content true 指示从服务器支持时，是否必须压缩从eureka服务器提取的内容。来自eureka服务器的注册表信息被压缩以获得最佳的网络流量。 eureka.client.heartbeat-executor-exponential-back-off-bound 10 心跳执行者指数回撤相关财产。在发生超时序列的情况下，它是重试延迟的最大乘数值。 eureka.client.heartbeat-executor-thread-pool-size 2 heartbeat执行器初始化的线程池大小 eureka.client.initial-instance-info-replication-interval-seconds 40 指示将实例信息复制到eureka服务器的开始时间（以秒为单位） eureka.client.instance-info-replication-interval-seconds 30 指示复制要复制到eureka服务器的实例更改的频率（以秒为单位）。 eureka.client.log-delta-diff false 指示在注册表信息方面是否记录eureka服务器和eureka客户端之间的差异。Eureka客户端尝试仅从欧莱雅服务器检索增量更改以最小化网络流量。收到三角形后，eureka客户端将从服务器的信息进行协调，以验证它是否已经没有漏掉一些信息。当客户端发生网络问题与服务器通信时，可能会发生调解失败。如果对帐失败，eureka客户端将获得完整的注册表信息。在获取完整的注册表信息的同时，eureka客户端可以记录客户端和服务器之间的差异，并且此设置控制它。更改在运行时在registryFetchIntervalSecondsr指定的下一个注册表提取周期中有效 eureka.client.on-demand-update-status-change true 如果设置为true，则通过ApplicationInfoManager进行的本地状态更新将触发对远程eureka服务器的按需（但限速）注册/更新 eureka.client.prefer-same-zone-eureka true 指示此实例是否应尝试在同一区域中使用尤里卡服务器延迟和/或其他原因。理想情况下，eureka客户端配置为与同一区域中的服务器通信更改在运行时在registryFetchIntervalSeconds指定的下一个注册表提取周期中有效 eureka.client.property-resolver eureka.client.proxy-host 获取代理主机到eureka服务器（如果有的话）。 eureka.client.proxy-password 获取代理密码（如果有）。 eureka.client.proxy-port 获取代理端口到eureka服务器（如果有的话）。 eureka.client.proxy-user-name 获取代理用户名（如果有）。 eureka.client.region us-east-1 获取此实例所在的区域（用于AWS数据中心）。 eureka.client.register-with-eureka true 指示此实例是否应将其信息注册到eureka服务器以供其他人发现。在某些情况下，您不希望发现实例，而您只想发现其他实例。 eureka.client.registry-fetch-interval-seconds 30 指示从eureka服务器获取注册表信息的频率（以秒为单位）。 eureka.client.registry-refresh-single-vip-address 指示客户端是否只对单个VIP的注册表信息感兴趣。 eureka.client.service-url 可用性区域映射到与eureka服务器通信的完全限定URL的列表。每个值可以是单个URL或逗号分隔的替代位置列表。通常，尤里卡服务器URL携带协议，主机，端口，上下文和版本信息（如果有的话）。示例：http : //ec2-256-156-243-129.compute-1.amazonaws.com : 7001/eureka/更改在运行时在eurekaServiceUrlPollIntervalSeconds指定的下一个服务网址刷新周期中有效。 eureka.client.transport eureka.client.use-dns-for-fetching-service-urls false 指示eureka客户端是否应该使用DNS机制来获取要与之通信的eureka服务器列表。当DNS名称更新为具有其他服务器时，该信息将在eureka客户端轮询该eurkaServiceUrlPollIntervalSeconds中指定的信息之后立即使用。或者，服务urls可以返回serviceUrls，但用户应该实现自己的机制来返回更新的列表，以防发生更改。更改在运行时有效。 eureka.dashboard.enabled true 标志以启用Eureka仪表板。默认值为true。 eureka.dashboard.path / 到Eureka仪表板（相对于servlet路径）的路径。默认为“/”。 eureka.instance.a-s-g-name 获取与此实例关联的AWS自动缩放组名称。该信息在AWS环境中专门用于在实例启动后自动将实例停止运行，并且已将其禁用。 eureka.instance.app-group-name 获取要在eureka中注册的应用程序组的名称。 eureka.instance.appname unknown 获取要在eureka注册的应用程序的名称。 eureka.instance.data-center-info 返回此实例部署的数据中心。如果实例部署在AWS中，则此信息用于获取一些AWS特定实例信息。 eureka.instance.default-address-resolution-order [] eureka.instance.environment eureka.instance.health-check-url 获取此实例的绝对运行状况检查页面URL。如果运行状况检查页面驻留在与eureka通话的同一个实例中，用户可以提供healthCheckUrlPath，否则在实例是其他服务器的代理的情况下，用户可以提供完整的URL。如果提供完整的URL，则优先。它通常用于根据实例的健康状况做出有根据的决策 - 例如，它可用于确定是否继续部署到整个场，或者停止部署而不会造成进一步的损坏。完整的URL应遵循格式http：// $ {eureka.hostname}：7001 /其中值$ {eureka.hostname}在运行时被替换。 eureka.instance.health-check-url-path /health 获取此实例的相对运行状况检查URL路径。然后，健康检查页面URL由主机名和通信类型构建，如securePort和nonSecurePort中指定的安全或不安全。它通常用于根据实例的健康状况做出有根据的决策 - 例如，它可用于确定是否继续部署到整个场，或者停止部署而不会造成进一步的损坏。 eureka.instance.home-page-url 获取此实例的绝对主页URL。如果主页位于与eureka通话的同一个实例中，用户可以提供homePageUrlPath，否则在实例是其他服务器的代理的情况下，用户可以提供完整的URL。如果提供完整的URL，则优先。它通常用于其他服务的信息目的，以将其用作着陆页。完整的URL应遵循格式http：// $ {eureka.hostname}：7001 / 其中值$ {eureka.hostname}在运行时被替换。 eureka.instance.home-page-url-path / 获取此实例的相对主页URL路径。然后，主页URL由hostName和通信类型构建 - 安全或不安全。它通常用于其他服务的信息目的，以将其用作着陆页。 eureka.instance.host-info eureka.instance.hostname 如果可以在配置时确定主机名（否则将从操作系统原语中猜出）。 eureka.instance.inet-utils eureka.instance.initial-status 使用rmeote Eureka服务器注册的初始状态。 eureka.instance.instance-enabled-onit false 指示在eureka注册后，实例是否应该启用流量。有时候，应用程序可能需要做一些预处理，才能准备好交通。 eureka.instance.instance-id 获取要在eureka注册的此实例的唯一ID（在appName的范围内）。 eureka.instance.ip-address 获取实例的IPAdress。此信息仅用于学术目的，因为来自其他实例的通信主要发生在使用{@link #getHostName（boolean）}中提供的信息。 eureka.instance.lease-expiration-duration-in-seconds 90 指示eureka服务器在接收到最后一个心跳之后等待的时间（秒），然后才能从此视图中删除此实例，并禁止此实例的流量。将此值设置得太长可能意味着流量可以路由到实例，即使实例不存在。设置此值太小可能意味着，由于临时网络故障，实例可能会被取消流量。此值将设置为至少高于leaseRenewalIntervalInSeconds中指定的值。 eureka.instance.lease-renewal-interval-in-seconds 30 指示eureka客户端需要向eureka服务器发送心跳以指示它仍然存在的频率（以秒为单位）。如果在leaseExpirationDurationInSeconds中指定的时间段内未收到心跳线，则eureka服务器将从其视图中删除该实例，因此不允许此实例的流量。请注意，如果该实例实现HealthCheckCallback，然后决定使其本身不可用，则该实例仍然可能无法访问流量。 eureka.instance.metadata-map 获取与此实例关联的元数据名称/值对。该信息发送到eureka服务器，可以被其他实例使用。 eureka.instance.namespace eureka 获取用于查找属性的命名空间。忽略Spring Cloud。 eureka.instance.non-secure-port 80 获取实例应该接收流量的非安全端口。 eureka.instance.non-secure-port-enabled true 指示是否应启用非安全端口的流量。 eureka.instance.prefer-ip-address false 标示说，当猜测主机名时，服务器的IP地址应该在操作系统报告的主机名中使用。 eureka.instance.registry.default-open-for-traffic-count 1 用于确定租赁期间取消的价值，独立时默认为1。应该为对等复制的eurekas设置为0 eureka.instance.registry.expected-number-of-renews-per-min 1 eureka.instance.secure-health-check-url 获取此实例的绝对安全运行状况检查页面URL。如果健康检查页面驻留在与eureka通话的同一个实例中，用户可以提供secureHealthCheckUrl，否则在实例是其他服务器的代理的情况下，用户可以提供完整的URL。如果提供完整的URL，则优先。它通常用于根据实例的健康状况做出有根据的决策 - 例如，它可用于确定是否继续部署到整个场，或者停止部署而不会造成进一步的损坏。完整的URL应遵循格式http：// $ {eureka.hostname}：7001 /其中值$ {eureka.hostname}在运行时被替换。 eureka.instance.secure-port 443 获取实例应该接收流量的安全端口。 eureka.instance.secure-port-enabled false 指示安全端口是否应启用流量。 eureka.instance.secure-virtual-host-name unknown 获取为此实例定义的安全虚拟主机名。这通常是其他实例通过使用安全虚拟主机名找到此实例的方式。这与完全限定域名相似，您的服务的用户将需要找到此实例。 eureka.instance.status-page-url 获取此实例的绝对状态页面URL路径。如果状态页面驻留在与eureka通话的同一个实例中，用户可以提供statusPageUrlPath，否则在实例是其他服务器的代理的情况下，用户可以提供完整的URL。如果提供完整的URL，则优先。它通常用于其他服务的信息目的，以查找此实例的状态。用户可以提供一个简单的HTML来指示实例的当前状态。 eureka.instance.status-page-url-path /info 获取此实例的相对状态页面URL路径。然后，状态页面URL由安全端口和非安全端口中指定的hostName和通信类型构建 - 安全或不安全。它通常用于其他服务的信息目的，以查找此实例的状态。用户可以提供一个简单的HTML来指示实例的当前状态。 eureka.instance.virtual-host-name unknown 获取为此实例定义的虚拟主机名。这通常是其他实例通过使用虚拟主机名找到此实例的方式。这与完全限定域名相似，您的服务的用户将需要找到此实例。 eureka.server.a-s-g-cache-expiry-timeout-ms 0 eureka.server.a-s-g-query-timeout-ms 300 eureka.server.a-s-g-update-interval-ms 0 eureka.server.a-w-s-access-id eureka.server.a-w-s-secret-key eureka.server.batch-replication false eureka.server.binding-strategy eureka.server.delta-retention-timer-interval-in-ms 0 eureka.server.disable-delta false eureka.server.disable-delta-for-remote-regions false eureka.server.disable-transparent-fallback-to-other-region false eureka.server.e-i-p-bind-rebind-retries 3 eureka.server.e-i-p-binding-retry-interval-ms 0 eureka.server.e-i-p-binding-retry-interval-ms-when-unbound 0 eureka.server.enable-replicated-request-compression false eureka.server.enable-self-preservation true eureka.server.eviction-interval-timer-in-ms 0 eureka.server.g-zip-content-from-remote-region true eureka.server.json-codec-name eureka.server.list-auto-scaling-groups-role-name ListAutoScalingGroups eureka.server.log-identity-headers true eureka.server.max-elements-in-peer-replication-pool 10000 eureka.server.max-elements-in-status-replication-pool 10000 eureka.server.max-idle-thread-age-in-minutes-for-peer-replication 15 eureka.server.max-idle-thread-in-minutes-age-for-status-replication 10 eureka.server.max-threads-for-peer-replication 20 eureka.server.max-threads-for-status-replication 1 eureka.server.max-time-for-replication 30000 eureka.server.min-threads-for-peer-replication 5 eureka.server.min-threads-for-status-replication 1 eureka.server.number-of-replication-retries 5 eureka.server.peer-eureka-nodes-update-interval-ms 0 eureka.server.peer-eureka-status-refresh-time-interval-ms 0 eureka.server.peer-node-connect-timeout-ms 200 eureka.server.peer-node-connection-idle-timeout-seconds 30 eureka.server.peer-node-read-timeout-ms 200 eureka.server.peer-node-total-connections 1000 eureka.server.peer-node-total-connections-per-host 500 eureka.server.prime-aws-replica-connections true eureka.server.property-resolver eureka.server.rate-limiter-burst-size 10 eureka.server.rate-limiter-enabled false eureka.server.rate-limiter-full-fetch-average-rate 100 eureka.server.rate-limiter-privileged-clients eureka.server.rate-limiter-registry-fetch-average-rate 500 eureka.server.rate-limiter-throttle-standard-clients false eureka.server.registry-sync-retries 0 eureka.server.registry-sync-retry-wait-ms 0 eureka.server.remote-region-app-whitelist eureka.server.remote-region-connect-timeout-ms 1000 eureka.server.remote-region-connection-idle-timeout-seconds 30 eureka.server.remote-region-fetch-thread-pool-size 20 eureka.server.remote-region-read-timeout-ms 1000 eureka.server.remote-region-registry-fetch-interval 30 eureka.server.remote-region-total-connections 1000 eureka.server.remote-region-total-connections-per-host 500 eureka.server.remote-region-trust-store eureka.server.remote-region-trust-store-password changeit eureka.server.remote-region-urls eureka.server.remote-region-urls-with-name eureka.server.renewal-percent-threshold 0.85 eureka.server.renewal-threshold-update-interval-ms 0 eureka.server.response-cache-auto-expiration-in-seconds 180 eureka.server.response-cache-update-interval-ms 0 eureka.server.retention-time-in-m-s-in-delta-queue 0 eureka.server.route53-bind-rebind-retries 3 eureka.server.route53-binding-retry-interval-ms 0 eureka.server.route53-domain-t-t-l 30 eureka.server.sync-when-timestamp-differs true eureka.server.use-read-only-response-cache true eureka.server.wait-time-in-ms-when-sync-empty 0 eureka.server.xml-codec-name feign.compression.request.mime-types [text/xml, application/xml, application/json] 支持的MIME类型列表。 feign.compression.request.min-request-size 2048 最小阈值内容大小。 health.config.enabled false 标记以指示应安装配置服务器运行状况指示器。 health.config.time-to-live 0 生成缓存结果的时间，以毫秒为单位。默认300000（5分钟）。 hystrix.metrics.enabled true 启用Hystrix指标轮询。默认为true。 hystrix.metrics.polling-interval-ms 2000 后续轮询度量之间的间隔。默认为2000 ms。 management.health.refresh.enabled true 启用刷新范围的运行状况端点。 management.health.zookeeper.enabled true 启用zookeeper的健康端点。 netflix.atlas.batch-size 10000 netflix.atlas.enabled true netflix.atlas.uri netflix.metrics.servo.cache-warning-threshold 1000 当ServoMonitorCache达到这个大小时，会记录一个警告。如果您在RestTemplate url中使用字符串连接，这将非常有用。 netflix.metrics.servo.registry-class com.netflix.servo.BasicMonitorRegistry Servo使用的监视器注册表的完全限定类名。 proxy.auth.load-balanced proxy.auth.routes 每个路由的认证策略。 spring.cloud.bus.ack.destination-service 想要听ack的服务。默认为null（表示所有服务）。 spring.cloud.bus.ack.enabled true 标志关闭acks（默认打开）。 spring.cloud.bus.destination springCloudBus 名称Spring Cloud消息的流目的地。 spring.cloud.bus.enabled true 标志表示总线已启用。 spring.cloud.bus.env.enabled true 标志关闭环境变化事件（默认为开）。 spring.cloud.bus.refresh.enabled true 关闭刷新事件的标志（默认为开）。 spring.cloud.bus.trace.enabled false 打开acks跟踪的标志（默认关闭）。 spring.cloud.cloudfoundry.discovery.enabled true 标记以指示启用发现。 spring.cloud.cloudfoundry.discovery.heartbeat-frequency 5000 心跳次数以毫秒为单位的频率。客户端将轮询该频率并广播服务ID列表。 spring.cloud.cloudfoundry.discovery.org 要进行身份验证的组织名称（默认为用户默认值）。 spring.cloud.cloudfoundry.discovery.password 用户验证和获取令牌的密码。 spring.cloud.cloudfoundry.discovery.space 要进行身份验证的空间名称（默认为用户默认值）。 spring.cloud.cloudfoundry.discovery.url https://api.run.pivotal.io Cloud Foundry API（云控制器）的URL。 spring.cloud.cloudfoundry.discovery.username 验证用户名（通常是电子邮件地址）。 spring.cloud.config.allow-override true 标记以指示可以使用{@link #isSystemPropertiesOverride（）systemPropertiesOverride}。设置为false以防止用户意外更改默认值。默认值为true。 spring.cloud.config.authorization 客户端使用的授权令牌连接到服务器。 spring.cloud.config.discovery.enabled false 标记以指示启用配置服务器发现（配置服务器URL将通过发现查找）。 spring.cloud.config.discovery.service-id configserver 服务ID来定位配置服务器。 spring.cloud.config.enabled true 标记说远程配置启用。默认为true; spring.cloud.config.fail-fast false 标记表示无法连接到服务器是致命的（默认为false）。 spring.cloud.config.label 用于拉取远程配置属性的标签名称。默认设置在服务器上（通常是基于git的服务器的“主”）。 spring.cloud.config.name 用于获取远程属性的应用程序名称。 spring.cloud.config.override-none false 标志表示当{@link #setAllowOverride（boolean）allowOverride}为true时，外部属性应该采用最低优先级，并且不覆盖任何现有的属性源（包括本地配置文件）。默认为false。 spring.cloud.config.override-system-properties true 标记以指示外部属性应覆盖系统属性。默认值为true。 spring.cloud.config.password 联系远程服务器时使用的密码（HTTP Basic）。 spring.cloud.config.profile default 获取远程配置时使用的默认配置文件（逗号分隔）。默认为“默认”。 spring.cloud.config.retry.initial-interval 1000 初始重试间隔（以毫秒为单位）。 spring.cloud.config.retry.max-attempts 6 最大尝试次数。 spring.cloud.config.retry.max-interval 2000 退避的最大间隔 spring.cloud.config.retry.multiplier 1.1 下一个间隔的乘数。 spring.cloud.config.server.bootstrap false 表示配置服务器应使用远程存储库中的属性初始化其自己的环境。默认情况下关闭，因为它会延迟启动，但在将服务器嵌入到另一个应用程序中时很有用。 spring.cloud.config.server.default-application-name application 传入请求没有特定的默认应用程序名称。 spring.cloud.config.server.default-label 传入请求没有特定标签时的默认存储库标签。 spring.cloud.config.server.default-profile default 传入请求没有特定的默认应用程序配置文件时。 spring.cloud.config.server.encrypt.enabled true 在发送给客户端之前启用对环境属性的解密。 spring.cloud.config.server.git.basedir 库的本地工作副本的基本目录。 spring.cloud.config.server.git.clone-on-start 标记以表明应该在启动时克隆存储库（不是按需）。通常会导致启动速度较慢，但第一次查询更快。 spring.cloud.config.server.git.default-label spring.cloud.config.server.git.environment spring.cloud.config.server.git.force-pull 标记表示存储库应该强制拉。如果真的丢弃任何本地更改并从远程存储库获取。 spring.cloud.config.server.git.git-factory spring.cloud.config.server.git.password 使用远程存储库验证密码。 spring.cloud.config.server.git.repos 存储库标识符映射到位置和其他属性。 spring.cloud.config.server.git.search-paths 在本地工作副本中使用的搜索路径。默认情况下只搜索根。 spring.cloud.config.server.git.timeout 用于获取HTTP或SSH连接的超时（以秒为单位）（如果适用）。默认5秒。 spring.cloud.config.server.git.uri 远程存储库的URI。 spring.cloud.config.server.git.username 用于远程存储库的身份验证用户名。 spring.cloud.config.server.health.repositories spring.cloud.config.server.native.fail-on-error false 标识以确定在解密期间如何处理异常（默认为false）。 spring.cloud.config.server.native.search-locations [] 搜索配置文件的位置。默认与Spring Boot应用程序相同，因此[classpath：/，classpath：/ config /，file：./，file：./ config /]。 spring.cloud.config.server.native.version 为本地存储库报告的版本字符串 spring.cloud.config.server.overrides 无条件发送给所有客户的资源的额外地图。 spring.cloud.config.server.prefix 配置资源路径的前缀（默认为空）。当您不想更改上下文路径或servlet路径时嵌入其他应用程序时很有用。 spring.cloud.config.server.strip-document-from-yaml true 标记为指示作为文本或集合（而不是映射）的YAML文档应以“本机”形式返回。 spring.cloud.config.server.svn.basedir 库的本地工作副本的基本目录。 spring.cloud.config.server.svn.default-label trunk 用于环境属性请求的默认标签。 spring.cloud.config.server.svn.environment spring.cloud.config.server.svn.password 使用远程存储库验证密码。 spring.cloud.config.server.svn.search-paths 在本地工作副本中使用的搜索路径。默认情况下只搜索根。 spring.cloud.config.server.svn.uri 远程存储库的URI。 spring.cloud.config.server.svn.username 用于远程存储库的身份验证用户名。 spring.cloud.config.token 安全令牌通过到底层环境库。 spring.cloud.config.uri http://localhost:8888 远程服务器的URI（默认http：// localhost：8888）。 spring.cloud.config.username 联系远程服务器时使用的用户名（HTTP Basic）。 spring.cloud.consul.config.acl-token spring.cloud.consul.config.data-key data 如果格式为Format.PROPERTIES或Format.YAML，则使用以下字段来查找协调配置。 spring.cloud.consul.config.default-context application spring.cloud.consul.config.enabled true spring.cloud.consul.config.fail-fast true 在配置查找期间抛出异常，如果为true，否则为日志警告。 spring.cloud.consul.config.format spring.cloud.consul.config.prefix config spring.cloud.consul.config.profile-separator , spring.cloud.consul.config.watch.delay 1000 手表的固定延迟的价值在毫秒。默认为1000。 spring.cloud.consul.config.watch.enabled true 如果手表启用 默认为true。 spring.cloud.consul.config.watch.wait-time 55 等待（或阻止）观看查询的秒数，默认为55.需要小于默认的ConsulClient（默认为60）。要增加ConsulClient超时，使用自定义的HttpClient创建一个带有自定义ConsulRawClient的ConsulClient bean。 spring.cloud.consul.discovery.acl-token spring.cloud.consul.discovery.catalog-services-watch-delay 10 spring.cloud.consul.discovery.catalog-services-watch-timeout 2 spring.cloud.consul.discovery.default-query-tag 如果没有在serverListQueryTags中列出，请在服务列表中查询标签。 spring.cloud.consul.discovery.default-zone-metadata-name zone 服务实例区域来自元数据。这允许更改元数据标签名称。 spring.cloud.consul.discovery.enabled true 是否启用服务发现？ spring.cloud.consul.discovery.fail-fast true 在服务注册期间抛出异常，如果为true，否则，记录警告（默认为true）。 spring.cloud.consul.discovery.health-check-interval 10s 执行健康检查的频率（例如10s） spring.cloud.consul.discovery.health-check-path /health 调用健康检查的备用服务器路径 spring.cloud.consul.discovery.health-check-timeout 健康检查超时（例如10s） spring.cloud.consul.discovery.health-check-url 自定义健康检查网址覆盖默认值 spring.cloud.consul.discovery.heartbeat.enabled false spring.cloud.consul.discovery.heartbeat.heartbeat-interval spring.cloud.consul.discovery.heartbeat.interval-ratio spring.cloud.consul.discovery.heartbeat.ttl-unit s spring.cloud.consul.discovery.heartbeat.ttl-value 30 spring.cloud.consul.discovery.host-info spring.cloud.consul.discovery.hostname 访问服务器时使用的主机名 spring.cloud.consul.discovery.instance-id 唯一的服务实例ID spring.cloud.consul.discovery.instance-zone 服务实例区 spring.cloud.consul.discovery.ip-address 访问服务时使用的IP地址（还必须设置preferIpAddress才能使用） spring.cloud.consul.discovery.lifecycle.enabled true spring.cloud.consul.discovery.management-port 端口注册管理服务（默认为管理端口） spring.cloud.consul.discovery.management-suffix management 注册管理服务时使用后缀 spring.cloud.consul.discovery.management-tags 注册管理服务时使用的标签 spring.cloud.consul.discovery.port 端口注册服务（默认为侦听端口） spring.cloud.consul.discovery.prefer-agent-address false 我们将如何确定使用地址的来源 spring.cloud.consul.discovery.prefer-ip-address false 在注册时使用ip地址而不是主机名 spring.cloud.consul.discovery.query-passing false 将“pass”参数添加到/ v1 / health / service / serviceName。这会将健康检查推送到服务器。 spring.cloud.consul.discovery.register true 注册为领事服务。 spring.cloud.consul.discovery.register-health-check true 注册领事健康检查。在开发服务期间有用。 spring.cloud.consul.discovery.scheme http 是否注册http或https服务 spring.cloud.consul.discovery.server-list-query-tags 服务器列表中要查询的serviceId的→标签的映射。这允许通过单个标签过滤服务。 spring.cloud.consul.discovery.service-name 服务名称 spring.cloud.consul.discovery.tags 注册服务时使用的标签 spring.cloud.consul.enabled true 启用了spring cloud consul spring.cloud.consul.host localhost Consul代理主机名。默认为“localhost”。 spring.cloud.consul.port 8500 Consul代理端口。默认为’8500’。 spring.cloud.consul.retry.initial-interval 1000 初始重试间隔（以毫秒为单位）。 spring.cloud.consul.retry.max-attempts 6 最大尝试次数。 spring.cloud.consul.retry.max-interval 2000 退避的最大间隔 spring.cloud.consul.retry.multiplier 1.1 下一个间隔的乘数。 spring.cloud.hypermedia.refresh.fixed-delay 5000 spring.cloud.hypermedia.refresh.initial-delay 10000 spring.cloud.inetutils.default-hostname localhost 默认主机名。用于发生错误的情况。 spring.cloud.inetutils.default-ip-address 127.0.0.1 默认ipaddress。用于发生错误的情况。 spring.cloud.inetutils.ignored-interfaces 将被忽略的网络接口的Java正则表达式列表。 spring.cloud.inetutils.preferred-networks 将被忽略的网络地址的Java正则表达式列表。 spring.cloud.inetutils.timeout-seconds 1 计算主机名的超时秒数。 spring.cloud.inetutils.use-only-site-local-interfaces false 仅使用与站点本地地址的接口。有关详细信息，请参阅{@link InetAddress＃isSiteLocalAddress（）}。 spring.cloud.loadbalancer.retry.enabled false spring.cloud.stream.binders spring.cloud.stream.bindings spring.cloud.stream.consul.binder.event-timeout 5 spring.cloud.stream.consumer-defaults spring.cloud.stream.default-binder spring.cloud.stream.dynamic-destinations [] spring.cloud.stream.ignore-unknown-properties true spring.cloud.stream.instance-count 1 spring.cloud.stream.instance-index 0 spring.cloud.stream.producer-defaults spring.cloud.stream.rabbit.binder.admin-adresses [] spring.cloud.stream.rabbit.binder.compression-level 0 spring.cloud.stream.rabbit.binder.nodes [] spring.cloud.stream.rabbit.bindings spring.cloud.zookeeper.base-sleep-time-ms 50 重试之间等待的初始时间 spring.cloud.zookeeper.block-until-connected-unit 与Zookeeper连接时阻止的时间单位 spring.cloud.zookeeper.block-until-connected-wait 10 等待时间阻止连接到Zookeeper spring.cloud.zookeeper.connect-string localhost:2181 连接字符串到Zookeeper集群 spring.cloud.zookeeper.default-health-endpoint 将检查以验证依赖关系是否存在的默认运行状况端点 spring.cloud.zookeeper.dependencies 将别名映射到ZookeeperDependency。从Ribbon的角度看，别名实际上是serviceID，因为Ribbon不能接受serviceID中的嵌套结构 spring.cloud.zookeeper.dependency-configurations spring.cloud.zookeeper.dependency-names spring.cloud.zookeeper.discovery.enabled true spring.cloud.zookeeper.discovery.instance-host 预定义的主机可以在Zookeeper中注册自己的服务。对应于URI规范中的{code address}。 spring.cloud.zookeeper.discovery.instance-port 端口注册服务（默认为侦听端口） spring.cloud.zookeeper.discovery.metadata 获取与此实例关联的元数据名称/值对。该信息被发送到动物管理员，可以被其他实例使用。 spring.cloud.zookeeper.discovery.register true 在动物园管理员中注册为服务。 spring.cloud.zookeeper.discovery.root /services 所有实例都被注册的根Zookeeper文件夹 spring.cloud.zookeeper.discovery.uri-spec {scheme}://{address}:{port} 在Zookeeper服务注册期间解决的URI规范 spring.cloud.zookeeper.enabled true 启用了Zookeeper spring.cloud.zookeeper.max-retries 10 最多重试次数 spring.cloud.zookeeper.max-sleep-ms 500 每次重试最多可以以ms为单位睡眠 spring.cloud.zookeeper.prefix 将应用于所有Zookeeper依赖关系的路径的公共前缀 spring.integration.poller.fixed-delay 1000 修复默认轮询器的延迟。 spring.integration.poller.max-messages-per-poll 1 默认轮询器每轮询的最大消息。 spring.sleuth.integration.enabled true 启用Spring Integration侦察器。 spring.sleuth.integration.patterns * 一组简单的模式，通道名称将与之匹配。默认值为*（所有通道）。请参阅org.springframework.util.PatternMatchUtils.simpleMatch（String，String）。 spring.sleuth.keys.async.class-name-key class 具有使用{@code @Async} 注释的方法的类的简单名称，从异步进程开始@see org.springframework.scheduling.annotation.Async spring.sleuth.keys.async.method-name-key method 使用{@code @Async} 注释的方法的名称@see org.springframework.scheduling.annotation.Async spring.sleuth.keys.async.prefix 如果标题名称被添加为标签，则使用前缀。 spring.sleuth.keys.async.thread-name-key thread 执行异步方法的线程的名称@see org.springframework.scheduling.annotation.Async spring.sleuth.keys.http.headers 额外的标题应该作为标签添加，如果它们存在。如果头值是多值的，则标签值将是逗号分隔的单引号列表。 spring.sleuth.keys.http.host http.host URL或主机头的域部分。示例：“mybucket.s3.amazonaws.com”。用于过滤主机而不是ip地址。 spring.sleuth.keys.http.method http.method HTTP方法或动词，如“GET”或“POST”。用于过滤http路由。 spring.sleuth.keys.http.path http.path 绝对的http路径，没有任何查询参数。示例：“/ objects / abcd-ff”。用于过滤http路由，可以与zipkin v1一起移植。在zipkin v1中，只支持等于过滤器。删除查询参数使不同URI的数量减少。例如，无论查询行中编码的签名参数如何，都可以查询相同的资源。这不会降低HTTP单路由的基数。例如，通常将路由表示为http URI模板，如“/ resource / {resource_id}”。在只有等量查询可用的系统中，如果实际请求是“/ resource / abcd-ff” ，则搜索 {@code http.uri = / resource}将不匹配。历史记录：这通常在拉链中被表示为“http.uri”，但最常见的只是一条路。 spring.sleuth.keys.http.prefix http. 如果标题名称被添加为标签，则使用前缀。 spring.sleuth.keys.http.request-size http.request.size 非空HTTP请求体的大小（以字节为单位）。防爆。”16384”大上传可能会超出限制或直接影响延迟。 spring.sleuth.keys.http.response-size http.response.size 非空HTTP响应体的大小（以字节为单位）。防爆。”16384”大量下载可能会超出限制或直接影响延迟。 spring.sleuth.keys.http.status-code http.status_code 当HTTP响应代码不在2xx范围内。防爆。“503”用于过滤错误状态。2xx范围不会被记录，因为成功代码对延迟故障排除不那么有趣。省略节省每个跨度至少20个字节。 spring.sleuth.keys.http.url http.url 整个URL，包括方案，主机和查询参数（如果可用）。防爆。“https://mybucket.s3.amazonaws.com/objects/abcd-ff?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256...”结合{@link #method }，您可以了解完全限定的请求行。这是可选的，因为它可能包括私人数据或相当长的长度。 spring.sleuth.keys.hystrix.command-group commandGroup 命令组的名称 Hystrix使用命令组密钥将诸如报告，警报，仪表板或团队/库所有权的命令分组在一起。@see com.netflix.hystrix.HystrixCommandGroupKey spring.sleuth.keys.hystrix.command-key commandKey 命令键的名称 描述给定命令的名称。代表用于监视，断路器，指标发布，缓存和其他此类用途的{@link com.netflix.hystrix.HystrixCommand}的关键。@see com.netflix.hystrix.HystrixCommandKey spring.sleuth.keys.hystrix.prefix 如果标题名称被添加为标签，则使用前缀。 spring.sleuth.keys.hystrix.thread-pool-key threadPoolKey 线程池密钥的名称。线程池密钥表示用于监视，指标发布，缓存和其他此类用途的{@link com.netflix.hystrix.HystrixThreadPool}。甲{@link com.netflix.hystrix.HystrixCommand}与单个相关的{@link com.netflix.hystrix.HystrixThreadPool}如由检索{@link com.netflix.hystrix.HystrixThreadPoolKey}注入它，或者它的默认值使用{@link com.netflix.hystrix.HystrixCommandGroupKey}创建的创建它。@see com.netflix.hystrix.HystrixThreadPoolKey spring.sleuth.keys.message.headers 额外的标题应该作为标签添加，如果它们存在。如果头值不是String，它将使用其toString（）方法转换为String。 spring.sleuth.keys.message.payload.size message/payload-size 估计有效载荷的大小（如果有的话）。 spring.sleuth.keys.message.payload.type message/payload-type 有效载荷的类型。 spring.sleuth.keys.message.prefix message/ 如果标题名称被添加为标签，则使用前缀。 spring.sleuth.keys.mvc.controller-class mvc.controller.class 小写，连字符分隔处理请求的类的名称。防爆。名为“BookController”的类将导致“book-controller”标签值。 spring.sleuth.keys.mvc.controller-method mvc.controller.method 小写，连字符分隔处理请求的类的名称。防爆。名为“listOfBooks”的方法将导致“list-of-books”标签值。 spring.sleuth.metric.span.accepted-name counter.span.accepted spring.sleuth.metric.span.dropped-name counter.span.dropped spring.sleuth.sampler.percentage 0.1 应采样的请求百分比。例如1.0 - 100％的请求应该被抽样。精度仅为全数（即不支持0.1％的痕迹）。 spring.sleuth.trace-id128 false 如果为true，则生成128位跟踪ID，而不是64位跟踪ID。 zuul.add-host-header false 标识以确定代理是否转发主机头。 zuul.add-proxy-headers true 标识以确定代理是否添加X-Forwarded- *标头。 zuul.host.max-per-route-connections 20 单个路由可以使用的最大连接数。 zuul.host.max-total-connections 200 代理可以容纳到后端的总连接数。 zuul.ignore-local-service true zuul.ignore-security-headers true 标记说，如果spring security在类路径上，则将SECURITY_HEADERS添加到忽略的标头。通过将ignoreSecurityHeaders设置为false，我们可以关闭此默认行为。这应该与禁用默认的spring security标头一起使用，请参见https://docs.spring.io/spring-security/site/docs/current/reference/html/headers.html#default-security-headers zuul.ignored-headers HTTP标头的名称完全忽略（即将其从下游请求中删除，并将其从下游响应中删除）。 zuul.ignored-patterns zuul.ignored-services 一组服务名称不考虑代理自动。默认情况下，发现客户端中的所有服务都将被代理。 zuul.prefix 所有路由的公共前缀。 zuul.remove-semicolon-content true 标记说，可以删除超过第一个分号的路径元素。 zuul.retryable 默认情况下是否支持重试的标志（假设路由本身支持）。 zuul.ribbon-isolation-strategy zuul.routes 将路线名称映射到属性。 zuul.s-e-c-u-r-i-t-y-h-e-a-d-e-r-s 一般预期由Spring安全性添加的标头，因此如果代理和后端使用Spring保护，则通常会重复。默认情况下，如果存在Spring安全性，并且ignoreSecurityHeaders = true，它们将被添加到忽略的标头。 zuul.semaphore.max-semaphores 100 Hystrix的总信号量的最大数量。 zuul.sensitive-headers 不传递到下游请求的敏感标头列表。默认为通常包含用户凭据的“安全”标题集。如果下游服务是与代理相同的系统的一部分，那么从列表中删除它们是正确的，所以他们正在共享认证数据。如果在您自己的域之外使用物理URL，那么一般来说泄漏用户凭据将是一个坏主意。 zuul.servlet-path /zuul 安装Zuul作为servlet的路径（不是Spring MVC的一部分）。对于具有大型机构的请求，例如文件上传，servlet对于更高的内存效率更高。 zuul.ssl-hostname-validation-enabled true 标记以说明是否应验证ssl连接的主机名。默认值为true。这只应用于测试设置！ zuul.strip-prefix true 在转发之前标记是否从路径中删除前缀。 zuul.trace-request-body true 标记说可以跟踪请求机构。","categories":[],"tags":[]},{"title":"configuration in cloud","slug":"Java/spring/cloud/configuration","date":"2018-09-10T12:54:28.000Z","updated":"2018-09-12T02:57:27.000Z","comments":true,"path":"2018/09/10/Java/spring/cloud/configuration/","link":"","permalink":"http://io.stelawliet.top/2018/09/10/Java/spring/cloud/configuration/","excerpt":"","text":"springApplication123456789spring: application: name: eurekaServer profiles: dev---spring: application: name: eurekaServer2 profiles: pro embeddServletContainer default embedtomcat 12server: port: 10087 datasource default HikariCP 123456spring: datasource: driver-class-name: com.mysql.jdbc.Driver username: root password: 520 url: jdbc:mysql://localhost:3306/db_1?useSSL=false slf4j123456logging: level: sky: debugmybatis: configuration: log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl eurekaserver1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;&lt;/dependency&gt; 12345eureka: client:# register-with-eureka: false service-url: defaultZone: http://127.0.0.1:10086/eureka consumer1234567891011spring: application: name: user-consumeeureka: client: service-url: #配置要注册的eureka服务地址 defaultZone: http://127.0.0.1:10086/eureka instance: prefer-ip-address: true #eureka界面显示ip ip-address: 127.0.0.1 #设置ip","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"http://io.stelawliet.top/categories/java/spring/"}],"tags":[{"name":"config","slug":"config","permalink":"http://io.stelawliet.top/tags/config/"}]},{"title":"","slug":"Java/concurrent/内存可见性","date":"2018-09-10T05:20:24.000Z","updated":"2018-09-10T06:44:11.000Z","comments":true,"path":"2018/09/10/Java/concurrent/内存可见性/","link":"","permalink":"http://io.stelawliet.top/2018/09/10/Java/concurrent/内存可见性/","excerpt":"","text":"@http://www.threadworld.cn 什么叫内存可见性？什么叫寄存器可见性？数据在哪里存在呢？只在内存吗？不是的。数据在内存中存在，但是当用的时候会加载到CPU的寄存器里面。内存和寄存器是两个地方，从而出现了新的名词：内存可见性和寄存器可见性。 为什么叫内存可见性呢？感觉很奇怪的名字。其实，明白以下道理就不奇怪了：数据的流动过程是：内存-&gt;寄存器-&gt;计算器 很多时候，数据从内存地址读取到寄存器里面，后面的计算过程中CPU就一直使用寄存器里面的值，即是内存地址上的值发生变化，CPU也不知道，CPU此时就是井底之蛙，而变量此时可以称为：寄存器可见性。 但是当变量被volatile修饰之后，CPU就不再偷懒，只要用到数据，它都会越过寄存器，直接从内存中读取，然后再在计算器中计算，最后返回给内存，这个时候变量就不在寄存器里面停留，就当寄存器不存在一样，这就称为内存可见性。 一句话理解什么是happens-beforehttp://www.threadworld.cn/category/point20/) 在程序运行过程中，所有的变更会先在寄存器或本地cache中完成，然后才会被拷贝到主存以跨越内存栅栏，此种跨越序列或顺序称为happens-before。 注：happens-before本质是顺序，重点是跨越内存栅栏 通常情况下，写操作必须要happens-before读操作，即写线程需要在所有读线程跨越内存栅栏之前完成自己的跨越动作，其所做的变更才能对其他线程可见。 一句话理解内存屏障/内存栅栏本文从简单入手，简单不代表肤浅，技术都是从简单发展起来的，然后变得复杂，甚至都偏离了初衷。有的人瞧不起简单，可不是什么好事啊。 简单来说内存屏障（Memory Barrier，或内存栅栏，Memory Fence）就是从本地或工作内存到主存之间的拷贝动作。如下图： CPU.png 上面三种颜色的箭头，就是跨越内存栅栏。 在多线程并发过程中，仅当写操作线程先跨越内存栅栏而读线程后跨越内存栅栏的情况下，写操作线程所做的变更才对其他线程可见。","categories":[],"tags":[]},{"title":"","slug":"Java/spring/dubbo/dubbo config xml","date":"2018-09-05T14:50:06.000Z","updated":"2018-09-05T14:50:17.000Z","comments":true,"path":"2018/09/05/Java/spring/dubbo/dubbo config xml/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/Java/spring/dubbo/dubbo config xml/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"1TODO/dubbo-TODO","date":"2018-09-05T14:46:24.000Z","updated":"2018-09-05T14:50:18.000Z","comments":true,"path":"2018/09/05/1TODO/dubbo-TODO/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/1TODO/dubbo-TODO/","excerpt":"","text":"Dubbozookeeper install linux use xml config springBoot annotation xml dubbo level note","categories":[],"tags":[]},{"title":"zookeeper start","slug":"hadoop/zookeeper start","date":"2018-09-05T10:33:01.000Z","updated":"2018-09-05T10:37:00.000Z","comments":true,"path":"2018/09/05/hadoop/zookeeper start/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/hadoop/zookeeper start/","excerpt":"","text":"download### config初始化zookeeper配置文件 拷贝/usr/local/zookeeper/conf/zoo_sample.cfg","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"hadoop","slug":"java/hadoop","permalink":"http://io.stelawliet.top/categories/java/hadoop/"},{"name":"zookeeper","slug":"java/hadoop/zookeeper","permalink":"http://io.stelawliet.top/categories/java/hadoop/zookeeper/"}],"tags":[]},{"title":"","slug":"Untitled 1","date":"2018-09-05T10:32:23.000Z","updated":"2018-09-05T10:32:23.000Z","comments":true,"path":"2018/09/05/Untitled 1/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/Untitled 1/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"mac VMware config static ip","slug":"Linux/internet/mac VMware Fusion 配置ip","date":"2018-09-05T07:51:51.000Z","updated":"2018-09-05T09:01:46.000Z","comments":true,"path":"2018/09/05/Linux/internet/mac VMware Fusion 配置ip/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/Linux/internet/mac VMware Fusion 配置ip/","excerpt":"","text":"修改VMWare的vmnet8配置文件/Library/Preferences/VMware\\ Fusion/networking，指定获取IP为静态以及修改网段为自定义的网段，如下： VNET_8_DHCP 修改no VNET_8_HOSTONLY_SUBNET 修改自定义静态ip的网段 1234567891011121314VERSION=1,0answer VNET_1_DHCP yesanswer VNET_1_DHCP_CFG_HASH DC6DC8894F9A2260649847426857DB2CF4D1400Aanswer VNET_1_HOSTONLY_NETMASK 255.255.255.0answer VNET_1_HOSTONLY_SUBNET 172.16.42.0answer VNET_1_VIRTUAL_ADAPTER yesanswer VNET_8_DHCP noanswer VNET_8_DHCP_CFG_HASH 02F6BD981E3618908880467DD0B03C747B825E04answer VNET_8_HOSTONLY_NETMASK 255.255.255.0answer VNET_8_HOSTONLY_SUBNET 192.168.10.0answer VNET_8_NAT yesanswer VNET_8_VIRTUAL_ADAPTER yesadd_bridge_mapping en0 2add_bridge_mapping en6 3 修改网关 ➜ vim /Library/Preferences/VMware\\ Fusion/vmnet8/nat.conf 12345# [host]# NAT gateway addressip = 192.168.10.2netmask = 255.255.255.0 ➜ ifconfig 123456vmnet1: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500 ether 00:50:56:c0:00:01 inet 172.16.42.1 netmask 0xffffff00 broadcast 172.16.42.255vmnet8: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500 ether 00:50:56:c0:00:08 inet 192.168.10.1 netmask 0xffffff00 broadcast 192.168.10.255 vmnet1为host-only仅和mac连接 vmnet8为nat模式可以连外网,接下来修改linux的ip和这里的网段一样. vmware修改完毕 配置虚拟机Linux ➜ ~ vim /etc/sysconfig/network-scripts/ifcfg-ens33 123456789101112131415161718192021222324252627--- 192.168.10.233 ping statistics ---TYPE=\"Ethernet\"PROXY_METHOD=\"none\"#修改静态ip,BOOTPROTO=\"no\"或者\"static\"#BROWSER_ONLY=\"no\"BOOTPROTO=\"static\"#BOOTPROTO=\"dhcp\"DEFROUTE=\"yes\"IPV4_FAILURE_FATAL=\"no\"IPV6INIT=\"yes\"IPV6_AUTOCONF=\"yes\"IPV6_DEFROUTE=\"yes\"IPV6_FAILURE_FATAL=\"no\"IPV6_ADDR_GEN_MODE=\"stable-privacy\"NAME=\"ens33\"UUID=\"40acc1a8-41e1-4f37-905d-c608ce26d4cc\"DEVICE=\"ens33\"#开机自启ONBOOT=\"yes\"#网关和前面vmware设置的网关对应GATEWAY=192.168.10.2#设置相同网段IPADDR=192.168.10.233NETMASK=255.255.255.0#设置dnsDNS1=114.114.114.114\"/etc/sysconfig/network-scripts/ifcfg-ens33\" 20L, 417C","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"ip","slug":"linux/ip","permalink":"http://io.stelawliet.top/categories/linux/ip/"}],"tags":[{"name":"VMware","slug":"VMware","permalink":"http://io.stelawliet.top/tags/VMware/"},{"name":"ip","slug":"ip","permalink":"http://io.stelawliet.top/tags/ip/"}]},{"title":"","slug":"Linux/internet/centos ip","date":"2018-09-05T07:39:46.000Z","updated":"2018-09-05T07:42:56.000Z","comments":true,"path":"2018/09/05/Linux/internet/centos ip/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/Linux/internet/centos ip/","excerpt":"","text":"(以centos7为例)网络配置、查看ip地址、网关信息，DNS信息时间:2018-02-02 13:13来源:linux.it.net.cn 作者:IT(以centos7为例)网络配置、查看ip地址、网关信息，DNS信息 一、CentOS7网络配置相关文件： /etc/resolv.conf # DNS配置文件/etc/hosts #主机名到IP地址的映射 ,不该主机名基本不会动他。/etc/sysconfig/network #所有的网络接口和路由信息，网关只有最后一个有效。/etc/sysconfig/network-script/ifcfg- #每一个网络接口的配置信息 每一个网卡只能使用一个配置文件，当有多个配置文件时，后面读取的配置文件信息会覆盖前面的配置信息。所以，一个网卡最好只写一个配置文件。或者之设置一个文件开机自启动，同时/etc/sysconfig/network-script/ifcfg-中不要写网关信息，交给/etc/sysconfig/network来配置。 二、查看网卡名称 CentOS7最小化安装后是没有 ifconfig 命令的,所以没有办法通过 ifconfig 查看网卡相关配置信息的，这个时候通过新的ip 命令来查看网卡相关配。 [root@localhost~]# ip addr 或 ip addr show 通过 ip 命令加参数 addr 则是查看当前网卡的配置信息, 从下图中可以看出, 当前系统的 ens33 网卡并没有 ipv4 及 ipv6, 没有 ip地址 则只能说明一个问题, 当前linux系统是没有办法上网的,lo 这块网卡每一个系统中都会有, 这个称之为回环网卡,另一片就是我的网卡名:ens33. ip addr 三、CentOS7默认网卡接口配置文件 CentOS7默认网络接口文件存放于 /etc/sysconfig/network-scripts/ 目录下, 有于CentOS的发行及系统升级或许可能会存在网络接口名称与之前版本不一致的情况, 这也很容易理解, 网络接口名称在linux系统中它只是一个标志, 它并不能说明什么问题, 关键是这个网络接口文件的配置参数, 我当前CentOS7的网络接口名称是 ：eno16777736，配置文件是：ifcfg-eno16777736(上一步找到的网卡名：ens33，一般情况下配置文件默认是：ifcfg-网卡名，但我的不是。如果没有，随便新建一个也行，格式：ifcfg-XXX） [root@localhost ~]# cat /etc/sysconfig/network-scripts/ifcfg-eno16777736 通过 cat 查看CentOS7最小化安装默认网卡设备配置信息, 如下: TYPE=Ethernet # 网卡类型：为以太网PROXY_METHOD=none # 代理方式：关闭状态BROWSER_ONLY=no # 只是浏览器：否BOOTPROTO=dhcp # 网卡的引导协议：DHCP[中文名称: 动态主机配置协议]DEFROUTE=yes # 默认路由：是, 不明白的可以百度关键词 默认路由IPV4_FAILURE_FATAL=no # 是不开启IPV4致命错误检测：否IPV6INIT=yes # IPV6是否自动初始化: 是[不会有任何影响, 现在还没用到IPV6]IPV6_AUTOCONF=yes # IPV6是否自动配置：是[不会有任何影响, 现在还没用到IPV6]IPV6_DEFROUTE=yes # IPV6是否可以为默认路由：是[不会有任何影响, 现在还没用到IPV6]IPV6_FAILURE_FATAL=no # 是不开启IPV6致命错误检测：否IPV6_ADDR_GEN_MODE=stable-privacy # IPV6地址生成模型：stable-privacy [这只一种生成IPV6的策略]NAME=eno16777736 # 网络接口名称，即配置文件名后半部分。UUID=f47bde51-fa78-4f79-b68f-d5dd90cfc698 # 通用唯一识别码, 每一个网卡都会有, 不能重复, 否两台linux只有一台网卡可用DEVICE=ens33 # 网卡设备名称ONBOOT=no # 是否开机启动， 要想网卡开机就启动或通过 systemctl restart network控制网卡,必须设置为 yes 四、设置网络 （1）配置为：开机启动、动态获取ip方式（如果你在一个局域网中，如：连接了路由或在校园网中，并且你不知道网关等网络信息时采用此配置。）： 1、vi /etc/sysconfig/network-scripts/ifcfg-eno16777736 (不会vi请先百度)，按i进入插入模式，更改 下列各值,保存退出，如下： ONBOOT=yes #设置为开机启动 BOOTPROTO=dhcp # 网卡的引导协议：DHCP[动态主机配置协议] DEVICE=ens33 # 要配置的网卡名 2、重启网络服务： systemctl restart network 或者 service network restart #重启网络 动态ip到此结束。 （2）配置为：开机启动、静态ip： 先找到配置相关信息，比如我的信息如下： 网卡名：ens33 网络接口名：eno16777736 ip： 192.168.189.130 网关： 192.168.189.2 主 DNS：115.156.76.144 备用DNS:8.8.4.4 配置方式如下： 1)、 只通过一个网卡配置文件：/etc/sysconfig/network-script/ifcfg-来配置： 1、vi /etc/sysconfig/network-scripts/ifcfg-ens33，更改最后结果为： DEVICE=ens33 #要配置的网卡 ONBOOT=yes #开机自启动 BOOTPROTO=&quot;static&quot; #静态ip方式 IPADDR=192.168.189.130 # ipv4地址 PREFIX=24GATEWAY0=192.168.189.2 #设置网关 DNS1=115.156.76.144 #设置主DNS DNS2=8.8.4.4 #设置备用DNS 2、重启网络服务： systemctl restart network 或者 service network restart #重启网络 2)、应用全局配置文件配置 1、开启网络，再次设置网关（一般情况下重启电脑都会自动配置好网关） vi /etc/sysconfig/network ，将NETWORKING值设为yes,设置GATEWAY值为现在的网关，如下： NETWORKING=yes #表示系统是否使用网络，一般设置为yes。如果设为no，则不能使用网络。 HOSTNAME=centos #设置本机的主机名，这里设置的主机名要和/etc/hosts中设置的主机名对应 GATEWAY=192.168.189.2 #设置本机连接的网关的IP地址。 2、DNS配置 如果没有DNS服务就会出现无法解析域名的情况，如： ping www.baidu.com PING外网其它主机 解决方式一、打开 /etc/hosts 文件 [root@localhost ~]# vi /etc/hosts 输入IP与域名的对应记录, 保存退出。 修改hosts文件 解决方式二、域名无穷无尽，只能采用配置DNS方式解决域名解析问题，NDS配置文件如下： vi /etc/resolv.conf 添加如下内容： nameserver 115.156.76.144 #默认域名服务器 nameserver 8.8.8.8 #google域名服务器nameserver 8.8.4.4 #google域名服务 3、 设置网卡 vi /etc/sysconfig/network-scripts/ifcfg-ens33 (不会vi请先百度) 更改相关项的值如下： TYPE=Ethernet BOOTPROTO=static #启用静态IP地址，也可写成 none DEFROUTE=yes PEERDNS=yes PEERROUTES=yes IPV4_FAILURE_FATAL=no IPV6INIT=yes IPV6_AUTOCONF=yes IPV6_DEFROUTE=yes IPV6_PEERDNS=yes IPV6_PEERROUTES=yes IPV6_FAILURE_FATAL=no NAME=eno16777736 #图形界面选择网络接口时的名字，不使用网络图形化管理工具时可不写，名称随意。 DEVICE=ens33 #必须是网卡名，有可能和 网卡名：ifcfg-xxx不一样。 UUID=ae0965e7-22b9-45aa-8ec9-3f0a20a85d11 ONBOOT=yes #开启自动启用网络连接 IPADDR0=192.168.189.130 #设置IP地址 PREFIX=24 #设置子网掩码 或者使用 NETMASK=255.255.255.0 或 PREFIXO0=24 # GATEWAY0=192.168.189.2 #设置网关，此处为局部变量设置，它会覆盖/etc/sysconfig/network中的全局设置，不建议在此配置。 # DNS1=115.156.76.144 #设置主DNS，此处为局部变量设置，总的DNS=/etc/resolv.conf 中的全局设置+此处的局部设置，此处可写可不写。 # DNS2=8.8.4.4 #设置备用DNS，同上。 由于一般情况下我们用不到ipv6的地址等，所以可以把并重要的去掉，最终结果如下： DEVICE=ens33 ONBOOT=yes BOOTPROTO=&quot;static&quot; IPADDR=192.168.189.130 PREFIX=24 4、重启网络服务 ip link set ens33 down #ens33网卡名，每个人电脑不一样。 ip link set ens33 up systemctl restart network 或者 service network restart #重启网络 静态ip到此网络就算配置完成了。 五、安装 net-tools 工具包（不使用ifconfig命令可以不用安装，仅为学习所写） net-tools 工具包, 包含以下命令：arp, hostname, ifconfig, ipmaddr, iptunnel, mii-tool, nameif, netstat, plipconfig, rarp, route und slattach. 关于net-tools 更多的详情信息请参考:net-tools详情 如果没有安装net-tools 工具包，使用ifconfig命令会有如下结果： [root@localhost ~]# ifconfig command not found ifconfig找不到 , 通过: yum whatprovides package_name 来查找包名了, 比如现在要查找 ifconfig 这个命令, 具体包含在哪个包里就可以这么做: yum whatprovides ifconfig 找到是 net-tools 这个包，然后在安装此包： yum install -y net-tools 之后就可使用ifconfig命令了 ifconfig查看网卡配置信息 从上图可以看出： ip: 192.168.1.111子网掩码: 255.255.255.0广播地址：192.168.1.255六、补充命令 ip [选项] 操作对象{link|addr|route…} ip addr show # 显示网卡IP信息ip addr add 192.168.0.1/24 dev eth0 # 设置eth0网卡IP地址192.168.0.1ip addr del 192.168.0.1/24 dev eth0 # 删除eth0网卡IP地址ip link show # 显示网络接口信息ip link set eth0 up # 开启网卡ip link set eth0 down # 关闭网卡ip link set eth0 promisc on # 开启网卡的混合模式ip link set eth0 promisc offi # 关闭网卡的混个模式ip link set eth0 txqueuelen 1200 # 设置网卡队列长度ip link set eth0 mtu 1400 # 设置网卡最大传输单元#ip route show 或 ip route list 或 route -n # 查看路由(网关)信息 ip route add 192.168.4.0/24 via 192.168.0.254 dev eth0 # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口ip route add default via 192.168.0.254 dev eth0 # 设置默认网关为192.168.0.254ip route del 192.168.4.0/24 # 删除192.168.4.0网段的网关ip route del default # 删除默认路由#查看NDS服务器地址，使用nslookup命令，输入命令： 比如：nslookup www.baidu.com","categories":[],"tags":[]},{"title":"","slug":"Linux/Untitled","date":"2018-09-05T07:39:20.000Z","updated":"2018-09-05T07:39:20.000Z","comments":true,"path":"2018/09/05/Linux/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/09/05/Linux/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"BeanPostProcessor接口总结@","slug":"Java/spring/@/BeanPostProcessor","date":"2018-09-04T14:49:42.000Z","updated":"2018-09-04T14:56:13.000Z","comments":true,"path":"2018/09/04/Java/spring/@/BeanPostProcessor/","link":"","permalink":"http://io.stelawliet.top/2018/09/04/Java/spring/@/BeanPostProcessor/","excerpt":"","text":"Spring内部的BeanPostProcessor接口总结发表于 2017-06-20 | 分类于 springboot | 0 Comments | 阅读次数 1027 Spring内部提供了一个BeanPostProcessor接口，这个接口的作用在于对于新构造的实例可以做一些自定义的修改。比如如何构造、属性值的修改、构造器的选择等等。 只要我们实现了这个接口，便可以对构造的bean进行自定义的修改。 BeanPostProcessor接口还有一些子接口的定义： bean-post-processor InstantiationAwareBeanPostProcessorInstantiationAwareBeanPostProcessor接口继承自BeanPostProcessor接口。多出了3个方法： 12345678910111213141516// postProcessBeforeInstantiation方法的作用在目标对象被实例化之前调用的方法，//可以返回目标实例的一个代理用来代替目标实例// beanClass参数表示目标对象的类型，beanName是目标实例在Spring容器中的name// 返回值类型是Object，如果返回的是非null对象，//接下来除了postProcessAfterInitialization方法会被执行以外，其它bean构造的那些方法都不再执行。//否则那些过程以及postProcessAfterInitialization方法都会执行Object postProcessBeforeInstantiation(Class&lt;?&gt; beanClass,String beanName) throws BeansException;// postProcessAfterInstantiation方法的作用在目标对象被实例化之后并且在属性值被populate之前调用// bean参数是目标实例(这个时候目标对象已经被实例化但是该实例的属性还没有被设置)，beanName是目标实例在Spring容器中的name// 返回值是boolean类型，如果返回true，目标实例内部的返回值会被populate，否则populate这个过程会被忽视boolean postProcessAfterInstantiation(Object bean, String beanName) throws BeansException;// postProcessPropertyValues方法的作用在属性中被设置到目标实例之前调用，可以修改属性的设置// pvs参数表示参数属性值(从BeanDefinition中获取)，pds代表参数的描述信息(比如参数名，类型等描述信息)，bean参数是目标实例，beanName是目标实例在Spring容器中的name// 返回值是PropertyValues，可以使用一个全新的PropertyValues代替原先的PropertyValues用来覆盖属性设置或者直接在参数pvs上修改。如果返回值是null，那么会忽略属性设置这个过程(所有属性不论使用什么注解，最后都是null)PropertyValues postProcessPropertyValues( PropertyValues pvs, PropertyDescriptor[] pds, Object bean, String beanName) throws BeansException; 总结： InstantiationAwareBeanPostProcessor接口继承BeanPostProcessor接口，它内部提供了3个方法，再加上BeanPostProcessor接口内部的2个方法，所以实现这个接口需要实现5个方法。InstantiationAwareBeanPostProcessor接口的主要作用在于目标对象的实例化过程中需要处理的事情，包括实例化对象的前后过程以及实例的属性设置 postProcessBeforeInstantiation方法是最先执行的方法，它在目标对象实例化之前调用，该方法的返回值类型是Object，我们可以返回任何类型的值。由于这个时候目标对象还未实例化，所以这个返回值可以用来代替原本该生成的目标对象的实例(比如代理对象)。如果该方法的返回值代替原本该生成的目标对象，后续只有postProcessAfterInitialization方法会调用，其它方法不再调用；否则按照正常的流程走 postProcessAfterInstantiation方法在目标对象实例化之后调用，这个时候对象已经被实例化，但是该实例的属性还未被设置，都是null。如果该方法返回false，会忽略属性值的设置；如果返回true，会按照正常流程设置属性值 postProcessPropertyValues方法对属性值进行修改(这个时候属性值还未被设置，但是我们可以修改原本该设置进去的属性值)。如果postProcessAfterInstantiation方法返回false，该方法不会被调用。可以在该方法内对属性值进行修改 父接口BeanPostProcessor的2个方法postProcessBeforeInitialization和postProcessAfterInitialization都是在目标对象被实例化之后，并且属性也被设置之后调用的 Instantiation表示实例化，Initialization表示初始化。实例化的意思在对象还未生成，初始化的意思在对象已经生成 SmartInstantiationAwareBeanPostProcessorSmartInstantiationAwareBeanPostProcessor接口继承InstantiationAwareBeanPostProcessor接口。多出了3个方法： 12345678// 预测Bean的类型，返回第一个预测成功的Class类型，如果不能预测返回nullClass&lt;?&gt; predictBeanType(Class&lt;?&gt; beanClass, String beanName) throws BeansException;// 选择合适的构造器，比如目标对象有多个构造器，在这里可以进行一些定制化，选择合适的构造器// beanClass参数表示目标实例的类型，beanName是目标实例在Spring容器中的name// 返回值是个构造器数组，如果返回null，会执行下一个PostProcessor的determineCandidateConstructors方法；否则选取该PostProcessor选择的构造器Constructor&lt;?&gt;[] determineCandidateConstructors(Class&lt;?&gt; beanClass, String beanName) throws BeansException;// 获得提前暴露的bean引用。主要用于解决循环引用的问题// 只有单例对象才会调用此方法Object getEarlyBeanReference(Object bean, String beanName) throws BeansException; 总结： SmartInstantiationAwareBeanPostProcessor接口继承InstantiationAwareBeanPostProcessor接口，它内部提供了3个方法，再加上父接口的5个方法，所以实现这个接口需要实现8个方法。SmartInstantiationAwareBeanPostProcessor接口的主要作用也是在于目标对象的实例化过程中需要处理的事情。它是InstantiationAwareBeanPostProcessor接口的一个扩展。主要在Spring框架内部使用 predictBeanType方法用于预测Bean的类型，返回第一个预测成功的Class类型，如果不能预测返回null。主要在于BeanDefinition无法确定Bean类型的时候调用该方法来确定类型 determineCandidateConstructors方法用于选择合适的构造器，比如类有多个构造器，可以实现这个方法选择合适的构造器并用于实例化对象。该方法在postProcessBeforeInstantiation方法和postProcessAfterInstantiation方法之间调用，如果postProcessBeforeInstantiation方法返回了一个新的实例代替了原本该生成的实例，那么该方法会被忽略 getEarlyBeanReference主要用于解决循环引用问题。比如ReferenceA实例内部有ReferenceB的引用，ReferenceB实例内部有ReferenceA的引用。首先先实例化ReferenceA，实例化完成之后提前把这个bean暴露在ObjectFactory中，然后populate属性，这个时候发现需要ReferenceB。然后去实例化ReferenceB，在实例化ReferenceB的时候它需要ReferenceA的实例才能继续，这个时候就会去ObjectFactory中找出了ReferenceA实例，ReferenceB顺利实例化。ReferenceB实例化之后，ReferenceA的populate属性过程也成功完成，注入了ReferenceB实例。提前把这个bean暴露在ObjectFactory中，这个ObjectFactory获取的实例就是通过getEarlyBeanReference方法得到的 BeanPostProcessorBeanPostProcessor接口是最顶层的接口，接口定义： 12345public interface BeanPostProcessor &#123; // 初始化之前的操作 Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException; // 初始化之后的操作 Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;&#125; 总结： postProcessBeforeInitialization是指bean在初始化之前需要调用的方法 postProcessAfterInitialization是指bean在初始化之后需要调用的方法 postProcessBeforeInitialization和postProcessAfterInitialization方法被调用的时候。这个时候bean已经被实例化，并且所有该注入的属性都已经被注入，是一个完整的bean 这2个方法的返回值可以是原先生成的实例bean，或者使用wrapper包装这个实例 DestructionAwareBeanPostProcessorDestructionAwareBeanPostProcessor接口继承BeanPostProcessor接口。多出了1个方法： 1void postProcessBeforeDestruction(Object bean, String beanName) throws BeansException; 该方法是bean在Spring在容器中被销毁之前调用 MergedBeanDefinitionPostProcessorDestructionAwareBeanPostProcessor接口继承BeanPostProcessor接口。多出了1个方法： 1void postProcessMergedBeanDefinition(RootBeanDefinition beanDefinition, Class&lt;?&gt; beanType, String beanName); 该方法是bean在合并Bean定义之后调用 总结Spring内部对bean的构造已经形成了一套体系。如果我们想修改这套体系，只能使用Spring提供的BeanPostProcessor接口去处理。这样做的好处： 遵循设计模式的开闭原则，对扩展开放，对修改关闭。 我们只需要实现接口进行扩展即可，不需要修改内部的源码","categories":[],"tags":[]},{"title":"","slug":"Java/spring/ioc/Untitled","date":"2018-09-04T14:49:34.000Z","updated":"2018-09-04T14:49:34.000Z","comments":true,"path":"2018/09/04/Java/spring/ioc/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/09/04/Java/spring/ioc/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"1TODO/daily-TODO","date":"2018-09-04T01:02:17.000Z","updated":"2018-09-04T01:30:00.000Z","comments":true,"path":"2018/09/04/1TODO/daily-TODO/","link":"","permalink":"http://io.stelawliet.top/2018/09/04/1TODO/daily-TODO/","excerpt":"","text":"spring [ ] core ioc di aop [ ] Boot core merge data [ ] cloud erearka HadoopLinux shell internet hadoopSparkalgorithmsort merge quickSort heapSort linkedList for - each reverse tree for - each preOrder inOrder postOrder .","categories":[],"tags":[]},{"title":"","slug":"1","date":"2018-09-04T01:01:58.000Z","updated":"2018-09-04T01:02:03.000Z","comments":true,"path":"2018/09/04/1/","link":"","permalink":"http://io.stelawliet.top/2018/09/04/1/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"startUp Configuration","slug":"Java/JavaEE/configuration","date":"2018-09-03T09:15:37.000Z","updated":"2018-09-04T01:11:10.000Z","comments":true,"path":"2018/09/03/Java/JavaEE/configuration/","link":"","permalink":"http://io.stelawliet.top/2018/09/03/Java/JavaEE/configuration/","excerpt":"","text":"[TOC] springapplicationContext.xml12345678910111213141516171819202122&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!--配置注解扫描--&gt; &lt;context:component-scan base-package=\"sky.service\"/&gt; &lt;!--加载外部资源文件--&gt; &lt;context:property-placeholder location=\"classpath:jdbc.properties\"/&gt; &lt;bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt; &lt;property name=\"driverClassName\" value=\"$&#123;jdbc.driverClassName&#125;\"/&gt; &lt;property name=\"url\" value=\"$&#123;jdbc.url&#125;\"/&gt; &lt;property name=\"username\" value=\"$&#123;jdbc.username&#125;\"/&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\"/&gt; &lt;/bean&gt;&lt;/beans&gt; applicationTransaction.xmlxml配置的声明式12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;!-- 事务配置步骤： 1、配置事务tx和aop的名称空间和约束 2、装配事务管理器 3、配置事务策略 4、使用AOP应用事务 --&gt; &lt;!--装配事务管理器 id：最好固定为transactionManager --&gt; &lt;!--transactionManager--&gt; &lt;bean id=\"transactionManager\" class= \"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt; &lt;constructor-arg index=\"0\" ref=\"dataSource\"/&gt; &lt;/bean&gt; &lt;!--配置事务策略--&gt; &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt; &lt;tx:attributes&gt;&lt;!-- name:表示对哪些方法使用该事务策略，*表示所有的方法都是该事务策略 read-only：事务是否只读，默认为读写，一般不用配置 propagation：事务的传播行为，默认就是REQUIRED,全部都放在一个事务中 no-rollback-for：针对哪些异常不回滚，没有默认值。一般不用 rollback-for：针对哪些异常回滚，没有默认值，一般不用。 timeout：事务的超市时间，默认-1，没有超时时间，一般默认即可，不用配置 isolation：事务的隔离级别，默认是defualt,spring自动去判断使用的是什么类型的数据库， 如果是oracle就使用oracle默认的隔离级别READ_COMMITTED 如果是mysql，就使用mysql默认的隔离级别REPEATABLE_READ query*:如果配置了query* ，表示所有以query开头的方法，用它自己的事务策略 如果即配置了*，又配置了query*,那么在使用的时候，哪个相似度更高就使用哪个。--&gt; &lt;tx:method name=\"*\"/&gt; &lt;tx:method name=\"query*\" propagation=\"SUPPORTS\" read-only=\"true\"/&gt; &lt;tx:method name=\"add*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRES_NEW\" /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- 配置aop织入，将事务应用到切入点 --&gt; &lt;aop:config&gt; &lt;!--配置切入点表达式--&gt; &lt;aop:pointcut id=\"point1\" expression= \"execution(* skyTx.Service.AccountImpl.*(..))\"/&gt; &lt;!--将事务管理应用到指定的切入点上--&gt; &lt;!-- 配置切面 : 通知+切点 advice-ref:通知的名称 pointcut-ref:切点的id --&gt; &lt;aop:advisor advice-ref=\"txAdvice\" pointcut-ref=\"point1\"/&gt; &lt;/aop:config&gt; maven dependency12345678910111213141516171819202122232425&lt;!--spring-context--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.ver&#125;&lt;/version&gt; &lt;/dependency&gt;&lt;!--spring aspects--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.ver&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--spring jdbc--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.ver&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--spring-test--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.ver&#125;&lt;/version&gt; &lt;/dependency&gt; springmvcapplication-web.xml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!--开启注解扫描--&gt; &lt;!--扫描@controller控制器--&gt; &lt;context:component-scan base-package=\"sky.controller\"/&gt; &lt;!--配置一个注解驱动--&gt; &lt;mvc:annotation-driven&gt; &lt;!--配置String消息转换器的编码集--&gt; &lt;mvc:message-converters&gt; &lt;bean class=\"org.springframework .http.converter.StringHttpMessageConverter\"&gt; &lt;!--设置该消息转换器的默认编码集--&gt; &lt;property name=\"defaultCharset\" value=\"utf-8\"/&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; &lt;/mvc:annotation-driven&gt; &lt;!--配置视图解析器--&gt; &lt;bean class=\"org.springframework .web.servlet.view.InternalResourceViewResolver\"&gt; &lt;!-- 配置前缀：去哪里找视图 --&gt; &lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt; &lt;!-- 配置后缀：去找哪个类型的视图 --&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt; &lt;/bean&gt; &lt;!--文件上传解析器 id属性固定为multipartResolver --&gt; &lt;bean id=\"multipartResolver\" class=\"org.springframework.web .multipart.commons.CommonsMultipartResolver\"&gt; &lt;!--配置上传文件的总大小：单位是字节，限制上传文件大小为5m--&gt; &lt;property name=\"maxUploadSize\" value=\"5242880\"/&gt; &lt;!--设置上传文件的编码集--&gt; &lt;property name=\"defaultEncoding\" value=\"utf-8\"/&gt; &lt;/bean&gt; &lt;!-- 自定义处理器异常解析器配置步骤： 1、自定义一个类实现HandlerExceptionResolver，复写其中的方法 2、在application-web.xml中配置 自定义处理器异常解析器的bean即可 --&gt; &lt;!--装配自定义处理器异常解析器--&gt; &lt;bean class=\"sky.exception.MyHandlerExceptionResolver\"/&gt; &lt;!--放行静态资源--&gt; &lt;!--在rest配置下使用没有匹配的静态资源使用默认的servlet来处理--&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!--注册拦截器--&gt; &lt;mvc:interceptors&gt; &lt;!--配置单个拦截器--&gt; &lt;mvc:interceptor&gt; &lt;!--配置拦截器对哪些请求进行拦截--&gt; &lt;mvc:mapping path=\"/**\"/&gt; &lt;bean class=\"sky.interceptor.MyInterceptor\"/&gt; &lt;/mvc:interceptor&gt; &lt;!--配置单个拦截器--&gt; &lt;mvc:interceptor&gt; &lt;mvc:mapping path=\"/**\"/&gt; &lt;bean class=\"sky.interceptor.MyInterceptor2\"/&gt; &lt;/mvc:interceptor&gt; &lt;/mvc:interceptors&gt;&lt;/beans&gt; maven dependency12345678910111213&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;/dependency&gt; web.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\" version=\"3.1\"&gt; &lt;!--配置spring提供的转码过滤器--&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework .web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encodingFilter&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encode&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;!--配置上下文加载器.Servlet容器启动时初始化ioc容器--&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web .context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!--指定ioc容器的配置文件--&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:/spring/*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!--配置SpringMVC的DispatcherServlet--&gt; &lt;servlet&gt; &lt;servlet-name&gt;SpringMvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework .web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:/spring/springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;SpringMvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; plugins12345678910111213&lt;plugins&gt; &lt;!-- 配置 Tomcat 插件 --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;configuration&gt; &lt;port&gt;8080&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;uriEncoding&gt;utf-8&lt;/uriEncoding&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; mybatismapper.xml1234567891011121314151617&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"sky.mapper.UserMapper\"&gt; &lt;select id=\"queryUserById\" resultType=\"User\"&gt; select * from tb_user where id = #&#123;id&#125; &lt;/select&gt; &lt;select id=\"queryUserList\" resultType=\"User\"&gt; select * from tb_user &lt;/select&gt; &lt;delete id=\"deleteUserById\"&gt; delete from tb_user where id = #&#123;id&#125; &lt;/delete&gt;&lt;/mapper&gt; mybatis-config.xml123456789101112131415161718192021222324252627&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt; &lt;settings&gt; &lt;!--全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存--&gt; &lt;setting name=\"cacheEnabled\" value=\"true\"/&gt; &lt;!--开启懒加载--&gt; &lt;setting name=\"lazyLoadingEnabled\" value=\"true\"/&gt; &lt;!--是否允许单一语句返回多结果集--&gt; &lt;setting name=\"multipleResultSetsEnabled\" value=\"true\"/&gt; &lt;!--使用列标签代替列名--&gt; &lt;setting name=\"useColumnLabel\" value=\"true\"/&gt; &lt;setting name=\"useGeneratedKeys\" value=\"false\"/&gt; &lt;setting name=\"autoMappingBehavior\" value=\"PARTIAL\"/&gt; &lt;setting name=\"autoMappingUnknownColumnBehavior\" value=\"WARNING\"/&gt; &lt;setting name=\"defaultExecutorType\" value=\"SIMPLE\"/&gt; &lt;setting name=\"defaultStatementTimeout\" value=\"25\"/&gt; &lt;setting name=\"defaultFetchSize\" value=\"100\"/&gt; &lt;setting name=\"safeRowBoundsEnabled\" value=\"false\"/&gt; &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt; &lt;setting name=\"localCacheScope\" value=\"SESSION\"/&gt; &lt;setting name=\"jdbcTypeForNull\" value=\"OTHER\"/&gt; &lt;setting name=\"lazyLoadTriggerMethods\" value=\"equals,clone,hashCode,toString\"/&gt; &lt;/settings&gt;&lt;/configuration&gt; 这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。下表描述了设置中各项的意图、默认值等。 设置参数 描述 有效值 默认值 cacheEnabled 全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存。 true \\ false true lazyLoadingEnabled 延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置fetchType属性来覆盖该项的开关状态。 true \\ false false aggressiveLazyLoading 当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属性会按需加载（参考lazyLoadTriggerMethods). true \\ false false (true in ≤3.4.1) multipleResultSetsEnabled 是否允许单一语句返回多结果集（需要兼容驱动）。 true \\ false true useColumnLabel 使用列标签代替列名。不同的驱动在这方面会有不同的表现， 具体可参考相关驱动文档或通过测试这两种不同的模式来观察所用驱动的结果。 true \\ false true useGeneratedKeys 允许 JDBC 支持自动生成主键，需要驱动兼容。 如果设置为 true 则这个设置强制使用自动生成主键，尽管一些驱动不能兼容但仍可正常工作（比如 Derby）。 true \\ false False autoMappingBehavior 指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示取消自动映射；PARTIAL 只会自动映射没有定义嵌套结果集映射的结果集。 FULL 会自动映射任意复杂的结果集（无论是否嵌套）。 NONE, PARTIAL, FULL PARTIAL autoMappingUnknownColumnBehavior 指定发现自动映射目标未知列（或者未知属性类型）的行为。NONE: 不做任何反应WARNING: 输出提醒日志 (&#39;org.apache.ibatis.session.AutoMappingUnknownColumnBehavior&#39;的日志等级必须设置为 WARN)FAILING: 映射失败 (抛出 SqlSessionException) NONE, WARNING, FAILING NONE defaultExecutorType 配置默认的执行器。SIMPLE 就是普通的执行器；REUSE 执行器会重用预处理语句（prepared statements）； BATCH 执行器将重用语句并执行批量更新。 SIMPLE REUSE BATCH SIMPLE defaultStatementTimeout 设置超时时间，它决定驱动等待数据库响应的秒数。 任意正整数 Not Set (null) defaultFetchSize 为驱动的结果集获取数量（fetchSize）设置一个提示值。此参数只可以在查询设置中被覆盖。 任意正整数 Not Set (null) safeRowBoundsEnabled 允许在嵌套语句中使用分页（RowBounds）。如果允许使用则设置为false。 true \\ false False safeResultHandlerEnabled 允许在嵌套语句中使用分页（ResultHandler）。如果允许使用则设置为false。 true \\ false True mapUnderscoreToCamelCase 是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射。 true \\ false False localCacheScope MyBatis 利用本地缓存机制（Local Cache）防止循环引用（circular references）和加速重复嵌套查询。 默认值为 SESSION，这种情况下会缓存一个会话中执行的所有查询。 若设置值为 STATEMENT，本地会话仅用在语句执行上，对相同 SqlSession 的不同调用将不会共享数据。 SESSION \\ STATEMENT SESSION jdbcTypeForNull 当没有为参数提供特定的 JDBC 类型时，为空值指定 JDBC 类型。 某些驱动需要指定列的 JDBC 类型，多数情况直接用一般类型即可，比如 NULL、VARCHAR 或 OTHER。 JdbcType 常量. 大多都为: NULL, VARCHAR and OTHER OTHER lazyLoadTriggerMethods 指定哪个对象的方法触发一次延迟加载。 用逗号分隔的方法列表。 equals,clone,hashCode,toString defaultScriptingLanguage 指定动态 SQL 生成的默认语言。 一个类型别名或完全限定类名。 org.apache.ibatis.scripting.xmltags.XMLLanguageDriver defaultEnumTypeHandler 指定 Enum 使用的默认 TypeHandler 。 (从3.4.5开始) 一个类型别名或完全限定类名。 org.apache.ibatis.type.EnumTypeHandler callSettersOnNulls 指定当结果集中值为 null 的时候是否调用映射对象的 setter（map 对象时为 put）方法，这对于有 Map.keySet() 依赖或 null 值初始化的时候是有用的。注意基本类型（int、boolean等）是不能设置成 null 的。 true \\ false false returnInstanceForEmptyRow 当返回行的所有列都是空时，MyBatis默认返回null。 当开启这个设置时，MyBatis会返回一个空实例。 请注意，它也适用于嵌套的结果集 (i.e. collectioin and association)。（从3.4.2开始） true \\ false false logPrefix 指定 MyBatis 增加到日志名称的前缀。 任何字符串 Not set logImpl 指定 MyBatis 所用日志的具体实现，未指定时将自动查找。 SLF4J \\ LOG4J \\ LOG4J2 \\ JDK_LOGGING \\ COMMONS_LOGGING \\ STDOUT_LOGGING \\ NO_LOGGING Not set proxyFactory 指定 Mybatis 创建具有延迟加载能力的对象所用到的代理工具。 CGLIB \\ JAVASSIST JAVASSIST (MyBatis 3.3 or above) vfsImpl 指定VFS的实现 自定义VFS的实现的类全限定名，以逗号分隔。 Not set useActualParamName 允许使用方法签名中的名称作为语句参数名称。 为了使用该特性，你的工程必须采用Java 8编译，并且加上-parameters选项。（从3.4.1开始） true \\ false true configurationFactory 指定一个提供Configuration实例的类。 这个被返回的Configuration实例用来加载被反序列化对象的懒加载属性值。 这个类必须包含一个签名方法static Configuration getConfiguration(). (从 3.2.3 版本开始) 类型别名或者全类名. applicationMybatis.xml123456789101112131415161718192021222324&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;!--整合mybatis--&gt; &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt; &lt;!--配置mybatis的全局配置文件--&gt; &lt;property name=\"configLocation\" value=\"classpath:mybatis/mybatis-config.xml\"/&gt; &lt;!--配置dataSource--&gt; &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt; &lt;!--配置别名--&gt; &lt;property name=\"typeAliasesPackage\" value=\"sky.pojo\"/&gt; &lt;!--配置映射文件--&gt; &lt;property name=\"mapperLocations\" value=\"classpath:mybatis/mappers/**/*.xml\"/&gt; &lt;/bean&gt; &lt;!--以扫描配置mapper--&gt; &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt; &lt;property name=\"basePackage\" value=\"sky.mapper\"/&gt; &lt;/bean&gt;&lt;/beans&gt; maven dependency12345678910&lt;!--mybatis--&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;&lt;/dependency&gt; SLF4Jlog4j.properties12345678910111213141516### direct log messages to stdout ###log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.Target=System.outlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout#log4j.appender.stdout.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%nlog4j.appender.stdout.layout.ConversionPattern=%-d&#123;HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%n#log4j.rootLogger=debug, stdout### direct messages to file mylog.log ####log4j.appender.file=org.apache.log4j.FileAppender#log4j.appender.file.File=mylog.log#log4j.appender.file.layout=org.apache.log4j.PatternLayout#log4j.appender.file.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%n### set log levels - for more verbose logging change &apos;info&apos; to &apos;debug&apos; ####log4j.rootLogger=debug,stdout,file maven dependency12345&lt;!--slf4j--&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;&lt;/dependency&gt;","categories":[],"tags":[{"name":"configuration","slug":"configuration","permalink":"http://io.stelawliet.top/tags/configuration/"},{"name":"xml","slug":"xml","permalink":"http://io.stelawliet.top/tags/xml/"},{"name":"annotation","slug":"annotation","permalink":"http://io.stelawliet.top/tags/annotation/"}]},{"title":"Spring BeanFactory Analysis","slug":"Java/spring/ioc/BeanFactory Analysis","date":"2018-09-02T12:33:00.000Z","updated":"2018-09-02T13:19:13.000Z","comments":true,"path":"2018/09/02/Java/spring/ioc/BeanFactory Analysis/","link":"","permalink":"http://io.stelawliet.top/2018/09/02/Java/spring/ioc/BeanFactory Analysis/","excerpt":"","text":"BeanFactory 继承体系 BeanFactory AutowireCapableBeanFactory HierarchicalBeanFactory ListableBeanFactory ConfigurableBeanFactory ConfigurableListableBeanFactory BeanFactory 最原始BeanFactory,是Spring实现IOC容器的核心接口.从以上的接口方法可以看出BeanFactory是定义了基本Singleton和Prototype的Bean创建. 另外FACTORY_BEAN_PREFIX属性是定义了Factory实例在容器中的名称BeanName规范前缀“&amp;” 如果直接getBean()时传入的是没有带前缀“&amp;”的工厂名称.则实际取得的bean是实例工厂的创建的bean 要取得BeanFactory本身的实例就要在BeanName前加‘’&amp;‘’","categories":[],"tags":[{"name":"ioc","slug":"ioc","permalink":"http://io.stelawliet.top/tags/ioc/"}]},{"title":"tomcat路径匹配","slug":"Linux/server/Tomcat/Tomcat路径匹配","date":"2018-09-01T13:37:36.000Z","updated":"2018-10-20T11:34:23.000Z","comments":true,"path":"2018/09/01/Linux/server/Tomcat/Tomcat路径匹配/","link":"","permalink":"http://io.stelawliet.top/2018/09/01/Linux/server/Tomcat/Tomcat路径匹配/","excerpt":"","text":"url-pattern url-pattern(必须以/或者*开头) 精确匹配 url-pattern request URL (projectPath) /FirstServlet http://127.0.0.1:8080/{projectPath}/FirstServlet /Demo/FirstServlet http://127.0.0.1:8080/{projectPath}/Demo/FirstServlet 模糊匹配 url-pattern request URL(projectPath) / http://127.0.0.1:8080/{projectPath}/* (任意一级或多级目录) /demo/* http://127.0.0.1:8080/{projectPath}/demo/ (demo/下的任意一级或多级目录) *.do http://127.0.0.1:8080/{projectPath}/ / .do (任意一级或多级目录后以.do结尾的) *与其他ant风格不同可以代表任意1级或多级目录 / &amp; /*两者一样效果 前缀模糊匹配和后缀模糊匹配不能同时使用 e.g. /demo// .do 多个匹配同时时前缀最长者优先.(后缀模糊匹配优先最低) / (equals /*) 123/FirstServlet -&gt; http://127.0.0.1:8080/appName/FirstServlet/FirstServlet -&gt; http://127.0.0.1:8080/appName/FirstServlet/*&amp; / -&gt;http://","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"server","slug":"java/server","permalink":"http://io.stelawliet.top/categories/java/server/"},{"name":"servlet容器","slug":"java/server/servlet容器","permalink":"http://io.stelawliet.top/categories/java/server/servlet容器/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"},{"name":"路径匹配","slug":"路径匹配","permalink":"http://io.stelawliet.top/tags/路径匹配/"}]},{"title":"startUp springMvc","slug":"Java/spring/mvc/startUp","date":"2018-09-01T08:28:44.000Z","updated":"2018-09-01T08:48:05.000Z","comments":true,"path":"2018/09/01/Java/spring/mvc/startUp/","link":"","permalink":"http://io.stelawliet.top/2018/09/01/Java/spring/mvc/startUp/","excerpt":"","text":"config pom.xml 1234567891011&lt;!--spring webmvc--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;&lt;/dependency&gt; config dispatcherServlet 1234567891011121314151617&lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; //DispatcherServlet类的全限定名 &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; //配置启动参数.指定配置文件的路径 &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;!--&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;--&gt; //restfull &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; config spring xml 1","categories":[],"tags":[{"name":"configuration","slug":"configuration","permalink":"http://io.stelawliet.top/tags/configuration/"},{"name":"xml","slug":"xml","permalink":"http://io.stelawliet.top/tags/xml/"},{"name":"annotation","slug":"annotation","permalink":"http://io.stelawliet.top/tags/annotation/"}]},{"title":"","slug":"Linux/openwrt/各种插件","date":"2018-09-01T02:18:43.000Z","updated":"2018-09-01T02:18:43.000Z","comments":true,"path":"2018/09/01/Linux/openwrt/各种插件/","link":"","permalink":"http://io.stelawliet.top/2018/09/01/Linux/openwrt/各种插件/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"log4j Demo","slug":"Java/framework/log4jDemo","date":"2018-08-31T12:16:50.000Z","updated":"2018-09-02T09:36:33.000Z","comments":true,"path":"2018/08/31/Java/framework/log4jDemo/","link":"","permalink":"http://io.stelawliet.top/2018/08/31/Java/framework/log4jDemo/","excerpt":"","text":"configurationlog4j.properties 使用了简单的配置具体的配置太多没有仔细研究 123456789101112131415log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.Target=System.outlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout#log4j.appender.stdout.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%n#输出时间配置格式布局配置..就简单的配置了时间输出#log4j.appender.stdout.layout.ConversionPattern=%-d&#123;HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%nlog4j.appender.stdout.layout.ConversionPattern=[%t] [%c]-[%p] %m%n#log4j.rootLogger=debug, stdout#log4j.appender.file=org.apache.log4j.FileAppender#log4j.appender.file.File=mylog.log#log4j.appender.file.layout=org.apache.log4j.PatternLayout#log4j.appender.file.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; [%t] [%c]-[%p] %m%n#log4j.rootLogger=debug, stdout,file Demo 拼接字符串可以使用 logger.debug(&quot;out -&gt; {}&quot;,&quot;debug&quot;); 考虑性能问题可以再每次log前判断当前等级 123456789public static void main(String[] args) &#123; Logger logger = LoggerFactory.getLogger(CgInterceptor.class); if (logger.isDebugEnabled())&#123; logger.debug(\"out -&gt; &#123;&#125;\"+ \"debug\"); &#125; logger.info(\"out -&gt; &#123;&#125;\",\"info\"); logger.warn(\"out -&gt; \"+\"warn\"); logger.error(\"out -&gt; \"+\"error\");&#125; idea输出颜色配置plugin idea plugin grep console (如果输出过长关键字匹配超过范围可以调整下面的数值) Shot","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"log4j","slug":"java/log4j","permalink":"http://io.stelawliet.top/categories/java/log4j/"}],"tags":[{"name":"logger","slug":"logger","permalink":"http://io.stelawliet.top/tags/logger/"}]},{"title":"heapSort","slug":"algorithm/heapSort","date":"2018-08-29T07:41:53.000Z","updated":"2018-08-29T07:47:16.000Z","comments":true,"path":"2018/08/29/algorithm/heapSort/","link":"","permalink":"http://io.stelawliet.top/2018/08/29/algorithm/heapSort/","excerpt":"","text":"堆结构 从数组建立大根堆heapInsert()，[0,heapSize] 堆顶弹出时重新维护大根堆heapify() //2i+1 left//2i+2 right//(i-1)/2 parent heapInsert heapify","categories":[],"tags":[]},{"title":"","slug":"Untitled","date":"2018-08-29T07:41:37.000Z","updated":"2018-08-29T07:41:37.000Z","comments":true,"path":"2018/08/29/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/08/29/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"GET BAEN@CSDN","slug":"Java/spring/ioc/GET BEAN@CSDN","date":"2018-08-27T08:37:05.000Z","updated":"2018-08-27T08:59:49.000Z","comments":true,"path":"2018/08/27/Java/spring/ioc/GET BEAN@CSDN/","link":"","permalink":"http://io.stelawliet.top/2018/08/27/Java/spring/ioc/GET BEAN@CSDN/","excerpt":"","text":"Spring核心之BeanFactory 一张图看懂getBean全过程.2016年03月17日 08:27:59 @csdn https://blog.csdn.net/zghwaicsdn/article/details/50910384 Spring通过资源加载器加载相应的XML文件，使用读取器读取资源加载器中的文件到读取器中，在读取过程中，解析相应的xml文件元素，转化为spring定义的数据结BeanDefinition，把相应的BeanDefinition注册到注册表中。注册表中包含的BeanDefinition的数据结构，没有经过加工处理过，无法得到我们想要的bean对象。 我们如何得到Bean对象，spring都做了那些工作？BeanFactory提供了多种方式得到bean对象，getBean()方法是最核心得到bean对象getBean主要由AbstractBeanFactory、AbstractAutowireCapableBeanFactory、以及DefaultListableBeanFactory实现AbstractBeanFactory 实现了依赖关系处理AbstractAutowireCapableBeanFactory 实现了bean的create过程DefaultListableBeanFactory 实现了BeanDefinition的管理自己看源码画出了这张流程图，根据这张图来介绍spring是怎么一步步的得到bean对象的。 BeanFactoryGetBean 以下是getBean方法的实现流程。 getBean经过方法重载后，最终调用的是doGetBean方法， 需要的方法参数如下：1.name 你要得到bean对象的名称 不能为空2.requiredType 这个bean对象的Class类型，可以为null3.args 可以为null，如果有参数，则代表在找到这个bean定义后，通过构造方法或工厂方法或其他方法传入args参数来改变这个bean实例。spring 工厂开始自动化处理了：1.name参数的处理： –xml中的alias属性 如果有&amp;开头的name代表了FactoryBean的实例名称，则要去掉这个前缀 从别名注册表中解析出规范的名称。这个别名注册表是一个final map，在加载xml时读入bean的别名到该final map中。2.BeanDefinition的查找： –xml中的name属性 得到规范的名字，然后拿去检索BeanDefinitionRegistry注册表中是否存在该BeanDefinition，这个BeanDefinitionRegistry注册表，也是一个 final map,里面已经存在了用户定义的BeanDefinition，也是在加载xml时读入BeanDefinition到注册表中的。 如果不存在该BeanDefinition，并且没有相应的父工厂则抛出异常。 有相应的父工厂，该工厂就把参数交给了父工厂去处理，父工厂就进入自己的doGetBean方法，重复步骤1工作，就形成递归循环处理。 如果存在BeanDefinition.查询该BeanDefinition开始进行合并属性到RootBeanDefinition中。3.合并BeanDefinition为RootBeanDefinition –xml中的parent属性 #1 如果BeanDefinition没有定义父bean名称，则创建一个新的RootBeanDefinition，并把BeanDefinition赋给新的RootBeanDefinition。 #2如果这个BeanDefinition是一个RootBeanDefinition，则使用RootBeanDefinition clone出一个。 如果BeanDefinition存在定义的父bean名称，则通过这个父bean名称查询到父BeanDefinition重复步骤3递归循环处理。 如果父bean名称和当前的BeanDefinition名称相同则使用父工厂的步骤3，递归循环处理。 最后，创建一个新的RootBeanDefinition，并把父的BeanDefinition赋给新的RootBeanDefinition， 并把当前BeanDefinition合并到这个新的RootBeanDefinition 内部RootBeanDefinition在合并到外部的RootBeanDefinition的时候，但内部bean如果不是单例的，而外部的RootBeanDefinition是单例的，这时候就需要把内部RootBeanDefinition的scope属性赋值给外部RootBeanDefinition的scope属性上。4.是否是抽象的 –xml中的abstract属性 如果是抽象的直接抛异常，不能为实例化bean对象 否则继续5.初始化bean的依赖关系 –xml中的depends-on属性 查询该bean对应的所有依赖关系bean名称，循环依赖bean名称，注册依赖关系，再次getBean递归查询依赖bean。重复步骤1工作。 它使用final ConcurrentHashMap线程安全的hash表来维护依赖关系 1.dependentBeanMap key是bean name value是Set包含了该beanname对应的bean依赖的bean名称集合 2.dependenciesForBeanMap key是bean name value是Set包含了依赖该bean的bean名称集合6.Scope属性决定创建bean时在不同的条件下进行 –xml中的scope属性当scope=singleton时，必须保证线程安全的创建单例bean。当scope=prototype时，必须保证创建的bean是新的实例。当scope为其他时这个暂时没有研究怎么，好像request session 使用Scope接口的方式进行。创建的过程时基本相同的。 注：从上面看，如果解析依赖很多的话，等待其他依赖bean创建完，是非常消耗性能的一件事，比如：单例创建需要加锁。所以spring使用DefaultSingletonBeanRegistry来本地缓存来保存创建过的对象。1.final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;String, Object&gt;(256)缓存单例对象表，key beanname value是创建的单例对象，所有的单例对象都使用它来维护，它一般带同步光环的，线程安全是首要任务。2.final Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories 简单的缓存singleton ObjectFactory，是为了提前曝光单例对象3.final Map&lt;String, Object&gt; earlySingletonObjects key beanname vlaue缓存提早曝光的对象，该对象在创建期间只做了简单创建过的对象，未初始化属性及后续处理。即为单例，依赖关系建立指向引用就好了。(满足条件 1. 单例 2.当前的对象是在创建期间 3.允许曝光对象)4.final Set registeredSingletons 注册过的单例名称集合5.final Set singletonsCurrentlyInCreation当前正创建的单例集合名称6.final Map&lt;String, Set&gt; containedBeanMap key外部beanname value 内部beanname集合7.dependentBeanMap key是bean name value是Set包含了我依赖的bean名称集合8.dependenciesForBeanMap key是bean name value是Set包含了依赖我的bean名称集合以上的缓存对性能做了优化，有兴趣可以去了解下。并且在线程安全方面是一个很好的例子。比如：首先就是先去查缓存singletonObjects存在，存在则直接使用，否则查earlySingletonObjects，满足条件了直接从缓存中取，当然spring在创建复杂的bean时可以通过提前曝光简单的对象，供依赖或后置处理程序使用，来加快访问速度。 上面对查找BeanDefinition、合并RootBeanDefinition及依赖关系建立后，就开始准备创建bean对象了。7.确定类型 –xml class=”” 创建bean过程获取该bean的类型是必须的。 如何确定RootBeanDefinition的Class类型 bean定义 1.如果存在BeanClass类型，则直接返回该类型 2.不存在就使用className， 如果配置了BeanExpressionResolver 解析器，使用evaluate方法进行解析类型，(这个接口可以自定义来扩展 解析定义的表达式，如SpringEL表达式) 解析的对象是Class类型则返回该类型。 如果返回的String 则使用工厂类加载器加载该className返回class类型 这里会尝试多个类型加载器进行加载直到加载成功，比如当前工厂的类加载器、RootBeanDefinition的类加载，默认的类加载器等。 在解析完类型后spring使用了缓存来保存className对应的类型，以便在以后中使用。8.实例化之前的工作 拷贝一个新的RootBeanDefinition供初始化使用。 设置定义的覆盖方法标记为已经加载过,避免参数类型检查的开销。这里的覆盖方法 –xml:lookup-method或replace-method 下面该给客户机会参与进来的机会了 在实例化对象之前，spring设置了实例化后置处理器InstantiationAwareBeanPostProcessor，供外部控制或处理一些业务。 比如代理这个对象，不需要spring实例化创建bean等，这是一个扩展点。用户可以自己加入自己的实例化后置处理器，来处理一些业务。 首先满足合成的RootBeanDefinition不是应用程序本身定义的，并且工厂中已经包含一个或多个InstantiationAwareBeanPostProcessor处理器， 满足条件后，为了供InstantiationAwareBeanPostProcessor的方法postProcessBeforeInstantiation(Class&lt;?&gt; beanClass, String beanName)调用， 需要确定 beanClass的目标类型，即要返回的bean对象的类型，如果返回null将不会调用当前循环中后续的BeanPostProcessor 1.如果定义bean创建使用普通方式来创建就和上面的步骤7一样，找到对应的beanClass返回 2.使用(静态)工厂方法定义则使用下面的流程来确定类型： factory-bean=”carFactory” factory-method=”getCar” 1.如果RootBeanDefinition.resolvedFactoryMethodReturnType为class类型，则返回 2.如果不是，得到 factory-bean对应的名称carFactory， 如果没有定义factory-bean则说明使用了当前类做工厂，则调用7的步骤得到工厂类型 确定carFactory类型 1.如果carFactory存在则先从单例池中查询有没对应工厂bean对象，如果有返回该工厂bean的class类型， 如果类型是FactoryBean类型则调用FactoryBean.getObjectType方法返回工厂bean类型， 如果查询的carFactory存在但值为null 则返回null 2.如果单例中没有这个对象，则使用父工厂中找, 没有父工厂，用carFactory这个名字查询RootBeanDefinition 然后得到这个RootBeanDefinition的BeanName进行7的步骤,得到工厂bean的返回类型， 如果类型是FactoryBean类型则调用FactoryBean.getObjectType方法得到工厂bean的返回类型， 通过上面得到工厂bean的类型，但无法知道工厂方法返回的类型，通过反射，查询到工厂bean的所有方法， 如果有多个方法重载，则需要匹配设定的参数与方法参数那个最匹配，然后得到对应方法的返回类型。 看完这个都晕了 太饶了可以跳过这段。 确定完成RootBeanDefinition的beanClass以后，循环工厂中所有的BeanPostProcessor后置处理器集合,如果存在InstantiationAwareBeanPostProcessor 实例，就调用该处理器的postProcessBeforeInstantiation方法返回一个Object对象，这个对象可以为空，也可以是用户代理的一个对象。 如果返回的对象不为null，说明你已经初始化过了对象，确定你要循环调用工厂中配置的BeanPostProcessor处理器集合中每一个 postProcessAfterInitialization(Object bean, String beanName)方法，它是在对象初始化以后调用的。 参数bean代表初始化后的bean，就是上面postProcessBeforeInstantiation返回的对象，返回值为Object。 不管这两个处理器怎么处理，返回的最终对象为Object，如果不为空，将不会处理后续循环中的BeanPostProcessor，跳过bean创建过程。 否则开始bean的实例化8.开始实例化 ，相当于new一个对象 首先对象是否是单例的，是的话就从单例缓存中取是否存在该包装过的实例BeanWrapper，如果存在就使用，否则就实例化。 验证beanClass是否可以实例化 1.beanClass不能为null 2.beanClass是public的或者是允许访问的9.自动注入实例化带参的构造函数. 过程比较复杂我从网上看到分析的非常好 ################################################################################（1）构造函数参数的确定。 根据explicitArgs参数判断。 如果传入的参数explicitArgs不为空，那边可以直接确定参数，因为explicitArgs参数是在调用Bean的时候用户指定的，在BeanFactory类中存在这样的方法： Object getBean(String name, Object... args) throws BeansException; 在获取bean的时候，用户不但可以指定bean的名称还可以指定bean所对应类的构造函数或者工厂方法的方法参数，主要用于静态工厂方法的调用，而这里是需要给定完全匹配的参数的，所以，便可以判断，如果传入参数explicitArgs不为空，则可以确定构造函数参数就是它。 缓存中获取。 除此之外，确定参数的办法如果之前已经分析过，也就是说构造函数参数已经记录在缓存中，那么便可以直接拿来使用。而且，这里要提到的是，在缓存中缓存的可能是参数的最终类型也可能是参数的初始类型，例如：构造函数参数要求的是int类型，但是原始的参数值可能是String类型的”1”，那么即使在缓存中得到了参数，也需要经过类型转换器的过滤以确保参数类型与对应的构造函数参数类型完全对应。 配置文件获取。 如果不能根据传入的参数explicitArgs确定构造函数的参数也无法在缓存中得到相关信息，那么只能开始新一轮的分析了。 分析从获取配置文件中配置的构造函数信息开始，经过之前的分析，我们知道，Spring中配置文件中的信息经过转换都会通过BeanDefinition实例承载，也就是参数mbd中包含，那么可以通过调用mbd.getConstructorArgumentValues()来获取配置的构造函数信息。有了配置中的信息便可以获取对应的参数值信息了，获取参数值的信息包括直接指定值，如：直接指定构造函数中某个值为原始类型String类型，或者是一个对其他bean的引用，而这一处理委托给resolveConstructorArguments方法，并返回能解析到的参数的个数。 （2）构造函数的确定。 经过了第一步后已经确定了构造函数的参数，接下来的任务就是根据构造函数参数在所有构造函数中锁定对应的构造函数，而匹配的方法就是根据参数个数匹配，所以在匹配之前需要先对构造函数按照public构造函数优先参数数量降序、非public构造函数参数数量降序。这样可以在遍历的情况下迅速判断排在后面的构造函数参数个数是否符合条件。 由于在配置文件中并不是唯一限制使用参数位置索引的方式去创建，同样还支持指定参数名称进行设定参数值的情况，如，那么这种情况就需要首先确定构造函数中的参数名称。 获取参数名称可以有两种方式，一种是通过注解的方式直接获取，另一种就是使用Spring中提供的工具类ParameterNameDiscoverer来获取。构造函数、参数名称、参数类型、参数值都确定后就可以锁定构造函数以及转换对应的参数类型了。 （3）根据确定的构造函数转换对应的参数类型。 主要是使用Spring中提供的类型转换器或者用户提供的自定义类型转换器进行转换。 （4）构造函数不确定性的验证。 当然，有时候即使构造函数、参数名称、参数类型、参数值都确定后也不一定会直接锁定构造函数，不同构造函数的参数为父子关系，所以Spring在最后又做了一次验证。 （5）根据实例化策略以及得到的构造函数及构造函数参数实例化Bean。 ###########################################################################################10.实例化策略首先判断如果beanDefinition.getMethodOverrides()为空也就是用户没有使用replace或者lookup的配置方法，那么直接使用反射的方式，简单快捷，但是如果使用了这两个特性，在直接使用反射的方式创建实例就不妥了，因为需要将这两个配置提供的功能切入进去，所以就必须要使用动态代理的方式将包含两个特性所对应的逻辑的拦截增强器设置进去，这样才可以保证在调用方法的时候会被相应的拦截器增强，返回值为包含拦截器的代理实例。 11.工厂方法实例化bean 自己理解写的比较简陋看看就好了。 创建一个BeanWapper对象，设置类型转换器，属性编辑器。 如果定义的bean是使用工厂方法实例化：在xml中表示 1.得到工厂bean， 如果定了factory-bean名称 使用名称通过getBean方法factory bean对象,代表这个方法是通过工厂方法创建非static方法 如果没有定义则则为null，说明静态工厂方法 static方法 2.工厂方法参数 用户传入的参数：如果给定的参数不为空则使用该参数作为工厂方法参数 则使用构造方法参数对象 缓存中取：如果解析过的工厂方法参数对象存在，并且如果解析过的构造器参数对象也存在,就是用构造器参数对象 缓存中取不到，从BeanDefinition的原型参数对象，把eanDefinition的原型参数对象转换为新的参数对象。 3.工厂方法 通过beanClass类型，反射出方法集合，挑选出符合条件的方法(静态工厂就匹配静态方法否则匹配非静态方法 然后匹配与定义的工厂方法名一样的方法) 然后使用反射机制 factoryMethod.invoken(factoryBean,args)得到返回的对象包装成BeanWapper对象返回。 这里简单的说了下，spring做的处理较复杂，有些点你没有碰到过你不知道为什么那么多弯弯道道。 ######################################################得到BeanWapper############################################################################ 12.在实例化对象后包装成了BeanWapper，接下来spring提供了一个扩展点，MergedBeanDefinitionPostProcessor.postProcessMergedBeanDefinition(RootBeanDefinition beanDefinition, Class&lt;?&gt; beanType, String beanName),实现MergedBeanDefinitionPostProcessor接口的处理器，可以使用合并过的RootBeanDefinition做一些需要的业务，具体怎么做spring是不操心的，在这个阶段spring把工厂中所有的BeanPostProcessor后置处理器循环，如果是MergedBeanDefinitionPostProcessor的实例就调用该实例的方法postProcessMergedBeanDefinition帮你运行。 13.提前曝光bean对象 ref 为什么要提前曝光对象？ 在上面介绍地依赖关系创建的时候，对象如果依赖与另一个对象，则先创建依赖的对象。如果对象A依赖与&lt;单例&gt;对象B，则先创建B对象，A就停留在上面步骤创建依赖关系的阶段，等待B对象创建完成，在B对象创建过程中，如果出现如下情况： 1.B对象中有依赖A对象的属性，如果A是单例的，B对象等待A创建完成，两个互相等就形成了死循环。 2.如果B对象，在初始化过程非常复杂，会导致性能问题。可能还有其他情况。总结出：提前曝光bean对象满足条件： 1.当前的bean是单例的，（原型对象是不会出现这问题的） 2.并且支持循环引用 (spring提供设置是否支持循环引用，默认是允许的) 3.当前的bean正在创建为了解决上面的问题，我们在这个阶段提前暴露对象，那么对刚刚实例化的对象(如果你允许,spring提供设置是否支持循环引用)就可以暴露对象的引用供其他对象使用,不用需要等到该对象的初始完成后才使用。 对象暴露在那，怎么使用，单例注册表中有。对于对象依赖关系，暴露后的对象集合、及当前有哪些bean在创建、当前所有单例bean对象，都保存在不同的final Map中，在上面我们已经简单说过。有兴趣可以网上查询下该方面的信息。暴露这个bean对象固然好，但我想要对这个bean处理下在暴露行不，spring最懂你，它提供了SmartInstantiationAwareBeanPostProcessor接口，你可以实现该接口的方法：Object getEarlyBeanReference(Object bean, String beanName)参数Object bean:BeanWapper中实例对象的引用，不关心你怎么处理，不过方法返回的对象会在后续一直使用。 回到流程来，当满足了提前曝光实例的条件后，spring循环工厂中所有的BeanPostProcessor，如果存在SmartInstantiationAwareBeanPostProcessor的实例，则调用getEarlyBeanReference方法返回对象，并把这个对象放入单例表中供提前使用，如果返回null将不会调用后续的BeanPostProcessor 14.注入属性值之前这个时候有用户说对象已经实例化，不想注入属性我想跳过或者我想在自动注入属性之前做点什么然后在注入属性？spring说好的没问题，主动权给你，你需要实现InstantiationAwareBeanPostProcessor接口并实现方法boolean postProcessAfterInstantiation(Object bean, String beanName)，你不想注入属性就返回false，我们不会给你注入属性的。想要注入属性就返回true。参数bean如果值被改变了，以后我们就按照改变过的bean进行填充哦！因为它是一个引用，注意哦！在此阶段spring工厂中存在后置处理器，会循环所有的BeanPostProcessor实例，如果是InstantiationAwareBeanPostProcessor的一个实例则调用postProcessAfterInstantiation方法，返回false就直接跳过填充属性。否则继续填充bean属性吧！15.依赖注入：自动注入bean属性 –xml autowire首先检查是否需要设置了自动注入设置了自动注入，根据设置的依赖注入的方式不同，分为： 1.根据属性的名称注入 2.根据属性的类型注入 ==根据属性名称注入属性bean： 1.循环所有bean中的所有属性描述符PropertyDescriptor 取的满足如下要求的属性名： 1.getWriteMethod即setter方法必须存在 2.不是CGlib生成的属性类型,也不存在ignoredDependencyTypes(可配置的)集合中的属性类型，并且不是忽略接口(spring说是不能使用springbean工厂中接口作为属性，比如BeanFactoryAware ApplicationContextAware)实现的属性中包含有的方法 3.定义的RootBeanDefition中不包含该属性名字，因为是自动注入不会把定义的修改掉，所以才不包含的。 4.这个属性不能是“简单的基本类型”，“简单的基本类型”，包括了基本类型、包装类型，String or other CharSequence, a Number, a Date,a URI, a URL, a Locale, a Class, or a corresponding array,BeanWapper拥有强大的属性管理功能，它有PropertyEditor和TypeCovernt,很好处理这些”简单基本类型”，当然你可以扩展，自己的基本类型编辑器或转化器。筛选完不满意的属性，得到满意的属性名以后， 确定属性名称是否存在bean 1.(如果单例表中包含该bean || 有这个BeanDefinition定义) &amp;&amp;（属性名称不是&amp;开头的FactoryBean名称 || 属性是FactoryBean实例） 2.如果存在父工厂，就去父工厂中去找 1和2有一个返回true只代表存在该bean，但并不代表你得到的这个bean就是想要的。 存在就使用依赖属性名称直接getBean就循环查找吧。查找完成注入属性对象PropertyValue中，注册类和属性的依赖关系。 ==根据属性类型注入 这部分代码我是看晕了，道道太多，和注解的注入方式有关，这个简单说下 属性类型注入和属性名称注入区别在于，属性类型注入得到属性名称以后不是直接getBean对象返回，而以下筛选方式来匹配的。 //1.如果这个类型是ObjectFactory的即我们之前在曝光的对象实例，则返回一个实现了ObjectFactory的描述府实例懒加载。 2.查询当前工厂中所有beanDefinition,排除一些不会存在的比如抽象的、没有初始化过的等，然后匹配是否曝光的对象， FactoryBean对象，单例池中继续匹配，最后才匹配名字相同的和类型相同的，然后当前工厂有父类工厂的话就去父类工厂匹配， 合并当前工厂和父工厂匹配到的名字集合。匹配多个相同的bean名字就看那个bean是否定义了primary，只有一个的时候，然后getBean。否则就抛异常。 这里还牵涉到注解自动装配的条件，这里就不介绍了。16.自动注入完属性值后会合并RootBeanDefintion中定义的属性值为一个新的属性值集合，这个新的属性值集合供以后解析和转化到BeanWapper中。 到了该阶段，spring为你提供了可以修改属性参数的机会，实现InstantiationAwareBeanPostProcessor接口中的PropertyValues postProcessPropertyValues( PropertyValues pvs, PropertyDescriptor[] pds, Object bean, String beanName)方法，spring会循环工厂中配置过的每一个BeanPostProcessor实例，如果该实例是InstantiationAwareBeanPostProcessor，则会调用该接口的postProcessPropertyValues方法。参数 pvs是上面说的新的属性集合，pds代表了bean对应类的属性描述符，不包含CGLib属性或设置忽略的接口等，bean是BeanWapper包含的实例。你可以修改或移除pvs，或者设置一些必须的参数，或者操作描述符pds，具体如何使用spring不关心。但最会使用你设定的返回的PropertyValues集合，来填充BeanWapper，如果你返回的PropertyValues为null，则跳过填充属性，到初始化Bean。如果设置了依赖检查，对属性进行依赖检查，依赖检查分三种： 如果属性描述符pds中的属性有写方法说明这个属性可以使用，但PropertyValues pvs不包含此属性时检查： 1.检测全部，不符合，则抛出异常。 2.检测简单的属性 不包含的这个属性不是”简单的类型“则抛出异常。不符合 3.检查对象引用 包含的这个属性是”简单的类型“则抛出异常。不符合依赖检测有问题则抛出异常。 17.解析转化bean属性填充到BeanWapper –xml 依赖检查成功后，就开始转换返回的属性集合PropertyValues pvs,它是RootBeanDefinition中的属性集合，可能有的属性并未做过解析转换过，如果这个集合之前已经转化过，则把属性集合设置到BeanWapper中，跳过填充属性，到初始化Bean。 没有转换，循环属性集合PropertyValues pvs，取得值和name属性,把原始的属性转化为ObjectRuntimeBeanReference ==&gt;使用getBean方式得到objectBeanDefinitionHolder ===&gt;内部bean解析，有bean工厂创建的objectBeanDefinition ===&gt;内部bean解析，有bean工厂创建的objectManagedArray ===&gt;Object 递归循环解析，都会调用evaluate(Object)ManagedList ===&gt;List 递归循环解析，都会调用evaluate(Object)ManagedSet ===&gt;Set 递归循环解析，都会调用evaluate(Object)ManagedMap ===&gt;Map&lt;Object, Object&gt; 递归循环解析，都会调用evaluate(Object)evaluate(Object) ===&gt;不管数组还是集合或map等它们最终都会调用这个方法来解析对象，这个方法使用了BeanExpressionResolver来解析定义的字符串可以解析的对象，你可以自己配置一个。spring的EL表达式就是实现了此接口。 解析过的属性值如果是BeanWrapperImpl可以转化的就把该属性转化为PropertyValue对象。BeanWrapperImpl拥有TypeConvernt和PropertyEdit接口功能，对属性操作易如反掌。你可以定制这两个接口的功能。所有属性转化以后的,，标记转化后属性集合为已转换并填充到BeanWrapperImpl，属性填充结束。 18.调用Aware接口实例的方法1.如果这个bean实现了BeanNameAware，则调用其实现的bean.setBeanName(String beanName)方法，设置在工厂中该bean真实的name。2.如果这个bean实现了BeanClassLoaderAware，则调用其实现的bean.setBeanClassLoader(ClassLoader classLoader)方法,设置加载当前bean的类加载器3.如果这个bean实现了BeanFactoryAware，则调用bean.setBeanFactory(BeanFactory beanFactory);设置当前工厂给bean使用。spring为什么要这样设计？有什么用？个人理解：如果该bean在上下文环境中，我想用当前bean对应的工厂BeanFactory来填充自己的业务方法，或者想用当前工厂的某些保存的状态，我并不知道该Bean是那个工厂创建的，或许我要写很多代码才能获得到beanFactory。现在你只需要实现BeanFactoryAware接口,提供一个setBeanFactory(BeanFactory beanFactory)方法的实现，配置这个bean，spring在初始化时就为你注入该BeanFactory了。BeanFactory别问我能干什么？你可以使用 instanceof 来判断是否是ListableBeanFactory、HierarchicalBeanFactory、SingletonBeanRegistry、ConfigurableBeanFactory,甚至是AbstractAutowireCapableBeanFactory、DefaultListableBeanFactory、BeanDefinitionRegistry中的某个实例，相当于拥有了整个工厂，说不定它还有父工厂，及爷工厂….^_^别问我它们这些接口能干什么？可以创无限，只要你可以。 19.初始化之前的后置处理器 循环工厂中所有实现了BeanPostProcessor的实例，调用其Object postProcessBeforeInitialization(Object bean, String beanName)方法，该方法允许你包装参数bean返回一个包装过的bean对象或者原来这个参数bean对象,如果返回null，后续循环的BeanPostProcessor将不会被调用。 20.调用初始化方法如果当前的bean是InitializingBean实例，则调用该bean的afterPropertiesSet()方法。这个方法用于你可以配置使用上面设置的BeanFactoryAware接口的返回的BeanFactory，或者初始化一些你需要的工作。 21.调用配置的初始化方法，如果你在bean定义中设置了init-method,就会使用反射机制调用定义的初始化方法。这个和上面的功能差不多，看情况合理使用。 22.初始化完成以后，调用后置处理器BeanPostProcessor实例的Object postProcessAfterInitialization(Object bean, String beanName)方法;给你一个已经完全可以使用的bean看你怎么处理了，或者包装这个bean或者返回这个bean，这个时候的bean基本已经定型了。如果你返回的object为null，正在循环的后置处理器将会跳过。如果该bean是FactoryBean,将调用这个回调FactoryBean实例和FactoryBean创建的对象。这个处理器可以决定是使用FactoryBean实例还是创建过的对象或者这个两个。通过返回的对象是否是FactoryBean的实例来检查。22.单例曝光对象后续处理 1.如果新bean是曝光对象，则从池中取出该真实对象引用，如果新的bean对象和之前的放入单例池中的对象是同一实例，也就是经过后置处理器等操作的都是同一实例bean，则把最新bean指向真实的对象应用。 2.如果已经改变了这个单例bean，则把单例池中的依赖关系解除掉，即从map中清除依赖。23.注册销毁方法 销毁方法只能应用于单例bean，所以注册单例的销毁方法。 注册销毁方法的条件： 1.该bean是单例的 下面任意一种方式都可以 2.如果DisposableBean实例bean 3.设置的beanDifition的销毁方法==(inferred)则自动查询该bean的close方法关闭 4.设置了销毁方法 5.当前工厂存在实现了DestructionAwareBeanPostProcessor接口的后置处理器。 然后把这些给定的参数设置构造一个DisposableBeanAdapter，放入销毁注册表Map&lt;String, Object&gt; disposableBeans中，缓存在该工厂中， 这不是在这阶段执行：我记录下： 销毁单例对象方式： 1.把单例缓存中存在的所有该bean的信息删除 2.把bean在销毁注册表中的销毁器删除 3.销毁在该工厂中缓存的所有bean的依赖对象 4.如果该bean实现了DisposableBean则调用该接口的void destroy()，进行销毁。 5.触发销毁包含过该bean的单例bean。 6.删除其他bean对象对该对象的依赖关系24.当bean是FactoryBean判断工厂是否是FactoryBean实例，如果beanName开头不是&amp;，并且该bean是BeanFactory的实例。则代表这个bean需要使用BeanFactory的getObject()方法。如果是不是FactoryBean则直接返回该bean。判断得到bean是工厂方法返回对象还是FactoryBean对象：使用&amp;+beanName访问的是FactoryBean实例返回的当前bean，否则使用beanName就是工厂方法getObject()返回的对象。否则该bean就是FactoyrBean，就调用其实例实现接口的getObject()返回的bean对象。GameOver！！！好累！！","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"}],"tags":[{"name":"bean","slug":"bean","permalink":"http://io.stelawliet.top/tags/bean/"}]},{"title":"","slug":"Java/spring/mvc/mvc csdn0","date":"2018-08-26T10:02:56.000Z","updated":"2018-08-26T10:12:29.000Z","comments":true,"path":"2018/08/26/Java/spring/mvc/mvc csdn0/","link":"","permalink":"http://io.stelawliet.top/2018/08/26/Java/spring/mvc/mvc csdn0/","excerpt":"","text":"SpringMVC核心分发器DispatcherServlet分析[附带源码分析]目录 前言 DispatcherServlet初始化过程 DispatcherServlet处理请求过程 总结 参考资料 前言SpringMVC是目前主流的Web MVC框架之一。 如果有同学对它不熟悉，那么请参考它的入门blog：http://www.cnblogs.com/fangjian0423/p/springMVC-introduction.html 本文将分析SpringMVC的核心分发器DispatcherServlet的初始化过程以及处理请求的过程，让读者了解这个入口Servlet的作用。 DispatcherServlet初始化过程在分析DispatcherServlet之前，我们先看下DispatcherServlet的继承关系。 img HttpSerlvetBean继承自HttpServlet。 HttpServletBean覆写了init方法，对初始化过程做了一些处理。 我们来看下init方法到底做了什么： img 1234567891011121314&lt;servlet&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springConfig/dispatcher-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; 比如上面这段配置，传递了contextConfigLocation参数，之后构造BeanWrapper，这里使用BeanWrapper，有2个理由：1. contextConfigLocation属性在FrameworkServlet中定义，HttpServletBean中未定义 2. 利用Spring的注入特性，只需要调用setPropertyValues方法就可将contextConfigLocation属性设置到对应实例中，也就是以依赖注入的方式初始化属性。 然后设置DispatcherServlet中的contextConfigLocation属性(FrameworkServlet中定义)为web.xml中读取的contextConfigLocation参数，该参数用于构造SpringMVC容器上下文。 下面看下FrameworkServlet这个类，FrameworkServlet继承自HttpServletBean。 首先来看下该类覆写的initServletBean方法： img 接下来看下initWebApplicationContext方法的具体实现逻辑： img img 这里的根上下文是web.xml中配置的ContextLoaderListener监听器中根据contextConfigLocation路径生成的上下文。 1234567&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springConfig/applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt;&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; 比如这段配置文件中根据classpath:springConfig/applicationContext.xml下的xml文件生成的根上下文。 最后看下DispatcherServlet。 DispatcherServlet覆写了FrameworkServlet中的onRefresh方法： img 很明显，initStrategies方法内部会初始化各个策略接口的实现类。 比如异常处理初始化initHandlerExceptionResolvers方法：SpringMVC异常处理机制详解 视图处理初始化initViewResolvers方法：SpringMVC视图机制详解 请求映射处理初始化initHandlerMappings方法：详解SpringMVC请求的时候是如何找到正确的Controller 总结一下各个Servlet的作用： 1. HttpServletBean 主要做一些初始化的工作，将web.xml中配置的参数设置到Servlet中。比如servlet标签的子标签init-param标签中配置的参数。 2. FrameworkServlet 将Servlet与Spring容器上下文关联。其实也就是初始化FrameworkServlet的属性webApplicationContext，这个属性代表SpringMVC上下文，它有个父类上下文，既web.xml中配置的ContextLoaderListener监听器初始化的容器上下文。 3. DispatcherServlet 初始化各个功能的实现类。比如异常处理、视图处理、请求映射处理等。 DispatcherServlet处理请求过程在分析DispatcherServlet处理请求过程之前，我们回顾一下Servlet对于请求的处理。 HttpServlet提供了service方法用于处理请求，service使用了模板设计模式，在内部对于http get方法会调用doGet方法，http post方法调用doPost方法……….. img 进入processRequest方法看下： img img 其中注册的监听器类型为ApplicationListener接口类型。 继续看DispatcherServlet覆写的doService方法： img 最终就是doDispatch方法。 doDispatch方法功能简单描述一下： 首先根据请求的路径找到HandlerMethod(带有Method反射属性，也就是对应Controller中的方法)，然后匹配路径对应的拦截器，有了HandlerMethod和拦截器构造个HandlerExecutionChain对象。HandlerExecutionChain对象的获取是通过HandlerMapping接口提供的方法中得到。有了HandlerExecutionChain之后，通过HandlerAdapter对象进行处理得到ModelAndView对象，HandlerMethod内部handle的时候，使用各种HandlerMethodArgumentResolver实现类处理HandlerMethod的参数，使用各种HandlerMethodReturnValueHandler实现类处理返回值。 最终返回值被处理成ModelAndView对象，这期间发生的异常会被HandlerExceptionResolver接口实现类进行处理。 总结本文分析了SpringMVC入口Servlet -&gt; DispatcherServlet的作用，其中分析了父类HttpServletBean以及FrameworkServlet的作用。 SpringMVC的设计与Struts2完全不同，Struts2采取的是一种完全和Web容器隔离和解耦的机制，而SpringMVC就是基于最基本的request和response进行设计。 文中难免有错误，希望读者能够指明出来。 参考资料http://my.oschina.net/lichhao/blog/102315 http://my.oschina.net/lichhao/blog/104943 http://jinnianshilongnian.iteye.com/blog/1602617 分类: java,SpringMVC 标签: java, spring, springmvc","categories":[],"tags":[]},{"title":"","slug":"TODOlist/2018-08-26","date":"2018-08-26T01:17:59.000Z","updated":"2018-09-01T13:23:12.000Z","comments":true,"path":"2018/08/26/TODOlist/2018-08-26/","link":"","permalink":"http://io.stelawliet.top/2018/08/26/TODOlist/2018-08-26/","excerpt":"","text":"spring mvc global exception params intercepter file upload note 高级映射. mybatis 延迟加载 回写 spring java configur xml annotation aop proxy &amp; spring cglib jdkProxy annotation aop note 事务 xml annotation crud account note word =&gt;&gt;&gt;&gt;MD spring mybatis 12还是护眼绿看着舒服一些.可以快捷键 Ctrl+~ 或者 view -&gt; quick switch scheme快速切换背景色.另外IDEA也自带了HTTP请求的测试工具在tools-&gt;HTTP Client","categories":[],"tags":[]},{"title":"BeanPostProcessor","slug":"Java/spring/ioc/BeanPostProcessor","date":"2018-08-25T13:43:04.000Z","updated":"2018-09-04T14:38:27.000Z","comments":true,"path":"2018/08/25/Java/spring/ioc/BeanPostProcessor/","link":"","permalink":"http://io.stelawliet.top/2018/08/25/Java/spring/ioc/BeanPostProcessor/","excerpt":"","text":"BeanPostProcessor summay Interface BeanPostProcessor 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768/** * Factory hook that allows for custom modification of new bean instances, * e.g. checking for marker interfaces or wrapping them with proxies. * * &lt;p&gt;ApplicationContexts can autodetect BeanPostProcessor beans in their * bean definitions and apply them to any beans subsequently created. * Plain bean factories allow for programmatic registration of post-processors, * applying to all beans created through this factory. * * &lt;p&gt;Typically, post-processors that populate beans via marker interfaces * or the like will implement &#123;@link #postProcessBeforeInitialization&#125;, * while post-processors that wrap beans with proxies will normally * implement &#123;@link #postProcessAfterInitialization&#125;. *允许自定义修改新bean实例的工厂钩子， * e.g.检查标记接口或用代理包装它们。 * ApplicationContexts可以在其bean定义中自动检测BeanPostProcessor bean，并将它们应用于随后创建 *的任何bean。 *普通bean工厂允许后处理器的程序化注册，*适用于通过该工厂创建的所有bean。 通常，通过标记接口 *等填充bean的后处理器将实现&#123;@link #postProcessBeforeInitialization&#125;， *而使用代理包装bean的后处理器通常会实现&#123;@link #postProcessAfterInitialization&#125;。 * * @author Juergen Hoeller * @since 10.10.2003 * @see InstantiationAwareBeanPostProcessor * @see DestructionAwareBeanPostProcessor * @see ConfigurableBeanFactory#addBeanPostProcessor * @see BeanFactoryPostProcessor */public interface BeanPostProcessor &#123; /** * Apply this BeanPostProcessor to the given new bean instance &lt;i&gt;before&lt;/i&gt; any bean * initialization callbacks (like InitializingBean's &#123;@code afterPropertiesSet&#125; * or a custom init-method). The bean will already be populated with property values. * The returned bean instance may be a wrapper around the original. * @param bean the new bean instance * @param beanName the name of the bean * @return the bean instance to use, either the original or a wrapped one; * if &#123;@code null&#125;, no subsequent BeanPostProcessors will be invoked * @throws org.springframework.beans.BeansException in case of errors * @see org.springframework.beans.factory.InitializingBean#afterPropertiesSet */ Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException; /** * Apply this BeanPostProcessor to the given new bean instance &lt;i&gt;after&lt;/i&gt; any bean * initialization callbacks (like InitializingBean's &#123;@code afterPropertiesSet&#125; * or a custom init-method). The bean will already be populated with property values. * The returned bean instance may be a wrapper around the original. * &lt;p&gt;In case of a FactoryBean, this callback will be invoked for both the FactoryBean * instance and the objects created by the FactoryBean (as of Spring 2.0). The * post-processor can decide whether to apply to either the FactoryBean or created * objects or both through corresponding &#123;@code bean instanceof FactoryBean&#125; checks. * &lt;p&gt;This callback will also be invoked after a short-circuiting triggered by a * &#123;@link InstantiationAwareBeanPostProcessor#postProcessBeforeInstantiation&#125; method, * in contrast to all other BeanPostProcessor callbacks. * @param bean the new bean instance * @param beanName the name of the bean * @return the bean instance to use, either the original or a wrapped one; * if &#123;@code null&#125;, no subsequent BeanPostProcessors will be invoked * @throws org.springframework.beans.BeansException in case of errors * @see org.springframework.beans.factory.InitializingBean#afterPropertiesSet * @see org.springframework.beans.factory.FactoryBean */ Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;&#125; postProcessorAfterInitization() 任何bean 初始化回调（如InitializingBean的{@code afterPropertiesSet} 或自定义init方法）后，将此BeanPostProcessor应用于给定的新bean实例。 bean已经填充了属性值。 返回的bean实例可能是原始实例的包装器。 对于FactoryBean，将为FactoryBean 实例和FactoryBean创建的对象（从Spring 2.0开始）调用此回调。 后处理器可以通过相应的 bean instanceof FactoryBean检查来决定是应用于FactoryBean还是创建*对象。 与所有其他BeanPostProcessor回调相比， 在 {@link InstantiationAwareBeanPostProcessor＃postProcessBeforeInstantiation}方法触发的短路后，也会调用此回调。 BeanFactoryPostProcessorBeanDefinitionRegistryPostProcessor123456789101112131415161718192021222324/** * Extension to the standard &#123;@link BeanFactoryPostProcessor&#125; SPI, allowing for * the registration of further bean definitions &lt;i&gt;before&lt;/i&gt; regular * BeanFactoryPostProcessor detection kicks in. In particular, * BeanDefinitionRegistryPostProcessor may register further bean definitions * which in turn define BeanFactoryPostProcessor instances. * * @author Juergen Hoeller * @since 3.0.1 * @see org.springframework.context.annotation.ConfigurationClassPostProcessor */public interface BeanDefinitionRegistryPostProcessor extends BeanFactoryPostProcessor &#123; /** * Modify the application context&apos;s internal bean definition registry after its * standard initialization. All regular bean definitions will have been loaded, * but no beans will have been instantiated yet. This allows for adding further * bean definitions before the next post-processing phase kicks in. * @param registry the bean definition registry used by the application context * @throws org.springframework.beans.BeansException in case of errors */ void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException;&#125;","categories":[],"tags":[{"name":"beanPostProcessor","slug":"beanPostProcessor","permalink":"http://io.stelawliet.top/tags/beanPostProcessor/"}]},{"title":"","slug":"Java/spring/ioc/ioc@SGG","date":"2018-08-25T08:14:47.000Z","updated":"2018-08-25T08:15:55.000Z","comments":true,"path":"2018/08/25/Java/spring/ioc/ioc@SGG/","link":"","permalink":"http://io.stelawliet.top/2018/08/25/Java/spring/ioc/ioc@SGG/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167Spring容器的refresh()【创建刷新】;1、prepareRefresh()刷新前的预处理; 1）、initPropertySources()初始化一些属性设置;子类自定义个性化的属性设置方法； 2）、getEnvironment().validateRequiredProperties();检验属性的合法等 3）、earlyApplicationEvents= new LinkedHashSet&lt;ApplicationEvent&gt;();保存容器中的一些早期的事件；2、obtainFreshBeanFactory();获取BeanFactory； 1）、refreshBeanFactory();刷新【创建】BeanFactory； 创建了一个this.beanFactory = new DefaultListableBeanFactory(); 设置id； 2）、getBeanFactory();返回刚才GenericApplicationContext创建的BeanFactory对象； 3）、将创建的BeanFactory【DefaultListableBeanFactory】返回；3、prepareBeanFactory(beanFactory);BeanFactory的预准备工作（BeanFactory进行一些设置）； 1）、设置BeanFactory的类加载器、支持表达式解析器... 2）、添加部分BeanPostProcessor【ApplicationContextAwareProcessor】 3）、设置忽略的自动装配的接口EnvironmentAware、EmbeddedValueResolverAware、xxx； 4）、注册可以解析的自动装配；我们能直接在任何组件中自动注入： BeanFactory、ResourceLoader、ApplicationEventPublisher、ApplicationContext 5）、添加BeanPostProcessor【ApplicationListenerDetector】 6）、添加编译时的AspectJ； 7）、给BeanFactory中注册一些能用的组件； environment【ConfigurableEnvironment】、 systemProperties【Map&lt;String, Object&gt;】、 systemEnvironment【Map&lt;String, Object&gt;】4、postProcessBeanFactory(beanFactory);BeanFactory准备工作完成后进行的后置处理工作； 1）、子类通过重写这个方法来在BeanFactory创建并预准备完成以后做进一步的设置======================以上是BeanFactory的创建及预准备工作==================================5、invokeBeanFactoryPostProcessors(beanFactory);执行BeanFactoryPostProcessor的方法； BeanFactoryPostProcessor：BeanFactory的后置处理器。在BeanFactory标准初始化之后执行的； 两个接口：BeanFactoryPostProcessor、BeanDefinitionRegistryPostProcessor 1）、执行BeanFactoryPostProcessor的方法； 先执行BeanDefinitionRegistryPostProcessor 1）、获取所有的BeanDefinitionRegistryPostProcessor； 2）、看先执行实现了PriorityOrdered优先级接口的BeanDefinitionRegistryPostProcessor、 postProcessor.postProcessBeanDefinitionRegistry(registry) 3）、在执行实现了Ordered顺序接口的BeanDefinitionRegistryPostProcessor； postProcessor.postProcessBeanDefinitionRegistry(registry) 4）、最后执行没有实现任何优先级或者是顺序接口的BeanDefinitionRegistryPostProcessors； postProcessor.postProcessBeanDefinitionRegistry(registry) 再执行BeanFactoryPostProcessor的方法 1）、获取所有的BeanFactoryPostProcessor 2）、看先执行实现了PriorityOrdered优先级接口的BeanFactoryPostProcessor、 postProcessor.postProcessBeanFactory() 3）、在执行实现了Ordered顺序接口的BeanFactoryPostProcessor； postProcessor.postProcessBeanFactory() 4）、最后执行没有实现任何优先级或者是顺序接口的BeanFactoryPostProcessor； postProcessor.postProcessBeanFactory()6、registerBeanPostProcessors(beanFactory);注册BeanPostProcessor（Bean的后置处理器）【 intercept bean creation】 不同接口类型的BeanPostProcessor；在Bean创建前后的执行时机是不一样的 BeanPostProcessor、 DestructionAwareBeanPostProcessor、 InstantiationAwareBeanPostProcessor、 SmartInstantiationAwareBeanPostProcessor、 MergedBeanDefinitionPostProcessor【internalPostProcessors】、 1）、获取所有的 BeanPostProcessor;后置处理器都默认可以通过PriorityOrdered、Ordered接口来执行优先级 2）、先注册PriorityOrdered优先级接口的BeanPostProcessor； 把每一个BeanPostProcessor；添加到BeanFactory中 beanFactory.addBeanPostProcessor(postProcessor); 3）、再注册Ordered接口的 4）、最后注册没有实现任何优先级接口的 5）、最终注册MergedBeanDefinitionPostProcessor； 6）、注册一个ApplicationListenerDetector；来在Bean创建完成后检查是否是ApplicationListener，如果是 applicationContext.addApplicationListener((ApplicationListener&lt;?&gt;) bean);7、initMessageSource();初始化MessageSource组件（做国际化功能；消息绑定，消息解析）； 1）、获取BeanFactory 2）、看容器中是否有id为messageSource的，类型是MessageSource的组件 如果有赋值给messageSource，如果没有自己创建一个DelegatingMessageSource； MessageSource：取出国际化配置文件中的某个key的值；能按照区域信息获取； 3）、把创建好的MessageSource注册在容器中，以后获取国际化配置文件的值的时候，可以自动注入MessageSource； beanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, this.messageSource); MessageSource.getMessage(String code, Object[] args, String defaultMessage, Locale locale);8、initApplicationEventMulticaster();初始化事件派发器； 1）、获取BeanFactory 2）、从BeanFactory中获取applicationEventMulticaster的ApplicationEventMulticaster； 3）、如果上一步没有配置；创建一个SimpleApplicationEventMulticaster 4）、将创建的ApplicationEventMulticaster添加到BeanFactory中，以后其他组件直接自动注入9、onRefresh();留给子容器（子类） 1、子类重写这个方法，在容器刷新的时候可以自定义逻辑；10、registerListeners();给容器中将所有项目里面的ApplicationListener注册进来； 1、从容器中拿到所有的ApplicationListener 2、将每个监听器添加到事件派发器中； getApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName); 3、派发之前步骤产生的事件；11、finishBeanFactoryInitialization(beanFactory);初始化所有剩下的单实例bean； 1、beanFactory.preInstantiateSingletons();初始化后剩下的单实例bean 1）、获取容器中的所有Bean，依次进行初始化和创建对象 2）、获取Bean的定义信息；RootBeanDefinition 3）、Bean不是抽象的，是单实例的，是懒加载； 1）、判断是否是FactoryBean；是否是实现FactoryBean接口的Bean； 2）、不是工厂Bean。利用getBean(beanName);创建对象 0、getBean(beanName)； ioc.getBean(); 1、doGetBean(name, null, null, false); 2、先获取缓存中保存的单实例Bean。如果能获取到说明这个Bean之前被创建过（所有创建过的单实例Bean都会被缓存起来） 从private final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;String, Object&gt;(256);获取的 3、缓存中获取不到，开始Bean的创建对象流程； 4、标记当前bean已经被创建 5、获取Bean的定义信息； 6、【获取当前Bean依赖的其他Bean;如果有按照getBean()把依赖的Bean先创建出来；】 7、启动单实例Bean的创建流程； 1）、createBean(beanName, mbd, args); 2）、Object bean = resolveBeforeInstantiation(beanName, mbdToUse);让BeanPostProcessor先拦截返回代理对象； 【InstantiationAwareBeanPostProcessor】：提前执行； 先触发：postProcessBeforeInstantiation()； 如果有返回值：触发postProcessAfterInitialization()； 3）、如果前面的InstantiationAwareBeanPostProcessor没有返回代理对象；调用4） 4）、Object beanInstance = doCreateBean(beanName, mbdToUse, args);创建Bean 1）、【创建Bean实例】；createBeanInstance(beanName, mbd, args); 利用工厂方法或者对象的构造器创建出Bean实例； 2）、applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName); 调用MergedBeanDefinitionPostProcessor的postProcessMergedBeanDefinition(mbd, beanType, beanName); 3）、【Bean属性赋值】populateBean(beanName, mbd, instanceWrapper); 赋值之前： 1）、拿到InstantiationAwareBeanPostProcessor后置处理器； postProcessAfterInstantiation()； 2）、拿到InstantiationAwareBeanPostProcessor后置处理器； postProcessPropertyValues()； =====赋值之前：=== 3）、应用Bean属性的值；为属性利用setter方法等进行赋值； applyPropertyValues(beanName, mbd, bw, pvs); 4）、【Bean初始化】initializeBean(beanName, exposedObject, mbd); 1）、【执行Aware接口方法】invokeAwareMethods(beanName, bean);执行xxxAware接口的方法 BeanNameAware\\BeanClassLoaderAware\\BeanFactoryAware 2）、【执行后置处理器初始化之前】applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName); BeanPostProcessor.postProcessBeforeInitialization（）; 3）、【执行初始化方法】invokeInitMethods(beanName, wrappedBean, mbd); 1）、是否是InitializingBean接口的实现；执行接口规定的初始化； 2）、是否自定义初始化方法； 4）、【执行后置处理器初始化之后】applyBeanPostProcessorsAfterInitialization BeanPostProcessor.postProcessAfterInitialization()； 5）、注册Bean的销毁方法； 5）、将创建的Bean添加到缓存中singletonObjects； ioc容器就是这些Map；很多的Map里面保存了单实例Bean，环境信息。。。。； 所有Bean都利用getBean创建完成以后； 检查所有的Bean是否是SmartInitializingSingleton接口的；如果是；就执行afterSingletonsInstantiated()；12、finishRefresh();完成BeanFactory的初始化创建工作；IOC容器就创建完成； 1）、initLifecycleProcessor();初始化和生命周期有关的后置处理器；LifecycleProcessor 默认从容器中找是否有lifecycleProcessor的组件【LifecycleProcessor】；如果没有new DefaultLifecycleProcessor(); 加入到容器； 写一个LifecycleProcessor的实现类，可以在BeanFactory void onRefresh(); void onClose(); 2）、 getLifecycleProcessor().onRefresh(); 拿到前面定义的生命周期处理器（BeanFactory）；回调onRefresh()； 3）、publishEvent(new ContextRefreshedEvent(this));发布容器刷新完成事件； 4）、liveBeansView.registerApplicationContext(this); ======总结=========== 1）、Spring容器在启动的时候，先会保存所有注册进来的Bean的定义信息； 1）、xml注册bean；&lt;bean&gt; 2）、注解注册Bean；@Service、@Component、@Bean、xxx 2）、Spring容器会合适的时机创建这些Bean 1）、用到这个bean的时候；利用getBean创建bean；创建好以后保存在容器中； 2）、统一创建剩下所有的bean的时候；finishBeanFactoryInitialization()； 3）、后置处理器；BeanPostProcessor 1）、每一个bean创建完成，都会使用各种后置处理器进行处理；来增强bean的功能； AutowiredAnnotationBeanPostProcessor:处理自动注入 AnnotationAwareAspectJAutoProxyCreator:来做AOP功能； xxx.... 增强的功能注解： AsyncAnnotationBeanPostProcessor .... 4）、事件驱动模型； ApplicationListener；事件监听； ApplicationEventMulticaster；事件派发：","categories":[],"tags":[]},{"title":"","slug":"Linux/shell0","date":"2018-08-24T08:16:20.000Z","updated":"2018-08-24T08:23:57.000Z","comments":true,"path":"2018/08/24/Linux/shell0/","link":"","permalink":"http://io.stelawliet.top/2018/08/24/Linux/shell0/","excerpt":"","text":"本文结合大量实例阐述如何编写一个shell脚本。 为什么要进行shell编程 在Linux系统中，虽然有各种各样的图形化接口工具，但是sell仍然是一个非常灵活的工具。Shell不仅仅是命令的收集，而且是一门非常棒的编程语言。您可以通过使用shell使大量的任务自动化，shell特别擅长系统管理任务，尤其适合那些易用性、可维护性和便携性比效率更重要的任务。 下面，让我们一起来看看shell是如何工作的： 建立一个脚本 Linux中有好多中不同的shell，但是通常我们使用bash (bourne again shell) 进行shell编程，因为bash是免费的并且很容易使用。所以在本文中笔者所提供的脚本都是使用bash（但是在大多数情况下，这些脚本同样可以在bash的大姐，bourne shell中运行）。 如同其他语言一样，通过我们使用任意一种文字编辑器，比如nedit、kedit、emacs、vi 等来编写我们的shell程序。 程序必须以下面的行开始（必须方在文件的第一行）： #!/bin/sh 符号#!用来告诉系统它后面的参数是用来执行该文件的程序。在这个例子中我们使用/bin/sh来执行程序。 当编辑好脚本时，如果要执行该脚本，还必须使其可执行。 要使脚本可执行： chmod +x filename 然后，您可以通过输入： ./filename 来执行您的脚本。 注释 在进行shell编程时，以#开头的句子表示注释，直到这一行的结束。我们真诚地建议您在程序中使用注释。如果您使用了注释，那么即使相当长的时间内没有使用该脚本，您也能在很短的时间内明白该脚本的作用及工作原理。 变量 在其他编程语言中您必须使用变量。在shell编程中，所有的变量都由字符串组成，并且您不需要对变量进行声明。要赋值给一个变量，您可以这样写： 变量名=值 取出变量值可以加一个美元符号（$）在变量前面： #!/bin/sh #对变量赋值： a=”hello world” # 现在打印变量a的内容： echo “A is:” echo $a 在您的编辑器中输入以上内容，然后将其保存为一个文件first。之后执行chmod +x first 使其可执行，最后输入./first执行该脚本。 这个脚本将会输出： A is: hello world 有时候变量名很容易与其他文字混淆，比如： num=2 echo “this is the $numnd” 这并不会打印出”this is the 2nd”，而仅仅打印”this is the “，因为shell会去搜索变量numnd的值，但是这个变量时没有值的。可以使用花括号来告诉shell我们要打印的是num变量： num=2 echo “this is the ${num}nd” 这将打印： this is the 2nd 有许多变量是系统自动设定的，这将在后面使用这些变量时进行讨论。 如果您需要处理数学表达式，那么您需要使用诸如expr等程序（见下面）。 除了一般的仅在程序内有效的shell变量以外，还有环境变量。由export关键字处理过的变量叫做环境变量。我们不对环境变量进行讨论，因为通常情况下仅仅在登录脚本中使用环境变量。 Shell命令和流程控制 在shell脚本中可以使用三类命令： 1)Unix 命令: 虽然在shell脚本中可以使用任意的unix命令，但是还是由一些相对更常用的命令。这些命令通常是用来进行文件和文字操作的。 常用命令语法及功能 echo “some text”: 将文字内容打印在屏幕上 ls: 文件列表 wc –l filewc -w filewc -c file: 计算文件行数计算文件中的单词数计算文件中的字符数 cp sourcefile destfile: 文件拷贝 mv oldname newname : 重命名文件或移动文件 rm file: 删除文件 grep ‘pattern’ file: 在文件内搜索字符串比如：grep ‘searchstring’ file.txt cut -b colnum file: 指定欲显示的文件内容范围，并将它们输出到标准输出设备比如：输出每行第5个到第9个字符cut -b5-9 file.txt千万不要和cat命令混淆，这是两个完全不同的命令 cat file.txt: 输出文件内容到标准输出设备（屏幕）上 file somefile: 得到文件类型 read var: 提示用户输入，并将输入赋值给变量 sort file.txt: 对file.txt文件中的行进行排序 uniq: 删除文本文件中出现的行列比如： sort file.txt | uniq expr: 进行数学运算Example: add 2 and 3expr 2 “+” 3 find: 搜索文件比如：根据文件名搜索find . -name filename -print tee: 将数据输出到标准输出设备(屏幕) 和文件比如：somecommand | tee outfile basename file: 返回不包含路径的文件名比如： basename /bin/tux将返回 tux dirname file: 返回文件所在路径比如：dirname /bin/tux将返回 /bin head file: 打印文本文件开头几行 tail file : 打印文本文件末尾几行 sed: Sed是一个基本的查找替换程序。可以从标准输入（比如命令管道）读入文本，并将结果输出到标准输出（屏幕）。该命令采用正则表达式（见参考）进行搜索。不要和shell中的通配符相混淆。比如：将linuxfocus 替换为 LinuxFocus ：cat text.file | sed ‘s/linuxfocus/LinuxFocus/‘ &gt; newtext.file awk: awk 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。cat file.txt | awk -F, ‘{print $1 “,” $3 }’这里我们使用，作为字段分割符，同时打印第一个和第三个字段。如果该文件内容如下： Adam Bor, 34, IndiaKerry Miller, 22, USA命令输出结果为：Adam Bor, IndiaKerry Miller, USA 2) 概念: 管道, 重定向和 backtick 这些不是系统命令，但是他们真的很重要。 管道 (|) 将一个命令的输出作为另外一个命令的输入。 grep “hello” file.txt | wc -l 在file.txt中搜索包含有”hello”的行并计算其行数。 在这里grep命令的输出作为wc命令的输入。当然您可以使用多个命令。 重定向：将命令的结果输出到文件，而不是标准输出（屏幕）。 &gt; 写入文件并覆盖旧文件 &gt; &gt; &gt;&gt; 加到文件的尾部，保留旧文件内容。 反短斜线 使用反短斜线可以将一个命令的输出作为另外一个命令的一个命令行参数。 命令： find . -mtime -1 -type f -print 用来查找过去24小时（-mtime –2则表示过去48小时）内修改过的文件。如果您想将所有查找到的文件打一个包，则可以使用以下脚本： #!/bin/sh # The ticks are backticks () not normal quotes (&#39;): tar -zcvf lastmod.tar.gzfind . -mtime -1 -type f -print` 3) 流程控制 “if” 表达式 如果条件为真则执行then后面的部分： if ….; then …. elif ….; then …. else …. fi 大多数情况下，可以使用测试命令来对条件进行测试。比如可以比较字符串、判断文件是否存在及是否可读等等… 通常用” [ ] “来表示条件测试。注意这里的空格很重要。要确保方括号的空格。 [ -f “somefile” ] ：判断是否是一个文件 [ -x “/bin/ls” ] ：判断/bin/ls是否存在并有可执行权限 [ -n “$var” ] ：判断$var变量是否有值 [ “$a” = “$b” ] ：判断$a和$b是否相等 执行man test可以查看所有测试表达式可以比较和判断的类型。 直接执行以下脚本： #!/bin/sh if [ “$SHELL” = “/bin/bash” ]; then echo “your login shell is the bash (bourne again shell)” else echo “your login shell is not bash but $SHELL” fi 变量$SHELL包含了登录shell的名称，我们和/bin/bash进行了比较。 快捷操作符 熟悉C语言的朋友可能会很喜欢下面的表达式： [ -f “/etc/shadow” ] &amp;&amp; echo “This computer uses shadow passwors” 这里 &amp;&amp; 就是一个快捷操作符，如果左边的表达式为真则执行右边的语句。您也可以认为是逻辑运算中的与操作。上例中表示如果/etc/shadow文件存在则打印” This computer uses shadow passwors”。同样或操作(||)在shell编程中也是可用的。这里有个例子： #!/bin/shmailfolder=/var/spool/mail/james[ -r “$mailfolder” ]’ ‘{ echo “Can not read $mailfolder” ; exit 1; }echo “$mailfolder has mail from:”grep “^From “ $mailfolder 该脚本首先判断mailfolder是否可读。如果可读则打印该文件中的”From” 一行。如果不可读则或操作生效，打印错误信息后脚本退出。这里有个问题，那就是我们必须有两个命令：-打印错误信息-退出程序 我们使用花括号以匿名函数的形式将两个命令放到一起作为一个命令使用。一般函数将在下文提及。 不用与和或操作符，我们也可以用if表达式作任何事情，但是使用与或操作符会更便利很多。 case表达式可以用来匹配一个给定的字符串，而不是数字。case … in…) do something here ;;esac 让我们看一个例子。 file命令可以辨别出一个给定文件的文件类型，比如：file lf.gz 这将返回：lf.gz: gzip compressed data, deflated, original filename,last modified: Mon Aug 27 23:09:18 2001, os: Unix我们利用这一点写了一个叫做smartzip的脚本，该脚本可以自动解压bzip2, gzip 和zip 类型的压缩文件： #!/bin/shftype=file &quot;$1&quot;case “$ftype” in“$1: Zip archive”) unzip “$1” ;;“$1: gzip compressed”) gunzip “$1” ;;“$1: bzip2 compressed”) bunzip2 “$1” ;; ) error “File $1 can not be uncompressed with smartzip”;;esac 您可能注意到我们在这里使用了一个特殊的变量$1。该变量包含了传递给该程序的第一个参数值。也就是说，当我们运行：smartzip articles.zip$1 就是字符串 articles.zip select 表达式是一种bash的扩展应用，尤其擅长于交互式使用。用户可以从一组不同的值中进行选择。select var in … ; do breakdone…. now $var can be used ….下面是一个例子： #!/bin/shecho “What is your favourite OS?”select var in “Linux” “Gnu Hurd” “Free BSD” “Other”; do breakdoneecho “You have selected $var”下面是该脚本运行的结果：What is your favourite OS?1) Linux2) Gnu Hurd3) Free BSD4) Other #? 1You have selected Linux 您也可以在shell中使用如下的loop表达式：while …; do….done while-loop 将运行直到表达式测试为真。will run while the expression that we test for is true. 关键字”break” 用来跳出循环。而关键字”continue”用来不执行余下的部分而直接跳到下一个循环。 for-loop表达式查看一个字符串列表 (字符串用空格分隔) 然后将其赋给一个变量：for var in ….; do ….done 在下面的例子中，将分别打印ABC到屏幕上： #!/bin/shfor var in A B C ; do echo “var is $var”done 下面是一个更为有用的脚本showrpm，其功能是打印一些RPM包的统计信息： #!/bin/sh list a content summary of a number of RPM packagesUSAGE: showrpm rpmfile1 rpmfile2 …EXAMPLE: showrpm /cdrom/RedHat/RPMS/*.rpmfor rpmpackage in $*; do if [ -r “$rpmpackage” ];then echo “=============== $rpmpackage ==============” rpm -qi -p $rpmpackage else echo “ERROR: cannot read file $rpmpackage” fidone 这里出现了第二个特殊的变量$，该变量包含了所有输入的命令行参数值。如果您运行showrpm openssh.rpm w3m.rpm webgrep.rpm此时 $ 包含了 3 个字符串，即openssh.rpm, w3m.rpm and webgrep.rpm. 引号在向程序传递任何参数之前，程序会扩展通配符和变量。这里所谓扩展的意思是程序会把通配符（比如*）替换成合适的文件名，它变量替换成变量值。为了防止程序作这种替换，您可以使用引号：让我们来看一个例子，假设在当前目录下有一些文件，两个jpg文件， mail.jpg 和tux.jpg。 #!/bin/shecho *.jpg这将打印出”mail.jpg tux.jpg”的结果。引号 (单引号和双引号) 将防止这种通配符扩展： #!/bin/shecho “.jpg”echo ‘.jpg’这将打印”*.jpg” 两次。单引号更严格一些。它可以防止任何变量扩展。双引号可以防止通配符扩展但允许变量扩展。 #!/bin/shecho $SHELLecho “$SHELL”echo ‘$SHELL’ 运行结果为：/bin/bash/bin/bash$SHELL 最后，还有一种防止这种扩展的方法，那就是使用转义字符——反斜杆：echo .jpgecho $SHELL这将输出： .jpg$SHELLHere documents 当要将几行文字传递给一个命令时，here documents（译者注：目前还没有见到过对该词适合的翻译）一种不错的方法。对每个脚本写一段帮助性的文字是很有用的，此时如果我们四有那个here documents就不必用echo函数一行行输出。 一个 “Here document” 以 &lt;&lt; 开头，后面接上一个字符串，这个字符串还必须出现在here document的末尾。下面是一个例子，在该例子中，我们对多个文件进行重命名，并且使用here documents打印帮助： #!/bin/sh we have less than 3 arguments. Print the help text:if [ $# -lt 3 ] ; thencat &lt;&lt;HELPren – renames a number of files using sed regular expressions USAGE: ren ‘regexp’ ‘replacement’ files… EXAMPLE: rename all .HTM files in .html: ren ‘HTM$’ ‘html’ *.HTM HELP exit 0fiOLD=”$1”NEW=”$2” The shift command removes one argument from the list ofcommand line arguments.shiftshift $* contains now all the files:for file in $*; do if [ -f “$file” ] ; then newfile=echo &quot;$file&quot; | sed &quot;s/${OLD}/${NEW}/g&quot; if [ -f “$newfile” ]; then echo “ERROR: $newfile exists already” else echo “renaming $file to $newfile …” mv “$file” “$newfile” fi fidone 这是一个复杂一些的例子。让我们详细讨论一下。第一个if表达式判断输入命令行参数是否小于3个 (特殊变量$# 表示包含参数的个数) 。如果输入参数小于3个，则将帮助文字传递给cat命令，然后由cat命令将其打印在屏幕上。打印帮助文字后程序退出。 如果输入参数等于或大于3个，我们就将第一个参数赋值给变量OLD，第二个参数赋值给变量NEW。下一步，我们使用shift命令将第一个和第二个参数从参数列表中删除，这样原来的第三个参数就成为参数列表$*的第一个参数。然后我们开始循环，命令行参数列表被一个接一个地被赋值给变量$file。接着我们判断该文件是否存在，如果存在则通过sed命令搜索和替换来产生新的文件名。然后将反短斜线内命令结果赋值给newfile。这样我们就达到了我们的目的：得到了旧文件名和新文件名。然后使用mv命令进行重命名。 函数 如果您写了一些稍微复杂一些的程序，您就会发现在程序中可能在几个地方使用了相同的代码，并且您也会发现，如果我们使用了函数，会方便很多。一个函数是这个样子的：functionname(){ inside the body $1 is the first argument given to the function$2 the second …body}您需要在每个程序的开始对函数进行声明。 下面是一个叫做xtitlebar的脚本，使用这个脚本您可以改变终端窗口的名称。这里使用了一个叫做help的函数。正如您可以看到的那样，这个定义的函数被使用了两次。 #!/bin/sh vim: set sw=4 ts=4 et:help(){ cat &lt;&lt;HELPxtitlebar – change the name of an xterm, gnome-terminal or kde konsole USAGE: xtitlebar [-h] “string_for_titelbar” OPTIONS: -h help text EXAMPLE: xtitlebar “cvs” HELP exit 0} in case of error or if -h is given we call the function help:[ -z “$1” ] &amp;&amp; help[ “$1” = “-h” ] &amp;&amp; help send the escape sequence to change the xterm titelbar:echo -e “33]0;$107”# 在脚本中提供帮助是一种很好的编程习惯，这样方便其他用户（和您）使用和理解脚本。 命令行参数 我们已经见过$* 和 $1, $2 … $9 等特殊变量，这些特殊变量包含了用户从命令行输入的参数。迄今为止，我们仅仅了解了一些简单的命令行语法（比如一些强制性的参数和查看帮助的-h选项）。但是在编写更复杂的程序时，您可能会发现您需要更多的自定义的选项。通常的惯例是在所有可选的参数之前加一个减号，后面再加上参数值 (比如文件名)。 有好多方法可以实现对输入参数的分析，但是下面的使用case表达式的例子无遗是一个不错的方法。 #!/bin/shhelp(){ cat &lt;&lt;HELPThis is a generic command line parser demo.USAGE EXAMPLE: cmdparser -l hello -f – -somefile1 somefile2HELP exit 0} while [ -n “$1” ]; docase $1 in -h) help;shift 1;; # function help is called -f) opt_f=1;shift 1;; # variable opt_f is set -l) opt_l=$2;shift 2;; # -l takes an argument -&gt; shift by 2 –) shift;break;; # end of options -) echo “error: no such option $1. -h for help”;exit 1;; ) break;;esacdone echo “opt_f is $opt_f”echo “opt_l is $opt_l”echo “first arg is $1”echo “2nd arg is $2” 您可以这样运行该脚本：cmdparser -l hello -f – -somefile1 somefile2 返回的结果是：opt_f is 1opt_l is hellofirst arg is -somefile12nd arg is somefile2 这个脚本是如何工作的呢？脚本首先在所有输入命令行参数中进行循环，将输入参数与case表达式进行比较，如果匹配则设置一个变量并且移除该参数。根据unix系统的惯例，首先输入的应该是包含减号的参数。 实例 一般编程步骤 现在我们来讨论编写一个脚本的一般步骤。任何优秀的脚本都应该具有帮助和输入参数。并且写一个伪脚本（framework.sh），该脚本包含了大多数脚本都需要的框架结构，是一个非常不错的主意。这时候，在写一个新的脚本时我们只需要执行一下copy命令：cp framework.sh myscript然后再插入自己的函数。 让我们再看两个例子： 二进制到十进制的转换 脚本 b2d 将二进制数 (比如 1101) 转换为相应的十进制数。这也是一个用expr命令进行数学运算的例子： #!/bin/sh vim: set sw=4 ts=4 et:help(){ cat &lt;&lt;HELPb2h – convert binary to decimal USAGE: b2h [-h] binarynum OPTIONS: -h help text EXAMPLE: b2h 111010will return 58HELP exit 0} error(){ # print an error and exit echo “$1” exit 1} lastchar(){ # return the last character of a string in $rval if [ -z “$1” ]; then # empty string rval=”” return fi # wc puts some space behind the output this is why we need sed: numofchar=echo -n &quot;$1&quot; | wc -c | sed &#39;s/ //g&#39; # now cut out the last char rval=echo -n &quot;$1&quot; | cut -b $numofchar} chop(){ # remove the last character in string and return it in $rval if [ -z “$1” ]; then # empty string rval=”” return fi # wc puts some space behind the output this is why we need sed: numofchar=echo -n &quot;$1&quot; | wc -c | sed &#39;s/ //g&#39; if [ “$numofchar” = “1” ]; then # only one char in string rval=”” return fi numofcharminus1=expr $numofchar &quot;-&quot; 1 # now cut all but the last char: rval=echo -n &quot;$1&quot; | cut -b 0-${numofcharminus1}} while [ -n “$1” ]; docase $1 in -h) help;shift 1;; # function help is called –) shift;break;; # end of options -) error “error: no such option $1. -h for help”;; ) break;;esacdone The main programsum=0weight=1 one arg must be given:[ -z “$1” ] &amp;&amp; helpbinnum=”$1”binnumorig=”$1” while [ -n “$binnum” ]; do lastchar “$binnum” if [ “$rval” = “1” ]; then sum=expr &quot;$weight&quot; &quot;+&quot; &quot;$sum&quot; fi # remove the last position in $binnum chop “$binnum” binnum=”$rval” weight=expr &quot;$weight&quot; &quot;*&quot; 2done echo “binary $binnumorig is decimal $sum”# 该脚本使用的算法是利用十进制和二进制数权值 (1,2,4,8,16,..)，比如二进制”10”可以这样转换成十进制： 0 1 + 1 2 = 2 为了得到单个的二进制数我们是用了lastchar 函数。该函数使用wc –c计算字符个数，然后使用cut命令取出末尾一个字符。Chop函数的功能则是移除最后一个字符。 文件循环程序 或许您是想将所有发出的邮件保存到一个文件中的人们中的一员，但是在过了几个月以后，这个文件可能会变得很大以至于使对该文件的访问速度变慢。下面的脚本rotatefile 可以解决这个问题。这个脚本可以重命名邮件保存文件（假设为outmail）为outmail.1，而对于outmail.1就变成了outmail.2 等等等等… #!/bin/sh vim: set sw=4 ts=4 et:ver=”0.1”help(){ cat &lt;&lt;HELProtatefile – rotate the file name USAGE: rotatefile [-h] filename OPTIONS: -h help text EXAMPLE: rotatefile outThis will e.g rename out.2 to out.3, out.1 to out.2, out to out.1and create an empty out-file The max number is 10 version $verHELP exit 0} error(){ echo “$1” exit 1}while [ -n “$1” ]; docase $1 in -h) help;shift 1;; –) break;; -) echo “error: no such option $1. -h for help”;exit 1;; ) break;;esacdone input check:if [ -z “$1” ] ; thenerror “ERROR: you must specify a file, use -h for help”fifilen=”$1” rename any .1 , .2 etc file:for n in 9 8 7 6 5 4 3 2 1; do if [ -f “$filen.$n” ]; then p=expr $n + 1 echo “mv $filen.$n $filen.$p” mv $filen.$n $filen.$p fidone rename the original file:if [ -f “$filen” ]; then echo “mv $filen $filen.1” mv $filen $filen.1fiecho touch $filentouch $filen 这个脚本是如何工作的呢？在检测用户提供了一个文件名以后，我们进行一个9到1的循环。文件9被命名为10，文件8重命名为9等等。循环完成之后，我们将原始文件命名为文件1同时建立一个与原始文件同名的空文件。 调试 最简单的调试命令当然是使用echo命令。您可以使用echo在任何怀疑出错的地方打印任何变量值。这也是绝大多数的shell程序员要花费80%的时间来调试程序的原因。Shell程序的好处在于不需要重新编译，插入一个echo命令也不需要多少时间。 shell也有一个真实的调试模式。如果在脚本”strangescript” 中有错误，您可以这样来进行调试： sh -x strangescript 这将执行该脚本并显示所有变量的值。 shell还有一个不需要执行脚本只是检查语法的模式。可以这样使用： sh -n your_script 这将返回所有语法错误。 我们希望您现在可以开始写您自己的shell脚本，希望您玩得开心。","categories":[],"tags":[]},{"title":"","slug":"Java/framework/mybatis/test","date":"2018-08-22T13:15:37.000Z","updated":"2018-08-22T13:18:23.000Z","comments":true,"path":"2018/08/22/Java/framework/mybatis/test/","link":"","permalink":"http://io.stelawliet.top/2018/08/22/Java/framework/mybatis/test/","excerpt":"","text":"扫描指定包下的所有类，扫描之后的别名就是类名，大小写不敏感（不区分大小写），建议使用的时候和类名一致。 1234567&lt;!-- 配置别名 --&gt;&lt;typeAliases&gt; &lt;!-- typeAlias:用来配置别名，方便映射文件使用，type:类的全限定类名,alias:别名 --&gt; &lt;!-- &lt;typeAlias type=\"cn.itcast.pojo.User\" alias=\"User\"/&gt; --&gt; &lt;!-- 配置包扫描：解决多个pojo别名问题，默认将类名作为别名 --&gt; &lt;package name=\"cn.itcast.pojo\"/&gt;&lt;/typeAliases&gt;","categories":[],"tags":[]},{"title":"新增回写主键useGenerateKeys","slug":"Java/framework/mybatis/useGenerateKeys","date":"2018-08-22T13:12:28.000Z","updated":"2018-09-03T13:43:46.000Z","comments":true,"path":"2018/08/22/Java/framework/mybatis/useGenerateKeys/","link":"","permalink":"http://io.stelawliet.top/2018/08/22/Java/framework/mybatis/useGenerateKeys/","excerpt":"","text":"useGenerateKeys insert1234567891011&lt;insert id=\"insertUser\" parameterType=\"model.User\" useGeneratedKeys=\"true\" keyColumn=\"id\" keyProperty=\"uid\"&gt; INSERT INTO user (username, `password`,register_date) VALUES (#&#123;username&#125;,#&#123;password&#125;,now())&lt;/insert&gt; update12 配置默认settings 1234567891011121314151617&lt;settings&gt; &lt;setting name=\"cacheEnabled\" value=\"true\"/&gt; &lt;setting name=\"lazyLoadingEnabled\" value=\"true\"/&gt; &lt;setting name=\"multipleResultSetsEnabled\" value=\"true\"/&gt; &lt;setting name=\"useColumnLabel\" value=\"true\"/&gt; &lt;setting name=\"useGeneratedKeys\" value=\"false\"/&gt; &lt;setting name=\"autoMappingBehavior\" value=\"PARTIAL\"/&gt; &lt;setting name=\"autoMappingUnknownColumnBehavior\" value=\"WARNING\"/&gt; &lt;setting name=\"defaultExecutorType\" value=\"SIMPLE\"/&gt; &lt;setting name=\"defaultStatementTimeout\" value=\"25\"/&gt; &lt;setting name=\"defaultFetchSize\" value=\"100\"/&gt; &lt;setting name=\"safeRowBoundsEnabled\" value=\"false\"/&gt; &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt; &lt;setting name=\"localCacheScope\" value=\"SESSION\"/&gt; &lt;setting name=\"jdbcTypeForNull\" value=\"OTHER\"/&gt; &lt;setting name=\"lazyLoadTriggerMethods\" value=\"equals,clone,hashCode,toString\"/&gt;&lt;/settings&gt;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"mybatis","slug":"java/framework/mybatis","permalink":"http://io.stelawliet.top/categories/java/framework/mybatis/"}],"tags":[]},{"title":"private ip","slug":"Linux/net/ip private","date":"2018-08-21T14:26:57.000Z","updated":"2018-08-22T09:17:59.000Z","comments":true,"path":"2018/08/21/Linux/net/ip private/","link":"","permalink":"http://io.stelawliet.top/2018/08/21/Linux/net/ip private/","excerpt":"","text":"a: 10.0.0.0 b:172.16.0.0–172.31.0.0 c:192.168.0.0–192.168.255.0","categories":[],"tags":[]},{"title":"oh-my-zsh install","slug":"Linux/oh-my-zsh","date":"2018-08-21T07:27:16.000Z","updated":"2018-09-30T16:22:43.000Z","comments":true,"path":"2018/08/21/Linux/oh-my-zsh/","link":"","permalink":"http://io.stelawliet.top/2018/08/21/Linux/oh-my-zsh/","excerpt":"","text":"zsh12yum install zsh git autojump autojump-zshchsh -s /bin/zsh change shell1chsh -s /bin/zsh username1 install oh My Zsh12cdsh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; 手动安装，当为非root用户安装时会用到。12git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zshcp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc 如果再现autojump文件不存在错误。/etc/profile.d/autojump.sh:.:20: 没有那个文件或目录: /etc/profile.d/autojump.zsh 1wget https://raw.githubusercontent.com/joelthelion/autojump/master/bin/autojump.zsh -O /etc/profile.d/autojump.zsh 1sed -i &apos;s/--add/-a/g&apos; /etc/profile.d/autojump.zsh install hightlighting12git clone https://github.com/zsh-users/zsh-syntax-highlighting.gitecho \"source $&#123;(q-)PWD&#125;/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\" &gt;&gt; $&#123;ZDOTDIR:-$HOME&#125;/.zshrc finally1source ~/.zshrc Manual Installation Clone the repository: git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh` Optionally, backup your existing ~/.zshrc file:cp ~/.zshrc ~/.zshrc.orig Create a new zsh configuration fileYou can create a new zsh config file by copying the template that we have included for you. ​ cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc Change your default shellchsh -s /bin/zsh Initialize your new zsh configurationOnce you open up a new terminal window, it should load zsh with Oh My Zsh’s configuration.","categories":[{"name":"server","slug":"server","permalink":"http://io.stelawliet.top/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"http://io.stelawliet.top/categories/server/linux/"},{"name":"shell","slug":"server/linux/shell","permalink":"http://io.stelawliet.top/categories/server/linux/shell/"}],"tags":[{"name":"zsh","slug":"zsh","permalink":"http://io.stelawliet.top/tags/zsh/"}]},{"title":"缺省配置Springboot Web应用中tomcat的启动过程@csdn","slug":"Java/spring/boot/embeddedTomcat","date":"2018-08-19T13:13:22.000Z","updated":"2018-09-10T12:54:11.000Z","comments":true,"path":"2018/08/19/Java/spring/boot/embeddedTomcat/","link":"","permalink":"http://io.stelawliet.top/2018/08/19/Java/spring/boot/embeddedTomcat/","excerpt":"","text":"缺省配置Springboot Web应用中tomcat的启动过程@csdn概述独立部署的tomcat服务器的启动过程传统意义上一个独立部署和运行的tomcat服务器的启动可以理解成两个阶段 : tomcat 容器本身的启动; tomcat容器中所部署的web app的启动； 完成了以上两个阶段，我们才能访问到我们所开发的业务逻辑。在这种情况下，web app的部署动作，通常是由系统部署人员通过某种方式在启动服务器前完成的。 spring boot web应用启动过程和独立部署的tomcat服务器启动过程的不同点相对于一个独立部署和运行的tomcat服务器，一个缺省配置的spring boot web应用，情况有些不同 ： tomcat 不再是独立存在的，是被内嵌到应用中的； web app的部署不是系统部署人员部署的，是spring boot 应用按照某种约定运行时组装和部署的； 在启动spring boot web应用之前，开发人员需要按照 spring boot的规范编码，实现特定的类，打包部署该spring boot web应用，然后才能启动该应用并提供相应的服务。 本文中介绍的 spring boot web应用的启动过程，指的是从输入spring boot web应用的启动命令开始到开发人员所实现web app的启动完成。 spring boot web应用启动过程概述前提 : 缺省情况下web应用引用了依赖 spring-boot-starter-tomcat； TomcatEmbeddedServletContainerFactory 是spring-boot-autoconfigure创建内置tomcat servlet容器的工厂类; 启动过程 : 在自动配置工具spring-boot-autoconfigure执行的自动配置阶段，EmbeddedServletContainerAutoConfiguration会因为spring-boot-starter-tomcat的存在而注册bean定义 TomcatEmbeddedServletContainerFactory ; 然后在spring boot启动web容器的阶段,应用上下文 application context 会使用注册的该bean定义 TomcatEmbeddedServletContainerFactory 创建并启动一个内置的 tomcat servlet 容器TomcatEmbeddedServletContainer 该过程中spring boot会将以bean定义形式注册到bean容器的的Servlet,Filter,Event Listener,Web Controller等web app元素关联到tomcat形成一个web app，然后对外提供服务 TomcatEmbeddedServletContainerFactory作为bean定义注册到容器EmbeddedServletContainerAutoConfiguration在spring boot自动配置工具spring-boot-autoconfigure的元数据文件META-INF/spring.factories中定义自动配置属性org.springframework.boot.autoconfigure.EnableAutoConfiguration时，该属性的值包含了如下值 : 1org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration1 EmbeddedServletContainerAutoConfiguration 的实现(部分): 1234567891011121314151617181920212223242526@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@Configuration@ConditionalOnWebApplication@Import(BeanPostProcessorsRegistrar.class)public class EmbeddedServletContainerAutoConfiguration &#123; /** * Nested configuration if Tomcat is being used. */ @Configuration // 这里 Servlet, Tomcat 是spring-boot-starter-tomcat提供的， // 当 spring-boot-starter-tomcat 被引入到 classpath 时，以下@ConditionalOnClass // 的条件会被满足，从而应用该配置类，注册bean定义 TomcatEmbeddedServletContainerFactory, // 也就是整个web应用启动web servlet容器时所要使用的servlet容器工厂类 @ConditionalOnClass(&#123; Servlet.class, Tomcat.class &#125;) @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT) public static class EmbeddedTomcat &#123; @Bean public TomcatEmbeddedServletContainerFactory tomcatEmbeddedServletContainerFactory() &#123; return new TomcatEmbeddedServletContainerFactory(); &#125; &#125;//...&#125;1234567891011121314151617181920212223242526 内置Tomcat servlet容器的创建和初始化调用入口点 : 12345678// 由此调用链可以看出，内置Tomcat servlet容器的创建和初始化实在Spring ApplicationContext// 容器的refresh()过程中执行的。SpringApplication.run()=&gt;refresh(ApplicationContext applicationContext) =&gt;EmbeddedWebApplicationContext.refresh() =&gt; super.refresh() =&gt;EmbeddedWebApplicationContext.onRefresh() =&gt;createEmbeddedServletContainer()12345678 EmbeddedWebApplicationContext的方法createEmbeddedServletContainer1234567891011121314151617181920212223242526272829private void createEmbeddedServletContainer() &#123; // 获取属性中记录的嵌入式servlet容器，spring boot web 应用启动时这里一定是 null EmbeddedServletContainer localContainer = this.embeddedServletContainer; // 获取属性中记录的嵌入式servlet上下文，spring boot web 应用启动时这里一定是 null ServletContext localServletContext = getServletContext(); if (localContainer == null &amp;&amp; localServletContext == null) &#123; // spring boot web 应用启动时流程会走到这里 // 获取ApplicationContext bean定义注册阶段注册的EmbeddedServletContainerFactory // 对于使用缺省配置的spring boot web 应用，这里实际上是 // TomcatEmbeddedServletContainerFactory // 该bean实例化过程中已经通过BeanPostProcessor应用了各种 // EmbeddedServletContainerCustomizer， // 比如 bean ServerProperties,DuplicateServerPropertiesDetector 等 EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory(); // 创建相应的嵌入式 servlet 容器并完成配置和初始化 this.embeddedServletContainer = containerFactory .getEmbeddedServletContainer(getSelfInitializer()); &#125; else if (localServletContext != null) &#123; try &#123; getSelfInitializer().onStartup(localServletContext); &#125; catch (ServletException ex) &#123; throw new ApplicationContextException(\"Cannot initialize servlet context\", ex); &#125; &#125; initPropertySources();&#125;1234567891011121314151617181920212223242526272829 TomcatEmbeddedServletContainerFactory的方法getEmbeddedServletContainer123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137@Overridepublic EmbeddedServletContainer getEmbeddedServletContainer( ServletContextInitializer... initializers) &#123; // 创建内置tomcat servlet 容器的启动器 // tomcat有多种配置和启动方式，最常见的方式是基于server.xml配置的启动器 // org.apache.catalina.startup.Bootstrap, 而这里的Tomcat是一个内嵌tomcat的启动器 // 这个Tomcat启动器缺省会 ： // 1. 创建一个Tomcat Server， // 2. 创建并关联到这个 Tomcat Server上一个 Tomcat Service, // 一个 Tomcat Service是一个Tomcat Engineer和围绕着这个Tomcat Engine的多个Connector // 3. 在所创建的那一个 Tomcat Engine 上创建了一个 Tomcat Host // 一个 Tomcat Engine 上面可以有多个 Tomcat Host Tomcat tomcat = new Tomcat(); // 如果设置了baseDirectory使用之，如果没有设置，在操作系统当前用户的临时目录下创建基础工作目录 // 缺省情况下，baseDirectory 是没有被设置的 File baseDir = (this.baseDirectory != null ? this.baseDirectory : createTempDir(\"tomcat\")); // 设置tomcat的基础工作目录 tomcat.setBaseDir(baseDir.getAbsolutePath()); // 创建tomcat的Connector,缺省协议为org.apache.coyote.http11.Http11NioProtocol Connector connector = new Connector(this.protocol); tomcat.getService().addConnector(connector); // 订制化 connector, 设置端口，uri encoding字符集，ssl,是否使用压缩等 // 缺省情况下端口是 8080, uri encoding 是 utf-8 customizeConnector(connector); tomcat.setConnector(connector); // 关闭应用的自动部署 tomcat.getHost().setAutoDeploy(false); configureEngine(tomcat.getEngine()); // 如果指定了更多附加的Tomcat Connector，也添加进来 for (Connector additionalConnector : this.additionalTomcatConnectors) &#123; tomcat.getService().addConnector(additionalConnector); &#125; // 准备Tomcat StandardContext，对应一个webapp,并将其通过host关联到tomcat // 参考下面方法prepareContext的注释 prepareContext(tomcat.getHost(), initializers); // 创建 TomcatEmbeddedServletContainer 并初始化 // 其中包括调用 tomcat.start() return getTomcatEmbeddedServletContainer(tomcat);&#125;/** * 纯程序方式创建并准备Tomcat StandardContext，它对应一个web应用，把它绑定到host上。 * 参数initializers是上面步骤提供的SCI，将它关联到Tomcat StandardContext。 **/protected void prepareContext(Host host, ServletContextInitializer[] initializers) &#123; // 准备Host的docBase, File docBase = getValidDocumentRoot(); // spring boot web应用启动过程中上面获得docBase会为null，实际会采用下面的 // 创建临时目录动作完成 docBase的创建 docBase = (docBase != null ? docBase : createTempDir(\"tomcat-docbase\")); // 创建StandardContext，这是Tomcat的标准概念，用来对应表示一个web应用， // 这里使用实现类TomcatEmbeddedContext，由 spring boot 提供。 // 以下创建和初始化一个TomcatEmbeddedContext的过程，可以认为是往tomcat servlet // 容器中部署和启动一个web应用的过程，只不过在传统方式下，一个web应用部署到tomcat使用 // war包的方式，而这里是完全程序化的方式。 final TomcatEmbeddedContext context = new TomcatEmbeddedContext(); // 设置StandardContext的名字，使用 context path，这个路径以/开始，没有/结尾；如果是根 // StandardContext,这个 context path 为空字符串(0长度字符串); context.setName(getContextPath()); context.setDisplayName(getDisplayName()); context.setPath(getContextPath()); context.setDocBase(docBase.getAbsolutePath()); context.addLifecycleListener(new FixContextListener()); context.setParentClassLoader( this.resourceLoader != null ? this.resourceLoader.getClassLoader() : ClassUtils.getDefaultClassLoader()); resetDefaultLocaleMapping(context); addLocaleMappings(context); try &#123; context.setUseRelativeRedirects(false); &#125; catch (NoSuchMethodError ex) &#123; // Tomcat is &lt; 8.0.30. Continue &#125; SkipPatternJarScanner.apply(context, this.tldSkipPatterns); WebappLoader loader = new WebappLoader(context.getParentClassLoader()); loader.setLoaderClass(TomcatEmbeddedWebappClassLoader.class.getName()); loader.setDelegate(true); context.setLoader(loader); if (isRegisterDefaultServlet()) &#123; // 缺省情况下，会注册 Tomcat 的 DefaultServlet, // DefaultServlet是Tomcat缺省的资源服务Servlet,用来服务 // HTML,图片等静态资源 addDefaultServlet(context); &#125; if (shouldRegisterJspServlet()) &#123; // 是否要注册 jsp servlet，缺省情况下，不注册 addJspServlet(context); addJasperInitializer(context); context.addLifecycleListener(new StoreMergedWebXmlListener()); &#125; context.addLifecycleListener(new LifecycleListener() &#123; @Override public void lifecycleEvent(LifecycleEvent event) &#123; if (event.getType().equals(Lifecycle.CONFIGURE_START_EVENT)) &#123; TomcatResources.get(context) .addResourceJars(getUrlsOfJarsWithMetaInfResources()); &#125; &#125; &#125;); // 合并参数提供的Spring SCI : EmbeddedWebApplicationContext$1, // 这是一个匿名内部类，封装的逻辑来自方法 selfInitialize() // 和当前servlet容器在bean创建时通过EmbeddedServletContainerCustomizer // ServerProperties添加进来的两个Spring SCI : // ServerProperties$SessionConfiguringInitializer // InitParameterConfiguringServletContextInitializer // 注意这里的SCI接口由spring定义，tomcat jar中也包含了一个servlet API规范 // 定义的SCI接口,这是定义相同的两个接口而非同一个,最终实现了Spring SCI接口的 // 类的逻辑必须通过某种方式封装成实现了servlet API规范定义的SCI的逻辑才能被 // 执行 ServletContextInitializer[] initializersToUse = mergeInitializers(initializers); // 配置context， // 1.将Spring提供的SCI封装成Servlet API标准SCI配置到context中去， // 通过一个实现了Servlet API标准SCI接口的spring类 TomcatStarter // 2.将spring领域的MIME映射配置设置到context中去， // 3.将spring领域的session配置设置到context中去，比如 sessionTimeout configureContext(context, initializersToUse); // 将该context关联到host上去 host.addChild(context); // 内部实现为空 postProcessContext(context);&#125;// 创建TomcatEmbeddedServletContainer并初始化protected TomcatEmbeddedServletContainer getTomcatEmbeddedServletContainer( Tomcat tomcat) &#123; // 第二个参数要填充目标实例的属性autoStart， 缺省端口为8080，所以getPort() &gt;=0 为 true,也就是传递 autoStart为true return new TomcatEmbeddedServletContainer(tomcat, getPort() &gt;= 0);&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137 TomcatEmbeddedServletContainer的创建和初始化1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768// TomcatEmbeddedServletContainer有一个成员变量started，初始化值为 false,// 用来表示容器是否处于已经启动状态public TomcatEmbeddedServletContainer(Tomcat tomcat, boolean autoStart) &#123; Assert.notNull(tomcat, \"Tomcat Server must not be null\"); this.tomcat = tomcat; this.autoStart = autoStart;//设置是否要自动启动标志 initialize(); // 初始化&#125;private void initialize() throws EmbeddedServletContainerException &#123; TomcatEmbeddedServletContainer.logger .info(\"Tomcat initialized with port(s): \" + getPortsDescription(false)); synchronized (this.monitor) &#123; try &#123; // 往引擎名字中增加instance Id信息，如果 instance id为0，则不修改引擎名字 addInstanceIdToEngineName(); try &#123; // Remove service connectors to that protocol binding doesn't happen // yet // 注意，从容器中把Connector删掉，这样下面随后马上执行的start()动作 // 只会启动容器中除了Connector之外的其他部分 removeServiceConnectors(); // Start the server to trigger initialization listeners // 1.触发启动Tomcat容器中除了Connector之外的其他部分， // Connector此处不没启动意味着该启动过程完成后，服务器还是不能接受来自 // 网络的请求,因为Connector才是真正负责接受网络请求的入口。 // 问题 : 这个过程，Spring 为什么要这么处理呢 ？ // 2. 这里Tomcat启动的主要是 // StandardServer[1实例,Tomcat Lifecycle]==&gt; // StandardService[1实例,Tomcat Lifecycle]==&gt; // StandardEngine[1实例,Tomcat Container]==异步startStopExecutor==&gt; // StandardHost[1实例,Tomcat Container]==异步startStopExecutor==&gt; // TomcatEmbeddedContext[1实例,Springboot实现的Tomcat Container]==&gt; // StandardWrapper[1实例,Tomcat Container]。 // 这里StandardWrapper对应的Servlet是Spring MVC的DispatchServlet。 // 上面Tomcat Container父容器启动子容器都是通过线程池异步方式启动的。 this.tomcat.start(); // We can re-throw failure exception directly in the main thread rethrowDeferredStartupExceptions(); Context context = findContext(); try &#123; ContextBindings.bindClassLoader(context, getNamingToken(context), getClass().getClassLoader()); &#125; catch (NamingException ex) &#123; // Naming is not enabled. Continue &#125; // Unlike Jetty, all Tomcat threads are daemon threads. We create a // blocking non-daemon to stop immediate shutdown // tomcat 自身所有的线程都是daemon线程。这里spring创建了一个非daemon线程用来 // 阻塞整个应用，避免刚启动就马上结束的情况。 startDaemonAwaitThread(); &#125; catch (Exception ex) &#123; containerCounter.decrementAndGet(); throw ex; &#125; &#125; catch (Exception ex) &#123; throw new EmbeddedServletContainerException( \"Unable to start embedded Tomcat\", ex); &#125; &#125;&#125; Tomcat StandardContxt启动过程中SCI的应用上面过程创建的StandardContext实例，也就是所对应的webapp，已经关联但是尚未应用spring提供的SCI。这些SCI的应用是在StandardContext.startInternal()中应用SCI阶段进行的。 12345678910111213141516171819// 调用 ServletContainerInitializer(备注 : 缩写为SCI)// 这里的SCI接口是Servlet API标准SCI接口,而不是Spring定义的SCI接口。上面的流程分析中已经讲到，// prepareContext()过程中已经将Spring准备的多个Spring SCI封装成一个Servlet API规范SCI// 实现TomcatStarter关联到了tomcat容器,这里的initializers 就是这些封装后的Servlet API// SCI实例。在使用缺省配置的Springboot Web应用中,以下for循环中的initializers其实只有一个,// 就是前面提到的Spring提供的实现了Servlet API标准SCI接口TomcatStarter。for (Map.Entry&lt;ServletContainerInitializer, Set&lt;Class&lt;?&gt;&gt;&gt; entry : initializers.entrySet()) &#123; try &#123; // 调用SCI的onStartup()方法，getServletContext()是基于当前StandardContext创建 // 的ServletContext的facade entry.getKey().onStartup(entry.getValue(), getServletContext()); &#125; catch (ServletException e) &#123; log.error(sm.getString(\"standardContext.sciFail\"), e); ok = false; break; &#125;&#125;12345678910111213141516171819 这里对Tomcat标准SCI TomcatStarter 的调用，最终还是调用了Spring提供的3个SCI ：\\1. EmbeddedWebApplicationContext匿名内部类，封装的逻辑来自方法 selfInitialize()\\2. ServerProperties$SessionConfiguringInitializer\\3. InitParameterConfiguringServletContextInitializer EmbeddedWebApplicationContext的selfInitialize123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116 /** * servletContext是一个Java Servlet规范里面的概念，这里其实现由Tomcat提供 * **/ private void selfInitialize(ServletContext servletContext) throws ServletException &#123; // 1.将当前spring application context作为属性设置到servletContext : // WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE // 随后应用启动完在提供Web服务的时候,Spring MVC dispatchServlet的应用上下文 // 的双亲就会使用这个根Web应用上下文 // 2.将servletContext记录到当前web application context，也就是当前 // EmbeddedWebApplicationContext对象的属性servletContext中 prepareEmbeddedWebApplicationContext(servletContext); ConfigurableListableBeanFactory beanFactory = getBeanFactory(); // 获取用户自定义webapp作用域 ExistingWebApplicationScopes existingScopes = new ExistingWebApplicationScopes( beanFactory); //注册标准webapp作用域 WebApplicationContextUtils.registerWebApplicationScopes(beanFactory, getServletContext()); // 重新注册用户自定义webapp作用域 existingScopes.restore(); // 注册webapp相关环境参数bean : contextParameters,contextAttributes // WebApplicationContext.SERVLET_CONTEXT_BEAN_NAME // WebApplicationContext.CONTEXT_PARAMETERS_BEAN_NAME // WebApplicationContext.CONTEXT_ATTRIBUTES_BEAN_NAME WebApplicationContextUtils.registerEnvironmentBeans(beanFactory, getServletContext()); // !!! 到目前为止，尚未初始化webapp中的Servlet，Filter 和 EventListener // 从Bean容器中找到所有的SCI bean,并调用其 onStartup()回调方法 // getServletContextInitializerBeans()会从bean容器中找到所有的SCI bean， // 将bean容器中所有Servlet, Filter 和EventListener bean转换成SCI 然后返回 // 给该for循环然后逐一调用其 onStartup() 回调。 // !!! 这里是真正的Servlet, Filter 和EventListener注入到ServletContext的触发点 for (ServletContextInitializer beans : getServletContextInitializerBeans()) &#123; beans.onStartup(servletContext); &#125; // 到此为止，一个完整的符合开发者设计目的的WebApp才算是被启动和被完整设置 &#125; /** * Returns ServletContextInitializers that should be used with the embedded * Servlet context. By default this method will first attempt to find * ServletContextInitializer, Servlet, Filter and certain * EventListener beans. * * 返回所有需要被应用到Servlet context上的ServletContextInitializer。 * * 缺省情况下: * 1.该方法会首先尝试bean容器中注册的 ServletContextInitializer bean, * 2.然后是各种适配bean,比如 Servlet, Filter 和EventListener bean， * 将它们封装成实现了接口 ServletContextInitializer 的 RegistrationBean 。 * 3.最后将上面所有找到的 ServletContextInitializer bean 和封装的 RegistrationBean * 返回给调用者。 * * * @return the servlet initializer beans */ protected Collection&lt;ServletContextInitializer&gt; getServletContextInitializerBeans() &#123; return new ServletContextInitializerBeans(getBeanFactory()); &#125; /** * Prepare the WebApplicationContext with the given fully loaded * ServletContext. This method is usually called from * ServletContextInitializer#onStartup(ServletContext) and is similar to the * functionality usually provided by a ContextLoaderListener. * @param servletContext the operational servlet context */ protected void prepareEmbeddedWebApplicationContext(ServletContext servletContext) &#123; // 从Servlet Context上面读取属性ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE，根Web应用上下文 Object rootContext = servletContext.getAttribute( WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE); if (rootContext != null) &#123; // 如果在 Servlet Context上面已经设置了属性ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE // 这块逻辑表明根Web应用上下文只能初始化一次并绑定到Servlet Context的这个属性上 if (rootContext == this) &#123; throw new IllegalStateException( \"Cannot initialize context because there is already a root application context present - \" + \"check whether you have multiple ServletContextInitializers!\"); &#125; return; &#125; Log logger = LogFactory.getLog(ContextLoader.class); servletContext.log(\"Initializing Spring embedded WebApplicationContext\"); try &#123; // 将this对象,也就是当前EmbeddedWebApplicationContext Web应用上下文对象设置为 // 当前ServletContext上下文的属性ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, // 随后应用启动完在提供Web服务的时候,Spring MVC dispatchServlet的应用上下文 // 的双亲就会使用这个根Web应用上下文 servletContext.setAttribute( WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this); if (logger.isDebugEnabled()) &#123; logger.debug( \"Published root WebApplicationContext as ServletContext attribute with name [\" + WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE + \"]\"); &#125; setServletContext(servletContext); if (logger.isInfoEnabled()) &#123; long elapsedTime = System.currentTimeMillis() - getStartupDate(); logger.info(\"Root WebApplicationContext: initialization completed in \" + elapsedTime + \" ms\"); &#125; &#125; catch (RuntimeException ex) &#123; logger.error(\"Context initialization failed\", ex); servletContext.setAttribute( WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ex); throw ex; &#125; catch (Error ex) &#123; logger.error(\"Context initialization failed\", ex); servletContext.setAttribute( WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ex); throw ex; &#125; &#125;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116 缺省spring boot web应用中ServletContextInitializerBeans 从 beanFactory所获得的SCI : Bean 类型 dispatcherServlet ServletRegistrationBean characterEncodingFilter FilterRegistrationBean hiddenHttpMethodFilter FilterRegistrationBean httpPutFormContentFilter FilterRegistrationBean requestContextFilter FilterRegistrationBean 想了解以上各个Bean都是什么用途，请参考 :缺省配置Springboot Web应用启动过程中Bean定义的登记 ServerProperties内部类SessionConfiguringInitializer设置SessionCookieConfig InitParameterConfiguringServletContextInitializer将init参数设置到ServletContext上的一个SCI 内置Tomcat servlet容器的启动在整个上面的启动过程中，虽然调用 Tomcat 实例的启动方法，但是整个容器tomcatEmbeddedServletContainer只能算是启动了一部分，也就是其中除了Tomcat Connector 之外的其他部分。 此时tomcatEmbeddedServletContainer实例的属性 started仍然为false，表示整个容器处于尚未启动的状态。所以上的逻辑更像是容器创建和初始化的过程。 Tomcat Connector是用来接收来自网络的请求的关键组件。这一部分组件启动之后，整个容器tomcatEmbeddedServletContainer才能接受和处理来自网络的请求从而为用户提供服务，所以所有这些的启动都结束，才能算是整个容器的启动完成，此时started属性才能设置为true。 该小节容器的启动，主要就是讲容器中Tomcat Connector的启动。 启动入口点123456SpringApplication.run()=&gt;refresh(ApplicationContext applicationContext) =&gt;EmbeddedWebApplicationContext.refresh() =&gt;EmbeddedWebApplicationContext.finishRefresh() =&gt;startEmbeddedServletContainer()123456 启动入口点代码分析123456789101112131415161718192021222324 // 类EmbeddedWebApplicationContext的方法finishRefresh() @Override protected void finishRefresh() &#123; //先调用父类AbstractApplicationContext的finishRefresh() super.finishRefresh(); // 启动内置Servlet容器 EmbeddedServletContainer localContainer = startEmbeddedServletContainer(); if (localContainer != null) &#123; // 容器已经启动，可以接受来自外部的HTTP请求了，发布事件 : // EmbeddedServletContainerInitializedEvent publishEvent( new EmbeddedServletContainerInitializedEvent(this, localContainer)); &#125; &#125; // 类EmbeddedWebApplicationContext的方法startEmbeddedServletContainer() private EmbeddedServletContainer startEmbeddedServletContainer() &#123; EmbeddedServletContainer localContainer = this.embeddedServletContainer; if (localContainer != null) &#123; // 调用内置servlet容器TomcatEmbeddedServletContainer实例上的start()方法 localContainer.start(); &#125; return localContainer; &#125;123456789101112131415161718192021222324 内置servlet容器的启动过程1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// TomcatEmbeddedServletContainer 的start方法@Overridepublic void start() throws EmbeddedServletContainerException &#123; synchronized (this.monitor) &#123; if (this.started) &#123; return; &#125; try &#123; // 将内置容器创建和初始化阶段删除的Connector再添加到容器， // 将Connector添加回容器(实际上是添加到容器的Service)， // 因为相应的Service已经处于启动状态，所以Connector在 // 添加回来之后马上会被启动 addPreviouslyRemovedConnectors(); // 获得tomcat的Connector，如果不为空并且设置为自动启动， // 则启动之。缺省配置下，这里 autoStart 为 true Connector connector = this.tomcat.getConnector(); if (connector != null &amp;&amp; this.autoStart) &#123; startConnector(connector); &#125; // 检查确保Connector已经启动，如果没启动，抛出异常 checkThatConnectorsHaveStarted(); this.started = true; TomcatEmbeddedServletContainer.logger .info(\"Tomcat started on port(s): \" + getPortsDescription(true)); &#125; catch (ConnectorStartFailedException ex) &#123; stopSilently(); throw ex; &#125; catch (Exception ex) &#123; throw new EmbeddedServletContainerException( \"Unable to start embedded Tomcat servlet container\", ex); &#125; finally &#123; Context context = findContext(); ContextBindings.unbindClassLoader(context, getNamingToken(context), getClass().getClassLoader()); &#125; &#125;&#125;// TomcatEmbeddedServletContainer 的 addPreviouslyRemovedConnectors 方法private void addPreviouslyRemovedConnectors() &#123; Service[] services = this.tomcat.getServer().findServices(); for (Service service : services) &#123; Connector[] connectors = this.serviceConnectors.get(service); if (connectors != null) &#123; for (Connector connector : connectors) &#123; // 此时service已经处于启动状态，因此重新添加进来的connector // 也没马上被执行启动动作 service.addConnector(connector); if (!this.autoStart) &#123; stopProtocolHandler(connector); &#125; &#125; this.serviceConnectors.remove(service); &#125; &#125;&#125;1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859 Tomcat Connector的启动启动入口点12Service.addConnector() =&gt; Connector.start()12 启动入口点逻辑分析12345678910111213141516171819202122232425262728293031//StandardService 的方法 addConnector//StandardService 是tomcat提供的类@Overridepublic void addConnector(Connector connector) &#123; synchronized (connectorsLock) &#123; // 将connector关联到当前 service connector.setService(this); Connector results[] = new Connector[connectors.length + 1]; System.arraycopy(connectors, 0, results, 0, connectors.length); results[connectors.length] = connector; connectors = results; // 如果当前服务的状态是 available，则在将 connector 增加到service时 // 直接启动 connector if (getState().isAvailable()) &#123; try &#123; // 启动新增进来的 connector connector.start(); &#125; catch (LifecycleException e) &#123; log.error(sm.getString( \"standardService.connector.startFailed\", connector), e); &#125; &#125; // Report this property change to interested listeners support.firePropertyChange(\"connector\", null, connector); &#125;&#125;12345678910111213141516171819202122232425262728293031 Connector启动过程分析12345678910111213141516171819202122232425262728// Connector是tomcat提供的类@Overrideprotected void startInternal() throws LifecycleException &#123; // Validate settings before starting if (getPort() &lt; 0) &#123; throw new LifecycleException(sm.getString( \"coyoteConnector.invalidPort\", Integer.valueOf(getPort()))); &#125; setState(LifecycleState.STARTING); try &#123; // Connector启动的核心动作是协议处理器的启动 // 对于缺省配置的springboot web应用，这里是一个处理http协议请求的 // Http11NioProtocol 实例，使用 nio 方式处理 http 协议 (http 或者 https) protocolHandler.start(); &#125; catch (Exception e) &#123; String errPrefix = \"\"; if(this.service != null) &#123; errPrefix += \"service.getName(): \\\"\" + this.service.getName() + \"\\\"; \"; &#125; throw new LifecycleException (errPrefix + \" \" + sm.getString (\"coyoteConnector.protocolHandlerStartFailed\"), e); &#125;&#125;12345678910111213141516171819202122232425262728 Http11NioProtocol启动过程分析123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143// 调用链 :// Connector.start()// =&gt; startInternal()// =&gt; Http11NioProtocol protocolHandler.start();// // Http11NioProtocol 的 start方法，由基类 AbstractProtocol 提供实现// Http11NioProtocol ,AbstractProtocol 都是tomcat提供的类@Overridepublic void start() throws Exception &#123; if (getLog().isInfoEnabled()) getLog().info(sm.getString(\"abstractProtocolHandler.start\", getName())); try &#123; // 启动了成员变量endpoint,一个 NioEndpoint 实例 endpoint.start(); &#125; catch (Exception ex) &#123; getLog().error(sm.getString(\"abstractProtocolHandler.startError\", getName()), ex); throw ex; &#125; // Start async timeout thread asyncTimeout = new AsyncTimeout(); Thread timeoutThread = new Thread(asyncTimeout, getNameInternal() + \"-AsyncTimeout\"); int priority = endpoint.getThreadPriority(); if (priority &lt; Thread.MIN_PRIORITY || priority &gt; Thread.MAX_PRIORITY) &#123; priority = Thread.NORM_PRIORITY; &#125; timeoutThread.setPriority(priority); timeoutThread.setDaemon(true); timeoutThread.start();&#125;1234567891011121314151617181920212223242526272829303132// 调用链 :// Connector.start()// =&gt; startInternal()// =&gt; Http11NioProtocol protocolHandler.start();// =&gt; NioEndpoint endpoint.start()// // NioEndpoint的start()方法，在其基类AbstractEndpoint中实现// NioEndpoint,AbstractEndpoint都是tomcat提供的类public final void start() throws Exception &#123; if (bindState == BindState.UNBOUND) &#123; // 如果端口绑定状态为未绑定，这里执行端口绑定逻辑 bind(); bindState = BindState.BOUND_ON_START; &#125; startInternal();&#125;//AbstractEndpoint的bind()方法实现@Overridepublic void bind() throws Exception &#123; // 建立服务套接字，并绑定到指定的端口, // 缺省配置的spring-boot web应用，这里的端口是 8080 serverSock = ServerSocketChannel.open(); socketProperties.setProperties(serverSock.socket()); InetSocketAddress addr = (getAddress()!=null?new InetSocketAddress(getAddress(),getPort()):new InetSocketAddress(getPort())); serverSock.socket().bind(addr,getAcceptCount()); serverSock.configureBlocking(true); //mimic APR behavior // Initialize thread count defaults for acceptor, poller if (acceptorThreadCount == 0) &#123; // FIXME: Doesn't seem to work that well with multiple accept threads acceptorThreadCount = 1; &#125; if (pollerThreadCount &lt;= 0) &#123; //minimum one poller thread pollerThreadCount = 1; &#125; setStopLatch(new CountDownLatch(pollerThreadCount)); // Initialize SSL if needed initialiseSsl(); selectorPool.open();&#125; //AbstractEndpoint的startInternal()方法实现 /** * Start the NIO endpoint, creating acceptor, poller threads. */@Overridepublic void startInternal() throws Exception &#123; if (!running) &#123; // 设置运行状态 running = true; paused = false; processorCache = new SynchronizedStack&lt;&gt;(SynchronizedStack.DEFAULT_SIZE, socketProperties.getProcessorCache()); eventCache = new SynchronizedStack&lt;&gt;(SynchronizedStack.DEFAULT_SIZE, socketProperties.getEventCache()); // NioChannel 实现了 NIO ByteChannel 接口 nioChannels = new SynchronizedStack&lt;&gt;(SynchronizedStack.DEFAULT_SIZE, socketProperties.getBufferPool()); // Create worker collection if ( getExecutor() == null ) &#123; // 如果尚未指定 executor, 则创建内部的任务执行线程 // 缺省配置的 spring boot web 应用没有外部指定的 executor createExecutor(); &#125; // 创建一个LimitLatch,用于控制最大连接数，缺省值10000 initializeConnectionLatch(); // 创建和启动 Poller 线程 // 1. Poller类是一个Runnable.每个Poller对象会保持一个Java NIO Selector // 和一个PollerEvent队列SynchronizedQueue.每个PollerEvent携带一个 // // 2. Poller 线程数量会使用当前计算机CPU processor数量和2的最小值 // 3. 每个Poller线程都是 daemon 线程 // 4. Poller线程名称前缀 : http-nio-8080-ClientPoller- pollers = new Poller[getPollerThreadCount()]; for (int i=0; i&lt;pollers.length; i++) &#123; pollers[i] = new Poller(); Thread pollerThread = new Thread(pollers[i], getName() + \"-ClientPoller-\"+i); pollerThread.setPriority(threadPriority); pollerThread.setDaemon(true); pollerThread.start(); &#125; // 创建和启动请求接收线程 // 1. 接收线程缺省只有1个 // 2. 接收线程名称前缀 : http-nio-8080-Acceptor- startAcceptorThreads(); &#125;&#125;//AbstractEndpoint的createExecutor()方法实现 public void createExecutor() &#123; internalExecutor = true; // 创建基于ThreadPoolExecutor的任务执行队列 TaskQueue taskqueue = new TaskQueue(); TaskThreadFactory tf = new TaskThreadFactory(getName() + \"-exec-\", daemon, getThreadPriority()); // 创建的线程名称前缀为 http-nio-8080-exec- executor = new ThreadPoolExecutor(getMinSpareThreads(), getMaxThreads(), 60, TimeUnit.SECONDS,taskqueue, tf); taskqueue.setParent( (ThreadPoolExecutor) executor);&#125; // NioEndpoint 类的重写实现，创建一个AbstractEndpoint.Acceptor，实现了 Runnable接口// 这里的类 Acceptor 是一个 NioEndpoint 内部类,用于接收套接字并交给合适的处理器@Overrideprotected AbstractEndpoint.Acceptor createAcceptor() &#123; return new Acceptor();&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/spring/ioc/@Value${}解析器","date":"2018-08-18T14:26:58.000Z","updated":"2018-08-18T14:31:08.000Z","comments":true,"path":"2018/08/18/Java/spring/ioc/@Value${}解析器/","link":"","permalink":"http://io.stelawliet.top/2018/08/18/Java/spring/ioc/@Value${}解析器/","excerpt":"","text":"AbstractApplicationContext 1234567891011// Register a default embedded value resolver if no bean post-processor // (such as a PropertyPlaceholderConfigurer bean) registered any before: // at this point, primarily for resolution in annotation attribute values. if (!beanFactory.hasEmbeddedValueResolver()) &#123; beanFactory.addEmbeddedValueResolver(new StringValueResolver() &#123; @Override public String resolveStringValue(String strVal) &#123; return getEnvironment().resolvePlaceholders(strVal); &#125; &#125;); &#125;","categories":[],"tags":[]},{"title":"","slug":"linux cli","date":"2018-08-18T06:13:00.000Z","updated":"2018-08-18T08:56:19.000Z","comments":true,"path":"2018/08/18/linux cli/","link":"","permalink":"http://io.stelawliet.top/2018/08/18/linux cli/","excerpt":"","text":"yum yum list zsh linux 设置中文版man手册[https://www.jianshu.com/p/185fe0a4f426] 下载中文man包 操作系统为centos7 源码的网址：https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN 找到源码包 https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN/manpages-zh-1.5.2.tar.bz2/cab232c7bb49b214c2f7ee44f7f35900/manpages-zh-1.5.2.tar.bz2 wget https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN/manpages-zh-1.5.2.tar.bz2/cab232c7bb49b214c2f7ee44f7f35900/manpages-zh-1.5.2.tar.bz2 12345678910111213141516171819[root@localhost tmp]# wget https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN/manpages-zh-1.5.2.tar.bz2/cab232c7bb49b214c2f7ee44f7f35900/manpages-zh-1.5.2.tar.bz2--2017-10-11 10:10:17-- https://src.fedoraproject.org/repo/pkgs/man-pages-zh-CN/manpages-zh-1.5.2.tar.bz2/cab232c7bb49b214c2f7ee44f7f35900/manpages-zh-1.5.2.tar.bz2正在解析主机 src.fedoraproject.org (src.fedoraproject.org)... 209.132.181.15, 209.132.181.16正在连接 src.fedoraproject.org (src.fedoraproject.org)|209.132.181.15|:443... 已连接。已发出 HTTP 请求，正在等待回应... 200 OK长度：1430278 (1.4M) [application/x-bzip2]正在保存至: “manpages-zh-1.5.2.tar.bz2”100%[==============================&gt;] 1,430,278 475KB/s 用时 2.9s 2017-10-11 10:10:21 (475 KB/s) - 已保存 “manpages-zh-1.5.2.tar.bz2” [1430278/1430278])[root@localhost tmp] 解压编译安装1234567891011121314151617yum install bzip2tar jxvf manpages-zh-1.5.2.tar.bz2./configure --disable-zhtw #默认安装 make &amp;&amp; make install# 为了不抵消man，我们新建cman命令作为中文查询cd ~ vi .bash_profile# 在.bash_profile中增加:alias cman='man -M /usr/local/share/man/zh_CN' source .bash_profile #更新bash_profile 使其生效 ​ ​ ​ ​ ​","categories":[],"tags":[]},{"title":"Spring PopulateBean","slug":"Java/spring/ioc/PopulateBean","date":"2018-08-16T14:47:54.000Z","updated":"2018-08-25T08:14:56.000Z","comments":true,"path":"2018/08/16/Java/spring/ioc/PopulateBean/","link":"","permalink":"http://io.stelawliet.top/2018/08/16/Java/spring/ioc/PopulateBean/","excerpt":"","text":"abstractAutoCapableBeanFactory12345678910111213141516171819202122232425262728293031323334353637/** * Abstract bean factory superclass that implements default bean creation, * with the full capabilities specified by the &#123;@link RootBeanDefinition&#125; class. * Implements the &#123;@link org.springframework.beans.factory.config.AutowireCapableBeanFactory&#125; * interface in addition to AbstractBeanFactory's &#123;@link #createBean&#125; method. * * &lt;p&gt;Provides bean creation (with constructor resolution), property population, * wiring (including autowiring), and initialization. Handles runtime bean * references, resolves managed collections, calls initialization methods, etc. * Supports autowiring constructors, properties by name, and properties by type. * * &lt;p&gt;The main template method to be implemented by subclasses is * &#123;@link #resolveDependency(DependencyDescriptor, String, Set, TypeConverter)&#125;, * used for autowiring by type. In case of a factory which is capable of searching * its bean definitions, matching beans will typically be implemented through such * a search. For other factory styles, simplified matching algorithms can be implemented. * * &lt;p&gt;Note that this class does &lt;i&gt;not&lt;/i&gt; assume or implement bean definition * registry capabilities. See &#123;@link DefaultListableBeanFactory&#125; for an implementation * of the &#123;@link org.springframework.beans.factory.ListableBeanFactory&#125; and * &#123;@link BeanDefinitionRegistry&#125; interfaces, which represent the API and SPI * view of such a factory, respectively. * * @author Rod Johnson * @author Juergen Hoeller * @author Rob Harrop * @author Mark Fisher * @author Costin Leau * @author Chris Beams * @author Sam Brannen * @since 13.02.2004 * @see RootBeanDefinition * @see DefaultListableBeanFactory * @see BeanDefinitionRegistry */public abstract class AbstractAutowireCapableBeanFactory extends AbstractBeanFactory implements AutowireCapableBeanFactory populate 12345678/** * Populate the bean instance in the given BeanWrapper with the property values * from the bean definition. * @param beanName the name of the bean * @param mbd the bean definition for the bean * @param bw BeanWrapper with bean instance */protected void populateBean(String beanName, RootBeanDefinition mbd, BeanWrapper bw) 整理各种BeanFactory的继承关系和区别 整理各种BeanPostProcessor的继承关系和区别","categories":[],"tags":[{"name":"ioc","slug":"ioc","permalink":"http://io.stelawliet.top/tags/ioc/"},{"name":"abstractAutoCapableBeanFactory","slug":"abstractAutoCapableBeanFactory","permalink":"http://io.stelawliet.top/tags/abstractAutoCapableBeanFactory/"},{"name":"populate","slug":"populate","permalink":"http://io.stelawliet.top/tags/populate/"}]},{"title":"","slug":"TODOlist/JAVA TODA","date":"2018-08-16T13:19:52.000Z","updated":"2018-08-16T13:22:33.000Z","comments":true,"path":"2018/08/16/TODOlist/JAVA TODA/","link":"","permalink":"http://io.stelawliet.top/2018/08/16/TODOlist/JAVA TODA/","excerpt":"","text":"java – java aop pageHelper java file server bt sever video server csa","categories":[{"name":"todo","slug":"todo","permalink":"http://io.stelawliet.top/categories/todo/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"}]},{"title":"","slug":"Linux/server/Tomcat/Tomcat-IBM","date":"2018-08-16T12:31:26.000Z","updated":"2018-08-16T12:34:53.000Z","comments":true,"path":"2018/08/16/Linux/server/Tomcat/Tomcat-IBM/","link":"","permalink":"http://io.stelawliet.top/2018/08/16/Linux/server/Tomcat/Tomcat-IBM/","excerpt":"","text":"Tomcat 系统架构与设计模式，第 1 部分 工作原理系列内容：此内容是该系列 2 部分中的第 1 部分： Tomcat 系统架构与设计模式本文以 Tomcat 5 为基础，也兼顾最新的 Tomcat 6 和 Tomcat 4。Tomcat 的基本设计思路和架构是具有一定连续性的。 Tomcat 总体结构Tomcat 的结构很复杂，但是 Tomcat 也非常的模块化，找到了 Tomcat 最核心的模块，您就抓住了 Tomcat 的“七寸”。下面是 Tomcat 的总体结构图： 图 1.Tomcat 的总体结构从上图中可以看出 Tomcat 的心脏是两个组件：Connector 和 Container，关于这两个组件将在后面详细介绍。Connector 组件是可以被替换，这样可以提供给服务器设计者更多的选择，因为这个组件是如此重要，不仅跟服务器的设计的本身，而且和不同的应用场景也十分相关，所以一个 Container 可以选择对应多个 Connector。多个 Connector 和一个 Container 就形成了一个 Service，Service 的概念大家都很熟悉了，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了。所以整个 Tomcat 的生命周期由 Server 控制。 以 Service 作为“婚姻”我们将 Tomcat 中 Connector、Container 作为一个整体比作一对情侣的话，Connector 主要负责对外交流，可以比作为 Boy，Container 主要处理 Connector 接受的请求，主要是处理内部事务，可以比作为 Girl。那么这个 Service 就是连接这对男女的结婚证了。是 Service 将它们连接在一起，共同组成一个家庭。当然要组成一个家庭还要很多其它的元素。 说白了，Service 只是在 Connector 和 Container 外面多包一层，把它们组装在一起，向外面提供服务，一个 Service 可以设置多个 Connector，但是只能有一个 Container 容器。这个 Service 接口的方法列表如下： 图 2. Service 接口从 Service 接口中定义的方法中可以看出，它主要是为了关联 Connector 和 Container，同时会初始化它下面的其它组件，注意接口中它并没有规定一定要控制它下面的组件的生命周期。所有组件的生命周期在一个 Lifecycle 的接口中控制，这里用到了一个重要的设计模式，关于这个接口将在后面介绍。 Tomcat 中 Service 接口的标准实现类是 StandardService 它不仅实现了 Service 借口同时还实现了 Lifecycle 接口，这样它就可以控制它下面的组件的生命周期了。StandardService 类结构图如下： 图 3. StandardService 的类结构图从上图中可以看出除了 Service 接口的方法的实现以及控制组件生命周期的 Lifecycle 接口的实现，还有几个方法是用于在事件监听的方法的实现，不仅是这个 Service 组件，Tomcat 中其它组件也同样有这几个方法，这也是一个典型的设计模式，将在后面介绍。 下面看一下 StandardService 中主要的几个方法实现的代码，下面是 setContainer 和 addConnector 方法的源码： 清单 1. StandardService. SetContainer1public void setContainer(Container container) &#123;`` ``Container oldContainer = this.container;`` ``if ((oldContainer != null) &amp;&amp; (oldContainer instanceof Engine))`` ``((Engine) oldContainer).setService(null);`` ``this.container = container;`` ``if ((this.container != null) &amp;&amp; (this.container instanceof Engine))`` ``((Engine) this.container).setService(this);`` ``if (started &amp;&amp; (this.container != null) &amp;&amp; (this.container instanceof Lifecycle)) &#123;`` ``try &#123;`` ``((Lifecycle) this.container).start();`` ``&#125; catch (LifecycleException e) &#123;`` ``;`` ``&#125;`` ``&#125;`` ``synchronized (connectors) &#123;`` ``for (int i = 0; i &lt; connectors.length; i++)`` ``connectors[i].setContainer(this.container);`` ``&#125;`` ``if (started &amp;&amp; (oldContainer != null) &amp;&amp; (oldContainer instanceof Lifecycle)) &#123;`` ``try &#123;`` ``((Lifecycle) oldContainer).stop();`` ``&#125; catch (LifecycleException e) &#123;`` ``;`` ``&#125;`` ``&#125;`` ``support.firePropertyChange(&quot;container&quot;, oldContainer, this.container);``&#125; 这段代码很简单，其实就是先判断当前的这个 Service 有没有已经关联了 Container，如果已经关联了，那么去掉这个关联关系—— oldContainer.setService(null)。如果这个 oldContainer 已经被启动了，结束它的生命周期。然后再替换新的关联、再初始化并开始这个新的 Container 的生命周期。最后将这个过程通知感兴趣的事件监听程序。这里值得注意的地方就是，修改 Container 时要将新的 Container 关联到每个 Connector，还好 Container 和 Connector 没有双向关联，不然这个关联关系将会很难维护。 清单 2. StandardService. addConnectorpublic void addConnector(Connector connector) {` synchronized (connectors) { connector.setContainer(this.container); connector.setService(this); Connector results[] = new Connector[connectors.length + 1]; System.arraycopy(connectors, 0, results, 0, connectors.length); results[connectors.length] = connector; connectors = results; if (initialized) { try { connector.initialize(); } catch (LifecycleException e) { e.printStackTrace(System.err); } } if (started &amp;&amp; (connector instanceof Lifecycle)) { try { ((Lifecycle) connector).start(); } catch (LifecycleException e) { ; } } support.firePropertyChange(&quot;connector&quot;, null, connector); }}` 上面是 addConnector 方法，这个方法也很简单，首先是设置关联关系，然后是初始化工作，开始新的生命周期。这里值得一提的是，注意 Connector 用的是数组而不是 List 集合，这个从性能角度考虑可以理解，有趣的是这里用了数组但是并没有向我们平常那样，一开始就分配一个固定大小的数组，它这里的实现机制是：重新创建一个当前大小的数组对象，然后将原来的数组对象 copy 到新的数组中，这种方式实现了类似的动态数组的功能，这种实现方式，值得我们以后拿来借鉴。 最新的 Tomcat6 中 StandardService 也基本没有变化，但是从 Tomcat5 开始 Service、Server 和容器类都继承了 MBeanRegistration 接口，Mbeans 的管理更加合理。 以 Server 为“居”前面说一对情侣因为 Service 而成为一对夫妻，有了能够组成一个家庭的基本条件，但是它们还要有个实体的家，这是它们在社会上生存之本，有了家它们就可以安心的为人民服务了，一起为社会创造财富。 Server 要完成的任务很简单，就是要能够提供一个接口让其它程序能够访问到这个 Service 集合、同时要维护它所包含的所有 Service 的生命周期，包括如何初始化、如何结束服务、如何找到别人要访问的 Service。还有其它的一些次要的任务，如您住在这个地方要向当地政府去登记啊、可能还有要配合当地公安机关日常的安全检查什么的。 Server 的类结构图如下： 图 4. Server 的类结构图它的标准实现类 StandardServer 实现了上面这些方法，同时也实现了 Lifecycle、MbeanRegistration 两个接口的所有方法，下面主要看一下 StandardServer 重要的一个方法 addService 的实现： 清单 3. StandardServer.addServicepublic void addService(Service service) {` service.setServer(this); synchronized (services) { Service results[] = new Service[services.length + 1]; System.arraycopy(services, 0, results, 0, services.length); results[services.length] = service; services = results; if (initialized) { try { service.initialize(); } catch (LifecycleException e) { e.printStackTrace(System.err); } } if (started &amp;&amp; (service instanceof Lifecycle)) { try { ((Lifecycle) service).start(); } catch (LifecycleException e) { ; } } support.firePropertyChange(&quot;service&quot;, null, service); }}` 从上面第一句就知道了 Service 和 Server 是相互关联的，Server 也是和 Service 管理 Connector 一样管理它，也是将 Service 放在一个数组中，后面部分的代码也是管理这个新加进来的 Service 的生命周期。Tomcat6 中也是没有什么变化的。 组件的生命线“Lifecycle”前面一直在说 Service 和 Server 管理它下面组件的生命周期，那它们是如何管理的呢？ Tomcat 中组件的生命周期是通过 Lifecycle 接口来控制的，组件只要继承这个接口并实现其中的方法就可以统一被拥有它的组件控制了，这样一层一层的直到一个最高级的组件就可以控制 Tomcat 中所有组件的生命周期，这个最高的组件就是 Server，而控制 Server 的是 Startup，也就是您启动和关闭 Tomcat。 下面是 Lifecycle 接口的类结构图： 图 5. Lifecycle 类结构图除了控制生命周期的 Start 和 Stop 方法外还有一个监听机制，在生命周期开始和结束的时候做一些额外的操作。这个机制在其它的框架中也被使用，如在 Spring 中。关于这个设计模式会在后面介绍。 Lifecycle 接口的方法的实现都在其它组件中，就像前面中说的，组件的生命周期由包含它的父组件控制，所以它的 Start 方法自然就是调用它下面的组件的 Start 方法，Stop 方法也是一样。如在 Server 中 Start 方法就会调用 Service 组件的 Start 方法，Server 的 Start 方法代码如下： 清单 4. StandardServer.Startpublic void start() throws LifecycleException {` if (started) { log.debug(sm.getString(&quot;standardServer.start.started&quot;)); return; } lifecycle.fireLifecycleEvent(BEFORE_START_EVENT, null); lifecycle.fireLifecycleEvent(START_EVENT, null); started = true; synchronized (services) { for (int i = 0; i &lt; services.length; i++) { if (services[i] instanceof Lifecycle) ((Lifecycle) services[i]).start(); } } lifecycle.fireLifecycleEvent(AFTER_START_EVENT, null);}` 监听的代码会包围 Service 组件的启动过程，就是简单的循环启动所有 Service 组件的 Start 方法，但是所有 Service 必须要实现 Lifecycle 接口，这样做会更加灵活。 Server 的 Stop 方法代码如下： 清单 5. StandardServer.Stoppublic void stop() throws LifecycleException {` if (!started) return; lifecycle.fireLifecycleEvent(BEFORE_STOP_EVENT, null); lifecycle.fireLifecycleEvent(STOP_EVENT, null); started = false; for (int i = 0; i &lt; services.length; i++) { if (services[i] instanceof Lifecycle) ((Lifecycle) services[i]).stop(); } lifecycle.fireLifecycleEvent(AFTER_STOP_EVENT, null);}` 它所要做的事情也和 Start 方法差不多。 Connector 组件Connector 组件是 Tomcat 中两个核心组件之一，它的主要任务是负责接收浏览器的发过来的 tcp 连接请求，创建一个 Request 和 Response 对象分别用于和请求端交换数据，然后会产生一个线程来处理这个请求并把产生的 Request 和 Response 对象传给处理这个请求的线程，处理这个请求的线程就是 Container 组件要做的事了。 由于这个过程比较复杂，大体的流程可以用下面的顺序图来解释： 图 6. Connector 处理一次请求顺序图（查看清晰大图） Tomcat5 中默认的 Connector 是 Coyote，这个 Connector 是可以选择替换的。Connector 最重要的功能就是接收连接请求然后分配线程让 Container 来处理这个请求，所以这必然是多线程的，多线程的处理是 Connector 设计的核心。Tomcat5 将这个过程更加细化，它将 Connector 划分成 Connector、Processor、Protocol, 另外 Coyote 也定义自己的 Request 和 Response 对象。 下面主要看一下 Tomcat 中如何处理多线程的连接请求，先看一下 Connector 的主要类图： 图 7. Connector 的主要类图（查看清晰大图） 看一下 HttpConnector 的 Start 方法： 清单 6. HttpConnector.Startpublic void start() throws LifecycleException {` if (started) throw new LifecycleException (sm.getString(&quot;httpConnector.alreadyStarted&quot;)); threadName = &quot;HttpConnector[&quot; + port + &quot;]&quot;; lifecycle.fireLifecycleEvent(START_EVENT, null); started = true; threadStart(); while (curProcessors &lt;minProcessors) { if ((maxProcessors &gt; 0) &amp;&amp; (curProcessors &gt;= maxProcessors)) break; HttpProcessor processor = newProcessor(); recycle(processor); }}` threadStart() 执行就会进入等待请求的状态，直到一个新的请求到来才会激活它继续执行，这个激活是在 HttpProcessor 的 assign 方法中，这个方法是代码如下 ： 清单 7. HttpProcessor.assignsynchronized void assign(Socket socket) {` while (available) { try { wait(); } catch (InterruptedException e) { } } this.socket = socket; available = true; notifyAll(); if ((debug &gt;= 1) &amp;&amp; (socket != null)) log(&quot; An incoming request is being assigned&quot;);}` 创建 HttpProcessor 对象是会把 available 设为 false，所以当请求到来时不会进入 while 循环，将请求的 socket 赋给当期处理的 socket，并将 available 设为 true，当 available 设为 true 是 HttpProcessor 的 run 方法将被激活，接下去将会处理这次请求。 Run 方法代码如下： 清单 8. HttpProcessor.Runpublic void run() { ` while (!stopped) { Socket socket = await(); if (socket == null) continue; try { process(socket); } catch (Throwable t) { log(&quot;process.invoke&quot;, t); } connector.recycle(this); } synchronized (threadSync) { threadSync.notifyAll(); }}` 解析 socket 的过程在 process 方法中，process 方法的代码片段如下： 清单 9. HttpProcessor.processprivate void process(Socket socket) {` boolean ok = true; boolean finishResponse = true; SocketInputStream input = null; OutputStream output = null; try { input = new SocketInputStream(socket.getInputStream(),connector.getBufferSize()); } catch (Exception e) { log(&quot;process.create&quot;, e); ok = false; } keepAlive = true; while (!stopped &amp;&amp; ok &amp;&amp; keepAlive) { finishResponse = true; try { request.setStream(input); request.setResponse(response); output = socket.getOutputStream(); response.setStream(output); response.setRequest(request); ((HttpServletResponse) response.getResponse()) .setHeader(&quot;Server&quot;, SERVER_INFO); } catch (Exception e) { log(&quot;process.create&quot;, e); ok = false; } try { if (ok) { parseConnection(socket); parseRequest(input, output); if (!request.getRequest().getProtocol().startsWith(&quot;HTTP/0&quot;)) parseHeaders(input); if (http11) { ackRequest(output); if (connector.isChunkingAllowed()) response.setAllowChunking(true); } } 。。。。。。 try { ((HttpServletResponse) response).setHeader (&quot;Date&quot;, FastHttpDateFormat.getCurrentDate()); if (ok) { connector.getContainer().invoke(request, response); } 。。。。。。 } try { shutdownInput(input); socket.close(); } catch (IOException e) { ; } catch (Throwable e) { log(&quot;process.invoke&quot;, e); } socket = null;}` 当 Connector 将 socket 连接封装成 request 和 response 对象后接下来的事情就交给 Container 来处理了。 Servlet 容器“Container”Container 是容器的父接口，所有子容器都必须实现这个接口，Container 容器的设计用的是典型的责任链的设计模式，它有四个子容器组件构成，分别是：Engine、Host、Context、Wrapper，这四个组件不是平行的，而是父子关系，Engine 包含 Host,Host 包含 Context，Context 包含 Wrapper。通常一个 Servlet class 对应一个 Wrapper，如果有多个 Servlet 就可以定义多个 Wrapper，如果有多个 Wrapper 就要定义一个更高的 Container 了，如 Context，Context 通常就是对应下面这个配置： 清单 10. Server.xml&lt;`Contextpath=“/library”docBase=“D:\\projects\\library\\deploy\\target\\library.war”reloadable=“true”/&gt;` 容器的总体设计Context 还可以定义在父容器 Host 中，Host 不是必须的，但是要运行 war 程序，就必须要 Host，因为 war 中必有 web.xml 文件，这个文件的解析就需要 Host 了，如果要有多个 Host 就要定义一个 top 容器 Engine 了。而 Engine 没有父容器了，一个 Engine 代表一个完整的 Servlet 引擎。 那么这些容器是如何协同工作的呢？先看一下它们之间的关系图： 图 8. 四个容器的关系图（查看清晰大图） 当 Connector 接受到一个连接请求时，将请求交给 Container，Container 是如何处理这个请求的？这四个组件是怎么分工的，怎么把请求传给特定的子容器的呢？又是如何将最终的请求交给 Servlet 处理。下面是这个过程的时序图： 图 9. Engine 和 Host 处理请求的时序图（查看清晰大图） 这里看到了 Valve 是不是很熟悉，没错 Valve 的设计在其他框架中也有用的，同样 Pipeline 的原理也基本是相似的，它是一个管道，Engine 和 Host 都会执行这个 Pipeline，您可以在这个管道上增加任意的 Valve，Tomcat 会挨个执行这些 Valve，而且四个组件都会有自己的一套 Valve 集合。您怎么才能定义自己的 Valve 呢？在 server.xml 文件中可以添加，如给 Engine 和 Host 增加一个 Valve 如下： 清单 11. Server.xml&lt;`EnginedefaultHost=“localhost”name=“Catalina”&gt;` `&lt;Valve` `className=&quot;org.apache.catalina.valves.RequestDumperValve&quot;/&gt;………&lt;Host` `appBase=&quot;webapps&quot;` `autoDeploy=&quot;true&quot;` `name=&quot;localhost&quot;` `unpackWARs=&quot;true&quot; xmlNamespaceAware=&quot;false&quot;` `xmlValidation=&quot;false&quot;&gt; &lt;ValveclassName=“org.apache.catalina.valves.FastCommonAccessLogValve”directory=“logs”prefix=“localhost_access_log.”suffix=“.txt”pattern=“common”resolveHosts=“false”/&gt; ………… &lt;/Host&gt;&lt;/Engine&gt;` StandardEngineValve 和 StandardHostValve 是 Engine 和 Host 的默认的 Valve，它们是最后一个 Valve 负责将请求传给它们的子容器，以继续往下执行。 前面是 Engine 和 Host 容器的请求过程，下面看 Context 和 Wrapper 容器时如何处理请求的。下面是处理请求的时序图： 图 10. Context 和 wrapper 的处理请求时序图（查看清晰大图） 从 Tomcat5 开始，子容器的路由放在了 request 中，request 中保存了当前请求正在处理的 Host、Context 和 wrapper。 Engine 容器Engine 容器比较简单，它只定义了一些基本的关联关系，接口类图如下： 图 11. Engine 接口的类结构它的标准实现类是 StandardEngine，这个类注意一点就是 Engine 没有父容器了，如果调用 setParent 方法时将会报错。添加子容器也只能是 Host 类型的，代码如下： 清单 12. StandardEngine. addChildpublic void addChild(Container child) {` if (!(child instanceof Host)) throw new IllegalArgumentException (sm.getString(&quot;standardEngine.notHost&quot;)); super.addChild(child);}public void setParent(Container container) {throw new IllegalArgumentException(sm.getString(“standardEngine.notParent”));}` 它的初始化方法也就是初始化和它相关联的组件，以及一些事件的监听。 Host 容器Host 是 Engine 的字容器，一个 Host 在 Engine 中代表一个虚拟主机，这个虚拟主机的作用就是运行多个应用，它负责安装和展开这些应用，并且标识这个应用以便能够区分它们。它的子容器通常是 Context，它除了关联子容器外，还有就是保存一个主机应该有的信息。 下面是和 Host 相关的类关联图： 图 12. Host 相关的类图（查看清晰大图） 从上图中可以看出除了所有容器都继承的 ContainerBase 外，StandardHost 还实现了 Deployer 接口，上图清楚的列出了这个接口的主要方法，这些方法都是安装、展开、启动和结束每个 web application。 Deployer 接口的实现是 StandardHostDeployer，这个类实现了的最要的几个方法，Host 可以调用这些方法完成应用的部署等。 Context 容器Context 代表 Servlet 的 Context，它具备了 Servlet 运行的基本环境，理论上只要有 Context 就能运行 Servlet 了。简单的 Tomcat 可以没有 Engine 和 Host。 Context 最重要的功能就是管理它里面的 Servlet 实例，Servlet 实例在 Context 中是以 Wrapper 出现的，还有一点就是 Context 如何才能找到正确的 Servlet 来执行它呢？ Tomcat5 以前是通过一个 Mapper 类来管理的，Tomcat5 以后这个功能被移到了 request 中，在前面的时序图中就可以发现获取子容器都是通过 request 来分配的。 Context 准备 Servlet 的运行环境是在 Start 方法开始的，这个方法的代码片段如下： 清单 13. StandardContext.startpublic synchronized void start() throws LifecycleException {` ……… if( !initialized ) { try { init(); } catch( Exception ex ) { throw new LifecycleException(&quot;Error initializaing &quot;, ex); } } ……… lifecycle.fireLifecycleEvent(BEFORE_START_EVENT, null); setAvailable(false); setConfigured(false); boolean ok = true; File configBase = getConfigBase(); if (configBase != null) { if (getConfigFile() == null) { File file = new File(configBase, getDefaultConfigFile()); setConfigFile(file.getPath()); try { File appBaseFile = new File(getAppBase()); if (!appBaseFile.isAbsolute()) { appBaseFile = new File(engineBase(), getAppBase()); } String appBase = appBaseFile.getCanonicalPath(); String basePath = (new File(getBasePath())).getCanonicalPath(); if (!basePath.startsWith(appBase)) { Server server = ServerFactory.getServer(); ((StandardServer) server).storeContext(this); } } catch (Exception e) { log.warn(&quot;Error storing config file&quot;, e); } } else { try { String canConfigFile = (new File(getConfigFile())).getCanonicalPath(); if (!canConfigFile.startsWith (configBase.getCanonicalPath())) { File file = new File(configBase, getDefaultConfigFile()); if (copy(new File(canConfigFile), file)) { setConfigFile(file.getPath()); } } } catch (Exception e) { log.warn(&quot;Error setting config file&quot;, e); } } }` `………Container children[] = findChildren();for (int i = 0; i &lt; children.length; i++) {if (children[i] instanceof Lifecycle)((Lifecycle) children[i]).start();}` `if (pipeline instanceof Lifecycle)((Lifecycle) pipeline).start();………}` 它主要是设置各种资源属性和管理组件，还有非常重要的就是启动子容器和 Pipeline。 我们知道 Context 的配置文件中有个 reloadable 属性，如下面配置： 清单 14. Server.xml&lt;`Contextpath=“/library”docBase=“D:\\projects\\library\\deploy\\target\\library.war”reloadable=“true”/&gt;` 当这个 reloadable 设为 true 时，war 被修改后 Tomcat 会自动的重新加载这个应用。如何做到这点的呢 ? 这个功能是在 StandardContext 的 backgroundProcess 方法中实现的，这个方法的代码如下： 清单 15. StandardContext. backgroundProcesspublic void backgroundProcess() {` if (!started) return; count = (count + 1) % managerChecksFrequency; if ((getManager() != null) &amp;&amp; (count == 0)) { try { getManager().backgroundProcess(); } catch ( Exception x ) { log.warn(&quot;Unable to perform background process on manager&quot;,x); } } if (getLoader() != null) { if (reloadable &amp;&amp; (getLoader().modified())) { try { Thread.currentThread().setContextClassLoader (StandardContext.class.getClassLoader()); reload(); } finally { if (getLoader() != null) { Thread.currentThread().setContextClassLoader (getLoader().getClassLoader()); } } } if (getLoader() instanceof WebappLoader) { ((WebappLoader) getLoader()).closeJARs(false); } }}` 它会调用 reload 方法，而 reload 方法会先调用 stop 方法然后再调用 Start 方法，完成 Context 的一次重新加载。可以看出执行 reload 方法的条件是 reloadable 为 true 和应用被修改，那么这个 backgroundProcess 方法是怎么被调用的呢？ 这个方法是在 ContainerBase 类中定义的内部类 ContainerBackgroundProcessor 被周期调用的，这个类是运行在一个后台线程中，它会周期的执行 run 方法，它的 run 方法会周期调用所有容器的 backgroundProcess 方法，因为所有容器都会继承 ContainerBase 类，所以所有容器都能够在 backgroundProcess 方法中定义周期执行的事件。 Wrapper 容器Wrapper 代表一个 Servlet，它负责管理一个 Servlet，包括的 Servlet 的装载、初始化、执行以及资源回收。Wrapper 是最底层的容器，它没有子容器了，所以调用它的 addChild 将会报错。 Wrapper 的实现类是 StandardWrapper，StandardWrapper 还实现了拥有一个 Servlet 初始化信息的 ServletConfig，由此看出 StandardWrapper 将直接和 Servlet 的各种信息打交道。 下面看一下非常重要的一个方法 loadServlet，代码片段如下： 清单 16. StandardWrapper.loadServletpublic synchronized Servlet loadServlet() throws ServletException {` ……… Servlet servlet; try { ……… ClassLoader classLoader = loader.getClassLoader(); ……… Class classClass = null; ……… servlet = (Servlet) classClass.newInstance(); if ((servlet instanceof ContainerServlet) &amp;&amp; (isContainerProvidedServlet(actualClass) || ((Context)getParent()).getPrivileged() )) { ((ContainerServlet) servlet).setWrapper(this); } classLoadTime=(int) (System.currentTimeMillis() -t1); try { instanceSupport.fireInstanceEvent(InstanceEvent.BEFORE_INIT_EVENT,servlet); if( System.getSecurityManager() != null) { Class[] classType = new Class[]{ServletConfig.class}; Object[] args = new Object[]{((ServletConfig)facade)}; SecurityUtil.doAsPrivilege(&quot;init&quot;,servlet,classType,args); } else { servlet.init(facade); } if ((loadOnStartup &gt;= 0) &amp;&amp; (jspFile != null)) { ……… if( System.getSecurityManager() != null) { Class[] classType = new Class[]{ServletRequest.class, ServletResponse.class}; Object[] args = new Object[]{req, res}; SecurityUtil.doAsPrivilege(&quot;service&quot;,servlet,classType,args); } else { servlet.service(req, res); } } instanceSupport.fireInstanceEvent(InstanceEvent.AFTER_INIT_EVENT,servlet); ……… return servlet;}` 它基本上描述了对 Servlet 的操作，当装载了 Servlet 后就会调用 Servlet 的 init 方法，同时会传一个 StandardWrapperFacade 对象给 Servlet，这个对象包装了 StandardWrapper，ServletConfig 与它们的关系图如下： 图 13. ServletConfig 与 StandardWrapperFacade、StandardWrapper 的关系Servlet 可以获得的信息都在 StandardWrapperFacade 封装，这些信息又是在 StandardWrapper 对象中拿到的。所以 Servlet 可以通过 ServletConfig 拿到有限的容器的信息。 当 Servlet 被初始化完成后，就等着 StandardWrapperValve 去调用它的 service 方法了，调用 service 方法之前要调用 Servlet 所有的 filter。 Tomcat 中其它组件Tomcat 还有其它重要的组件，如安全组件 security、logger 日志组件、session、mbeans、naming 等其它组件。这些组件共同为 Connector 和 Container 提供必要的服务。","categories":[],"tags":[]},{"title":"彻底理解Git@github","slug":"Linux/git","date":"2018-08-16T12:06:59.000Z","updated":"2018-08-28T11:43:30.000Z","comments":true,"path":"2018/08/16/Linux/git/","link":"","permalink":"http://io.stelawliet.top/2018/08/16/Linux/git/","excerpt":"","text":"彻底理解Git@Github 翻译 2016年05月25日 23:24:14 Translated from http://maryrosecook.com/blog/post/git-from-the-inside-out. 本文原地址：https://github.com/pysnow530/git-from-the-inside-out/blob/master/README.md 本文主要解释git的工作原理。如果你是一个视频党，请移步youtube视频。 本文假设你已经了解Git，并可以使用它来对项目做版本控制。我们主要考察支撑Git的图结构和指导Git行为的图属性。在考察原理时，我们会创建真实的状态模型，而不是通过各种实验的结果妄做猜想。通过这个真实的状态模型，我们可以更直观地了解git已经做了什么，正在做什么，以及接下来要做什么。 本文结构组织为一系列的Git命令，针对一个单独的项目展开。在关键的地方，我们会观察Git当前状态的图结构，并解释图属性及其产生的行为。 如果你读完本文后仍意犹未尽，可以看一下maryrosecook对Git的JavaScript实现 ，里面包含了大量注释。 创建项目123~ $ mkdir alpha~ $ cd alpha123 创建项目目录alpha。 123~/alpha $ mkdir data~/alpha $ printf &apos;a&apos; &gt; data/letter.txt123 进入alpha目录，创建目录data。在data目录下，创建内容为a的文件letter.txt。现在，alpha的目录结构如下： 1234alpha└── data └── letter.txt1234 初始化仓库123~/alpha $ git initInitialized empty Git repository123 git init命令将当前目录添加到Git仓库。为此，它会在当前目录下创建一个.git目录并写入一批文件。这些文件记录了Git配置和版本历史的所有信息。它们都是一些普通的文件，并没什么特别。用户可以使用编辑器或shell命令对它们进行浏览或编辑。也就是说，用户可以像编辑他们的项目文件一样来浏览或编辑项目的版本历史。 现在，alpha的目录结构变成了这个样子： 1234567alpha├── data│ └── letter.txt└── .git ├── objects etc...1234567 .git目录和它的内容是由Git创建的。其它文件组成了工作区，是由用户创建的。 添加文件12~/alpha $ git add data/letter.txt12 添加data/letter.txt文件到Git。该操作有两个影响。 第一，它会在.git/objects/目录下创建一个新的blob文件。 这个blob文件包含了data/letter.txt文件压缩后的内容，文件名取自内容的哈希值。哈希意味着执行一段算法，将给定内容转换为更小的1，且能唯一2确定原内容的值的过程。例如，Git对a作哈希得到2e65efe2a145dda7ee51d1741299f848e5bf752e。哈希值的头两个字符用作对象数据库的目录名：.git/objects/2e/，剩下的字符用作blob文件的文件名：.git/objects/2e/65efe2a145dda7ee51d1741299f848e5bf752e。 注意刚才添加文件时，Git将它的内容保存到objects目录的过程。即使我们从工作区把data/letter.txt文件删掉，它的内容仍然可以在Git中找回。 第二，它会将data/letter.txt文件添加到index。index是一个列表，它记录有我们想要跟踪的所有文件。该列表保存在.git/index文件内，每一行维护一个文件名到（添加到index时的）文件内容哈希值的映射。执行git add命令后的index如下： 12data/letter.txt 2e65efe2a145dda7ee51d1741299f848e5bf752e12 创建一个内容为1234的文件data/number.txt。 12~/alpha $ printf &apos;1234&apos; &gt; data/number.txt12 现在工作区的目录结构如下： 12345alpha└── data ├── letter.txt └── number.txt12345 将data/number.txt添加到Git。 12~/alpha $ git add data12 git add命令创建一个包含data/number.txt内容的blob对象，然后添加一个index项，将data/number.txt指向刚刚创建的blob对象。执行完后的index如下： 123data/letter.txt 2e65efe2a145dda7ee51d1741299f848e5bf752edata/number.txt 274c0052dd5408f8ae2bc8440029ff67d79bc5c3123 注意，虽然我们执行的是git add data，但只有data目录内的文件被加到index，data不会被加入。 123~/alpha $ printf &apos;1&apos; &gt; data/number.txt~/alpha $ git add data123 我们原打算在data/number.txt内写入1而不是刚才的1234，现在修正一下，然后将文件重新加到index。这条命令会为新的内容重新生成一个blob文件，并更新data/number.txt在index中的指向。 创建提交123~/alpha $ git commit -m &apos;a1&apos; [master (root-commit) 774b54a] a1123 创建一个提交a1。Git会打印出此次提交的简短描述。 提交命令对应三个步骤。创建提交版本对应文件的树图（tree graph），创建一个提交对象，然后将当前分支指向该提交。 创建树图树图记录着index内对应文件 (即项目文件) 的位置和内容，Git通过树图来记录项目的当前状态。 树图由两类对象组成：blob和tree。 blob是在执行git add命令时创建的，用来保存项目文件的内容。 tree是在创建提交时产生的，一个tree对应工作区的一个目录。 创建提交后，对应data目录的tree如下： 123100664 blob 2e65efe2a145dda7ee51d1741299f848e5bf752e letter.txt100664 blob 56a6051ca2b02b04ef92d5150c9ef600403cb1de number.txt123 第一行记录了恢复data/letter.txt文件需要的所有信息。第一部分表示该文件的权限，第二部分表示该行记录的是一个blob对象，第三部分表示该blob的哈希值，第四部分记录了文件名。 第二行是data/number.txt的信息。 下面是对应alpha目录（项目根目录）的tree： 12040000 tree 0eed1217a2947f4930583229987d90fe5e8e0b74 data12 这仅有的一行指向data这个树对象。 Tree graph for the a1 commit 上图中，root tree指向了data，而data tree指向了data/letter.txt和data/number.txt这两个blob。 创建提交对象git commit在创建完树图后会创建一个提交对象。提交对象是.git/objects/目录下的另一种文本文件： 123456tree ffe298c3ce8bb07326f888907996eaa48d266db4author Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1424798436 -0500committer Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1424798436 -0500a1123456 第一行指向一个tree对象。通过这里的哈希值，我们可以找到一个指向工作区根目录（即alpha目录）的tree对象。最后一行是提交信息。 a1 commit object pointing at its tree graph 将当前分支指向新提交最后，commit命令将当前分支指向新的提交。 那么，哪个是当前分支呢？Git查看保存HEAD的文件.git/HEAD，此时它的内容是： 12ref: refs/heads/master12 好了，HEAD现在指向master，master就是我们的当前分支。 HEAD和master都是引用。引用是一个标记，Git或用户可以通过它找到某个提交。 代表master引用的文件还不存在，因为这是我们在该仓库的第一个提交。不过不用担心，Git会创建该文件.git/refs/heads/master并写入提交对象的哈希值： 1274ac3ad9cde0b265d2b4f1c778b283a6e2ffbafd12 注意：如果你跟着本文边读边敲，你的a1提交生成的哈希值会跟上值不同。像blob和tree这样以内容计算哈希的对象，它们的哈希值与本文相同。提交不然，因为它的哈希值包含了提交日期和作者的信息。 现在把HEAD和master添加到我们的图里： HEAD pointing at master and master pointing at the a1 commit HEAD指向master，这跟提交前一样。但是master现在已经存在了，而且它指向了新的提交对象。 创建第二个提交12下图是提交`a1`后的Git状态图（包含工作区和index）：12 a1 commit shown with the working copy and index 注意，data/letter.txt和data/number.txt的内容在工作区、index和a1是一致的。index和HEAD都通过哈希值指向blob对象，而在工作区，内容直接保存在文件里。 12~/alpha $ printf &apos;2&apos; &gt; data/number.txt12 将data/number.txt的内容更新为2。这个操作只修改了工作区，index和HEAD不变。 data/number.txt set to 2 in the working copy 12~/alpha $ git add data/number.txt12 将文件添加到Git。此操作将在objects目录下添加一个内容为2的blob对象，然后将index中的data/number.txt项指向该blob对象。 data/number.txt set to 2 in the working copy and index 123~/alpha $ git commit -m &apos;a2&apos; [master f0af7e6] a2123 提交此次变更。Git在这里做的操作跟之前第一次提交时相同。 第一步，创建包含index文件列表的树图。 index中的data/number.txt项已经更新，老的data tree不能再反映data目录现在的状态了，此时一个新的data tree会被创建： 123100664 blob 2e65efe2a145dda7ee51d1741299f848e5bf752e letter.txt100664 blob d8263ee9860594d2806b0dfd1bfd17528b0ba2a4 number.txt123 新的data tree和之前的data tree有不同的哈希值，为记录这一变化，新的root tree被创建： 12040000 tree 40b0318811470aaacc577485777d7a6780e51f0b data12 第二步，一个新的commit对象被创建。 1234567tree ce72afb5ff229a39f6cce47b00d1b0ed60fe3556parent 774b54a193d6cfdd081e581a007d2e11f784b9feauthor Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1424813101 -0500committer Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1424813101 -0500a21234567 commit对象的第一行指向新的root tree，第二行指向父提交a1。Git会查看HEAD，找到当前分支master，进而找到父提交的哈希值。 第三步，新创建的提交的哈希值被写入记录master分支的文件。 a2 commit Git graph without the working copy and index 图属性：项目内容被保存到blob和tree对象组成的树形结构里。这意味着只有变化的文件才被保存到对象数据库。看上图，a2重用了a1提交前生成的a blob。同样的，如果一个目录在提交前后没有变化，那么这个目录及其子目录的tree对象和blob对象都可以重用。通常，我们的单个提交只包含极少的变化文件，这意味着Git可以使用少量磁盘空间保存大量提交历史。 图属性：每个提交都有一个父提交。这意味着仓库可以记录项目提交历史。 译者注：仓库的第一个提交是没有父提交的（或者说父提交为空）。 图属性：ref是某段提交历史的入口。这意味着我们可以给某个提交一个有意义的名字。用户将工作组织成不同版本线，并赋予有意义的ref，如fix-for-bug-376。Git使用符号链接来操作提交历史，如HEAD、MERGE_HEAD和FETCH_HEAD。 图属性：objects/目录下的结点是不可变的。这意味着它的内容可以编辑，但不能删除。添加的文件内容和创建的提交都保存在objects目录3下。 图属性：ref是可变的。因此，一个分支的状态是可以修改的。master分支指向的提交可能是项目当前最好的版本，但它会被一个新的更好的提交取代。 图属性：工作区和ref指向的提交更容易被访问到，其它提交会麻烦一点。这意味着最近的提交历史更容易被访问，但它们更经常被修改。或者说，Git has a fading memory that must be jogged with increasingly vicious prods。 工作区是在历史里最容易找到的，它就在仓库的根目录，不需要执行Git命令。它也是在历史里我们最经常修改的，用户可以针对一个文件修改N个版本，但Git只记录执行add命令时的版本。 HEAD指向的提交很容易找到，它就是当前分支的最近一个提交。执行git statsh4命令后的工作区就是它的内容。同时，HEAD也是我们最经常修改的ref。 其它ref指向的提交也很容易找到，我们只要把它们检出就可以了。修改其它分支没有修改HEAD来得经常，但当修改其它分支涉及到的功能时，它们就会变得非常有用。 没有被ref指向的提交是很难找到的。在某个ref上的提交越多，操作之前的提交就越不容易。但我们通常很少操作很久之前的提交5。 检出提交123~/alpha $ git checkout 37888c2 You are in &apos;detached HEAD&apos; state...123 使用a2的哈希值检出该提交。(此命令不能直接运行，请先使用git log找到你仓库里a2的哈希值。) 检出操作分四步。 第一步，Git找到a2指向的树图。 第二步，将树图里对应的文件写到工作区。这一步不会产生任何变化。工作区的内容已经和树图保持一致了，因为我们的HEAD之前就已经通过master指向a2提交了。 第三步，将树图里对应的文件写到index。这一步也不会产生任何变化。index也已经跟树图的内容保持一致了。 第四步，将a2的哈希值写入HEAD: 12f0af7e62679e144bb28c627ee3e8f7bdb235eee912 将HEAD内容设置为某个哈希值会导致仓库进入detached HEAD状态。注意下图中的HEAD，它直接指向a2提交，而不再指向master。 Detached HEAD on a2 commit 12345~/alpha $ printf &apos;3&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;a3&apos; [detached HEAD 3645a0e] a312345 将data/number.txt的内容修改为3，然后提交。Git查看HEAD来确定a3的父提交，它没有发现分支，而是找到了a2的哈希值。 Git将HEAD更新为a3的哈希值。此时仓库仍然处于detached HEAD状态，而没有在一个分支上，因为没有ref指向a3或它之后的提交。这意味着它很容易丢失。 从现在起，我们将在Git的状态图中忽略tree和blob。 a3 commit that is not on a branch 创建分支12~/alpha $ git branch deputy12 创建一个新分支deputy。该操作只是创建一个新文件.git/refs/heads/deputy，并把HEAD指向的a3的哈希值写入该文件。 图属性：分支只是ref，而ref只是文件。这意味着Git的分支是很轻量的。 创建deputy分支使得a3附属到了该分支上，a3现在安全了。HEAD仍然处于detached状态，因为它仍直接指向一个提交。 a3 commit now on the deputy branch 检出分支123~/alpha $ git checkout master Switched to branch &apos;master&apos;123 检出master分支。 第一步，Git会获取master指向的提交a2，根据a2获取该分支指向的树图。 第二步，Git将树图对应的文件写入工作区。此步会将data/number.txt的内容修改为2。 第三步，Git将树图对应的文件写入index。此步会将index内的data/number.txt更新为2这个blob的哈希值。 第四步，Git将HEAD指向master，即将HEAD内容由哈希值改为： 12ref: refs/heads/master12 master checked out and pointing at the a2 commit 检出与工作区有冲突的分支12345678~/alpha $ printf &apos;789&apos; &gt; data/number.txt~/alpha $ git checkout deputy Your changes to these files would be overwritten by checkout: data/number.txt Commit your changes or stash them before you switch branches.12345678 用户小手一抖，将data/number.txt文件的内容改成了789，然后试图检出deputy。Git阻止了这场血案。 HEAD通过master指向a2，data/number.txt在a2提交时的内容是2。deputy指向a3，该文件在a3提交时的内容是3。而在工作区中，该文件内容是789。这些版本的文件内容都不相同，我们必须先解决这些差异。 Git可以使用要检出的文件内容替换工作区的文件内容，但这样会导致文件内容的丢失。 Git也可以把要检出的文件内容合并到工作区，但这要复杂的多。 所以Git终止了检出操作。 1234~/alpha $ printf &apos;2&apos; &gt; data/number.txt~/alpha $ git checkout deputy Switched to branch &apos;deputy&apos;1234 现在我们意识到了这次失误，将文件改回原内容。现在可以成功检出deputy了。 deputy checked out 合并祖先提交123~/alpha $ git merge master Already up-to-date.123 将master合并到deputy。合并两个分支就是合并他们的提交。deputy指向合并的目的提交，master指向合并的源提交。Git不会对本次合并做任何操作，只是提示Already up-to-date.。 图属性：提交序列被解释为对项目内容的一系列更改。这意味着，如果源提交是目的提交的祖先提交，Git将不会做合并操作。这些修改已经被合并过了。 合并后代提交123~/alpha $ git checkout master Switched to branch &apos;master&apos;123 检出master。 master checked out and pointing at the a2 commit 123~/alpha $ git merge deputy Fast-forward123 将deputy合并到master。Git发现目的提交a2是源提交a3的祖先提交。Git使用了fast-forward合并。 Git获取源提交和它指向的树图，将树图中的文件写入工作区和index。然后使用”fast-forward”技术将master指向a3。 a3 commit from deputy fast-forward merged into master 图属性：提交序列被解释为对仓库内容的一系列更改。这意味着，如果源提交是目的提交的后代提交，提交历史是不会改变的，因为已经存在一段提交来描述目的提交和源提交之间的变化。但是Git的状态图是会改变的。HEAD指向的ref会更新为源提交。 合并不同提交线的两个提交12345~/alpha $ printf &apos;4&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;a4&apos; [master 7b7bd9a] a412345 将data/number.txt内容修改为4，然后提交。 1234567~/alpha $ git checkout deputy Switched to branch &apos;deputy&apos; ~/alpha $ printf &apos;b&apos; &gt; data/letter.txt ~/alpha $ git add data/letter.txt ~/alpha $ git commit -m &apos;b3&apos; [deputy 982dffb] b31234567 检出到deputy，将data/letter.txt内容修改为b，然后提交。 a4 committed to master, b3 committed to deputy and deputy checked out 图属性：多个提交可以共用一个父提交，这意味着我们可以在提交历史里创建新的提交线。 图属性：一个提交可以有多个父提交，这意味着我们可以通过创建一个合并提交来合并两个不同的提交线。 123~/alpha $ git merge master -m &apos;b4&apos; Merge made by the &apos;recursive&apos; strategy.123 合并master到deputy。 Git发现目的提交b3和源提交a4在两个不同的提交线上，它创建了一个合并提交。这个过程总共分八步。 第一步，Git将源提交的哈希值写入文件alpha/.git/MERGE_HEAD。若此文件存在，说明Git正在做合并操作。 第二步，Git查找源提交和目的提交的最近一个公共父提交，即基提交。 a3, the base commit of a4 and b3 图属性：每个提交都有一个父提交。这意味着我们可以发现两个提交线分开自哪个提交。Git查找b3和a4的所有祖先提交，发现了最近的公共父提交a3。这正是他们的基提交。 第三步，Git为基提交、源提交和目的提交创建索引。 第四步，Git创建源提交和目的提交相对于基提交的差异，此处的差异是一个列表，每一项由文件路径以及文件状态组成。状态包括：添加、移除、修改、冲突。 Git获取基提交、源提交和目的提交的文件列表，然后针对每一个文件，通过对比index来判断它的状态。Git将文件列表及状态写入差异列表。在我们的例子中，差异包含两个条目。 第一项记录data/letter.txt的状态。在基提交、目的提交和源提交中，该文件内容分别是a、b和a。文件内容在基提交和目的提交不同，但在基提交和源提交相同。Git发现文件内容被目的提交修改了，而在源提交中没有被修改。所以data/letter.txt项的状态是修改，而不是冲突。 第二项记录data/number.txt的状态。在我们的例子中，该文件内容在基提交和目的提交相同，但在基提交和源提交不同。这个条目的状态也是修改。 图属性：查找一个合并操作的基提交是可行的。这意味着，如果基提交中的一个文件只在源提交或目的提交做了修改，Git可以自动合并该文件，这样就减少了用户的工作量。 第五步，Git将差异中的项更新到工作区。data/letter.txt内容被修改为b，data/number.txt内容被修改为4。 第六步，Git将差异中的项更新到index。data/letter.txt会指向内容为b的blob，data/number.txt会指向内容为4的blob。 第七步，更新后的index被提交： 12345678tree 20294508aea3fb6f05fcc49adaecc2e6d60f7e7dparent 982dffb20f8d6a25a8554cc8d765fb9f3ff1333bparent 7b7bd9a5253f47360d5787095afc5ba56591bfe7author Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1425596551 -0500committer Mary Rose Cook &lt;mary@maryrosecook.com&gt; 1425596551 -0500b412345678 注意，这个提交有两个父提交。 第八步，Git将当前分支deputy指向新创建的提交。 b4, the merge commit resulting from the recursive merge of a4 into b3 合并不同提交线且有相同修改文件的两个提交12345~/alpha $ git checkout master Switched to branch &apos;master&apos;~/alpha $ git merge deputy Fast-forward12345 检出master，将deputy合并到master。此操作将使用fast-forwards将master指向b4。现在，master和deputy指向了相同的提交。 deputy merged into master to bring master up to the latest commit, b4 1234567~/alpha $ git checkout deputy Switched to branch &apos;deputy&apos;~/alpha $ printf &apos;5&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;b5&apos; [deputy bd797c2] b51234567 检出deputy。将data/number.txt内容修改为5，然后提交。 1234567~/alpha $ git checkout master Switched to branch &apos;master&apos;~/alpha $ printf &apos;6&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;b6&apos; [master 4c3ce18] b61234567 检出master。将data/number.txt内容修改为6，然后提交。 b5 commit on deputy and b6 commit on master 12345~/alpha $ git merge deputy CONFLICT in data/number.txt Automatic merge failed; fix conflicts and commit the result.12345 将deputy合并到master。合并因冲突中止。对于有冲突的合并操作，执行步骤的前六步跟没有冲突的合并是相同的：写入.git/MERGE_HEAD，查找基提交，创建基提交、目的提交和源提交的索引，生成差异，更新工作区，更新index。由于发生了冲突，第七步（创建提交）和第八步（更新ref）不再执行。让我们再来看看这些步骤，观察到底发生了什么。 第一步，Git将源提交的哈希值写入.git/MERGE_HEAD。 MERGE_HEAD written during merge of b5 into b6 第二步，Git查找到基提交b4。 第三步，Git创建基提交、目的提交和源提交的索引。 第四步，Git生成目的提交和源提交相对于基提交的差异列表，每一项包含文件路径和该文件的状态：添加、移除、修改或冲突。 在本例中，差异列表仅包含一项：data/number.txt。由于它的内容在源提交和目的提交中都是变化的（相对于基提交），它的状态被标为冲突。 第五步，差异列表中的文件被写入工作区。对于冲突的部分，Git将两个版本都写入工作区。data/number.txt的内容变为： 123456&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD6=======5&gt;&gt;&gt;&gt;&gt;&gt;&gt; deputy123456 第六步，差异列表中的文件被写入index。index中的项被文件路径和stage的组合唯一标识。没有冲突的项stage为0。在本次合并前，index看起来像下面的样子（标有0的一列是stage）： 1230 data/letter.txt 63d8dbd40c23542e740659a7168a0ce3138ea7480 data/number.txt 62f9457511f879886bb7728c986fe10b0ece6bcb123 差异列表写入index后，index变成： 123450 data/letter.txt 63d8dbd40c23542e740659a7168a0ce3138ea7481 data/number.txt bf0d87ab1b2b0ec1a11a3973d2845b42413d97672 data/number.txt 62f9457511f879886bb7728c986fe10b0ece6bcb3 data/number.txt 7813681f5b41c028345ca62a2be376bae70b7f6112345 stage 0的data/letter.txt项跟合并前一样。stage 0的data/number.txt项已经不复存在，取而代之的是三个新项。stage 1的项包含该文件在基提交中内容的哈希值，stage 2包含目的提交的哈希值，stage 3包含源提交的哈希值。这三项表明文件data/number.txt存在冲突。 合并中止了。 123~/alpha $ printf &apos;11&apos; &gt; data/number.txt~/alpha $ git add data/number.txt123 将两个有冲突的文件合并，这里我们将data/number.txt的内容修改为11，然后将文件添加到index，以告诉Git冲突已经解决了。Git为11创建一个blob，移除index中的三项data/number.txt，并添加stage为0的data/number.txt项，该项指向新创建blob。现在index变成了： 1234560 data/letter.txt 63d8dbd40c23542e740659a7168a0ce3138ea7480 data/number.txt 9d607966b721abde8931ddd052181fae905db503~/alpha $ git commit -m &apos;b11&apos; [master 251a513] b11123456 第七步，提交。Git发现存在.git/MERGE_HEAD，也就是说合并还在进行。通过检查index，发现没有冲突。它创建了一个新提交b11，用来记录合并后的内容。然后删除.git/MERGE_HEAD。此次合并完成。 第八步，Git将当前分支master指向新提交。 b11, the merge commit resulting from the conflicted, recursive merge of b5 into b6 移除文件下图是当前Git的状态图，其中包含了提交历史、最后提交的tree和blob、工作区以及index： The working copy, index, b11 commit and its tree graph 123~/alpha $ git rm data/letter.txt rm &apos;data/letter.txt&apos;123 使用Git移除data/letter.txt。Git将该文件从工作区和index删除。 After data/letter.txt rmed from working copy and index 123~/alpha $ git commit -m &apos;11&apos; [master d14c7d2] 11123 提交变更。按照惯例，Git为index创建一个树图。该树图不再包含data/letter.txt，因为它已经从index删除了。 11 commit made after data/letter.txt rmed 拷贝仓库123~/alpha $ cd .. ~ $ cp -R alpha bravo123 将alpha/拷贝到bravo/。此时将出现下面的目录结构： 12345678~├── alpha│ └── data│ └── number.txt└── bravo └── data └── number.txt12345678 现在bravo目录存在另一个Git状态图： New graph created when alpha cped to bravo 关联其它仓库123 ~ $ cd alpha~/alpha $ git remote add bravo ../bravo123 回到alpha仓库，将bravo设置为alpha仓库的远程仓库。该操作将在alpha/.git/config添加两行内容： 123[remote &quot;bravo&quot;] url = ../bravo/123 这两行说明，存在一个远程仓库bravo，该仓库位于../bravo目录。 从远程仓库获取分支123456~/alpha $ cd ../bravo~/bravo $ printf &apos;12&apos; &gt; data/number.txt~/bravo $ git add data/number.txt~/bravo $ git commit -m &apos;12&apos; [master 94cd04d] 12123456 进入bravo仓库，将data/number.txt内容修改为12并提交到master。 12 commit on bravo repository 123456~/bravo $ cd ../alpha~/alpha $ git fetch bravo master Unpacking objects: 100% From ../bravo * branch master -&gt; FETCH_HEAD123456 进入alpha仓库，将bravo的master分支取回到alpha。该操作分四步。 第一步，Git获取bravo仓库中master指向提交的哈希值，也就是提交12的哈希值。 第二步，Git创建一个包含了12提交依赖的所有对象的列表，包括提交对象本身和祖先提交，以及它们的树图内的所有对象。它将alpha对象数据库中已经存在的对象从列表中移除。然后将列表的对象拷贝到alpha/.git/objects/。 第三步，Git将ref文件alpha/.git/refs/remotes/bravo/master的内容更新为提交12的哈希值。 第四步，alpha/.git/FETCH_HEAD的内容被设置为： 1294cd04d93ae88a1f53a4646532b1e8cdfbc0977f branch &apos;master&apos; of ../bravo12 这表示最近一次执行fetch命令获取的是bravo中master分支的提交12。 alpha after bravo/master fetched 图属性：对象可以被拷贝。这意味着提交历史可以被不同仓库共享。 图属性：仓库可以保存远程分支的ref，如alpha/.git/refs/remotes/bravo/master。这意味着仓库可以将远程仓库的分支状态记录到本地。在获取该分支时，它将会被修正，但如果远程分支修改了，它就会过期。 合并FETCH_HEAD1234~/alpha $ git merge FETCH_HEAD Updating d14c7d2..94cd04d Fast-forward1234 合并FETCH_HEAD。FETCH_HEAD只是另一个ref，它解析到源提交12。HEAD指向目的提交11。Git使用fast-forward合并将master指向12提交。 alpha after FETCH_HEAD merged 从远程仓库拉取分支123~/alpha $ git pull bravo master Already up-to-date.123 将bravo仓库的master分支拉取到alpha仓库。pull是”fetch and merge FETCH_HEAD“的简写。Git执行这条命令然后报告master分支Already up-to-date。 克隆仓库1234~/alpha $ cd .. ~ $ git clone alpha charlie Cloning into &apos;charlie&apos;1234 进入上层目录，克隆alpha到charlie。克隆到charlie和我们之前使用cp拷贝bravo仓库的结果是相同的。Git首先创建一个目录charlie，然后将charlie初始化为一个Git仓库，将alpha添加为一个远程仓库origin，获取origin并合并到FETCH_HEAD。 推送分支到远程仓库的已检出分支123456 ~ $ cd alpha~/alpha $ printf &apos;13&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;13&apos; [master 3238468] 13123456 返回alpha仓库，将data/number.txt修改为13，然后提交到alpha仓库的master分支。 12~/alpha $ git remote add charlie ../charlie12 将charlie设为alpha仓库的远程分支。 123456~/alpha $ git push charlie master Writing objects: 100% remote error: refusing to update checked out branch: refs/heads/master because it will make the index and work tree inconsistent123456 将master推送到charlie仓库。 13提交依赖的所有对象都被拷贝到charlie仓库。 此时，推送操作中止了。Git给出了出错信息，它拒绝将分支推送到远程已检出的分支上。这在情理之中，因为如果推送成功，远程分支的index和HEAD将会改变。如果此时有人正在编辑远程分支的工作区，他就懵b了。 此时，我们可以创建一个新的分支，将13提交合并进来，然后推到charlie。但是我们往往希望仓库可以随时提交。我们希望有一个中心仓库可以用来做同步，而又没有人可以直接在远程仓库仓库，就像Github一样。这时我们就需要一个裸仓库(bare repository)。 克隆裸仓库1234~/alpha $ cd .. ~ $ git clone alpha delta --bare Cloning into bare repository &apos;delta&apos;1234 返回上层目录，克隆出一个裸仓库delta。这跟普通的克隆只有两点不同：config文件会指明该仓库是一个裸仓库，之前在.git目录的文件现在直接放在仓库目录下： 123456delta├── HEAD├── config├── objects└── refs123456 alpha and delta graphs after alpha cloned to delta 推送分支到裸仓库123 ~ $ cd alpha~/alpha $ git remote add delta ../delta123 回到alpha仓库，将delta仓库设为alpha的远程仓库。 12345~/alpha $ printf &apos;14&apos; &gt; data/number.txt~/alpha $ git add data/number.txt~/alpha $ git commit -m &apos;14&apos; [master cb51da8] 1412345 将data/number.txt内容修改为14并提交到alpha的master分支。 14 commit on alpha 12345~/alpha $ git push delta master Writing objects: 100% To ../delta 3238468..cb51da8 master -&gt; master12345 将master推送到delta。此操作分三步。 第一步，master分支上14提交依赖的所有对象都被从alpha/.git/objects/拷贝到delta/objects。 第二步，delta/refs/heads/master更新为14提交。 第三步，alpha/.git/refs/remotes/delta/master更新为14提交。alpha记录了delta更新后的状态。 14 commit pushed from alpha to delta 总结Git构建在图上，几乎所有的Git命令都是在操作这个图。想要深入了解Git，关注图属性而不是执行流程或命令。 想要学习更多Git知识，可以研究一下.git目录。没什么可怕的。看看它里面有哪些东西。修改文件内容，观察发生了什么。手动创建一个提交，看看你能把仓库搞得多惨。然后试着修复它。 脚注 在这个例子中，哈希值内容比原文件更长。不管是否能节约空间，Git始终选择使用哈希值作为文件名。 也有可能两个不同的内容有相同的哈希值，但这个可能性很低。 git prune删除所有不能被ref访问到的对象。执行此命令可能会丢失数据。 git stash将工作区和HEAD提交的所有差异保存到一个安全的地方。它们可以在以后取回。 rebase命令可以用来添加、编辑或删除历史提交。","categories":[{"name":"git","slug":"git","permalink":"http://io.stelawliet.top/categories/git/"}],"tags":[]},{"title":"Spring Annotation EventListener Analysis","slug":"Java/spring/ioc/EventListener","date":"2018-08-14T12:28:02.000Z","updated":"2018-08-14T13:52:37.000Z","comments":true,"path":"2018/08/14/Java/spring/ioc/EventListener/","link":"","permalink":"http://io.stelawliet.top/2018/08/14/Java/spring/ioc/EventListener/","excerpt":"","text":"test listener implement ApplicationEventListener&lt;? extends ApplicationEvent&gt; 12345678@Componentpublic class AnListener implements ApplicationListener&lt;ApplicationEvent&gt; &#123; @Override //listener &lt;? extends ApplicationEvent&gt; public void onApplicationEvent(ApplicationEvent event) &#123; System.out.println(\"receive a \"+event); &#125;&#125; test publishEvent 12345678@Testpublic void testLi() &#123; AnnotationConfigApplicationContext context = getContext(); context.publishEvent( new ApplicationEvent(\"my application event\")&#123;&#125;); context.close();&#125; summary 3、ApplicationListener：监听容器中发布的事件。事件驱动模型开发； public interface ApplicationListener&lt;E extends ApplicationEvent&gt; 监听 ApplicationEvent 及其下面的子事件； 步骤： 实现监听器 1. ApplicationListener实现类来监听某个事件（ApplicationEvent及其子类） @EventListener; 原理：使用EventListenerMethodProcessor处理器来解析方法上的@EventListener； 把监听器加入到容器； 只要容器中有相关事件的发布，我们就能监听到这个事件； ContextRefreshedEvent：容器刷新完成（所有bean都完全创建）会发布这个事件；ContextClosedEvent：关闭容器会发布这个事件； 使用ioc容器发布事件： applicationContext.publishEvent()；","categories":[],"tags":[{"name":"event","slug":"event","permalink":"http://io.stelawliet.top/tags/event/"},{"name":"listener","slug":"listener","permalink":"http://io.stelawliet.top/tags/listener/"}]},{"title":"WrapperTomcat","slug":"Linux/server/Tomcat/TomcatUtils","date":"2018-08-14T06:47:52.000Z","updated":"2018-08-14T12:06:28.000Z","comments":true,"path":"2018/08/14/Linux/server/Tomcat/TomcatUtils/","link":"","permalink":"http://io.stelawliet.top/2018/08/14/Linux/server/Tomcat/TomcatUtils/","excerpt":"","text":"web.yaml servlet filter listener Boot Configuration User.dir BaseDoc WebApps app webapp Start addServlet filter listener await log","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"servlet","slug":"java/servlet","permalink":"http://io.stelawliet.top/categories/java/servlet/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"},{"name":"wrapperTomcat","slug":"wrapperTomcat","permalink":"http://io.stelawliet.top/tags/wrapperTomcat/"}]},{"title":"AOP @EnableAspectJAutoProxy@解析","slug":"Java/spring/ioc/Aop实现 @sgg","date":"2018-08-11T14:37:59.000Z","updated":"2018-08-25T07:10:56.000Z","comments":true,"path":"2018/08/11/Java/spring/ioc/Aop实现 @sgg/","link":"","permalink":"http://io.stelawliet.top/2018/08/11/Java/spring/ioc/Aop实现 @sgg/","excerpt":"","text":"AOP: 指在程序运行期间动态的将某段代码切入到指定方法指定位置进行运行的编程方式； 导入aop模块；Spring AOP：(spring-aspects) 定义一个业务逻辑类（MathCalculator）；在业务逻辑运行的时候将日志进行打印（方法之前、方法运行结束、方法出现异常，xxx） 定义一个日志切面类(LogAspects)：切面类里面的方法需要动态感知MathCalculator.div运行到哪里然后执行； 通知方法： 前置通知(@Before)：logStart：在目标方法(div)运行之前运行 后置通知(@After)：logEnd：在目标方法(div)运行结束之后运行（无论方法正常结束还是异常结束） 返回通知(@AfterReturning)：logReturn：在目标方法(div)正常返回之后运行 异常通知(@AfterThrowing)：logException：在目标方法(div)出现异常以后运行 环绕通知(@Around)：动态代理，手动推进目标方法运行（joinPoint.procced()） 给切面类的目标方法标注何时何地运行(通知注解)@PointCut 将切面类和业务逻辑类（目标方法所在类）都加入到容器中; 必须告诉Spring哪个类是切面类(给切面类上加一个注解：@Aspect) 给配置类中加 @EnableAspectJAutoProxy 【开启基于注解的aop模式】 在Spring中很多的 @EnableXXX; 三步： 将业务逻辑组件和切面类都加入到容器中；告诉Spring哪个是切面类（@Aspect） 在切面类上的每一个通知方法上标注通知注解，告诉Spring何时何地运行（切入点表达式） 开启基于注解的aop模式；@EnableAspectJAutoProxy AOP原理： 【看给容器中注册了什么组件，这个组件什么时候工作，这个组件的功能是什么？】 @EnableAspectJAutoProxy； @EnableAspectJAutoProxy是什么？ @Import(AspectJAutoProxyRegistrar.class)：给容器中导入AspectJAutoProxyRegistrar利用AspectJAutoProxyRegistrar自定义给容器中注册bean；BeanDefinetioninternalAutoProxyCreator=AnnotationAwareAspectJAutoProxyCreator 给容器中注册一个AnnotationAwareAspectJAutoProxyCreator； AnnotationAwareAspectJAutoProxyCreator： AnnotationAwareAspectJAutoProxyCreator -&gt;AspectJAwareAdvisorAutoProxyCreator -&gt;AbstractAdvisorAutoProxyCreator -&gt;AbstractAutoProxyCreator implements SmartInstantiationAwareBeanPostProcessor, BeanFactoryAware 关注后置处理器（在bean初始化完成前后做事情. 自动装配BeanFactory AbstractAutoProxyCreator.setBeanFactory()AbstractAutoProxyCreator.有后置处理器的实现逻辑； AbstractAdvisorAutoProxyCreator.setBeanFactory()-》initBeanFactory() AnnotationAwareAspectJAutoProxyCreator.initBeanFactory() 流程： 传入配置类，创建ioc容器 注Ò册配置类，调用refresh（）刷新容器； registerBeanPostProcessors(beanFactory);注册bean的后置处理器来方便拦截bean的创建； 先获取ioc容器已经定义了的需要创建对象的所有BeanPostProcessor 给容器中加别的BeanPostProcessor 优先注册实现了PriorityOrdered接口的BeanPostProcessor； 再给容器中注册实现了Ordered接口的BeanPostProcessor； 注册没实现优先级接口的BeanPostProcessor； 注册BeanPostProcessor，实际上就是创建BeanPostProcessor对象，保存在容器中；创建internalAutoProxyCreator的BeanPostProcessor【AnnotationAwareAspectJAutoProxyCreator】internalAutoProxyCreator=AnnotationAwareAspectJAutoProxyCreator 创建Bean的实例 populateBean；给bean的各种属性赋值 initializeBean：初始化bean； invokeAwareMethods()：处理Aware接口的方法回调 applyBeanPostProcessorsBeforeInitialization()：应用后置处理器的postProcessBeforeInitialization（） invokeInitMethods()；执行自定义的初始化方法 applyBeanPostProcessorsAfterInitialization()；执行后置处理器的postProcessAfterInitialization（）； BeanPostProcessor(AnnotationAwareAspectJAutoProxyCreator)创建成功；–》aspectJAdvisorsBuilder 把BeanPostProcessor注册到BeanFactory中；beanFactory.addBeanPostProcessor(postProcessor);=======以上是创建和注册AnnotationAwareAspectJAutoProxyCreator的过程======== AnnotationAwareAspectJAutoProxyCreator =&gt; InstantiationAwareBeanPostProcessor finishBeanFactoryInitialization(beanFactory);完成BeanFactory初始化工作；创建剩下的单实例bean 遍历获取容器中所有的Bean，依次创建对象getBean(beanName);getBean-&gt;doGetBean()-&gt;getSingleton()-&gt; 创建bean【AnnotationAwareAspectJAutoProxyCreator在所有bean创建之前会有一个拦截，InstantiationAwareBeanPostProcessor，会调用postProcessBeforeInstantiation()】 先从缓存中获取当前bean，如果能获取到，说明bean是之前被创建过的，直接使用，否则再创建；只要创建好的Bean都会被缓存起来 createBean（）;创建bean；AnnotationAwareAspectJAutoProxyCreator 会在任何bean创建之前先尝试返回bean的实例【BeanPostProcessor是在Bean对象创建完成初始化前后调用的】【InstantiationAwareBeanPostProcessor是在创建Bean实例之前先尝试用后置处理器返回对象的】 resolveBeforeInstantiation(beanName, mbdToUse);解析BeforeInstantiation希望后置处理器在此能返回一个代理对象；如果能返回代理对象就使用，如果不能就继续 后置处理器先尝试返回对象；bean = applyBeanPostProcessorsBeforeInstantiation（）： 拿到所有后置处理器，如果是InstantiationAwareBeanPostProcessor; 就执行postProcessBeforeInstantiation if (bean != null) { bean = applyBeanPostProcessorsAfterInitialization(bean, beanName); } 2. doCreateBean(beanName, mbdToUse, args);真正的去创建一个bean实例；和3.6流程一样； 3. AnnotationAwareAspectJAutoProxyCreator【InstantiationAwareBeanPostProcessor】 的作用： 每一个bean创建之前，调用postProcessBeforeInstantiation()； 关心MathCalculator和LogAspect的创建 1. 判断当前bean是否在advisedBeans中（保存了所有需要增强bean） 2. 判断当前bean是否是基础类型的Advice、Pointcut、Advisor、AopInfrastructureBean， 或者是否是切面（@Aspect） 3. 是否需要跳过 1. 获取候选的增强器（切面里面的通知方法）【List&lt;Advisor&gt; candidateAdvisors】? 每一个封装的通知方法的增强器是 InstantiationModelAwarePointcutAdvisor； 判断每一个增强器是否是 AspectJPointcutAdvisor 类型的；返回true 2. 永远返回false 创建对象postProcessAfterInitialization； return wrapIfNecessary(bean, beanName, cacheKey);//包装如果需要的情况下 1. 获取当前bean的所有增强器（通知方法） Object[] specificInterceptors 1、找到候选的所有的增强器（找哪些通知方法是需要切入当前bean方法的） 2、获取到能在bean使用的增强器。 3、给增强器排序 2. 保存当前bean在advisedBeans中； 3. 如果当前bean需要增强，创建当前bean的代理对象； 1. 获取所有增强器（通知方法） 2. 保存到proxyFactory 3. 创建代理对象：Spring自动决定 JdkDynamicAopProxy(config);jdk动态代理； ObjenesisCglibAopProxy(config);cglib的动态代理； 4. 给容器中返回当前组件使用cglib增强了的代理对象； 5. 以后容器中获取到的就是这个组件的代理对象，执行目标方法的时候，代理对象就会执行通知方法的流程； 3. 目标方法执行 ； 容器中保存了组件的代理对象（cglib增强后的对象），这个对象里面保存了详细信息（比如增强器，目标对象，xxx）； 1. CglibAopProxy.intercept();拦截目标方法的执行 2. 根据ProxyFactory对象获取将要执行的目标方法拦截器链； List&lt;Object&gt; chain = this.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass); 1. List&lt;Object&gt; interceptorList保存所有拦截器 5 一个默认的ExposeInvocationInterceptor 和 4个增强器； 2. 遍历所有的增强器，将其转为Interceptor； registry.getInterceptors(advisor); 3. 将增强器转为List&lt;MethodInterceptor&gt;； 如果是MethodInterceptor，直接加入到集合中 如果不是，使用AdvisorAdapter将增强器转为MethodInterceptor； 转换完成返回MethodInterceptor数组； 3. 如果没有拦截器链，直接执行目标方法; 拦截器链（每一个通知方法又被包装为方法拦截器，利用MethodInterceptor机制） 4. 如果有拦截器链，把需要执行的目标对象，目标方法， 拦截器链等信息传入创建一个 CglibMethodInvocation 对象， 并调用 Object retVal = mi.proceed(); 5. 拦截器链的触发过程; 1)、如果没有拦截器执行执行目标方法，或者拦截器的索引和拦截器数组-1大小一样（指定到了最后一个拦截器）执行目标方法； 2)、链式获取每一个拦截器，拦截器执行invoke方法，每一个拦截器等待下一个拦截器执行完成返回以后再来执行； 拦截器链的机制，保证通知方法与目标方法的执行顺序； 总结： @EnableAspectJAutoProxy 开启AOP功能 @EnableAspectJAutoProxy会给容器中注册一个组件 AnnotationAwareAspectJAutoProxyCreator AnnotationAwareAspectJAutoProxyCreator是一个后置处理器； 12&gt; public abstract class AbstractAutoProxyCreator extends ProxyProcessorSupport implements SmartInstantiationAwareBeanPostProcessor, BeanFactoryAware&gt; 容器的创建流程： registerBeanPostProcessors（）注册后置处理器；创建AnnotationAwareAspectJAutoProxyCreator对象 finishBeanFactoryInitialization（）初始化剩下的单实例bean 创建业务逻辑组件和切面组件 AnnotationAwareAspectJAutoProxyCreator拦截组件的创建过程 组件创建完之后，判断组件是否需要增强是：切面的通知方法，包装成增强器（Advisor）;给业务逻辑组件创建一个代理对象（cglib）； 执行目标方法： 代理对象执行目标方法 CglibAopProxy.intercept()； 得到目标方法的拦截器链（增强器包装成拦截器MethodInterceptor） 利用拦截器的链式机制，依次进入每一个拦截器进行执行； 效果：正常执行：前置通知-》目标方法-》后置通知-》返回通知出现异常：前置通知-》目标方法-》后置通知-》异常通知","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"annotation","slug":"java/framework/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/"}],"tags":[{"name":"aop","slug":"aop","permalink":"http://io.stelawliet.top/tags/aop/"},{"name":"enableAspectJAutoProxy","slug":"enableAspectJAutoProxy","permalink":"http://io.stelawliet.top/tags/enableAspectJAutoProxy/"},{"name":"aspect","slug":"aspect","permalink":"http://io.stelawliet.top/tags/aspect/"}]},{"title":"Spring Annotation Transaction Analysis","slug":"Java/spring/ioc/Transaction","date":"2018-08-11T14:32:58.000Z","updated":"2018-08-15T05:38:08.000Z","comments":true,"path":"2018/08/11/Java/spring/ioc/Transaction/","link":"","permalink":"http://io.stelawliet.top/2018/08/11/Java/spring/ioc/Transaction/","excerpt":"","text":"Aop transaction Configuration @EnableTransactionManagement 开启注解事务 @Bean DataSource 给容器注入数据 @Bean DataSourceTransactionManager 注入事务管理器 12 Service @Service @Transactional 12 Analysis@EnableTransactionManagement","categories":[],"tags":[{"name":"aop","slug":"aop","permalink":"http://io.stelawliet.top/tags/aop/"},{"name":"transaction","slug":"transaction","permalink":"http://io.stelawliet.top/tags/transaction/"}]},{"title":"Spring IOC Refresh Analysis","slug":"Java/spring/ioc/IOC Refresh Analysis","date":"2018-08-10T14:14:21.000Z","updated":"2018-09-11T01:45:12.000Z","comments":true,"path":"2018/08/10/Java/spring/ioc/IOC Refresh Analysis/","link":"","permalink":"http://io.stelawliet.top/2018/08/10/Java/spring/ioc/IOC Refresh Analysis/","excerpt":"","text":"[TOC] refresh()基于(org.springframework.context 4.3.12.RELEASE) org.springframework.context.annotation.AnnotationConfigApplicationContext 继承关系: Shot prepareRefresh obtainFreshBeanFactory prepareBeanFactory(beanFactory); postProcessBeanFactory(beanFactory); invokeBeanFactoryPostProcessors(beanFactory); registerBeanPostProcessors(beanFactory); initMessageSource(); initApplicationEventMulticaster(); onRefresh(); registerListeners(); finishBeanFactoryInitialization(beanFactory); finishRefresh(); @author Rod Johnsonclass org.springframework.context.support.AbstractApplicationContext{} 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566public void refresh() throws BeansException, IllegalStateException &#123; synchronized (this.startupShutdownMonitor) &#123; // Prepare this context for refreshing. prepareRefresh(); //返回GenericApplicationContext无参构造创建的beanFactory //return a new DefaultListableBeanFactory(); // Tell the subclass to refresh the internal bean factory. ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); // // Prepare the bean factory for use in this context. prepareBeanFactory(beanFactory); try &#123; // Allows post-processing of the bean factory in context subclasses. postProcessBeanFactory(beanFactory); // Invoke factory processors registered as beans in the context. invokeBeanFactoryPostProcessors(beanFactory); // Register bean processors that intercept bean creation. registerBeanPostProcessors(beanFactory); // Initialize message source for this context. initMessageSource(); // Initialize event multicaster for this context. initApplicationEventMulticaster(); // Initialize other special beans in specific context subclasses. onRefresh(); // Check for listener beans and register them. registerListeners(); // Instantiate all remaining (non-lazy-init) singletons. finishBeanFactoryInitialization(beanFactory); // Last step: publish corresponding event. finishRefresh(); &#125; catch (BeansException ex) &#123; if (logger.isWarnEnabled()) &#123; logger.warn(\"Exception encountered during context initialization - \" + \"cancelling refresh attempt: \" + ex); &#125; // Destroy already created singletons to avoid dangling resources. destroyBeans(); // Reset 'active' flag. cancelRefresh(ex); // Propagate exception to caller. throw ex; &#125; finally &#123; // Reset common introspection caches in Spring's core, since we // might not ever need metadata for singleton beans anymore... resetCommonCaches(); &#125; &#125; &#125; prepareRefresh() class AbstractApplicationContext主要4个工作 设置刷新前的状态 初始化环境资源initPropertySources(); 校验前面初始化的属性 创建一个&lt;ApplicationEvent&gt;事件集合this.earlyApplicationEvents用于搜集multicaster事件派发器还没有初始化好前的事件12345678910111213141516171819202122232425262728/** * Prepare this context for refreshing, setting its startup date and * active flag as well as performing any initialization of property sources. */ protected void prepareRefresh() &#123; //设置刷新前的状态 this.startupDate = System.currentTimeMillis(); this.closed.set(false); this.active.set(true); if (logger.isInfoEnabled()) &#123; logger.info(\"Refreshing \" + this); &#125; //初始化环境资源 // Initialize any placeholder property sources in the context environment initPropertySources(); //校验前面初始化的属性 // Validate that all properties marked as required are resolvable // see ConfigurablePropertyResolver#setRequiredProperties getEnvironment().validateRequiredProperties(); //收集早期的事件到set中.等事件派发器完成后依次发布 // Allow for the collection of early ApplicationEvents, // to be published once the multicaster is available... this.earlyApplicationEvents = new LinkedHashSet&lt;ApplicationEvent&gt;(); &#125; obtainFreshBeanFactory();ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();主要就是返回由GenericApplicationContext的无参构造创建的new DefaultListableBeanFactory(); 调用子类的refreshBeanFactory.刷新内置工厂 getBeanFactory() 123456789101112131415//class /** * Tell the subclass to refresh the internal bean factory. * @return the fresh BeanFactory instance * @see #refreshBeanFactory() * @see #getBeanFactory() */ protected ConfigurableListableBeanFactory obtainFreshBeanFactory() &#123; refreshBeanFactory(); ConfigurableListableBeanFactory beanFactory = getBeanFactory(); if (logger.isDebugEnabled()) &#123; logger.debug(\"Bean factory for \" + getDisplayName() + \": \" + beanFactory); &#125; return beanFactory; &#125; 1. refreshBeanFactory();刷新(创建)beanFactory org.springframework.context.support.GenericApplicationContext 1234567891011121314/** * Do nothing: We hold a single internal BeanFactory and rely on callers * to register beans through our public methods (or the BeanFactory's). * @see #registerBeanDefinition */@Overrideprotected final void refreshBeanFactory() throws IllegalStateException &#123; if (!this.refreshed.compareAndSet(false, true)) &#123; throw new IllegalStateException( \"GenericApplicationContext does not support multiple refresh attempts: just call 'refresh' once\"); &#125; //设置序列化的id this.beanFactory.setSerializationId(getId());&#125; getBeanFactory() 调用GenericApplicationContext 的无参构造创建DefaultListableBeanFactory 12345678/** * Create a new GenericApplicationContext. * @see #registerBeanDefinition * @see #refresh */ public GenericApplicationContext() &#123; this.beanFactory = new DefaultListableBeanFactory(); &#125; prepareBeanFactory(beanFactory);准备 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * Configure the factory's standard context characteristics, * such as the context's ClassLoader and post-processors. * @param beanFactory the BeanFactory to configure */ protected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) &#123; // Tell the internal bean factory to use the context's class loader etc. //设置类加载器 beanFactory.setBeanClassLoader(getClassLoader()); //??好像是El表达式的解析器(后面再填) beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader())); //注册属性编辑器.即依赖注入时属性的转换 beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment())); // Configure the bean factory with context callbacks. //给工厂装配ApplicationContext的引用 beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this)); //ApplicationContext中已经包含以下的引用所以忽略重复的装配 //e.g. ApplicationContext中可以get到Environment.所以不需要单独在装配 beanFactory.ignoreDependencyInterface(EnvironmentAware.class); beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class); beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class); beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class); beanFactory.ignoreDependencyInterface(MessageSourceAware.class); beanFactory.ignoreDependencyInterface(ApplicationContextAware.class); // BeanFactory interface not registered as resolvable type in a plain factory. // MessageSource registered (and found for autowiring) as a bean. // beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory); beanFactory.registerResolvableDependency(ResourceLoader.class, this); beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this); beanFactory.registerResolvableDependency(ApplicationContext.class, this); // Register early post-processor for detecting inner beans as ApplicationListeners. //注册一个早期的后置处理器来监听内置bean beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this)); //编译时织入 // Detect a LoadTimeWeaver and prepare for weaving, if found. if (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123; beanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory)); // Set a temporary ClassLoader for type matching. beanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader())); &#125; // Register default environment beans. // 注册环境配置和系统配置封装到environment和system environment中 if (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123; beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment()); &#125; if (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123; beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties()); &#125; if (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123; beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment()); &#125; &#125; postProcessBeanFactory(beanFactory);执行容器自身的BeanFactoryPostProcessor方法.在本文分析的AnnotationConfigApplicationContext 容器中没有具体的实现. invokeBeanFactoryPostProcessors(beanFactory);在容器中找出所有实现BeanFactoryPostProcessor接口的bean执行. ??这些beanFactoryPostprocessor哪里来的.什么时候初始化的 BeanFactoryPostProcessor有子接口BeanDefinitionRegistryPostProcessor ConfigurationClassPostProcessor这个processor是优先级最高的被执行的processor 先执行BeanDefinitionRegistryPostProcessor的 postProcessBeanDefinitionRegistry(registry) 后执行BeanFactoryPostProcessor postProcessor.postProcessBeanFactory() 依据实现的优先级接口从PriorityOrder-&gt;Order-&gt;NoOrder依次执行 registerBeanPostProcessors(beanFactory);注册BeanPostProcessor到BeanFactory中 initMessageSource();initApplicationEventMulticaster();onRefresh();registerListeners();finishBeanFactoryInitialization(beanFactory);finishRefresh();","categories":[],"tags":[{"name":"ioc","slug":"ioc","permalink":"http://io.stelawliet.top/tags/ioc/"},{"name":"abstractApplicationContext","slug":"abstractApplicationContext","permalink":"http://io.stelawliet.top/tags/abstractApplicationContext/"},{"name":"refresh","slug":"refresh","permalink":"http://io.stelawliet.top/tags/refresh/"}]},{"title":"AOP @EnableAspectJAutoProxy解析","slug":"Java/spring/ioc/Aop实现分析","date":"2018-08-10T12:48:17.000Z","updated":"2018-08-25T06:57:57.000Z","comments":true,"path":"2018/08/10/Java/spring/ioc/Aop实现分析/","link":"","permalink":"http://io.stelawliet.top/2018/08/10/Java/spring/ioc/Aop实现分析/","excerpt":"","text":"@EnableAspectJAutoProxyorg.springframework.aop.config.internalAutoProxyCreator-&gt;SmartInstantiationAwareBeanPostProcessor-&gt;BeanPostProcessor @author Rod Johnson debug 1234AbstractAutoProxyCreatorpublic void setBeanFactory(BeanFactory beanFactory)public Object postProcessBeforeInstantiation(Class&lt;?&gt; beanClass, String beanName) public Object postProcessAfterInitialization(@Nullable Object bean, String beanName) doCreateBean(beanName,mdbToUse,args); isInfrastructureClass 判断是否是基础类/? 实现aop的相关类 Pointcut(),Advisor 12345678910111213141516171819202122/** * Return whether the given bean class represents an infrastructure class * that should never be proxied. * &lt;p&gt;The default implementation considers Advices, Advisors and * AopInfrastructureBeans as infrastructure classes. * @param beanClass the class of the bean * @return whether the bean represents an infrastructure class * @see org.aopalliance.aop.Advice * @see org.springframework.aop.Advisor * @see org.springframework.aop.framework.AopInfrastructureBean * @see #shouldSkip */ protected boolean isInfrastructureClass(Class&lt;?&gt; beanClass) &#123; boolean retVal = Advice.class.isAssignableFrom(beanClass) || Pointcut.class.isAssignableFrom(beanClass) || Advisor.class.isAssignableFrom(beanClass) || AopInfrastructureBean.class.isAssignableFrom(beanClass); if (retVal &amp;&amp; logger.isTraceEnabled()) &#123; logger.trace(\"Did not attempt to auto-proxy infrastructure class [\" + beanClass.getName() + \"]\"); &#125; return retVal; &#125; AopUtils 根据指定的切面表达式判断匹配的增强器 eligibleAdvisors AnnotationAwareAspectAutoProxyCreator.wrapIfNecessary 创建AOP代理对象 DefaultAopProxyFactory public AopProxy createAopProxy(AdvisedSupport config) 1234567891011121314151617public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException &#123; if (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) &#123; Class&lt;?&gt; targetClass = config.getTargetClass(); if (targetClass == null) &#123; throw new AopConfigException(\"TargetSource cannot determine target class: \" + \"Either an interface or a target is required for proxy creation.\"); &#125; if (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) &#123; return new JdkDynamicAopProxy(config); &#125; return new ObjenesisCglibAopProxy(config); &#125; else &#123; return new JdkDynamicAopProxy(config); &#125; &#125; 拦截器链的调用 12345ReflectiveMethodInvocation.proceed();if&#123; invokeJoinpoint();&#125;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"annotation","slug":"java/framework/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/"}],"tags":[{"name":"aop","slug":"aop","permalink":"http://io.stelawliet.top/tags/aop/"},{"name":"enableAspectJAutoProxy","slug":"enableAspectJAutoProxy","permalink":"http://io.stelawliet.top/tags/enableAspectJAutoProxy/"},{"name":"aspect","slug":"aspect","permalink":"http://io.stelawliet.top/tags/aspect/"}]},{"title":"scp","slug":"Linux/command/SCP","date":"2018-08-10T01:19:47.000Z","updated":"2018-08-10T09:56:38.000Z","comments":true,"path":"2018/08/10/Linux/command/SCP/","link":"","permalink":"http://io.stelawliet.top/2018/08/10/Linux/command/SCP/","excerpt":"","text":"SCP 123scp [-1246BCpqrv] [-c cipher] [-F ssh_config] [-i identity_file][-l limit] [-o ssh_option] [-P port] [-S program][[user@]host1:]file1 [...] [[user@]host2:]file2 简易写法: 1scp [可选参数] file_source file_target 参数说明： -1： 强制scp命令使用协议ssh1 -2： 强制scp命令使用协议ssh2 -4： 强制scp命令只使用IPv4寻址 -6： 强制scp命令只使用IPv6寻址 -B： 使用批处理模式（传输过程中不询问传输口令或短语） -C： 允许压缩。（将-C标志传递给ssh，从而打开压缩功能） -p：保留原文件的修改时间，访问时间和访问权限。 -q： 不显示传输进度条。 -r： 递归复制整个目录。 -v：详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。 -c cipher： 以cipher将数据传输进行加密，这个选项将直接传递给ssh。 -F ssh_config： 指定一个替代的ssh配置文件，此参数直接传递给ssh。 -i identity_file： 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。 -l limit： 限定用户所能使用的带宽，以Kbit/s为单位。 -o ssh_option： 如果习惯于使用ssh_config(5)中的参数传递方式， -P port：注意是大写的P, port是指定数据传输用到的端口号 -S program： 指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"command","slug":"linux/command","permalink":"http://io.stelawliet.top/categories/linux/command/"}],"tags":[{"name":"scp","slug":"scp","permalink":"http://io.stelawliet.top/tags/scp/"}]},{"title":"Autowired","slug":"Java/spring/ioc/AutoWired","date":"2018-08-09T13:00:17.000Z","updated":"2018-08-25T07:54:51.000Z","comments":true,"path":"2018/08/09/Java/spring/ioc/AutoWired/","link":"","permalink":"http://io.stelawliet.top/2018/08/09/Java/spring/ioc/AutoWired/","excerpt":"","text":"自动装配; Spring利用依赖注入（DI），完成对IOC容器中中各个组件的依赖关系赋值； @Autowired：自动注入: 默认优先按照类型去容器中找对应的组件:applicationContext.getBean(BookDao.class);找到就赋值 如果找到多个相同类型的组件，再将属性的名称作为组件的id去容器中查找 `applicationContext.getBean(&quot;bookDao&quot;)` @Qualifier(“bookDao”)：使用@Qualifier指定需要装配的组件的id，而不是使用属性名 自动装配默认一定要将属性赋值好，没有就会报错； 可以使用@Autowired(required=false); @Primary：让Spring进行自动装配的时候，默认使用首选的bean； 也可以继续使用@Qualifier指定需要装配的bean的名字 123456BookService&#123; @Autowired BookDao bookDao;&#125; Spring还支持使用@Resource(JSR250)和@Inject(JSR330)[java规范的注解] @Resource:可以和@Autowired一样实现自动装配功能；默认是按照组件名称进行装配的；没有能支持@Primary功能没有支持@Autowired（reqiured=false）;@Inject:需要导入javax.inject的包，和Autowired的功能一样。没有required=false的功能； @Autowired:Spring定义的； @Resource、@Inject都是java规范 AutowiredAnnotationBeanPostProcessor:解析完成自动装配功能； @Autowired:构造器，参数，方法，属性；都是从容器中获取参数组件的值 ==[标注在方法位置]：@Bean+方法参数；参数从容器中获取;默认不写@Autowired效果是一样的；都能自动装配== ==[标在构造器上]：如果组件只有一个有参构造器，这个有参构造器的@Autowired可以省略，参数位置的组件还是可以自动从容器中获取== 放在参数位置： 自定义组件想要使用Spring容器底层的一些组件（ApplicationContext，BeanFactory，xxx）； 自定义组件实现xxxAware；在创建对象的时候，会调用接口规定的方法注入相关组件；Aware把Spring底层一些组件注入到自定义的Bean中； xxxAware：功能使用xxxProcessor；ApplicationContextAware==》ApplicationContextAwareProcessor； 12345678910111213141516171819202122232425@Configuration@ComponentScan(&#123;\"com.atguigu.service\",\"com.atguigu.dao\", \"com.atguigu.controller\",\"com.atguigu.bean\"&#125;)public class MainConifgOfAutowired &#123; @Primary @Bean(\"bookDao2\") public BookDao bookDao()&#123; BookDao bookDao = new BookDao(); bookDao.setLable(\"2\"); return bookDao; &#125; /* @Bean标注的方法创建对象的时候，方法参数的值默认从容器中获取 @param car @return */ @Bean public Color color(Car car)&#123; Color color = new Color(); color.setCar(car); return color; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"annotation","slug":"java/framework/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/"}],"tags":[{"name":"autowired","slug":"autowired","permalink":"http://io.stelawliet.top/tags/autowired/"},{"name":"resource","slug":"resource","permalink":"http://io.stelawliet.top/tags/resource/"},{"name":"inject","slug":"inject","permalink":"http://io.stelawliet.top/tags/inject/"}]},{"title":"组件注册","slug":"Java/spring/ioc/ComponentRegister","date":"2018-08-09T13:00:17.000Z","updated":"2018-08-09T13:23:40.000Z","comments":true,"path":"2018/08/09/Java/spring/ioc/ComponentRegister/","link":"","permalink":"http://io.stelawliet.top/2018/08/09/Java/spring/ioc/ComponentRegister/","excerpt":"","text":"@Controller/@Service/@Repository/@Component包扫描+组件标注注解[自己写的类]详见@Configuration @Bean[导入的第三方包里面的组件]详见@Configuration 12345@Conditional(LinuxCondition.class)@Bean(\"linus\")public Person person02()&#123; return new Person(\"linus\", 48);&#125; @Import12@Import(&#123;Color.class,Red.class,MyImportSelector.class,MyImportBeanDefinitionRegistrar.class&#125;)//@Import导入组件，id默认是组件的全类名 [快速给容器中导入一个组件]详见@Configuration @Import(要导入到容器中的组件)；容器中就会自动注册这个组件，id默认是全类名 ImportSelector:返回需要导入的组件的全类名数组； ImportBeanDefinitionRegistrar:手动注册bean到容器中 FactoryBean实现FactoryBean&lt;T&gt;创建一个Spring定义的FactoryBean1234567891011121314151617181920public class ColorFactoryBean implements FactoryBean&lt;Color&gt; &#123; //返回一个Color对象，这个对象会添加到容器中 @Override public Color getObject() throws Exception &#123; System.out.println(\"ColorFactoryBean...getObject...\"); return new Color(); &#125; @Override public Class&lt;?&gt; getObjectType() &#123; return Color.class; &#125; //是单例？ //true：这个bean是单实例，在容器中保存一份 //false：多实例，每次获取都会创建一个新的bean； @Override public boolean isSingleton() &#123; // TODO Auto-generated method stub return false; &#125;&#125; 把FactoryBean注入到IOC中123456@Beanpublic ColorFactoryBean colorFactoryBean()&#123; return new ColorFactoryBean();&#125;//在ioc中取出的名字为\"colorFactoryBean\"的bean时//会调用ColorFactoryBean的getObject方法 使用Spring提供的 FactoryBean（工厂Bean）; 默认获取到的是工厂bean调用getObject创建的对象 要获取工厂Bean本身，我们需要给id前面加一个&amp; &amp;colorFactoryBean","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"annotation","slug":"java/framework/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/"}],"tags":[{"name":"component register","slug":"component-register","permalink":"http://io.stelawliet.top/tags/component-register/"},{"name":"factoryBean","slug":"factoryBean","permalink":"http://io.stelawliet.top/tags/factoryBean/"},{"name":"Import","slug":"Import","permalink":"http://io.stelawliet.top/tags/Import/"}]},{"title":"","slug":"algorithm/LinkedList/Untitled","date":"2018-08-09T12:20:01.000Z","updated":"2018-08-09T12:20:01.000Z","comments":true,"path":"2018/08/09/algorithm/LinkedList/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/08/09/algorithm/LinkedList/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Spring Aware","slug":"Java/spring/annotation/Aware","date":"2018-08-08T14:41:54.000Z","updated":"2018-08-11T03:29:28.000Z","comments":true,"path":"2018/08/08/Java/spring/annotation/Aware/","link":"","permalink":"http://io.stelawliet.top/2018/08/08/Java/spring/annotation/Aware/","excerpt":"","text":"Aware实现了Aware接口的bean在初始化时可以注入Spring容器内部基本组件 如IOC容器，内置embeddedValue解析器 ApplicationContextAware 注入IOC容器 BeanNameAware 注入当前bean的name EmbeddedValueResolverAware 注入对类似“${} ,#{}”的字符串解析 123456789101112131415161718192021222324@Componentpublic class Red implements ApplicationContextAware,BeanNameAware,EmbeddedValueResolverAware &#123;private ApplicationContext applicationContext;@Overridepublic void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; // TODO Auto-generated method stub System.out.println(\"传入的ioc：\"+applicationContext); this.applicationContext = applicationContext;&#125;@Overridepublic void setBeanName(String name) &#123; // TODO Auto-generated method stub System.out.println(\"当前bean的名字：\"+name);&#125;@Overridepublic void setEmbeddedValueResolver(StringValueResolver resolver) &#123; // TODO Auto-generated method stub String resolveStringValue = resolver.resolveStringValue(\"你好 $&#123;os.name&#125; 我是 #&#123;20*18&#125;\"); System.out.println(\"解析的字符串：\"+resolveStringValue);&#125; 12345678910111213141516private void invokeAwareMethods(final String beanName, final Object bean) &#123; if (bean instanceof Aware) &#123; if (bean instanceof BeanNameAware) &#123; ((BeanNameAware) bean).setBeanName(beanName); &#125; if (bean instanceof BeanClassLoaderAware) &#123; ClassLoader bcl = getBeanClassLoader(); if (bcl != null) &#123; ((BeanClassLoaderAware) bean).setBeanClassLoader(bcl); &#125; &#125; if (bean instanceof BeanFactoryAware) &#123; ((BeanFactoryAware) bean).setBeanFactory(AbstractAutowireCapableBeanFactory.this); &#125; &#125; &#125;","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"interface","slug":"spring/interface","permalink":"http://io.stelawliet.top/categories/spring/interface/"}],"tags":[{"name":"aware","slug":"aware","permalink":"http://io.stelawliet.top/tags/aware/"}]},{"title":"reverseLinkedList","slug":"algorithm/LinkedList/reverseLinkedList","date":"2018-08-08T01:59:22.000Z","updated":"2018-08-09T12:22:41.000Z","comments":true,"path":"2018/08/08/algorithm/LinkedList/reverseLinkedList/","link":"","permalink":"http://io.stelawliet.top/2018/08/08/algorithm/LinkedList/reverseLinkedList/","excerpt":"","text":"linked1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * @program: exam * @description: * @author: Zhaoziqi * @create: 2018-08-07 21:57 **/public class reverse &#123; static class Node&#123; int val; Node next; Node(int v)&#123; val = v; &#125; &#125; public static Node getLinked(int[] a)&#123; Node pre = new Node(-1); Node p = pre; for (int i : a) &#123; p.next = new Node(i); p = p.next; &#125; return pre.next; &#125;// 0 &lt;- 1-2 public static Node reverse0(Node head)&#123; Node pre = null; Node next = null; while (head!=null)&#123; next = head.next; head.next = pre; pre = head; head = next; &#125; return pre; &#125; public static Node reverse1(Node head)&#123; if (head==null||head.next==null)&#123; return head; &#125; Node node = reverse1(head.next); head.next.next = head; head.next=null; return node; &#125; public static void main(String[] args) &#123; Node linked = getLinked(new int[]&#123;0, 1, 2, 3, 4, 5&#125;); Node node = reverse1(linked); &#125;&#125;","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"linkedList","slug":"algorithm/linkedList","permalink":"http://io.stelawliet.top/categories/algorithm/linkedList/"}],"tags":[{"name":"reverse","slug":"reverse","permalink":"http://io.stelawliet.top/tags/reverse/"}]},{"title":"mergeLinkedList","slug":"algorithm/LinkedList/MergeLinkedList","date":"2018-08-07T03:42:48.000Z","updated":"2018-08-07T14:52:02.000Z","comments":true,"path":"2018/08/07/algorithm/LinkedList/MergeLinkedList/","link":"","permalink":"http://io.stelawliet.top/2018/08/07/algorithm/LinkedList/MergeLinkedList/","excerpt":"","text":"fori val 1reveal","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"linkedlist","slug":"algorithm/linkedlist","permalink":"http://io.stelawliet.top/categories/algorithm/linkedlist/"}],"tags":[{"name":"mergeLinkedList","slug":"mergeLinkedList","permalink":"http://io.stelawliet.top/tags/mergeLinkedList/"}]},{"title":"daily-practice-1","slug":"algorithm/nowcoder-daily/d1-reverseLinkedList","date":"2018-08-03T12:29:30.000Z","updated":"2018-08-10T09:56:45.000Z","comments":true,"path":"2018/08/03/algorithm/nowcoder-daily/d1-reverseLinkedList/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/algorithm/nowcoder-daily/d1-reverseLinkedList/","excerpt":"","text":"reverse linkedListby recursive 1234567891011121314public Node reverse(Node head)&#123; //a if(head==null||head.next==null)&#123; return head; &#125; //b Node node = reverse(head.next); //c head.next.next = head; //d head.next = null; //e return node;&#125; a. 判断输入是否为空. for 12345678910111213private static ListNode reverse(ListNode head) &#123; ListNode next = head.next; ListNode last = next.next; head.next=null; while (last!= null) &#123; next.next = head; head = next; next = last; last = last.next; &#125; next.next = head; return next;&#125; fori 123456789101112ListNode reverse(ListNode head)&#123; ListNode pre = null; ListNode next = null; null&lt;-1&lt;-2&lt;-3 while(head!=null)&#123; next = head.next; head.next = pre; pre = head; head = next; &#125; return head;&#125;","categories":[{"name":"daily","slug":"daily","permalink":"http://io.stelawliet.top/categories/daily/"},{"name":"nowcoder","slug":"daily/nowcoder","permalink":"http://io.stelawliet.top/categories/daily/nowcoder/"},{"name":"algorithm","slug":"daily/nowcoder/algorithm","permalink":"http://io.stelawliet.top/categories/daily/nowcoder/algorithm/"}],"tags":[{"name":"linkedList","slug":"linkedList","permalink":"http://io.stelawliet.top/tags/linkedList/"},{"name":"递归","slug":"递归","permalink":"http://io.stelawliet.top/tags/递归/"},{"name":"recursive","slug":"recursive","permalink":"http://io.stelawliet.top/tags/recursive/"}]},{"title":"question","slug":"question","date":"2018-08-03T09:29:27.000Z","updated":"2018-08-03T12:30:34.000Z","comments":true,"path":"2018/08/03/question/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/question/","excerpt":"","text":"tomcat 禁用jsp bean","categories":[{"name":"daily","slug":"daily","permalink":"http://io.stelawliet.top/categories/daily/"}],"tags":[{"name":"question","slug":"question","permalink":"http://io.stelawliet.top/tags/question/"}]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vds","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vds/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vds/","excerpt":"","text":"!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u=\"function\"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error(\"Cannot find module '\"+a+\"'\")}var d=r[a]={exports:{}};e[a][0].call(d.exports,function(t){var r=e[a][1][t];return i(r?r:t)},d,d.exports,t,e,r,n)}return r[a].exports}for(var o=\"function\"==typeof require&&require,a=0;a>>0)+(y++ +\"__\")},w.prototype={set:function(t,e){var r=t[this.name];return r&&r[0]===t?r[1]=e:b(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},\"delete\":function(t){var e=t[this.name];if(!e)return!1;var r=e[0]===t;return e[0]=e[1]=void 0,r},has:function(t){var e=t[this.name];return e?e[0]===t:!1}}}var S=new w,C=window.msSetImmediate;if(!C){var N=[],O=String(Math.random());window.addEventListener(\"message\",function(t){if(t.data===O){var e=N;N=[],e.forEach(function(t){t()})}}),C=function(t){N.push(t),window.postMessage(O,\"*\")}}var x=!1,I=[],E=0;u.prototype={observe:function(t,e){if(t=i(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var r=S.get(t);r||S.set(t,r=[]);for(var n,o=0;o0){var i=e[r-1],o=g(i,t);if(o)return void(e[r-1]=o)}else n(this.observer);e[r]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener(\"DOMAttrModified\",this,!0),e.characterData&&t.addEventListener(\"DOMCharacterDataModified\",this,!0),e.childList&&t.addEventListener(\"DOMNodeInserted\",this,!0),(e.childList||e.subtree)&&t.addEventListener(\"DOMNodeRemoved\",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener(\"DOMAttrModified\",this,!0),e.characterData&&t.removeEventListener(\"DOMCharacterDataModified\",this,!0),e.childList&&t.removeEventListener(\"DOMNodeInserted\",this,!0),(e.childList||e.subtree)&&t.removeEventListener(\"DOMNodeRemoved\",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=S.get(t);e||S.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=S.get(t),r=0;re;e++)if(e in this&&this[e]===t)return e;return-1};c=t(\"./utils\"),s=c.detectIE()||0/0,9>s?t(\"json2\"):(window.MutationObserver=t(\"mutation-observer\"),a=t(\"tree-mirror\")),u=t(\"./info\"),c=t(\"./utils\"),i=t(\"./messaging_observer\"),o=t(\"./server_imp_setting\"),d=c.detectIOS()||0/0,n=function(){function t(){this.setPSForActionMessage=h(this.setPSForActionMessage,this),this.pageChanged=h(this.pageChanged,this),this.getDocumentReferrer=h(this.getDocumentReferrer,this)}var e,r,n,s,f,p,g,v,m,w,b,y,S,C,N,O,x,I;return s=null,N=3,p=[],r={},f={},I={tspan:1,text:1,g:1,rect:1,path:1,defs:1,clipPath:1,desc:1,title:1},v={},x=null,g=null,O=null,n=!0,e=[\"TEXTAREA\",\"HTML\",\"BODY\"],S=[\"button\",\"submit\"],C=[\"A\",\"BUTTON\",\"INPUT\",\"IMG\"],w=[\"I\",\"SPAN\",\"EM\",\"svg\"],y=[\"A\",\"BUTTON\"],b=y,m=[\"radio\",\"checkbox\"],t.prototype.setPageGroup=function(t){return r.pg=t,this.pageLoaded&&+Date.now()-this.pageLoaded1e4?t.trackPageView(4):t.trackPageView()}}(this),10)):(this.pageLoaded=+Date.now(),void this.trackPageView(2)):void 0},t.prototype.registerDomObserver=function(){var t;if(window.vds.imp)return null!=s&&s.disconnect(),t={initialize:function(t){return function(e){var r,n,i,o,a;for(a={u:t.gruser.vid(),s:t.gruser.sid(),t:\"imp\",tm:+Date.now(),ptm:t.pageLoaded,d:window.location.host||window.vds.accountId,p:t.currentPath},t.currentQuery.length>0&&(a.q=t.currentQuery),t.setPSForActionMessage(a),n=[],i=0,o=e.length;o>i;i++)r=e[i],\"use\"!==r.tagName&&(n=n.concat(t.getLeafNodes(r,e.length)));return a.e=n,t.send([a])}}(this),applyChanged:function(t){return function(e,r,n,i){var o,a,s,u,d;if(r.length>0&&!document.body.className.match(/\\bvds-entrytext\\b/)){for(t.gruser.hasSid()||(t.pageLoaded=+Date.now(),t.trackPageView(2)),u={u:t.gruser.vid(),s:t.gruser.sid(),t:\"imp\",tm:+Date.now(),ptm:t.pageLoaded,d:window.location.host||window.vds.accountId,p:t.currentPath},t.currentQuery.length>0&&(u.q=t.currentQuery),t.setPSForActionMessage(u),o=[],a=0,s=r.length;s>a;a++)d=r[a],\"use\"!==d.tagName&&(o=o.concat(t.getLeafNodes(d,d.length)));if(u.e=o,o.length>0)return p.push(u),0>N?t.sendQueue():(t.queueTimeout&&clearTimeout(t.queueTimeout),t.queueTimeout=setTimeout(function(){return t.sendQueue()},3e3),t.checkingBlance())}}}(this)},s=new a.Client(document.body,t)},t.prototype.deregisterDomObserver=function(){return null!=s?s.disconnect():void 0},t.prototype.idle=function(){return this.lastSentTime=this.lastSentTime||+Date.now(),this.lastSentTime&&(+Date.now()-this.lastSentTime)/p.length>300},t.prototype.checkingBlance=function(){return this.idle()?N-=1:void 0},t.prototype.sendQueue=function(){return p.length>0&&+Date.now()-this.lastActionTime1&&(p.idx=t.idx),d.push(p));else if(0===t.childNodes.length&&-1===c.indexOf(C,t.tagName));else{for(m=t.childNodes,o=0,h=m.length;h>o;o++)n=m[o],n.leaf||(g=!1),\"use\"!==n.tagName&&(d=d.concat(this.getLeafNodes(n,t.childNodes.length)));if((-1!==c.indexOf(b,t.tagName)||g&&((null!=(w=t.attributes)?w.any:void 0)||t.text))&&(t.text||(i=t.dom,t.text=i?u.containerElemContent(i):c.parentOfLeafText(t)),p=this.nodeMessage(t,!1),d.push(p)),\"SPAN\"===t.tagName)for(y=t.childNodes,a=0,l=y.length;l>a;a++)if(n=y[a],\"svg\"===n.tagName)for(S=n.childNodes,s=0,f=S.length;f>s;s++)r=S[s],1===r.nodeType&&\"use\"===r.tagName&&c.hasAttr(r,\"xlink:href\")&&(t.text=r.getAttribute(\"xlink:href\"),p=this.nodeMessage(t,!1),d.push(p))}return d},t.prototype.nodeMessage=function(t,e){var r,n,i,o;return n={x:t.path},n.v=c.processText(t.text),\"A\"===t.tagName&&0===(null!=(i=t.text)?i.length:void 0)&&(n.v=void 0),(null!=(o=n.v)?o.length:void 0)>50&&(n.v=\"A\"===t.tagName?c.processText(t.text.slice(0,50)):void 0),(r=t.attributes)&&r.href&&0!==r.href.indexOf(\"javascript\")&&(n.h=c.normalizePath(r.href.slice(0,320)),delete t.attributes.href),t.idx&&(n.idx=t.idx),t.obj&&(n.obj=t.obj),n},t.prototype.registerEventListener=function(){var t,r,i,o,a,s,d,h,l,f;s={click:\"clck\",change:\"chng\",submit:\"sbmt\"},t=\"__mutation_summary_node_map_id__\",r=function(t,e,r){return t.addEventListener?t.addEventListener(e,r,!0):t.attachEvent?t.attachEvent(\"on\"+e,r):t[\"on\"+e]=r},l=function(t){return t.which>1||(O=+Date.now(),g===O)?void 0:(g=O,v={time:O,target:t.target||t.srcElement,x:d(\"x\",t),y:d(\"y\",t)},x=setTimeout(function(){return t={target:v.target,type:\"click\"},a(t)},600))},h=function(t){var e;return e={adx:Math.abs(d(\"x\",t)-v.x),ady:Math.abs(d(\"y\",t)-v.y)},e.adx>10||e.ady>10?clearTimeout(x):void 0},f=function(t){var e;return e=+Date.now()-v.time,1e3>e?clearTimeout(x):void 0},d=function(t,e){var r;return r=n?e.touches[0]:e,r[\"page\"+t.toUpperCase()]},i=function(){var t,e,i,o,a,s,u,d,c,p,g,v,m,w;w=navigator.userAgent,o=/chrome/i.exec(w),i=/android/i.exec(w),n=\"ontouchstart\"in window&&!(o&&!i),v=n?[\"touchstart\"]:[\"mousedown\"],m=n?[\"touchend\",\"touchcancel\"]:[\"mouseup\",\"mouseleave\"],p=n?[\"touchmove\"]:[\"mousemove\"];for(e=0,u=v.length;u>e;e++)t=v[e],r(document,t,l);for(a=0,d=p.length;d>a;a++)t=p[a],r(document,t,h);for(g=[],s=0,c=m.length;c>s;s++)t=m[s],g.push(r(document,t,f));return g},a=function(t){return function(r){var n,i,o,a,d;if(!document.body.className.match(/\\bvds-entrytext\\b/)){for(t.lastActionTime=+Date.now(),d=r.target||r.srcElement;d&&1===I[d.tagName]&&d.parentNode;)d=d.parentNode;if(n=u.path(d,!0),n.isIgnore)return;if(a=d.tagName,window.vds.impCtrlDua&&(window.grImpCtrl=Date.now()),\"click\"===r.type){if(-1!==c.indexOf(e,a))return;if(\"INPUT\"===a&&-1===c.indexOf(S,d.type))return;if(-1===c.indexOf(C,a)&&!u.depthInside(d,4))return}return t.gruser.hasSid()?\"click\"===r.type&&t.sendPVOnSidChanged():(t.pageLoaded=+Date.now(),t.trackPageView(2)),o={},o.u=t.gruser.vid(),o.s=t.gruser.sid(),o.t=s[r.type],o.tm=+Date.now(),o.ptm=t.pageLoaded,o.d=window.location.host||window.vds.accountId,o.p=t.currentPath,t.currentQuery.length>0&&(o.q=t.currentQuery),t.setPSForActionMessage(o),i=t.compute(r.type,d),i.x=n.xpath,n.obj&&(i.obj=n.obj),n.idx?i.idx=n.idx:(-1!==i.x.indexOf(\"/dl\")||-1!==i.x.indexOf(\"/tr\")||-1!==i.x.indexOf(\"/li\"))&&(i.idx=u.index(d)),o.e=0===n.containerMessage.length?[i]:-1!==c.indexOf(b,n.pnode.tagName)&&u.onlyContainsChildren(n.pnode,w)?n.containerMessage:[i].concat(n.containerMessage),t.send([o])}}}(this);for(o in s)r(document,o,a);return r(document,\"scroll\",function(t){return window.vds.impCtrlDua?window.grImpCtrl=Date.now():void 0}),window.vds.touch?i():void 0},t.prototype.sendPVOnSidChanged=function(){var t,e,r;return t=this.gruser.currentSessionId(),r=t[0],e=t[1],this.gruser.lastSessionId!==r?(r||(r=this.gruser.guid(),this.gruser.resetUserId()),e=!1,this.gruser.updateSessionId(r,e),this.trackPageView(4)):void 0},t.prototype.visitMessage=function(){var t,e,r;e={ai:window.vds.accountId,av:window.vds.version,b:\"Web\",u:this.gruser.vid(),s:this.gruser.sid(),t:\"vst\",tm:+Date.now(),sh:window.screen.height,sw:window.screen.width,d:window.location.host||window.vds.accountId,p:this.currentPath,rf:this.getDocumentReferrer(),l:null!=(r=navigator.language||navigator.browserLanguage)?r.toLowerCase():void 0},this.currentQuery.length>0&&(e.q=this.currentQuery);for(t in window.grcs)e[t]=window.grcs[t];return e},t.prototype.trackPageView=function(t){var e,n;return null==t&&(t=0),e=[],3!==t||null!=r.pg?4===t&&(this.pageLoaded=+Date.now(),this.gruser.isSendNewVisit())?void this.trackPageView(2):(3>t&&this.gruser.isSendNewVisit()&&e.push(this.visitMessage()),null==this.pageLoaded&&(this.pageLoaded=+Date.now()),2===t&&(r=f),n=this.pageMessage(),e.push(n),this.send(e,\"pv\"),this.lastActionTime=+Date.now()):void 0},t.prototype.pageMessage=function(){var t,e;e={u:this.gruser.vid(),s:this.gruser.sid(),tl:document.title.slice(0,255),t:\"page\",tm:this.pageLoaded,pt:window.location.protocol.substring(0,window.location.protocol.length-1),d:window.location.host||window.vds.accountId,p:this.currentPath,rf:this.getDocumentReferrer()},this.currentQuery.length>0&&(e.q=this.currentQuery);for(t in window.grcs)e[t]=window.grcs[t];if(r.pg)for(t in r)e[t]=r[t],f[t]=r[t];else f={};return r={},e},t.prototype.track=function(t,e,r){return null==e&&(e={}),this._track(t,\"cstm\",\"cstm\",e)},t.prototype.clickOn=function(t,e){return null==e&&(e={}),this._track(t,\"clck\",\"action\",e)},t.prototype.impOn=function(t,e){return null==e&&(e={}),this._track(t,\"imp\",\"action\",e)},t.prototype._track=function(t,e,r,n){var i,o,a,s,u,d,c,h,l,f,p,g,v;null==n&&(n={}),c=[],h={u:this.gruser.vid(),s:this.gruser.sid(),t:\"cstm\",tm:+Date.now(),ptm:this.pageLoaded,d:window.location.host||window.vds.accountId,p:this.currentPath,n:t},this.currentQuery&&this.currentQuery.trim().length>0&&(h.q=this.currentQuery),v={},i=[];for(p in n)Array.isArray(n[p])?i.push(p):v[p]=n[p];if(0===i.length)h.e=n,c.push(h);else if(1===i.length&&n[i[0]].length>0)for(g=n[i[0]],a=0,u=g.length;u>a;a++){if(o=g[a],\"object\"==typeof o){for(p in v)o[p]=v[p];l=Object.assign({},h),l.e=o}else f=Object.assign({},v),f[i[0]]=o,l=Object.assign({},h),l.e=f;c.push(l)}else{for(s=0,d=i.length;d>s;s++)o=i[s],v[o]=n[o].join(\"##\");h.e=v,c.push(h)}return this.send(c,r)},t.prototype.compute=function(t,e){var r,n,i,o,a,s,d,h,l,f,p,g,v,w,y,C,N,O,x,I;if(n={},x=e.tagName,\"IMG\"===x?(null!=(C=e.src)?C.length:void 0)>0&&-1===e.src.indexOf(\"data:image\")&&(n.h=e.src):c.hasAttr(e,\"href\")&&(i=e.getAttribute(\"href\"),i&&0!==i.indexOf(\"javascript\")&&(n.h=c.normalizePath(i.slice(0,320)))),c.hasAttr(e,\"data-growing-title\")&&e.getAttribute(\"data-growing-title\").length>0)n.v=e.getAttribute(\"data-growing-title\");else if(c.hasAttr(e,\"title\")&&e.getAttribute(\"title\").length>0)n.v=c.processText(e.getAttribute(\"title\"));else if(\"click\"===t)if(u.isLeaf(e))if(\"IMG\"===x)e.alt?n.v=e.alt:n.h&&(s=n.h.split(\"?\")[0],a=s.split(\"/\"),a.length>0&&(n.v=a[a.length-1]));else if(\"INPUT\"===x&&-1!==c.indexOf(S,e.type))n.v=c.processText(e.value);else if(\"svg\"===x)for(N=e.childNodes,o=0,w=N.length;w>o;o++)r=N[o],1===r.nodeType&&\"use\"===r.tagName&&c.hasAttr(r,\"xlink:href\")&&(n.v=r.getAttribute(\"xlink:href\"));else I=\"\",null!=e.textContent?I=e.textContent.replace(/[\\n \\t]+/g,\" \").trim():null!=e.innerText&&(I=e.innerText.replace(/[\\n \\t]+/g,\" \").trim()),I.length>0&&(I.lengtht;t++)g=v[t],n.push(g[\"for\"]===e.id);return n}()&&(h=g))),null!=h&&(f=u.containerElemContent(h),(null!=f?f.length:void 0)>0&&(n.obj=f+\" (\"+e.checked+\")\"))):\"password\"!==e.type&&(c.hasAttr(e,\"growing-track\")||c.hasAttr(e,\"data-growing-track\"))&&(n.v=c.processText(e.value)):\"SELECT\"===x&&(n.v=c.processText(e.value),1===e.selectedOptions.length&&null!=e.selectedOptions[0].label&&(n.obj=e.selectedOptions[0].label)));else if(\"submit\"===t)for(O=e.getElementsByTagName(\"input\"),p=0,y=O.length;y>p;p++)d=O[p],(\"search\"===d.type||\"text\"===d.type&&(\"q\"===d.id||-1!==d.id.indexOf(\"search\")||-1!==d.className.indexOf(\"search\")||\"q\"===d.name||-1!==d.name.indexOf(\"search\")))&&(n.x=u.path(d).xpath,n.v=c.processText(d.value.trim()));return n},t.prototype.registerCircleHandler=function(){var t;try{if(!this.messagingObserver)return this.messagingObserver=new i,this.messagingObserver.sendPageLoad(f)}catch(e){t=e}},t.prototype.registerHistoryHandler=function(){var t,e;return t=window.history.pushState,e=window.history.replaceState,null!=t&&(window.history.pushState=function(e){return function(){return e.prevUrl=window.location.toString(),t.apply(window.history,arguments),setTimeout(function(){return e.pageChanged()},0)}}(this)),null!=e&&(window.history.replaceState=function(t){return function(){return t.prevUrl=window.location.toString(),e.apply(window.history,arguments),setTimeout(function(){return t.pageChanged()},0)}}(this)),null!=t&&(this.prevUrl=document.referrer,c.bind(window,\"popstate\",this.pageChanged,!0)),window.vds.hashtag?c.bind(window,\"hashchange\",this.pageChanged,!0):void 0},t.prototype.getDocumentReferrer=function(){var t,e;return e=this.prevUrl?this.prevUrl:document.referrer,(null!=(t=window.vds)?t.pathCaseSensitive:void 0)?e:e.toLowerCase()},t.prototype.pageChanged=function(){var t,e,r;return t=c.path(),e=c.query(),this.currentPath!==t||this.currentQuery!==e?(window.vds.hashtag&&(this.prevUrl=window.location.protocol+\"//\"+window.location.host+this.currentPath,this.currentQuery&&this.currentQuery.trim().length>0&&(this.prevUrl+=\"?\"+this.currentQuery)),this.currentPath=t,this.currentQuery=e,this.pageLoaded=+Date.now(),this.trackPageView(1),null!=(r=this.messagingObserver)?r.sendPageLoad(f):void 0):void 0},t.prototype.domLoadedHandler=function(t){var e;if(!this.domLoadedHandler.done){if(this.domLoadedHandler.done=!0,this.registerEventListener(),null!=a&&window.vds.imp){o.initialize(),window.vds.impCtrlDua&&(window.grImpCtrl=Date.now());try{c.detectIE()&&null!=(null!=(e=window.angular)?e.version:void 0)?(window.angular.version.major>1||1===window.angular.version.major&&window.angular.version.minor>4||1===window.angular.version.major&&4===window.angular.version.minor&&window.angular.version.dot>0)&&setTimeout(function(t){return function(){return t.registerDomObserver()}}(this),1500):setTimeout(function(t){return function(){return t.registerDomObserver()}}(this),1500)}catch(r){t=r,setTimeout(function(t){return function(){return t.registerDomObserver()}}(this),1500)}}return this.sendRegisterCircleOption()}},t.prototype.blind=function(){var t;return t=!1,window.vds.sampling&&(window.vds.sampling_func.call(this)||(t=!0)),window.grBlind=t,t},t.prototype.bindEvent=function(){return c.bind(window,\"message\",function(t){return function(e){var r,n,i,o;try{if(r=e.data,i=r.mode||r.circleMode,\"update-global-env\"===i&&(window.grCircleEnv=r.add_on_grSource),window.self!==window.top&&r.ai!==window.vds.accountId)return;switch(i){case\"gr-register-SDK-circle\":return t.registerCircleHandler(),c.spreadToInnerIframes(r);case\"gr-register-SDK-option\":if(t.canPostRegisterMessage()&&\"grcw\"===window.grSource.name&&(o=window.grSource.id,l.call(r.tArr,o)i;i++)if(n=s[i],u=n.getAttribute(\"src\"),null!=u&&-1!==u.indexOf(\"/outer-circle-plugin.js\")){this.pluginLoaded=!0;break}return this.pluginLoaded?void 0:(a=t.add_on_grSource.add_on_origin,window.grCircleEnv=t.add_on_grSource,e=document.createElement(\"script\"),e.type=\"text/javascript\",e.charset=\"UTF-8\",e.src=a+\"/assets/javascripts/outer-circle-plugin.js\",document.head.appendChild(e),r=document.createElement(\"link\"),r.rel=\"stylesheet\",r.href=a+\"/assets/stylesheets/outer-circle-plugin.css\",document.head.appendChild(r))},t.prototype.sendRegisterCircleOption=function(){var t;if(this.canPostRegisterMessage())return t={circleMode:\"gr-register-SDK-option\",url:window.location.toString(),ai:window.vds.accountId,sna:window.grSource.name,sid:window.grSource.id,tna:\"\",fsna:\"sdk\",tArr:[window.grSource.id]},parent.postMessage(t,\"*\")},t.prototype.canPostRegisterMessage=function(){return parent&&\"function\"==typeof parent.postMessage&&window.self!==window.top&&window.self!==window.parent},t.prototype.observe=function(t,e){var r,n,i;if(this.bindEvent(),this.send=e,this.currentPath=c.path(),this.currentQuery=c.query(),this.gruser=t,this.blind())return void this.sendRegisterCircleOption();if(window.history.pushState&&this.registerHistoryHandler(),this.trackPageView(),document.addEventListener)\"interactive\"===document.readyState||\"complete\"===document.readyState?this.domLoadedHandler():c.bind(document,\"DOMContentLoaded\",function(t){return function(){return t.domLoadedHandler()}}(this));else if(document.attachEvent){c.bind(document,\"onreadystatechange\",function(t){return function(){return t.domLoadedHandler()}}(this)),i=!1;try{i=null===window.frameElement}catch(o){n=o}document.documentElement.doScroll&&i&&(r=function(t){return function(){try{document.documentElement.doScroll(\"left\")}catch(e){return n=e,void setTimeout(r,1)}return t.domLoadedHandler()}}(this))()}return c.bind(window,\"load\",function(t){return function(){return t.domLoadedHandler()}}(this)),c.bind(window,\"beforeunload\",function(t){return function(e){var r,n;if(t.queueTimeout&&t.sendQueue(),n=+Date.now(),window.grWaitTime)for(r=n+50;r>n;)n=+Date.now()}}(this)),d&&c.bind(window,\"pagehide\",function(t){return function(e){var r,n;if(t.queueTimeout&&t.sendQueue(),n=+Date.now(),window.grWaitTime)for(r=n+50;r>n;)n=+Date.now()}}(this)),c.bind(window,\"unload\",function(t){return function(t){var e;if(window.grWaitTime)for(;e=+Date.now()?e.value:null):null},t._setInLocalStorage=function(t,e,r){return window.localStorage.setItem(t,JSON.stringify({expiredAt:+Date.now()+r,value:e}))},t}(),window.GrLocalStore=n,e.exports=n},{cookie:13}],4:[function(t,e,r){var n;n=function(){var t;return t=(new Date).getTime(),\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var r,n;return r=(t+16*Math.random())%16|0,t=Math.floor(t/16),n=\"x\"===e?r:3&r|8,n.toString(16)})},e.exports=n},{}],5:[function(t,e,r){var n,i,o,a,s,u,d,c,h,l,f,p;u=t(\"./guid\"),a=t(\"cookie\"),p=t(\"./utils\"),o=/(^| )(clear|clearfix|active|hover|enabled|hidden|display|focus|disabled|ng-|growing-)[^\\. ]*/g,s=/\\.?([a-zA-Z0-9\\-]+\\.[a-zA-Z]{2,6})$/,l=[\"I\",\"SPAN\",\"EM\",\"svg\"],d=p.detectIE()||0/0,i=function(){function t(t){var e,r,n;this.node=t,this.name=t.tagName.toLowerCase(),p.hasAttr(t,\"id\")&&null===t.getAttribute(\"id\").match(/^[0-9]/)&&(this.id=t.getAttribute(\"id\")),this.isIgnore=p.hasAttr(t,\"growing-ignore\")||p.hasAttr(t,\"data-growing-ignore\"),p.hasAttr(t,\"href\")&&(e=t.getAttribute(\"href\"),e&&0!==e.indexOf(\"javascript\")&&(this.href=p.normalizePath(e.slice(0,320)))),p.hasAttr(t,\"data-growing-info\")&&(this.grObj=t.getAttribute(\"data-growing-info\")),p.hasAttr(t,\"data-growing-idx\")&&(this.grIdx=parseInt(t.getAttribute(\"data-growing-idx\"))),\"input\"===this.name&&p.hasAttr(t,\"name\")&&t.getAttribute(\"name\")?this.klass=[t.getAttribute(\"name\")]:(r=null!=(n=p.getKlassName(t,d))?n.replace(o,\"\").trim():void 0,(null!=r?r.length:void 0)>0&&(this.klass=r.split(/\\s+/).sort()))}return t.prototype.path=function(){var t,e,r,n,i;if(n=\"/\"+this.name,null!=this.id&&(n+=\"#\"+this.id),null!=this.klass)for(i=this.klass,t=0,r=i.length;r>t;t++)e=i[t],n+=\".\"+e;return n},t.prototype.hasObj=function(){return null!=this.grObj},t.prototype.hasIdx=function(){return null!=this.grIdx},t.prototype.isContainer=function(){return p.hasAttr(this.node,\"data-growing-container\")},t}(),n=function(){function t(){this.userId=null,this.sessionId=\"\",this.lastSessionId=\"\",this.cookieDomain(),this.guid=u}return t.prototype.duration10year=31536e4,t.prototype.duration30min=1800,t.prototype.duration15min=9e5,t.prototype.duration1min=6e4,t.prototype.cookieDomain=function(){var t,e;if(!this.grCookieDomains)try{t=window.location.hostname.split(\".\"),this.grCookieDomains=0=e?[window.location.hostname]:[\".\"+t.slice(-2).join(\".\"),\".\"+t.slice(-3).join(\".\")]}catch(r){this.grCookieDomains=[window.location.hostname]}return this.grCookieDomains},t.prototype.vid=function(){return this.userId?this.userId:(this.userId=a.getItem(\"gr_user_id\"),this.userId?a.setItem(\"gr_user_id\",this.userId,this.duration10year,\"/\",this.cookieDomain()):(this.userId=this.guid(),a.setItem(\"gr_user_id\",this.userId,this.duration10year,\"/\",this.cookieDomain())),this.userId)},t.prototype.hasSid=function(){var t,e,r,n;return e=+Date.now(),this.sessionId&&this.lastUpdated&&e-this.lastUpdatedn;n++)if(i=o[n],i.match(/^gr_session_id_.*_/)&&i.slice(i.lastIndexOf(\"_\")+1)!==e){a.removeItem(i,\"/\",this.cookieDomain());break}return a.setItem(\"gr_session_id_\"+r+\"_\"+e,t,this.duration30min,\"/\",this.cookieDomain())},t.prototype.bindCS1WithSession=function(t){return null==t&&(t=this.sessionId),window.grcs.cs1?a.setItem(\"gr_cs1_\"+t,window.grcs.cs1,this.duration30min,\"/\",this.cookieDomain()):void 0},t.prototype.handleCSChanged=function(t){return this.isNeedToUpdateSessionByCS(t)?(this.sessionId=this.guid(),this.updateSessionId(this.sessionId,!1,t)):void 0},t.prototype.isNeedToUpdateSessionByCS=function(t){var e,r,n,i;return r=this.currentSessionId(t),i=r[0],n=r[1],e=this._currentSessionBindedCS1(i),i&&i.trim().length>0&&window.grcs.cs1&&e&&e!==window.grcs.cs1},t.prototype.currentSessionId=function(t){var e,r,n;return null==t&&(t=window.vds.accountId),n=a.getItem(\"gr_session_id_\"+t||\"\"),r=\"true\"===a.getItem(\"gr_session_id_\"+t+\"_\"+n),n&&n.indexOf(\"_\")>=0&&(e=n.split(\"_\"),n=e[0],r=e[1],r=\"true\"===r,this.updateSessionId(n,r)),n&&\"null\"===n&&(n=\"\",r=!1),[n,r]},t.prototype._currentSessionBindedCS1=function(t){return a.getItem(\"gr_cs1_\"+t)},t.prototype.isSendNewVisit=function(){var t;return t=!1,this.hasSid()?this.getSidSendSuccess()||(t=!0):t=!0,t},t.prototype.getSidSendSuccess=function(t){var e,r,n;return null==t&&(t=window.vds.accountId),e=this.currentSessionId(t),n=e[0],r=e[1],r===!0},t.prototype.resetUserId=function(){return this.userId?a.setItem(\"gr_user_id\",this.userId,this.duration10year,\"/\",this.cookieDomain()):void 0},t}(),h=[\"TR\",\"LI\",\"DL\"],f=[\"A\",\"BUTTON\"],c={user:function(){return new n},path:function(t,e){var r,n,o,a,s,u,d,c,h,l,g,v,m,w,b,y,S,C,N;if(null==e&&(e=!1),a=\"\",g=!1,n={},h=!1,c=!1,S=void 0,s=0,y=[],o=[],t===document)return{isIgnore:!0};for(r=new i(t);\"body\"!==r.name&&\"html\"!==r.name&&(n={x:r.path(),h:r.href,v:this.containerElemContent(r.node)},y.push(n.x),m=r.path(),r.isIgnore&&(g=!0),!h&&r.hasObj()&&(h=!0,d=r.grObj),c||(r.hasIdx()?(c=!0,u=r.grIdx):(N=r.path(),(-1!==N.indexOf(\"/dl\")||-1!==N.indexOf(\"/tr\")||-1!==N.indexOf(\"/li\"))&&(c=!0,u=this.index(r.node)))),b=r.node.parentNode,e&&\"\"!==a&&(-1!==p.indexOf(f,r.node.tagName)||r.isContainer())&&(h?n.obj=d:p.hasAttr(r.node.parentNode,\"data-growing-info\")&&(n.obj=r.node.parentNode.getAttribute(\"data-growing-info\")),n.x=s,o.push(n)),a=m+a,s++,b&&b.tagName);)r=new i(b),1===s&&(S=r.node);for(y.reverse(),l=0,v=o.length;v>l;l++)w=o[l],w.x=y.slice(0,s-w.x).join(\"\"),c&&(w.idx=u),h&&(w.obj=d);return C={xpath:a,containerMessage:o,isIgnore:g},h&&(C.obj=d),c&&(C.idx=u),S&&(C.pnode=S),C},index:function(t){var e,r,n,i,o,a,s;for(o=t;o&&\"BODY\"!==o.tagName&&-1===p.indexOf(h,o.tagName);)o=o.parentNode;if(o)for(a=o.parentNode,r=1,s=a.childNodes,e=0,n=s.length;n>e;e++)if(i=s[e],i.tagName===o.tagName){if(p.hasAttr(i,\"data-growing-idx\")&&(r=parseInt(i.getAttribute(\"data-growing-idx\"))), i===o)return r;r+=1}},isLeaf:function(t){var e,r,n,i;if(t.hasChildNodes()&&\"svg\"!==t.tagName)for(i=t.childNodes,r=0,n=i.length;n>r;r++)if(e=i[r],1===e.nodeType)return!1;return!0},isParentOfLeaf:function(t){var e,r,n,i;if(!t.childNodes)return!1;if(\"svg\"===t.tagName)return!1;for(i=t.childNodes,r=0,n=i.length;n>r;r++)if(e=i[r],!c.isLeaf(e))return!1;return!0},depthInside:function(t,e,r){var n,i,o,a;if(null==r&&(r=1),t.hasChildNodes()){if(r>e)return!1;for(a=t.childNodes,n=0,i=a.length;i>n;n++)if(o=a[n],1===o.nodeType&&!c.depthInside(o,e,r+1))return!1}return e>=r},onlyContainsChildren:function(t,e){var r,n,i,o;if(0===!t.children.length)return!1;for(o=t.children,n=0,i=o.length;i>n;n++)if(r=o[n],-1===p.indexOf(e,r.tagName))return!1;return!0},containerElemContent:function(t){var e;if(p.hasAttr(t,\"data-growing-title\")&&t.getAttribute(\"data-growing-title\").length>0)return t.getAttribute(\"data-growing-title\");if(p.hasAttr(t,\"title\")&&t.title.length>0)return p.processText(t.getAttribute(\"title\"));if(\"BUTTON\"===t.tagName){if(t.name.length>0)return t.name;if(c.onlyContainsChildren(t,l)&&null!=t.textContent&&(e=t.textContent.replace(/[\\n \\t]+/g,\" \").trim(),e.length>0&&e.length0)return p.processText(e.length0)return t.getAttribute(\"href\")}else if(\"LABEL\"===t.tagName&&null!=t.textContent&&(e=t.textContent.replace(/[\\n \\t]+/g,\" \").trim(),e.length>0&&e.lengthf;f++)s=g[f],\"track\"===(v=s[0])?u.push(s):a.apply(null,s);window._vds={push:function(){return arguments.length>1?a.apply(null,arguments):a.apply(null,arguments[0])},track:function(){return c.track.apply(c,arguments)},clickOn:function(){return c.clickOn.apply(c,arguments)},impOn:function(){return c.impOn.apply(c,arguments)},trackPV:function(){return c.trackPageView(4)}},o=function(){var t,e,r;for(r=[],t=0,e=u.length;e>t;t++)s=u[t],r.push(a.apply(null,s));return r},h=l(),m=b.getWindowSourceName(),m&&\"grcw\"===m||(m=\"grcw-inner-iframe\"),window.grSource={name:m,id:h},d=function(t){return function(e,r){return c.observe(e,r),t()}},-1===b.indexOf([\"\",\"localhost\",\"127.0.0.1\"],window.location.hostname)&&w.connect(d(o))}},{\"./dom_observer\":2,\"./guid\":4,\"./shim\":10,\"./tracker\":11,\"./utils\":12}],7:[function(t,e,r){var n,i,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};a=t(\"./utils\"),o=[\"circle-mode\",\"browse-mode\"],i=[\"load-plugin\",\"register-iframe\",\"circle-mode\",\"browse-mode\",\"page-load\",\"circle-load\"],n=function(){function t(){this.registerInnerIframe=s(this.registerInnerIframe,this),this.sendPageLoad=s(this.sendPageLoad,this),this.isSdkEvent=s(this.isSdkEvent,this),this.notifyInnerIframes=s(this.notifyInnerIframes,this),this.allowOrigin=window.vds.origin,this.bindEvents()}return t.prototype.bindEvents=function(){return a.bind(window,\"message\",function(t){return function(e){var r,n,i,s,d,c,h,l;if(n=e.data,n.ai===window.vds.accountId&&(c=n.mode||n.circleMode,t.isSdkEvent(c)&&(!n.fsna||\"sdk\"===n.fsna))){if(a.isSpreadPostMessage()){if(\"grcw-inner-iframe\"===n.sna)return void parent.postMessage(e.data,\"*\");if(h=n.mode,u.call(o,h)>=0)a.spreadToInnerIframes(n);else if(n.tna!==window.grSource.name&&n.tna&&n.tid){for(r=document.getElementsByTagName(\"iframe\"),i=0,d=r.length;d>i;i++)s=r[i],t.notifyInnerIframes(s,n);return}}if(l=n.mode,u.call(o,l)>=0||n.tna===window.grSource.name||e.origin===window.vds.origin||-1!==a.indexOf([\"www.growingio.com\",\"growingio.com\"],e.origin.split(\"://\")[1]))switch(e.origin!==window.vds.origin&&(window.vds.origin=e.origin),n.mode){case\"load-plugin\":return t.loadPlugin();case\"circle-mode\":return t.startCircle();case\"browse-mode\":return t.stopCircle()}}}}(this))},t.prototype.notifyInnerIframes=function(t,e){var r;if(a.isSpreadPostMessage())return r=t.contentWindow,r?r.postMessage(e,\"*\"):void 0},t.prototype.isSdkEvent=function(t){return u.call(i,t)>=0},t.prototype.sendPageLoad=function(t){var e,r,n,i;return null==t&&(t=null),n=(null!=(r=window.vds)?r.pathCaseSensitive:void 0)?window.location.toString():window.location.toString().toLowerCase(),i=window.vds,window.vds.sampling&&(delete i.sampling,delete i.sampling_ratio,delete i.sampling_func),e={circleMode:\"page-load\",url:n,ai:window.vds.accountId,ht:window.vds.hashtag,sna:window.grSource.name,sid:window.grSource.id,tna:\"\",fsna:\"sdk\",add_on_grSource:{grSource:window.grSource,vds:i,add_on_origin:this.allowOrigin}},(null!=t?t.pg:void 0)&&(e.pa=t),parent.postMessage(e,\"*\")},t.prototype.registerInnerIframe=function(t){var e;return null==t&&(t=null),\"grcw\"!==window.grSource.name?(e={circleMode:\"register-iframe\",url:window.location.toString(),ai:window.vds.accountId,ht:window.vds.hashtag,sna:window.grSource.name,sid:window.grSource.id,tna:\"\",fsna:\"sdk\"},(null!=t?t.pg:void 0)&&(e.pa=t),parent.postMessage(e,\"*\")):void 0},t.prototype.loadPlugin=function(){var t,e,r,n,i,o,s,u;for(this.pluginLoaded=!1,t=a.getCirclePluginFileName(window._gr_support_circle_pop_out),s=document.getElementsByTagName(\"script\"),i=0,o=s.length;o>i;i++)if(n=s[i],u=n.getAttribute(\"src\"),null!=u&&-1!==u.indexOf(\"/\"+t+\".js\")){this.pluginLoaded=!0;break}return this.pluginLoaded||(e=document.createElement(\"script\"),e.type=\"text/javascript\",e.charset=\"UTF-8\",e.src=this.allowOrigin+\"/assets/javascripts/\"+t+\".js\",document.head.appendChild(e),window._gr_support_circle_pop_out===!0)?void 0:(r=document.createElement(\"link\"),r.rel=\"stylesheet\",r.href=this.allowOrigin+\"/assets/stylesheets/circle-plugin.css\",document.head.appendChild(r))},t.prototype.startCircle=function(){var t,e,r,n,i,o;if(t=a.getCirclePluginFileName(window._gr_support_circle_pop_out),!this.pluginLoaded)for(i=document.getElementsByTagName(\"script\"),r=0,n=i.length;n>r;r++)if(e=i[r],o=e.getAttribute(\"src\"),null!=o&&-1!==o.indexOf(\"/\"+t+\".js\")){this.pluginLoaded=!0;break}return this.pluginLoaded?this.publishCircle():void 0},t.prototype.stopCircle=function(){return\"undefined\"!=typeof CircleEvents&&null!==CircleEvents?CircleEvents.publish(\"circle:stop\"):void 0},t.prototype.publishCircle=function(){return\"undefined\"!=typeof CircleEvents&&null!==CircleEvents?(CircleEvents.publish(\"circle:start\"),this.registerInnerIframe()):setTimeout(function(t){return function(){return t.publishCircle()}}(this),2e3)},t}(),e.exports=n},{\"./utils\":12}],8:[function(t,e,r){var n,i,o,a,s,u,d,c,h,l=function(t,e){return function(){return t.apply(e,arguments)}};u=t(\"lzstring\"),h=t(\"./utils\"),a=h.detectIE()||0/0,d=navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./),o=d?parseInt(d[2],10):!1,s=!1,o&&22>o?n=!1:(n=!0,c=navigator.userAgent,\"ArrayBufferView\"in window||(-1!==c.indexOf(\"Android\")?n=!1:-1!==c.indexOf(\"CPU OS \")?-1!==c.indexOf(\"CPU OS 6_\")?n=!1:-1!==c.indexOf(\"CPU OS 5_\")?n=!1:-1!==c.indexOf(\"CPU OS 4_\")?n=!1:-1!==c.indexOf(\"CPU OS 3_\")&&(n=!1):-1!==c.indexOf(\"CPU iPhone OS \")?-1!==c.indexOf(\"iPhone OS 6_\")?n=!1:-1!==c.indexOf(\"iPhone OS 5_\")?n=!1:-1!==c.indexOf(\"iPhone OS 4_\")&&(n=!1):-1!==c.indexOf(\"Intel Mac OS X\")&&(-1!==c.indexOf(\"Mac OS X 10_6\")?n=!1:-1!==c.indexOf(\"Mac OS X 10_7\")&&(n=!1)))),i=function(){function t(t,e,r){this.user=t,this.urlMap=e,this.callback=r,this.imgSendClear=l(this.imgSendClear,this),this.send=l(this.send,this)}var e,r,i;return e=[],i=[],r=[],t.prototype.connect=function(t){return s=t.isBot,\"function\"==typeof this.callback?this.callback(this.user,this.send):void 0},t.prototype.send=function(t,e){var r,n,i;null==e&&(e=\"action\");try{if(window.grBlind)return;return i=\"pv\"===e&&2===t.length?t[0].s:\"\",r=\"undefined\"==typeof Uint8Array||null===Uint8Array||s?window.XMLHttpRequest&&7!==a&&!s?u.compressToUTF16(JSON.stringify(t)):u.compressToEncodedURIComponent(JSON.stringify(t)):u.compressToUint8Array(JSON.stringify(t)),this.sendRemote(r,e,i)}catch(o){n=o}},t.prototype.sendRemote=function(t,e,o){var u,d,c;if(c=this.urlMap[e],window.grWaitTime=+Date.now()+300,window.XMLHttpRequest&&7!==a&&!s){if(u=new XMLHttpRequest,\"withCredentials\"in u)return u.open(\"POST\",c+\"?stm=\"+ +Date.now(),!0),u.withCredentials=!0,u.onreadystatechange=function(t){return function(){return 4===u.readyState&&(t.removeAjax(u),window.grWaitTime=+Date.now()+10,o&&\"\"!==o&&200===u.status)?t.user.updateSessionIdSendStatus(!0,o):void 0}}(this),u.send(\"undefined\"!=typeof ArrayBuffer&&null!==ArrayBuffer?n?t:t.buffer:t),r.push(u);if(\"undefined\"!=typeof XDomainRequest)return u=new XDomainRequest,\"http:\"===document.location.protocol&&(c=c.replace(\"https://\",\"http://\")),u.open(\"POST\",c+\"?stm=\"+ +Date.now()),u.onload=function(t){return function(){return t.removeXDR(u),o&&\"\"!==o?t.user.updateSessionIdSendStatus(!0,o):void 0}}(this),u.onerror=function(t){return function(e){return t.removeXDR(u)}}(this),u.onprogress=function(){return{}},u.ontimeout=function(){return{}},u.send(t),i.push(u)}else if(\"http:\"===document.location.protocol&&(c=c.replace(\"https://\",\"http://\")),d=c+\"?data=\"+t+\"&stm=\"+ +Date.now(),d.lengthe?t.className:t.getAttribute(\"class\")},normalizePath:function(t){var e;return e=t.length,e>1&&\"/\"===t.charAt(e-1)?t.slice(0,e-1):t},query:function(){var t,e;return t=window.location.search,t=t.length>1&&\"?\"===t.charAt(0)?t.slice(1):window.vds.hashtag&&-1!==window.location.hash.indexOf(\"?\")?window.location.hash.split(\"?\")[1]:t,(null!=(e=window.vds)?e.pathCaseSensitive:void 0)?t:t.toLowerCase()},parentOfLeafText:function(t){var e,r,n,o,a,s;if(n=\"\",!t.childNodes)return\"\";for(s=t.childNodes,o=0,a=s.length;a>o;o++)e=s[o],3===e.nodeType&&(null!=e.textContent?r=e.textContent.trim():null!=e.data&&(r=e.data.trim()),r.length>0&&(n+=r+\" \"));return n=n.replace(/[\\n \\t]+/g,\" \").trim(),n.length>0&&n.length0)?parseInt(i.substring(e+5,i.indexOf(\".\",e)),10):(n=i.indexOf(\"Trident/\"),n>0?(r=i.indexOf(\"rv:\"),parseInt(i.substring(r+3,i.indexOf(\".\",r)),10)):(t=i.indexOf(\"Edge/\"),t>0?parseInt(i.substring(t+5,i.indexOf(\".\",t)),10):!1))},detectIOS:function(){return!!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},hashCode:function(t){var e,r,n;if(null==t&&(t=\"\"),r=0,null==t||\"boolean\"==typeof t||0===t.length)return r;for(n=0;nr;r+=1)a[r]=str(r,u)||\"null\";return i=0===a.length?\"[]\":gap?\"[\\n\"+gap+a.join(\",\\n\"+gap)+\"\\n\"+s+\"]\":\"[\"+a.join(\",\")+\"]\",gap=s,i}if(rep&&\"object\"==typeof rep)for(o=rep.length,r=0;o>r;r+=1)\"string\"==typeof rep[r]&&(n=rep[r],i=str(n,u),i&&a.push(quote(n)+(gap?\": \":\":\")+i));else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(i=str(n,u),i&&a.push(quote(n)+(gap?\": \":\":\")+i));return i=0===a.length?\"{}\":gap?\"{\\n\"+gap+a.join(\",\\n\"+gap)+\"\\n\"+s+\"}\":\"{\"+a.join(\",\")+\"}\",gap=s,i}}var rx_one=/^[\\],:{}\\s]*$/,rx_two=/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,rx_four=/(?:^|:|,)(?:\\s*\\[)+/g,rx_escapable=/[\\\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,rx_dangerous=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\"function\"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;\"function\"!=typeof JSON.stringify&&(meta={\"\\b\":\"\\\\b\",\" \":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},JSON.stringify=function(t,e,r){var n;if(gap=\"\",indent=\"\",\"number\"==typeof r)for(n=0;r>n;n+=1)indent+=\" \";else\"string\"==typeof r&&(indent=r);if(rep=e,e&&\"function\"!=typeof e&&(\"object\"!=typeof e||\"number\"!=typeof e.length))throw new Error(\"JSON.stringify\");return str(\"\",{\"\":t})}),\"function\"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,i=t[e];if(i&&\"object\"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);return reviver.call(t,e,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return\"\\\\u\"+(\"0000\"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,\"@\").replace(rx_three,\"]\").replace(rx_four,\"\")))return j=eval(\"(\"+text+\")\"),\"function\"==typeof reviver?walk({\"\":j},\"\"):j;throw new SyntaxError(\"JSON.parse\")})}()},{}],15:[function(t,e,r){var n=function(){var t=String.fromCharCode,e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\",r={compressToUTF16:function(e){return null==e?\"\":r._compress(e,15,function(e){return t(e+32)})+\" \"},compressToUint8Array:function(t){for(var e=r.compress(t),n=new Uint8Array(2*e.length),i=0,o=e.length;o>i;i++){var a=e.charCodeAt(i);n[2*i]=a>>>8,n[2*i+1]=a%256}return n},compressToEncodedURIComponent:function(t){return null==t?\"\":r._compress(t,6,function(t){return e.charAt(t)})},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(t,e,r){if(null==t)return\"\";var n,i,o,a={},s={},u=\"\",d=\"\",c=\"\",h=2,l=3,f=2,p=[],g=0,v=0;for(o=0;on;n++)g=g=1;for(;;){if(g0){if(g.childNodes=[],w.hasAttribute(\"growing-ignore\")||w.hasAttribute(\"data-growing-ignore\"))return null;var S,C,N=0,O=-1!==u.indexOf(w.tagName);if(O)for(var x=w.firstChild;x;x=x.nextSibling)if(1===x.nodeType&&-1===s.indexOf(x.tagName)){O=!1;break}for(var I=w.firstChild;I;I=I.nextSibling){if(S=w.hasAttribute(\"data-growing-info\")?w.getAttribute(\"data-growing-info\"):null,C=w.hasAttribute(\"data-growing-idx\")?parseInt(w.getAttribute(\"data-growing-idx\")):-1,1===I.nodeType){if(1===n[I.tagName]){y=!1;continue}if(I.hasAttribute(\"growing-ignore\")||I.hasAttribute(\"data-growing-ignore\"))continue;if(O&&-1!==s.indexOf(I.tagName)&&(y=!1,0===I.children.length))continue;-1!==i.indexOf(I.tagName)&&(N+=1,C=N),I.hasAttribute(\"data-growing-idx\")&&(N=parseInt(I.getAttribute(\"data-growing-idx\")),C=N),I.hasAttribute(\"data-growing-info\")&&(S=I.getAttribute(\"data-growing-info\"))}var E=this.serializeNode(I,e,N>0&&C>0?N:r,S||d);if(null===E)3!=I.nodeType&&(y=!1);else if(\"undefined\"!=typeof E.childNodes){y=!1,b=!0;for(var A=0;A0&&C>0?E.idx=N:r&&(E.idx=r),S?E.obj=S:d&&(E.obj=d),g.childNodes.push(E)}else{if((0===w.offsetWidth||0===w.offsetHeight)&&\"A\"!==w.tagName&&\"BUTTON\"!==w.tagName)return null;E.leaf&&(r&&(E.idx=r),d&&(E.obj=d),g.childNodes.push(E))}}}else g.childNodes=[];if(y)if(g.leaf=!0,\"IMG\"===w.tagName&&(delete g.attributes.href,w.src&&-1===w.src.indexOf(\"data:image\")&&(g.attributes.href=w.src)),w.hasAttribute(\"data-growing-title\")&&w.getAttribute(\"data-growing-title\").length>0)g.text=w.getAttribute(\"data-growing-title\");else if(w.hasAttribute(\"title\")&&w.getAttribute(\"title\").length>0)g.text=w.getAttribute(\"title\");else if(\"IMG\"===w.tagName){if(w.alt)g.text=w.alt;else if(g.attributes.href){var D=g.attributes.href.split(\"?\")[0];if(D){var T=D.split(\"/\");T.length>0&&(g.text=T[T.length-1])}}}else if(\"INPUT\"===w.tagName&&-1!==a.indexOf(w.type))g.text=w.value;else if(\"svg\"===w.tagName){for(var _=w.firstChild;_;_=_.nextSibling)if(\"use\"===_.tagName&&_.getAttribute(\"xlink:href\")){g.text=_.getAttribute(\"xlink:href\");break}}else{var k=w.textContent.trim();if(0===k.length&&\"I\"!==w.tagName&&\"A\"!==w.tagName&&\"use\"!==w.tagName)return null;g.text=k}else{if(w.hasAttribute(\"data-growing-title\")&&w.getAttribute(\"data-growing-title\").length>0)g.text=w.getAttribute(\"data-growing-title\");else if(w.hasAttribute(\"title\")&&w.getAttribute(\"title\").length>0)g.text=w.getAttribute(\"title\");else if(\"svg\"===w.tagName)for(var _=w.firstChild;_;_=_.nextSibling)if(\"use\"===_.tagName&&_.getAttribute(\"xlink:href\")){g.text=_.getAttribute(\"xlink:href\");break}w.hasAttribute(\"data-growing-idx\")&&(g.idx=parseInt(w.getAttribute(\"data-growing-idx\"))),w.hasAttribute(\"data-growing-info\")&&(g.obj=w.getAttribute(\"data-growing-info\"))}g.path=e.slice(0,-1)}return g},t.prototype.serializeAddedAndMoved=function(t,e,r){var o=this,a=t.concat(e).concat(r);if(0===a.length)return[];var s=new MutationSummary.NodeMap,u={};a.forEach(function(t){t&&(u[s.nodeId(t)]=!0)});var d=[];a.forEach(function(t){if(t&&1!==n[t.tagName]){var e=t.parentNode;if(e&&!u[s.nodeId(e)]&&\"undefined\"!=typeof e.getAttribute){var r=e.getAttribute(\"id\"),i=e.getAttribute(\"class\"),o=t.getAttribute(\"class\");if(!r||-1===r.toLowerCase().indexOf(\"clock\")&&-1===r.toLowerCase().indexOf(\"countdown\")&&-1===r.toLowerCase().indexOf(\"time\"))if(!i||-1===i.toLowerCase().indexOf(\"clock\")&&-1===i.toLowerCase().indexOf(\"countdown\")&&-1===i.toLowerCase().indexOf(\"time\"))if(e.getAttribute(\"data-countdown\"));else if(o&&-1!==o.indexOf(\"daterangepicker\"));else if(t.hasAttribute(\"growing-ignore\")||t.hasAttribute(\"data-growing-ignore\"));else{for(;e&&e!==document&&\"#document-fragment\"!==e.nodeName&&\"BODY\"!==e.tagName&&!e.hasAttribute(\"growing-ignore\")&&!e.hasAttribute(\"data-growing-ignore\");)e=e.parentNode;(null===e||\"BODY\"===e.tagName||\"#document-fragment\"===e.nodeName)&&d.push(t)}else;else;}}});var c=[];return d.forEach(function(t){for(var e=void 0,r=t;r&&\"BODY\"!==r.tagName&&-1===i.indexOf(r.tagName);)r=r.parentNode;if(r&&\"BODY\"!==r.tagName){var n=r.parentNode;if(null==n)return;for(var a=1,s=n.childNodes[a-1];a0){var o=e.serializeValueChanges(r);if(o&&o.length>0)for(var a=0;a0&&(t=t.concat(s))}}e.mirror.applyChanged([],t)},10)},t}();r.Client=d},{\"mutation-summary\":16}]},{},[6]);","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金/","excerpt":"","text":"Tomcat组成与工作原理 - 掘金新人专享好礼凡未购买过小册的用户，均可领取三张 5 折新人专享券，购买小册时自动使用专享券，最高可节省 45 元。小册新人 5 折券最高可省 15 元小册新人 5 折券最高可省 15 元小册新人 5 折券最高可省 15 元注：专享券的使用期限在领券的七天内。一键领取领取成功购买小册时自动使用专享券知道了前往小册首页领取失败本活动仅适用于小册新用户知道了首页首页沸点小册开源库活动写文章发布沸点分享链接写文章草稿我的主页我喜欢的我的收藏集已购标签管理设置关于下载应用关于加入我们翻译计划合作伙伴登出VectorJin2017年04月10日阅读 4474Tomcat组成与工作原理Tomcat是什么 开源的 Java Web 应用服务器，实现了 Java EE(Java Platform Enterprise Edition)的部 分技术规范，比如 Java Servlet、Java Server Page、JSTL、Java WebSocket。Java EE 是 Sun 公 司为企业级应用推出的标准平台，定义了一系列用于企业级开发的技术规范，除了上述的之外，还有 EJB、Java Mail、JPA、JTA、JMS 等，而这些都依赖具体容器的实现。 上图对比了 Java EE 容器的实现情况，Tomcat 和 Jetty 都只提供了 Java Web 容器必需的 Servlet 和 JSP 规范，开发者要想实现其他的功能，需要自己依赖其他开源实现。 Glassfish 是由 sun 公司推出，Java EE 最新规范出来之后，首先会在 Glassfish 上进行实 现，所以是研究 Java EE 最新技术的首选。 最常见的情况是使用 Tomcat 作为 Java Web 服务器，使用 Spring 提供的开箱即用的强大 的功能，并依赖其他开源库来完成负责的业务功能实现。 Servlet容器 Tomcat 组成如下图：主要有 Container 和 Connector 以及相关组件构成。 Server：指的就是整个 Tomcat 服 务器，包含多组服务，负责管理和 启动各个 Service，同时监听 8005 端口发过来的 shutdown 命令，用 于关闭整个容器 ； Service：Tomcat 封装的、对外提 供完整的、基于组件的 web 服务， 包含 Connectors、Container 两个 核心组件，以及多个功能组件，各 个 Service 之间是独立的，但是共享 同一 JVM 的资源 ； Connector：Tomcat 与外部世界的连接器，监听固定端口接收外部请求，传递给 Container，并 将 Container 处理的结果返回给外部； Container：Catalina，Servlet 容器，内部有多层容器组成，用于管理 Servlet 生命周期，调用 servlet 相关方法。 Loader：封装了 Java ClassLoader，用于 Container 加载类文件； Realm：Tomcat 中为 web 应用程序提供访问认证和角色管理的机制； JMX：Java SE 中定义技术规范，是一个为应用程序、设备、系统等植入管理功能的框架，通过 JMX 可以远程监控 Tomcat 的运行状态； Jasper：Tomcat 的 Jsp 解析引擎，用于将 Jsp 转换成 Java 文件，并编译成 class 文件。 Session：负责管理和创建 session，以及 Session 的持久化(可自定义)，支持 session 的集群。 Pipeline：在容器中充当管道的作用，管道中可以设置各种 valve(阀门)，请求和响应在经由管 道中各个阀门处理，提供了一种灵活可配置的处理请求和响应的机制。 Naming：命名服务，JNDI， Java 命名和目录接口，是一组在 Java 应用中访问命名和目录服务的 API。命名服务将名称和对象联系起来，使得我们可以用名称访问对象，目录服务也是一种命名 服务，对象不但有名称，还有属性。Tomcat 中可以使用 JNDI 定义数据源、配置信息，用于开发 与部署的分离。 Container组成 Engine：Servlet 的顶层容器，包含一 个或多个 Host 子容器；Host：虚拟主机，负责 web 应用的部 署和 Context 的创建；Context：Web 应用上下文，包含多个 Wrapper，负责 web 配置的解析、管 理所有的 Web 资源；Wrapper：最底层的容器，是对 Servlet 的封装，负责 Servlet 实例的创 建、执行和销毁。 生命周期管理Tomcat 为了方便管理组件和容器的生命周期，定义了从创建、启动、到停止、销毁共 12 中状态，tomcat 生命周期管理了内部状态变化的规则控制，组件和容器只需实现相应的生命周期 方法即可完成各生命周期内的操作(initInternal、startInternal、stopInternal、 destroyInternal)； 比如执行初始化操作时，会判断当前状态是否 New，如果不是则抛出生命周期异常；是的 话则设置当前状态为 Initializing，并执行 initInternal 方法，由子类实现，方法执行成功则设置当 前状态为 Initialized，执行失败则设置为 Failed 状态； Tomcat 的生命周期管理引入了事件机制，在组件或容器的生命周期状态发生变化时会通 知事件监听器，监听器通过判断事件的类型来进行相应的操作。事件监听器的添加可以在 server.xml 文件中进行配置; Tomcat 各类容器的配置过程就是通过添加 listener 的方式来进行的，从而达到配置逻辑与 容器的解耦。如 EngineConfig、HostConfig、ContextConfig。EngineConfig：主要打印启动和停止日志HostConfig：主要处理部署应用，解析应用 META-INF/context.xml 并创建应用的 Context ContextConfig：主要解析并合并 web.xml，扫描应用的各类 web 资源 (filter、servlet、listener) Tomcat 的启动过程 启动从 Tomcat 提供的 start.sh 脚本开始，shell 脚本会调用 Bootstrap 的 main 方法，实际 调用了 Catalina 相应的 load、start 方法。 load 方法会通过 Digester 进行 config/server.xml 的解析，在解析的过程中会根据 xml 中的关系 和配置信息来创建容器，并设置相关的属性。接着 Catalina 会调用 StandardServer 的 init 和 start 方法进行容器的初始化和启动。 按照 xml 的配置关系，server 的子元素是 service，service 的子元素是顶层容器 Engine，每层容器有持有自己的子容器，而这些元素都实现了生命周期管理 的各个方法，因此就很容易的完成整个容器的启动、关闭等生命周期的管理。 StandardServer 完成 init 和 start 方法调用后，会一直监听来自 8005 端口(可配置)，如果接收 到 shutdown 命令，则会退出循环监听，执行后续的 stop 和 destroy 方法，完成 Tomcat 容器的 关闭。同时也会调用 JVM 的 Runtime.getRuntime()﴿.addShutdownHook 方法，在虚拟机意外退 出的时候来关闭容器。 所有容器都是继承自 ContainerBase，基类中封装了容器中的重复工作，负责启动容器相关的组 件 Loader、Logger、Manager、Cluster、Pipeline，启动子容器(线程池并发启动子容器，通过 线程池 submit 多个线程，调用后返回 Future 对象，线程内部启动子容器，接着调用 Future 对象 的 get 方法来等待执行结果)。 List&lt;Future&lt;Void&gt;&gt; results = new ArrayList&lt;Future&lt;Void&gt;&gt;(); for (int i = 0; i &lt; children.length; i++) { results.add(startStopExecutor.submit(new StartChild(children[i]))); } boolean fail = false; for (Future&lt;Void&gt; result ： results) { try { result.get(); } catch (Exception e) { log.error(sm.getString(\"containerBase.threadedStartFailed\")， e); fail = true; } }复制代码Web 应用的部署方式注：catalina.home：安装目录;catalina.base：工作目录;默认值 user.dir Server.xml 配置 Host 元素，指定 appBase 属性，默认\\$catalina.base/webapps/ Server.xml 配置 Context 元素，指定 docBase，元素，指定 web 应用的路径 自定义配置：在\\$catalina.base/EngineName/HostName/XXX.xml 配置 Context 元素 HostConfig 监听了 StandardHost 容器的事件，在 start 方法中解析上述配置文件： 扫描 appbase 路径下的所有文件夹和 war 包，解析各个应用的 META-INF/context.xml，并 创建 StandardContext，并将 Context 加入到 Host 的子容器中。 解析$catalina.base/EngineName/HostName/下的所有 Context 配置，找到相应 web 应 用的位置，解析各个应用的 META-INF/context.xml，并创建 StandardContext，并将 Context 加入到 Host 的子容器中。 注： HostConfig 并没有实际解析 Context.xml，而是在 ContextConfig 中进行的。 HostConfig 中会定期检查 watched 资源文件(context.xml 配置文件) ContextConfig 解析 context.xml 顺序： 先解析全局的配置 config/context.xml 然后解析 Host 的默认配置 EngineName/HostName/context.xml.default 最后解析应用的 META-INF/context.xml ContextConfig 解析 web.xml 顺序： 先解析全局的配置 config/web.xml 然后解析 Host 的默认配置 EngineName/HostName/web.xml.default 接着解析应用的 MEB-INF/web.xml 扫描应用 WEB-INF/lib/下的 jar 文件，解析其中的 META-INF/web-fragment.xml 最后合并 xml 封装成 WebXml，并设置 Context 注： 扫描 web 应用和 jar 中的注解(Filter、Listener、Servlet)就是上述步骤中进行的。 容器的定期执行：backgroundProcess，由 ContainerBase 来实现的，并且只有在顶层容器 中才会开启线程。(backgroundProcessorDelay=10 标志位来控制) Servlet 生命周期 Servlet 是用 Java 编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态 Web 内容。 请求到达 server 端，server 根据 url 映射到相应的 Servlet 判断 Servlet 实例是否存在，不存在则加载和实例化 Servlet 并调用 init 方法 Server 分别创建 Request 和 Response 对象，调用 Servlet 实例的 service 方法(service 方法 内部会根据 http 请求方法类型调用相应的 doXXX 方法) doXXX 方法内为业务逻辑实现，从 Request 对象获取请求参数，处理完毕之后将结果通过 response 对象返回给调用方 当 Server 不再需要 Servlet 时(一般当 Server 关闭时)，Server 调用 Servlet 的 destroy() 方 法。 load on startup 当值为 0 或者大于 0 时，表示容器在应用启动时就加载这个 servlet; 当是一个负数时或者没有指定时，则指示容器在该 servlet 被选择时才加载; 正数的值越小，启动该 servlet 的优先级越高; single thread model 每次访问 servlet，新建 servlet 实体对象，但并不能保证线程安全，同时 tomcat 会限制 servlet 的实例数目最佳实践：不要使用该模型，servlet 中不要有全局变量 请求处理过程  根据 server.xml 配置的指定的 connector 以及端口监听 http、或者 ajp 请求 请求到来时建立连接,解析请求参数,创建 Request 和 Response 对象,调用顶层容器 pipeline 的 invoke 方法 容器之间层层调用,最终调用业务 servlet 的 service 方法 Connector 将 response 流中的数据写到 socket 中 Pipeline 与 Valve  Pipeline 可以理解为现实中的管道,Valve 为管道中的阀门,Request 和 Response 对象在管道中 经过各个阀门的处理和控制。 每个容器的管道中都有一个必不可少的 basic valve,其他的都是可选的,basic valve 在管道中最 后调用,同时负责调用子容器的第一个 valve。 Valve 中主要的三个方法:setNext、getNext、invoke;valve 之间的关系是单向链式结构,本身 invoke 方法中会调用下一个 valve 的 invoke 方法。 各层容器对应的 basic valve 分别是 StandardEngineValve、StandardHostValve、 StandardContextValve、StandardWrapperValve。 JSP引擎 JSP 生命周期 编译阶段:servlet 容器编译 servlet 源文件,生成 servlet 类 初始化阶段:加载与 JSP 对应的 servlet 类, 创建其实例,并调用它的初始化方法 执行阶段:调用与 JSP 对应的 servlet 实例的 服务方法 销毁阶段:调用与 JSP 对应的 servlet 实例的 销毁方法,然后销毁 servlet 实例 JSP元素代码片段： &lt;% 代码片段 %&gt;JSP声明： &lt;%! declaration; [ declaration; ]+ ... %&gt;JSP表达式：&lt;%= 表达式 %&gt;JSP注释： &lt;%-- 注释 --%&gt;JSP指令： &lt;%@ directive attribute=“value” %&gt;JSP行为： HTML元素： html/head/body/div/p/…JSP隐式对象：request、response、out、session、application、config、 pageContext、page、Exception JSP 元素说明 代码片段:包含任意量的 Java 语句、变量、方法或表达式;JSP 声明:一个声明语句可以声明一个或多个变量、方法,供后面的 Java 代码使用;JSP 表达式:输出 Java 表达式的值,String 形式;JSP 注释:为代码作注释以及将某段代码注释掉JSP 指令:用来设置与整个 JSP 页面相关的属性,&lt;%@ page ... %&gt;定义页面的依赖属性,比如 language、contentType、errorPage、 isErrorPage、import、isThreadSafe、session 等等&lt;%@ include ... %&gt;包含其他的 JSP 文件、HTML 文件或文本文件,是该 JSP 文件的一部分,会 被同时编译执行&lt;%@ taglib ... %&gt;引入标签库的定义,可以是自定义标签JSP 行为:jsp:include、jsp:useBean、jsp:setProperty、jsp:getProperty、jsp:forward Jsp 解析过程  代码片段:在_jspService()方法内直接输出 JSP 声明: 在 servlet 类中进行输出 JSP 表达式:在_jspService()方法内直接输出 JSP 注释:直接忽略,不输出 JSP 指令:根据不同指令进行区分,include:对引入的文件进行解析;page 相关的属性会做为 JSP 的属性,影响的是解析和请求处理时的行为 JSP 行为:不同的行为有不同的处理方式,jsp:useBean 为例,会从 pageContext 根据 scope 的 类别获取 bean 对象,如果没有会创建 bean,同时存到相应 scope 的 pageContext 中 HTML:在_jspService()方法内直接输出 JSP 隐式对象:在_jspService()方法会进行声明,只能在方法中使用; Connector Http:HTTP 是超文本传输协议,是客户端浏览器或其他程序与 Web 服务器之间的应用层通信协 议AJP:Apache JServ 协议(AJP)是一种二进制协议,专门代理从 Web 服务器到位于后端的应用 程序服务器的入站请求阻塞 IO 非阻塞 IO IO多路复用 阻塞与非阻塞的区别在于进行读操作和写操作的系统调用时，如果此时内核态没有数据可读或者没有缓冲空间可写时，是否阻塞。 IO多路复用的好处在于可同时监听多个socket的可读和可写事件，这样就能使得应用可以同时监听多个socket，释放了应用线程资源。 Tomcat各类Connector对比 Connector的实现模式有三种，分别是BIO、NIO、APR，可以在server.xml中指定。 JIO：用java.io编写的TCP模块，阻塞IO NIO：用java.nio编写的TCP模块，非阻塞IO，（IO多路复用） APR：全称Apache Portable Runtime，使用JNI的方式来进行读取文件以及进行网络传输 Apache Portable Runtime是一个高度可移植的库，它是Apache HTTP Server 2.x的核心。 APR具有许多用途，包括访问高级IO功能（如sendfile，epoll和OpenSSL），操作系统级功能（随机数生成，系统状态等）和本地进程处理（共享内存，NT管道和Unix套接字）。 表格中字段含义说明： Support Polling：是否支持基于IO多路复用的socket事件轮询 Polling Size：轮询的最大连接数 Wait for next Request：在等待下一个请求时，处理线程是否释放，BIO是没有释放的，所以在keep-alive=true的情况下处理的并发连接数有限 Read Request Headers：由于request header数据较少，可以由容器提前解析完毕，不需要阻塞 Read Request Body：读取request body的数据是应用业务逻辑的事情，同时Servlet的限制，是需要阻塞读取的 Write Response：跟读取request body的逻辑类似，同样需要阻塞写 NIO处理相关类 Acceptor线程负责接收连接，调用accept方法阻塞接收建立的连接，并对socket进行封装成PollerEvent，指定注册的事件为op_read，并放入到EventQueue队列中，PollerEvent的run方法逻辑的是将Selector注册到socket的指定事件； Poller线程从EventQueue获取PollerEvent，并执行PollerEvent的run方法，调用Selector的select方法，如果有可读的Socket则创建Http11NioProcessor，放入到线程池中执行； CoyoteAdapter是Connector到Container的适配器，Http11NioProcessor调用其提供的service方法，内部创建Request和Response对象，并调用最顶层容器的Pipeline中的第一个Valve的invoke方法 Mapper主要处理http url 到servlet的映射规则的解析，对外提供map方法 NIO Connector主要参数 Comet Comet是一种用于web的推送技术，能使服务器实时地将更新的信息传送到客户端，而无须客户端发出请求在WebSocket出来之前，如果不适用comet，只能通过浏览器端轮询Server来模拟实现服务器端推送。Comet支持servlet异步处理IO，当连接上数据可读时触发事件，并异步写数据(阻塞) Tomcat要实现Comet，只需继承HttpServlet同时，实现CometProcessor接口 Begin：新的请求连接接入调用，可进行与Request和Response相关的对象初始化操作，并保存response对象，用于后续写入数据 Read：请求连接有数据可读时调用 End：当数据可用时，如果读取到文件结束或者response被关闭时则被调用 Error：在连接上发生异常时调用，数据读取异常、连接断开、处理异常、socket超时 Note： Read：在post请求有数据，但在begin事件中没有处理，则会调用read，如果read没有读取数据，在会触发Error回调，关闭socket End：当socket超时，并且response被关闭时也会调用；server被关闭时调用 Error：除了socket超时不会关闭socket，其他都会关闭socket End和Error时间触发时应关闭当前comet会话，即调用CometEvent的close方法Note：在事件触发时要做好线程安全的操作 异步Servlet 传统流程： 首先，Servlet 接收到请求之后，request数据解析； 接着，调用业务接口的某些方法，以完成业务处理； 最后，根据处理的结果提交响应，Servlet 线程结束 异步处理流程： 客户端发送一个请求 Servlet容器分配一个线程来处理容器中的一个servlet servlet调用request.startAsync()，保存AsyncContext, 然后返回 任何方式存在的容器线程都将退出，但是response仍然保持开放 业务线程使用保存的AsyncContext来完成响应（线程池） 客户端收到响应 Servlet 线程将请求转交给一个异步线程来执行业务处理，线程本身返回至容器，此时 Servlet 还没有生成响应数据，异步线程处理完业务以后，可以直接生成响应数据（异步线程拥有 ServletRequest 和 ServletResponse 对象的引用） 为什么web应用中支持异步？ 推出异步，主要是针对那些比较耗时的请求：比如一次缓慢的数据库查询，一次外部REST API调用, 或者是其他一些I/O密集型操作。这种耗时的请求会很快的耗光Servlet容器的线程池，继而影响可扩展性。 Note：从客户端的角度来看，request仍然像任何其他的HTTP的request-response交互一样，只是耗费了更长的时间而已 异步事件监听 onStartAsync：Request调用startAsync方法时触发 onComplete：syncContext调用complete方法时触发 onError：处理请求的过程出现异常时触发 onTimeout：socket超时触发 Note :onError/ onTimeout触发后，会紧接着回调onCompleteonComplete 执行后，就不可再操作request和response 关注下面的标签，发现更多相似文章Tomcat后端掘金招聘运营经理、内容运营加入掘金和开发者一起成长。发送简历到 hr@xitu.io，期待你的加入！评论上传图片Ctrl or ⌘ + Enter评论在第四维上的胖胖software engineer @ ipayroll ltd nz好像 tomcat8.5 以后生命周期不一样了吧？请问文中 tomcat 的版本？先 mark 了，还没来得及细看~ 但肯定是好文～01条评论1年前Joker_酒哥赞，学习了。Mark，后续进一步学习一下0评论1年前相关推荐专栏胡七筒2小时前Vue.jsLinux[职场]程序员生存指南（17）42微博微信扫一扫专栏Hollis_公众号Hollis5小时前JavaJVMJava中对象并不是都在堆上分配内存的。16微博微信扫一扫专栏公众号_咖啡拿铁15小时前Java后端走进科学之揭开神秘的\"零拷贝\"252微博微信扫一扫专栏WngShhng18小时前EventBus源码Guava源码分析——EventBus3微博微信扫一扫专栏胡七筒2小时前Vue.jsLinux[职场]程序员生存指南（18）22微博微信扫一扫专栏王亚普2天前Go后端天池中间件大赛Golang版Service Mesh思路分享183微博微信扫一扫专栏行易难1天前GitHub后端深入理解PHP之echo4微博微信扫一扫专栏MervynZ1天前React.js前端React 服务端渲染原理及过程1微博微信扫一扫专栏coder-pig19小时前微信机器人利用itchat搭建微信机器人详解(附三个实用示例)121微博微信扫一扫专栏金融级分布式架构6小时前后端运维一键在本地搭建运行Istio 1.0的分布式Kubernetes集群82微博微信扫一扫关于作者VectorJin后端研发 @ RRX 联合编辑 获得喜欢数219 获得阅读数6,937掘金小册深入理解 RPC : 基于 Python 自建分布式高并发 RPC 服务新人价 ￥9.95￥19.9使用 webpack 定制前端开发环境新人价 ￥9.95￥19.9新人专享好礼送你45元买小册立即领取下载掘金客户端一个帮助开发者成长的社区相关文章[职场]程序员生存指南（17）42Java中对象并不是都在堆上分配内存的。16走进科学之揭开神秘的\"零拷贝\"252Guava源码分析——EventBus3[职场]程序员生存指南（18）22目录Tomcat是什么Servlet容器JSP引擎ConnectorComet异步Servlet分享一个帮助开发者成长的社区打开应用","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/1.7f8fa68327f1ec65c3ff","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/1.7f8fa68327f1ec65c3ff/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/1.7f8fa68327f1ec65c3ff/","excerpt":"","text":"webpackJsonp([1],{1e3:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+QjFBMjZEODAtQ0ZCRC00REIyLThCQTAtODc0MEVBMTE2RTExPC90aXRsZT48ZyBzdHJva2U9IiNBQUIwQkEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEwLjUyNCAzLjQxM3Y4LjIzNSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xMy4wMjcgNy41MDhjLjgxMyAwIDEuNjc4LS4wMSAxLjY3OC0uMDEuNDQ5IDAgLjgxMi4zNzYuODEyLjgyNmwtLjAwNSA2LjM2YS44MTkuODE5IDAgMCAxLS44MTEuODI2SDYuMzFhLjgyMi44MjIgMCAwIDEtLjgxMS0uODI2bC4wMDUtNi4zNmMwLS40NTYuMzYtLjgyNS44MTItLjgyNWwxLjY4OS4wMDZNOC4zNzMgNS4xMTFsMi4xNDMtMi4wOSAyLjE0MyAyLjA3Ii8+PC9nPjwvc3ZnPg==\"},1001:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+MTYzQzFFRDAtNDA0My00REMyLUEwRTQtNEQ1NDI2MjFFNkIzPC90aXRsZT48ZyBmaWxsPSIjRDUyQjJBIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNy4yNzUgMTEuMTgzYy0uMjY3LS4wNzctLjQ1LS4xMy0uMzEtLjQ3LjMwMy0uNzM3LjMzNC0xLjM3My4wMDUtMS44MjctLjYxNS0uODUxLTIuMy0uODA1LTQuMjMyLS4wMjMgMCAwLS42MDYuMjU3LS40NTEtLjIwOC4yOTctLjkyNC4yNTItMS42OTktLjIxLTIuMTQ1LTEuMDQ4LTEuMDE1LTMuODM0LjAzOC02LjIyNCAyLjM1LTEuNzkgMS43My0yLjgyOCAzLjU2Ni0yLjgyOCA1LjE1MiAwIDMuMDM2IDQuMDIyIDQuODggNy45NTggNC44OCA1LjE2IDAgOC41OTEtMi45IDguNTkxLTUuMjAyIDAtMS4zOTEtMS4yMS0yLjE4LTIuMjk5LTIuNTA3em0tNi4yODEgNi42MjJjLTMuMTQuMy01Ljg1Mi0xLjA3NC02LjA1Ni0zLjA2OS0uMjA0LTEuOTk0IDIuMTc4LTMuODU0IDUuMzE4LTQuMTU1IDMuMTQtLjMgNS44NTEgMS4wNzMgNi4wNTUgMy4wNjcuMjA0IDEuOTk2LTIuMTc3IDMuODU2LTUuMzE3IDQuMTU3ek0yMC43MDEgNS42MjljLTEuMjQ2LTEuMzM3LTMuMDg0LTEuODQ2LTQuNzgtMS40OTdhLjcwMy43MDMgMCAwIDAtLjU2LjgzNGMuMDg0LjM4LjQ3LjYyMi44NjMuNTQgMS4yMDctLjI0NyAyLjUxMy4xMTUgMy4zOTggMS4wNjVhMy4zNyAzLjM3IDAgMCAxIC43NDcgMy4zNzkuNjk4LjY5OCAwIDAgMCAuNDY4Ljg4NWMuMzgxLjEyLjc5LS4wODMuOTE0LS40NTJ2LS4wMDJhNC43MzkgNC43MzkgMCAwIDAtMS4wNS00Ljc1MiIvPjxwYXRoIGQ9Ik0xOC43ODggNy4zYTIuNDk1IDIuNDk1IDAgMCAwLTIuMzI5LS43MjkuNjA1LjYwNSAwIDAgMC0uNDguNzE5LjYyNC42MjQgMCAwIDAgLjc0MS40NjRjLjQwNC0uMDgyLjg0Mi4wMzggMS4xMzkuMzU2LjI5Ny4zMTguMzc2Ljc1Mi4yNDkgMS4xMzJhLjYwMi42MDIgMCAwIDAgLjQwMy43NjIuNjMuNjMgMCAwIDAgLjc4Ny0uMzkgMi4zMDYgMi4zMDYgMCAwIDAtLjUxLTIuMzE1TTExLjMwNyAxMi4xMTdjLTEuNDk0LS4zNzctMy4xODMuMzQ0LTMuODMyIDEuNjE4LS42NjEgMS4zLS4wMjIgMi43NDIgMS40ODggMy4yMTMgMS41NjQuNDg4IDMuNDA3LS4yNiA0LjA0OC0xLjY2Mi42MzItMS4zNzEtLjE1Ny0yLjc4My0xLjcwNC0zLjE3em0tMS4xNCAzLjMxOGMtLjMwNC40NjktLjk1NS42NzQtMS40NDUuNDU4LS40ODMtLjIxMy0uNjI1LS43NTgtLjMyMS0xLjIxNS4zLS40NTUuOTI4LS42NTggMS40MTUtLjQ2LjQ5Mi4yMDIuNjQ5Ljc0My4zNSAxLjIxN3ptMS0xLjI0M2EuNDYxLjQ2MSAwIDAgMS0uNTQzLjE5M2MtLjE4Ny0uMDc0LS4yNDYtLjI3Ny0uMTQtLjQ1NmEuNDU1LjQ1NSAwIDAgMSAuNTMtLjE5MmMuMTkuMDY3LjI1OC4yNzIuMTUzLjQ1NXoiLz48L2c+PC9zdmc+\"},1002:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+MkRDRERCOTktQkY5QS00RkFFLTk4RjgtNzdCNDFERkIyNkY1PC90aXRsZT48cGF0aCBkPSJNOS4wNzQgM0M1LjIxIDIuOTQzIDIgNS44MzkgMiA5LjI1NWMwIDEuOTcyLjkxIDMuNjgzIDIuNjY5IDQuOTM5IDAgMC0uNjQ1IDIuMTcxLS42MzYgMi4yMTUuMDEuMDQzLjE1LjEyOS4xOTguMS4wNS0uMDI3IDIuMzMyLTEuNDE2IDIuMzMyLTEuNDE2IDEuNzQ5LjYxMyAyLjc2OS40MDkgMi44MjcuNDA1YTQuNjE0IDQuNjE0IDAgMCAxLS4xNTktMi4wOTljLjY4Mi00LjAwNSA0LjcwMi01LjI1MSA2LjkwNS01LjAzOS0uNjA4LTIuODkyLTMuMjUtNS4zLTcuMDYyLTUuMzU4em02LjcyNSA1Ljg0Yy0zLjQwNyAwLTYuMTI1IDIuMjkyLTYuMTI1IDUuMjE4IDAgMi45MzIgMi41ODUgNS4zNTkgNi4xMyA1LjM3OS43MTMuMDA0IDEuNzc1LS4xODMgMi40OTEtLjQ4OSAwIDAgMS43MTMgMS4wNiAxLjgxIDEuMDUyYS4xNi4xNiAwIDAgMCAuMTQ4LS4xNTJjLjAwNC0uMDY2LS41NDYtMS43Mi0uNTQ2LTEuNzIgMS40Ny0xLjE3NSAyLjA4NS0yLjQ3IDIuMDg1LTQuMTIgMC0yLjkyNy0yLjc3NS01LjE2OS01Ljk5My01LjE2OXpNNi4zOSA2LjI4OGEuOTI3LjkyNyAwIDAgMC0uOTE4LjkzNmMwIC41MTcuNDEuOTM2LjkxOC45MzYuNTA2IDAgLjkxNy0uNDE5LjkxNy0uOTM2YS45MjcuOTI3IDAgMCAwLS45MTctLjkzNnptNS41NTUgMGEuOTI3LjkyNyAwIDAgMC0uOTE4LjkzNmMwIC41MTcuNDExLjkzNi45MTguOTM2LjUwNyAwIC45MTgtLjQxOS45MTgtLjkzNmEuOTI3LjkyNyAwIDAgMC0uOTE4LS45MzZ6bTEuNjEyIDQuOTc5YS44MjEuODIxIDAgMCAwLS44MTEuODNjMCAuNDU4LjM2My44My44MTEuODNhLjgyMS44MjEgMCAwIDAgLjgxMi0uODMuODIxLjgyMSAwIDAgMC0uODEyLS44M3ptNC4zNDIgMGEuODIxLjgyMSAwIDAgMC0uODEyLjgzYzAgLjQ1OC4zNjMuODMuODEyLjgzYS44MjEuODIxIDAgMCAwIC44MTItLjgzLjgyMS44MjEgMCAwIDAtLjgxMi0uODN6IiBmaWxsPSIjMDBDODBDIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=\"},1003:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+OTJCQjg3OEMtNjI5Mi00NDlFLUI4MkEtODkwMTY5NjMyQjg3PC90aXRsZT48ZyBmaWxsPSIjMURDNDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00IDVoMTJ2MUg0VjV6bTAgNGgxMnYxSDRWOXptMCA0aDZ2MUg0di0xek0xMS44NTQgMTIuMTQ2bC0uNzA4LjcwOEwxNCAxNS43MDdsNC4zNTQtNC4zNTMtLjcwOC0uNzA4TDE0IDE0LjI5M3oiLz48L2c+PC9zdmc+\"},1004:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+QUE2MjVFOTctMzcwNC00MzI0LTkyN0QtM0Y1NDQ5ODgwQUY5PC90aXRsZT48cGF0aCBkPSJNMTUgMTNoLTJ2MWgydjJoMXYtMmgydi0xaC0ydi0yaC0xdjJ6TTQgNWgxMnYxSDRWNXptMCA0aDEydjFINFY5em0wIDRoOHYxSDR2LTF6IiBmaWxsPSIjQjJCQUMyIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=\"},1005:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+NTdERjlDRTMtRjVENi00RDZELTgyQzktM0NCOTREQTU0RjQ3PC90aXRsZT48cGF0aCBkPSJNNS41IDExYTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzem01IDBhMS41IDEuNSAwIDEgMCAwLTMgMS41IDEuNSAwIDAgMCAwIDN6bTUgMGExLjUgMS41IDAgMSAwIDAtMyAxLjUgMS41IDAgMCAwIDAgM3oiIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==\"},1006:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"entry-box\"},[i(t.componentName,{tag:\"component\",attrs:{entry:t.entry,direct:t.direct,index:t.index},on:{deleted:t.onEntryDeleted}})],1)},staticRenderFns:[]}},1007:function(t,e,i){function n(t){i(1008)}var s=i(8)(i(1009),i(1010),n,\"data-v-f0fa4668\",null);t.exports=s.exports},1008:function(t,e){},1009:function(t,e,i){\"use strict\";function n(){return{pointer:null,sort:\"newest\",list:[],loading:!1,canNext:!0,requestToken:null,wechatDataUrl:\"\",actionItem:{share:{active:!1}}}}Object.defineProperty(e,\"__esModule\",{value:!0});var s=i(25),o=i.n(s),a=i(958),r=i.n(a),c=i(960),l=i(965);e.default={props:[\"info\"],data:n,components:{Thumb:r.a},computed:{timelimitInfo:function(){return Object(l.c)(this.info)},hasSale:function(){return Object(l.d)(this.info)},salePrice:function(){var t=this.info.price,e=this.timelimitInfo.sale;return this.hasSale&&(t=Object(l.a)(t,e)),t}},methods:{computeSalePrice:l.a,shareToWeibo:function(){this.$getBean(\"shareBusiness\").shareBookToWeibo(this.info)},toggleActivateActionItem:function(t){var e=this;o()(this.actionItem).forEach(function(i){e.actionItem[i].active=t===i&&!e.actionItem[i].active})},getWechatDataUrl:function(){if(!this.wechatDataUrl){var t=this.info.id;this.wechatDataUrl=Object(c.a)(\"https://juejin.im/book/\"+t)}}},mounted:function(){var t=this,e=this.$getBean(\"eventBus\");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,function(){o()(t.actionItem).forEach(function(e){t.actionItem[e].active=!1})})}}},1010:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"app-link\",{staticClass:\"content-box\",attrs:{to:t.$bookInfo(t.info.id)}},[n(\"div\",{staticClass:\"info-box\"},[n(\"div\",{staticClass:\"meta-row\"},[n(\"span\",{staticClass:\"sign\"},[t._v(\"小册\")]),n(\"span\",{staticClass:\"username\"},[t._v(t._s(t.info.user.username))])]),n(\"div\",{staticClass:\"info-row\"},[n(\"app-link\",{staticClass:\"title\",attrs:{to:t.$bookInfo(t.info.id)}},[t._v(t._s(t.info.title))])],1),n(\"div\",{staticClass:\"action-row\"},[n(\"div\",{staticClass:\"action-left\"},[n(\"span\",{staticClass:\"link-btn buy\"},[t._v(\"购买人数: \"+t._s(t.info.buyCount))]),t.hasSale?n(\"span\",{staticClass:\"link-btn sale\"},[t._v(\"原价 \"+t._s(t.info.price)+\" 元 · 限时优惠价 \"+t._s(t.salePrice)+\" 元\")]):n(\"span\",{staticClass:\"link-btn sale\"},[t._v(\"特价: \"+t._s(t.info.price)+\"元\")]),n(\"span\",{staticClass:\"link-btn share\",class:{active:t.actionItem.share.active},on:{mouseenter:t.getWechatDataUrl,click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleActivateActionItem(\"share\")}}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1011)}}),t._v(\"分享\"),n(\"div\",{staticClass:\"share-panel\"},[n(\"div\",{staticClass:\"share-item weibo\",attrs:{\"st:name\":\"shareItem\",\"st:state\":\"weibo\"},on:{click:t.shareToWeibo}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1012)}}),t._v(\"微博\")]),n(\"div\",{staticClass:\"share-item wechat\",attrs:{\"st:name\":\"shareItem\",\"st:state\":\"wechat\"}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1013)}}),t._v(\"微信扫一扫\"),n(\"div\",{staticClass:\"qr-code-box\"},[n(\"img\",{staticClass:\"qr-code\",attrs:{src:t.wechatDataUrl}})])])])])])])]),t.info.img?n(\"thumb\",{staticClass:\"thumb\",attrs:{url:t.info.img,width:120,height:120}}):t._e()],1)},staticRenderFns:[]}},1011:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+QjFBMjZEODAtQ0ZCRC00REIyLThCQTAtODc0MEVBMTE2RTExPC90aXRsZT48ZyBzdHJva2U9IiNBQUIwQkEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEwLjUyNCAzLjQxM3Y4LjIzNSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xMy4wMjcgNy41MDhjLjgxMyAwIDEuNjc4LS4wMSAxLjY3OC0uMDEuNDQ5IDAgLjgxMi4zNzYuODEyLjgyNmwtLjAwNSA2LjM2YS44MTkuODE5IDAgMCAxLS44MTEuODI2SDYuMzFhLjgyMi44MjIgMCAwIDEtLjgxMS0uODI2bC4wMDUtNi4zNmMwLS40NTYuMzYtLjgyNS44MTItLjgyNWwxLjY4OS4wMDZNOC4zNzMgNS4xMTFsMi4xNDMtMi4wOSAyLjE0MyAyLjA3Ii8+PC9nPjwvc3ZnPg==\"},1012:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+MTYzQzFFRDAtNDA0My00REMyLUEwRTQtNEQ1NDI2MjFFNkIzPC90aXRsZT48ZyBmaWxsPSIjRDUyQjJBIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNy4yNzUgMTEuMTgzYy0uMjY3LS4wNzctLjQ1LS4xMy0uMzEtLjQ3LjMwMy0uNzM3LjMzNC0xLjM3My4wMDUtMS44MjctLjYxNS0uODUxLTIuMy0uODA1LTQuMjMyLS4wMjMgMCAwLS42MDYuMjU3LS40NTEtLjIwOC4yOTctLjkyNC4yNTItMS42OTktLjIxLTIuMTQ1LTEuMDQ4LTEuMDE1LTMuODM0LjAzOC02LjIyNCAyLjM1LTEuNzkgMS43My0yLjgyOCAzLjU2Ni0yLjgyOCA1LjE1MiAwIDMuMDM2IDQuMDIyIDQuODggNy45NTggNC44OCA1LjE2IDAgOC41OTEtMi45IDguNTkxLTUuMjAyIDAtMS4zOTEtMS4yMS0yLjE4LTIuMjk5LTIuNTA3em0tNi4yODEgNi42MjJjLTMuMTQuMy01Ljg1Mi0xLjA3NC02LjA1Ni0zLjA2OS0uMjA0LTEuOTk0IDIuMTc4LTMuODU0IDUuMzE4LTQuMTU1IDMuMTQtLjMgNS44NTEgMS4wNzMgNi4wNTUgMy4wNjcuMjA0IDEuOTk2LTIuMTc3IDMuODU2LTUuMzE3IDQuMTU3ek0yMC43MDEgNS42MjljLTEuMjQ2LTEuMzM3LTMuMDg0LTEuODQ2LTQuNzgtMS40OTdhLjcwMy43MDMgMCAwIDAtLjU2LjgzNGMuMDg0LjM4LjQ3LjYyMi44NjMuNTQgMS4yMDctLjI0NyAyLjUxMy4xMTUgMy4zOTggMS4wNjVhMy4zNyAzLjM3IDAgMCAxIC43NDcgMy4zNzkuNjk4LjY5OCAwIDAgMCAuNDY4Ljg4NWMuMzgxLjEyLjc5LS4wODMuOTE0LS40NTJ2LS4wMDJhNC43MzkgNC43MzkgMCAwIDAtMS4wNS00Ljc1MiIvPjxwYXRoIGQ9Ik0xOC43ODggNy4zYTIuNDk1IDIuNDk1IDAgMCAwLTIuMzI5LS43MjkuNjA1LjYwNSAwIDAgMC0uNDguNzE5LjYyNC42MjQgMCAwIDAgLjc0MS40NjRjLjQwNC0uMDgyLjg0Mi4wMzggMS4xMzkuMzU2LjI5Ny4zMTguMzc2Ljc1Mi4yNDkgMS4xMzJhLjYwMi42MDIgMCAwIDAgLjQwMy43NjIuNjMuNjMgMCAwIDAgLjc4Ny0uMzkgMi4zMDYgMi4zMDYgMCAwIDAtLjUxLTIuMzE1TTExLjMwNyAxMi4xMTdjLTEuNDk0LS4zNzctMy4xODMuMzQ0LTMuODMyIDEuNjE4LS42NjEgMS4zLS4wMjIgMi43NDIgMS40ODggMy4yMTMgMS41NjQuNDg4IDMuNDA3LS4yNiA0LjA0OC0xLjY2Mi42MzItMS4zNzEtLjE1Ny0yLjc4My0xLjcwNC0zLjE3em0tMS4xNCAzLjMxOGMtLjMwNC40NjktLjk1NS42NzQtMS40NDUuNDU4LS40ODMtLjIxMy0uNjI1LS43NTgtLjMyMS0xLjIxNS4zLS40NTUuOTI4LS42NTggMS40MTUtLjQ2LjQ5Mi4yMDIuNjQ5Ljc0My4zNSAxLjIxN3ptMS0xLjI0M2EuNDYxLjQ2MSAwIDAgMS0uNTQzLjE5M2MtLjE4Ny0uMDc0LS4yNDYtLjI3Ny0uMTQtLjQ1NmEuNDU1LjQ1NSAwIDAgMSAuNTMtLjE5MmMuMTkuMDY3LjI1OC4yNzIuMTUzLjQ1NXoiLz48L2c+PC9zdmc+\"},1013:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+MkRDRERCOTktQkY5QS00RkFFLTk4RjgtNzdCNDFERkIyNkY1PC90aXRsZT48cGF0aCBkPSJNOS4wNzQgM0M1LjIxIDIuOTQzIDIgNS44MzkgMiA5LjI1NWMwIDEuOTcyLjkxIDMuNjgzIDIuNjY5IDQuOTM5IDAgMC0uNjQ1IDIuMTcxLS42MzYgMi4yMTUuMDEuMDQzLjE1LjEyOS4xOTguMS4wNS0uMDI3IDIuMzMyLTEuNDE2IDIuMzMyLTEuNDE2IDEuNzQ5LjYxMyAyLjc2OS40MDkgMi44MjcuNDA1YTQuNjE0IDQuNjE0IDAgMCAxLS4xNTktMi4wOTljLjY4Mi00LjAwNSA0LjcwMi01LjI1MSA2LjkwNS01LjAzOS0uNjA4LTIuODkyLTMuMjUtNS4zLTcuMDYyLTUuMzU4em02LjcyNSA1Ljg0Yy0zLjQwNyAwLTYuMTI1IDIuMjkyLTYuMTI1IDUuMjE4IDAgMi45MzIgMi41ODUgNS4zNTkgNi4xMyA1LjM3OS43MTMuMDA0IDEuNzc1LS4xODMgMi40OTEtLjQ4OSAwIDAgMS43MTMgMS4wNiAxLjgxIDEuMDUyYS4xNi4xNiAwIDAgMCAuMTQ4LS4xNTJjLjAwNC0uMDY2LS41NDYtMS43Mi0uNTQ2LTEuNzIgMS40Ny0xLjE3NSAyLjA4NS0yLjQ3IDIuMDg1LTQuMTIgMC0yLjkyNy0yLjc3NS01LjE2OS01Ljk5My01LjE2OXpNNi4zOSA2LjI4OGEuOTI3LjkyNyAwIDAgMC0uOTE4LjkzNmMwIC41MTcuNDEuOTM2LjkxOC45MzYuNTA2IDAgLjkxNy0uNDE5LjkxNy0uOTM2YS45MjcuOTI3IDAgMCAwLS45MTctLjkzNnptNS41NTUgMGEuOTI3LjkyNyAwIDAgMC0uOTE4LjkzNmMwIC41MTcuNDExLjkzNi45MTguOTM2LjUwNyAwIC45MTgtLjQxOS45MTgtLjkzNmEuOTI3LjkyNyAwIDAgMC0uOTE4LS45MzZ6bTEuNjEyIDQuOTc5YS44MjEuODIxIDAgMCAwLS44MTEuODNjMCAuNDU4LjM2My44My44MTEuODNhLjgyMS44MjEgMCAwIDAgLjgxMi0uODMuODIxLjgyMSAwIDAgMC0uODEyLS44M3ptNC4zNDIgMGEuODIxLjgyMSAwIDAgMC0uODEyLjgzYzAgLjQ1OC4zNjMuODMuODEyLjgzYS44MjEuODIxIDAgMCAwIC44MTItLjgzLjgyMS44MjEgMCAwIDAtLjgxMi0uODN6IiBmaWxsPSIjMDBDODBDIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=\"},1014:function(t,e,i){function n(t){i(1015)}var s=i(8)(null,i(1016),n,\"data-v-9dff68b4\",null);t.exports=s.exports},1015:function(t,e){},1016:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"entry-masker\"},[i(\"div\",{staticClass:\"entry-info\"},[i(\"div\",{staticClass:\"info-row\"},[i(\"div\",{staticClass:\"entry-title-box\"},[i(\"div\",{staticClass:\"entry-title masker\"})])]),i(\"div\",{staticClass:\"info-row meta\"},[i(\"div\",{staticClass:\"meta-badge masker\"}),i(\"div\",{staticClass:\"meta-badge masker\"}),i(\"div\",{staticClass:\"meta-badge masker\"})])])])}]}},1017:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"ul\",{ref:\"list\",staticClass:\"entry-list\",attrs:{\"st:block\":\"entryList\"}},[t._l(t.prevList,function(e,n){return i(\"li\",{staticClass:\"item\"},[i(\"entry\",{key:n,attrs:{entry:e,direct:t.direct,index:n},on:{deleted:t.onEntryDeleted}})],1)}),t.bookHot&&t.list.length?i(\"li\",{staticClass:\"item\"},[i(\"book-for-timeline\",{attrs:{info:t.bookHot}})],1):t._e(),t._l(t.nextList,function(e,n){return i(\"li\",{staticClass:\"item\"},[i(\"entry\",{key:n,attrs:{entry:e,direct:t.direct,index:n+t.prevList.length},on:{deleted:t.onEntryDeleted}})],1)}),i(\"li\",{staticClass:\"item\"},[t.loading?i(\"entry-masker\"):t._e()],1),t.noEmptyIndication||t.loading||t.bookHot||t.list.length?t._e():i(\"div\",{staticClass:\"empty text-muted\"},[t._v(t._s(t.emptyText||\"列表为空\"))])],2)},staticRenderFns:[]}},1018:function(t,e,i){function n(t){i(1019)}var s=i(8)(i(1020),i(1032),n,\"data-v-fb64097a\",null);t.exports=s.exports},1019:function(t,e){},1020:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(971),s=i.n(n),o={welcome:i(1024),timelineIndex:i(1025),columnIndex:i(1026),collectionIndex:i(1027),exploreIndex:i(1028),entryPublic:i(1029),entryDetail:i(1030),column:i(1031)};e.default={components:{SidebarBlock:s.a},props:[\"closeable\"],data:function(){return{visible:!1}},methods:{close:function(){window.localStorage.setItem(\"HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK\",!0),this.visible=!1}},computed:{qrImageUrl:function(){return o[this.$route.name]}},mounted:function(){this.closeable?this.visible=!window.localStorage.getItem(\"HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK\"):this.visible=!0}}},1021:function(t,e){},1022:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={props:[\"title\",\"pure\"]}},1023:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"sidebar-block\",class:{pure:t.pure,shadow:!t.pure}},[t.pure?[t._t(\"default\")]:[t.title?i(\"div\",{staticClass:\"block-title\"},[t._v(t._s(t.title))]):t._e(),i(\"div\",{staticClass:\"block-body\"},[t._t(\"default\")],2)]],2)},staticRenderFns:[]}},1024:function(t,e,i){t.exports=i.p+\"static/img/welcome.6f27533.png\"},1025:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFDElEQVR4Xu2c23LbMAxEnT/vn7uTphq7qsSzC4AW7UFfQQLgLm6knH7d7/f7rf8tg8DXNyFfv17vz/3J5pH9Z/neO8Vf0r/XmbVXhWAT8hfJJqQz5DCpOkM6Q34QcGu8W6Oz+rP7XX+39acZMqqprjFq2kqTHjXhiH4C3JG7eIyGlCbkdrtlCW1ChJLnRPjbEXJFSclGXXZ/llCyf6ZfKlmzCSHnI/bdnuOuJ8LoTE0I3HuaEOO5pjNEaJrRlNz2OWN1BSHkb2dIMkOyhFbujwTMx/WQSkApeyJjMelsQnYIVRL6cRkSOZBb852IHT1tHPXAiP9LZ0jkQE0IhdigJMyowU1IE/IPAh99U++S9eBaessyk+O/5ZGS5X7jrlzvNvVKfJoQAU0KKEHFcMmz/iZEQHMJQgQ/U0uoKZKcjNP+rJzsR+Vv8asTitAr5FHAaV8TEvymTsBG5U1IE/ITO7NrOOmnCM7uJ/1n8j8ZEt1ctS/SA8h2FlDnNZh8ceRNyAlaTcgOmMoIjzzNXEpItcOKvizgThm4Yq37lLP5GJ6yogY3w1lCsvb3JGX9Genby0YB24T8RasJMX+4VhWBZ+XrowhRekZ1HV+9ZEVLYslrL90jnBqqEucSQhng6nMBJ/vY1J2xrwmpe3noDDlo6pGMpgwguZUhkR6hOqCWKFpH9rLyrH3afzkhDkBKxFaW2FcE4Nn5pZI1w8Em5BFm9jf1JoQLDgWYOpVNyxA+greCDjxb7nnLq4cli7d7K2gMzmYceUP2I/tpD8nVHjflewgB0oSc09eEHGATCZjSDFEcoBpNDmXlWftqyfj2U8HDPY/6NCM/v2cBGU0Z7j0jAphDiOKPcx4iTxp71TGNjJ3J1YjZ9mcDogkBppoQ82IYjfxZ+2ZmSMVU6GQgfsKN1EwC3s2Aan1ZgCgAHP0Ovodjb6RpOk0uot8l2AEskiGO/iZk91NVyr7lCIlELB2yWu5mSNY+lays/rP98j1k9hhMB7ySEKfk0DlojG9CThCcHQD2Bypi+tUpPRug2UOJWmHCGUKEvbt8dsCVfg/JTiWR/S7BBKgztipDj6NvdJbQ83sEUAcgBQAiyLFHuhR/mhDjrYwCaDlC3AigAyr61CZHYEXllEFRvUdjrTI2b/7ITT2TkkSg4nD1FNSE7BDNjrGV+yMZTRnk+tcZkvz7lI8mJBKhbgQSgNXyaEkMjb3VzlOPIXmkB9EZnJ5J/jnyJiTwlqUEAGVI6U2dosuVOxEUHStdny7NkEgNdw84+95BEen6S/pITvbKX3vJIMndpkwAZCPaDRjyJ3pvki+GBLArb0IeiIV+KOcCTuubkIUJqehhVEJI/sqShb/LoimHop3kpD8rrxhDnZrv2lPWb2ukv6AiwEmeBZz2KwfOZEj2fIp/TQignJ3a3B5pERKp8RSRWTlFrdsTXH3uejrvUoTQ4SIB0YTsEKCIyJYEIrEJaUKGMUIBunTJqihRq2WImtHS2BsBiCIiOoVsB8voV8bQrH8qAfvzNCHCfzWuEOgScJbBTUgT8hMbVHIo4rL7Sf9VPWiJDHGfRl5RQkaEKPajPagJEVPFBdhdv9TY2xnyiIplM+SqGi4mDC6bmiFoHRZQBij3HLeJz15PmDhPQ8+6pAwh4yRvQgghs2Tp6o5XNiE6gkv86kQpWfqR1lyp9pS3JUQ94Bk91GOiPeDbHlWE0T2mCQkASDmYIeQ37vz1cP7VtusAAAAASUVORK5CYII=\"},1026:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFM0lEQVR4Xu2d0XYaMQxE4c/75+SkOUvIBvvOSDJsQH2VLVsz0sh2t/R8uVwup/5zGATOn4Sc/z1+P5fEmsp+b/3fG++sr6xXhWATIiDZhABICkBdIUKm3Q5xJGPvugkxwVaGzwhRAFfWmI1xEuIR+9n2OuwhzoYJHLepKgBkCXXic/dPeMwqvgkR0GtChCPxW1eIIiH7RMuccpT1yD8lfqVkKftV8ZEkq3LBbWMOIAQuSQrZV/gnn6OEakIIudPpRIRWJmwT0oR8IUA9wJG0bIYSJ29XIRRwBLBZEyV/yssAJRStcege0oR803eIHtKE/AFCHMlReogrMTSe7C8nWQ4hKzSfACd7E3KDAElgRUU1IcL71vUJ+85YF0AaT/a3qhAlw9W3oxFwBDjZlxJCzslOEkLzlR5BPpyLprJext/Mv3TspWDJ3oTMEbrFpwmhbBIeFwUX0yESIdlFaD5pMNnJP9nJP9nJf9R+iO+ySNKOaI8CTvOaEEGSIqc6An5kb0KakK/cII0mO2Xgs+fT/qYVEp38qHmKZDj3gmp/lTj8l6xKhyt8VQNY7a8y5iZkgKZTceWEVGeM4m8fRKXmE0DK/hxCKv3Jp6zqDbqEEGHV+3uWvyakQLK6QuDvO95CslyJIVBcfyRZ7no0fiZZSkWQ/1H80mtv9i3J3Rytt/e3EqB7e1+5XhMS6CFNyO6ppSuk4KMBt2eQzK3uKav9L33LipQwBezYV1SMs74SP/nbYih5OlE25FYIBbD6FOSsr8RP/poQ0EQCkOxuAv4gpJJh0v7N7gYUDVDdz+pxaryhpxOFwBmAFPyKe0j2bUoFdBSbKrFNyB0EKSGqEzL0GdDKDFFOSWqGRTLUXf8QhJDMuHaXYHd8tWS68Tnrhyoku6FsU34kIUrFOIATdk0IIbSzKxLlHBpmhMtN3YwBh7sZ745flcEVPeqQhCBjuwErCak4VTkVMqu4kud3RXMJUCcgl0waT4TQfNc+W68JET4ldQGn8U0IIPQSFZI9xlbPd5q4cmpy/FVI9uZDkqzKBTdf2Zs3yYLrv7LHUcWlm3oT8vNrfUqGJuQOQi9dIYrmUslTVmXnO5qvxLO6x43wkHoIlWCFpGUJydxjKuJzCRzF24QE7iFKhVGCNSETzXy5ClEyhnpI1l4tWZX7IcKl53cnQGdBNdDMKUld43oZM35pSPXtSNatT6mH0CaakN8INSGJLF8huS9NyArAqOqz9hQh2cWz8yOSRwFn97S6h478l3zbmw2+CflGsAkZZNNTK+QZGr1acrJVS/sjO61v39TJYdaeDch5TFTe2qreoka4qPeqP/MZECVAVmKakJt7Q4VkNiGUsmCvlizajrsejSe7W3HXZ5zRf07sZByBkT3WRvxHAdnmOfFTfEoP29YrecuKAEYZlgWkCZmwQhlE9gjhL01IpOk6FaD4V4+NRN7R7ZJkKYC5GekCnBkf2f9q4uyLIWU4bZjmZwB2muTn2CbE/BlYF2B3fBPShJCADO2H7CHhaAYTj3CKIwm3LoaRkqcNOPeMLEFNSFKysgS4PYbWUxLSScCZvz8hWQog7rF7Nl4hNLveKAneghAFYEdCXQmk8faHcisyNAsAyUzlPSdLaBMS+I3GbIJkEuBwFeJkEFXGZqcm6/aAR/mTeogKwrBRBX5EM5NxisQ8khDCz64Qckj2SAU0ITtUHU1tQn4j4OAnVQiBnLWTJmcqJHIqpHhov878maQe9jMgJ8NW9wwCW1lfTbAmJPBvDIkg6pkzAj8A1j4S+q7p9BcAAAAASUVORK5CYII=\"},1027:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE+ElEQVR4Xu2d61bjMAyEy5vvm3cPu+TQExJ/M5LspkX8lS3JM7rFCfBxv9/vt/65DAIfn4R8/Fnvz/3B5pH9R/neuwp/R/pn2FMRbkIEpCoCQDDzb0kTIiDVhNxuty5ZQqRULqEeUmnrSBfZJ/ks/05LltP0yDlq2pGSQIA5/kf8c/Q7+DQhn430YMqsJLwJgR6kjLWXJmR2SYnop6jby90hwSEk4v+ZfqlkVRrcgHJqcMR+E7JDwIkwivYmZFeDI4A0IeMw+/Ula1TCslNWZcC+bA/J9iAngyOEURl+uwxpQojyxU29CZlISKQGuz3BXZ8taQTXpUvWCkL6wdB4I9iEfOfTJaasJuQXEvJWPYQaFMkjc3x1zXfuttzbYDo/yR/xkUoWKSR5EzJGqAkpfl9CAUlyiRBSkpXPnvPJv2fbP/PvJT4Dypa8GfuJ8Ki8CQm+U48CTvuakCbkf4zMruGknyI1u5/0D3tIdHPVvkiNJ9tZQJ3bZPLFkf8rWc6GGWubkG9Um5CTCHtqhkQu99yrjdHVRcT+jEyt1BnFJzxlRQ1uh55Z4yMEZ/0ZBdxeNvKvCflCqwmBF1hUPrIZOruERv0ryZBnlIjogc+Irs6QKOGHU5YCsHuAmQAqNZr8zfrn6MceohwoyvhRE4/YyzZNB7CIf47+JsS8qnlJQqjprpZnI5T203my+zf9cg9xDWbW0+HpqiW7X+mhlSX8xxtDJUUzACsHdK4qmhChBldGTDbCs/uVAKo8byhD6JCz5ZShs+XV5zvzV+4hWYcq53zyZUZJI5skV0tyE3KAZKRkNSEDBF4+Q2ZEhBMxin3qEY49Wqv4QzqiNwvy5WK2B0Qd3PatJER5DHDOQ+SFvlxsQsawqk37SEsTQiG7kyslbDkh2QchwoBKEskd/UpJcu05hNi3va7DBMbV9dFURvKK8286pM+AVjjkRFg1wXQ+kjchQo13CCbASV5OiNK0yOjKKUzJEPKX5G4PIX2qXH4OIYXvTMiMABheLnaG/Ay36gBTp9TOkJPUfytCqjOuQh+VXDWCXT1n6633IZGaSU2Q5NWAkL3sFDbyN0Na+DnEBZAAcvXRocleE2J+y0uAvjUhFTU6C2B1hmQJo/0kd4eCbb08ZVWnuHMg90lZCbDqAHJ6yug8TcjJr0VTwJC8M+QBoc6QXbgogFCEkdyNQNJXLY+WRGnsrXY28pyTrdHuGbI9kwhJPRi6h3HXRzJqdoY0ISaLb01IJEJN/H4sp5R29a/Wl7U3/fo9A+DsnhLRT4CTPNrz5OcQF3BaX11ysjXfvSloQoDhJoRSwACwoodRxJJ8ZYbgd1nuXZHLBemPEOKWvAwhdF46n9PDLvt3ewmEJoQQGsgpgjpDvsGTMiQL2AxC3PhwS5arn9ar9i9BCB0mEhBukyYfsvImZIegCkgW+LP9qv3OkFkMBAPikoRUlKirlSyV95chJDPmEhg0dDjPEWSLSloTIvyp8SYE/uG8AlD2bsvNyGhmbPs2e5fIEKVnrAboWT3osoRkIzwbsSNCshmavlxUItiNKJrLm5Dg3ExTw6ecphiSU7RHAoZ0doYUB4QLePX6aM+TekjWWcqAiJx8opLolliy52TUSFcT8oWOSyAR5PTAR11NyKsQQhGQlVNEkjxrf/V+tadc4jOgSA9RD1gxBbrk0XlGzzFNiDCWryTkL6qe53BInY0bAAAAAElFTkSuQmCC\"},1028:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE3klEQVR4Xu2c63bjIAyEkzffN8+eXnI29Rq+GQlsGqt/BUjMSCMgSe+Px+Nxq79lELh/EHL/c3w8j4RPJd7e+nvz3fGzECtCvpEtQqpCdousKqQq5AuB2RKRXf91vtKzRvWUZoVkmu42uBlN9Mj43Phdcl7XL0JutxsBTnaXgF7CFiG/kZCIhpIGz9Z4xz9VQMROVdOKT6qQowmhzbg9KgJollDaQxGyQSgLOM0vQg4G/K0JIUmhbJstqRTfSP9L9BDacBGyuUmPzIAnuFTyzsXv7PhG+q8KGXAPuQQhW5nK3lt665FkRuwks0sfe5UMcyRshXtKEdJBIJLhTo9TEkqt0GV7iCNZlI1FiHBKowxUM4rIaNnJf9ZOcaV6CC1OdspQmq/0BHcNpyeNjv/XPb8TuBHNzkhgEQKMXJIQytKsfbZGU3xn+2/Ft8S3TkgSVrQT4VF7ERJ8OokCTvOKkCLkK0dmazitT5manU/rd3tIdPJR85RT1czHx6P2+eHnU7KOdBjxVYREUJs453KEZDc84mkjq9lnStZI/ORTVvbthwqICHHs5GskgJ+6L/y0QsWvCGmwpwJYhAj3hstVSOQpg0AiO0kWzXfto3sS+X/62z32RgAfXeLbDZwF0B6QSs8gAlr7K0ICPaQIOeAncKtUZOiUpWTIbM3/7et337JmAOwC5vYId3xU01vH2sz+engvUyEuwO74IuTl9upWoPIUU4QkAFYIGZ3B7nqzx6sSd8rze4SgbEVk70kqoC1i1fiLkB0EIxdjqrAiZIPQW1eIIjnZEu9d1BT/zkVPOURQBZB9aoUogBAhaoDPjdJ6GUBorrtfWq+XAKEe4gZImqxkaBHSobkI+R8cp0dhhVAGKwS4ZbqSZI3Yv0NI6OnElQganw3Yme8mBxHirkfje/6G/aStCCEa/tmLEMDqLStEz4/9kU6FKT3N7VEUvyOZRHC6h1CwCkC0RnbDzkUwAlg2Pkq4Z/xSDyEwi5CfCEUIL0I6b10EaCRBh1bIiAqgTWQlIStZTnwz8ZAkSwmAMsCxEzjZDHafapTxvYSgeF/tRUjgq6kzE7QIeVdCSGZcO0mc0zPIt5LxtMahknWkhj59XYmQV3wlySpC3PrwfmVchGzwPVuy3pIQP4fnziDJbd27Qh/hjt4KndPJ3+wMj/gvQgg10559OShCTMBp+KmEzCh5Z8Nn+M/GRxUQXV/+OQI5cO3ZDWUuhkoCUHxkd+KT3rJcgN3x7oZo/azEjLppt+JUP8GsCmkgSAlD9stXiFNBZ0vW9M/UCQy6ZygAuZIycnx2f9v56a8BUUBkL0J+IlSECP9S0NF8J+P3kjVNyAxJcZtiVoKoilexS8/vswkhMCKSlyWcYsraW/EVIVlkg/OLkCBws6YVIbOQHbzuW0gWYUI9KDLfPWSoPa0IITYC/+SSEiB9U1/9lEWYEkCR+ZeqkEgCuAA5F0ElHlWSkPyPfzVOGaQE5AKiPkc/13U3nFkfQdv5P70Zf9LnIS4ARUibRifhl2zqzgZaMGQy9vIVEpFEAs2tcBpP9oxC2JJFmyd7JOMzAGzjUQgnf2R3Dgm9+CTJIsDJXoT0EaoK2cGHKoDs0yuEsj5rdzdI/kav5/YEJ76QZJGDrN0F8Myv+bh7JYkuQpISdSQhfwGuCyT6n1NJAAAAAABJRU5ErkJggg==\"},1029:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEx0lEQVR4Xu2c7XbbMAxD0zffm2cna7NlbuwLkJJjN+hfUiQF8ENS0nxcr9frJX+HQeDjRsjHr/3juT74fOb/Ub6MTomX7C9tdv2NQjCEfCEZQlIhT4sqFZIK+UTA7fFuj+7a7653473rr1bIVk91ndHQVob01hAm+xQvrSc52Sf5o/0QcrlcCHCSE+AkDyELhAhwkhPgJLcJmd1SKvZpk26Lc/W7M2ZtvdSyKoBRwM6Mqvh3AXb1aX+UMCEE7j0hxHiuSYUMuCdQSe/dsqiFpEKaFdJ9e+omBCUcJcCPmyEhhChfyCmDRmboMjRl5oz0r/hTW+Ihjr2VDakbVPPIrThKOPJ76Ja1ByEEYAgx7wXVjLuvCyHGB1CpkH/p9jYz5EdVCLULktNrKcmVU5RzaqJ49/Znv/a6G3A3FELMlhVCviMwsiKlCumSQOudnl4Z+l37tJ72V5Wf4lsn1NJeIa8CTutCSPEzdQK2Kg8hIeQzd6hHk5wykNZ35eS/Kv9TIdXFo9ZVZgD5HnkKIl8j5SFkJJoDbIWQASCONFEe6u5z9TJo6uEjN/nMVjd+iq9q/7SEVDd8B7K7PoQsEOgC2l0fQkLIdg6cfQbsHb/q7+kpS3nMUx0869mK/dEtwW1Ro/en2gshg55OCHCS3xMwhLwrIdSCunLKQJLP9q/aH1IhS2fKjCCAOj2fNj/77ayz/xDyxR4lCJHsrl/TDyEh5BOBURmlHqvJH8mpQlz5rhXiBuf2XLJPM6KyntaQXP18ZkrLouC6hwCyH0IIIZCnQv4BNKRCFECXnLg929Xf8kf5U9kP2VSP8UM+MaxswAXY1e8QMrulbtkPIZTaK08rswgPIWckhE4tZ29ZI/anHmtv/G/hJVUIBaz0XHWoPbvoURK78bnxdu0r/u46IaT4/O5URAhZPM10K2z3CtljBhAorrx7DCZ/s+2v+R/yvSzKoArhrwbMnXkUr3oxDiErSIYQM8Vmt5QQYhIyW31Pwr/90+fszbn2R8wcAtQ5tirxOPa28JDuIS6gXX0FAPIRQgghQ/72hCgAUMapxzqDl6mq7n7cYNxDwV1fPva6G3D1XULdDbv2XQK27CtPJyFk8O91hZCNXzWd0YLdinEr+O0rxAXY1a+27EMce+ktzAVDqRCy6dwrKH5HHkIKb1nOkL7phhDjV7PXKuWlFTKixKkFuMdOtwe7+hQv2SN51b58DyEHrrybgc4xU2kxeybMVjwhRJghzgyotMBvr72vbllUXUp8Myvu7QhRACfSqKeTfM+Whd/LogwgMEhO9iuEVG/Ca8fQ0TPJje/uX/plawKc5CHkf4RSIc1/oesmnHPKkyqk21JmVAiB5M4E156rr86wQxDibm5GgrgxuPohZIGYCogLtKqv+k+FqIg29X4UIZUWdbQZovJ5igqpHAq6N/fqPUIFfi1hQojweYVzbA0hBUAVgN+6QiozQh2S1Yx91Qw6RMs6GyEzKyyEiCXktjBX33pcnJHB3ZbTXS/y8FfNBdjVPz0hLqB7608lpLuZ7j1iRoXOHtrOPegxFmmGhBAfgRDSfEwcPZOGE+LnhLeCACC55+312upMOcTXgLozRrkXuDOjmuE3P7SfrXhDSAFAqrcOIb8BQLPhcIRSNNMAAAAASUVORK5CYII=\"},1030:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFL0lEQVR4Xu2c23riMAyE0zffN2e/3ZKWpon/GUtODKi3snWY0cE20I/b7XZb6m8aBD7+EfLx53x/bg829+w/yrfe9fh7tr1eRIuQO3LZCVCEAAJVIZMBVIQECekt+aN9T09Iq6e6YI0Y2pn+UTyu/6SvdUg5HOqZAbsBKaeoTP8IQNd/0leEuAht1k9HiJKx25hH92zS3/JHudeQfpJTDhztl1rW2YRkAFaEbBCgDHJmALUMJWHci5/jv2Jf7SBVIcuy9BBOhFXLIgQCFdxDGLnz1DOEgstsGastqgCSk89FSFXINwJU8pRNJK8KIYSWZaGSzj71CC79WOL4RwmVmRBTnrJ6AHCO0Rn3HCKUEuSpZkgRsvMR7qgM2DvFZGcsZWe2vbdsWS7IL/10EgWDWhDpp/1KhmYfIiIzq1Wh0lAnwEhOgEb3FyGE4EZehLQBe8TnKb4GRIQqFaK+tqpPJ2ZOystflhA6JUblMsLmwiKk8/ndxFleXoQUIZ/JcnXLuNr+Ucn8rxC5ngYtzBjaBLBzURwUpqS2CJFgOm9REXIe1pIleahHWkJGS6JoIv6RbvKf9pO862IYCdgNaPRFjwDayl3/I/qnqBAFAAqSEibyGFiEdPzE7u0IoQyNvBVlVEjEP9rb00JJZ/MeQiXZ49CZLWIG/3oJWPeteEmfh8wQsPsBEwGUnTBkj+RFSMecWkHtSdAwIaSA5DRk3ZlD9l5FvntTVzKAACd5i5CeIU/2SO4S6rZQdX0R4jJxX68CvB3ae+Z+3dRnyEg3QLflPVWFKC3KBaAz8YZtyyZklKNdTyfRiurZHwXArUB3fdS/rxOc+t+Aog5G90cDdu2766P+FSEPCNJLxZkVfVrLunoGuRl/1cyRnk6oHM84FEQBGv1UkqW/CKFsO/iakHOxJRPSJ4YO41UhP7/WRAS0ZpI8Q1wjtN5tQe76qP2oPXdm2acsJ0Baq5xanApV9LmHil5AVzvufnx+d0HNBjBbXxFiMOreA0i1MtOoJbkZ7gz5VrxpM4QCJBCjAbn63fXZ8R3ZlwlxWoiSoQRINEPdFuX4QxUdib8IISbucqoQkotmliJERIoAJ7lopo+QSEmqjmUFuHcM7fE/2x97hozs4cq9wQXAmXGufWW9O7OO4ut6y4pmmBJgEbJBqSrkuLkqCUkJFaoQxQF1Nqg9nQKK3ltc/dnxhWYInbuVFuQAqOhzZgb5f0XCHeEhzRAKSAGwCGnXGD4uUklHZ0xmhlM7oYSqChF+p04gzy6nhG62rKuDUzLUDTAa08gKxtfeqPPR/UXI90fA0/5O3b35RpPizEMHVoiSoSMDVuxf2bIyDgWq//Jr70hCXN0EEOnLSAAV4L2LcOuaUIQcsEeAk9xpgdL3sijLonLnFKNcPB19VSE77LkXy0hGKgS4h4hR/khPJ9FqcHt+9vooIRR/pr9FiDBDihD4X/TuTHm5CokGRCU9Qj9l9dlydeZILWsEYKqDR8BF919JSNc9JBow7Sc5ARbdT/qz5eqpsiokG/mOQ4J0MYxmIO0nOeEU3U/6s+Wqv9NWCAUQvZlH94+6SBYhQikohxongVr6ipAi5BOBaEZF97stR+AtZckUFRKNJOPiOQvBRcg9G4qQwP88HPGWVYQ8EKKcYtyeTwC7bdLV565f/ZFaluv8iAxuEUL+RQlX4nET5sjnIiT41HEEbFVIo0xeokKoDUTlvRm02lVfT3v9HK3fblm9gaj7XEKufHtSY/oazIFPPKf4XpbSUt6FkL8o4gd/yMSHfwAAAABJRU5ErkJggg==\"},1031:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE/ElEQVR4Xu2d23LbMAxE5T/vn7vTTjVVZJFnFyBlyUZeQRLALm6kneTxfD6fS/1cBoHHH0Iev86355nQOcJeR/8IfSrCRYiAVBECII0AqDJkB7IDyJ6fIkRIa3dJj5ARgJM9TkCcYc9qb7OHOAaT80cOZQkZad9o++m8XsYXIQJ6bkAJR/5Ysj2/CBHQuxwhkRq6LSmuQ4o+53zSP0NOPLfslzJEAWhvgAMYGU/yGYA69o/EpwhZlmUGoRRElSGde1ARsiyLUxIo2mYA6tj3cSWLAM0SQvtJTvYVITsECTACnOR0fhFShFAMvcpH12D3qYX0k0e0n+TR8y8x9iopn3m7Us7P3KNGnl+ENEKZMoDklSEdBEZG8KqmCNl8Bh8BmCL2ViXLdab33n8UYe75EUJG96DMeT18pB7iAlaEeIhd/vMQcucrM4RAycqpKZL87vpb9l/ie1mRpwkibLY8GxBFyA6BLGFFyGBAi5DBgFKEZgGn/aQ/Kv/bQ6Kbz9qnTFWZx8ez/FD0FCEKSieuKUJOBFtRJY+9zlOBUmLctyNyJlOyaOwm3Yq/Kn63IYSarOrwEbhFyAEqDuBZAEe/tVWGHPw63NdlyOiaT3V5tj4nI5WMcv1p+Sf3kCxABAA55DbtzHm0VylRdEYR0nkpcMErQnZfPR1RQkb3HJfUt2dI1uBsyXT1Z0usq29df3hTd8dKWk9yMt7dP6KkECEkjwZQEdKIBgKc5EXIBoHbZ4jiwKyIoHLVkrv2RPWM2qfaK99D1ANXB868N7gBRSBTz1L09UpWb0osQg7YKUIoZAfcQ5x7xy0IETD7scQtcXR+9rwsIWQfydUSLo+9oxQe9RilJp9JSOQlwCEce0jEgGjTKkJeQ/vlu71FSD//3QymaoIZoih0lWRLTPSmq9xblAB07XdKVg9v6dcRIoSpTUwl2nFYPXNdR1OVex6t7+krQoS/dUIAu/IiBBD7ugyJlLxsD3lnySSC0z3EbYLKekrzLKDufmriTg8rQg7YLUI6fzo8UrJcQGdfVC+VIQqgWQCphLny0fZQSXPta60fNvY6EUTGKwHgZEREX5ZQIrAlL0IC9xAlYIqQwf/+4qMzhMbA2WNypGTRHpJPzRBSTnKXkCucRzaQ3CFke5bUQ0g5yYuQV4RaJbEIaTR1CjKS3zpDRkwtBNDZ8hQhZxsbaeLZqcf10blXUUkm+UsPcY0dvd7NkAihrs1FCCD2VRmiRKgbYbSeamzvaeQMe8k+kkf9l79KSgpcuesQrc+WGDcAyJ7eeb2SW4Q0IokAJ3kRYrxlKSWPACf51xNCJTMDII2tIwhe7b/ETd11KDL2Zgghsokwxd7VviJE6CFFyAEC2XvIR2WIUlKuMjZSNF9dLpWs2YQ4NfYIUKrhEftnEzf9M/VMhhQh/xGoDJmdCsLQsM3gIuRNhLTUfgQhhCn1mMj+TIlOf9k60hRpzHTHWOfxMNuTlP1FiPFWpQDqEKwEpBOAH5EhVFbciI0+/rXsIEJU+2/TQ1SH1nUzS6Lbk2j9LaesIiT5b+oohd0ILkJOJERpmhlClPOdAJp5ntRDXDDcKcepsUpTVfS7QwAR5gwJPfuKkH/oEOAkL0J2CGR7EgFO8umEZMsU7ScHSe6WHLKH5K49DkHS2EsGZuXkoCOf3TNcX6knhnqIa4S73gE846AyBLjnk6/uedv1vwG8KQb6n7pdUgAAAABJRU5ErkJggg==\"},1032:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i(\"sidebar-block\",{staticClass:\"app-download-sidebar-block\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"https://juejin.im/app\",expression:\"'https://juejin.im/app'\",modifiers:{blank:!0}}],staticClass:\"app-link\"},[i(\"img\",{staticClass:\"qr-img\",attrs:{src:t.qrImageUrl}}),i(\"div\",{staticClass:\"content-box\"},[i(\"div\",{staticClass:\"headline\"},[t._v(\"下载掘金客户端\")]),i(\"div\",{staticClass:\"desc\"},[t._v(\"一个帮助开发者成长的社区\")])]),t.closeable?i(\"div\",{staticClass:\"close-btn ion-close-round\",attrs:{title:\"关闭\"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.close(e)}}}):t._e()])]):t._e()},staticRenderFns:[]}},1034:function(t,e,i){function n(t){i(1064)}var s=i(8)(i(1065),i(1077),n,\"data-v-746db1b2\",null);t.exports=s.exports},1035:function(t,e,i){function n(t){i(1036)}var s=i(8)(i(1037),i(1042),n,\"data-v-1f85cb5f\",null);t.exports=s.exports},1036:function(t,e){},1037:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(158),s=i.n(n),o=i(94),a=i.n(o),r=i(10),c=i(58),l=i(1038),u=i.n(l);e.default={data:function(){return{curBooks:[],books:[],view:\"prev\",playIndex:0,direction:\"next\"}},components:{BookItemPrev:u.a,BookItemNext:u.a},computed:a()({},Object(c.mapGetters)({logined:r.LOGINED}),{canPlay:function(){return this.books.length>1},directionClass:function(){return\"prev\"===this.direction?\"transition--prev\":\"transition--next\"}}),methods:{loopComponent:function(){var t=this.view;this.view=\"prev\"===t?\"next\":\"prev\"},prev:function(){if(this.canPlay){var t=this.books;if(this.direction=\"prev\",this.loopComponent(),this.playIndex0&&(t.curBooks=t.books[t.playIndex])})},randomBook:function(t){function e(t,e){return Math.random()>.5?-1:1}var i=t.sort(e);i=i.length%2>0?[].concat(s()(i),s()(i)):[].concat(s()(i));for(var n=[],o=0;o=n.level;)s=s.parent;return n.parent=s,n.deep=s.deep+1,n.visible=n.deep100)){a(\"#\"+e[n].dataset.id,this.catalog),this.$nextTick(function(){return t.scrollCatalogByCurrentPosition()});break}}},scrollCatalogByCurrentPosition:function(){var t=this.$refs.body,e=this.$refs.list,i=e.querySelector(\".item.active\");if(i){var n=Object(v.c)(),s=i.getBoundingClientRect(),o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=Math.max(0,n.height-a.top);if(r&&r1&&void 0!==arguments[1]?arguments[1]:\"#000000\",i=new o.a({content:t,color:e,padding:0,width:410,height:410,background:\"#ffffff\",ecl:\"L\"}).svg();return\"data:image/svg+xml;utf8,\"+encodeURIComponent(i)}e.a=n;var s=i(224),o=i.n(s)},961:function(t,e){},962:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(95),s=i(157),o=i(39),a=i.n(o);e.default={components:{Lazy:a.a},props:[\"url\",\"default\",\"quality\",\"width\",\"height\",\"shrink\",\"format\",\"size\",\"alt\",\"blank\"],computed:{defaultThumbUrl:function(){return this.default||n.e},thumbUrl:function(){var t=this.url||(this.blank?\"\":this.defaultThumbUrl);return this.shrink?Object(s.b)(t,this.width,this.height,{format:this.format,quality:this.quality}):Object(s.a)(t,this.width,this.height,{format:this.format,quality:this.quality})},thumbStyle:function(){return{backgroundSize:this.size||\"cover\"}}}}},963:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"lazy\",{staticClass:\"thumb\",style:t.thumbStyle,attrs:{div:!0,url:t.thumbUrl}})},staticRenderFns:[]}},964:function(t,e,i){function n(t){i(968)}var s=i(8)(null,i(969),n,\"data-v-494d384d\",null);t.exports=s.exports},965:function(t,e,i){\"use strict\";function n(t,e){var i=isNaN(e)?1:e/10,n=s(t,i);return 0===n?0:n.toFixed(2)}function s(t,e){var i=0,n=t.toString(),s=e.toString();try{i+=n.split(\".\")[1].length}catch(t){}try{i+=s.split(\".\")[1].length}catch(t){}n=Number(n.replace(\".\",\"\")),s=Number(s.replace(\".\",\"\"));var o=n*s/Math.pow(10,i),a=e>0?.01:0;return Math.max(a,o)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{free:0,charge:10},e=t.free,i=t.charge,n=e>0,s=i0&&void 0!==arguments[0]?arguments[0]:{};return[t.timeLimitDiscount,t.timeLimitDiscountFirstDay].some(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startUTC,i=void 0===e?null:e,n=t.endUTC,s=void 0===n?null:n,o=(t.discountCount,+new Date),a=+new Date(i),r=+new Date(s);return o>a&&o0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=[{title:\"早鸟价\",type:\"timeLimitDiscountFirstDay\"},{title:\"限时优惠价\",type:\"timeLimitDiscount\"}],n=t.timeLimitDiscount,s=void 0===n?{}:n,o=t.timeLimitDiscountFirstDay,a=void 0===o?{}:o,r=[a,s].map(function(t,n){var s=t.startUTC,o=void 0===s?null:s,a=t.endUTC,r=void 0===a?null:a,c=t.discountCount,u=void 0===c?10:c,d=+new Date(o),h=+new Date(r),m=u;return l()({id:e},i[n],{startTime:d,endTime:h,sale:m})}),c={},u=0;u=0&&yf&&d-1},get:function(i){return e[t.indexOf(i)]},set:function(i,n){-1===t.indexOf(i)&&(t.push(i),e.push(n))},delete:function(i){var n=t.indexOf(i);n>-1&&(t.splice(n,1),e.splice(n,1))}}}(),a=function(t){return new Event(t,{bubbles:!0})};try{new Event(\"test\")}catch(t){a=function(t){var e=document.createEvent(\"Event\");return e.initEvent(t,!0,!1),e}}var r=null;\"undefined\"==typeof window||\"function\"!=typeof window.getComputedStyle?(r=function(t){return t},r.destroy=function(t){return t},r.update=function(t){return t}):(r=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return i(t)}),t},r.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t},r.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=r})},979:function(t,e,i){function n(t){i(1069)}var s=i(8)(i(1070),i(1071),n,\"data-v-65d5b7df\",null);t.exports=s.exports},980:function(t,e){function i(t){if(navigator.clipboard)return navigator.clipboard.writeText(t);var e=document.createElement(\"span\");e.textContent=t,e.style.whiteSpace=\"pre\";var i=document.createElement(\"iframe\");i.sandbox=\"allow-same-origin\",document.body.appendChild(i);var n=i.contentWindow;n.document.body.appendChild(e);var s=n.getSelection();s||(n=window,s=n.getSelection(),document.body.appendChild(e));var o=n.document.createRange();s.removeAllRanges(),o.selectNode(e),s.addRange(o);var a=!1;try{a=n.document.execCommand(\"copy\")}catch(t){}return s.removeAllRanges(),n.document.body.removeChild(e),document.body.removeChild(i),a?Promise.resolve():Promise.reject()}t.exports=i},981:function(t,e,i){\"use strict\";function n(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}e.a=n},982:function(t,e,i){function n(t){i(983)}var s=i(8)(i(984),i(1017),n,\"data-v-f0edcf22\",null);t.exports=s.exports},983:function(t,e){},984:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(3),s=i.n(n),o=i(30),a=i(985),r=i.n(a),c=i(1007),l=i.n(c),u=i(1014),d=i.n(u);i(981);e.default={components:{Entry:r.a,BookForTimeline:l.a,EntryMasker:d.a},props:[\"list\",\"loading\",\"emptyText\",\"noEmptyIndication\",\"direct\"],data:function(){return{bookHot:null,bookAdded:!1}},computed:{prevList:function(){return this.list.slice(0,3)},nextList:function(){return this.list.slice(3)}},methods:{getBookHot:function(){var t=this;return this.$getBean(\"xiaoceBusiness\").getXiaoceHot().then(function(e){e&&e.id&&(t.bookHot=s()(e,{type:\"book\"}))})},fetchMoreIfConditionIsSatisfied:function(){Object(o.b)(this.$refs.list)>-200&&this.$emit(\"should-fetch-more\")},onEntryDeleted:function(t){this.$emit(\"deleted\",t)}},mounted:function(){var t=this;\"timelineIndex\"===this.$route.name&&this.getBookHot();var e=this.$getBean(\"eventBus\");e.onVmLife(this,e.eventType.ROOT_CONTAINER_SCROLL,function(){t.fetchMoreIfConditionIsSatisfied()}),Object(o.f)(this.$refs.list,function(){t.fetchMoreIfConditionIsSatisfied()})}}},985:function(t,e,i){function n(t){i(986)}var s=i(8)(i(987),i(1006),n,\"data-v-9f3d7718\",null);t.exports=s.exports},986:function(t,e){},987:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(988),s=i.n(n),o=i(993),a=i.n(o);e.default={props:[\"entry\",\"direct\",\"index\"],data:function(){return{}},components:{EventsItem:s.a,ArticleItem:a.a},computed:{componentName:function(){return this.entry.isEvent?\"EventsItem\":\"ArticleItem\"}},methods:{onEntryDeleted:function(t){this.$emit(\"delete\",t)}}}},988:function(t,e,i){function n(t){i(989)}var s=i(8)(i(990),i(991),n,\"data-v-2065a791\",null);t.exports=s.exports},989:function(t,e){},990:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(25),s=i.n(n),o=i(94),a=i.n(o),r=i(58),c=i(10),l=i(223),u=(i(960),i(222)),d=i.n(u),h=i(958),m=i.n(h),f=i(959),v=i.n(f);e.default={components:{Avatar:d.a,Thumb:m.a,UserPopover:v.a},props:[\"entry\",\"direct\",\"index\"],data:function(){return{likeLock:Object(l.a)(),wechatDataUrl:\"\",actionItem:{more:{active:!1}}}},computed:a()({},Object(r.mapGetters)({user:c.USER}),{route:function(){return this.entry?\"post\"===this.entry.type?this.$router.resolve(this.$columnRoute(this.entry)).href:this.entry.originalUrl:{}},toEventCategory:function(){return\"/events/\"+(this.eventInfo.cityAlias||\"\")},eventInfo:function(){return this.entry.eventInfo||{}},isPost:function(){return\"post\"===this.entry.type},isVote:function(){return\"vote\"===this.entry.type},isMine:function(){var t=this.entry.user;return t&&this.user&&t.id===this.user.id},isAdmin:function(){return this.user&&\"admin\"===this.user.role},recommended:function(){return!!this.entry.hot},hot:function(){return this.entry.hotIndex>=3e3},external:function(){return!(this.isPost||this.isVote)},tagList:function(){var t=3-(this.isPost||this.original)-this.isVote-this.hot;return(this.entry.tags||[]).slice(0,t).filter(function(t){return\"564c2c7e00b0d1db339370a4\"!==t.id})},isActionListActive:function(){return this.actionItem.more.active},stState:function(){var t=this.index+1;return t?this.entry.id+\"|\"+t:this.entry.id}}),methods:{toggleActivateActionItem:function(t){var e=this;s()(this.actionItem).forEach(function(i){e.actionItem[i].active=t===i&&!e.actionItem[i].active})},toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(c.TOGGLE_LIKE_ENTRY,t.entry)}).catch(function(){})})},gotoEditView:function(){if(this.isPost){var t=this.$getBean(\"editorBusiness\");window.location.href=t.getColumnEntryEditUrl(this.entry)}else window.location.href=\"/edit-entry/\"+this.entry.id},gotoEntryView:function(){\"post\"===this.entry.type?window.open(\"/entry/\"+this.entry.id+\"/view\",\"_blank\"):window.open(\"/entry/\"+this.entry.id,\"_blank\")},toggleHot:function(){this.$store.dispatch(c.TOGGLE_HOT_ENTRY,this.entry)},deleteEntry:function(){var t=this;if(window.confirm(\"删除文章后不可恢复，确定删除吗？\")){var e=this.entry.id;this.$store.dispatch(c.DELETE_ENTRY,e).then(function(){t.$alert(\"删除成功\"),t.$emit(\"deleted\",e)}).catch(function(e){t.$error(e)})}},recordEventClick:function(){this.$getBean(\"behaviorBusiness\").recordClickEventAction(this.entry.id)}},mounted:function(){var t=this,e=this.$getBean(\"eventBus\");this.entry.createdAt=this.entry.createdAt,e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,function(){s()(t.actionItem).forEach(function(e){t.actionItem[e].active=!1})})}}},991:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"entry\",attrs:{\"st:block\":\"entry\",\"st:state\":t.stState}},[n(\"a\",{directives:[{name:\"link\",rawName:\"v-link.external.blank\",value:t.route,expression:\"route\",modifiers:{external:!0,blank:!0}}],staticClass:\"entry-link\",attrs:{\"st:name\":\"link\"},on:{click:t.recordEventClick}},[n(\"div\",{staticClass:\"content-box\"},[n(\"div\",{staticClass:\"info-box\"},[n(\"div\",{staticClass:\"info-row meta-row\"},[n(\"ul\",{staticClass:\"meta-list\"},[t.recommended?n(\"li\",{staticClass:\"item recommended\"},[t._v(\"荐\")]):t._e(),t.hot&&!t.recommended?n(\"li\",{staticClass:\"item hot\"},[t._v(\"热\")]):t._e(),n(\"a\",{directives:[{name:\"link\",rawName:\"v-link.external.blank\",value:t.toEventCategory,expression:\"toEventCategory\",modifiers:{external:!0,blank:!0}}],staticClass:\"item events\"},[t._v(t._s(t.eventInfo.city)+\"活动\")]),n(\"li\",{staticClass:\"item username clickable\"},[n(\"user-popover\",{attrs:{userId:t.entry.user.id}},[n(\"app-link\",{attrs:{to:t.$userRoute(t.entry.user),blank:!0,\"st:name\":\"user\",\"st:state\":t.entry.user.id}},[t._v(t._s(t.entry.user.username))])],1)],1),t.tagList.length?n(\"li\",{staticClass:\"item tag\"},t._l(t.tagList,function(e,i){return n(\"app-link\",{key:i,staticClass:\"tag\",attrs:{to:t.$tagRoute(e.title),blank:!0,\"st:name\":\"tag\",\"st:state\":e.id}},[t._v(t._s(e.title))])})):t._e()])]),n(\"div\",{staticClass:\"info-row title-row\"},[n(\"a\",{directives:[{name:\"link\",rawName:\"v-link.external.blank\",value:t.route,expression:\"route\",modifiers:{external:!0,blank:!0}}],staticClass:\"title\",attrs:{\"st:name\":\"title\"}},[t._v(t._s(t.entry.title))])]),n(\"div\",{staticClass:\"info-row action-row\"},[n(\"ul\",{staticClass:\"action-list\",class:{active:t.isActionListActive}},[n(\"li\",{staticClass:\"item join-btn\"},[t._v(\"立即报名\")]),t.isMine||t.isAdmin?n(\"li\",{staticClass:\"item more clickable hover\",class:{active:t.actionItem.more.active},attrs:{\"st:name\":\"moreBtn\"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleActivateActionItem(\"more\")}}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(992)}}),n(\"ul\",{staticClass:\"more-list\",attrs:{\"st:silent\":\"st:silent\"}},[t.isPost?n(\"li\",{staticClass:\"item\",on:{click:t.gotoEditView}},[t._v(\"编辑\")]):t._e(),t.isAdmin?n(\"li\",{staticClass:\"item\",on:{click:t.toggleHot}},[t._v(t._s(t.recommended?\"取消推荐\":\"标记为推荐\"))]):t._e(),n(\"li\",{staticClass:\"item\",on:{click:t.deleteEntry}},[t._v(\"删除\")])])]):t._e()])])]),t.entry.screenshot?n(\"thumb\",{staticClass:\"thumb\",attrs:{url:t.entry.screenshot,width:120,height:120}}):t._e()],1)])])},staticRenderFns:[]}},992:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+NTdERjlDRTMtRjVENi00RDZELTgyQzktM0NCOTREQTU0RjQ3PC90aXRsZT48cGF0aCBkPSJNNS41IDExYTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzem01IDBhMS41IDEuNSAwIDEgMCAwLTMgMS41IDEuNSAwIDAgMCAwIDN6bTUgMGExLjUgMS41IDAgMSAwIDAtMyAxLjUgMS41IDAgMCAwIDAgM3oiIGZpbGw9IiNCMkJBQzIiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==\"},993:function(t,e,i){function n(t){i(994)}var s=i(8)(i(995),i(996),n,\"data-v-6b46a625\",null);t.exports=s.exports},994:function(t,e){},995:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(25),s=i.n(n),o=i(94),a=i.n(o),r=i(58),c=i(10),l=i(20),u=i(51),d=i(223),h=i(960),m=i(222),f=i.n(m),v=i(958),p=i.n(v),g=i(959),y=i.n(g),M=i(972),C=i.n(M);e.default={components:{Avatar:f.a,Thumb:p.a,UserPopover:y.a,CollectPopup:C.a},props:[\"entry\",\"direct\",\"index\"],data:function(){return{isCollectPopupVisible:!1,likeLock:Object(d.a)(),wechatDataUrl:\"\",actionItem:{share:{active:!1},collect:{active:!1},more:{active:!1}}}},computed:a()({},Object(r.mapGetters)({user:c.USER}),{route:function(){return this.direct?this.$entryPublicRoute(this.entry):this.$entryDetailRoute(this.entry)},commentRoute:function(){return this.$entryDetailRoute(this.entry,\"#comment\")},isPost:function(){return\"post\"===this.entry.type},isVote:function(){return\"vote\"===this.entry.type},isMine:function(){var t=this.entry.user;return t&&this.user&&t.id===this.user.id},isAdmin:function(){return this.user&&\"admin\"===this.user.role},previewable:function(){return!1},original:function(){return!!this.entry.original},recommended:function(){return!!this.entry.hot},hot:function(){return this.entry.hotIndex>=3e3},external:function(){return!(this.isPost||this.isVote)},unparsed:function(){return!1},date:function(){return Object(l.c)(this.entry.createdAt)},liked:function(){return!!this.entry.liked},tagList:function(){var t=3-(this.isPost||this.original)-this.isVote-this.hot;return(this.entry.tags||[]).slice(0,t)},isActionListActive:function(){return this.actionItem.share.active||this.actionItem.collect.active||this.actionItem.more.active},stState:function(){var t=this.index+1;return t?this.entry.id+\"|\"+t:this.entry.id}}),methods:{toggleActivateActionItem:function(t){var e=this;s()(this.actionItem).forEach(function(i){e.actionItem[i].active=t===i&&!e.actionItem[i].active})},toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(c.TOGGLE_LIKE_ENTRY,t.entry)}).catch(function(){})})},collect:function(){var t=this;this.$ensureAuthorized().then(function(){return t.toggleActivateActionItem(\"collect\")}).catch(function(){})},gotoEditView:function(){if(this.isPost){var t=this.$getBean(\"editorBusiness\"),e=t.getColumnEntryEditUrl(this.entry);window.open(e,\"_blank\")}else window.open(\"/edit-entry/\"+this.entry.id,\"_blank\")},gotoEntryView:function(){\"post\"===this.entry.type?window.open(\"/entry/\"+this.entry.id+\"/view\",\"_blank\"):window.open(\"/entry/\"+this.entry.id,\"_blank\")},toggleHot:function(){this.$store.dispatch(c.TOGGLE_HOT_ENTRY,this.entry)},deleteEntry:function(){var t=this;if(window.confirm(\"删除文章后不可恢复，确定删除吗？\")){var e=this.entry.id;this.$store.dispatch(c.DELETE_ENTRY,e).then(function(){t.$alert(\"删除成功\"),t.$emit(\"deleted\",e)}).catch(function(e){t.$error(e)})}},gotoParserView:function(){var t=\"http://parser.juejin.im/editor?entryId=\"+this.entry.id;window.open(t,\"_blank\")},shareToWeibo:function(){this.$getBean(\"shareBusiness\").shareEntryToWeibo(this.entry)},recordEntryView:function(){this.$getBean(\"behaviorBusiness\").recordViewEntryAction(this.entry.id)},recordEntryClick:function(){this.$getBean(\"behaviorBusiness\").recordClickEntryAction(this.entry.id)},getWechatDataUrl:function(){if(!this.wechatDataUrl){var t=this.entry.id,e=null;if(this.isVote)e=Object(u.b)(\"article-parse\",{id:t+\"/detail\",type:\"entry\",source:\"article_list\",campaign:\"share_vote\"}),this.wechatDataUrl=Object(h.a)(e);else if(this.isPost){var i=this.entry.originalUrl;t=i.substr(i.indexOf(\"/post/\")+6,24),e=Object(u.b)(\"article-parse\",{id:t,type:\"post\",source:\"article_list\",campaign:\"share_article\"}),this.wechatDataUrl=Object(h.a)(e)}else e=Object(u.b)(\"article-parse\",{id:t,type:\"entry\",source:\"article_list\",campaign:\"share_article\"}),this.wechatDataUrl=Object(h.a)(e)}}},mounted:function(){var t=this,e=this.$getBean(\"eventBus\");this.entry.createdAt=this.entry.createdAt,e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,function(){s()(t.actionItem).forEach(function(e){t.actionItem[e].active=!1})})}}},996:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"entry\",attrs:{\"st:block\":\"entry\",\"st:state\":t.stState}},[n(\"app-link\",{staticClass:\"entry-link\",attrs:{to:t.route,blank:!0,\"st:name\":\"link\"},nativeOn:{click:function(e){t.recordEntryClick(e)}}},[n(\"div\",{staticClass:\"content-box\"},[n(\"div\",{staticClass:\"info-box\"},[n(\"div\",{staticClass:\"info-row meta-row\"},[n(\"ul\",{staticClass:\"meta-list\"},[t.recommended?n(\"li\",{staticClass:\"item recommended\"},[t._v(\"荐\")]):t._e(),t.hot&&!t.recommended?n(\"li\",{staticClass:\"item hot\"},[t._v(\"热\")]):t._e(),t.isPost?n(\"li\",{staticClass:\"item post\"},[t._v(\"专栏\")]):t._e(),n(\"li\",{staticClass:\"item username clickable\"},[n(\"user-popover\",{attrs:{userId:t.entry.user.id}},[n(\"app-link\",{attrs:{to:t.$userRoute(t.entry.user),blank:!0,\"st:name\":\"user\",\"st:state\":t.entry.user.id}},[t._v(t._s(t.entry.user.username))])],1)],1),n(\"li\",{staticClass:\"item\"},[t._v(t._s(t.date))]),t.tagList.length?n(\"li\",{staticClass:\"item tag\"},t._l(t.tagList,function(e,i){return n(\"app-link\",{key:i,staticClass:\"tag\",attrs:{to:t.$tagRoute(e.title),blank:!0,\"st:name\":\"tag\",\"st:state\":e.id}},[t._v(t._s(e.title))])})):t._e(),t.isAdmin&&t.unparsed?n(\"li\",{staticClass:\"item unparsed clickable\",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.gotoParserView(e)}}},[t._v(\"未抓取\")]):t._e()])]),n(\"div\",{staticClass:\"info-row title-row\"},[!t.external||t.user||t.unparsed?t._e():n(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"/entry/\"+t.entry.id,expression:\"'/entry/' + entry.id\",modifiers:{blank:!0}}],staticClass:\"title\",attrs:{\"st:name\":\"title\"}},[t._v(t._s(t.entry.title))]),t.external&&(t.user||t.unparsed)?n(\"a\",{directives:[{name:\"link\",rawName:\"v-link.external.blank\",value:t.entry.originalUrl,expression:\"entry.originalUrl\",modifiers:{external:!0,blank:!0}}],staticClass:\"title\",attrs:{\"st:name\":\"title\"},on:{click:t.recordEntryView}},[t._v(t._s(t.entry.title))]):t._e(),t.external?t._e():n(\"app-link\",{staticClass:\"title\",attrs:{to:t.route,blank:!0,\"st:name\":\"title\"}},[t._v(t._s(t.entry.title))])],1),n(\"div\",{staticClass:\"info-row action-row\"},[n(\"ul\",{staticClass:\"action-list\",class:{active:t.isActionListActive}},[n(\"li\",{staticClass:\"item like clickable\",class:{liked:t.liked},attrs:{\"st:name\":\"likeBtn\"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleLike(e)}}},[n(\"a\",{staticClass:\"title-box\"},[t.liked?n(\"img\",{staticClass:\"icon\",attrs:{src:i(997)}}):n(\"img\",{staticClass:\"icon\",attrs:{src:i(998)}}),t.entry.collectionCount?n(\"span\",{staticClass:\"count\"},[t._v(t._s(t.entry.collectionCount))]):t._e()])]),n(\"li\",{staticClass:\"item comment clickable\",attrs:{\"st:name\":\"commentBtn\"}},[n(\"app-link\",{staticClass:\"title-box\",attrs:{to:t.commentRoute,blank:!0}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(999)}}),t.entry.commentsCount?n(\"span\",{staticClass:\"count\"},[t._v(t._s(t.entry.commentsCount))]):t._e()])],1),n(\"li\",{staticClass:\"item share clickable hover\",class:{active:t.actionItem.share.active},attrs:{\"st:name\":\"shareBtn\",title:\"分享\"},on:{mouseenter:t.getWechatDataUrl,click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleActivateActionItem(\"share\")}}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1e3)}}),n(\"div\",{staticClass:\"share-panel\"},[n(\"div\",{staticClass:\"share-item weibo\",attrs:{\"st:name\":\"shareItem\",\"st:state\":\"weibo\"},on:{click:t.shareToWeibo}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1001)}}),t._v(\"微博\")]),n(\"div\",{staticClass:\"share-item wechat\",attrs:{\"st:name\":\"shareItem\",\"st:state\":\"wechat\"}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1002)}}),t._v(\"微信扫一扫\"),n(\"div\",{staticClass:\"qr-code-box\"},[n(\"img\",{staticClass:\"qr-code\",attrs:{src:t.wechatDataUrl}})])])])]),t.entry.collectStateError?t._e():n(\"li\",{staticClass:\"item collect clickable hover\",class:{active:t.actionItem.collect.active},attrs:{title:\"收藏\",\"st:name\":\"collectBtn\"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.collect(e)}}},[t.entry.collected?n(\"img\",{staticClass:\"icon\",attrs:{src:i(1003)}}):n(\"img\",{staticClass:\"icon\",attrs:{src:i(1004)}}),t.actionItem.collect.active?n(\"collect-popup\",{attrs:{entry:t.entry,\"st:silent\":\"st:silent\"},on:{close:function(e){t.actionItem.collect.active=!1}}}):t._e()],1),t.isMine||t.isAdmin?n(\"li\",{staticClass:\"item more clickable hover\",class:{active:t.actionItem.more.active},attrs:{\"st:name\":\"moreBtn\"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleActivateActionItem(\"more\")}}},[n(\"img\",{staticClass:\"icon\",attrs:{src:i(1005)}}),n(\"ul\",{staticClass:\"more-list\",attrs:{\"st:silent\":\"st:silent\"}},[n(\"li\",{staticClass:\"item\",on:{click:t.gotoEditView}},[t._v(\"编辑\")]),t.isAdmin?n(\"li\",{staticClass:\"item\",on:{click:t.toggleHot}},[t._v(t._s(t.recommended?\"取消推荐\":\"标记为推荐\"))]):t._e(),t.external&&t.isAdmin?n(\"li\",{staticClass:\"item\",on:{click:t.gotoParserView}},[t._v(\"抓取文章\")]):t._e(),t.previewable&&t.isAdmin?n(\"li\",{staticClass:\"item\",on:{click:t.gotoEntryView}},[t._v(\"预览\")]):t._e(),n(\"li\",{staticClass:\"item\",on:{click:t.deleteEntry}},[t._v(\"删除\")])])]):t._e()])])]),t.entry.screenshot?n(\"thumb\",{staticClass:\"thumb\",attrs:{url:t.entry.screenshot,width:120,height:120}}):t._e()],1)])],1)},staticRenderFns:[]}},997:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ODlBMTEzNzItNkU2Qy00MkVFLTk5RTYtNDU1MTVDQzIyOUJBPC90aXRsZT48cGF0aCBkPSJNMTAuMDUgNi43OTdDOS44NDIgNi41MyA4LjI3NCA0LjYxIDYuNDIxIDUuMDcyYy0uNjYyLjE2NS0xLjQzOS40NC0yLjAwOSAxLjQ2My0yLjE4IDMuOTEzIDQuOTY1IDguOTgzIDUuNjE1IDkuNDMzVjE2bC4wMjMtLjAxNi4wMjMuMDE2di0uMDMyYy42NS0uNDUgNy43OTUtNS41MiA1LjYxNS05LjQzMy0uNTctMS4wMjMtMS4zNDctMS4yOTgtMi4wMDktMS40NjMtMS44NTMtLjQ2My0zLjQyIDEuNDU3LTMuNjI5IDEuNzI1eiIgZmlsbD0iIzFEQzQwMCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+\"},998:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHRpdGxlPkNBQ0Y5MUY0LTc2RUItNDFENS1CRjZELTdCNTBGNUY4NjUwNTwvdGl0bGU+PGRlZnM+PHJlY3QgaWQ9ImEiIHk9IjU0IiB3aWR0aD0iNjAiIGhlaWdodD0iMjUiIHJ4PSIxIi8+PG1hc2sgaWQ9ImIiIHg9IjAiIHk9IjAiIHdpZHRoPSI2MCIgaGVpZ2h0PSIyNSIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTkgLTU2KSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIHN0cm9rZT0iI0VERUVFRiIgbWFzaz0idXJsKCNiKSIgc3Ryb2tlLXdpZHRoPSIyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGQ9Ik0xOS4wNSA2Mi43OTdjLS4yMDgtLjI2OC0xLjc3Ni0yLjE4OC0zLjYyOS0xLjcyNS0uNjYyLjE2NS0xLjQzOS40NC0yLjAwOSAxLjQ2My0yLjE4IDMuOTEzIDQuOTY1IDguOTgzIDUuNjE1IDkuNDMzVjcybC4wMjMtLjAxNi4wMjMuMDE2di0uMDMyYy42NS0uNDUgNy43OTUtNS41MiA1LjYxNS05LjQzMy0uNTctMS4wMjMtMS4zNDctMS4yOTgtMi4wMDktMS40NjMtMS44NTMtLjQ2My0zLjQyIDEuNDU3LTMuNjI5IDEuNzI1eiIgZmlsbD0iI0IyQkFDMiIvPjwvZz48L3N2Zz4=\"},999:function(t,e){t.exports=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHRpdGxlPjc1MzFEREU0LTZCMzgtNDI4Ny04QTJBLUY2ODVGMDgzNUFGQzwvdGl0bGU+PGRlZnM+PHJlY3QgaWQ9ImEiIHg9IjU5IiB5PSI1NCIgd2lkdGg9IjU0IiBoZWlnaHQ9IjI1IiByeD0iMSIvPjxtYXNrIGlkPSJiIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTQiIGhlaWdodD0iMjUiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02OCAtNTYpIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik03MiA2MXY4LjAzOGg0LjQ0NEw4MS4xMTEgNzJ2LTIuOTYySDg0VjYxeiIvPjx1c2Ugc3Ryb2tlPSIjRURFRUVGIiBtYXNrPSJ1cmwoI2IpIiBzdHJva2Utd2lkdGg9IjIiIHhsaW5rOmhyZWY9IiNhIi8+PC9nPjwvc3ZnPg==\"}});","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vendor.722411bdbc3e0728649f","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vendor.722411bdbc3e0728649f/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/vendor.722411bdbc3e0728649f/","excerpt":"","text":"webpackJsonp([49],[function(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(201),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n1?_(n):n;for(var r=_(arguments,1),o=0,i=n.length;oparseInt(this.max)&&Be(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Do={KeepAlive:No};!function(t){var e={};e.get=function(){return Sr},Object.defineProperty(t,\"config\",e),t.util={warn:zr,extend:b,mergeOptions:X,defineReactive:$},t.set=F,t.delete=B,t.nextTick=at,t.options=Object.create(null),Or.forEach(function(e){t.options[e+\"s\"]=Object.create(null)}),t.options._base=t,b(t.options.components,Do),je(t),Pe(t),Le(t),De(t)}(Me),Object.defineProperty(Me.prototype,\"$isServer\",{get:qr}),Object.defineProperty(Me.prototype,\"$ssrContext\",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Me.version=\"2.5.13\";var Ro,$o,Fo=d(\"style,class\"),Bo=d(\"input,textarea,option,select,progress\"),Uo=function(t,e,n){return\"value\"===n&&Bo(t)&&\"button\"!==e||\"selected\"===n&&\"option\"===t||\"checked\"===n&&\"input\"===t||\"muted\"===n&&\"video\"===t},Ho=d(\"contenteditable,draggable,spellcheck\"),qo=d(\"allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible\"),Vo=\"http://www.w3.org/1999/xlink\",Wo=function(t){return\":\"===t.charAt(5)&&\"xlink\"===t.slice(0,5)},zo=function(t){return Wo(t)?t.slice(6,t.length):\"\"},Yo=function(t){return null==t||!1===t},Go={svg:\"http://www.w3.org/2000/svg\",math:\"http://www.w3.org/1998/Math/MathML\"},Xo=d(\"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot\"),Jo=d(\"svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view\",!0),Ko=function(t){return Xo(t)||Jo(t)},Qo=Object.create(null),Zo=d(\"text,number,password,search,email,tel,url\"),ti=Object.freeze({createElement:Ke,createElementNS:Qe,createTextNode:Ze,createComment:tn,insertBefore:en,removeChild:nn,appendChild:rn,parentNode:on,nextSibling:an,tagName:sn,setTextContent:un,setAttribute:cn}),ei={create:function(t,e){fn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(fn(t,!0),fn(e))},destroy:function(t){fn(t,!0)}},ni=new Jr(\"\",{},[]),ri=[\"create\",\"activate\",\"update\",\"remove\",\"destroy\"],oi={create:dn,update:dn,destroy:function(t){dn(t,ni)}},ii=Object.create(null),ai=[ei,oi],si={create:_n,update:_n},ui={create:wn,update:wn},ci=\"__r\",fi=\"__c\",li={create:Sn,update:Sn},pi={create:An,update:An},hi=y(function(t){var e={},n=/;(? >>12,r[2]=128|(4032&o)>>>6,r[3]=128|63&o):o>2048?(r[0]=224|(61440&o)>>>12,r[1]=128|(4032&o)>>>6,r[2]=128|63&o):o>128?(r[0]=192|(1984&o)>>>6,r[1]=128|63&o):r[0]=o,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function o(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(t,e){if(void 0==t.length)throw new Error(t.length+\"/\"+e);for(var n=0;n0&&this.options.height>0))throw new Error(\"Expected 'width' or 'height' value to be higher than zero!\");var r=this.options.content,i=function(t,n){for(var r=e(t),o=1,i=0,a=0,s=v.length;a","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.21a24afb74711b1d2a48","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.21a24afb74711b1d2a48/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.21a24afb74711b1d2a48/","excerpt":"","text":"webpackJsonp([48],[,,function(e,t,n){\"use strict\";function i(){return new l.a(d.a)}function r(e){return e instanceof Array&&(e=e.reduce(function(e,t){return c()(e,u()({},t,t))},{})),function(t){Object.defineProperty(t,\"__dependsOn\",{enumerable:!1,writable:!1,configurable:!1,value:e})}}function o(e){return function(t){Object.defineProperty(t,\"__wraps\",{enumerable:!1,writable:!1,configurable:!1,value:e})}}t.a=i,t.b=r,t.c=o;var a=n(6),u=n.n(a),s=n(3),c=n.n(s),l=n(674),d=n(675)},,,,,function(e,t,n){\"use strict\";function i(e){function t(){return p()({},{pageSize:g.c,page:1,total:0,pointer:null,lastPointer:null,list:[],loading:!1,error:null,canPrev:!0,canNext:!0,linkList:[],lastFetchOnServer:!1,actionType:{UPDATE:z,FETCH:O,FORCE_FETCH:_,FETCH_MORE:R,RESET:x}},b(d))}function n(e,t){var n=e.commit,r=e.state,o=Date.now();return U=o,n(P,p()(t,{loading:!0,error:null})),j(t).then(function(e){var a=w(e,t);if(U===o){var u=r.list.length,s=r.list.concat(a.list),c=i(p()({canPrev:A(t,a.list,\"prev\"),canNext:A(t,a.list,\"next\"),lastPointer:r.pointer,loading:!1,lastFetchOnServer:m.a},a,{list:s}));c.list.length===u&&(c.canNext=!1),n(P,c),k(a.list)}}).catch(function(e){return n(P,{loading:!1,canNext:!1,error:e}),l.a.reject(e)})}function i(e){return\"function\"==typeof N?N(e):\"unique\"===N?s(e):e}var u,c,d=e.name,h=e.model,y=e.uniqueKeyList,I=void 0===y?[]:y,M=e.initStateGetter,b=void 0===M?function(){return{}}:M,E=e.fetchStateNormalizer,C=void 0===E?function(){}:E,T=e.navigationChecker,A=void 0===T?function(){return!1}:T,S=e.linkUrlGetter,j=e.queryExecuter,L=e.resultResolver,w=void 0===L?function(e){return{list:e}}:L,D=e.afterClientFetch,k=void 0===D?function(){}:D,N=e.postProcessor,O=d+\"/FETCH\",_=d+\"/FORCE_FETCH\",R=d+\"/FETCH_MORE\",x=d+\"/RESET\",z=d+\"/UPDATE\",P=d+\"/UPDATE_STATE\",U=0;return{state:t(),mutations:(u={},f()(u,P,function(e,t){p()(e,t),e.linkList=r(e,S)}),f()(u,v.ENTITY_UPDATED,function(e,t){if(h&&h===t.model&&t.data){var n=e.list.filter(function(e){return e.id===t.data.id})[0];n&&p()(n,t.data)}}),f()(u,v.ENTITY_DELETED,function(e,t){h&&h===t.model&&t.data&&(e.list=e.list.filter(function(e){return e.id!==t.data.id}))}),u),actions:(c={},f()(c,O,function(e){var t=e.commit,i=e.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=p()({},i,r,{list:[],page:r.page||1,pointer:r.pointer});if(C(a,i),o(i,a,I))return n({commit:t,state:i},a);!i.lastFetchOnServer||i.loading||m.a||k(i.list)}),f()(c,_,function(e){var t=e.commit,i=e.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=p()({},i,r,{list:[],page:r.page||1,pointer:r.pointer});return C(o,i),n({commit:t,state:i},o)}),f()(c,R,function(e){var t=e.commit,i=e.state,r=p()({},i,{page:i.page+1});if(a(i,r,I))return n({commit:t,state:i},r);!i.lastFetchOnServer||i.loading||m.a||k(i.list)}),f()(c,x,function(e){var n=e.commit;e.state;n(P,t())}),f()(c,z,function(e,t){(0,e.commit)(P,t)}),c)}}function r(e,t){var n=[];return t&&(e.canPrev&&n.push({rel:\"prev\",href:t(e,\"prev\")}),e.canNext&&n.push({rel:\"next\",href:t(e,\"next\")})),n}function o(e,t,n){return!e.list.length||!u(e,t,n)}function a(e,t,n){return!e.loading&&e.canNext&&e.list.length}function u(e,t,n){return!(!n||!n.length)&&n.reduce(function(n,i){return!!n&&(\"pointer\"===i?e.lastPointer==t.pointer:Array.isArray(e[i])&&Array.isArray(t[i])?e[i].length===t[i].length&&e[i].reduce(function(e,n,r){return e&&n==t[i][r]},!0):e[i]==t[i])},!0)}function s(e){return e.list=Object(y.c)(e.list,function(e){return e&&e.id}),e}t.a=i;var c=n(5),l=n.n(c),d=n(6),f=n.n(d),h=n(3),p=n.n(h),g=n(24),m=n(31),v=n(10),y=n(75)},,function(e,t,n){\"use strict\";var i=n(805),r=n.n(i),o=n(113),a=n.n(o),u=r()(a.a);u.use(function(e){return e.timeout(2e4)}),t.a=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"USER\",function(){return i}),n.d(t,\"AUTHORIZE\",function(){return r}),n.d(t,\"FETCH_CURRENT_USER\",function(){return o}),n.d(t,\"LOGIN\",function(){return a}),n.d(t,\"LOGOUT\",function(){return u}),n.d(t,\"LOGINED\",function(){return s}),n.d(t,\"REGISTER_WITH_PHONE\",function(){return c}),n.d(t,\"VISIBLE_AUTH_FORM\",function(){return l}),n.d(t,\"UPDATE_PASSWORD\",function(){return d}),n.d(t,\"ROUTE_CHANGED\",function(){return f}),n.d(t,\"ENTITY_CREATED\",function(){return h}),n.d(t,\"ENTITY_UPDATED\",function(){return p}),n.d(t,\"ENTITY_DELETED\",function(){return g}),n.d(t,\"SUBSCRIBE_TAG\",function(){return m}),n.d(t,\"UNSUBSCRIBE_TAG\",function(){return v}),n.d(t,\"TOGGLE_SUBSCRIBE_TAG\",function(){return y}),n.d(t,\"FOLLOW_COLLECTION\",function(){return I}),n.d(t,\"UNFOLLOW_COLLECTION\",function(){return M}),n.d(t,\"TOGGLE_FOLLOW_COLLECTION\",function(){return b}),n.d(t,\"LIKE_ENTRY\",function(){return E}),n.d(t,\"UNLIKE_ENTRY\",function(){return C}),n.d(t,\"TOGGLE_LIKE_ENTRY\",function(){return T}),n.d(t,\"TOGGLE_HOT_ENTRY\",function(){return A}),n.d(t,\"COLLECT_ENTRY\",function(){return S}),n.d(t,\"UNCOLLECT_ENTRY\",function(){return j}),n.d(t,\"TOGGLE_COLLECT_ENTRY\",function(){return L}),n.d(t,\"LIKE_COMMENT\",function(){return w}),n.d(t,\"UNLIKE_COMMENT\",function(){return D}),n.d(t,\"TOGGLE_LIKE_COMMENT\",function(){return k}),n.d(t,\"SUBMIT_COMMENT\",function(){return N}),n.d(t,\"REPLY_COMMENT\",function(){return O}),n.d(t,\"DELETE_COMMENT\",function(){return _}),n.d(t,\"LIKE_BOOK_COMMENT\",function(){return R}),n.d(t,\"UNLIKE_BOOK_COMMENT\",function(){return x}),n.d(t,\"TOGGLE_LIKE_BOOK_COMMENT\",function(){return z}),n.d(t,\"SUBMIT_BOOK_COMMENT\",function(){return P}),n.d(t,\"REPLY_BOOK_COMMENT\",function(){return U}),n.d(t,\"LIKE_REPO_COMMENT\",function(){return B}),n.d(t,\"UNLIKE_REPO_COMMENT\",function(){return H}),n.d(t,\"TOGGLE_LIKE_REPO_COMMENT\",function(){return G}),n.d(t,\"SUBMIT_REPO_COMMENT\",function(){return F}),n.d(t,\"REPLY_REPO_COMMENT\",function(){return Y}),n.d(t,\"ADD_ENTRY\",function(){return Q}),n.d(t,\"UPDATE_ENTRY\",function(){return Z}),n.d(t,\"DELETE_ENTRY\",function(){return W}),n.d(t,\"FOLLOW_USER\",function(){return q}),n.d(t,\"UNFOLLOW_USER\",function(){return V}),n.d(t,\"TOGGLE_FOLLOW_USER\",function(){return $}),n.d(t,\"TOGGLE_VISIBLE\",function(){return X}),n.d(t,\"FOLLOW_TOPIC\",function(){return K}),n.d(t,\"UNFOLLOW_TOPIC\",function(){return J}),n.d(t,\"TOGGLE_FOLLOW_TOPIC\",function(){return ee}),n.d(t,\"UPDATE_USER_AVATAR\",function(){return te}),n.d(t,\"UPDATE_USER_INFO\",function(){return ne}),n.d(t,\"UNREAD_NOTIFICATION_COUNT\",function(){return ie}),n.d(t,\"FETCH_UNREAD_NOTIFICATION_COUNT\",function(){return re}),n.d(t,\"RESET_UNREAD_NOTIFICATION_COUNT\",function(){return oe}),n.d(t,\"READ_USER_NOTIFICATION\",function(){return ae}),n.d(t,\"FETCH_WALLET_STATE\",function(){return ue}),n.d(t,\"HAS_WALLET\",function(){return se}),n.d(t,\"CATEGORY_LIST\",function(){return ce}),n.d(t,\"SET_CATEGORY_LIST\",function(){return le}),n.d(t,\"ERROR_VIEW\",function(){return de}),n.d(t,\"STATUS_CODE\",function(){return fe}),n.d(t,\"SET_STATUS_CODE\",function(){return he}),n.d(t,\"SHOW_NOT_FOUND_VIEW\",function(){return pe}),n.d(t,\"SHOW_ERROR_VIEW\",function(){return ge}),n.d(t,\"RESET_ERROR_STATE\",function(){return me}),n.d(t,\"MOVED_PERMANENTLY\",function(){return ve}),n.d(t,\"MOVED_TEMPORARILY\",function(){return ye}),n.d(t,\"AB_TEST_INFO\",function(){return Ie}),n.d(t,\"SET_AB_TEST_INFO\",function(){return Me}),n.d(t,\"NEED_SUSPENSION\",function(){return be}),n.d(t,\"CHANGE_SUSPENSION_PANEL\",function(){return Ee}),n.d(t,\"LIKE_PIN\",function(){return Ce}),n.d(t,\"UNLIKE_PIN\",function(){return Te}),n.d(t,\"TOGGLE_LIKE_PIN\",function(){return Ae}),n.d(t,\"TOGGLE_DELETE_PIN_DIALOG\",function(){return Se}),n.d(t,\"TOGGLE_REPORT_PIN_DIALOG\",function(){return je}),n.d(t,\"SET_TARGET_PIN\",function(){return Le}),n.d(t,\"UPDATE_BROWSING_PIN\",function(){return we}),n.d(t,\"LIKE_PIN_COMMENT\",function(){return De}),n.d(t,\"UNLIKE_PIN_COMMENT\",function(){return ke}),n.d(t,\"TOGGLE_LIKE_PIN_COMMENT\",function(){return Ne}),n.d(t,\"SUBMIT_PIN_COMMENT\",function(){return Oe}),n.d(t,\"REPLY_PIN_COMMENT\",function(){return _e});var i=\"USER\",r=\"AUTHORIZE\",o=\"FETCH_CURRENT_USER\",a=\"LOGIN\",u=\"LOGOUT\",s=\"LOGINED\",c=\"REGISTER_WITH_PHONE\",l=\"VISIBLE_AUTH_FORM\",d=\"UPDATE_PASSWORD\",f=\"route/ROUTE_CHANGED\",h=\"ENTITY_CREATED\",p=\"ENTITY_UPDATED\",g=\"ENTITY_DELETED\",m=\"SUBSCRIBE_TAG\",v=\"UNSUBSCRIBE_TAG\",y=\"TOGGLE_SUBSCRIBE_TAG\",I=\"FOLLOW_COLLECTION\",M=\"UNFOLLOW_COLLECTION\",b=\"TOGGLE_FOLLOW_COLLECTION\",E=\"LIKE_ENTRY\",C=\"UNLIKE_ENTRY\",T=\"TOGGLE_LIKE_ENTRY\",A=\"TOGGLE_HOT_ENTRY\",S=\"COLLECT_ENTRY\",j=\"UNCOLLECT_ENTRY\",L=\"TOGGLE_COLLECT_ENTRY\",w=\"LIKE_COMMENT\",D=\"UNLIKE_COMMENT\",k=\"TOGGLE_LIKE_COMMENT\",N=\"SUBMIT_COMMENT\",O=\"REPLY_COMMENT\",_=\"DELETE_COMMENT\",R=\"LIKE_BOOK_COMMENT\",x=\"UNLIKE_BOOK_COMMENT\",z=\"TOGGLE_LIKE_BOOK_COMMENT\",P=\"SUBMIT_BOOK_COMMENT\",U=\"REPLY_BOOK_COMMENT\",B=\"LIKE_REPO_COMMENT\",H=\"UNLIKE_REPO_COMMENT\",G=\"TOGGLE_LIKE_REPO_COMMENT\",F=\"SUBMIT_REPO_COMMENT\",Y=\"REPLY_REPO_COMMENT\",Q=\"ADD_ENTRY\",Z=\"UPDATE_ENTRY\",W=\"DELETE_ENTRY\",q=\"FOLLOW_USER\",V=\"UNFOLLOW_USER\",$=\"TOGGLE_FOLLOW_USER\",X=\"TOGGLE_VISIBLE\",K=\"FOLLOW_TOPIC\",J=\"UNFOLLOW_TOPIC\",ee=\"TOGGLE_FOLLOW_TOPIC\",te=\"UPDATE_USER_AVATAR\",ne=\"UPDATE_USER_INFO\",ie=\"UNREAD_NOTIFICATION_COUNT\",re=\"FETCH_UNREAD_NOTIFICATION_COUNT\",oe=\"RESET_UNREAD_NOTIFICATION_COUNT\",ae=\"READ_USER_NOTIFICATION\",ue=\"FETCH_WALLET_STATE\",se=\"HAS_WALLET\",ce=\"CATEGORY_LIST\",le=\"SET_CATEGORY_LIST\",de=\"ERROR_VIEW\",fe=\"STATUS_CODE\",he=\"SET_STATUS_CODE\",pe=\"SHOW_NOT_FOUND_VIEW\",ge=\"SHOW_ERROR_VIEW\",me=\"RESET_ERROR_STATE\",ve=\"MOVED_PERMANENTLY\",ye=\"MOVED_TEMPORARILY\",Ie=\"AB_TEST_INFO\",Me=\"SET_AB_TEST_INFO\",be=\"NEED_SUSPENSION\",Ee=\"CHANGE_SUSPENSION_PANEL\",Ce=\"LIKE_PIN\",Te=\"UNLIKE_PIN\",Ae=\"TOGGLE_LIKE_PIN\",Se=\"TOGGLE_DELETE_PIN_DIALOG\",je=\"TOGGLE_REPORT_PIN_DIALOG\",Le=\"SET_TARGET_PIN\",we=\"UPDATE_BROWSING_PIN\",De=\"LIKE_PIN_COMMENT\",ke=\"UNLIKE_PIN_COMMENT\",Ne=\"TOGGLE_LIKE_PIN_COMMENT\",Oe=\"SUBMIT_PIN_COMMENT\",_e=\"REPLY_PIN_COMMENT\"},function(e,t,n){\"use strict\";function i(e,t,n,i,r){return e._constraintList.push({type:t,key:n,value:i,option:r}),e}n.d(t,\"a\",function(){return s});var r=n(0),o=n.n(r),a=n(1),u=n.n(a),s=function(){function e(){o()(this,e),this._constraintList=[],this._selectKeyList=[],this._includeKeyList=[],this._page=1,this._pageSize=null,this._sort=null,this._pointer=null}return u()(e,[{key:\"select\",value:function(e){return this._selectKeyList=this._selectKeyList.concat(e instanceof Array?e:[e]),this}},{key:\"include\",value:function(e){return this._includeKeyList=this._includeKeyList.concat(e instanceof Array?e:[e]),this}},{key:\"page\",value:function(e){return this._page=e,this}},{key:\"getPage\",value:function(){return this._page}},{key:\"pageSize\",value:function(e){return this._pageSize=e,this}},{key:\"getPageSize\",value:function(){return this._pageSize}},{key:\"sort\",value:function(e){return this._sort=e,this}},{key:\"getSort\",value:function(){return this._sort}},{key:\"pointer\",value:function(e){return this._pointer=e,this}},{key:\"getPointer\",value:function(){return this._pointer}},{key:\"ascending\",value:function(e){return i(this,\"ascending\",e)}},{key:\"addAscending\",value:function(e){return i(this,\"addAscending\",e)}},{key:\"descending\",value:function(e){return i(this,\"descending\",e)}},{key:\"addDescending\",value:function(e){return i(this,\"addDescending\",e)}},{key:\"equalTo\",value:function(e,t){return i(this,\"equalTo\",e,t)}},{key:\"notEqualTo\",value:function(e,t){return i(this,\"notEqualTo\",e,t)}},{key:\"lessThan\",value:function(e,t){return i(this,\"lessThan\",e,t)}},{key:\"lessThanOrEqualTo\",value:function(e,t){return i(this,\"lessThanOrEqualTo\",e,t)}},{key:\"greaterThan\",value:function(e,t){return i(this,\"greaterThan\",e,t)}},{key:\"greaterThanOrEqualTo\",value:function(e,t){return i(this,\"greaterThanOrEqualTo\",e,t)}},{key:\"containedIn\",value:function(e,t){return i(this,\"containedIn\",e,t)}},{key:\"matches\",value:function(e,t,n){return i(this,\"matches\",e,t,n)}},{key:\"getEqualConstraintValue\",value:function(e){return(this._constraintList.filter(function(t){return\"equalTo\"===t.type&&t.key===e})[0]||{}).value}},{key:\"applyAVQuery\",value:function(e){return this._pageSize&&(e.skip((this._page-1)*this._pageSize),e.limit(this._pageSize)),this._selectKeyList.length&&e.select(this._selectKeyList),this._includeKeyList.forEach(function(t){e.include(t)}),this._constraintList.forEach(function(t){var n=t.type,i=t.key,r=t.value,o=t.option;e[n](i,r,o)}),e}}]),e}()},,function(e,t,n){\"use strict\";function i(e){return p()(s(\"Moved Permanently\",301),{location:e})}function r(e){return s(e||\"Bad Request\",400)}function o(e){return s(e||\"Unauthorized\",401)}function a(e){return s(e||\"Forbidden\",403)}function u(e){return s(e||\"Not Found\",404)}function s(e,t,n){return n=n||new Error(e||\"Error\"),n.normalizedCode=t||500,n}function c(e,t){return function(n){return l(n,t)?(console.log(\"[ignorable error]\",n),e):f.a.reject(n)}}function l(e,t){return!t||(\"function\"==typeof t?t(e):-1!==t.indexOf((e||{}).normalizedCode))}t.d=i,t.a=r,t.g=o,t.b=a,t.f=u,t.e=s,t.c=c;var d=n(5),f=n.n(d),h=n(3),p=n.n(h)},,,,,function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return o});var i=n(0),r=n.n(i),o=function e(){r()(this,e)}},function(e,t,n){\"use strict\";function i(e){return e&&e.replace(/^http:/i,\"https:\")}n.d(t,\"a\",function(){return y});var r=n(3),o=n.n(r),a=n(15),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(16),h=n.n(f),p=n(17),g=n.n(p),m=n(18),v=n(20),y=function(e){function t(){return c()(this,t),h()(this,(t.__proto__||u()(t)).apply(this,arguments))}return g()(t,e),d()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?o()(new t,{id:e.objectId,self_description:e.selfDescription,followed:e.isFollow||e.currentUserFollowed,community:e.authData,followerCount:e.followersCount||0,followingCount:e.followeesCount||0,beLikedCount:e.totalCollectionsCount||0,beReadCount:e.totalViewsCount||0,collectionCount:e.collectionSetCount||0,subscribedTagCount:e.subscribedTagsCount||0,wroteBookCount:e.bookletCount||0,boughtBookCount:e.purchasedBookletCount||0},e,{avatar:i(e.avatar||e.avatar_large||e.avatarLarge),latestLoginedInAt:Object(v.b)(e.latestLoginedInAt),createdAt:Object(v.b)(e.createdAt),updatedAt:Object(v.b)(e.updatedAt)}):null}}]),t}(m.a)},function(e,t,n){\"use strict\";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=Date.now()-new Date(e),i=Math.abs(n),r=n1&&void 0!==arguments[1]?arguments[1]:\"\";return e?c.a.format(e,t):\"\"}function o(e){if(!e)return null;var t=new Date(e);return t.setTime(t.getTime()||0),t}t.c=i,t.a=r,t.b=o;var a=n(165),u=n.n(a),s=n(212),c=n.n(s),l=[{title:\"年\",msCount:31536e6},{title:\"月\",msCount:2592e6},{title:\"天\",msCount:864e5},{title:\"小时\",msCount:36e5},{title:\"分钟\",msCount:6e4},{title:\"秒\",msCount:1e3}],d=\"刚刚\"},,,,function(e,t,n){\"use strict\";n.d(t,\"c\",function(){return i}),n.d(t,\"d\",function(){return r}),n.d(t,\"g\",function(){return o}),n.d(t,\"b\",function(){return a}),n.d(t,\"e\",function(){return u}),n.d(t,\"a\",function(){return s}),n.d(t,\"f\",function(){return c});var i=20,r=20,o=40,a=30,u=20,s=20,c=10},,,,function(e,t,n){\"use strict\";function i(e){var t=e.dispatch;return function(e){return 404===e.normalizedCode&&t(u.SHOW_NOT_FOUND_VIEW),a.a.reject(e)}}function r(e){var t=e.dispatch;return function(e){return t(u.MOVED_PERMANENTLY,e),a.a.reject(Object(s.d)(e))}}t.b=i,t.c=r;var o=n(5),a=n.n(o),u=n(10),s=n(13);n.d(t,\"a\",function(){return s.c})},,function(e,t,n){\"use strict\";function i(){var e=document.documentElement;return{width:Math.max(e.clientWidth,window.innerWidth||0),height:Math.max(e.clientHeight,window.innerHeight||0)}}function r(e){return i().height-e.getBoundingClientRect().bottom}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=Object(h.b)(t,n);return e.addEventListener(\"mousewheel\",i,!1),e.addEventListener(\"DOMMouseScroll\",i,!1),function(){e.removeEventListener(\"mousewheel\",i,!1),e.removeEventListener(\"DOMMouseScroll\",i,!1)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=Object(h.b)(t,n,!0);return e.addEventListener(\"scroll\",i,!1),function(){e.removeEventListener(\"scroll\",i,!1)}}function u(e,t){return a(e,function(n){var i=e.getBoundingClientRect().height,r=e.scrollHeight-e.scrollTop-i;return t(r)})}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=function(){return e===window?window.pageYOffset:e.scrollTop},r=i(),o=null;return a(e,function(e){var a=i(),u=a-r;if(Math.abs(u)>n){r=a;var s=u>0?\"down\":\"up\";if(s!==o)return o=s,t(s,a)}})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getBoundingClientRect(),i=n.top;window.scrollTo(0,window.pageYOffset+i+t)}function l(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,n,i),function(){e.removeEventListener(t,n,i)}}function d(e){e.scrollIntoView&&e.scrollIntoView()}function f(e){try{return(new window.DOMParser).parseFromString(e,\"text/html\").body}catch(n){var t=document.implementation.createHTMLDocument(\"\");return t.body.innerHTML=e,t.body}}t.c=i,t.b=r,t.f=o,t.g=a,t.h=u,t.i=s,t.k=c,t.e=l,t.j=d,t.a=f,n.d(t,\"d\",function(){return p});var h=n(96),p=function(){if(\"undefined\"==typeof window)return function(){return!1};var e=window.Element.prototype,t=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var n=this.document||this.ownerDocument,i=n.querySelectorAll(e),r=i.length;r>-1;r--)if(t.item(r)===this)return!0;return!1};return function(e,n){return t.call(e,n)}}()},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i});var i=\"server\"===Object({NODE_ENV:\"production\"}).VUE_ENV},,,,,function(e,t,n){\"use strict\";function i(){return/micromessenger/i.test(c())}function r(){return/juejin/i.test(c())}function o(){return/iPad|iPhone|iPod/.test(c())&&!u()}function a(){for(var e=c(),t=[\"Android\",\"iPhone\",\"SymbianOS\",\"Windows Phone\",\"iPad\",\"iPod\"],n=!1,i=0;i0){n=!0;break}return n}function u(){return\"undefined\"==typeof window?null:window.MSStream}function s(){var e=c();return/Baiduspider/i.test(e)||/Googlebot/i.test(e)}function c(){return\"undefined\"==typeof navigator?\"\":navigator.userAgent}t.c=i,t.b=r,t.a=o,t.d=a,t.e=s,n.d(t,\"f\",function(){return l});var l=function(){if(\"undefined\"==typeof window)return function(){return!1};var e=null;return function(){if(null!==e)return e;var t=document.createElement(\"canvas\");t.getContext(\"2d\").fillRect(0,0,1,1);var n=t.toDataURL(\"image/webp\")||\"\";return e=0===n.indexOf(\"data:image/webp;\")}}()},,,function(e,t,n){function i(e){n(439)}var r=n(8)(n(440),n(441),i,\"data-v-b2db8566\",null);e.exports=r.exports},,,,,,,,,,,function(e,t,n){\"use strict\";function i(e){return\"string\"==typeof e?E.a.fromDescriptor({id:e}):E.a.fromDescriptor(e)}function r(e){return\"string\"==typeof e?b.a.fromServerDescriptor({id:e}):b.a.fromServerDescriptor(e)}function o(e){return\"string\"==typeof e?M.a.fromDescriptor({id:e}):M.a.fromDescriptor(e)}function a(e){return e?(e+\"\").replace(/\\s+/g,\" \").trim():\"\"}n.d(t,\"a\",function(){return A});var u=n(3),s=n.n(u),c=n(15),l=n.n(c),d=n(0),f=n.n(d),h=n(1),p=n.n(h),g=n(16),m=n.n(g),v=n(17),y=n.n(v),I=n(18),M=n(155),b=n(112),E=n(19),C=n(20),T=n(156),A=function(e){function t(){return f()(this,t),m()(this,(t.__proto__||l()(t)).apply(this,arguments))}return y()(t,e),p()(t,null,[{key:\"fromDescriptor\",value:function(e){if(!e)return null;var n=Array.isArray(e.tags)?e.tags:[];return s()(new t,{id:e.objectId,screenshot:e.screenshotUrl,liked:e.isCollected},e,{user:i(e.user)||T.a,category:r(e.category),tags:n.map(o),isEvent:e.eventInfo,abstract:a(e.summaryInfo),latestCommentAt:Object(C.b)(e.lastCommentTime),createdAt:Object(C.b)(e.createdAt),updatedAt:Object(C.b)(e.updatedAt),isTopicEvent:e.isTopicEvent||!1})}}]),t}(I.a)},function(e,t,n){\"use strict\";function i(e){return g.a.reduce(function(t,n){return t||n.test(e)},!1)}function r(e){return e?m+\"?target=\"+encodeURIComponent(e):e}function o(e,t){var n=a(t);return v+\"/\"+e+(n?\"?\"+n:\"\")}function a(e){return e?f()(e).reduce(function(t,n){var i=encodeURIComponent(n),r=Array.isArray(e[n])?e[n]:[e[n]];return t.concat(r.map(function(e){return void 0===e?i:i+\"=\"+encodeURIComponent(e)}))},[]).join(\"&\"):\"\"}function u(e,t){return e&&t&&!s(e)?(0===e.indexOf(\"/\")?(t=t.replace(/^(.*?\\/\\/)?([^\\/]+).*$/,\"$1$2\"),e=e.slice(1)):t=t.replace(/\\/$/,\"\"),t+\"/\"+e):e}function s(e){return/^\\/\\/|:\\/\\//.test(e)}function c(e){return p()(e,{},!0)}function l(e){var t=(e||\"\").match(/^([\\s\\S]*?\\/\\/)?([^\\/]+)/);return t&&t[2]||\"\"}t.d=i,t.c=r,t.b=o,t.g=a,t.f=u,t.e=c,t.a=l;var d=n(25),f=n.n(d),h=n(205),p=n.n(h),g=n(462),m=\"https://link.juejin.im\",v=\"https://landing.juejin.im\"},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){\"use strict\";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n={};return e.filter(function(e){var i=t(e);return!n[i]&&(n[i]=!0,!0)})}function r(e,t){var n=[];if(e=t;r--)n.push(r);return n}function o(e,t,n){if(!(e.length2&&void 0!==arguments[2]&&arguments[2],i=0;return t/=2,function(){for(var r=arguments.length,o=Array(r),a=0;a=t&&(i=Date.now(),setTimeout(function(){e.apply(null,o)},t))}}function r(e,t){var n=0;return function(){for(var i=this,r=arguments.length,o=Array(r),a=0;a=.1})}n.d(t,\"a\",function(){return T});var u=n(25),s=n.n(u),c=n(3),l=n.n(c),d=n(15),f=n.n(d),h=n(0),p=n.n(h),g=n(1),m=n.n(g),v=n(16),y=n.n(v),I=n(17),M=n.n(I),b=n(18),E=n(630),C=n(20),T=function(e){function t(){return p()(this,t),y()(this,(t.__proto__||f()(t)).apply(this,arguments))}return M()(t,e),m()(t,null,[{key:\"fromDescriptor\",value:function(e){if(!e)return null;var n=l()(new t,{id:e.objectId,originalId:e.id,url:e.url,name:e.repoName,description:e.description,language:e.language,watchCount:+e.watchersCount||0,starCount:+e.stars||0,forkCount:+e.fork||0,readme:e.readme,translatorIdList:e.transContributor,translation:o(e),languageList:a(e),createdAt:Object(C.b)(e.createdAt),updatedAt:Object(C.b)(e.updatedAt),commitedAt:Object(C.b)(e.pushedAt),license:r(e),user:i(e)});return n.color=Object(E.b)(n),n.languageColor=Object(E.a)(e.language),n}},{key:\"blank\",value:function(){return t.fromDescriptor({})}}]),t}(b.a)},function(e,t,n){\"use strict\";function i(e){return o()(I.a).filter(function(t){return I.a[t]===e})[0]}n.d(t,\"a\",function(){return M});var r=n(25),o=n.n(r),a=n(3),u=n.n(a),s=n(15),c=n.n(s),l=n(0),d=n.n(l),f=n(1),h=n.n(f),p=n(16),g=n.n(p),m=n(17),v=n.n(m),y=n(18),I=n(116),M=function(e){function t(){return d()(this,t),g()(this,(t.__proto__||c()(t)).apply(this,arguments))}return v()(t,e),h()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?u()(new t,e):null}},{key:\"fromServerDescriptor\",value:function(e){return e?t.fromDescriptor({id:e.id,name:e.title,title:e.name,subscribed:e.isSubscribe}):null}},{key:\"fromTitle\",value:function(e){return t.fromDescriptor({name:i(e),title:e})}},{key:\"getTitlelist\",value:function(){return o()(I.a).map(function(e){return I.a[e]})}}]),t}(y.a)},,function(e,t,n){\"use strict\";function i(e,t){return r(e).then(o).then(a.bind(null,t))}function r(e){return new s.a(function(t,n){var i=new FileReader;i.onload=function(e){return t(e.target.result)},i.onerror=function(e){return n(e)},i.readAsArrayBuffer(e.slice(0,64))})}function o(e){return Array.prototype.slice.call(new Uint8Array(e)).reduce(function(e,t){return e+t.toString(16)},\"\")}function a(e,t){for(var n=0;n=1e6?+(e/1e6).toFixed(1)+\"M\":e>=1e3?+(e/1e3).toFixed(1)+\"K\":e}t.a=i},function(e,t,n){\"use strict\";t.a={android:\"Android\",frontend:\"前端\",ios:\"iOS\",backend:\"后端\",design:\"设计\",product:\"产品\",freebie:\"工具资源\",article:\"阅读\",ai:\"人工智能\",devops:\"运维\"}},function(e,t){function n(e){return i(e.indexOf(String.fromCharCode(8205))3&&void 0!==arguments[3]?arguments[3]:{},r=i.quality,a=void 0===r?s:r,u=i.format;return o(e,1,t,n,a,void 0===u?c:u)}function r(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.quality,a=void 0===r?s:r,u=i.format;return o(e,2,t,n,a,void 0===u?c:u)}function o(e,t,n,i,r,o){var u=\"?imageView2/\"+t+(n?\"/w/\"+n:\"\")+(i?\"/h/\"+i:\"\")+(r?\"/q/\"+r:\"\")+(o?\"/format/\"+o:\"\")+\"/interlace/1\";return Object(a.d)(e)&&!/\\.svg|f=svg/i.test(e)?e.replace(/\\?.*$/,\"\")+u:e}t.a=i,t.b=r;var a=n(51),u=n(36),s=85,c=Object(u.f)()?\"webp\":\"\"},,function(e,t,n){\"use strict\";function i(e,t){return e=e||\"\",e.length>t?e.slice(0,t-1)+\"…\":e}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40;e=e||\"\";for(var i=0,r=0,o=0;o[\\s\\S]*?/gim,\"\").replace(/]*>[\\s\\S]*?/gim,\"\").replace(//gim,\"\").replace(//gi,\"\").replace(/(?:\\n|\\r\\n|\\r|&nbsp;)/gi,\" \").replace(//gi,\"\").replace(/(||)/gi,\"\\n\").replace(/&nbsp;/gi,\"\").replace(//gi,\"\").replace(/&lt;/gi,\"\").replace(/&#39;/gi,\"'\").replace(/&quot;/g,'\"')}t.b=i,t.c=r,t.a=o},,function(e,t,n){\"use strict\";function i(e){return a.a.test(e)}function r(e){return a.b.test(e)}function o(e){return(e||\"\").replace(/[_-](\\w)/g,function(e,t){return t.toUpperCase()})}t.a=i,t.b=r,t.c=o;var a=n(76)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function i(e){n(351)}var r=n(8)(n(352),n(353),i,\"data-v-29c9a1c5\",null);e.exports=r.exports},,,,,,,,,,,function(e,t,n){\"use strict\"},function(e,t,n){\"use strict\";function i(e){return new o.a(function(t,n){var i=new window.Image;i.onload=function(){return t({width:i.naturalWidth,height:i.naturalHeight,url:e})},i.onerror=function(){return n()},i.src=e})}t.a=i;var r=n(5),o=n.n(r)},,,function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCIgdmlld0JveD0iMCAwIDM2IDM2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kZWZhdWx0X2dyYXZhdGFyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImRlZmF1bHRfZ3JhdmF0YXIiIHNrZXRjaDp0eXBlPSJNU0FydGJvYXJkR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTIxMC0rLUltcG9ydGVkLUxheWVycy1Db3B5LUNvcHkiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0yMTAiIGZpbGw9IiNEOEQ4RDgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHg9IjAiIHk9IjAiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTI3Ljg2OTAzMjEsMjYuODUzNjU2OCBMOCwyNi44NTM2NTY4IEM4LDI1Ljg0OTQ1MTQgOC40NzE4MjUsMjQuMTEwOTQ2NiAxMS41MTg5MDQ1LDIyLjM4ODMxNzYgQzEyLjE1Nzg5NiwyMi4wMjcxMjEzIDE1LjM0Mzk1MTIsMjAuMDk2MTA5OCAxNS42MTU5Njc3LDE5LjYzNzE3MjEgQzE1LjkyNDU4MjgsMTkuMTE3MjA4MSAxNi4wMTA2Mzg5LDE4LjQ3NjE4MzcgMTUuNDIwMTE1OCwxNy41MzI1MDg1IEMxNS4zNzI2MzY2LDE3LjQ1NjEwMTYgMTQuNDM0OTIxNSwxNi4wMDgzMzkxIDE0LjE0NTEwMDMsMTUuMDMwNDI5NyBDMTMuOTQwMzQ2LDE0LjMzODMwMiAxMy45MTc1OTU1LDEzLjU0NTQ1NjEgMTMuOTE3NTk1NSwxMi43MTM0MTQ0IEMxMy45MTc1OTU1LDkuODM2MjQ3MDIgMTUuNzIyMzAxNCw4IDE3Ljk0ODM4NTYsOCBDMjAuMTc0NDY5OSw4IDIxLjk3OTE3NTgsOS44MzYyNDcwMiAyMS45NzkxNzU4LDEyLjcxMzQxNDQgQzIxLjk3OTE3NTgsMTMuMzk5MDkyMiAyMS45NjYzMTY4LDE0LjA1NTk5MzMgMjEuODQ3MTI0MSwxNC42NTM4NTI3IEMyMS42Mzk4OTcsMTUuNjkwMzA3NyAyMC43NzU4NzM2LDE3LjAwNTU5ODQgMjAuNTg4NDI5NSwxNy4zMzA1NzU5IEMyMC41NDM5MTc3LDE3LjQwNzQ3OSAyMC41MDc4MTM3LDE3LjQ2NzUxMyAyMC40ODUwNjMzLDE3LjUwMTI1MTEgQzIwLjA3OTAxNjgsMTguMTA3MDQ4OSAxOS45NjI3OTE2LDE4LjU1MzU4MjkgMjAuMDAwODczOSwxOC45MTUyNzU1IEMyMC4wNDQzOTY1LDE5LjMyODU2NzUgMjAuMzEzOTQwMSwxOS42MTYzMzM4IDIwLjY2NzA2NywxOS44NTQ0ODUzIEMyMS4wMzQ1MzY2LDIwLjEwMjA2MzYgMjQuMDExODgxLDIyLjE0OTY3IDI0LjM3Nzg2NjgsMjIuMzg4MzE3NiBDMjYuODcxNTE2MywyNC4wMTY2NzgzIDI3Ljg2OTAzMjEsMjUuNjA2MzM4NSAyNy44NjkwMzIxLDI2Ljg1MzY1NjggTDI3Ljg2OTAzMjEsMjYuODUzNjU2OCBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},,,,,,,,,,,function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return v});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(20),v=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.objectId},e,{startedAt:Object(m.b)(e.startedAt),endedAt:Object(m.b)(e.endedAt),createdAt:Object(m.b)(e.createdAt),updatedAt:Object(m.b)(e.updatedAt)}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return v});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(20),v=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.entryViewId},e,{createdAt:Object(m.b)(e.createdAt),updatedAt:Object(m.b)(e.updatedAt)}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return I});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(19),v=n(220),y=n(20),I=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.objectId,liked:e.isLiked},e,{user:m.a.fromDescriptor(e.user),topic:v.a.fromDescriptor(e.topic),content:(e.content||\"\").trim(),imageUrlList:e.pictures||[],commentCount:+e.commentCount||0,likeCount:+e.likedCount||0,createdAt:Object(y.b)(e.createdAt),updatedAt:Object(y.b)(e.updatedAt)}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return y});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(19),v=n(20),y=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.objectId},e,{user:m.a.fromDescriptor(e.user),title:(e.title||\"\").trim(),description:(e.description||\"\").trim(),icon:e.icon,followersCount:e.followersCount||0,attendersCount:e.attendersCount||0,createdAt:Object(v.b)(e.createdAt),updatedAt:Object(v.b)(e.updatedAt),followed:e.followed||!1}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";function i(e){return A.a.fromDescriptor(h()(e,{followed:e.isFollowerFollowed}))}function r(e){return L.a.fromDescriptor(c(e.comment)||c(e.repoComment))}function o(e){return L.a.fromDescriptor(c(e.reply)||c(e.repoReply))}function a(e){return S.a.fromDescriptor(c(e.repo))}function u(e){return j.a.fromDescriptor(c(e.entry))||w.a}function s(e){return j.a.fromDescriptor(c(e.submitEntry))||w.a}function c(e){return e&&d()(e).length?e:null}n.d(t,\"a\",function(){return k});var l=n(25),d=n.n(l),f=n(3),h=n.n(f),p=n(15),g=n.n(p),m=n(0),v=n.n(m),y=n(1),I=n.n(y),M=n(16),b=n.n(M),E=n(17),C=n.n(E),T=n(18),A=n(19),S=n(111),j=n(50),L=n(92),w=n(846),D=n(20),k=function(e){function t(){return v()(this,t),b()(this,(t.__proto__||g()(t)).apply(this,arguments))}return C()(t,e),I()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?h()(new t,{id:e.objectId},e,{userList:e.users.map(i),comment:r(e),repo:a(e),entry:u(e),reply:o(e),submitEntry:s(e),createdAt:Object(D.b)(e.updatedAtString),updatedAt:Object(D.b)(e.updatedAtString)}):null}}]),t}(T.a)},function(e,t,n){function i(e){n(671)}var r=n(8)(n(672),n(673),i,\"data-v-1b9df826\",null);e.exports=r.exports},function(e,t,n){\"use strict\";function i(){return new l}t.a=i;var r=n(5),o=n.n(r),a=n(0),u=n.n(a),s=n(1),c=n.n(s),l=function(){function e(){u()(this,e),this.busy=!1}return c()(e,[{key:\"do\",value:function(e){var t=this;return this.busy?o.a.resolve():(this.busy=!0,o.a.resolve(\"function\"==typeof e?e():e).then(function(e){return t.busy=!1,e}).catch(function(e){return t.busy=!1,o.a.reject(e)}))}}]),e}()},,function(e,t,n){\"use strict\";n.d(t,\"f\",function(){return i}),n.d(t,\"a\",function(){return r}),n.d(t,\"c\",function(){return o}),n.d(t,\"d\",function(){return a}),n.d(t,\"e\",function(){return u}),n.d(t,\"b\",function(){return s});var i=\"https://chrome.google.com/webstore/detail/gold/kcbndpepjkbeijkebhfjgkanpkambhil\",r=\"https://bd.juejin.im?utm_campaign=bd&utm_source=web&utm_medium=banner\",o=\"https://bd.juejin.im?utm_campaign=bd&utm_source=web&utm_medium=link\",a=\"https://bd.juejin.im?utm_campaign=bd&utm_source=web&utm_medium=more\",u=\"https://bd.juejin.im?utm_campaign=bd&utm_source=web&utm_medium=nav\",s=\"https://bd.juejin.im?utm_campaign=bd&utm_source=web&utm_medium=events\"},function(e,t,n){function i(e){n(442)}var r=n(8)(n(443),n(453),i,\"data-v-f0e3c22e\",null);e.exports=r.exports},function(e,t,n){\"use strict\";n.d(t,\"d\",function(){return i}),n.d(t,\"c\",function(){return r}),n.d(t,\"b\",function(){return o}),n.d(t,\"a\",function(){return a});var i=\"掘金,稀土,Vue.js,微信小程序,Kotlin,RxJava,React Native,Wireshark,敏捷开发,Bootstrap,OKHttp,正则表达式,WebGL,Webpack,Docker,MVVM\",r=\"掘金是一个帮助开发者成长的社区，是给开发者用的 Hacker News，给设计师用的 Designer News，和给产品经理用的 Medium。掘金的技术文章由稀土上聚集的技术大牛和极客共同编辑为你筛选出最优质的干货，其中包括：Android、iOS、前端、后端等方面的内容。用户每天都可以在这里找到技术世界的头条内容。与此同时，掘金内还有沸点、掘金翻译计划、线下活动、专栏文章等内容。即使你是 GitHub、StackOverflow、开源中国的用户，我们相信你也可以在这里有所收获。\",o=\"掘金专栏的定位是一个给开发者用的专业写作平台，更好地满足技术文章写作者的需求。掘金邀请在 Android、iOS、前端、后端、产品等领域有一定经验和积累的大牛，定期发布高质量的内容文章，并积极的回答和评论读者的回复。\",a=\"掘金收藏集不仅仅是一个工具，还是一种内容组织形式。一个精心维护的收藏集，就像一本期刊，可以帮助大家发现好内容。过千关注的收藏集如：大厂前端面试题，关于VUE的一切，JAVA进阶之路，Javascript 学习计划，Git 技术合集，开源项目整理，前端开发-从入门到offer，后端技术精选，Node.js 项目实践，Vue.js 优秀组件合集，计算机程序的思维逻辑，从零开始的 Android 新项目，webpack，优质的 Vue 开源项目，Android 面试合集等。\"},function(e,t,n){\"use strict\";function i(e){return e?e.length>20?g.a.reject(\"用户名要在20个字符以内\"):m.e.test(e)?r(e).then(function(e){return!e&&g.a.reject(\"该用户名已被占用\")}):g.a.reject(\"用户名仅支持中英文，数字和下划线\"):g.a.reject(\"用户名不能为空\")}function r(e){return g.a.resolve(!0)}function o(e){return!e||m.c.test(/:\\/\\//.test(e)?e:\"http://\"+e)?g.a.resolve():g.a.reject(\"个人主页链接格式有误\")}function a(e){return!e||e.length128?g.a.reject(\"密码长度请控制在 128 位以内\"):g.a.resolve()}function u(e,t){return t===e?g.a.resolve():g.a.reject(\"两次输入的密码不一致\")}function s(e){return e?g.a.resolve():g.a.reject(\"当前密码不能为空\")}function c(e){return e?m.a.test(e)?l(e).then(function(e){return!e&&g.a.reject(\"该邮箱已注册\")}):g.a.reject(\"邮箱格式不正确\"):g.a.resolve()}function l(e){return g.a.resolve(!0)}function d(e){return 4===e.length?g.a.resolve():g.a.reject(\"请填写图形验证码\")}function f(e){return e?m.b.test(e)?h(e).then(function(e){return!e&&g.a.reject(\"该手机号已注册\")}):g.a.reject(\"手机号格式不正确\"):g.a.resolve()}function h(e){return g.a.resolve(!0)}t.g=i,t.a=o,t.d=a,t.f=u,t.b=s,t.c=c,t.h=d,t.e=f;var p=n(5),g=n.n(p),m=n(76);n(11),n(202)},function(e,t,n){\"use strict\";t.a={FrequentlyUsed:{smiley:\"😃\",heart_eyes:\"😍\",heart:\"❤\",joy:\"😂\",flushed:\"😳\",kissing_heart:\"😘\",clap:\"👏\",thumbs_up:\"👍\",\"-1\":\"👎\",grin:\"😁\",wink:\"😉\",angry:\"😠\",disappointed:\"😞\",disappointed_relieved_face:\"😥\",sob:\"😭\",stuck_out_tongue_closed_eyes_and_tightly_closed_eyes:\"😝\",rage:\"😡\",persevere:\"😣\",pensive:\"😔\",smile:\"😄\",mask:\"😷\",kissing_closed_eyes:\"😚\",sweat:\"😓\",blush:\"😊\",cry:\"😢\",stuck_out_tongue_winking_eye:\"😜\",fearful:\"😨\",cold_sweat:\"😰\",astonished:\"😲\",smirk:\"😏\",scream:\"😱\",sleepy:\"😪\",confounded:\"😖\",relieved:\"😌\",unamused:\"😒\",ghost:\"👻\",santa:\"🎅\",girl:\"👧\",boy:\"👦\",woman:\"👩\",man:\"👨\",dog:\"🐶\",cat:\"🐱\",facepunch:\"👊\",fist:\"✊\",victory:\"✌\",muscle:\"💪\",point_up_2:\"👆\",point_down:\"👇\",point_right:\"👉\",point_left:\"👈\",ok_hand:\"👌\",poop:\"💩\",broken_heart:\"💔\"},Symbols0:{happy_face_with_hugging_hands:\"🤗\",smiling_face_with_sunglasses:\"😎\",nerd_face:\"🤓\",woman_technologist:\"👩‍💻\",man_technologist:\"👨‍💻\",face_with_rolling_eyes:\"🙄\",loudly_crying_face:\"😭\",fearful_face:\"😨\",zany_face:\"🤪\",party_popper:\"🎉\",thinking_Face:\"🤔\",monkey_face:\"🐵\",smiling_face_with_halo:\"😇\",face_with_symbols_on_mouth:\"🤬\",housecat:\"🐈\",cat_face_with_tears_of_joy:\"😹\",cat_face_screaming_in_fear:\"🙀\",flag_of_China:\"🇨🇳\",police_officer:\"👮\",doggo:\"🐕\",white_check_mark:\"✅\",waving_hand_sign:\"👋\",fire:\"🔥\",bugs:\"🐛\",Celebration:\"🎉\",alien:\"👽\",robot_face:\"🤖\",watch:\"⌚\",Handshake:\"🤝\",rainbow_flag:\"🏳️‍🌈\",riangular_flag_on_post:\"🚩\",sleeping_symbol:\"💤\",registered_sign:\"®\",copyright_sign:\"©\",hundred_points_symbol:\"💯\",trade_mark_sign:\"™\",laptop:\"💻\",calendar:\"📅\",pushpin:\"📌\",envelope:\"✉\",Keyboard:\"⌨\",green_textbook:\"📗\",selfie:\"🤳\",sleeping_accommodation:\"🛌\",fishing_pole:\"🎣\",artist_palette:\"🎨\",headphone:\"🎧\",guitar:\"🎸\",microphone:\"🎤\",Badminton:\"🏸\",basketball:\"🏀\",soccer_ball:\"⚽\",video_game:\"🎮 \",swimming:\"🏊\"},Symbols1:{pray:\"🙏\",sun:\"☀\",crescent_moon:\"🌙\",star2:\"🌟\",Thunderbolt:\"⚡\",cloud:\"☁\",umbrella_with_rain_drops:\"☔\",maple_leaf:\"🍁\",sunflower:\"🌻\",leaves:\"🍃\",dress:\"👗\",ribbon:\"🎀\",lips:\"👄\",rose:\"🌹\",coffee:\"☕\",birthday:\"🎂\",clock10:\"🕙\",beer:\"🍺\",mag:\"🔍\",iphone:\"📱\",house:\"🏠\",car:\"🚗\",gift:\"🎁\",soccer:\"⚽\",bomb:\"💣\",gem:\"💎\",pill:\"💊\",face_vomiting:\"🤮\",trophy:\"🏆\",imp:\"👿\"}}},function(e,t,n){function i(e){n(476)}var r=n(8)(n(477),n(483),i,\"data-v-c1177eca\",null);e.exports=r.exports},function(e,t,n){\"use strict\";function i(e){return e?a.a.resolve():a.a.reject(\"验证码不能为空\")}function r(e){var t=u.a.test(e),n=u.b.test(e);return t?\"email\":n?\"phone\":void 0}t.d=i,t.a=r;var o=n(5),a=n.n(o),u=n(76),s=n(228);n.d(t,\"e\",function(){return s.g}),n.d(t,\"b\",function(){return s.d}),n.d(t,\"c\",function(){return s.e}),n.d(t,\"f\",function(){return s.h})},function(e,t,n){function i(e){n(433)}var r=n(8)(n(434),n(530),i,\"data-v-3b9e5e53\",null);e.exports=r.exports},function(e,t,n){\"use strict\";var i=n(559),r=[{name:\"all\",title:\"全部\"}].concat(i.a);t.a=r},function(e,t){e.exports=[{id:\"5a1cdd6280f124bde102b21a\",title:\"前端\",childList:[{id:\"5a1cf62080f124bde102c50f\",title:\"Javascript\",childList:[{id:\"5a1cf64580f124bde102c536\",title:\"开发框架\"}]},{id:\"5a1cf64d80f124bde102c53b\",title:\"CSS\",childList:[{id:\"5a1cf64580f124bde102c536\",title:\"开发框架\"},{id:\"5a1cf65780f124bde102c543\",title:\"实用库\"},{id:\"5a1cf66180f124bde102c548\",title:\"动画\"},{id:\"5a1cf66a80f124bde102c54f\",title:\"工具\"},{id:\"5a1cf67880f124bde102c55f\",title:\"Sass\"}]},{id:\"5a1cf6f380f124bde102c611\",title:\"Vue\",childList:[{id:\"5a1cf6fa80f124bde102c617\",title:\"UI 组件\"},{id:\"5a1cf64580f124bde102c536\",title:\"开发框架\"},{id:\"5a1cf70580f124bde102c61f\",title:\"服务端\"},{id:\"5a1cf70d80f124bde102c62c\",title:\"应用案例\"}]},{id:\"5a1cf71880f124bde102c63d\",title:\"Angular\",childList:[{id:\"5a1cf6fa80f124bde102c617\",title:\"UI 组件\"},{id:\"5a1cf65780f124bde102c543\",title:\"实用库\"},{id:\"5a1cf70d80f124bde102c62c\",title:\"应用案例\"}]},{id:\"5a1cf72880f124bde102c661\",title:\"React\",childList:[{id:\"5a1cf6fa80f124bde102c617\",title:\"UI 组件\"},{id:\"5a1cf64580f124bde102c536\",title:\"开发框架\"},{id:\"5a1cf70d80f124bde102c62c\",title:\"应用案例\"}]},{id:\"5a1cf68280f124bde102c565\",title:\"Grunt\"},{id:\"5a1cf68f80f124bde102c571\",title:\"Webpack\"},{id:\"5a1cf69680f124bde102c57b\",title:\"Gulp\"},{id:\"5a1cf43e80f124bde102c380\",title:\"编辑器\"},{id:\"5a1cf36480f124bde102c268\",title:\"日历\"},{id:\"5a1cf6a880f124bde102c598\",title:\"轮播图 (Slider)\"},{id:\"5a1cf6b280f124bde102c5a6\",title:\"模版引擎\"},{id:\"5a1cf6b980f124bde102c5b1\",title:\"多媒体\"},{id:\"5a1cf6c180f124bde102c5ca\",title:\"数据可视化\"},{id:\"5a1cf35b80f124bde102c260\",title:\"数据存储\"},{id:\"5a1cf6e580f124bde102c5ff\",title:\"加载器\"},{id:\"5a1cf6eb80f124bde102c60c\",title:\"测试\"}]},{id:\"5a1cdd5980f124bde102b209\",title:\"Android\",childList:[{id:\"5a1cf32580f124bde102c22f\",title:\"菜单\"},{id:\"5a1cf45880f124bde102c3a2\",title:\"Listview\"},{id:\"5a1cf31380f124bde102c223\",title:\"手势交互\"},{id:\"5a1cf31d80f124bde102c22a\",title:\"导航\"},{id:\"5a1cf42d80f124bde102c360\",title:\"AR & VR\"},{id:\"5a1cf32f80f124bde102c23f\",title:\"视图动画\"},{id:\"5a1cf33780f124bde102c243\",title:\"键盘\"},{id:\"5a1cf35180f124bde102c25b\",title:\"音频视频\"},{id:\"5a1cf35b80f124bde102c260\",title:\"数据持久化\"},{id:\"5a1cf36480f124bde102c268\",title:\"日历\"},{id:\"5a1cf36c80f124bde102c277\",title:\"绘图\"},{id:\"5a1cf37480f124bde102c27c\",title:\"按钮\"},{id:\"5a1cf37a80f124bde102c282\",title:\"网络\"},{id:\"5a1cf4a780f124bde102c3eb\",title:\"Tagview\"},{id:\"5a1cf38b80f124bde102c293\",title:\"分段选择\"},{id:\"5a1cf39980f124bde102c29c\",title:\"文本输入\"},{id:\"5a1cf3a680f124bde102c2ae\",title:\"开关\"},{id:\"5a1cf3b780f124bde102c2bc\",title:\"进度条\"},{id:\"5a1cf3c780f124bde102c2cd\",title:\"文字视图\"},{id:\"5a1cf4ec80f124bde102c41e\",title:\"Webview 相关\"},{id:\"5a1cf3e580f124bde102c30c\",title:\"地图\"},{id:\"5a1cf3eb80f124bde102c311\",title:\"滚动视图\"},{id:\"5a1cf3f580f124bde102c31d\",title:\"选择器\"},{id:\"5a1cf3fc80f124bde102c325\",title:\"搜索框\"},{id:\"5a1cf40480f124bde102c32e\",title:\"弹出视图\"},{id:\"5a1cf40c80f124bde102c334\",title:\"社交分享\"},{id:\"5a1cf41b80f124bde102c350\",title:\"刷新控件\"},{id:\"5a1cf52a80f124bde102c457\",title:\"布局\"},{id:\"5a1cf43680f124bde102c374\",title:\"硬件\"},{id:\"5a1cf43e80f124bde102c380\",title:\"编辑器\"},{id:\"5a1cf5d080f124bde102c4cc\",title:\"热修复\"},{id:\"5a1cf5df80f124bde102c4dc\",title:\"图片\"},{id:\"5a1cf5fc80f124bde102c4f7\",title:\"RecyclerView\"}]},{id:\"5a1cdd1680f124bde102b1cf\",title:\"iOS\",childList:[{id:\"5a1cf32580f124bde102c22f\",title:\"菜单\"},{id:\"5a1cf31380f124bde102c223\",title:\"手势交互\"},{id:\"5a1cf31d80f124bde102c22a\",title:\"导航\"},{id:\"5a1cf42d80f124bde102c360\",title:\"AR & VR\"},{id:\"5a1cf32f80f124bde102c23f\",title:\"视图动画\"},{id:\"5a1cf33780f124bde102c243\",title:\"键盘\"},{id:\"5a1cf35180f124bde102c25b\",title:\"音频视频\"},{id:\"5a1cf35b80f124bde102c260\",title:\"数据持久化\"},{id:\"5a1cf36480f124bde102c268\",title:\"日历\"},{id:\"5a1cf36c80f124bde102c277\",title:\"绘图\"},{id:\"5a1cf37480f124bde102c27c\",title:\"按钮\"},{id:\"5a1cf37a80f124bde102c282\",title:\"网络\"},{id:\"5a1cf38280f124bde102c288\",title:\"标签\"},{id:\"5a1cf38b80f124bde102c293\",title:\"分段选择\"},{id:\"5a1cf39980f124bde102c29c\",title:\"文本输入\"},{id:\"5a1cf3a080f124bde102c29f\",title:\"滑杆\"},{id:\"5a1cf3a680f124bde102c2ae\",title:\"开关\"},{id:\"5a1cf3af80f124bde102c2b4\",title:\"指示器\"},{id:\"5a1cf3b780f124bde102c2bc\",title:\"进度条\"},{id:\"5a1cf3bf80f124bde102c2c3\",title:\"页数控制\"},{id:\"5a1cf3c780f124bde102c2cd\",title:\"文字视图\"},{id:\"5a1cf3de80f124bde102c307\",title:\"网页视图\"},{id:\"5a1cf3e580f124bde102c30c\",title:\"地图\"},{id:\"5a1cf3eb80f124bde102c311\",title:\"滚动视图\"},{id:\"5a1cf3f580f124bde102c31d\",title:\"选择器\"},{id:\"5a1cf3fc80f124bde102c325\",title:\"搜索框\"},{id:\"5a1cf40480f124bde102c32e\",title:\"弹出视图\"},{id:\"5a1cf40c80f124bde102c334\",title:\"社交分享\"},{id:\"5a1cf41b80f124bde102c350\",title:\"刷新控件\"},{id:\"5a1cf42280f124bde102c355\",title:\"列表\"},{id:\"5a1cf43680f124bde102c374\",title:\"硬件\"},{id:\"5a1cf43e80f124bde102c380\",title:\"编辑器\"},{id:\"5a1cf22f80f124bde102c175\",title:\"瀑布流\"},{id:\"5a1cf23e80f124bde102c186\",title:\"图文混排\"}]},{id:\"5a1cdd6c80f124bde102b224\",title:\"Python\",childList:[{id:\"5a1cf75580f124bde102c692\",title:\"Web 开发\",childList:[{id:\"5a1cf74e80f124bde102c68e\",title:\"Flask\"},{id:\"5a1cf7dd80f124bde102c766\",title:\"Django\"},{id:\"5a1cf7e580f124bde102c76d\",title:\"Tornado\"}]},{id:\"5a1cf74380f124bde102c687\",title:\"科学计算\"},{id:\"5a1cf7c780f124bde102c748\",title:\"机器学习\"},{id:\"5a1cf7ce80f124bde102c74e\",title:\"深度学习\"},{id:\"5a1cf76a80f124bde102c6b9\",title:\"数据库\"},{id:\"5a1cf7d680f124bde102c758\",title:\"网络爬虫\"},{id:\"5a1cf77180f124bde102c6c4\",title:\"GUI\"},{id:\"5a1cf7c180f124bde102c740\",title:\"游戏开发\"},{id:\"5a1cf82d80f124bde102c7b8\",title:\"运维\"}]}]},function(e,t,n){function i(e){n(503)}var r=n(8)(n(504),n(511),i,\"data-v-86d880ae\",null);e.exports=r.exports},function(e,t,n){\"use strict\";function i(e){if(c.a){return o(u.a).load(e||\"\",{decodeEntities:!1})}var t=r(u.a),n=t(Object(s.a)(e)),i=function(e){return n.find(e)};return i.html=function(){for(var e=arguments.length,t=Array(e),i=0;i\\n \"}function a(e,t){return e+\":\"+t+\";\"}Object.defineProperty(t,\"__esModule\",{value:!0});var u={233:n(365),666:n(366),up:n(367)};t.default={data:function(){return{running:{type:\"233\",show:!1},barrageShowDuration:6100,barrageTimeout:null,barrageHtml:[]}},methods:{stop:function(){clearTimeout(this.barrageTimeout),this.running.show=!1},renderBarrage:function(){this.barrageHtml=i(this.running.type),this.$nextTick(function(){document.querySelectorAll(\".emoji-inner-screen\").forEach(function(e){e.classList.add(\"animate\")})})}},watch:{\"running.show\":function(e){var t=this;clearTimeout(this.barrageTimeout),e&&(this.renderBarrage(),this.barrageTimeout=setTimeout(function(){t.running.show=!1},this.barrageShowDuration))}},mounted:function(){var e=this,t=this.$getBean(\"eventBus\");t.onVmLife(this,t.eventType.ARTICLE_COMMENT_BARRAGE,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"233\";e.running.type=t,e.running.show=!0})}}},function(e,t,n){e.exports=n.p+\"static/img/233.6b9e673.png\"},function(e,t,n){e.exports=n.p+\"static/img/666.5f186ea.png\"},function(e,t,n){e.exports=n.p+\"static/img/thumbs-up.33598de.png\"},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"emoji-barrage\"},[e.running.show?n(\"div\",{staticClass:\"full-screen\",on:{dblclick:e.stop}},e._l(e.barrageHtml,function(t,i){return n(\"div\",{staticClass:\"emoji-inner-screen\",class:\"emojin-inner-screen__\"+i,domProps:{innerHTML:e._s(t)}})})):e._e()])},staticRenderFns:[]}},function(e,t,n){function i(e){n(370)}var r=n(8)(n(371),n(389),i,\"data-v-6cb98ece\",null);e.exports=r.exports},function(e,t){},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(5),r=n.n(i),o=n(231),a=n(10),u=n(30);t.default={props:[\"type\",\"newuserTicket\"],data:function(){return{registerVcodeUrl:\"\",registerVcodeForm:{imageToken:\"\",imageCode:\"\"},form:{login:{phoneOrEmail:\"\",password:\"\"},register:{username:\"\",phoneNumber:\"\",smsCode:\"\",password:\"\"}},isRegisterPanelVisible:!1,vcodeCountdown:0,validating:!1,requesting:!1,panfishState:\"normal\"}},computed:{isPhoneNumberFormatValid:function(){var e=this.form.register.phoneNumber.trim();return\"phone\"===Object(o.a)(e)},smsCodeBtnTittle:function(){return this.vcodeCountdown?this.vcodeCountdown+\" 秒后重新发送\":\"获取验证码\"}},watch:{type:{handler:function(e){this.isRegisterPanelVisible=\"register\"===e},immediate:!0},\"form.register.phone\":function(){this.form.register.smsCode=\"\"},isRegisterPanelVisible:function(){this.autoSelect()},isPhoneNumberFormatValid:function(e){e&&this.getRandCode()}},methods:{newuserTicketRegister:function(){this.newuserTicket&&this.$getBean(\"xiaoceBusiness\").getNewuserTicketStatistic(\"regCount\")},newuserTicketLogin:function(){this.newuserTicket&&this.$getBean(\"xiaoceBusiness\").getNewuserTicketStatistic(\"loginCount\")},storageObtainNewUserTicket:function(){this.newuserTicket&&window.sessionStorage.setItem(\"LOGIN_OBTAIN_NEWUSER_TICKET\",\"getting\")},loginWithWeibo:function(){return this.$getBean(\"oauthBusiness\").loginWithWeibo()},loginWithWechat:function(){return this.$getBean(\"oauthBusiness\").loginWithWechat()},loginWithGithub:function(){return this.$getBean(\"oauthBusiness\").loginWithGithub()},showRegisterPanel:function(){this.isRegisterPanelVisible=!0},showLoginPanel:function(){this.isRegisterPanelVisible=!1},login:function(){var e=this;this.requesting=!0,this.checkLogin().then(function(t){return e.doLogin(t)}).then(function(){e.newuserTicketLogin(),e.storageObtainNewUserTicket(),e.requesting=!1,e.close()}).catch(function(t){e.$alert(t),e.requesting=!1})},checkLogin:function(){var e=this.form.login.phoneOrEmail.trim(),t=this.form.login.password;return e?t?r.a.resolve({phoneOrEmail:e,password:t}):(this.$refs.loginPasswordInput.select(),r.a.reject(\"请输入密码\")):(this.$refs.loginPhoneOrEmailInput.select(),r.a.reject(\"请填写手机号或邮箱\"))},doLogin:function(e){var t=this,n=e.phoneOrEmail,i=e.password,u=Object(o.a)(n),s=\"phone\"===u?\"手机号\":\"邮箱\";return this.$store.dispatch(a.LOGIN,{phoneOrEmail:n,password:i}).catch(function(e){switch(e.normalizedCode){case 401:return t.$refs.loginPasswordInput.select(),r.a.reject(\"密码错误\");case 403:return r.a.reject(\"失败次数过多，请稍后重试\");case 404:return t.$refs.loginPhoneOrEmailInput.select(),r.a.reject(s+\"不存在\");case 410:return t.resetPassword(u,n);default:return r.a.reject(\"登录时出现错误\")}})},getRandCode:function(){var e=this;this.$getBean(\"authBusiness\").getRandCode().then(function(t){e.registerVcodeUrl=t.imageStr,e.registerVcodeForm.imageToken=t.imageToken}).catch(function(t){e.$alert(t)})},resetPassword:function(e,t){window.location.href=[\"/reset-password\",\"?type=\"+e,\"&account=\"+t,\"&msg=\"+encodeURIComponent(\"为了你的账号安全，请重置密码\")].join(\"\")},sendVcode:function(){var e=this,t=this.form.register.phoneNumber.trim(),n=this.registerVcodeForm.imageCode.trim();if(t){var i=this.registerVcodeForm,a=i.imageToken,u=i.imageCode;return r.a.resolve().then(function(){return Object(o.f)(n).catch(function(t){return e.$refs.registerVcodeInput.select(),r.a.reject(t)})}).then(function(){return e.$getBean(\"authBusiness\").sendRegisterVcode(t,a,u).then(function(t){e.updateVcodeCountdown()})}).catch(function(t){e.$alert(t),e.getRandCode(),e.requesting=!1})}},updateVcodeCountdown:function(){var e=this,t=Date.now()+6e4;this.vcodeCountdown=60;var n=window.setInterval(function(){var i=Math.max(Math.ceil((t-Date.now())/1e3),0);e.vcodeCountdown=i,i1e3)return this.$alert(\"沸点内容超过字符限制\");var n=this.state.topic[0],i=this.state.files,r=this.state.link[0],o={content:t,topicId:n?n.id:\"\",pictures:\"\",url:r&&r.url?r.url:\"\",urlTitle:r&&r.title?r.title:\"\",urlPic:r&&r.thumb?r.thumb:\"\"};return this.state.status=\"uploading\",i.length>0?this.uploadFileList(i.slice(0,d.e)).then(function(t){var n=t.replace(/\\|$/gi,\"\");return o.pictures=n,e.createPin(o)}):this.createPin(o)},createPin:function(e){var t=this;return this.$getBean(\"pinService\").createPin(e).then(function(){return t.state.status=\"success\",t.$alert(\"发布成功\"),t.$emit(\"afterPin\"),t.clearEditorContent(),t.$emit(\"close\",t.state.status),t.resetState(t.state)}).catch(function(e){t.state.status=\"failed\",t.$alert(\"发布失败，请重试\")})},uploadFile:function(e){return this.$getBean(\"uploadBusiness\").uploadFile(e)},uploadFileList:function(e){var t=this;return e.reduce(function(e,n){return e.then(function(e){return t.uploadFile(n.file).then(function(t){return n.url=t,n.status=\"uploaded\",e+t+\"|\"})})},r.a.resolve(\"\"))},updateContent:function(e){this.count=e.length>0?e.length:0,this.state.content=e},getDragFile:function(){var e=this;this.$refs.editorBody.ondrop=function(t){e.dragStatus=\"drop\",t.preventDefault();var n=t.dataTransfer.files;if(!(n.lengthd.e||e.filesSize()+n.length>d.e)return e.$alert(\"最多支持发布\"+d.e+\"张图片\");for(var i=0;id.d)return this.$alert(\"文件过大\");Object(l.a)(e,d.b).then(function(n){n?t.updateFiles(e):t.$error(\"不支持此格式的图片\")})},updateFiles:function(e){this.linkSize()\",this.state.emoji.length>0&&(this.state.emoji=[],this.$emit(\"onUpdateEditor\",this.state)))},clearEditorContent:function(){this.$refs.richEditor.innerHTML=\"\",this.content=\"\"},emojiToText:function(e){return e.replace(//g,\"\")}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"editor-content\"},[n(\"div\",{ref:\"richEditor\",staticClass:\"rich-editor\",class:{empty:e.empty,indent:e.indent},attrs:{contenteditable:\"true\",spellcheck:\"false\",placeholder:e.placeholder},on:{\"!click\":function(t){e.onClick(t)},input:e.onInput,paste:e.onPaste,selectstart:e.adjust,focus:e.onFocus,blur:e.onBlur}},[n(\"br\")])])},staticRenderFns:[]}},function(e,t,n){function i(e){n(474)}var r=n(8)(n(475),n(525),i,\"data-v-1c6c8726\",null);e.exports=r.exports},function(e,t){},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(229),r=n(161),o=n(230),a=n.n(o),u=n(484),s=n.n(u),c=n(494),l=n.n(c),d=n(500),f=n.n(d),h=n(521),p=n.n(h);t.default={props:[\"state\"],data:function(){return{emoji:i.a}},components:{Emoji:a.a,File:s.a,Links:l.a,Topic:f.a,Submit:p.a},methods:{filesSize:function(){return this.state.files.length},linkSize:function(){return this.state.link.length},updateEmoji:function(e){this.state.emoji=[e],this.updateEditor(this.state)},updateTopic:function(e){this.state.topic=[e],this.updateEditor(this.state)},clearTopic:function(){this.state.topic.length>0&&(this.state.topic=[],this.updateEditor(this.state))},updateFile:function(e){this.filesSize()1:!!t.length}function s(e){var t=e.entryId,n=e.sort,i=e.startTime,r=e.page,o=e.pageSize;return\"hottest\"===n?d.getHotCommentList({entryId:t,page:r,pageSize:o}):d.getCommentList({entryId:t,startTime:i,pageSize:o})}function c(e,t){var n=e.list,i=l(n)||t.startTime;return r()({},e,{startTime:i})}function l(e){return e.length?e.map(function(e){return e.createdAt}).sort(function(e,t){return e-t})[0]:null}var d=t.getBean(\"repoCommentRepository\");return Object(o.a)({name:e,model:\"Comment\",uniqueKeyList:[\"entryId\",\"sort\",\"startTime\"],initStateGetter:n,fetchStateNormalizer:i,navigationChecker:u,queryExecuter:s,resultResolver:c})}},function(e,t,n){\"use strict\";function i(e){function t(){return{repo:l.a.blank(),titleTranslationList:[],descriptionTranslationList:[],translatorList:[],vcode:{imageUrl:null,token:null},actionType:{REFRESH_VCODE:f,FETCH:h,SUBMIT:p,RESET:g}}}var n,i=e.getBean(\"repoTranslationRepository\"),r=e.getBean(\"repoService\"),a=e.getBean(\"repoRepository\"),s=e.getBean(\"userRepository\"),m=e.getBean(\"authService\");return{state:t(),mutations:u()({},d,function(e,t){c()(e,t)}),actions:(n={},u()(n,f,function(e){var t=e.commit;return m.getRandCode().then(function(e){t(d,{vcode:{imageUrl:e.imageStr,token:e.imageToken}})})}),u()(n,h,function(e,t){var n=e.commit,r=e.state,u=t.id;return r.repo.id===u?o.a.resolve():o.a.all([a.getRepoById(u).then(function(e){n(d,{repo:e});var t=(r.repo.translatorIdList||[]).slice(0,5);return s.getUserListByIdWithoutState(t)}).then(function(e){n(d,{translatorList:e})}),i.getRepoTitleTranslationList(u).then(function(e){n(d,{titleTranslationList:e})}),i.getRepoDescriptionTranslationList(u).then(function(e){n(d,{descriptionTranslationList:e})})])}),u()(n,p,function(e,t){var n=(e.commit,e.state);return r.translateRepo(c()({repoId:n.repo.id,vcodeToken:n.vcode.token},t))}),u()(n,g,function(e){(0,e.commit)(d,t())}),n)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(5),o=n.n(r),a=n(6),u=n.n(a),s=n(3),c=n.n(s),l=n(111),d=\"view/edit-repo/UPDATE_STATE\",f=\"view/edit-repo/REFRESH_VCODE\",h=\"view/edit-repo/FETCH\",p=\"view/edit-repo/SUBMIT\",g=\"view/edit-repo/RESET\"},function(e,t,n){\"use strict\";function i(e){function t(){return{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:p,RESET:g}}}var n,i=e.getBean(\"pinRepository\");return{state:t(),mutations:u()({},h,function(e,t){c()(e,t)}),actions:(n={},u()(n,p,function(e,t){var n=e.commit,r=e.state,a=e.dispatch,u=t.id;return r.pin.id===u?o.a.resolve():i.getPinById(u).then(function(e){n(h,{pin:e})}).catch(Object(l.b)({dispatch:a}))}),u()(n,m,function(e,t){var n=e.commit;e.state;return i.getPinListByTopicId(t).then(function(e){n(h,{pinList:e})}).catch(Object(l.a)())}),u()(n,g,function(e){var n=e.commit;e.state,e.dispatch;n(h,t())}),n),modules:{commentList:Object(d.a)(\"view/pin/commentList\",e),subCommentList:Object(f.a)(\"view/pin/subCommentList\",e)}}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(5),o=n.n(r),a=n(6),u=n.n(a),s=n(3),c=n.n(s),l=n(28),d=n(636),f=n(637),h=\"view/pin/UPDATE_STATE\",p=\"view/pin/FETCH\",g=\"view/pin/RESET\",m=\"view/pin/FETCHBYTOPIC\"},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{pinId:null,pageSize:20}}function i(e,t){r()(e,{page:Math.max(1,e.page)})}function a(e,t,n){return\"prev\"===n?e.page>1:!!t.length}function u(e){var t=e.pinId,n=e.page,i=e.pageSize;return s.getPinCommentList({pinId:t,page:n,pageSize:i})}var s=t.getBean(\"pinCommentRepository\");return Object(o.a)({name:e,model:\"PinComment\",uniqueKeyList:[\"pinId\",\"page\"],initStateGetter:n,fetchStateNormalizer:i,navigationChecker:a,queryExecuter:u,resultResolver:function(e){return e}})}},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{commentId:null,pageSize:20}}function i(e,t){r()(e,{page:Math.max(1,e.page)})}function a(e,t,n){return\"prev\"===n?e.page>1:!!t.length}function u(e){var t=e.commentId,n=e.page,i=e.pageSize;return s.getPinSubCommentList({commentId:t,page:n,pageSize:i})}var s=t.getBean(\"pinCommentRepository\");return Object(o.a)({name:e,model:\"PinComment\",uniqueKeyList:[\"commentId\",\"page\"],initStateGetter:n,fetchStateNormalizer:i,navigationChecker:a,queryExecuter:u,resultResolver:function(e){return e}})}},function(e,t,n){\"use strict\";function i(e){function t(){return{hotpin:[],typeList:f.f,actionType:{FETCH:p,RESET:g,FETCHHOTPIN:m}}}var n,i=e.getBean(\"pinRepository\");return{state:t(),mutations:o()({},h,function(e,t){u()(e,t)}),actions:(n={},o()(n,m,function(e){var t=e.commit,n=(e.state,e.dispatch);return i.getHotRecommendList().then(function(e){t(h,{hotpin:e})}).catch(Object(s.b)({dispatch:n}))}),o()(n,g,function(e){var n=e.commit;e.state,e.dispatch;n(h,t())}),n),modules:{list:Object(c.a)(\"view/pin-index/list\",e),topic:d.a(e),sidebar:l.a(e)}}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(28),c=n(639),l=n(640),d=n(643),f=n(97),h=\"view/pin-index/UPDATE_STATE\",p=\"view/pin-index/FETCH\",g=\"view/pin-index/RESET\",m=\"view/pin-index/FETCHHOTPIN\"},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);n(11),n(24);t.a=function(e,t){function n(){return{pointer:null,type:\"recommended\"}}function i(e,t,n){return\"next\"===n&&!!t.length}function a(e,t){r()(e,{pointer:null})}function u(e){var t=e.type,n=e.pointer,i={pointer:n,limit:30};switch(t){case\"recommended\":return s.getRecommendPinList(i);case\"subscribed\":return s.getDynamicPinList(i);default:return s.getRecommendPinList(i)}}var s=t.getBean(\"pinRepository\");return Object(o.a)({name:e,model:\"PinIndex\",uniqueKeyList:[],initStateGetter:n,fetchStateNormalizer:a,navigationChecker:i,queryExecuter:u,resultResolver:function(e){return e}})}},function(e,t,n){\"use strict\";function i(e){function t(){return{bannerList:[],actionType:{RESET:f,UPDATE_STATE:d,FETCH_BANNER:l}}}var n,i=e.getBean(\"bannerService\");return{state:t(),mutations:o()({},d,function(e,t){u()(e,t)}),actions:(n={},o()(n,l,function(e){var t=e.commit;return i.getBannerList(\"topic-banner\").then(function(e){t(d,{bannerList:e.slice(0,6)})})}),o()(n,f,function(e){(0,e.commit)(d,t())}),n),modules:{recommend:Object(s.a)(\"view/pin-index/sidebar/recommend\",e),followed:Object(c.a)(\"view/pin-index/sidebar/followed\",e)}}}t.a=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(641),c=n(642),l=\"view/pin-index/sidebar/FETCH_BANNER\",d=\"view/pin-index/sidebar/UPDATE_STATE\",f=\"view/pin-index/sidebar/RESET\"},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{after:0,page:l,pageSize:d}}function i(e,t){r()(e,{page:l,list:[]})}function a(e,t){var n=e.list,i=s(n)||t.startTime;return r()({},e,{startTime:i})}function u(e){var t=e.after,n=e.page,i=e.pageSize;return c.getRecommendTopicList({after:t,page:n,pageSize:i})}function s(e){return e.length?e.map(function(e){return e.createdAt}).sort(function(e,t){return e-t})[0]:null}var c=t.getBean(\"topicRepository\"),l=0,d=20;return Object(o.a)({name:e,model:\"\",uniqueKeyList:[\"after\",\"page\"],initStateGetter:n,fetchStateNormalizer:i,resultResolver:a,queryExecuter:u})}},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{after:0,page:l,pageSize:d}}function i(e,t){r()(e,{page:l,pageSize:d,list:[]})}function a(e,t){var n=e.list,i=s(n)||t.startTime;return r()({},e,{startTime:i})}function u(e){var t=e.after,n=e.page,i=e.pageSize;return c.getFollowedTopicList({after:t,page:n,pageSize:i})}function s(e){return e.length?e.map(function(e){return e.createdAt}).sort(function(e,t){return e-t})[0]:null}var c=t.getBean(\"topicRepository\"),l=0,d=20;return Object(o.a)({name:e,model:\"\",uniqueKeyList:[\"after\",\"page\"],initStateGetter:n,fetchStateNormalizer:i,resultResolver:a,queryExecuter:u})}},function(e,t,n){\"use strict\";function i(e){function t(){return{seachTopicList:[],actionType:{SEACH:a,UPDATE_STATE:r,RESET:c}}}var n,i=e.getBean(\"topicRepository\"),r=\"view/pin-index/topic/UPDATE_STATE\",a=\"view/pin-index/topic/SEACH\",c=\"view/pin-index/topic/RESET\";return{state:t(),mutations:o()({},r,function(e,t){u()(e,t)}),actions:(n={},o()(n,a,function(e,t){var n=e.commit;e.state;return i.searchTopic(t).then(function(e){n(r,{seachTopicList:e})}).catch(Object(s.a)())}),o()(n,c,function(e){(0,e.commit)(r,t())}),n)}}t.a=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(28)},function(e,t,n){\"use strict\";function i(e){function t(){return{topic:\"\",followedTopicList:[],actionType:{FETCH:a,UPDATE_STATE:r,RESET:h}}}var n,i=e.getBean(\"topicRepository\"),r=\"view/topic/UPDATE_STATE\",a=\"view/topic/FETCH\",h=\"view/topic/RESET\";return{state:t(),mutations:o()({},r,function(e,t){u()(e,t)}),actions:(n={},o()(n,a,function(e,t){var n=e.commit;return i.getTopicDetail(t).then(function(e){n(r,{topic:e})}).catch(Object(s.a)())}),o()(n,h,function(e){(0,e.commit)(r,t())}),n),modules:{allTopicList:Object(c.a)(\"view/topic/allTopicList\",e),pinlist:Object(l.a)(\"view/topic/pinList\",e),sidebar:d.a(e),followedList:Object(f.a)(\"view/topic/followedList\",e)}}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(28),c=n(645),l=n(646),d=n(647),f=n(649)},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{sortType:\"hot\",page:s,pageSize:c}}function i(e,t){r()(e,{page:s,list:[]})}function a(e){var t=e.sortType,n=e.page,i=e.pageSize;return u.getTopicList({sortType:t,page:n,pageSize:i})}var u=t.getBean(\"topicRepository\"),s=0,c=100;return Object(o.a)({name:e,model:\"\",uniqueKeyList:[\"sortType\",\"page\"],initStateGetter:n,queryExecuter:a,fetchStateNormalizer:i})}},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{sortType:\"popular\",page:c,pageSize:l}}function i(e,t,n){return\"prev\"===n?e.page>1:!!t.length}function a(e,t){r()(e,{sortType:\"popular\"===e.sortType?\"popular\":\"newest\"})}function u(e){var t=e.page,n=e.pageSize,i=e.topicId,r=e.sortType;return\"popular\"===r&&(r=\"rank\"),s.getPinListByTopicId({page:t,pageSize:n,topicId:i,sortType:r})}var s=t.getBean(\"pinRepository\"),c=1,l=20;return Object(o.a)({name:e,model:\"\",initStateGetter:n,queryExecuter:u,navigationChecker:i,fetchStateNormalizer:a})}},function(e,t,n){\"use strict\";function i(e){function t(){return{actionType:{RESET:l,UPDATE_STATE:c}}}return{state:t(),mutations:o()({},c,function(e,t){u()(e,t)}),actions:o()({},l,function(e){(0,e.commit)(c,t())}),modules:{attender:Object(s.a)(\"view/topic/sidebar/attender\",e)}}}t.a=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(648),c=\"view/topic/sidebar/UPDATE_STATE\",l=\"view/topic/sidebar/RESET\"},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{topicId:null,pageSize:c}}function i(e,t,n){return\"next\"===n&&!!t.length}function a(e){var t=e.topicId,n=e.page,i=e.pageSize;return s.getTopicAttenders({topicId:t,page:n,pageSize:i})}function u(e,t){var n=e.total;return r()({},e,n)}var s=t.getBean(\"topicRepository\"),c=20;return Object(o.a)({name:e,model:\"\",uniqueKeyList:[\"topicId\",\"page\"],navigationChecker:i,initStateGetter:n,queryExecuter:a,resultResolver:u})}},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(7);t.a=function(e,t){function n(){return{after:0,page:l,pageSize:d}}function i(e,t){r()(e,{page:l,pageSize:d,list:[]})}function a(e,t){var n=e.list,i=s(n)||t.startTime;return r()({},e,{startTime:i})}function u(e){var t=e.after,n=e.page,i=e.pageSize;return c.getFollowedTopicList({after:t,page:n,pageSize:i})}function s(e){return e.length?e.map(function(e){return e.createdAt}).sort(function(e,t){return e-t})[0]:null}var c=t.getBean(\"topicRepository\"),l=0,d=100;return Object(o.a)({name:e,model:\"\",uniqueKeyList:[\"after\",\"page\"],initStateGetter:n,fetchStateNormalizer:i,resultResolver:a,queryExecuter:u})}},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"bannerService\"),i=e.getBean(\"suggestedUserService\"),a=e.getBean(\"categoryRepository\"),s=e.getBean(\"authStateService\");return{state:{bannerList:[],userList:[],subscribedCategoryNavList:[],actionType:{FETCH_BANNER:p,FETCH_USER:g,CLOSE_BANNER:m,FETCH_SUBSCRIBED_CATEGORY_LIST:v}},mutations:c()({},h,function(e,t){d()(e,t)}),actions:(t={},c()(t,v,function(e){var t=e.commit;return a.getSubscribedCategoryList().then(function(e){t(h,{subscribedCategoryNavList:e})})}),c()(t,p,function(e){var t=e.commit;return n.getBannerList(\"hero\").then(function(e){t(h,{bannerList:e.slice(0,2)})})}),c()(t,g,function(e){var t=e.commit;return s.authorized()?a.getSubscribedCategoryList().then(r).then(function(e){return i.getSuggestedUserListInCategory(e)}).then(function(e){t(h,{userList:o(e)})}):u.a.resolve([])}),c()(t,m,function(e,t){var i=e.commit,r=e.state;i(h,{bannerList:r.bannerList.filter(function(e){return e.id!==t.id})}),n.saveClosedBannerId(t.id)}),t)}}function r(e){var t=e.filter(function(e){return-1!==y.indexOf(e.title)});return t.length?t[Math.floor(Math.random()*t.length)].title:\"产品\"}function o(e){return e.sort(function(){return Math.random()-.5}).slice(0,4)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var a=n(5),u=n.n(a),s=n(6),c=n.n(s),l=n(3),d=n.n(l),f=n(112),h=\"component/aside/UPDATE_STATE\",p=\"component/aside/FETCH_BANNER\",g=\"component/aside/FETCH_USER\",m=\"component/aside/CLOSE_BANNER\",v=\"component/aside/FETCH_SUBSCRIBED_CATEGORY_LIST\",y=f.a.getTitlelist().filter(function(e){return-1===[\"阅读\",\"工具资源\"].indexOf(e)})},function(e,t,n){\"use strict\";function i(e){var t,n,i=e.getBean(\"authService\"),r=e.getBean(\"userService\"),a=e.getBean(\"eventBus\");return{state:{user:null,clientId:null,token:null},getters:(t={},u()(t,s.LOGINED,function(e){return!!e.user}),u()(t,s.USER,function(e){return e.user}),t),mutations:u()({},d,function(e,t){o()(e,t)}),actions:(n={},u()(n,s.LOGIN,function(e,t){var n=(e.commit,t.phoneOrEmail),r=t.password;return(Object(c.b)(n)?i.loginWithPhoneNumber(n,r):i.loginWithEmail(n,r)).then(function(){a.emit(a.eventType.REQUEST_RELOAD)})}),u()(n,s.LOGOUT,function(e){e.commit;return i.logout().then(function(){a.emit(a.eventType.REQUEST_RELOAD)})}),u()(n,s.REGISTER_WITH_PHONE,function(e,t){e.commit;return i.registerWithPhone(t).then(function(){a.emit(a.eventType.REQUEST_RELOAD)})}),u()(n,s.FETCH_CURRENT_USER,function(e){var t=e.commit;e.state;return r.fetchCurrentUser().then(function(e){t(d,{user:e})})}),u()(n,s.AUTHORIZE,function(e,t){var n=e.commit,i=t.user,r=t.clientId,o=t.token;n(d,{user:i?l.a.fromDescriptor(i):null,clientId:r,token:o})}),u()(n,s.UPDATE_PASSWORD,function(e,t){var n=(e.commit,t.currentPassword),r=t.newPassword;return i.updatePassword(n,r)}),n)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(3),o=n.n(r),a=n(6),u=n.n(a),s=n(10),c=n(166),l=n(19),d=\"auth/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"tagService\");return{state:{subscribedTagList:[]},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.SUBSCRIBE_TAG,function(e,t){e.commit;return n.subscribeTag(t.id).then(function(){t.subscribersCount++,t.subscribed=!0})}),o()(t,s.UNSUBSCRIBE_TAG,function(e,t){e.commit;return n.unsubscribeTag(t.id).then(function(){t.subscribersCount--,t.subscribed=!1})}),o()(t,s.TOGGLE_SUBSCRIBE_TAG,function(e,t){return(0,e.dispatch)(t.subscribed?s.UNSUBSCRIBE_TAG:s.SUBSCRIBE_TAG,t)}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"tag/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"likeService\"),i=e.getBean(\"entryService\"),r=e.getBean(\"entryRepository\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_ENTRY,function(t,i){t.commit;return n.likeEntry(i.id).then(function(){var t=e.getBean(\"behaviorBusiness\");i.liked=!0,i.collectionCount++,i.user.beLikedCount++,t.recordLikeEntryAction(i.id)})}),o()(t,s.UNLIKE_ENTRY,function(t,i){t.commit;return n.unlikeEntry(i.id).then(function(){var t=e.getBean(\"behaviorBusiness\");i.liked=!1,i.collectionCount--,i.user.beLikedCount--,t.recordUnlikeEntryAction(i.id)})}),o()(t,s.TOGGLE_LIKE_ENTRY,function(e,t){return(0,e.dispatch)(t.liked?s.UNLIKE_ENTRY:s.LIKE_ENTRY,t)}),o()(t,s.TOGGLE_HOT_ENTRY,function(e,t){e.dispatch;(t.hot?i.unrecommendEntry(t.id):i.recommendEntry(t.id)).then(function(){t.hot=!t.hot})}),o()(t,s.ADD_ENTRY,function(e,t){e.commit;return r.add(t)}),o()(t,s.UPDATE_ENTRY,function(e,t){var n=e.commit;return r.update(t).then(function(){return n(s.ENTITY_UPDATED,{model:\"Entry\",data:t})})}),o()(t,s.DELETE_ENTRY,function(e,t){var n=e.commit;return r.remove(t).then(function(){return n(s.ENTITY_DELETED,{model:\"Entry\",data:{id:t}})})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"entry/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"collectionService\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.FOLLOW_COLLECTION,function(t,i){t.commit;return n.followCollection(i.id).then(function(){var t=e.getBean(\"behaviorBusiness\");i.followed=!0,i.followerCount+=1,t.recordFollowCollectionAction(i.id)})}),o()(t,s.UNFOLLOW_COLLECTION,function(t,i){t.commit;return n.unfollowCollection(i.id).then(function(){var t=e.getBean(\"behaviorBusiness\");i.followed=!1,i.followerCount-=1,t.recordUnfollowCollectionAction(i.id)})}),o()(t,s.TOGGLE_FOLLOW_COLLECTION,function(e,t){return(0,e.dispatch)(t.followed?s.UNFOLLOW_COLLECTION:s.FOLLOW_COLLECTION,t)}),o()(t,s.COLLECT_ENTRY,function(t,i){var r=(t.commit,i.entry),o=i.collection;return n.collectEntry(r.id,o.id).then(function(){var t=e.getBean(\"behaviorBusiness\");r.collected=!0,o.entryCount++,o.isIn=!0,t.recordCollectEntryAction(r.id)})}),o()(t,s.UNCOLLECT_ENTRY,function(t,i){var r=(t.commit,i.entry),o=i.collection;return n.uncollectEntry(r.id,o.id).then(function(t){var n=e.getBean(\"behaviorBusiness\");r.collected=t,o.entryCount--,o.isIn=!1,n.recordUncollectEntryAction(r.id)})}),o()(t,s.TOGGLE_COLLECT_ENTRY,function(e,t){var n=e.dispatch,i=t.entry,r=t.collection;return n(r.isIn?s.UNCOLLECT_ENTRY:s.COLLECT_ENTRY,{entry:i,collection:r})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"collection/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"commentService\"),i=e.getBean(\"commentRepository\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.likeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!0,i.likesCount+=1})}),o()(t,s.UNLIKE_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.unlikeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!1,i.likesCount-=1})}),o()(t,s.TOGGLE_LIKE_COMMENT,function(e,t){var n=e.dispatch,i=t.comment,r=t.entry;return n(i.liked?s.UNLIKE_COMMENT:s.LIKE_COMMENT,{comment:i,entry:r})}),o()(t,s.SUBMIT_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.content,o=t.imageUrl;return n.submitComment({entryId:i.id,replyUserId:i.user.id,content:r,imageUrl:o})}),o()(t,s.REPLY_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.parent,o=t.tar,a=t.content;return n.replyComment({entryId:i.id,replyUserId:o.user.id,replyCommentId:o.id,parentId:r.id,content:a})}),o()(t,s.DELETE_COMMENT,function(e,t){var n=e.commit,r=t.entry,o=t.parent,a=t.comment;return i.deleteComment({entryId:r.id,commentId:a.id,parentId:o&&o.id}).then(function(){return n(s.ENTITY_DELETED,{model:\"Comment\",data:{id:a.id}})})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"comment/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"commentBookService\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_BOOK_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.likeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!0,i.likesCount+=1})}),o()(t,s.UNLIKE_BOOK_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.unlikeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!1,i.likesCount-=1})}),o()(t,s.TOGGLE_LIKE_BOOK_COMMENT,function(e,t){var n=e.dispatch,i=t.comment,r=t.entry;return n(i.liked?s.UNLIKE_BOOK_COMMENT:s.LIKE_BOOK_COMMENT,{comment:i,entry:r})}),o()(t,s.SUBMIT_BOOK_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.content;t.imageUrl;return n.submitComment({sectionId:i.id,replyUserId:i.user.id,content:r})}),o()(t,s.REPLY_BOOK_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.parent,o=t.tar,a=t.content;return n.replyComment({entryId:i.id,replyUserId:o.user.id,replyCommentId:o.id,parentId:r.id,content:a})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"bookComment/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"repoCommentService\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_REPO_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.likeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!0,i.likesCount+=1})}),o()(t,s.UNLIKE_REPO_COMMENT,function(e,t){var i=(e.commit,t.comment),r=t.entry;return n.unlikeComment({commentId:i.id,entryId:r.id}).then(function(){i.liked=!1,i.likesCount-=1})}),o()(t,s.TOGGLE_LIKE_REPO_COMMENT,function(e,t){var n=e.dispatch,i=t.comment,r=t.entry;return n(i.liked?s.UNLIKE_REPO_COMMENT:s.LIKE_REPO_COMMENT,{comment:i,entry:r})}),o()(t,s.SUBMIT_REPO_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.content;return n.submitComment({entryId:i.id,replyUserId:\"577e2b692e958a0054a955a2\",content:r})}),o()(t,s.REPLY_REPO_COMMENT,function(e,t){var i=(e.commit,t.entry),r=t.parent,o=t.tar,a=t.content;return n.replyComment({entryId:i.id,replyUserId:o.user.id,replyCommentId:o.id,parentId:r.id,content:a})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"repoComment/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){return{state:{list:[]},mutations:o()({},c,function(e,t){u()(e,t)}),getters:o()({},s.CATEGORY_LIST,function(e){return e.list}),actions:o()({},s.SET_CATEGORY_LIST,function(e,t){(0,e.commit)(c,{list:t})})}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"category/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"userService\");return{state:{subscribedTagList:[]},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.UPDATE_USER_AVATAR,function(e,t){var i=(e.commit,e.rootState),r=i.auth.user;return n.updateCurrentUserAvatar(t).then(function(){r.avatar=t})}),o()(t,s.UPDATE_USER_INFO,function(e,t){var i=(e.commit,e.rootState),r=t.field,o=t.value,a=i.auth.user;return n.updateCurrentUserInfo(r,o).then(function(){a[r]=o})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"tag/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"notificationRepository\"),i=e.getBean(\"notificationService\");return{state:{unreadCount:{user:0,system:0,total:0}},getters:c()({},l.UNREAD_NOTIFICATION_COUNT,function(e){return e.unreadCount}),mutations:c()({},d,function(e,t){u()(e,t)}),actions:(t={},c()(t,l.FETCH_UNREAD_NOTIFICATION_COUNT,function(e){var t=e.commit;if(e.rootState.auth.user)return o.a.all([n.getUnreadUserNotificationCount(),n.getUnreadSystemNotificationCount()]).then(function(e){t(d,{unreadCount:{user:e[0],system:e[1],total:e[0]+e[1]}})})}),c()(t,l.RESET_UNREAD_NOTIFICATION_COUNT,function(e){(0,e.commit)(d,{unreadCount:{user:0,system:0,total:0}})}),c()(t,l.READ_USER_NOTIFICATION,function(e){var t=(e.commit,e.dispatch);return i.readAllUserNotification().then(function(){return t(l.FETCH_UNREAD_NOTIFICATION_COUNT)})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(5),o=n.n(r),a=n(3),u=n.n(a),s=n(6),c=n.n(s),l=n(10),d=\"notification/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t=e.getBean(\"authStateService\"),n=e.getBean(\"walletService\");return{state:{hasWallet:!1},getters:u()({},s.HAS_WALLET,function(e){return e.hasWallet}),mutations:u()({},c,function(e,t){o()(e,t)}),actions:u()({},s.FETCH_WALLET_STATE,function(e){var i=e.commit,r=t.getCurrentUserId();return n.hasWallet(r).then(function(e){i(c,{hasWallet:e})})})}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(3),o=n.n(r),a=n(6),u=n.n(a),s=n(10),c=\"wallet/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"followService\");return{state:{subscribedTagList:[]},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.FOLLOW_USER,function(e,t){var i=(e.commit,e.rootState),r=i.auth.user;return n.followUser(t.id).then(function(){t.followed=!0,t.followerCount++,r.followingCount++})}),o()(t,s.UNFOLLOW_USER,function(e,t){var i=(e.commit,e.rootState),r=i.auth.user;return n.unfollowUser(t.id).then(function(){t.followed=!1,t.followerCount--,r.followingCount--})}),o()(t,s.TOGGLE_FOLLOW_USER,function(e,t){return(0,e.dispatch)(t.followed?s.UNFOLLOW_USER:s.FOLLOW_USER,t)}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"tag/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){function t(){return{location:null,errorView:null,statusCode:200}}var n,i;return{state:t(),getters:(n={},u()(n,c.ERROR_VIEW,function(e){return e.errorView}),u()(n,c.STATUS_CODE,function(e){return e.statusCode}),n),mutations:u()({},l,function(e,t){o()(e,t)}),actions:(i={},u()(i,c.SET_STATUS_CODE,function(e,t){(0,e.commit)(l,{statusCode:t})}),u()(i,c.SHOW_NOT_FOUND_VIEW,function(e){(0,e.commit)(l,{errorView:\"NotFoundView\",statusCode:404})}),u()(i,c.SHOW_ERROR_VIEW,function(e){(0,e.commit)(l,{errorView:\"ErrorView\",statusCode:500})}),u()(i,c.RESET_ERROR_STATE,function(e){(0,e.commit)(l,t())}),u()(i,c.MOVED_PERMANENTLY,function(e,t){var n=e.commit;s.a?n(l,{location:t,statusCode:301}):window.location.href=t}),u()(i,c.MOVED_TEMPORARILY,function(e,t){var n=e.commit;s.a?n(l,{location:t,statusCode:302}):window.location.href=t}),i)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(3),o=n.n(r),a=n(6),u=n.n(a),s=n(31),c=n(10),l=\"error/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){return{state:{info:{}},getters:u()({},s.AB_TEST_INFO,function(e){return e.info}),mutations:u()({},c,function(e,t){o()(e,t)}),actions:u()({},s.SET_AB_TEST_INFO,function(e,t){var n=e.commit;e.rootState;n(c,{info:t})})}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(3),o=n.n(r),a=n(6),u=n.n(a),s=n(10),c=\"abTest/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){return{state:{needSuspension:!0},getters:u()({},s.NEED_SUSPENSION,function(e){return e.needSuspension}),mutations:u()({},c,function(e,t){o()(e,t)}),actions:u()({},s.CHANGE_SUSPENSION_PANEL,function(e,t){var n=e.commit;e.state;n(c,{needSuspension:t})})}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(3),o=n.n(r),a=n(6),u=n.n(a),s=n(10),c=\"suspensionPanel/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"pinCommentService\");return{state:{},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_PIN_COMMENT,function(e,t){e.commit;return n.likePinComment({commentId:t.id,targetId:t.targetId}).then(function(){t.liked=!0,t.likeCount++})}),o()(t,s.UNLIKE_PIN_COMMENT,function(e,t){e.commit;return n.unlikePinComment({commentId:t.id,targetId:t.targetId}).then(function(){t.liked=!1,t.likeCount--})}),o()(t,s.TOGGLE_LIKE_PIN_COMMENT,function(e,t){return(0,e.dispatch)(t.liked?s.UNLIKE_PIN_COMMENT:s.LIKE_PIN_COMMENT,t)}),o()(t,s.SUBMIT_PIN_COMMENT,function(e,t){var i=(e.commit,t.pin),r=t.content,o=t.imageUrl;return n.submitComment({pinId:i.id,replyUserId:i.user.id,content:r,imageUrl:o}).then(function(){i.commentCount++})}),o()(t,s.REPLY_PIN_COMMENT,function(e,t){var i=(e.commit,t.pin),r=t.parent,o=t.tar,a=t.content,u=t.imageUrl;return n.replyComment({pinId:i.id,replyUserId:o.user.id,replyCommentId:o.id,parentId:r.id,content:a,imageUrl:u}).then(function(){i.commentCount++,r.replyCount++})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"pin-comment/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n=e.getBean(\"pinService\");return{state:{deleteDialogVisible:!1,reportDialogVisible:!1,targetPin:null},mutations:o()({},c,function(e,t){u()(e,t)}),actions:(t={},o()(t,s.LIKE_PIN,function(e,t){e.commit;return n.likePin(t.id).then(function(){t.liked=!0,t.likeCount+=1})}),o()(t,s.UNLIKE_PIN,function(e,t){e.commit;return n.unlikePin(t.id).then(function(){t.liked=!1,t.likeCount-=1})}),o()(t,s.TOGGLE_LIKE_PIN,function(e,t){return(0,e.dispatch)(t.liked?s.UNLIKE_PIN:s.LIKE_PIN,t)}),o()(t,s.TOGGLE_DELETE_PIN_DIALOG,function(e,t){(0,e.commit)(c,{deleteDialogVisible:t})}),o()(t,s.TOGGLE_REPORT_PIN_DIALOG,function(e,t){(0,e.commit)(c,{reportDialogVisible:t})}),o()(t,s.SET_TARGET_PIN,function(e,t){(0,e.commit)(c,{targetPin:t})}),o()(t,s.UPDATE_BROWSING_PIN,function(e,t){(0,e.commit)(c,{browsingPinId:t})}),t)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"pin/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){var t,n,i=e.getBean(\"topicService\");return{state:{visible:!1},mutations:(t={},o()(t,c,function(e,t){u()(e,t)}),o()(t,s.TOGGLE_VISIBLE,function(e){e.visible=!e.visible}),t),actions:(n={},o()(n,s.FOLLOW_TOPIC,function(e,t){e.commit;return i.followTopic(t.id).then(function(){t.followed=!0,t.followersCount+=1})}),o()(n,s.UNFOLLOW_TOPIC,function(e,t){e.commit;return i.unfollowTopic(t.id).then(function(){t.followed=!1,t.followersCount-=1})}),o()(n,s.TOGGLE_FOLLOW_TOPIC,function(e,t){return(0,e.dispatch)(t.followed?s.UNFOLLOW_TOPIC:s.FOLLOW_TOPIC,t)}),n)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.createModule=i;var r=n(6),o=n.n(r),a=n(3),u=n.n(a),s=n(10),c=\"topic/UPDATE_STATE\"},function(e,t,n){\"use strict\";function i(e){function t(e,t,n){return e.hash?{selector:e.hash}:{x:0,y:0}}var i=e.getBean(\"authStateService\"),r=new o.default({mode:\"history\",saveScrollPosition:!0,linkActiveClass:\"route-active\",scrollBehavior:t,routes:a.a});if(r.beforeEach(function(e,t,n){t.name&&r.app.$store.getters.ERROR_VIEW&&e.fullPath!==t.fullPath?window.location.href=e.fullPath:n()}),r.beforeEach(function(e,t,n){var o=e.matched.some(function(e){return e.meta.authorized}),a=e.matched.some(function(e){return e.meta.unauthorized}),u=i.authorized();o&&!u?(r.app.$setStatusCode(401),n({path:\"/\"})):a&&u?n({name:\"timelineIndex\"}):(\"notFound\"===e.name&&r.app.$setStatusCode(404),n())}),r.beforeEach(function(e,t,n){\"index\"===e.name?n({name:i.authorized()?\"timelineIndex\":\"welcome\"}):n()}),!u.a){var s=n(215),c=null;r.beforeEach(function(e,t,n){t.name&&(c=setTimeout(function(){s.start()},1e3)),n()}),r.afterEach(function(t){clearTimeout(c),s.done(),e.getBean(\"wechatBusiness\").updateAuthInfo(t.fullPath)})}return r}t.a=i;var r=n(86),o=n(213),a=n(670),u=n(31);r.default.use(o.default)},function(e,t,n){\"use strict\";t.a=[{path:\"/welcome/:category?\",name:\"welcome\",alias:\"/\",meta:{unauthorized:!0},component:function(){return n.e(2).then(n.bind(null,910))}},{path:\"/timeline/:category?\",name:\"timelineIndex\",meta:{authorized:!0},component:function(){return n.e(8).then(n.bind(null,911))}},{path:\"/getting-started\",name:\"gettingStarted\",meta:{authorized:!0},component:function(e){return n.e(24).then(function(){var t=[n(912)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:\"/reset-password\",name:\"resetPassword\",component:function(){return n.e(39).then(n.bind(null,913))}},{path:\"/book/m/me\",name:\"bookWapMe\",component:function(){return n.e(25).then(n.bind(null,914))}},{path:\"/book/m/bought\",name:\"bookWapBought\",component:function(){return n.e(20).then(n.bind(null,915))}},{path:\"/book/m/:id/section/:sectionId?\",name:\"bookWapSection\",component:function(){return n.e(11).then(n.bind(null,916))}},{path:\"/books/:category?\",name:\"booksIndex\",component:function(){return n.e(13).then(n.bind(null,917))}},{path:\"/book/:id\",name:\"bookInfo\",component:function(){return n.e(12).then(n.bind(null,918))}},{path:\"/book/:id/section/:sectionId?\",name:\"bookSection\",component:function(){return n.e(6).then(n.bind(null,919))}},{path:\"/events/:city?\",name:\"eventsIndex\",component:function(){return n.e(27).then(n.bind(null,920))}},{path:\"/set-new-password\",name:\"setNewPassword\",component:function(){return n.e(41).then(n.bind(null,921))}},{path:\"/entry/:id([a-zA-Z0-9]{24})\",name:\"entryPublic\",component:function(){return n.e(5).then(n.bind(null,922))}},{path:\"/entry/:id([a-zA-Z0-9]{24})/detail/:commentId([a-zA-Z0-9]{24})?\",name:\"entryDetail\",alias:\"/entry/:id([a-zA-Z0-9]{24})/detail/answer/:commentId([a-zA-Z0-9]{24})?\",component:function(){return n.e(3).then(n.bind(null,923))}},{path:\"/zhuanlan/:category?\",name:\"columnIndex\",component:function(){return n.e(19).then(n.bind(null,924))}},{path:\"/collections/:type?\",name:\"collectionIndex\",component:function(){return n.e(15).then(n.bind(null,925))}},{path:\"/repos\",name:\"repoIndex\",component:function(){return n.e(21).then(n.bind(null,926))}},{path:\"/repos/filtered\",name:\"repoFilteredIndex\",component:function(){return n.e(30).then(n.bind(null,927))}},{path:\"/explore/:category?\",name:\"exploreIndex\",component:function(){return n.e(10).then(n.bind(null,928))}},{path:\"/new-entry\",name:\"shareEntry\",meta:{authorized:!0},component:function(){return n.e(29).then(n.bind(null,929))}},{path:\"/edit-entry/:id([a-zA-Z0-9]{24})\",name:\"editEntry\",meta:{authorized:!0},component:function(){return n.e(28).then(n.bind(null,930))}},{path:\"/published\",name:\"published\",meta:{authorized:!0},component:function(){return n.e(26).then(n.bind(null,931))}},{path:\"/notification\",meta:{authorized:!0},component:function(){return n.e(47).then(n.bind(null,932))},children:[{path:\"\",name:\"notification\",component:function(){return n.e(23).then(n.bind(null,933))}},{path:\"system\",name:\"notification:system\",component:function(){return n.e(22).then(n.bind(null,934))}}]},{path:\"/user/settings\",name:\"setting\",meta:{authorized:!0},redirect:{name:\"setting:profile\"},component:function(){return n.e(46).then(n.bind(null,935))},children:[{path:\"profile\",name:\"setting:profile\",component:function(){return n.e(38).then(n.bind(null,936))}},{path:\"account\",name:\"setting:account\",component:function(){return n.e(31).then(n.bind(null,937))}},{path:\"password\",name:\"setting:password\",component:function(){return n.e(40).then(n.bind(null,938))}},{path:\"/user/invitation\",name:\"setting:invitation\",component:function(){return n.e(43).then(n.bind(null,939))}},{path:\"mail\",name:\"setting:mail\",component:function(){return n.e(42).then(n.bind(null,940))}},{path:\"book-award\",name:\"setting:book-award\",component:function(){return n.e(35).then(n.bind(null,941))}}]},{path:\"/user/wallet\",name:\"wallet\",meta:{authorized:!0},component:function(){return n.e(37).then(n.bind(null,942))}},{path:\"/user/:id([a-zA-Z0-9]{24})/:type?\",name:\"user\",component:function(){return n.e(0).then(n.bind(null,943))}},{path:\"/subscribe\",name:\"subscribe\",redirect:\"/subscribe/subscribed\",component:function(){return n.e(45).then(n.bind(null,944))},children:[{path:\"subscribed\",name:\"subscribe:subscribed\",meta:{authorized:!0},component:function(){return n.e(33).then(n.bind(null,945))}},{path:\"all\",name:\"subscribe:all\",component:function(){return n.e(34).then(n.bind(null,946))}}]},{path:\"/tag/:title\",name:\"tag\",component:function(){return n.e(16).then(n.bind(null,947))}},{path:\"/search\",name:\"search\",component:function(){return n.e(17).then(n.bind(null,948))}},{path:\"/post/:id([a-zA-Z0-9]{24})\",name:\"column\",component:function(){return n.e(1).then(n.bind(null,949))}},{path:\"/collection/:id([a-zA-Z0-9]{24})\",name:\"collection\",component:function(){return n.e(14).then(n.bind(null,950))}},{path:\"/repo/:id([a-zA-Z0-9]{24})/edit\",name:\"editRepo\",component:function(){return n.e(36).then(n.bind(null,951))}},{path:\"/repo/:id([a-zA-Z0-9]{24})\",name:\"repo\",component:function(){return n.e(18).then(n.bind(null,952))}},{path:\"/pins/:type?\",name:\"pinIndex\",component:function(){return n.e(4).then(n.bind(null,953))}},{path:\"/topics\",name:\"topicIndex\",component:function(){return n.e(32).then(n.bind(null,954))}},{path:\"/topic/:id([a-zA-Z0-9]{24})\",name:\"topic\",component:function(){return n.e(7).then(n.bind(null,955))}},{path:\"/pin/:id([a-zA-Z0-9]{24})\",name:\"pin\",component:function(){return n.e(9).then(n.bind(null,956))}},{path:\"/feedback\",name:\"feedback\",component:function(){return n.e(44).then(n.bind(null,957))}},{path:\"*\",name:\"notFound\",component:function(){return new Promise(function(e){e()}).then(n.bind(null,191))}}]},function(e,t){},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(95),r=n(157),o=n(39),a=n.n(o);t.default={components:{Lazy:a.a},props:[\"user\",\"size\",\"immediate\",\"decorative\"],computed:{defaultAvatarUrl:function(){return i.b},avatarUrl:function(){var e=this.user&&this.user.avatar||i.b,t=this.size||i.a;return Object(r.a)(e,t,t)},xmas:function(){return Date.now().8*r)},e)}}function o(){return[\"hidden\",\"webkitHidden\",\"mozHidden\",\"msHidden\"].find(function(e){return void 0!==document[e]})}Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var a=n(0),u=n.n(a),s=n(1),c=n.n(s),l=n(36),d=\"https://a.app.qq.com/o/simple.jsp?pkgname=com.daimajia.gold\",f={pin:\"XTNewVote\"},h=function(){function e(){u()(this,e)}return c()(e,[{key:\"canOpenInApp\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return!Object(l.a)()||/^\\/pin\\//.test(e)}},{key:\"openInApp\",value:function(e,t){if(Object(l.c)()){var n=window.location.href,o=\"/awakening/wechat?url=\"+encodeURIComponent(n);window.location=o}else window.location=i(e,t),r(3e3,function(e){e&&(window.location=d)})}},{key:\"openAppDownloadPage\",value:function(){window.open(d,\"_blank\")}}]),e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pageService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getPageInfo\",value:function(e){return this.pageService.getPageInfo(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return o});var i=n(0),r=n.n(i),o=function e(){r()(this,e)}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoCommentRepository\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getSubCommentList\",value:function(e){return this.repoCommentRepository.getSubCommentList(e)}}]),e}())||r},function(e,t,n){\"use strict\";function i(){var e=+window.localStorage.getItem(f)||0;return Date.now()-e}Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var r,o,a=n(0),u=n.n(a),s=n(1),c=n.n(s),l=n(31),d=n(2),f=\"RH_ClosedTime\",h=(r=Object(d.b)([\"eventBus\"]))(o=function(){function e(){u()(this,e)}return c()(e,[{key:\"init\",value:function(){if(!l.a){var e=this.eventBus.eventType,t=e.CROSS_DOMAIN_ERROR,n=e.CLOSE_REQUEST_HEALTH_ALERT;this.eventBus.on(t,this.onError.bind(this)),this.eventBus.on(n,this.onClose.bind(this))}}},{key:\"onError\",value:function(){var e=window.sessionStorage,t=(+e.getItem(\"RH_ErrorCount\")||0)+1;i()2?(this.eventBus.emit(this.eventBus.eventType.SHOW_REQUEST_HEALTH_ALERT),e.setItem(\"RH_ErrorCount\",0)):e.setItem(\"RH_ErrorCount\",t))}},{key:\"onClose\",value:function(){window.localStorage.setItem(f,Date.now())}}]),e}())||o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(95),l=n(159),d=n(2),f=\"https://juejin.im\",h=(i=Object(d.b)([\"authStateService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"shareAnswerToWeibo\",value:function(e,t){var n=this.getAnswerWeiboShareUrl(e,t);window.open(n,\"_blank\")}},{key:\"getAnswerWeiboShareUrl\",value:function(e,t){var n=(t.screenshot,f+\"/entry/\"+t.id+\"/detail/answer/\"+e.id),i=this._getUserWeiboNickname(e.user),r=t.title+\" - \"+i+\" 的回答 @掘金技术社区 \";return this._getWeiboShareUrl(n,r,t.screenshot)}},{key:\"_getUserWeiboNickname\",value:function(e){return((e.community||{}).weibo||{}).nickname||e.username}},{key:\"_getWeiboShareUrl\",value:function(e,t,n){return[\"https://service.weibo.com/share/share.php\",\"?title=\"+encodeURIComponent(t),\"&url=\"+encodeURIComponent(e),\"&pic=\"+encodeURIComponent(n||c.g)].join(\"\")}},{key:\"sharePinToWeibo\",value:function(e){var t=this.getPinWeiboShareUrl(e);window.open(t,\"_blank\")}},{key:\"getPinWeiboShareUrl\",value:function(e){var t=f+\"/pin/\"+e.id,n=\" \"+t+\" (想看更多沸点，下载 @掘金技术社区 App:http://t.cn/RL4EwOg ) #掘金沸点#\",i=Object(l.b)(e.content,140-n.length),r=(i+n).trim(),o=(e.imageUrlList||[])[0]||e.user.avatar;return this._getWeiboShareUrl(t,r,o)}},{key:\"shareEntryToWeibo\",value:function(e){var t=this._getUtmUrl(this._getEntryUrl(e),\"weibo\"),n=this._getEntryShareWord(e),i=this._getWeiboShareUrl(t,n,e.screenshot);window.open(i,\"_blank\")}},{key:\"_getEntryUrl\",value:function(e){return\"post\"===e.type?e.originalUrl:f+\"/entry/\"+e.id}},{key:\"_getEntryShareWord\",value:function(e){var t=this._getUserWeiboNickname(e.user);if(\"post\"===e.type)return e.title+\" - \"+t+\" - 掘金专栏\";var n=e.content?\" - \"+e.content:\"\";return\"@\"+t+\" 在 @掘金技术社区 分享：\"+e.title+n}},{key:\"_getUtmUrl\",value:function(e,t){var n=this.authStateService.getCurrentUser(),i=\"admin\"===(n||{}).role,r=i?\"admin\":\"user\";return e+(/\\?/.test(e)?\"#\":\"?\")+\"utm_source=\"+t+\"&utm_campaign=\"+r}},{key:\"shareEntryToPocket\",value:function(e){var t=[\"https://getpocket.com/edit\",\"?url=\"+encodeURIComponent(this._getEntryUrl(e))].join(\"\");window.open(t,\"_blank\")}},{key:\"shareEntryToEvernote\",value:function(e){var t=[\"https://www.addtoany.com/add_to/evernote\",\"?linkurl=\"+encodeURIComponent(this._getEntryUrl(e)),\"&linkname=\"+encodeURIComponent(e.title)].join(\"\");window.open(t,\"_blank\")}},{key:\"shareEntryToQQ\",value:function(e){var t=e.title+\" - \"+e.user.username+\" - 掘金\",n=[\"https://connect.qq.com/widget/shareqq/index.html\",\"?url=\"+encodeURIComponent(this._getEntryUrl(e)),\"&title=\"+encodeURIComponent(t),\"&summary=\"+encodeURIComponent(e.abstract||e.content),\"&pics=\"+encodeURIComponent(e.screenshot||\"https://b-gold-cdn.xitu.io/favicons/favicon-300x300.png\"),\"&site=\"+encodeURIComponent(\"掘金\")].join(\"\");window.open(n,\"_blank\")}},{key:\"shareBookToWeibo\",value:function(e){var t=f+\"/book/\"+e.id,n=this._getUserWeiboNickname(e.user),i=e.title+\" - \"+n+\" - 掘金小册\",r=this._getUtmUrl(t,\"weibo\"),o=this._getWeiboShareUrl(r,i,e.img);window.open(o,\"_blank\")}},{key:\"shareCollectionToWeibo\",value:function(e){var t=f+\"/collection/\"+e.id,n=this._getUserWeiboNickname(e.author),i=this._getUtmUrl(t,\"weibo\"),r=e.own?\"我在掘金上创建了一个收藏集「\"+e.title+\"」，推荐给你。来自 @掘金技术社区\":\"我在掘金上发现了一个收藏集「\"+e.title+\"」，作者是 @\"+n+\" ，推荐给你。来自 @掘金技术社区\",o=this._getWeiboShareUrl(i,r,e.imageUrl);window.open(o,\"_blank\")}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return d});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(11),l=n(2),d=(i=Object(l.b)([\"tagRepository\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getSuggestedTagList\",value:function(e){var t=(new c.a).page(1).pageSize(20);return this.tagRepository.searchTag(e,t)}},{key:\"getGettingStartedCategroy\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,i=e.pageSize,r=void 0===i?20:i;return this.tagRepository.getSuggestTagList({suggestType:\"category\",page:n,pageSize:r})}},{key:\"getGettingStartedTag\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,i=e.pageSize,r=void 0===i?20:i;return this.tagRepository.getSuggestTagList({suggestType:\"tag\",page:n,pageSize:r})}},{key:\"isContainedByTitle\",value:function(e,t){return!(e.length0&&void 0!==arguments[0]?arguments[0]:\"\";window.sessionStorage.setItem(\"paymentStatus\",e)}},{key:\"toAppPay\",value:function(e){var t=e.payWay,n=e.metaId,i=e.promotionType,r=e.promotionParams,o=e.adLinkSrc,u=this.getAuthDescriptor(this.authStateService.getAuthInfo());if(t===g.c){var c=s()(u,{metaId:n,promotionType:i,type:\"wxpayJSAPI\",adLinkSrc:o,promotionParams:a()(r)}),l=Object(p.g)(c),d=\"https://xiaoce-order-api-ms.juejin.im/v1/wxpay?\"+l;window.location.href=d}else{var f=s()(u,{metaId:n,promotionType:i,type:\"alipayWAP\",adLinkSrc:o,promotionParams:a()(r)}),h=Object(p.g)(f),m=\"https://xiaoce-order-api-ms.juejin.im/v1/alipay?\"+h;window.location.href=m}}},{key:\"freeDiscount\",value:function(e){return this.xiaoceService.freeDiscount(e)}},{key:\"getUserBuyList\",value:function(e){var t=e.uid;return this.xiaoceService.getUserBuyList({uid:t})}},{key:\"getXiaoceList\",value:function(e,t){return this.xiaoceService.getXiaoceList(e,t)}},{key:\"setXiaoceInfoView\",value:function(e){return this.xiaoceService.setXiaoceInfoView(e)}},{key:\"setXiaoceSectionView\",value:function(e){var t=e.id,n=e.sectionId;return this.xiaoceService.setXiaoceSectionView({id:t,sectionId:n})}},{key:\"getXiaoceHot\",value:function(){return this.xiaoceService.getXiaoceHot()}},{key:\"setXiaoceHot\",value:function(e){var t=e.id,n=e.isHot;return this.xiaoceService.setXiaoceHot({id:t,isHot:n})}},{key:\"setXiaoceTop\",value:function(e){var t=e.id,n=e.isTop;return this.xiaoceService.setXiaoceTop({id:t,isTop:n})}},{key:\"getNewUserTicketDetail\",value:function(){return this.xiaoceService.getNewUserTicketDetail()}},{key:\"obtainNewUserTicket\",value:function(){return this.xiaoceService.obtainNewUserTicket()}},{key:\"getNewuserTicketStatistic\",value:function(e){return this.xiaoceService.getNewuserTicketStatistic(e)}},{key:\"checkDiscount\",value:function(e){var t=e.metaId,n=e.code;return this.xiaoceService.checkDiscount({metaId:t,code:n})}},{key:\"dealtFreeOrder\",value:function(e){var t=e.metaId,n=e.code,i=e.uid,r=e.type;return this.xiaoceService.checkDiscount({metaId:t,code:n,uid:i,type:r})}},{key:\"getRecommendBooks\",value:function(e){var t=e.category;return this.xiaoceService.getRecommendBooks({category:t})}},{key:\"getSelfDistributorInfo\",value:function(e){var t=e.uid;return this.xiaoceService.getSelfDistributorInfo({uid:t})}},{key:\"getSelfDistributionList\",value:function(e){return this.xiaoceService.getSelfDistributionList(e)}},{key:\"getXiaoceInviterInfo\",value:function(e){return this.xiaoceService.getXiaoceInviterInfo(e)}},{key:\"getSourceDiscount\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{metaId:\"\",adLinkSrc:\"\"},t=e.metaId,n=e.adLinkSrc;return this.xiaoceService.getSourceDiscount({metaId:t,adLinkSrc:n})}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",client_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o=n(3),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(2),f=n(92),h=(i=Object(d.b)([\"commentBookRepository\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"fromDescriptorSubComment\",value:function(e){return e.slice(0,5).map(this.resolveComment.bind(this))}},{key:\"getCommentList\",value:function(e){return this.commentBookRepository.getCommentList(e)}},{key:\"getSubCommentList\",value:function(e){return this.commentBookRepository.getSubCommentList(e)}},{key:\"resolveComment\",value:function(e){return f.a.fromDescriptor(a()(e,{liked:e.isLiked}))}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=(n(31),n(2)),l=(i=Object(c.b)([\"authApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"loginWithEmail\",value:function(e,t){return this.authApi.loginWithEmail(e,t)}},{key:\"loginWithPhoneNumber\",value:function(e,t){return this.authApi.loginWithPhoneNumber(e,t)}},{key:\"logout\",value:function(){return this.authApi.logout()}},{key:\"registerWithPhone\",value:function(e){return this.authApi.registerWithPhone(e)}},{key:\"sendPasswordResetToken\",value:function(e){return this.authApi.sendPasswordResetToken(e)}},{key:\"sendPasswordResetVcode\",value:function(e,t,n){return this.authApi.sendPasswordResetVcode(e,t,n)}},{key:\"resetPasswordWithPhone\",value:function(e,t,n){return this.authApi.resetPasswordWithPhone(e,t,n)}},{key:\"resetPasswordWithToken\",value:function(e,t){return this.authApi.resetPasswordWithToken(e,t)}},{key:\"updatePassword\",value:function(e,t){return this.authApi.updatePassword(e,t)}},{key:\"sendRegisterVcode\",value:function(e,t,n){return this.authApi.sendRegisterVcode(e,t,n)}},{key:\"getRandCode\",value:function(){return this.authApi.getRandCode()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i=n(3),r=n.n(i),o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=function(){function e(){a()(this,e),this.store=null}return s()(e,[{key:\"bindStore\",value:function(e){this.store=e}},{key:\"getCurrentUser\",value:function(){return this.store.state.auth.user}},{key:\"getCurrentUserId\",value:function(){return(this.getCurrentUser()||{}).id}},{key:\"authorized\",value:function(){return!!this.getCurrentUser()}},{key:\"getToken\",value:function(){return this.store.state.auth.token}},{key:\"getClientId\",value:function(){return this.store.state.auth.clientId}},{key:\"getAuthInfo\",value:function(){var e=this.store.state.auth;return r()(e,{userId:(e.user||{}).id})}}]),e}()},function(e,t,n){\"use strict\";function i(){return h.a?[]:JSON.parse(window.localStorage.getItem(g)||\"[]\")}Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return m});var r,o,a=n(77),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(75),h=n(31),p=n(2),g=\"JUEJIN_BANNERS\",m=(r=Object(p.b)([\"bannerApi\"]))(o=function(){function e(){c()(this,e)}return d()(e,[{key:\"getBannerList\",value:function(e){var t=i();return this.bannerApi.getBannerList(e).then(function(e){return e.filter(function(e){return-1===t.indexOf(e.id)})})}},{key:\"saveClosedBannerId\",value:function(e){if(!h.a){var t=i();t.push(e),window.localStorage.setItem(g,u()(Object(f.c)(t)))}}}]),e}())||o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"behaviorApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"recordPageView\",value:function(){return this.behaviorApi.recordPageView()}},{key:\"recordAction\",value:function(e){return this.behaviorApi.recordAction(e)}},{key:\"recordEntryFetch\",value:function(e){return this.behaviorApi.recordEntryFetch(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"bindApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"unbindWeibo\",value:function(){return this.bindApi.unbindWeibo()}},{key:\"unbindWechat\",value:function(){return this.bindApi.unbindWechat()}},{key:\"unbindGithub\",value:function(){return this.bindApi.unbindGithub()}},{key:\"bindEmail\",value:function(e){return this.bindApi.bindEmail(e)}},{key:\"unbindEmail\",value:function(){return this.bindApi.unbindEmail()}},{key:\"sendPhoneBindVcode\",value:function(e,t,n){return this.bindApi.sendPhoneBindVcode(e,t,n)}},{key:\"bindPhone\",value:function(e,t){return this.bindApi.bindPhone(e,t)}},{key:\"unbindPhone\",value:function(){return this.bindApi.unbindPhone()}},{key:\"sendEmailVerifyToken\",value:function(e){return this.bindApi.sendEmailVerifyToken(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"cdnApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"uploadFile\",value:function(e){return this.cdnApi.uploadFile(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"collectionApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getHotTagList\",value:function(e){return this.collectionApi.getHotTagList(e)}},{key:\"followCollection\",value:function(e){return this.collectionApi.followCollection(e)}},{key:\"unfollowCollection\",value:function(e){return this.collectionApi.unfollowCollection(e)}},{key:\"getUserCollectionCount\",value:function(e){return this.collectionApi.getUserCollectionCount(e)}},{key:\"updateCollection\",value:function(e){return this.collectionApi.updateCollection(e)}},{key:\"collectEntry\",value:function(e,t){return this.collectionApi.collectEntry(e,t)}},{key:\"uncollectEntry\",value:function(e,t){var n=this;return this.collectionApi.uncollectEntry(e,t).then(function(){return n.collectionApi.hasCollectedEntry([e])}).then(function(e){return e[0]})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"commentBookApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"submitComment\",value:function(e){return this.commentBookApi.submitComment(e)}},{key:\"replyComment\",value:function(e){return this.commentBookApi.replyComment(e)}},{key:\"likeComment\",value:function(e){return this.commentBookApi.likeComment(e)}},{key:\"unlikeComment\",value:function(e){return this.commentBookApi.unlikeComment(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"commentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"submitComment\",value:function(e){return this.commentApi.submitComment(e)}},{key:\"replyComment\",value:function(e){return this.commentApi.replyComment(e)}},{key:\"likeComment\",value:function(e){return this.commentApi.likeComment(e)}},{key:\"unlikeComment\",value:function(e){return this.commentApi.unlikeComment(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"entryApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getRelatedEntryList\",value:function(e,t){return this.entryApi.getRelatedEntryList(e,t)}},{key:\"recommendEntry\",value:function(e){return this.entryApi.recommendEntry(e)}},{key:\"unrecommendEntry\",value:function(e){return this.entryApi.unrecommendEntry(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"followApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"hasFollowedUser\",value:function(e){return this.followApi.hasFollowedUser(e)}},{key:\"hasFollowedUserList\",value:function(e){return this.followApi.hasFollowedUserList(e)}},{key:\"followUser\",value:function(e){return this.followApi.followUser(e)}},{key:\"unfollowUser\",value:function(e){return this.followApi.unfollowUser(e)}},{key:\"getFolloweInfo\",value:function(e){return this.followApi.getFolloweInfo(e)}},{key:\"getFollowerList\",value:function(e,t){return this.followApi.getFollowerList(e,t)}},{key:\"getFolloweeList\",value:function(e,t){return this.followApi.getFolloweeList(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"inviteApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"fetchInvitationCount\",value:function(){return this.inviteApi.fetchInvitationCount()}},{key:\"sendInvitationCode\",value:function(e,t){return this.inviteApi.sendInvitationCode(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"likeApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"likeEntry\",value:function(e){return this.likeApi.likeEntry(e)}},{key:\"unlikeEntry\",value:function(e){return this.likeApi.unlikeEntry(e)}},{key:\"hasLikedEntry\",value:function(e){return this.likeApi.hasLikedEntry(e)}},{key:\"getUserLikedEntryList\",value:function(e,t){return this.likeApi.getUserLikedEntryList(e,t)}},{key:\"getEntryLikerList\",value:function(e,t){return this.likeApi.getEntryLikerList(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return u});var i=n(0),r=n.n(i),o=n(1),a=n.n(o),u=function(){function e(){r()(this,e),this.url=null}return a()(e,[{key:\"updateUrl\",value:function(e){this.url=e}},{key:\"getUrl\",value:function(){return this.url}}]),e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"mailPushApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getMailPushStatus\",value:function(e){return this.mailPushApi.getMailPushStatus(e)}},{key:\"setMailPushStatus\",value:function(e,t){return this.mailPushApi.setMailPushStatus(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"notificationApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"readAllUserNotification\",value:function(){return this.notificationApi.readAllUserNotification()}},{key:\"readAllSystemNotification\",value:function(){return this.notificationApi.readAllSystemNotification()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pageApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getPageInfo\",value:function(e){return this.pageApi.getPageInfo(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pinCommentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"likePinComment\",value:function(e){return this.pinCommentApi.likePinComment(e)}},{key:\"unlikePinComment\",value:function(e){return this.pinCommentApi.unlikePinComment(e)}},{key:\"submitComment\",value:function(e){return this.pinCommentApi.submitComment(e)}},{key:\"replyComment\",value:function(e){return this.pinCommentApi.replyComment(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pinApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"likePin\",value:function(e){return this.pinApi.likePin(e)}},{key:\"unlikePin\",value:function(e){return this.pinApi.unlikePin(e)}},{key:\"createPin\",value:function(e){return this.pinApi.createPin(e)}},{key:\"deletePin\",value:function(e){return this.pinApi.deletePin(e)}},{key:\"report\",value:function(e){return this.pinApi.report(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"linkApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getLinkInfoByUrl\",value:function(e){return this.linkApi.getLinkInfo(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(n(11),(i=Object(c.b)([\"recommendEntryApi\",\"entryApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getRecommendEntryList\",value:function(){return this.recommendEntryApi.getRecommendEntryList()}}]),e}())||r)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoCommentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"submitComment\",value:function(e){return this.repoCommentApi.submitComment(e)}},{key:\"replyComment\",value:function(e){return this.repoCommentApi.replyComment(e)}},{key:\"likeComment\",value:function(e){return this.repoCommentApi.likeComment(e)}},{key:\"unlikeComment\",value:function(e){return this.repoCommentApi.unlikeComment(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"translateRepo\",value:function(e){return this.repoApi.translateRepo(e)}},{key:\"reportRepo\",value:function(e){return this.repoApi.reportRepo(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"searchApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"searchEntry\",value:function(e,t){return this.searchApi.searchEntry(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"suggestedUserApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getSuggestedUserListInCategory\",value:function(e){return this.suggestedUserApi.getSuggestedUserListInCategory(e)}},{key:\"getSuggestedUser\",value:function(e){return this.suggestedUserApi.getSuggestedUser(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"tagApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"subscribeTag\",value:function(e){return this.tagApi.subscribeTag(e)}},{key:\"unsubscribeTag\",value:function(e){return this.tagApi.unsubscribeTag(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"userApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"updateCurrentUserAvatar\",value:function(e){return this.userApi.updateCurrentUserAvatar(e)}},{key:\"updateCurrentUserInfo\",value:function(e,t){return this.userApi.updateCurrentUserInfo(e,t)}},{key:\"applyEditor\",value:function(){return this.userApi.applyEditor()}},{key:\"fetchCurrentUser\",value:function(){return this.userApi.getCurrentUserInfo()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"voteApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getAttenderList\",value:function(e,t){return this.voteApi.getAttenderList(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"walletApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"hasWallet\",value:function(e){return this.walletApi.hasWallet(e)}},{key:\"getWalletAmount\",value:function(){return this.walletApi.getWalletAmount()}},{key:\"getWalletBill\",value:function(e){return this.walletApi.getWalletBill(e)}},{key:\"canWithdraw\",value:function(){return this.walletApi.canWithdraw()}},{key:\"applyWithdraw\",value:function(e,t,n){return this.walletApi.applyWithdraw(e,t,n)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"xiaoceApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getXiaoceById\",value:function(e){return this.xiaoceApi.getXiaoceById(e)}},{key:\"getXiaoceSection\",value:function(e){return this.xiaoceApi.getXiaoceSection(e)}},{key:\"getListSection\",value:function(e){return this.xiaoceApi.getListSection(e)}},{key:\"updateReadHistory\",value:function(e){return this.xiaoceApi.updateReadHistory(e)}},{key:\"setFreeSection\",value:function(e,t){return this.xiaoceApi.setFreeSection(e,t)}},{key:\"getListBuy\",value:function(e){return this.xiaoceApi.getListBuy(e)}},{key:\"getListByLastTime\",value:function(e){return this.xiaoceApi.getListByLastTime(e)}},{key:\"getWechatPayQrCode\",value:function(e){return this.xiaoceApi.getWechatPayQrCode(e)}},{key:\"checkBuyBook\",value:function(e){return this.xiaoceApi.checkBuyBook(e)}},{key:\"freeDiscount\",value:function(e){return this.xiaoceApi.freeDiscount(e)}},{key:\"getUserBuyList\",value:function(e){var t=e.uid;return this.xiaoceApi.getUserBuyList({uid:t})}},{key:\"getXiaoceList\",value:function(e,t){return this.xiaoceApi.getXiaoceList(e,t)}},{key:\"setXiaoceInfoView\",value:function(e){return this.xiaoceApi.setXiaoceInfoView(e)}},{key:\"setXiaoceSectionView\",value:function(e){var t=e.id,n=e.sectionId;return this.xiaoceApi.setXiaoceSectionView({id:t,sectionId:n})}},{key:\"getXiaoceHot\",value:function(){return this.xiaoceApi.getXiaoceHot()}},{key:\"setXiaoceHot\",value:function(e){var t=e.id,n=e.isHot;return this.xiaoceApi.setXiaoceHot({id:t,isHot:n})}},{key:\"setXiaoceTop\",value:function(e){var t=e.id,n=e.isTop;return this.xiaoceApi.setXiaoceTop({id:t,isTop:n})}},{key:\"getNewUserTicketDetail\",value:function(){return this.xiaoceApi.getNewUserTicketDetail()}},{key:\"obtainNewUserTicket\",value:function(){return this.xiaoceApi.obtainNewUserTicket()}},{key:\"getNewuserTicketStatistic\",value:function(e){return this.xiaoceApi.getNewuserTicketStatistic(e)}},{key:\"checkDiscount\",value:function(e){var t=e.metaId,n=e.code;return this.xiaoceApi.checkDiscount({metaId:t,code:n})}},{key:\"dealtFreeOrder\",value:function(e){var t=e.metaId,n=e.code,i=e.uid,r=e.type;return this.xiaoceApi.dealtFreeOrder({metaId:t,code:n,uid:i,type:r})}},{key:\"getRecommendBooks\",value:function(e){var t=e.category;return this.xiaoceApi.getRecommendBooks({category:t})}},{key:\"getSelfDistributorInfo\",value:function(e){var t=e.uid;return this.xiaoceApi.getSelfDistributorInfo({uid:t})}},{key:\"getSelfDistributionList\",value:function(e){return this.xiaoceApi.getSelfDistributionList(e)}},{key:\"getXiaoceInviterInfo\",value:function(e){return this.xiaoceApi.getXiaoceInviterInfo(e)}},{key:\"getSourceDiscount\",value:function(e){return this.xiaoceApi.getSourceDiscount(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"topicApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"followTopic\",value:function(e){return this.topicApi.followTopic(e)}},{key:\"unfollowTopic\",value:function(e){return this.topicApi.unfollowTopic(e)}},{key:\"searchTopic\",value:function(e){return this.topicApi.searchTopic(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"themeEventApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getLastModifyDate\",value:function(e){return this.themeEventApi.getLastModifyDate(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pinPlaceholderApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getPinPlaceholder\",value:function(){return this.pinPlaceholderApi.getPinPlaceholder()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(2),f=(i=Object(d.b)([\"categoryApi\"]))(r=function(){function e(){s()(this,e),this.store=null,this.prepareTask=null}return l()(e,[{key:\"bindStore\",value:function(e){this.store=e}},{key:\"getCategoryList\",value:function(){return this.categoryApi.getCategoryList()}},{key:\"getSubscribedCategoryList\",value:function(){return this.prepareStoreCategoryList().then(function(e){return e.filter(function(e){return e.subscribed})})}},{key:\"getCategoryIdByName\",value:function(e){return this.prepareStoreCategoryList().then(function(t){return(t.filter(function(t){return t.name===e})[0]||{}).id})}},{key:\"prepareStoreCategoryList\",value:function(){var e=this,t=this.store.state.category.list;return t.length?a.a.resolve(t):(this.prepareTask||(this.prepareTask=this.getCategoryList().then(function(t){return e.store.dispatch(e.store.types.SET_CATEGORY_LIST,t),t})),a.a.resolve(this.prepareTask))}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"collectionApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getCollectionById\",value:function(e){return this.collectionApi.getCollectionById(e)}},{key:\"getCollectionListByTag\",value:function(e,t,n){return this.collectionApi.getCollectionListByTag(e,t,n)}},{key:\"getUserCreatedCollectionList\",value:function(e,t){return this.collectionApi.getUserCreatedCollectionList(e,t)}},{key:\"getUserFollowingCollectionList\",value:function(e,t){return this.collectionApi.getUserFollowingCollectionList(e,t)}},{key:\"deleteCollection\",value:function(e){return this.collectionApi.deleteCollection(e)}},{key:\"getCollectionEntryList\",value:function(e,t){return this.collectionApi.getCollectionEntryList(e,t)}},{key:\"getCurrentUserCollectionListForAddingEntry\",value:function(e,t){return this.collectionApi.getCurrentUserCollectionListForAddingEntry(e,t)}},{key:\"getEntryRelatedCollectionList\",value:function(e){return this.collectionApi.getEntryRelatedCollectionList(e)}},{key:\"createCollection\",value:function(e){return this.collectionApi.createCollection(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"commentBookApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getCommentById\",value:function(e){return this.commentBookApi.getCommentById(e)}},{key:\"getCommentList\",value:function(e){return this.commentBookApi.getCommentList(e)}},{key:\"getHotCommentList\",value:function(e){return this.commentBookApi.getHotCommentList(e)}},{key:\"getSubCommentList\",value:function(e){return this.commentBookApi.getSubCommentList(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"commentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getCommentById\",value:function(e){return this.commentApi.getCommentById(e)}},{key:\"getCommentList\",value:function(e){return this.commentApi.getCommentList(e)}},{key:\"getHotCommentList\",value:function(e){return this.commentApi.getHotCommentList(e)}},{key:\"getSubCommentList\",value:function(e){return this.commentApi.getSubCommentList(e)}},{key:\"deleteComment\",value:function(e){return this.commentApi.deleteComment(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"entryBannerApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getActiveEntryBanner\",value:function(){return this.entryBannerApi.getActiveEntryBanner()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return m});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(11),p=n(13),g=n(2),m=(i=Object(g.b)([\"entryApi\",\"entryViewApi\",\"collectionApi\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"get\",value:function(e){return this.entryApi.getEntryById(e).then(this.fetchState.bind(this))}},{key:\"getEntryListById\",value:function(e){var t=this;return this.entryApi.getEntryListById(e).then(function(e){return t.fetchStateList({list:e})}).then(function(e){return e.list})}},{key:\"getEntryByUrl\",value:function(e){return this.entryApi.getEntryByUrl(e)}},{key:\"getEntryByPostId\",value:function(e){return this.entryApi.getEntryByPostId(e).then(this.fetchState.bind(this))}},{key:\"getEntryByIdForEditing\",value:function(e){return this.entryApi.getEntryByIdForEditing(e)}},{key:\"add\",value:function(e){return this.entryApi.publishEntry(e)}},{key:\"update\",value:function(e){return this.entryApi.updateEntry(e)}},{key:\"remove\",value:function(e){return this.entryApi.deleteEntry(e)}},{key:\"getEntryWithParsedContent\",value:function(e){return s.a.all([this.entryApi.getEntryById(e),this.entryViewApi.getEntryViewByEntryId(e).catch(Object(p.c)({},[404]))]).then(function(e){return a()(e[0],{parsedContent:e[1].transcodeContent})}).then(this.fetchState.bind(this))}},{key:\"queryEntryList\",value:function(e){return this.entryApi.queryEntryList(e).then(this.fetchStateList.bind(this))}},{key:\"queryEntryListWithoutState\",value:function(e){return this.entryApi.queryEntryList(e)}},{key:\"getTimelineEntryList\",value:function(e){var t=this;return this.entryApi.getTimelineEntryList(e).then(function(e){return t.fetchStateList(e)})}},{key:\"getUserColumnEntryList\",value:function(e,t){return this.entryApi.getUserColumnEntryList(e,t).then(this.fetchStateList.bind(this))}},{key:\"getUserSharedEntryList\",value:function(e,t){return this.entryApi.getUserSharedEntryList(e,t).then(this.fetchStateList.bind(this))}},{key:\"getEachCategoryPopularEntryList\",value:function(e,t){var n=this;return s.a.all(e.map(function(e){return n.getCategoryPopularEntryList(e,t)}))}},{key:\"getCategoryPopularEntryList\",value:function(e,t){var n=(new h.a).equalTo(\"category\",e).sort(\"popular\").pageSize(t);return this.entryApi.queryEntryList(n).then(function(e){return e.list})}},{key:\"getPopularColumnEntryList\",value:function(e){var t=(new h.a).equalTo(\"type\",\"post\").sort(\"popular\").pageSize(e);return this.entryApi.queryEntryList(t).then(function(e){return e.list})}},{key:\"getTagEntryList\",value:function(e,t){return this.entryApi.getTagEntryList(e,t)}},{key:\"getRecommendedEntryListByTagIdList\",value:function(e){return this.entryApi.getRecommendedEntryListByTagIdList(e)}},{key:\"fetchState\",value:function(e){return this.fetchStateList({list:[e]}).then(function(e){return e.list[0]})}},{key:\"fetchStateList\",value:function(e){var t=e.list;return this.fetchCollectState(t),s.a.resolve(e)}},{key:\"fetchCollectState\",value:function(e){return this.collectionApi.hasCollectedEntry(e.map(function(e){return e.id})).then(function(t){return e.forEach(function(e,n){e.collected=t[n]}),e}).catch(function(t){return console.error(t),e.forEach(function(e,n){e.collectStateError=t}),e})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"entryViewApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getEntryViewByEntryId\",value:function(e){return this.entryViewApi.getEntryViewByEntryId(e)}},{key:\"getEntryViewByPostId\",value:function(e){return this.entryViewApi.getEntryViewByPostId(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"notificationApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getUserNotificationList\",value:function(e){return this.notificationApi.getUserNotificationList(e)}},{key:\"getSystemNotificationList\",value:function(e){return this.notificationApi.getSystemNotificationList(e)}},{key:\"getUnreadUserNotificationCount\",value:function(){return this.notificationApi.getUnreadUserNotificationCount()}},{key:\"getUnreadSystemNotificationCount\",value:function(){return this.notificationApi.getUnreadSystemNotificationCount()}},{key:\"getUserActivityList\",value:function(e,t){return this.notificationApi.getUserActivityList(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pinCommentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getPinCommentList\",value:function(e){return this.pinCommentApi.getPinCommentList(e)}},{key:\"getPinSubCommentList\",value:function(e){return this.pinCommentApi.getPinSubCommentList(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"pinApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getPinById\",value:function(e){return this.pinApi.getPinById(e)}},{key:\"createPin\",value:function(e){return this.pinApi.createPin(e)}},{key:\"getPinByTimeline\",value:function(e){return this.pinApi.getPinByTimeline(e)}},{key:\"getPinByUserId\",value:function(e){return this.pinApi.getPinByUserId(e)}},{key:\"getDynamicPinList\",value:function(e){return this.pinApi.getDynamicPinList(e)}},{key:\"getRecommendPinList\",value:function(e){return this.pinApi.getRecommendPinList(e)}},{key:\"getPinListByTopicId\",value:function(e){return this.pinApi.getPinListByTopicId(e)}},{key:\"getHotRecommendList\",value:function(){return this.pinApi.getPinListByTopicId()}},{key:\"getTimelineCount\",value:function(e){return this.pinApi.getTimelineCount(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoCommentApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getCommentById\",value:function(e){return this.repoCommentApi.getCommentById(e)}},{key:\"getCommentList\",value:function(e){return this.repoCommentApi.getCommentList(e)}},{key:\"getHotCommentList\",value:function(e){return this.repoCommentApi.getHotCommentList(e)}},{key:\"getSubCommentList\",value:function(e){return this.repoCommentApi.getSubCommentList(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getRepoById\",value:function(e){return this.repoApi.getRepoById(e)}},{key:\"getTrendingRepoList\",value:function(e,t){return this.repoApi.getTrendingRepoList(e,t)}},{key:\"getRepoListByTagIdList\",value:function(e,t){return this.repoApi.getRepoListByTagIdList(e,t)}},{key:\"getCustomizedRepoList\",value:function(e){return this.repoApi.getCustomizedRepoList(e)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"repoApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getRepoTitleTranslationList\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.repoApi.getRepoTitleTranslationList(e,t)}},{key:\"getRepoDescriptionTranslationList\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.repoApi.getRepoDescriptionTranslationList(e,t)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"tagApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"searchTag\",value:function(e,t){return this.tagApi.searchTag(e,t)}},{key:\"getTagListWithoutState\",value:function(e){return this.tagApi.getTagList(e)}},{key:\"getTagList\",value:function(e){return this.tagApi.getTagList(e)}},{key:\"getSuggestTagList\",value:function(e){return this.tagApi.getSuggestTagList(e)}},{key:\"getTagByTitle\",value:function(e){return this.tagApi.getTagByTitle(e)}},{key:\"getUserSubscribedTagList\",value:function(e,t){return this.tagApi.getUserSubscribedTagList(e,t)}},{key:\"getCategoryTagList\",value:function(e,t){return this.tagApi.getCategoryTagList(e,t)}},{key:\"getUserSubscribedTagCount\",value:function(e){return this.tagApi.getUserSubscribedTagCount(e)}},{key:\"getTagListForCustomizeRepo\",value:function(){return this.tagApi.getTagListForCustomizeRepo()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"userApi\",\"followService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getUserById\",value:function(e){var t=this;return this.userApi.getUserById(e).then(function(e){return t.fetchFollowState([e])}).then(function(e){return e[0]})}},{key:\"getUserByIdWithoutState\",value:function(e){return this.userApi.getUserById(e)}},{key:\"getUserListById\",value:function(e){return this.userApi.getUserListById(e).then(this.fetchFollowState.bind(this))}},{key:\"getUserListByIdWithoutState\",value:function(e){return this.userApi.getUserListById(e)}},{key:\"fetchFollowState\",value:function(e){return this.followService.hasFollowedUserList(e.map(function(e){return e.id})).then(function(t){return e.forEach(function(e){e.followed=!!t[e.id]}),e})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(3),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(2),f=(i=Object(d.b)([\"eventsApi\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"getCityList\",value:function(e){return this.eventsApi.getCityList(e)}},{key:\"getTimelineEventList\",value:function(e){return this.eventsApi.getEventList(e,\"timeline\")}},{key:\"getBannerEventList\",value:function(e){return this.eventsApi.getEventList(a()({},e,{pageNum:1,pageSize:20,showBanner:1}),\"banner\")}},{key:\"getMonthEventCount\",value:function(e){return this.eventsApi.getMonthEventCount(a()({},e,{pageNum:1,pageSize:20,showBanner:1}))}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return p});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(2),p=(i=Object(h.b)([\"topicApi\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"getRecommendTopicList\",value:function(){return this.topicApi.getRecommendTopicList()}},{key:\"getTopicAttenders\",value:function(e){return this.topicApi.getTopicAttenders(e)}},{key:\"searchTopic\",value:function(e){return this.topicApi.searchTopic(e)}},{key:\"getTopicList\",value:function(e){return this.topicApi.getTopicList(e)}},{key:\"getFollowedTopicList\",value:function(e){return this.topicApi.getFollowedTopicList(e)}},{key:\"getTopicDetail\",value:function(e){return this.topicApi.getTopicDetail(e)}},{key:\"getRecommendAndFollowedList\",value:function(e){return s.a.all([this.topicApi.getFollowedTopicList(e),this.topicApi.getRecommendTopicList()]).then(function(e){return a()({},{followedList:e[0],recommendList:e[1]})})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return g});var i,r,o,a=n(5),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(113),h=n.n(f),p=(n(19),n(2)),g=(i=Object(p.b)([\"userStorageApiClient\"]),r=Object(p.c)({userStorageApiClient:[\"sendPasswordResetToken\",\"sendPasswordResetVcode\",\"resetPasswordWithPhone\",\"resetPasswordWithToken\",\"updatePassword\",\"sendRegisterVcode\",\"getRandCode\"]}),i(o=r(o=function(){function e(){c()(this,e)}return d()(e,[{key:\"loginWithEmail\",value:function(e,t){return h.a.post(\"/auth/type/email\").type(\"json\").send({email:e,password:t}).catch(this.handleResponseError)}},{key:\"loginWithPhoneNumber\",value:function(e,t){return h.a.post(\"/auth/type/phoneNumber\").type(\"json\").send({phoneNumber:e,password:t}).catch(this.handleResponseError)}},{key:\"logout\",value:function(){return h.a.del(\"/auth\").catch(this.handleResponseError)}},{key:\"registerWithPhone\",value:function(e){var t=this,n=e.phoneNumber,i=e.smsCode,r=e.username,o=e.password;return this.userStorageApiClient.registerWithPhone({username:r,password:o,phoneNumber:n,vcode:i}).then(function(){return t.loginWithPhoneNumber(n,o)})}},{key:\"getCurrentUser\",value:function(){return this.userStorageApiClient.getCurrentUserInfo()}},{key:\"handleResponseError\",value:function(e){return e.normalizedCode=e.status,u.a.reject(e)}}]),e}())||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"bannerStorageMsClient\"]),r=Object(s.c)({bannerStorageMsClient:[\"getBannerList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";function i(){var e=window.location.hostname,t=window.location.pathname.split(\"/\");return{src:e,location:t[1]||\"index\",subLocation:t.slice(2).join(\"-\")||\"index\"}}function r(){var e=window.localStorage.getItem(\"SUID\");return e&&JSON.parse(e)}function o(e){return window.localStorage.setItem(\"SUID\",c()(e))}Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var a,u,s=n(77),c=n.n(s),l=n(5),d=n.n(l),f=n(3),h=n.n(f),p=n(0),g=n.n(p),m=n(1),v=n.n(m),y=n(2),I=(a=Object(y.b)([\"ubcApiMsClient\",\"suidGeneratorApiMsClient\",\"commonStatisticsApiMsClient\"]))(u=function(){function e(){g()(this,e)}return v()(e,[{key:\"recordPageView\",value:function(){var e=this;return this.getSUID().then(function(t){return e.ubcApiMsClient.recordView(h()(i(),{suid:t}))})}},{key:\"recordAction\",value:function(e){var t=this;return this.getSUID().then(function(n){return t.commonStatisticsApiMsClient.log(h()(e,{suid:n}))})}},{key:\"recordEntryFetch\",value:function(e){var t=this;return this.getSUID().then(function(n){return t.commonStatisticsApiMsClient.recordFetch(h()(e,{suid:n}))})}},{key:\"getSUID\",value:function(){var e=r();if(e)return d.a.resolve(e);var t=i(),n=t.src;return this.suidGeneratorApiMsClient.generateSUID(n).then(function(e){return o(e),e})}}]),e}())||u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return d});var i,r,o,a=n(0),u=n.n(a),s=n(1),c=n.n(s),l=n(2),d=(i=Object(l.b)([\"userStorageApiClient\"]),r=Object(l.c)({userStorageApiClient:[\"sendEmailVerifyToken\",\"sendPhoneBindVcode\",\"bindEmail\",\"unbindEmail\",\"bindPhone\",\"unbindPhone\"]}),i(o=r(o=function(){function e(){u()(this,e)}return c()(e,[{key:\"unbindWeibo\",value:function(){return this.userStorageApiClient.unbindThirdpart(\"weibo\")}},{key:\"unbindWechat\",value:function(){return this.userStorageApiClient.unbindThirdpart(\"wechat\")}},{key:\"unbindGithub\",value:function(){return this.userStorageApiClient.unbindThirdpart(\"github\")}}]),e}())||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"goldTagMsClient\"]),r=Object(s.c)({goldTagMsClient:[\"getCategoryList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i=n(0),r=n.n(i),o=n(1),a=n.n(o),u=n(773),s=n.n(u),c=function(){function e(){r()(this,e),this.uploader=new s.a({bucket:\"gold-user-assets\"})}return a()(e,[{key:\"uploadFile\",value:function(e){return this.uploader.createTask(e).start()}}]),e}()},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"collectionSetMsClient\"]),r=Object(s.c)({collectionSetMsClient:[\"createCollection\",\"updateCollection\",\"deleteCollection\",\"followCollection\",\"unfollowCollection\",\"hasCollectedEntry\",\"collectEntry\",\"uncollectEntry\",\"getUserCollectionCount\",\"getCollectionListByTag\",\"getCollectionEntryList\",\"getUserFollowingCollectionList\",\"getUserFollowedCollectionCount\",\"getUserCreatedCollectionList\",\"getUserCreatedCollectionCount\",\"getHotTagList\",\"getCurrentUserCollectionListForAddingEntry\",\"getCollectionById\",\"getEntryRelatedCollectionList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"commentWrapperMsClient\"]),r=Object(s.c)({commentWrapperMsClient:[\"submitComment\",\"deleteComment\",\"replyComment\",\"getCommentById\",\"getCommentList\",\"getHotCommentList\",\"getSubCommentList\",\"likeComment\",\"unlikeComment\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"xiaoceCommentWrapperMsClient\"]),r=Object(s.c)({xiaoceCommentWrapperMsClient:[\"submitComment\",\"replyComment\",\"getCommentById\",\"getCommentList\",\"getHotCommentList\",\"getSubCommentList\",\"likeComment\",\"unlikeComment\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"entryStorageMsClient\",\"postStorageApiMsClient\",\"timelineMergerMsClient\"]),r=Object(s.c)({entryStorageMsClient:[{getEntryByIdForEditing:\"getEntryById\"},\"publishEntry\",\"updateEntry\",\"deleteEntry\",\"recommendEntry\",\"unrecommendEntry\"],postStorageApiMsClient:[\"getEntryByPostId\",\"getRecommendedEntryListByTagIdList\"],timelineMergerMsClient:[\"getEntryById\",\"getEntryListById\",\"getEntryByUrl\",\"getEntryWithParsedContentById\",\"queryEntryList\",\"getTimelineEntryList\",\"getUserColumnEntryList\",\"getUserSharedEntryList\",\"getRelatedEntryList\",\"getTagEntryList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"entryBannerStorageApiMsClient\"]),r=Object(s.c)({entryBannerStorageApiMsClient:[\"getActiveEntryBanner\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"postStorageApiMsClient\",\"entryViewStorageApiMsClient\"]),r=Object(s.c)({postStorageApiMsClient:[\"getEntryViewByPostId\"],entryViewStorageApiMsClient:[\"getEntryViewByEntryId\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"followApiMsClient\"]),r=Object(s.c)({followApiMsClient:[\"hasFollowedUser\",\"hasFollowedUserList\",\"followUser\",\"unfollowUser\",\"getFollowerList\",\"getFolloweeList\",\"getFolloweInfo\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"inviteOriginalMsClient\"]),r=Object(s.c)({inviteOriginalMsClient:[\"fetchInvitationCount\",\"sendInvitationCode\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"userLikeWrapperMsClient\"]),r=Object(s.c)({userLikeWrapperMsClient:[\"likeEntry\",\"unlikeEntry\",\"hasLikedEntry\",\"getUserLikedEntryList\",\"getEntryLikerList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"mailPushApiClient\"]),r=Object(s.c)({mailPushApiClient:[\"getMailPushStatus\",\"setMailPushStatus\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"ufpApiMsClient\",\"userNotificationApiMsClient\"]),r=Object(s.c)({ufpApiMsClient:[\"getUnreadUserNotificationCount\",\"readAllUserNotification\",\"getUserNotificationList\",\"getUserActivityList\"],userNotificationApiMsClient:[\"getUnreadSystemNotificationCount\",\"readAllSystemNotification\",\"getSystemNotificationList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"parserMsClient\"]),r=Object(s.c)({parserMsClient:[\"getPageInfo\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"shortMsgMsClient\",\"pinReportMsClient\",\"pinStatMsClient\"]),r=Object(s.c)({shortMsgMsClient:[\"getPinById\",\"likePin\",\"unlikePin\",\"createPin\",\"deletePin\",\"getPinByTimeline\",\"getPinByUserId\",\"getDynamicPinList\",\"getRecommendPinList\",\"getPinListByTopicId\",\"getHotRecommendList\"],pinReportMsClient:[\"report\"],pinStatMsClient:[\"getTimelineCount\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"parserMsClient\"]),r=Object(s.c)({parserMsClient:[\"getLinkInfo\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"hotTopicCommentWrapperMsClient\"]),r=Object(s.c)({hotTopicCommentWrapperMsClient:[\"getPinCommentList\",\"getPinSubCommentList\",\"likePinComment\",\"unlikePinComment\",\"submitComment\",\"replyComment\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return l});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(2),l=(i=Object(c.b)([\"recommenderApiMsMsClient\",\"behaviorApi\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"getRecommendEntryList\",value:function(){var e=this;return this.behaviorApi.getSUID().then(function(t){return e.recommenderApiMsMsClient.getRecommendEntryList(t)})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"repoMsClient\"]),r=Object(s.c)({repoMsClient:[\"getRepoById\",\"getTrendingRepoList\",\"getRepoListByTagIdList\",\"getCustomizedRepoList\",\"getRepoTitleTranslationList\",\"getRepoDescriptionTranslationList\",\"translateRepo\",\"reportRepo\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"repoCommentWrapperMsClient\"]),r=Object(s.c)({repoCommentWrapperMsClient:[\"submitComment\",\"replyComment\",\"getCommentById\",\"getCommentList\",\"getHotCommentList\",\"getSubCommentList\",\"likeComment\",\"unlikeComment\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"searchMergerMsClient\"]),r=Object(s.c)({searchMergerMsClient:[\"searchEntry\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"suggestFollowApiMsClient\"]),r=Object(s.c)({suggestFollowApiMsClient:[\"getSuggestedUserListInCategory\",\"getSuggestedUser\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"goldTagMsClient\"]),r=Object(s.c)({goldTagMsClient:[\"searchTag\",\"getUserSubscribedTagList\",\"getUserSubscribedTagCount\",\"getTagListForCustomizeRepo\",\"getTagList\",\"getSuggestTagList\",\"getTagByTitle\",\"subscribeTag\",\"unsubscribeTag\",\"getCategoryTagList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o,a=n(5),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=(n(19),n(2)),h=(i=Object(f.b)([\"authStateService\",\"lccroApiMsClient\",\"userStorageApiClient\"]),r=Object(f.c)({userStorageApiClient:[\"updateCurrentUserInfo\",\"getCurrentUserInfo\"]}),i(o=r(o=function(){function e(){c()(this,e)}return d()(e,[{key:\"getUserById\",value:function(e){var t=this;return(this.authStateService.getCurrentUserId()===e?this.userStorageApiClient.getCurrentUserInfo():this.lccroApiMsClient.getUserById(e)).then(function(e){return t.attachSelfState([e])[0]})}},{key:\"getUserListById\",value:function(e){return e.length?this.lccroApiMsClient.getUserListById(e).then(this.attachSelfState.bind(this)):u.a.resolve([])}},{key:\"attachSelfState\",value:function(e){var t=this.authStateService.getCurrentUser()||{};return e.forEach(function(e){e.self=t.id===e.id}),e}},{key:\"updateCurrentUserAvatar\",value:function(e){return this.userStorageApiClient.updateCurrentUserInfo(\"avatarLarge\",e)}},{key:\"applyEditor\",value:function(){return u.a.reject(new Error(\"已废弃\"))}}]),e}())||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"voteAttenderApiMsClient\"]),r=Object(s.c)({voteAttenderApiMsClient:[\"getAttenderList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"myWalletApiMsClient\"]),r=Object(s.c)({myWalletApiMsClient:[\"hasWallet\",\"getWalletAmount\",\"getWalletBill\",\"canWithdraw\",\"applyWithdraw\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"xiaoceStorageApiMsClient\"]),r=Object(s.c)({xiaoceStorageApiMsClient:[\"getXiaoceById\",\"getXiaoceSection\",\"getListSection\",\"updateReadHistory\",\"setFreeSection\",\"getListBuy\",\"getListByLastTime\",\"getWechatPayQrCode\",\"checkBuyBook\",\"freeDiscount\",\"getUserBuyList\",\"getXiaoceList\",\"getXiaoceHot\",\"setXiaoceHot\",\"setXiaoceTop\",\"getNewUserTicketDetail\",\"obtainNewUserTicket\",\"getNewuserTicketStatistic\",\"checkDiscount\",\"dealtFreeOrder\",\"setXiaoceInfoView\",\"setXiaoceSectionView\",\"getRecommendBooks\",\"getSelfDistributorInfo\",\"getSelfDistributionList\",\"getXiaoceInviterInfo\",\"getSourceDiscount\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"eventStorageApiMsClient\"]),r=Object(s.c)({eventStorageApiMsClient:[\"getEventList\",\"getMonthEventCount\",\"getCityList\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"topicApiMsClient\"]),r=Object(s.c)({topicApiMsClient:[\"getTopicList\",\"getFollowedTopicList\",\"getRecommendTopicList\",\"searchTopic\",\"getTopicAttenders\",\"followTopic\",\"unfollowTopic\",\"getTopicDetail\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"themeEventMsClient\"]),r=Object(s.c)({themeEventMsClient:[\"getLastModifyDate\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return c});var i,r,o,a=n(0),u=n.n(a),s=n(2),c=(i=Object(s.b)([\"pinGuideMsClient\"]),r=Object(s.c)({pinGuideMsClient:[\"getPinPlaceholder\"]}),i(o=r(o=function e(){u()(this,e)})||o)||o)},function(e,t,n){\"use strict\";function i(e){var t=r(e);return{status:t.s,message:t.m,data:t.d}}function r(e){return c()(e.body||{}).length?e.body:JSON.parse(e.text)}function o(e,t){var n=e.request||e.req;console.error([\"[request \"+t+\"]\",e.statusCode||\"-\",n.method||\"-\",n.url||\"-\",e.text||\"-\"].join(\" \"))}Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var a,u,s=n(25),c=n.n(s),l=n(5),d=n.n(l),f=n(3),h=n.n(f),p=n(0),g=n.n(p),m=n(1),v=n.n(m),y=n(13),I=n(2),M=(a=Object(I.b)([\"eventBus\"]))(u=function(){function e(){g()(this,e)}return v()(e,[{key:\"createResponseHandler\",value:function(e){return function(t){var n=i(t),r=null;if(\"function\"==typeof e)r=e;else{var a=h()({1:function(e){return e.data},other:function(e){e.message,e.status;return d.a.reject(h()(Object(y.e)(),n))}},e);r=a[n.status]||a.other}return d.a.resolve(r(n)).catch(function(e){return o(t,\"failed\"),d.a.reject(e)})}}},{key:\"createResponseErrorHandler\",value:function(e){var t=this;return function(n){if(n.crossDomain&&t.eventBus.emit(t.eventBus.eventType.CROSS_DOMAIN_ERROR),n.timeout&&console.error(\"[request timeout] \"+n.timeout+\"ms \"+(e||\"-\")),n.response&&o(n.response,\"error\"),n.normalizedCode)return d.a.reject(n);var r=n.response&&i(n.response).message;switch(n.status){case 400:return d.a.reject(Object(y.a)(r));case 401:return d.a.reject(Object(y.g)(r));case 403:return d.a.reject(Object(y.b)(r));case 404:return d.a.reject(Object(y.f)(r));default:return d.a.reject(Object(y.e)(r||n.message))}}}}]),e}())||u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(217),d=n(2),f=\"https://banner-storage-ms.juejin.im/v1\",h=(i=Object(d.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(f)}},{key:\"getBannerList\",value:function(e){return c.a.get(f+\"/web/aanner\").query({position:e,platform:\"web\",page:0,pageSize:20,src:\"web\"}).then(this.resolveResponseData).then(function(e){return e.banner.map(l.a.fromDescriptor)}).catch(this.handleResponseError)}}]),e}())||r},,,function(e,t){},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return s});var i=n(0),r=n.n(i),o=n(1),a=n.n(o),u=n(9),s=function(){function e(){r()(this,e)}return a()(e,[{key:\"reportCollectionCreate\",value:function(e){return this.reportCollectionAction(e,\"csNum\",1)}},{key:\"reportCollectionDelete\",value:function(e){return this.reportCollectionAction(e,\"csNum\",-1)}},{key:\"reportCollectionFollow\",value:function(e){return this.reportCollectionAction(e,\"csFollow\",1)}},{key:\"reportCollectionUnfollow\",value:function(e){return this.reportCollectionAction(e,\"csFollow\",-1)}},{key:\"reportCollectionAddEntry\",value:function(e){return this.reportCollectionAction(e,\"csPost\",1)}},{key:\"reportCollectionRemoveEntry\",value:function(e){return this.reportCollectionAction(e,\"csPost\",-1)}},{key:\"reportCollectionAction\",value:function(e,t,n){u.a.post(\"https://cell-statistics-ms.juejin.im/collectionSet/incr\").type(\"form\").accept(\"json\").send({num:n,event:t,csId:e,src:2}).then(function(e){return e.body}).catch(function(e){console.error(e)})}}]),e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return y});var i,r,o=n(5),a=n.n(o),u=n(3),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(811),g=n(13),m=n(2),v=\"https://collection-set-ms.juejin.im/v1\",y=(i=Object(m.b)([\"clientHelper\",\"authStateService\",\"userRepository\",\"entryRepository\",\"cellStatisticsMsClient\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"createCollection\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return h.a.post(v+\"/collectionset\").type(\"form\").accept(\"json\").send(s()(this.getAuthDescriptor(n),{title:e.title,description:e.description,bgImgUrl:e.imageUrl,bgImgMask:e.maskColor})).then(this.resolveResponseData).then(function(e){return t.getCollectionById(e.id)}).then(function(e){return t.cellStatisticsMsClient.reportCollectionCreate(e.id),e}).catch(this.handleResponseError)}},{key:\"updateCollection\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.put(v+\"/collectionset/\"+e.id).type(\"form\").accept(\"json\").send(s()(this.getAuthDescriptor(t),{title:e.title,description:e.description,bgImgUrl:e.imageUrl,bgImgMask:e.maskColor})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"deleteCollection\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return h.a.delete(v+\"/collectionset/\"+e).accept(\"json\").query(this.getAuthDescriptor(n)).then(this.resolveResponseData).then(function(){return t.cellStatisticsMsClient.reportCollectionDelete(e)}).catch(this.handleResponseError)}},{key:\"followCollection\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return h.a.put(v+\"/follow\").type(\"form\").accept(\"json\").query(this.getAuthDescriptor(n)).query({csId:e}).then(this.resolveResponseData).then(function(){return t.cellStatisticsMsClient.reportCollectionFollow(e)}).catch(this.handleResponseError)}},{key:\"unfollowCollection\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return h.a.put(v+\"/unfollow\").type(\"form\").accept(\"json\").query(this.getAuthDescriptor(n)).query({csId:e}).then(this.resolveResponseData).then(function(){return t.cellStatisticsMsClient.reportCollectionUnfollow(e)}).catch(this.handleResponseError)}},{key:\"hasCollectedEntry\",value:function(e){if(!e.length)return a.a.resolve([]);if(!this.authStateService.getCurrentUser())return a.a.resolve(e.map(function(){return!1}));var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/isInMyCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(t)).query({entryIds:e}).then(this.resolveResponseData).then(function(t){return e.map(function(e){return!!t.filter(function(t){return t.entryId===e})[0].isIn})}).catch(this.handleResponseError)}},{key:\"collectEntry\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.put(v+\"/addEntry\").type(\"form\").accept(\"json\").query(this.getAuthDescriptor(i)).query({csId:t,entryId:e}).then(this.resolveResponseData).then(function(){return n.cellStatisticsMsClient.reportCollectionAddEntry(t)}).catch(this.handleResponseError)}},{key:\"uncollectEntry\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.put(v+\"/delEntry\").type(\"form\").accept(\"json\").query(this.getAuthDescriptor(i)).query({csId:t,entryId:e}).then(this.resolveResponseData).then(function(){return n.cellStatisticsMsClient.reportCollectionRemoveEntry(t)}).catch(this.handleResponseError)}},{key:\"getUserCollectionCount\",value:function(e){return a.a.all([this.getUserCreatedCollectionCount(e),this.getUserFollowedCollectionCount(e)]).then(function(e){return{total:e[0]+e[1],created:e[0],followed:e[1]}}).catch(function(e){return console.error(e),{total:0,created:0,followed:0}})}},{key:\"getCollectionListByTag\",value:function(e,t,n){var i=this,r=this.authStateService.getAuthInfo();return h.a.get(v+\"/homeCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(r)).query({page:n.getPage(),recommend:t,rankType:\"newest\"===n.getSort()?\"new\":\"hot\",tag:\"全部\"===e?\"\":e}).then(this.resolveResponseData).then(function(e){return i.createCollectionListFromResponse(e)}).catch(this.handleResponseError)}},{key:\"getCollectionEntryList\",value:function(e,t){var n=this;return h.a.get(v+\"/getCollectionSetEntries\").accept(\"json\").query({page:t.getPage()-1,csId:e,rankType:\"newest\"===t.getSort()?\"new\":\"hot\",src:\"web\"}).then(this.resolveResponseData).then(function(e){return n.createEntryListFromResponse(e)}).catch(this.handleResponseError)}},{key:\"getUserFollowingCollectionList\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/getFollowedCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(i)).query({page:t.getPage()-1,pageSize:t.getPageSize(),targetUserId:e}).then(this.resolveResponseData).then(function(e){return n.createCollectionListFromResponse(e.collectionSets)}).catch(this.handleResponseError)}},{key:\"getUserFollowedCollectionCount\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/getFollowedCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(t)).query({page:0,targetUserId:e}).then(this.resolveResponseData).then(function(e){return e.sum}).catch(this.handleResponseError)}},{key:\"getUserCreatedCollectionList\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUserCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(i)).query({page:t.getPage()-1,pageSize:t.getPageSize(),targetUserId:e}).then(this.resolveResponseData).then(function(e){return n.createCollectionListFromResponse(e.collectionSets)}).catch(this.handleResponseError)}},{key:\"getUserCreatedCollectionCount\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUserCollectionSet\").accept(\"json\").query(this.getAuthDescriptor(t)).query({page:0,targetUserId:e}).then(this.resolveResponseData).then(function(e){return e.sum}).catch(this.handleResponseError)}},{key:\"getHotTagList\",value:function(e){return h.a.get(v+\"/getHotTags\").accept(\"json\").query({count:e,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getCurrentUserCollectionListForAddingEntry\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUserCollectionSet/\"+e).accept(\"json\").query(this.getAuthDescriptor(i)).query({page:t-1}).then(this.resolveResponseData).then(function(e){return n.createCollectionListFromResponse(e.collectionSets)}).catch(this.handleResponseError)}},{key:\"getCollectionById\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return h.a.get(v+\"/getCollectionSetInfo\").accept(\"json\").query(this.getAuthDescriptor(n)).query({csId:e}).then(this.resolveResponseData).then(function(e){return e[0].csId?t.createCollectionListFromResponse(e):a.a.reject(Object(g.f)())}).then(function(e){return e[0]}).catch(this.handleResponseError)}},{key:\"getEntryRelatedCollectionList\",value:function(e){e.entryId,e.entryUserId,e.count;return a.a.resolve([])}},{key:\"createCollectionListFromResponse\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getCurrentUserId(),n=e.map(p.a.fromDescriptor),i=e.map(function(e){return e.creator});return n.forEach(function(n,i){n.own=e[i].creator===t}),this.fetchCollectionUser(n,i)}},{key:\"fetchCollectionUser\",value:function(e,t){return this.getUserListById(t).then(function(n){e.forEach(function(e,i){e.author=n.filter(function(e){return!!e&&e.id===t[i]})[0]})}).then(function(){return e})}},{key:\"getAuthDescriptor\",value:function(e){var t={src:\"web\"};return e.userId&&(t.userId=e.userId),e.clientId&&(t.clientId=e.clientId),e.token&&(t.token=e.token),t}},{key:\"createEntryListFromResponse\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?a.a.all([this.getEntryListById(e),this.hasCollectedEntry(e)]).then(function(e){return e[0].filter(function(e){return e}).map(function(t,n){return t.collected=e[1][n],t.canCollect=!0,t})}):a.a.resolve([])}},{key:\"getCurrentUserId\",value:function(){return(this.authStateService.getCurrentUser()||{}).id}},{key:\"getUserListById\",value:function(e){return this.userRepository.getUserListByIdWithoutState(e)}},{key:\"getEntryListById\",value:function(e){return this.entryRepository.getEntryListById(e)}}]),e}())||r},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return v});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(20),v=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return r()(new t,{id:e.csId,followerCount:e.followCount,followed:!!e.isFollowed,isIn:!!e.isIn},e,{imageUrl:e.bgImg.url,maskColor:e.bgImg.mask,createdAt:Object(m.b)(e.createTime),updatedAt:Object(m.b)(e.updateTime)})}}]),t}(g.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(3),a=n.n(o),u=n(25),s=n.n(u),c=n(5),l=n.n(c),d=n(0),f=n.n(d),h=n(1),p=n.n(h),g=n(9),m=n(92),v=n(13),y=n(2),I=\"https://comment-wrapper-ms.juejin.im/v1\",M=(i=Object(y.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){f()(this,e)}return p()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(I)}},{key:\"submitComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({picList:e.imageUrl,respUser:e.replyUserId,targetId:e.entryId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"deleteComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.del(I+\"/comment/\"+e.commentId).set(this.getRequestHeader(t)).query({targetId:e.entryId,targetType:\"entry\",firstComment:e.parentId}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"replyComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({firstComment:e.parentId,respComment:e.replyCommentId,respUser:e.replyUserId,targetId:e.entryId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"getCommentById\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments\").set(this.getRequestHeader(n)).query({idList:e}).then(this.resolveResponseData).then(function(e){return s()(e).length?e:l.a.reject(Object(v.f)())}).then(function(n){return t.resolveComment(n[e])}).catch(this.handleResponseError)}},{key:\"getCommentList\",value:function(e){var t=this,n=e.entryId,i=e.startTime,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({createdAt:i&&i.toISOString(),rankType:\"new\",pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment.bind(t))}}).catch(this.handleResponseError)}},{key:\"getHotCommentList\",value:function(e){var t=this,n=e.entryId,i=e.page,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({rankType:\"hot\",pageNum:i,pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment.bind(t))}}).catch(this.handleResponseError)}},{key:\"getSubCommentList\",value:function(e){var t=this,n=e.commentId,i=e.entryId,r=e.page,o=e.pageSize,a=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+i+\"/comment/\"+n).set(this.getRequestHeader(a)).query({pageNum:r,pageSize:o}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment.bind(t))}}).catch(this.handleResponseError)}},{key:\"likeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.put(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.del(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"resolveComment\",value:function(e){return m.a.fromDescriptor(a()(e,{liked:e.isLiked}))}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return p});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(2),h=\"https://common-statistics-api-ms.juejin.im/v1\",p=(i=Object(f.b)([\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"log\",value:function(e){var t=e.suid,n=e.location,i=e.referrer,r=e.category,o=e.action,a=e.target,u=e.value,s=this.authStateService.getAuthInfo(),c=s.userId;return d.a.get(h+\"/log\").query({uid:c,suid:t,source:i,location:n,category:r||\"timeline\",action:o,objectType:a,value:u,src:\"web\"})}},{key:\"recordFetch\",value:function(e){var t=e.suid,n=e.location,i=e.category,r=e.entryIdList;if(!r.length)return a.a.resolve();var o=this.authStateService.getAuthInfo(),u=o.userId,s=o.token,c=o.clientId;return d.a.get(h+\"/collector\").query({uid:u,suid:t,token:s,device_id:c,requestUuid:Date.now(),location:n,category:i||\"timeline\",entryList:r.join(\"|\"),src:\"web\"})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(815),d=n(2),f=\"https://entry-banner-storage-api-ms.juejin.im/v1\",h=(i=Object(d.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(f)}},{key:\"getActiveEntryBanner\",value:function(){return c.a.get(f+\"/getBanner\").then(this.resolveResponseData).then(function(e){return l.a.fromDescriptor(e)}).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return v});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(20),v=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.id||e._id,url:e.url||\"\",textList:e.textList||[],startedAt:Object(m.b)(e.startTime),endedAt:Object(m.b)(e.endTime)}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return g});var i,r,o=n(3),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(50),h=n(2),p=\"https://entry-storage-ms.juejin.im/v1\",g=(i=Object(h.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(p)}},{key:\"getEntryById\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(p+\"/getEntry\").query(a()(this.getAuthDescriptor(t),{entryId:e})).then(this.resolveResponseData).then(f.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"publishEntry\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.post(p+\"/entryPublish\").type(\"form\").send(a()(this.getAuthDescriptor(t),{originalUrl:e.originalUrl,title:e.title,type:e.type||\"article\",content:e.content,category:e.categoryId,tags:(e.tagIdList||[]).join(\"|\"),screenshot:e.screenshot,extra:this.getExtraParameter(e)})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"updateEntry\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.post(p+\"/entryUpdate\").type(\"form\").send(a()(this.getAuthDescriptor(t),{entryId:e.id,originalUrl:e.originalUrl,title:e.title,content:e.content,category:e.categoryId,tags:(e.tagIdList||[]).join(\"|\"),screenshot:e.screenshot,extra:this.getExtraParameter(e)})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"recommendEntry\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.post(p+\"/entryUpdate\").type(\"form\").send(a()(this.getAuthDescriptor(t),{entryId:e,hot:1})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unrecommendEntry\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.post(p+\"/entryUpdate\").type(\"form\").send(a()(this.getAuthDescriptor(t),{entryId:e,hot:0})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"deleteEntry\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(p+\"/entryDel\").query(a()(this.getAuthDescriptor(t),{entryId:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getExtraParameter\",value:function(e){return[\"vote\"===e.type?1:0,e.original?1:0,e.gfw?1:0,e.english?1:0].join(\"|\")}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return m});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(218),h=n(13),p=n(2),g=\"https://entry-view-storage-api-ms.juejin.im/v1\",m=(i=Object(p.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return a.a.reject(Object(h.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(g)}},{key:\"getEntryViewByEntryId\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(g+\"/getEntryView\").query(this.getRequestAuthParameters(t)).query({entryId:e}).then(this.resolveResponseData).then(f.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"getRequestAuthParameters\",value:function(e){return{device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(19),g=(n(217),n(13)),m=n(2),v=\"https://follow-api-ms.juejin.im/v1\",y=\"web\",I=(i=Object(m.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({3:function(e){var t=e.message;return s.a.reject(Object(g.b)(t))}}),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"hasFollowedUser\",value:function(e){return this.hasFollowedUserList([e]).then(function(t){return t[e]})}},{key:\"hasFollowedUserList\",value:function(e){if(!this.authStateService.authorized())return s.a.resolve(e.reduce(function(e,t){return e[t]=!1,e},{}));var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/isCurrentUserFollowed\").query({currentUid:t.userId,targetUids:e.join(\"|\"),src:y}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"followUser\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(g.g)());var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/follow\").query({follower:t.userId,followee:e,token:t.token,device_id:t.clientId,src:y}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unfollowUser\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(g.g)());var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/unfollow\").query({follower:t.userId,followee:e,token:t.token,device_id:t.clientId,src:y}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getFollowerList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUserFollowerList\").query({uid:e,currentUid:n.userId,before:t&&t.toISOString(),src:y}).then(this.resolveResponseData).then(this.userListResolver(function(e){return e.follower}).bind(this)).catch(this.handleResponseError)}},{key:\"getFolloweeList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUserFolloweeList\").query({uid:e,currentUid:n.userId,before:t&&t.toISOString(),src:y}).then(this.resolveResponseData).then(this.userListResolver(function(e){return e.followee}).bind(this)).catch(this.handleResponseError)}},{key:\"getFolloweInfo\",value:function(e){return h.a.get(v+\"/getUserFollowInfo\").query({uid:e,src:y}).then(this.resolveResponseData).then(function(e){return{followerCount:e.followerNum,followeeCount:e.followeeNum}}).catch(this.handleResponseError)}},{key:\"userListResolver\",value:function(e){return function(t){return{userList:t.map(e).map(function(e){return a()(p.a.fromDescriptor(e),{followed:e.currentUserFollowed})}),nextTime:t.length?new Date(t[t.length-1].createdAtString):null}}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(25),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(155),g=n(112),m=(n(116),n(820)),v=(n(202),n(13)),y=n(2),I=\"https://gold-tag-ms.juejin.im/v1\",M=(i=Object(y.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({3:function(e){var t=e.message;return s.a.reject(Object(v.b)(t))}}),this.handleResponseError=t.createResponseErrorHandler(I)}},{key:\"searchTag\",value:function(e,t){var n=this.authStateService.getAuthInfo(),i=t.getPage(),r=t.getPageSize(),o=\"hottest\"===t.getSort()?\"hot\":\"new\";return h.a.get([I+\"/tag\",\"/type/\"+o+\"/search/\"+encodeURIComponent(e),\"/page/\"+i+\"/pageSize/\"+r].join(\"\")).set(this.getRequestHeader(n)).then(this.resolveResponseData).then(function(e){return(e.tags||[]).map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getUserSubscribedTagList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(I+\"/user/\"+e+\"/subscribe\").set(this.getRequestHeader(n)).then(this.resolveResponseData).then(function(e){return e.tagList.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getUserSubscribedTagCount\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/user/\"+e+\"/subscribe\").set(this.getRequestHeader(t)).then(this.resolveResponseData).then(function(e){return e.total}).catch(this.handleResponseError)}},{key:\"getTagListForCustomizeRepo\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(I+\"/user/\"+e.userId+\"/subscribeCodeStatus\").set(this.getRequestHeader(e)).then(this.resolveResponseData).then(function(e){return a()(e).map(function(t){return p.a.fromDescriptor(e[t])})}).catch(this.handleResponseError)}},{key:\"getTagList\",value:function(e){var t=this.authStateService.getAuthInfo(),n=e.getPage(),i=e.getPageSize(),r=\"hottest\"===e.getSort()?\"hot\":\"new\";return h.a.get(I+\"/tags/type/\"+r+\"/page/\"+n+\"/pageSize/\"+i).set(this.getRequestHeader(t)).then(this.resolveResponseData).then(function(e){return e.tags.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getSuggestTagList\",value:function(e){var t=e.suggestType,n=e.page,i=e.pageSize,r=this.authStateService.getAuthInfo();return h.a.get(I+\"/tags/type/hot/suggest/\"+t+\"/page/\"+n+\"/pageSize/\"+i).set(this.getRequestHeader(r)).then(this.resolveResponseData).then(function(e){return e.tags.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getTagByTitle\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/tag/\"+encodeURIComponent(e)).set(this.getRequestHeader(t)).then(this.resolveResponseData).then(p.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"subscribeTag\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return h.a.put(I+\"/tag/subscribe/\"+e).set(this.getRequestHeader(t)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unsubscribeTag\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return h.a.del(I+\"/tag/subscribe/\"+e).set(this.getRequestHeader(t)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getCategoryTagList\",value:function(e,t){return s.a.resolve(m.a[e].map(p.a.fromDescriptor))}},{key:\"getCategoryList\",value:function(){return h.a.get(I+\"/categories\").set(this.getRequestHeader(this.authStateService.getAuthInfo())).then(this.resolveResponseData).then(function(e){return e.categoryList.map(g.a.fromServerDescriptor)}).catch(this.handleResponseError)}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";t.a={android:[{id:\"5597838ee4b08a686ce2319d\",title:\"Android\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/7bab0e1e66ea386e6f94.png\"},{id:\"55da9e7900b01d2966ac2b22\",title:\"gradle\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/7a7317267804b016ce78.png\"},{id:\"56947a4300b0d9aca30840db\",title:\"Android Studio\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/27fabb01ab6daa480a19.png\"},{id:\"56c40b1d2e958a0059a1b719\",title:\"Kotlin\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/9979306cd7d324ca5a27.png\"},{id:\"55a11a3ee4b0e8740af11997\",title:\"RxJava\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/6fb1878f782cd03388f9.png\"}],frontend:[{id:\"555e9a98e4b00c57d9955f68\",title:\"Vue.js\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/7b5c3eb591b671749fee.png\"},{id:\"555e99ffe4b00c57d99556aa\",title:\"React.js\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/f655215074250f10f8d4.png\"},{id:\"555eadc1e4b00c57d9962402\",title:\"CSS\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/66de0c4eb9d10130d5bf.png\"},{id:\"55964d83e4b08a686cc6b353\",title:\"JavaScript\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/5d70fd6af940df373834.png\"},{id:\"5597a05ae4b08a686ce56f6f\",title:\"前端\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/bac28828a49181c34110.png\"}],ios:[{id:\"5617d88960b2521f49db7220\",title:\"Mac\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/56621e371d668e24.png\"},{id:\"5597838ae4b08a686ce23139\",title:\"iOS\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/1df7a45a10dc1bd4e9ba.png\"},{id:\"559e7cc0e4b0796c19675383\",title:\"Swift\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/eb7ab66be4c2898b5aa9.png\"},{id:\"5597a0b7e4b08a686ce57e18\",title:\"Objective-C\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/71d968ea2fde62410b19.png\"},{id:\"55d5a7a760b22b8d7dd21fcc\",title:\"Xcode\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/a177fa3d60a1d0062129.png\"}],backend:[{id:\"55644032e4b03286789d7528\",title:\"Docker\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/1265c034d36735225ac5.png\"},{id:\"555e9a77e4b00c57d9955d64\",title:\"Node.js\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/f16f548d25028a1fdd80.png\"},{id:\"555e9af0e4b00c57d99563be\",title:\"Linux\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/b49dc843907aa7843a77.png\"},{id:\"5597a063e4b08a686ce57030\",title:\"后端\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/d83da9d012ddb7ae85f4.png\"},{id:\"55cdb52740ac79db3570607f\",title:\"架构\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/f27d811ad7e2b2a0bc24.png\"}],design:[{id:\"5597a035e4b08a686ce56bd9\",title:\"设计\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/f2e3a6fceb1a4f1ce6b6.png\"},{id:\"559de68de4b023682f3677e8\",title:\"Sketch\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/81837973c50bce235b3f.png\"},{id:\"5597b529e4b08a686ce77b57\",title:\"图片资源\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/7a2899af04cd485ecdb6.png\"},{id:\"55e7cabf60b26171197e950c\",title:\"Icon\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/0e59880a343e8c11e3ad.png\"},{id:\"55e80fef60b261711984bc03\",title:\"Photoshop\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/ef8b14448f1ffee54bc5.png\"}],product:[{id:\"5597a23fe4b08a686ce5a7c4\",title:\"字体\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/e09c5eca3497fcf6042b.png\"},{id:\"57032f461ea493005c879220\",title:\"运营\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/fb2b49e93b61d80f9be7.png\"},{id:\"55b9036700b0cecc83240cb7\",title:\"微信\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/ceeddfb49045193160bf.png\"},{id:\"5597a602e4b08a686ce608d2\",title:\"创业\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/96a2364285cd9b039219.png\"},{id:\"56e65334da2f60004c50910f\",title:\"产品\",icon:\"https://lc-mhke0kuv.cn-n1.lcfile.com/e98ecc945167940d7b6a.png\"}]}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return m});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(822),h=n(13),p=n(2),g=\"https://hot-topic-comment-wrapper-ms.juejin.im/v1\",m=(i=Object(p.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(g)}},{key:\"getPinCommentList\",value:function(e){var t=e.pinId,n=e.sort,i=e.page,r=e.pageSize,o=this.authStateService.getAuthInfo();return d.a.get(g+\"/comments/\"+t).set(this.getRequestHeader(o)).query({rankType:n,pageNum:i,pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(f.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"getPinSubCommentList\",value:function(e){var t=e.commentId,n=e.sort,i=e.page,r=e.pageSize,o=this.authStateService.getAuthInfo();return d.a.get(g+\"/reply/\"+t).set(this.getRequestHeader(o)).query({rankType:n,pageNum:i,pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(f.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"likePinComment\",value:function(e){var t=e.commentId,n=e.targetId;if(!this.authStateService.authorized())return a.a.reject(Object(h.g)());var i=this.authStateService.getAuthInfo();return d.a.put(g+\"/comment/\"+t+\"/like\").type(\"form\").set(this.getRequestHeader(i)).send({targetId:n}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikePinComment\",value:function(e){var t=e.commentId,n=e.targetId;if(!this.authStateService.authorized())return a.a.reject(Object(h.g)());var i=this.authStateService.getAuthInfo();return d.a.put(g+\"/comment/\"+t+\"/unlike\").type(\"form\").set(this.getRequestHeader(i)).send({targetId:n}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"submitComment\",value:function(e){if(!this.authStateService.authorized())return a.a.reject(Object(h.g)());var t=this.authStateService.getAuthInfo();return d.a.post(g+\"/comment\").type(\"form\").send({respUser:e.replyUserId,targetId:e.pinId,content:e.content,picList:e.imageUrl}).set(this.getRequestHeader(t)).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"replyComment\",value:function(e){if(!this.authStateService.authorized())return a.a.reject(Object(h.g)());var t=this.authStateService.getAuthInfo();return d.a.post(g+\"/comment\").type(\"form\").send({firstComment:e.parentId,respComment:e.replyCommentId,respUser:e.replyUserId,targetId:e.pinId,content:e.content,picList:e.imageUrl}).set(this.getRequestHeader(t)).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";function i(e){return(e.topComment||[]).map(y.fromDescriptor)}n.d(t,\"a\",function(){return y});var r=n(3),o=n.n(r),a=n(15),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(16),h=n.n(f),p=n(17),g=n.n(p),m=n(18),v=n(19),y=function(e){function t(){return c()(this,t),h()(this,(t.__proto__||u()(t)).apply(this,arguments))}return g()(t,e),d()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?o()(new t,{liked:e.isLiked},e,{user:v.a.fromDescriptor(e.userInfo),content:(e.content||\"\").trim(),imageUrlList:e.picList||[],likeCount:+e.likesCount||0,subCommentCount:+e.replyCount||0,replyUser:v.a.fromDescriptor(e.respUserInfo),replyCommentId:e.respComment,topSubCommentList:i(e),createdAt:e.createdAt&&new Date(e.createdAt),updatedAt:e.updatedAt&&new Date(e.updatedAt)}):null}}]),t}(m.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return v});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(13),g=n(2),m=\"https://invite-original-ms.juejin.im/v1\",v=(i=Object(g.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){return e.data}}),this.handleResponseError=t.createResponseErrorHandler(m)}},{key:\"fetchInvitationCount\",value:function(){if(!this.authStateService.authorized())return s.a.reject(Object(p.g)());var e=this.authStateService.getAuthInfo();return h.a.get(m+\"/sender/\"+e.userId+\"/availableCode\").set({src:\"web\"}).query(this.getAuthDescriptor(e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendInvitationCode\",value:function(e,t){if(!this.authStateService.authorized())return s.a.reject(Object(p.g)());var n=this.authStateService.getAuthInfo();return h.a.post(m+\"/sender/\"+n.userId+\"/postCode\").set({src:\"web\"}).send(a()(this.getAuthDescriptor(n),{receiverName:e,receiverEmail:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId,token:e.token,device_id:e.clientId,src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return y});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(19),h=n(75),p=n(13),g=n(2),m=n(825),v=\"https://lccro-api-ms.juejin.im/v1\",y=(i=Object(g.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"getUserById\",value:function(e){return this.getUserListById([e]).then(function(e){return e.length?e[0]:a.a.reject(Object(p.f)())})}},{key:\"getUserListById\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return d.a.get(v+\"/get_multi_user\").query(this.getAuthDescriptor(n)).query({ids:Object(h.c)(e).join(\"|\"),cols:m.a.join(\"|\")}).then(this.resolveResponseData).then(function(n){return t.translateData(n,e)}).catch(this.handleResponseError)}},{key:\"translateData\",value:function(e,t){return t.map(function(t){return e[t]}).filter(function(e){return e&&e.objectId}).map(f.a.fromDescriptor)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";t.a=[\"viewedEntriesCount\",\"role\",\"totalCollectionsCount\",\"allowNotification\",\"subscribedTagsCount\",\"appliedEditorAt\",\"email\",\"followersCount\",\"postedEntriesCount\",\"latestCollectionUserNotification\",\"commentedEntriesCount\",\"weeklyEmail\",\"collectedEntriesCount\",\"postedPostsCount\",\"username\",\"latestLoginedInAt\",\"totalHotIndex\",\"blogAddress\",\"selfDescription\",\"latestCheckedNotificationAt\",\"emailVerified\",\"totalCommentsCount\",\"installation\",\"blacklist\",\"weiboId\",\"mobilePhoneNumber\",\"apply\",\"followeesCount\",\"deviceType\",\"editorType\",\"jobTitle\",\"company\",\"latestVoteLikeUserNotification\",\"authData\",\"avatarLarge\",\"mobilePhoneVerified\",\"objectId\",\"createdAt\",\"updatedAt\"]},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return p});var i,r,o=n(3),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(2),h=\"https://mail-push-api.juejin.im\",p=(i=Object(f.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){return e.data}}),this.handleResponseError=t.createResponseErrorHandler(h)}},{key:\"getMailPushStatus\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(h+\"/getStatus.php\").query(a()(this.getAuthDescriptor(t),{type:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"setMailPushStatus\",value:function(e,t){var n=this.authStateService.getAuthInfo();return d.a.get(h+\"/subscribe.php\").query(a()(this.getAuthDescriptor(n),{type:e,check:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId,token:e.token,device_id:e.clientId,src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return g});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(2),g=(i=Object(p.b)([\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"hasWallet\",value:function(e){if(!e)return s.a.resolve(!1);return h.a.get(\"https://my-wallet-api-ms.juejin.im/v1/haveWalletAccessRight\").query(a()(this.getDefaultParams(),{uid:e})).accept(\"json\").then(function(e){return e.body}).then(function(e){return 1===e.s})}},{key:\"getWalletAmount\",value:function(){return h.a.get(\"https://my-wallet-api-ms.juejin.im/v1/getAmount\").query(this.getDefaultParams()).accept(\"json\").then(function(e){return e.body}).then(this.checkStatusCode).then(function(e){return e.d})}},{key:\"getWalletBill\",value:function(e){return h.a.get(\"https://my-wallet-api-ms.juejin.im/v1/getBill\").query(a()(this.getDefaultParams(),{page:e})).accept(\"json\").then(function(e){return e.body}).then(this.checkStatusCode).then(function(e){return(e.d||[]).map(function(e){return a()(e,{create_time:new Date(e.create_time),update_time:new Date(e.update_time)})})})}},{key:\"canWithdraw\",value:function(){return h.a.get(\"https://my-wallet-api-ms.juejin.im/v1/checkApplyRules\").query(this.getDefaultParams()).accept(\"json\").then(function(e){return e.body}).then(function(e){return 1===e.s})}},{key:\"applyWithdraw\",value:function(e,t,n){var i=a()(this.getDefaultParams(),{volume:e,alipayAccount:t,name:n});return h.a.get(\"https://my-wallet-api-ms.juejin.im/v1/apply\").query(i).accept(\"json\").then(function(e){return e.body}).then(this.checkStatusCode)}},{key:\"checkStatusCode\",value:function(e){if(-1===[1,2].indexOf(e.s))throw new Error(e.s);return e}},{key:\"getDefaultParams\",value:function(){var e=this.authStateService.getAuthInfo();return{uid:e.userId,user_token:e.token,device_id:e.clientId,src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://parser-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"getPageInfo\",value:function(e){return c.a.get(d+\"/page/info\").query({url:e,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getLinkInfo\",value:function(e){return c.a.get(d+\"/link/info\").query({url:e,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(50),g=n(218),m=n(13),v=n(2),y=\"https://post-storage-api-ms.juejin.im/v1\",I=(i=Object(v.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return s.a.reject(Object(m.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(y)}},{key:\"getEntryByPostId\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/getDetailData\").query(a()(this.getAuthDescriptor(t),{type:\"entry\",postId:e})).then(this.resolveResponseData).then(function(e){return e?p.a.fromDescriptor(e):s.a.reject(Object(m.f)())}).catch(this.handleResponseError)}},{key:\"getEntryViewByPostId\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/getDetailData\").query(a()(this.getAuthDescriptor(t),{type:\"entryView\",postId:e})).then(this.resolveResponseData).then(function(e){return e?g.a.fromDescriptor(e):s.a.reject(Object(m.f)())}).catch(this.handleResponseError)}},{key:\"getRecommendedEntryListByTagIdList\",value:function(e){var t=e.tagIdList,n=e.pointer,i=this.authStateService.getAuthInfo();return h.a.get(y+\"/getRecommendEntryByTagIds\").query(a()(this.getAuthDescriptor(i),{tagIds:t.join(\"|\"),before:n})).then(this.resolveResponseData).then(function(e){var t=e.entrylist.map(p.a.fromDescriptor);return{list:t,pointer:t.length?t[t.length-1].rankIndex:null}}).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return g});var i,r,o=n(25),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(2),h=n(50),p=\"https://recommender-api-ms.juejin.im/v1\",g=(i=Object(f.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(){return[]}}),this.handleResponseError=t.createResponseErrorHandler(p)}},{key:\"getRecommendEntryList\",value:function(e){var t=this.authStateService.getAuthInfo(),n=t.userId;return d.a.get(p+\"/get_recommended_entry\").query(n?{uid:n}:{suid:e}).query({ab:\"welcome_3\",src:\"web\"}).then(this.resolveResponseData).then(function(e){return Array.isArray(e)?e.map(h.a.fromDescriptor):a()(e).map(function(t){return h.a.fromDescriptor(e[t])})}).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(3),a=n.n(o),u=n(25),s=n.n(u),c=n(5),l=n.n(c),d=n(0),f=n.n(d),h=n(1),p=n.n(h),g=n(9),m=n(92),v=n(13),y=n(2),I=\"https://repo-comment-wrapper-ms.juejin.im/v1\",M=(i=Object(y.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){f()(this,e)}return p()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(I)}},{key:\"submitComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({picList:e.imageUrl,respUser:e.replyUserId,targetId:e.entryId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"replyComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({firstComment:e.parentId,respComment:e.replyCommentId,respUser:e.replyUserId,targetId:e.entryId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"getCommentById\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments\").set(this.getRequestHeader(n)).query({idList:e}).then(this.resolveResponseData).then(function(e){return s()(e).length?e:l.a.reject(Object(v.f)())}).then(function(n){return t.resolveComment(n[e])}).catch(this.handleResponseError)}},{key:\"getCommentList\",value:function(e){var t=this,n=e.entryId,i=e.startTime,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({createdAt:i&&i.toISOString(),rankType:\"new\",pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"getHotCommentList\",value:function(e){var t=this,n=e.entryId,i=e.page,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({rankType:\"hot\",pageNum:i,pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"getSubCommentList\",value:function(e){var t=this,n=e.commentId,i=e.entryId,r=e.page,o=e.pageSize,a=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+i+\"/comment/\"+n).set(this.getRequestHeader(a)).query({pageNum:r,pageSize:o}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"likeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.put(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.del(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"resolveComment\",value:function(e){return m.a.fromDescriptor(a()(e,{liked:e.isLiked}))}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(111),g=(n(833),n(834)),m=n(835),v=n(13),y=n(2),I=\"https://repo-ms.juejin.im/v1\",M=(i=Object(y.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return s.a.reject(Object(v.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(I)}},{key:\"getRepoById\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/get_repo_detail\").query(this.getAuthDescriptor(t)).query({objectId:e}).then(this.resolveResponseData).then(p.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"getTrendingRepoList\",value:function(e,t){var n=this.authStateService.getAuthInfo(),i={since:t};return e&&\"all\"!==e&&(i.language=e),h.a.get(I+\"/get_trending\").query(this.getAuthDescriptor(n)).query(i).then(this.resolveResponseData).then(function(e){return e.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getRepoListByTagIdList\",value:function(e,t){var n=this.authStateService.getAuthInfo(),i=\"newest\"===t.getSort()?\"/getTagReposByTimeline\":\"/getTagReposByStars\";return h.a.get(I+i).query(this.getAuthDescriptor(n)).query({tagIds:e.join(\"|\"),page:t.getPage()-1,pageSize:t.getPageSize(),asc:0}).then(this.resolveResponseData).then(function(e){return e.repoList.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getCustomizedRepoList\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/getCustomRepos\").query(this.getAuthDescriptor(t)).query({before:e.getPointer(),limit:e.getPageSize()}).then(this.resolveResponseData).then(function(e){var t=e.total,n=e.repoList.filter(function(e){return e});return{total:t,list:n.map(p.a.fromDescriptor),pointer:n.length?n[n.length-1].localCreatedAt:null}}).catch(this.handleResponseError)}},{key:\"getRepoTitleTranslationList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(I+\"/get_chtitles\").query(this.getAuthDescriptor(n)).query({repoId:e,limit:t,skip:0}).then(this.resolveResponseData).then(function(e){return e.list.map(g.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getRepoDescriptionTranslationList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(I+\"/get_chdescriptions\").query(this.getAuthDescriptor(n)).query({repoId:e,limit:t,skip:0}).then(this.resolveResponseData).then(function(e){return e.list.map(m.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"translateRepo\",value:function(e){var t=e.repoId,n=e.title,i=e.description,r=e.chosenTitleId,o=e.chosenDescriptionId,u=e.vcode,s=e.vcodeToken,c=this.authStateService.getAuthInfo();return h.a.post(I+\"/trans_repo\").type(\"form\").send(a()(this.getAuthDescriptor(c),{objectId:t,imageCode:u,imageToken:s},r?{chTitleId:r}:{chTitle:n},o?{chDescriptionId:o}:{chDescription:i})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"reportRepo\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/report_repo\").query(this.getAuthDescriptor(t)).query({objectId:e}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){var t={src:\"web\"};return e.userId&&(t.uid=e.userId),e.clientId&&(t.device_id=e.clientId),e.token&&(t.token=e.token),t}}]),e}())||r},function(e,t,n){\"use strict\";var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18);!function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.id,url:e.url,title:e.title,description:e.desc,langCount:e.languageNum,repoCount:e.repoNum}):null}}])}(g.a)},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return m});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.objectId,repoId:e.repoId,userId:e.uid,content:e.chTitle}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return m});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,{id:e.objectId,repoId:e.repoId,userId:e.uid,content:e.chDescription}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://search-merger-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\",\"entryRepository\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"searchEntry\",value:function(e,t){var n=this;return c.a.get(d+\"/search\").query({query:e,page:t.getPage()-1,raw_result:!1,src:\"web\"}).then(this.resolveResponseData).then(function(e){return n.entryRepository.getEntryListById((e.length?e:[]).map(function(e){return e.objectId}))}).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(219),g=n(838),m=n(13),v=n(2),y=\"https://short-msg-ms.juejin.im/v1\",I=(i=Object(v.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return s.a.reject(Object(m.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(y)}},{key:\"getPinById\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/getByID\").query(this.getAuthDescriptor(t)).query({msgId:e}).then(this.resolveResponseData).then(p.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"likePin\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/like\").query(this.getAuthDescriptor(t)).query({msgId:e}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikePin\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/unlike\").query(this.getAuthDescriptor(t)).query({msgId:e}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"createPin\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/create\").type(\"form\").send(a()(this.getAuthDescriptor(t),{content:e.content,pictures:e.pictures,url:e.url,urlTitle:e.urlTitle,urlPic:e.urlPic,topicId:e.topicId})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"deletePin\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/delete\").query({msgId:e}).query(this.getAuthDescriptor(t)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getPinByTimeline\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(y+\"/getByTimeline\").query(this.getAuthDescriptor(n)).query({before:e,limit:t}).then(this.resolveResponseData).then(function(e){return e.list.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getPinByUserId\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/getUserList\").query(a()(this.getAuthDescriptor(t),{uid:e.userId})).query({currentUid:t.userId,before:e.pointer,limit:e.limit||20}).then(this.resolveResponseData).then(function(e){var t=e.list[e.list.length-1],n=t?t.createdAt:null;return{list:e.list.map(p.a.fromDescriptor),pointer:n}}).catch(this.handleResponseError)}},{key:\"getDynamicPinList\",value:function(e){var t=this.authStateService.getAuthInfo();return t.userId?h.a.get(y+\"/pinList/dynamic\").query(this.getAuthDescriptor(t)).query({before:e.pointer,limit:e.limit||20}).then(this.resolveResponseData).then(function(e){var t=e.list[e.list.length-1],n=t?t.createdAt:null;return{list:e.list.map(g.a.fromDescriptor),pointer:n}}).catch(this.handleResponseError):s.a.resolve({list:[],pointer:\"\"})}},{key:\"getRecommendPinList\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/pinList/recommend\").query(this.getAuthDescriptor(t)).query({before:e.pointer,limit:e.limit||20}).then(this.resolveResponseData).then(function(e){var t=e.list[e.list.length-1],n=t?t.createdAt:null;return{list:e.list.map(p.a.fromDescriptor),pointer:n}}).catch(this.handleResponseError)}},{key:\"getHotRecommendList\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(y+\"/getHotRecommendList\").query(this.getAuthDescriptor(e)).then(this.resolveResponseData).then(function(e){return e.list.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getPinListByTopicId\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/pinList/topic\").query(this.getAuthDescriptor(t)).query({topicId:e.topicId,page:e.page-1||0,pageSize:e.pageSize||20,sortType:e.sortType}).then(this.resolveResponseData).then(function(e){return e.list.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return I});var i=n(3),r=n.n(i),o=n(15),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(16),f=n.n(d),h=n(17),p=n.n(h),g=n(18),m=n(839),v=n(219),y=n(20),I=function(e){function t(){return s()(this,t),f()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),l()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?r()(new t,e,{createdAt:Object(y.b)(e.createdAt),type:e.type,follows:{id:e.follow?e.follow.objectId:null,followee:m.a.fromDescriptor(e.follow?e.follow.followee:null),follower:m.a.fromDescriptor(e.follow?e.follow.follower:null),createdAt:e.follow?e.follow.createdAt:null,createdAtString:e.follow?e.follow.createdAtString:null},pin:v.a.fromDescriptor(e.pin?e.pin:null)}):null}}]),t}(g.a)},function(e,t,n){\"use strict\";function i(e){return e&&e.replace(/^http:/i,\"https:\")}n.d(t,\"a\",function(){return y});var r=n(3),o=n.n(r),a=n(15),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(16),h=n.n(f),p=n(17),g=n.n(p),m=n(18),v=n(20),y=function(e){function t(){return c()(this,t),h()(this,(t.__proto__||u()(t)).apply(this,arguments))}return g()(t,e),d()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?o()(new t,{id:e.objectId,company:e.company,username:e.username,jobTitle:e.descriptor,role:e.role,followerCount:e.followersCount||0,followingCount:e.followeesCount||0,currentUserFollowed:e.currentUserFollowed||!1},e,{avatar:i(e.avatar||e.avatar_large||e.avatarLarge),createdAt:Object(v.b)(e.createdAt),updatedAt:Object(v.b)(e.updatedAt)}):null}}]),t}(m.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return v});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(13),g=n(2),m=\"https://pin-report-ms.juejin.im/v1\",v=(i=Object(g.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return s.a.reject(Object(p.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(m)}},{key:\"report\",value:function(e){var t=e.pinId,n=e.type,i=e.detail,r=this.authStateService.getAuthInfo();return h.a.post(m+\"/report\").type(\"form\").send(a()(this.getAuthDescriptor(r),{pinId:t,type:n,detail:i})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return p});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(19),d=n(75),f=n(2),h=\"https://suggest-follow-api-ms.juejin.im/v1\",p=(i=Object(f.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){return e.data||[]}}),this.handleResponseError=t.createResponseErrorHandler(h)}},{key:\"getSuggestedUserListInCategory\",value:function(e){var t=this.authStateService.getAuthInfo(),n=t.userId;return c.a.get(h+\"/getByTag\").timeout(5e3).query({tag:e,src:\"web\",t:1}).then(this.resolveResponseData).then(function(e){return Object(d.c)(((e[0]||{}).users||[]).filter(function(e){return e&&e.objectId!==n}).map(l.a.fromDescriptor),function(e){return e.id})}).catch(this.handleResponseError)}},{key:\"getSuggestedUser\",value:function(e){var t=this;return c.a.get(h+\"/getByTag\").timeout(5e3).query({tag:e,src:\"web\",t:1}).then(this.resolveResponseData).then(function(e){return t.translateData(e)}).catch(this.handleResponseError)}},{key:\"translateData\",value:function(e){return e.map(function(e){return{tag:e.tag,users:e.users.map(l.a.fromDescriptor)}})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://suid-generator-api-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"generateSUID\",value:function(e){return c.a.get(d+\"/gen_suid\").query({src:e}).then(this.resolveResponseData).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(50),g=(n(19),n(13)),m=n(2),v=\"https://timeline-merger-ms.juejin.im/v1\",y={popular:{getPointer:function(e){return e.rankIndex},getRequest:function(){return h.a.get(v+\"/get_entry_by_rank\")}},newest:{getPointer:function(e){return e.createdAt.toISOString()},getRequest:function(){return h.a.get(v+\"/get_entry_by_timeline\")}},comment:{getPointer:function(e){return e.latestCommentAt?e.latestCommentAt.toISOString():null},getRequest:function(){return h.a.get(v+\"/get_entry_by_comment\")}},hottest:{getPointer:function(e){return e.hotIndex},getRequest:function(){return h.a.get(v+\"/get_entry_by_hot\")}},weeklyHottest:{getPointer:function(e){return e.hotIndex},getRequest:function(){return h.a.get(v+\"/get_entry_by_period\").query({period:\"week\"})}},monthlyHottest:{getPointer:function(e){return e.hotIndex},getRequest:function(){return h.a.get(v+\"/get_entry_by_period\").query({period:\"month\"})}}},I={popular:\"rankIndex\",newest:\"createdAt\",hottest:\"hotIndex\",comment:\"latestCommentAt\"},M=(i=Object(m.b)([\"clientHelper\",\"authStateService\",\"categoryRepository\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"getEntryById\",value:function(e){return this.getEntryListById([e]).then(function(e){return e.length?e[0]:s.a.reject(Object(g.f)())})}},{key:\"getEntryListById\",value:function(e){if(!e.length)return s.a.resolve([]);var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_entry_by_ids\").query(this.getRequestAuthParameters(t)).query({entryIds:e.join(\"|\")}).then(this.resolveResponseData).then(function(e){return e.entrylist.map(p.a.fromDescriptor).filter(function(e){return e})}).catch(this.handleResponseError)}},{key:\"getEntryByUrl\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_entry_by_url\").query(this.getRequestAuthParameters(t)).query({url:e}).then(this.resolveResponseData).then(function(e){return p.a.fromDescriptor(e.entrylist[0])}).catch(this.handleResponseError)}},{key:\"queryEntryList\",value:function(e){var t=this,n=this.authStateService.getAuthInfo(),i=function(i){var r=e.getEqualConstraintValue(\"type\"),o=e.getEqualConstraintValue(\"tag\"),u=e.getPointer(),s=a()(t.getRequestAuthParameters(n),{before:e.getPointer(),limit:e.getPageSize()});return r&&(s.type=r),u&&(s.before=u),o?s.tag=o:i&&(s.category=i),s};return this.getCategoryDescriptor(e).then(i).then(function(n){return t.getBaseRequestBySort(e.getSort()).query(n)}).then(this.resolveResponseData).then(function(n){return t.resolveEntryList(n,e.getSort())}).catch(this.handleResponseError)}},{key:\"getTimelineEntryList\",value:function(e){var t=this;if(!this.authStateService.authorized())return s.a.resolve([]);var n=this.authStateService.getAuthInfo(),i=function(i){var r=e.getEqualConstraintValue(\"type\"),o=e.getEqualConstraintValue(\"tag\"),u=e.getPointer(),s=a()(t.getRequestAuthParameters(n),{limit:e.getPageSize()});return r&&(s.type=r),u&&(s.before=u),o?s.tag=o:i&&(s.category=i),i&&\"all\"===i&&(s.recomment=1),s};return this.getCategoryDescriptor(e).then(i).then(function(n){return t.getBaseRequestBySort(e.getSort()).query(n)}).then(this.resolveResponseData).then(function(n){return t.resolveEntryList(n,e.getSort())}).catch(this.handleResponseError)}},{key:\"getUserColumnEntryList\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_entry_by_self\").query(this.getRequestAuthParameters(i)).query({targetUid:e,type:\"post\",before:t.getPointer(),limit:t.getPageSize(),order:I[t.getSort()]}).then(this.resolveResponseData).then(function(e){return n.resolveEntryList(e,t.getSort())}).catch(this.handleResponseError)}},{key:\"getUserSharedEntryList\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_entry_by_self\").query(this.getRequestAuthParameters(i)).query({targetUid:e,type:\"article\",before:t.getPointer(),limit:t.getPageSize(),order:I[t.getSort()]}).then(this.resolveResponseData).then(function(e){return n.resolveEntryList(e,t.getSort())}).catch(this.handleResponseError)}},{key:\"getRelatedEntryList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_related_entry\").query(this.getRequestAuthParameters(n)).query({limit:t,entryId:e}).then(this.resolveResponseData).then(function(e){return e.entrylist.map(p.a.fromDescriptor).filter(function(e){return e})}).catch(this.handleResponseError)}},{key:\"getTagEntryList\",value:function(e,t){var n=this,i=this.authStateService.getAuthInfo();return h.a.get(v+\"/get_tag_entry\").query(this.getRequestAuthParameters(i)).query({tagId:e,page:t.getPage()-1,pageSize:t.getPageSize(),sort:I[t.getSort()]}).then(this.resolveResponseData).then(function(e){return n.resolveEntryList(e,t.getSort())}).catch(this.handleResponseError)}},{key:\"resolveEntryList\",value:function(e,t){var n=e.total,i=e.entrylist.map(p.a.fromDescriptor).filter(function(e){return e});return{total:n,list:i,pointer:i.length?y[t].getPointer(i[i.length-1]):null}}},{key:\"getCategoryDescriptor\",value:function(e){var t=e.getEqualConstraintValue(\"category\");return t?this.categoryRepository.getCategoryIdByName(t):s.a.resolve(\"all\")}},{key:\"getBaseRequestBySort\",value:function(e){var t=y[e];if(!t)throw Object(g.a)(\"invalid sort: \"+e);return t.getRequest()}},{key:\"getRequestAuthParameters\",value:function(e){var t={src:\"web\"};return e.userId&&(t.uid=e.userId),e.clientId&&(t.device_id=e.clientId),e.token&&(t.token=e.token),t}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://ubc-api-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"recordView\",value:function(e){var t=e.src,n=e.location,i=e.subLocation,r=e.suid,o=this.authStateService.getAuthInfo(),a=o.userId;return c.a.get(d+\"/punch\").query({uid:a,sub_location:i,location:n,suid:r,src:t}).then(this.resolveResponseData).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return v});var i,r,o=n(5),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(221),h=n(847),p=n(13),g=n(2),m=\"https://ufp-api-ms.juejin.im/v1\",v=(i=Object(g.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){return e.data}}),this.handleResponseError=t.createResponseErrorHandler(m)}},{key:\"getUnreadUserNotificationCount\",value:function(){if(!this.authStateService.authorized())return a.a.resolve(0);var e=this.authStateService.getAuthInfo();return d.a.get(m+\"/getUserNotificationNum\").query({uid:e.userId,token:e.token,src:\"web\"}).then(this.resolveResponseData).then(function(e){return e.notification_num}).catch(this.handleResponseError)}},{key:\"readAllUserNotification\",value:function(){if(!this.authStateService.authorized())return a.a.reject(Object(p.g)());var e=this.authStateService.getAuthInfo();return d.a.get(m+\"/setUserNotificationNum\").query({uid:e.userId,token:e.token,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getUserNotificationList\",value:function(e){if(!this.authStateService.authorized())return a.a.reject(Object(p.g)());var t=this.authStateService.getAuthInfo();return d.a.get(m+\"/getUserNotification\").query({uid:t.userId,token:t.token,before:e,src:\"web\"}).then(this.resolveResponseData).then(function(e){var t=e[e.length-1],n=t?t.beforeAtString:null;return{list:e.map(f.a.fromDescriptor),pointer:n}}).catch(this.handleResponseError)}},{key:\"getUserActivityList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return d.a.get(m+\"/getUserLog\").query({uid:e,token:n.token||\"none\",before:t,src:\"web\"}).then(this.resolveResponseData).then(function(e){var t=e[e.length-1],n=t?t.beforeAtString:null;return{list:e.map(h.a.fromDescriptor),pointer:n}}).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";var i=n(50),r=n(156);t.a=i.a.fromDescriptor({_blank:!0,id:\"000000000000000000000000\",title:\"未知文章\",content:\"此文章不存在\",user:r.a})},function(e,t,n){\"use strict\";function i(e){return Array.isArray(e)?e:[]}function r(e){return e&&a()(e).length?e:null}n.d(t,\"a\",function(){return T});var o=n(25),a=n.n(o),u=n(3),s=n.n(u),c=n(15),l=n.n(c),d=n(0),f=n.n(d),h=n(1),p=n.n(h),g=n(16),m=n.n(g),v=n(17),y=n.n(v),I=n(18),M=n(50),b=n(19),E=n(155),C=n(20),T=function(e){function t(){return f()(this,t),m()(this,(t.__proto__||l()(t)).apply(this,arguments))}return y()(t,e),p()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?s()(new t,{id:e.objectId},e,{userList:i(e.users).map(b.a.fromDescriptor),tagList:i(e.tags).map(E.a.fromDescriptor),entry:M.a.fromDescriptor(r(e.entry)),count:e.count||0,createdAt:Object(C.b)(e.createdAtString),updatedAt:Object(C.b)(e.updatedAtString)}):null}}]),t}(I.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(19),g=n(50),m=n(13),v=n(2),y=\"https://user-like-wrapper-ms.juejin.im/v1\",I=(i=Object(v.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(y)}},{key:\"likeEntry\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var t=this.authStateService.getAuthInfo();return h.a.put(y+\"/user/like/entry/\"+e).set(this.getRequestHeader(t)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikeEntry\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var t=this.authStateService.getAuthInfo();return h.a.del(y+\"/user/like/entry/\"+e).set(this.getRequestHeader(t)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"hasLikedEntry\",value:function(e){if(!this.authStateService.authorized())return s.a.resolve(!1);var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/user/like/entry/\"+e).set(this.getRequestHeader(t)).then(this.resolveResponseData).then(function(e){return e.like}).catch(this.handleResponseError)}},{key:\"getUserLikedEntryList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(y+\"/user/\"+e+\"/like/entry\").set(this.getRequestHeader(n)).query({page:t.getPage()-1,pageSize:t.getPageSize()}).then(this.resolveResponseData).then(this.resolveEntryData).catch(this.handleResponseError)}},{key:\"getEntryLikerList\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(y+\"/entry/\"+e+\"/user\").set(this.getRequestHeader(n)).query({page:t.getPage()-1,pageSize:t.getPageSize()}).then(this.resolveResponseData).then(this.resolveLikerData).catch(this.handleResponseError)}},{key:\"resolveEntryData\",value:function(e){return e.entryList.map(g.a.fromDescriptor).filter(function(e){return e})}},{key:\"resolveLikerData\",value:function(e){return{userList:e.users.map(function(e){return a()(p.a.fromDescriptor(e),{followed:e.isFollow})}),total:e.total}}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return y});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(221),g=n(13),m=n(2),v=\"https://user-notification-api-ms.juejin.im/v1\",y=(i=Object(m.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){return e.data}}),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"getUnreadSystemNotificationCount\",value:function(){if(!this.authStateService.authorized())return s.a.resolve(0);var e=this.authStateService.getAuthInfo();return h.a.get(v+\"/getUnreadSystemNotificationNum\").query({uid:e.userId,token:e.token,device_id:e.clientId,src:\"web\"}).then(this.resolveResponseData).then(function(e){return e.unread_num})}},{key:\"readAllSystemNotification\",value:function(){if(!this.authStateService.authorized())return s.a.reject(Object(g.g)());var e=this.authStateService.getAuthInfo();return h.a.get(v+\"/checkAllSystemNotification\").query({uid:e.userId,token:e.token,device_id:e.clientId,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getSystemNotificationList\",value:function(e){var t=this;if(!this.authStateService.authorized())return s.a.reject(Object(g.g)());var n=this.authStateService.getAuthInfo();return h.a.get(v+\"/getSystemNotification\").query({uid:n.userId,token:n.token,device_id:n.clientId,pointer:e,src:\"web\"}).then(this.resolveResponseData).then(function(e){return{pointer:e.pointer,list:(e.notifications||[]).map(t.translateSystemNotification)}}).catch(this.handleResponseError)}},{key:\"translateSystemNotification\",value:function(e){return a()(new p.a,{type:\"system\",check:e.check,content:e.message,createdAt:new Date(e.date),updatedAt:new Date(e.date)})}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(19),g=n(166),m=n(13),v=n(2),y=\"https://user-storage-api-ms.juejin.im\",I=(i=Object(v.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(y)}},{key:\"getCurrentUserInfo\",value:function(){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var e=this.authStateService.getAuthInfo();return h.a.get(y+\"/v1/getUserInfo\").query(this.getAuthDescriptor(e)).query({current_uid:e.userId}).then(this.resolveResponseData).then(p.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"updateCurrentUserInfo\",value:function(e,t){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var n=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/updateUserInfo\").type(\"form\").send(a()(this.getAuthDescriptor(n),{field:Object(g.c)(e),value:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"updatePassword\",value:function(e,t){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var n=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/changePassword\").type(\"form\").send(a()(this.getAuthDescriptor(n),{old_password:e,new_password:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"resetPasswordWithPhone\",value:function(e,t,n){var i=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/restPassword\").type(\"form\").send(a()(this.getAuthDescriptor(i),{mobilePhoneNumber:e,smsCode:t,new_password:n})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendPasswordResetToken\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/restPwdByEmail\").type(\"form\").send(a()(this.getAuthDescriptor(t),{email:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"resetPasswordWithToken\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/changePasswordByEmailToken\").type(\"form\").send(a()(this.getAuthDescriptor(n),{mail_token:e,new_password:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendEmailVerifyToken\",value:function(e){if(!this.authStateService.authorized())return s.a.reject(Object(m.g)());var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/sendEmailToUser\").type(\"form\").send(a()(this.getAuthDescriptor(t),{sendType:\"verify\",email:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"verifyEmailWithToken\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/verifyUserEmail\").type(\"form\").send(a()(this.getAuthDescriptor(t),{mail_token:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"registerWithPhone\",value:function(e){var t=e.username,n=e.password,i=e.phoneNumber,r=e.vcode,o=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/createUser\").type(\"form\").send(a()(this.getAuthDescriptor(o),{username:t,password:n,mobilePhoneNumber:i,smsCode:r})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getRandCode\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(\"https://rand-code-ms.juejin.im/v1/getRandCode\").query(this.getAuthDescriptor(e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendRegisterVcode\",value:function(e,t,n){var i=this.authStateService.getAuthInfo();return h.a.post(y+\"/v2/sendSmsCodeToUser\").type(\"form\").send(a()(this.getAuthDescriptor(i),{mobilePhoneNumber:e,imageToken:t,imageCode:n,useType:\"signup\"})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendPasswordResetVcode\",value:function(e,t,n){var i=this.authStateService.getAuthInfo();return h.a.post(y+\"/v2/sendSmsCodeToUser\").type(\"form\").send(a()(this.getAuthDescriptor(i),{mobilePhoneNumber:e,imageToken:t,imageCode:n,useType:\"restpwd\"})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"sendPhoneBindVcode\",value:function(e,t,n){var i=this.authStateService.getAuthInfo();return h.a.post(y+\"/v2/updateUserMobile\").type(\"form\").send(a()(this.getAuthDescriptor(i),{imageToken:t,imageCode:n,mobilePhoneNumber:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"bindPhone\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/bindUserMobile\").type(\"form\").send(a()(this.getAuthDescriptor(n),{mobilePhoneNumber:e,smsCode:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"bindEmail\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/updateUserEmail\").type(\"form\").send(a()(this.getAuthDescriptor(t),{email:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unbindThirdpart\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/unbind\").type(\"form\").send(a()(this.getAuthDescriptor(t),{channel:e,isThird:1})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unbindEmail\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/unbind\").type(\"form\").send(a()(this.getAuthDescriptor(e),{email:e.user.email,isThird:0})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unbindPhone\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.post(y+\"/v1/unbind\").type(\"form\").send(a()(this.getAuthDescriptor(e),{mobilePhoneNumber:e.user.mobilePhoneNumber,isThird:0})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){var t={src:\"web\"};return e.userId&&(t.uid=e.userId),e.token&&(t.token=e.token),t.device_id=e.clientId||this.getUnauthorizedClientId(),t}},{key:\"getUnauthorizedClientId\",value:function(){return Date.now()}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return h});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(19),d=n(2),f=\"https://vote-attender-api-ms.juejin.im/v1\",h=(i=Object(d.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(f)}},{key:\"getAttenderList\",value:function(e,t){return c.a.get(f+\"/get_attender\").query(this.getRequestAuthParameters(this.authStateService.getAuthInfo())).query({entryId:e,page:t.getPage(),pageSize:t.getPageSize()}).then(this.resolveResponseData).then(function(e){return{total:e.total,list:e.users.map(l.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"getRequestAuthParameters\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return p});var i,r,o=n(3),a=n.n(o),u=n(0),s=n.n(u),c=n(1),l=n.n(c),d=n(9),f=n(2),h=\"https://event-storage-api-ms.juejin.im\",p=(i=Object(f.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){s()(this,e)}return l()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){e.message;return[]}}),this.handleResponseError=t.createResponseErrorHandler(h)}},{key:\"getEventList\",value:function(e,t){var n=\"timeline\"===t?\"v2\":\"v1\",i=this.authStateService.getAuthInfo();return d.a.get(h+\"/\"+n+\"/getEventList\").query(a()(this.getAuthDescriptor(i),{orderType:\"startTime\"},e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getMonthEventCount\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(h+\"/v1/getMonthEventCount\").query(a()(this.getAuthDescriptor(t),e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getCityList\",value:function(e){var t=this.authStateService.getAuthInfo();return d.a.get(h+\"/v1/getCityList\").query(a()(this.getAuthDescriptor(t),e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",client_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return M});var i,r,o=n(3),a=n.n(o),u=n(25),s=n.n(u),c=n(5),l=n.n(c),d=n(0),f=n.n(d),h=n(1),p=n.n(h),g=n(9),m=n(92),v=n(13),y=n(2),I=\"//xiaoce-comment-wrapper-ms.juejin.im/v1\",M=(i=Object(y.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){f()(this,e)}return p()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(I)}},{key:\"submitComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({picList:e.imageUrl,respUser:e.replyUserId,targetId:e.sectionId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"replyComment\",value:function(e){if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var t=this.authStateService.getAuthInfo();return g.a.post(I+\"/comment\").set(this.getRequestHeader(t)).type(\"form\").send({firstComment:e.parentId,respComment:e.replyCommentId,respUser:e.replyUserId,targetId:e.entryId,targetType:\"entry\",content:e.content}).then(this.resolveResponseData).then(function(e){return e.commentId}).catch(this.handleResponseError)}},{key:\"getCommentById\",value:function(e){var t=this,n=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments\").set(this.getRequestHeader(n)).query({idList:e}).then(this.resolveResponseData).then(function(e){return s()(e).length?e:l.a.reject(Object(v.f)())}).then(function(n){return t.resolveComment(n[e])}).catch(this.handleResponseError)}},{key:\"getCommentList\",value:function(e){var t=this,n=e.entryId,i=e.startTime,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({createdAt:i&&i.toISOString(),rankType:\"new\",pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"getHotCommentList\",value:function(e){var t=this,n=e.entryId,i=e.page,r=e.pageSize,o=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+n).set(this.getRequestHeader(o)).query({rankType:\"hot\",pageNum:i,pageSize:r}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"getSubCommentList\",value:function(e){var t=this,n=e.commentId,i=e.entryId,r=e.page,o=e.pageSize,a=this.authStateService.getAuthInfo();return g.a.get(I+\"/comments/entry/\"+i+\"/comment/\"+n).set(this.getRequestHeader(a)).query({pageNum:r,pageSize:o}).then(this.resolveResponseData).then(function(e){return{total:e.count,list:e.comments.map(t.resolveComment)}}).catch(this.handleResponseError)}},{key:\"likeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.put(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unlikeComment\",value:function(e){var t=e.commentId,n=e.entryId;if(!this.authStateService.authorized())return l.a.reject(Object(v.g)());var i=this.authStateService.getAuthInfo();return g.a.del(I+\"/comment/\"+t+\"/like\").set(this.getRequestHeader(i)).query({targetId:n,targetType:\"entry\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"resolveComment\",value:function(e){return m.a.fromDescriptor(a()(e,{liked:e.isLiked}))}},{key:\"getRequestHeader\",value:function(e){return{\"X-Juejin-Uid\":e.userId||\"\",\"X-Juejin-Client\":e.clientId||\"\",\"X-Juejin-Token\":e.token||\"\",\"X-Juejin-Src\":\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return C});var i,r,o=n(77),a=n.n(o),u=n(3),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(19),g=n(855),m=n(2),v=(n(160),\"https://xiaoce-cache-api-ms.juejin.im/v1\"),y=\"https://xiaoce-storage-api-ms.juejin.im/v1\",I=\"https://xiaoce-timeline-api-ms.juejin.im/v1\",M=\"https://xiaoce-order-api-ms.juejin.im/v1\",b=\"https://xiaoce-discount-storage-api-ms.juejin.im/v1\",E=\"https://xiaoce-distribution-api-ms.juejin.im/v1\",C=(i=Object(m.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler({2:function(e){e.message;return{}}}),this.handleResponseError=t.createResponseErrorHandler(v)}},{key:\"getListByLastTime\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(I+\"/getListByLastTime\").query(s()(this.getAuthDescriptor(t),e)).then(this.resolveResponseData).then(function(e){return e.map(g.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getXiaoceById\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/get\").query(s()(this.getAuthDescriptor(t),{id:e})).then(this.resolveResponseData).then(g.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"getXiaoceSection\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/getSection\").query(s()(this.getAuthDescriptor(t),{sectionId:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getListSection\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/getListSection\").query(s()(this.getAuthDescriptor(t),{id:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"updateReadHistory\",value:function(e){var t=e.metaId,n=e.sectionId,i=e.sign,r=this.authStateService.getAuthInfo();return h.a.get(v+\"/updateReadLog\").query(s()(this.getAuthDescriptor(r),{metaId:t,sectionId:n,sign:i})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"setFreeSection\",value:function(e,t){var n=this.authStateService.getAuthInfo();return h.a.get(y+\"/isFreeSection\").query(s()(this.getAuthDescriptor(n),{sectionId:e,isFree:t})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getXiaoceList\",value:function(e,t){var n={isDraft:e};t&&(n.uid=t);var i=this.authStateService.getAuthInfo();return h.a.get(y+\"/getList\").query(s()(this.getAuthDescriptor(i),n)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getUserBuyList\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/userBuyList\").query(s()(this.getAuthDescriptor(t),e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getListBuy\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/getListBuy\").query(s()(this.getAuthDescriptor(t),e)).then(this.resolveResponseData).then(function(e){return e.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getWechatPayQrCode\",value:function(e){var t=e.metaId,n=e.promotionType,i=e.promotionParams,r=e.adLinkSrc,o=this.authStateService.getAuthInfo();return h.a.get(M+\"/wxpay\").query(s()(this.getAuthDescriptor(o),{metaId:t,promotionType:n,type:\"wxpayNATIVE\",adLinkSrc:r,promotionParams:a()(i)})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"checkBuyBook\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(M+\"/check\").query(s()(this.getAuthDescriptor(t),{metaId:e})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getXiaoceHot\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(I+\"/getHot\").query(s()(this.getAuthDescriptor(e))).then(this.resolveResponseData).then(g.a.fromDescriptor).catch(this.handleResponseError)}},{key:\"setXiaoceHot\",value:function(e){var t=e.id,n=e.isHot,i=this.authStateService.getAuthInfo();return h.a.get(y+\"/isHot\").query(s()(this.getAuthDescriptor(i),{id:t,isHot:n})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"setXiaoceTop\",value:function(e){var t=e.id,n=e.isTop,i=this.authStateService.getAuthInfo();return h.a.get(y+\"/isTop\").query(s()(this.getAuthDescriptor(i),{id:t,isTop:n})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"setXiaoceInfoView\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/viewCountDetail\").query(this.getAuthDescriptor(t)).query({id:e,type:\"detail\"}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"freeDiscount\",value:function(e){var t=e.metaId,n=e.payWay,i=e.promotionType,r=e.promotionParams,o=e.adLinkSrc,u={qrCode:{type:\"wxpayNATIVE\",link:M+\"/wxpay?\"},wechatPay:{type:\"wxpayJSAPI\",link:M+\"/wxpay?\"},aliPay:{type:\"alipayWAP\",link:M+\"/alipay?\"}},c=u[n].type,l=u[n].link,d=this.authStateService.getAuthInfo();return h.a.get(l).query(s()(this.getAuthDescriptor(d),{type:c,metaId:t,promotionType:i,adLinkSrc:o,promotionParams:a()(r)})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"obtainNewUserTicket\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(b+\"/obtainNewUserDiscountTicket\").query(this.getAuthDescriptor(e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getNewUserTicketDetail\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(b+\"/getNewUserDiscountTicketDetail\").query(this.getAuthDescriptor(e)).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getNewuserTicketStatistic\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(b+\"/newUserDiscountTicketStatisticLog\").query(this.getAuthDescriptor(t)).query({type:e}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"checkDiscount\",value:function(e){var t=e.metaId,n=e.code;return h.a.get(b+\"/check\").query({metaId:t,code:n}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"dealtFreeOrder\",value:function(e){var t=e.metaId,n=e.code,i=e.uid,r=e.type,o=this.authStateService.getAuthInfo();return h.a.get(v+\"/viewCountDetail\").query(this.getAuthDescriptor(o)).query({metaId:t,code:n,uid:i,type:r}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"setXiaoceSectionView\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(v+\"/viewCountContent\").query(this.getAuthDescriptor(t)).query(s()(e,{type:\"detail\"})).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getRecommendBooks\",value:function(e){var t=e.category,n=this.authStateService.getAuthInfo();return h.a.get(I+\"/getRecommendBooks\").query(this.getAuthDescriptor(n)).query({category:t}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getSelfDistributorInfo\",value:function(e){var t=e.uid,n=this.authStateService.getAuthInfo();return h.a.get(E+\"/getSelfDistributorInfo\").query(this.getAuthDescriptor(n)).query({distributorUid:t}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getSelfDistributionList\",value:function(e){var t=e.uid,n=e.pageSize,i=e.pageCount,r=this.authStateService.getAuthInfo();return h.a.get(E+\"/getSelfDistributionList\").query(this.getAuthDescriptor(r)).query({pageSize:n,pageCount:i,distributorUid:t}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getXiaoceInviterInfo\",value:function(e){var t=e.distributorUid,n=this.authStateService.getAuthInfo();return h.a.get(E+\"/openDistributionUrl\").query(this.getAuthDescriptor(n)).query({distributorUid:t}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getSourceDiscount\",value:function(e){var t=e.metaId,n=e.adLinkSrc,i=this.authStateService.getAuthInfo();return h.a.get(M+\"/channelLink/getChannelLinkDiscount\").query(this.getAuthDescriptor(i)).query({metaId:t,adLinkSrc:n}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",client_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";function i(e){return\"string\"==typeof e?v.a.fromDescriptor({id:e}):v.a.fromDescriptor(e)}n.d(t,\"a\",function(){return M});var r=n(3),o=n.n(r),a=n(15),u=n.n(a),s=n(0),c=n.n(s),l=n(1),d=n.n(l),f=n(16),h=n.n(f),p=n(17),g=n.n(p),m=n(18),v=(n(112),n(19)),y=n(20),I=n(156),M=function(e){function t(){return c()(this,t),h()(this,(t.__proto__||u()(t)).apply(this,arguments))}return g()(t,e),d()(t,null,[{key:\"fromDescriptor\",value:function(e){return e?o()(new t,{id:e._id},e,{user:i(e.userData)||I.a,createdAt:Object(y.b)(e.createdAt),updatedAt:Object(y.b)(e.updatedAt)}):null}}]),t}(m.a)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return I});var i,r,o=n(3),a=n.n(o),u=n(5),s=n.n(u),c=n(0),l=n.n(c),d=n(1),f=n.n(d),h=n(9),p=n(220),g=n(19),m=n(13),v=n(2),y=\"https://short-msg-ms.juejin.im/v1\",I=(i=Object(v.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){l()(this,e)}return f()(e,[{key:\"_constructor\",value:function(e){var t=(e.page,e.clientHelper);this.resolveResponseData=t.createResponseHandler({2:function(e){var t=e.message;return s.a.reject(Object(m.f)(t))}}),this.handleResponseError=t.createResponseErrorHandler(y)}},{key:\"getTopicList\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/topicList\").query(this.getAuthDescriptor(t)).query({sortType:e.sortType||\"new\",page:e.page||0,pageSize:e.pageSize||100}).then(this.resolveResponseData).then(function(e){return e.list.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getRecommendTopicList\",value:function(){var e=this.authStateService.getAuthInfo();return h.a.get(y+\"/topicList/recommend\").query(this.getAuthDescriptor(e)).then(this.resolveResponseData).then(function(e){return{total:e.total,list:e.list.map(p.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"getFollowedTopicList\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/topicList/followed\").query(this.getAuthDescriptor(t)).query({after:e.after||0,page:e.page||0,pageSize:e.pageSize}).then(this.resolveResponseData).then(function(e){return{total:e.total,list:e.list.map(p.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"searchTopic\",value:function(e){this.authStateService.getAuthInfo();return h.a.get(y+\"/topic/search\").query({name:e,src:\"web\"}).then(this.resolveResponseData).then(function(e){return e.map(p.a.fromDescriptor)}).catch(this.handleResponseError)}},{key:\"getTopicAttenders\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/topic/attenders\").query(this.getAuthDescriptor(t)).query({topicId:e.topicId,page:e.page-1||0,pageSize:e.pageSize,src:\"web\"}).then(this.resolveResponseData).then(function(e){return{total:e.total,list:e.list.map(g.a.fromDescriptor)}}).catch(this.handleResponseError)}},{key:\"getTopicDetail\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.get(y+\"/topic/\"+e).query(this.getAuthDescriptor(t)).then(this.resolveResponseData).then(function(e){return p.a.fromDescriptor(e)}).catch(this.handleResponseError)}},{key:\"followTopic\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/topic/follow\").send(a()(this.getAuthDescriptor(t),{topicIds:e})).type(\"form\").accept(\"json\").then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"unfollowTopic\",value:function(e){var t=this.authStateService.getAuthInfo();return h.a.post(y+\"/topic/unfollow\").send(a()(this.getAuthDescriptor(t),{topicId:e})).type(\"form\").accept(\"json\").then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://theme-event-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"getLastModifyDate\",value:function(e){return c.a.get(d+\"/info\").query({event:e,src:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://pin-guide-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"getPinPlaceholder\",value:function(){return c.a.get(d+\"/getNowPlaceholderGuide\").query({src:\"web\",source:\"web\"}).then(this.resolveResponseData).catch(this.handleResponseError)}}]),e}())||r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),n.d(t,\"default\",function(){return f});var i,r,o=n(0),a=n.n(o),u=n(1),s=n.n(u),c=n(9),l=n(2),d=\"https://pin-stat-ms.juejin.im/v1\",f=(i=Object(l.b)([\"clientHelper\",\"authStateService\"]))(r=function(){function e(){a()(this,e)}return s()(e,[{key:\"_constructor\",value:function(e){var t=e.clientHelper;this.resolveResponseData=t.createResponseHandler(),this.handleResponseError=t.createResponseErrorHandler(d)}},{key:\"getTimelineCount\",value:function(e){var t=this.authStateService.getAuthInfo();return c.a.get(d+\"/timeline/count\").query(this.getAuthDescriptor(t)).query({after:e}).then(this.resolveResponseData).catch(this.handleResponseError)}},{key:\"getAuthDescriptor\",value:function(e){return{uid:e.userId||\"\",device_id:e.clientId||\"\",token:e.token||\"\",src:\"web\"}}}]),e}())||r},function(e,t,n){\"use strict\";var i=n(25),r=n.n(i),o=n(3),a=n.n(o),u=n(86),s=n(861),c=n(862),l=n(863),d=n(865),f=n(868),h=n(869),p=(n.n(h),n(870)),g=n(872),m=n(873),v=n(875),y=n(876),I=n(877),M=n(879),b=n(880),E=n(881),C=n(882),T=n(883),A=n(884),S=n(885);n(31).a||(u.default.use(s.a),u.default.use(l.a),u.default.use(d.a),u.default.mixin(f.a),u.default.directive(\"link\",h.client),u.default.directive(\"parse-url\",p.a),u.default.directive(\"parse-emoji\",g.a),u.default.directive(\"parse-url-emoji\",m.a),u.default.directive(\"copyright\",v.a),u.default.directive(\"outer-click\",y.a)),u.default.prototype.setup||(u.default.use(c.a),a()(u.default.prototype,I,M,b,E,C,T),r()(A.a).forEach(function(e){return u.default.filter(e,A.a[e])}),r()(S.a).forEach(function(e){return u.default.component(e,S.a[e])}),u.default.prototype.setup=!0)},function(e,t,n){\"use strict\";function i(e,t){e.mixin({beforeCreate:function(){var e=this.$options.shareInfo;e&&\"function\"==typeof e&&(this.$options.computed=this.$options.computed||{},this.$options.computed.$shareInfo=e)},created:function(){var e=this;this.$shareInfo&&this.$watch(\"$shareInfo\",function(t){e.$getBean(\"wechatBusiness\").updateShareInfo(t),e.$shareInfoToken=Date.now(),e.$root.$shareInfoToken=e.$shareInfoToken},{immediate:!0})},beforeDestroy:function(){var e=this.$shareInfoToken;e&&this.$root.$shareInfoToken===e&&this.$getBean(\"wechatBusiness\").resetShareInfo()}})}t.a={install:i}},function(e,t,n){\"use strict\";function i(e){e.mixin({beforeCreate:function(){this.$options.computed=this.$options.computed||{},this.$options.computed.$abTestInfo=function(){return this.$store?this.$store.state.abTest.info:{}}}})}t.a={install:i}},function(e,t,n){\"use strict\";function i(e){e.prototype.$stClick=function(e){Object(o.b)(\"click\",e||this.$el,this.$root.$context)},e.prototype.$stShow=function(e){Object(o.b)(\"show\",e||this.$el,this.$root.$context)},e.mixin({mounted:function(){var e=this;this.$root!==this||this._st||(this._st={removeClickListener:Object(a.e)(window,\"click\",function(t){Object(o.b)(\"click\",t.target,e.$context)},!0)})},beforeDestroy:function(){this.$root===this&&this._st&&(this._st.removeClickListener(),this._st=null)}})}function r(){window.$stInfo=function(e){return e?{label:Object(o.a)(e)}:\"Please select a node in [Elements] tab.\"}}var o=n(864),a=n(30);t.a={install:function(e,t){i(e),r()}}},function(e,t,n){\"use strict\";function i(e,t,n){var i=a(t);if(u(i)){var r=o(i);n.getBean(\"gaBusiness\").exec(\"send\",\"event\",\"generalElementEvent\",e,r)}}function r(e){return u(a(e))?o(a(e)):\"Event wouldn't be sent.\"}function o(e){return[s(),c(e),l(e),d(e)].map(f).join(\" \")}function a(e){for(var t=[];e&&1===e.nodeType;)t.unshift({block:e.getAttribute(\"st:block\"),name:e.getAttribute(\"st:name\"),state:e.getAttribute(\"st:state\"),silent:e.hasAttribute(\"st:silent\")}),e=e.parentNode;return t}function u(e){if(e.some(function(e){return e.silent}))return!1;for(var t=e.length-1;t>=0;t--){var n=e[t],i=n.block,r=n.name;if(i)return!1;if(r)return!0}}function s(){var e=window.location,t=e.href,n=e.origin;return t.slice(n.length).split(\"#\")[0]}function c(e){return e.filter(function(e){return e.block}).map(function(e){return e.block+(e.state?\":\"+e.state:\"\")}).join(\"/\")}function l(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=n.block,r=n.name;if(i)return null;if(r)return r}}function d(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=n.block,r=n.name,o=n.state;if(i)return null;if(r||o)return o}}function f(e){return e?e.replace(/ /g,\"_\"):\"-\"}t.b=i,t.a=r},function(e,t,n){\"use strict\";function i(e){e.prototype.$lazy=new r.a}var r=n(866);t.a={install:i}},function(e,t,n){\"use strict\";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(e.top>t.height+n||e.bottomt.width+n||e.right0&&void 0!==arguments[0]?arguments[0]:\"register\",t=this.$store.getters.LOGINED;if(!t)switch(e){case\"login\":this.$requestLogin();break;case\"quickLogin\":this.$requestQuickLogin();break;default:this.$requestRegister()}return t?d.a.resolve():d.a.reject(new Error(\"Unauthorized\"))}function r(){var e=this.$getBean(\"eventBus\");e.emit(e.eventType.REQUEST_LOGIN)}function o(e){var t=this.$getBean(\"eventBus\");t.emit(t.eventType.REQUEST_QUICK_LOGIN,e)}function a(){var e=this.$getBean(\"eventBus\");e.emit(e.eventType.REQUEST_REGISTER)}function u(){var e=this.$getBean(\"eventBus\");e.emit(e.eventType.REQUEST_LOGOUT)}function s(){var e=this.$store.getters.USER||{};if(\"admin\"!==e.role){for(var t=arguments.length,n=Array(t),i=0;i-1){var n=this.$getBean(\"eventBus\");n.emit(n.eventType.ARTICLE_COMMENT_BARRAGE,r[t]);break}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.$barrage=i;var r={233:\"233\",666:\"666\",\"牛\":\"up\",\"赞\":\"up\"}},function(e,t,n){\"use strict\";function i(){for(var e=this.$root.$context,t=arguments.length,n=Array(t),i=0;i1&&void 0!==arguments[1]?arguments[1]:999;return e>t?t+\"+\":e}}},function(e,t,n){\"use strict\";t.a={\"view-container\":n(886),\"app-link\":n(899),\"structured-article\":n(902),\"structured-user\":n(905)}},function(e,t,n){function i(e){n(887)}var r=n(8)(n(888),n(898),i,\"data-v-3f216172\",null);e.exports=r.exports},function(e,t){},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(30),r=n(889),o=n.n(r);t.default={components:{MainHeader:o.a},props:{header:{type:Boolean,default:!0},searchQuery:{type:String,default:\"\"},size:{type:String,default:\"\"},headerVisibility:{type:String,default:\"auto\"},withViewNav:{type:Boolean,default:!1},tight:{type:Boolean,default:!1}},data:function(){return{isHeaderVisible:!0}},computed:{containerStyle:function(){return{maxWidth:\"full\"===this.size?\"100%\":\"\"}}},watch:{isHeaderVisible:function(e){this.$emit(\"headerVisibilityChanged\",e)},headerVisibility:{handler:function(e){this.isHeaderVisible=\"invisible\"!==e},immediate:!0}},mounted:function(){var e=this;this.removeScrollDirectionChangeEventListener=Object(i.i)(window,function(t,n){e.direction=t},50),this.removeScrollEventListener=Object(i.g)(window,function(){if(\"auto\"===e.headerVisibility){var t=window.pageYOffset-1}},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"/notification\",expression:\"'/notification'\",modifiers:{blank:!0}}],staticClass:\"app-link\",on:{click:e.resetUnreadNotificationCount}},[i(\"i\",{staticClass:\"icon ion-android-notifications\"}),e.unreadNotificationCount.total?i(\"span\",{staticClass:\"count\"},[e._v(e._s(e._f(\"truncate\")(e.unreadNotificationCount.total)))]):e._e()])]):e._e(),e.user?i(\"li\",{staticClass:\"nav-item menu\",on:{click:function(t){t.stopPropagation(),e.onUserActionClick(t)}}},[i(\"avatar\",{staticClass:\"avatar\",attrs:{user:e.user,immediate:!0,decorative:!0}}),i(\"ul\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShowUserDropdownList,expression:\"isShowUserDropdownList\"}],staticClass:\"nav-menu user-dropdown-list\"},[i(\"div\",{staticClass:\"nav-menu-item-group\"},[i(\"li\",{staticClass:\"nav-menu-item\",on:{click:e.openEditorPage}},[e._m(1)]),e.user.isXiaoceAuthor?i(\"li\",{staticClass:\"nav-menu-item\",on:{click:e.openXiaoceEditorPage}},[e._m(2)]):e._e(),i(\"li\",{staticClass:\"nav-menu-item\",on:{click:e.openDraftIndexPage}},[e._m(3)])]),i(\"div\",{staticClass:\"nav-menu-item-group\"},[i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:e.$userRoute(e.user)}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-person\"}),i(\"span\",[e._v(\"我的主页\")])])]),i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:e.$userRoute(e.user,\"likes\")}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-like\"}),i(\"span\",[e._v(\"我喜欢的\")])])]),e.user.isXiaoceAuthor?i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:e.$userRoute(e.user,\"books\",{type:\"bought\"})}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-xiaoce\"}),i(\"span\",[e._v(\"我的小册\")])])]):e._e(),i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:e.$userRoute(e.user,\"collections\")}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-collection\"}),i(\"span\",[e._v(\"我的收藏集\")])])]),i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:e.$userRoute(e.user,\"books\",{type:\"bought\"})}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-bought\"}),i(\"span\",[e._v(\"已购\")])])]),e.hasWallet?i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:\"/user/wallet\"}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-wallet\"}),i(\"span\",[e._v(\"我的钱包\")])])]):e._e(),i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:\"/subscribe\"}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-tag\"}),i(\"span\",[e._v(\"标签管理\")])])])],1),i(\"div\",{staticClass:\"nav-menu-item-group\"},[e.user?i(\"router-link\",{staticClass:\"nav-menu-item\",attrs:{tag:\"li\",to:\"/user/settings\"}},[i(\"a\",[i(\"i\",{staticClass:\"fengwei fw-setting\"}),i(\"span\",[e._v(\"设置\")])])]):e._e(),i(\"li\",{staticClass:\"nav-menu-item more\"},[e._m(4),i(\"ul\",{staticClass:\"nav-menu more-dropdown-list\"},[i(\"div\",{staticClass:\"nav-menu-item-group\"},[i(\"li\",{staticClass:\"nav-menu-item\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"/app\",expression:\"'/app'\",modifiers:{blank:!0}}]},[e._v(\"下载应用\")])]),i(\"li\",{staticClass:\"nav-menu-item\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"/about\",expression:\"'/about'\",modifiers:{blank:!0}}]},[e._v(\"关于\")])]),i(\"li\",{staticClass:\"nav-menu-item\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:\"https://xitu.io/jobs\",expression:\"'https://xitu.io/jobs'\",modifiers:{blank:!0}}]},[e._v(\"加入我们\")])]),i(\"li\",{staticClass:\"nav-menu-item\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.external.blank\",value:\"https://github.com/xitu/gold-miner\",expression:\"'https://github.com/xitu/gold-miner'\",modifiers:{external:!0,blank:!0}}]},[e._v(\"翻译计划\")])]),i(\"li\",{staticClass:\"nav-menu-item\"},[i(\"a\",{directives:[{name:\"link\",rawName:\"v-link.blank\",value:e.bdPageUrlForNav,expression:\"bdPageUrlForNav\",modifiers:{blank:!0}}]},[e._v(\"合作伙伴\")])])])])])],1),e.user?i(\"div\",{staticClass:\"nav-menu-item-group\"},[i(\"li\",{staticClass:\"nav-menu-item\",on:{click:e.logout}},[e._m(5)])]):e._e()])],1):e._e(),e.user?e._e():i(\"li\",{staticClass:\"nav-item submit\",on:{click:function(t){t.stopPropagation(),e.isShowSubmitPanel=!0}}},[i(\"img\",{staticClass:\"icon\",attrs:{src:n(896)}}),i(\"span\",[e._v(\"写文章\")]),e.isShowSubmitPanel?i(\"div\",{staticClass:\"submit-panel\"},[i(\"div\",{staticClass:\"title\"},[e._v(\"来掘金写文章，您将有机会\")]),e._m(6),i(\"button\",{on:{click:e.register}},[e._v(\"开始写文章\")])]):e._e()]),e.user?e._e():i(\"li\",{staticClass:\"nav-item auth\"},[i(\"span\",{staticClass:\"login\",on:{click:e.login}},[e._v(\"登录\")]),i(\"span\",{staticClass:\"register\",on:{click:e.register}},[e._v(\"注册\")])])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"a\",{staticClass:\"logo\",attrs:{href:\"/\"}},[i(\"img\",{staticClass:\"logo-img\",attrs:{src:n(897),alt:\"掘金\"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a\",[n(\"i\",{staticClass:\"fengwei fw-write\"}),n(\"span\",[e._v(\"写文章\")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a\",[n(\"i\",{staticClass:\"fengwei fw-xiaocepost\"}),n(\"span\",[e._v(\"写小册\")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a\",[n(\"i\",{staticClass:\"fengwei fw-draft\"}),n(\"span\",[e._v(\"草稿\")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a\",[n(\"i\",{staticClass:\"fengwei fw-info\"}),n(\"span\",[e._v(\"关于\")]),n(\"i\",{staticClass:\"ion-chevron-right more-icon\"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a\",[n(\"i\",{staticClass:\"fengwei fw-logout\"}),n(\"span\",[e._v(\"登出\")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ul\",{staticClass:\"benefit-list\"},[n(\"li\",{staticClass:\"item\"},[e._v(\"与超过 300 万开发者分享您的经验和观点\")]),n(\"li\",{staticClass:\"item\"},[e._v(\"被编辑推荐，获得更多曝光和关注\")]),n(\"li\",{staticClass:\"item\"},[e._v(\"加入专栏作者群，结识众多优秀开发者\")])])}]}},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MS4yICgzNTM5NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Qjk3RUIxMEEtOEYzNC00QUI1LUFCQUYtNDFEOTMzNzQxRUQwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSLpppbpobUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlr7zoiKrmoI/mkJzntKLmoYYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05OTAuMDAwMDAwLCAtMTkuMDAwMDAwKSIgZmlsbD0iI0MzQ0NENSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTkwLjAwMDAwMCwgMTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuOTg2MTI2LDE0LjQwMDMzOTUgTDE2LjI5Mjg5MzIsMTcuNzA3MTA2OCBDMTYuNjgzNDE3NSwxOC4wOTc2MzExIDE3LjMxNjU4MjUsMTguMDk3NjMxMSAxNy43MDcxMDY4LDE3LjcwNzEwNjggQzE4LjA5NzYzMTEsMTcuMzE2NTgyNSAxOC4wOTc2MzExLDE2LjY4MzQxNzUgMTcuNzA3MTA2OCwxNi4yOTI4OTMyIEwxNC40MDAzMzk1LDEyLjk4NjEyNiBDMTUuOTYwMzg4MSwxMC43NTczMjk4IDE1Ljc0NTI0MDIsNy42NjQwMTk4MyAxMy43NTQ4OTU5LDUuNjczNjc1NTQgQzExLjUyMzMyODUsMy40NDIxMDgxNSA3LjkwNTI0MjkyLDMuNDQyMTA4MTUgNS42NzM2NzU1NCw1LjY3MzY3NTU0IEMzLjQ0MjEwODE1LDcuOTA1MjQyOTIgMy40NDIxMDgxNSwxMS41MjMzMjg1IDUuNjczNjc1NTQsMTMuNzU0ODk1OSBDNy42NjQwMTk4MywxNS43NDUyNDAyIDEwLjc1NzMyOTgsMTUuOTYwMzg4MSAxMi45ODYxMjYsMTQuNDAwMzM5NSBaIE03LjA4Nzg4OTEsMTIuMzQwNjgyMyBDNS42MzczNzAzLDEwLjg5MDE2MzUgNS42MzczNzAzLDguNTM4NDA3OSA3LjA4Nzg4OTEsNy4wODc4ODkxIEM4LjUzODQwNzksNS42MzczNzAzIDEwLjg5MDE2MzUsNS42MzczNzAzIDEyLjM0MDY4MjMsNy4wODc4ODkxIEMxMy43OTEyMDExLDguNTM4NDA3OSAxMy43OTEyMDExLDEwLjg5MDE2MzUgMTIuMzQwNjgyMywxMi4zNDA2ODIzIEMxMC44OTAxNjM1LDEzLjc5MTIwMTEgOC41Mzg0MDc5LDEzLjc5MTIwMTEgNy4wODc4ODkxLDEyLjM0MDY4MjMgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MS4yICgzNTM5NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Qjk3RUIxMEEtOEYzNC00QUI1LUFCQUYtNDFEOTMzNzQxRUQwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSLpppbpobUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlr7zoiKrmoI/mkJzntKLmoYYt5r+A5rS7IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTkwLjAwMDAwMCwgLTE5LjAwMDAwMCkiIGZpbGw9IiMwMDdmZmYiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk5MC4wMDAwMDAsIDE5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjk4NjEyNiwxNC40MDAzMzk1IEwxNi4yOTI4OTMyLDE3LjcwNzEwNjggQzE2LjY4MzQxNzUsMTguMDk3NjMxMSAxNy4zMTY1ODI1LDE4LjA5NzYzMTEgMTcuNzA3MTA2OCwxNy43MDcxMDY4IEMxOC4wOTc2MzExLDE3LjMxNjU4MjUgMTguMDk3NjMxMSwxNi42ODM0MTc1IDE3LjcwNzEwNjgsMTYuMjkyODkzMiBMMTQuNDAwMzM5NSwxMi45ODYxMjYgQzE1Ljk2MDM4ODEsMTAuNzU3MzI5OCAxNS43NDUyNDAyLDcuNjY0MDE5ODMgMTMuNzU0ODk1OSw1LjY3MzY3NTU0IEMxMS41MjMzMjg1LDMuNDQyMTA4MTUgNy45MDUyNDI5MiwzLjQ0MjEwODE1IDUuNjczNjc1NTQsNS42NzM2NzU1NCBDMy40NDIxMDgxNSw3LjkwNTI0MjkyIDMuNDQyMTA4MTUsMTEuNTIzMzI4NSA1LjY3MzY3NTU0LDEzLjc1NDg5NTkgQzcuNjY0MDE5ODMsMTUuNzQ1MjQwMiAxMC43NTczMjk4LDE1Ljk2MDM4ODEgMTIuOTg2MTI2LDE0LjQwMDMzOTUgWiBNNy4wODc4ODkxLDEyLjM0MDY4MjMgQzUuNjM3MzcwMywxMC44OTAxNjM1IDUuNjM3MzcwMyw4LjUzODQwNzkgNy4wODc4ODkxLDcuMDg3ODg5MSBDOC41Mzg0MDc5LDUuNjM3MzcwMyAxMC44OTAxNjM1LDUuNjM3MzcwMyAxMi4zNDA2ODIzLDcuMDg3ODg5MSBDMTMuNzkxMjAxMSw4LjUzODQwNzkgMTMuNzkxMjAxMSwxMC44OTAxNjM1IDEyLjM0MDY4MjMsMTIuMzQwNjgyMyBDMTAuODkwMTYzNSwxMy43OTEyMDExIDguNTM4NDA3OSwxMy43OTEyMDExIDcuMDg3ODg5MSwxMi4zNDA2ODIzIFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\"},function(e,t){e.exports=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPjA1Q0I0NzU5LUIyRkQtNDcxOC04RTBDLTg0OEVCNzQ2RDAyMzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggc2tldGNodG9vbC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIyMzgiIHk9IjEyOCIgd2lkdGg9IjcwMCIgaGVpZ2h0PSI1MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4wNTAyNzE3MzkxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8cmVjdCBpZD0icGF0aC0zIiB4PSI0IiB5PSI0IiB3aWR0aD0iMTMiIGhlaWdodD0iMTQiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stNCIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxMyIgaGVpZ2h0PSIxNCIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTMiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSLpppbpobUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLpppbpobUyX0NvX+aZrumAmueUqOaItyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwNS4wMDAwMDAsIC0xNDIuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJDb21iaW5lZC1TaGFwZSI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzA1LjAwMDAwMCwgMTQyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0zIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05Ljg5NTY2MjY1LDkuMzQ2Mjc4MzIgTDYuNjY3NTA3MzEsOS4zNDYyNzgzMiBDNi4zNzA1MDcxNyw5LjM0NjI3ODMyIDYuMTI5NDQ5ODQsOS4xMDI3MDQ4MiA2LjEyOTQ0OTg0LDguODAyNTc4MzYgQzYuMTI5NDQ5ODQsOC41MDI0NzMxNyA2LjM3MDUwNzE3LDguMjU4ODk5NjggNi42Njc1MDczMSw4LjI1ODg5OTY4IEw5Ljg5NTY4MzcxLDguMjU4ODk5NjggQzEwLjE5MjYyMDcsOC4yNTg4OTk2OCAxMC40MzM2NTcsOC41MDI0NzMxNyAxMC40MzM2NTcsOC44MDI1NzgzNiBDMTAuNDMzNjM1OSw5LjEwMjcwNDgyIDEwLjE5MjU5OTYsOS4zNDYyNzgzMiA5Ljg5NTY2MjY1LDkuMzQ2Mjc4MzIgTTEzLjExMzIzNzEsMTIuNjA4NDE0MiBMNi42NjY2OTgyLDEyLjYwODQxNDIgQzYuMzcwMTQ0NjcsMTIuNjA4NDE0MiA2LjEyOTQ0OTg0LDEyLjM2NTQwNTcgNi4xMjk0NDk4NCwxMi4wNjQ3NTY4IEM2LjEyOTQ0OTg0LDExLjc2NDAyMjkgNi4zNzAxNDQ2NywxMS41MjEwMzU2IDYuNjY2Njk4MiwxMS41MjEwMzU2IEwxMy4xMTMyMzcxLDExLjUyMTAzNTYgQzEzLjQxMDI3NDEsMTEuNTIxMDM1NiAxMy42NTA0ODU0LDExLjc2NDAyMjkgMTMuNjUwNDg1NCwxMi4wNjQ3NTY4IEMxMy42NTA0ODU0LDEyLjM2NTM4NDQgMTMuNDEwMjc0MSwxMi42MDg0MTQyIDEzLjExMzIzNzEsMTIuNjA4NDE0MiIgaWQ9Imljb25mb250LWJpYW5qaSIgZmlsbD0iIzAwN0ZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHVzZSBpZD0iUmVjdGFuZ2xlIiBzdHJva2U9IiMwMDdGRkYiIG1hc2s9InVybCgjbWFzay00KSIgc3Ryb2tlLXdpZHRoPSIyIiB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+\"},function(e,t,n){e.exports=n.p+\"static/img/logo.a7995ad.svg\"},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"view-container\"},[e.header?n(\"div\",{staticClass:\"main-header-box\"},[n(\"main-header\",{staticClass:\"main-header\",class:{visible:e.isHeaderVisible},attrs:{searchQuery:e.searchQuery}})],1):e._e(),e._t(\"banner\"),n(\"main\",{staticClass:\"container main-container\",class:{\"with-view-nav\":e.withViewNav,tight:e.tight||!e.header},style:e.containerStyle},[e._t(\"default\")],2)],2)},staticRenderFns:[]}},function(e,t,n){var i=n(8)(n(900),n(901),null,null,null);e.exports=i.exports},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={props:[\"to\",\"blank\",\"external\"],computed:{href:function(){return this.to?this.$router.resolve(this.to).href:\"javascript:void(0)\"}},methods:{onTouchStart:function(){this.shouldOpen=!0},onTouchMove:function(){this.shouldOpen=!1},onTouchEnd:function(){this.shouldOpen&&this.open()},open:function(){this.href&&(this.blank?window.open(this.href,\"_blank\"):window.location.href=this.href)}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"a\",{attrs:{href:e.href,target:e.blank?\"_blank\":\"\",rel:e.external?\"nofollow noopener noreferrer\":\"\"}},[e._t(\"default\")],2)},staticRenderFns:[]}},function(e,t,n){var i=n(8)(n(903),n(904),null,null,null);e.exports=i.exports},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.default={props:[\"entry\",\"url\",\"title\",\"image\",\"keywordList\",\"author\",\"createdAt\"],computed:{target:function(){return this.entry||{}},isPost:function(){return\"post\"===this.target.type},mdUrl:function(){return this.url||(this.isPost?this.target.originalUrl:\"https://juejin.im/entry/\"+this.target.id)},mdHeadline:function(){return this.title||this.target.title},mdKeywords:function(){return this.keywordList?this.keywordList.join(\",\"):(this.target.tags||[]).map(function(e){return e.title}).join(\",\")},mdAuthor:function(){var e=this.author||this.target.user;return e&&{name:e.username,url:\"https://juejin.im/user/\"+e.id}},mdDatePublished:function(){return this.createdAt||this.target.createdAt},mdImage:function(){return this.image||this.target.screenshot||\"https://b-gold-cdn.xitu.io/icon/icon-128.png\"}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"article\",{attrs:{itemscope:\"itemscope\",itemtype:\"http://schema.org/Article\"}},[e.mdUrl?n(\"meta\",{attrs:{itemprop:\"url\",content:e.mdUrl}}):e._e(),e.mdHeadline?n(\"meta\",{attrs:{itemprop:\"headline\",content:e.mdHeadline}}):e._e(),e.mdKeywords?n(\"meta\",{attrs:{itemprop:\"keywords\",content:e.mdKeywords}}):e._e(),e.mdDatePublished?n(\"meta\",{attrs:{itemprop:\"datePublished\",content:e._f(\"iso\")(e.mdDatePublished)}}):e._e(),e.mdImage?n(\"meta\",{attrs:{itemprop:\"image\",content:e.mdImage}}):e._e(),e.mdAuthor?n(\"div\",{attrs:{itemprop:\"author\",itemscope:\"itemscope\",itemtype:\"http://schema.org/Person\"}},[n(\"meta\",{attrs:{itemprop:\"name\",content:e.mdAuthor.name}}),n(\"meta\",{attrs:{itemprop:\"url\",content:e.mdAuthor.url}})]):e._e(),e._m(0),e._t(\"default\")],2)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{attrs:{itemprop:\"publisher\",itemscope:\"itemscope\",itemtype:\"http://schema.org/Organization\"}},[n(\"meta\",{attrs:{itemprop:\"name\",content:\"掘金\"}}),n(\"div\",{attrs:{itemprop:\"logo\",itemscope:\"itemscope\",itemtype:\"https://schema.org/ImageObject\"}},[n(\"meta\",{attrs:{itemprop:\"url\",content:\"https://b-gold-cdn.xitu.io/icon/icon-white-180.png\"}}),n(\"meta\",{attrs:{itemprop:\"width\",content:\"180\"}}),n(\"meta\",{attrs:{itemprop:\"height\",content:\"180\"}})])])}]}},function(e,t,n){var i=n(8)(n(906),n(907),null,null,null);e.exports=i.exports},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={props:[\"user\"],computed:{target:function(){return this.user||{}},mdUrl:function(){return\"https://juejin.im/user/\"+this.target.id},mdImage:function(){return this.target.avatar},mdName:function(){return this.target.username},mdJobTitle:function(){return this.target.jobTitle},mdMemberOf:function(){return this.target.company}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{attrs:{itemscope:\"itemscope\",itemtype:\"http://schema.org/Person\"}},[e.target.id?[e.mdUrl?n(\"meta\",{attrs:{itemprop:\"url\",content:e.mdUrl}}):e._e(),e.mdImage?n(\"meta\",{attrs:{itemprop:\"image\",content:e.mdImage}}):e._e(),e.mdName?n(\"meta\",{attrs:{itemprop:\"name\",content:e.mdName}}):e._e(),e.mdJobTitle?n(\"meta\",{attrs:{itemprop:\"jobTitle\",content:e.mdJobTitle}}):e._e(),e.mdMemberOf?n(\"div\",{attrs:{itemprop:\"memberOf\",itemscope:\"itemscope\",itemtype:\"http://schema.org/Organization\"}},[n(\"meta\",{attrs:{itemprop:\"name\",content:e.mdMemberOf}})]):e._e()]:e._e(),e._t(\"default\")],2)},staticRenderFns:[]}}],[237]);","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/analytics","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/analytics/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/analytics/","excerpt":"","text":"(function(){var $c=function(a){this.w=a||[]};$c.prototype.set=function(a){this.w[a]=!0};$c.prototype.encode=function(){for(var a=[],b=0;b\\x3c/script>')):(c=M.createElement(\"script\"), c.type=\"text/javascript\",c.async=!0,c.src=a,b&&(c.id=b),a=M.getElementsByTagName(\"script\")[0],a.parentNode.insertBefore(c,a)))},be=function(a,b){return E(M.location[b?\"href\":\"search\"],a)},E=function(a,b){return(a=a.match(\"(?:&|#|\\\\?)\"+K(b).replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")+\"=([^&#]*)\"))&&2==a.length?a[1]:\"\"},xa=function(){var a=\"\"+M.location.hostname;return 0==a.indexOf(\"www.\")?a.substring(4):a},de=function(a,b){var c=a.indexOf(b);if(5==c||6==c)if(a=a.charAt(c+b.length),\"/\"==a||\"?\"==a|| \"\"==a||\":\"==a)return!0;return!1},ya=function(a,b){var c=M.referrer;if(/^(https?|android-app):\\/\\//i.test(c)){if(a)return c;a=\"//\"+M.location.hostname;if(!de(c,a))return b&&(b=a.replace(/\\./g,\"-\")+\".cdn.ampproject.org\",de(c,b))?void 0:c}},za=function(a,b){if(1==b.length&&null!=b[0]&&\"object\"===typeof b[0])return b[0];for(var c={},d=Math.min(a.length+1,b.length),e=0;e=b.length)x(a,b,c)||wd(a,b,c)||wc(a,b,c);else throw ge(\"len\",b.length),new Da(b.length);},pe=function(a,b,c,d){d=d||ua;wd(a+\"?\"+b,\"\",d,c)},wc=function(a,b,c){var d=ta(a+\"?\"+b);d.onload=d.onerror=function(){d.onload=null;d.onerror=null;c()}},wd=function(a,b,c,d){var e=O.XMLHttpRequest; if(!e)return!1;var g=new e;if(!(\"withCredentials\"in g))return!1;a=a.replace(/^http:/,\"https:\");g.open(\"POST\",a,!0);g.withCredentials=!0;g.setRequestHeader(\"Content-Type\",\"text/plain\");g.onreadystatechange=function(){if(4==g.readyState){if(d)try{var a=g.responseText;if(1>a.length)ge(\"xhr\",\"ver\",\"0\"),c();else if(\"1\"!=a.charAt(0))ge(\"xhr\",\"ver\",String(a.length)),c();else if(3=100*R(a,Ka))throw\"abort\";}function Ma(a){if(G(P(a,Na)))throw\"abort\";}function Oa(){var a=M.location.protocol;if(\"http:\"!=a&&\"https:\"!=a)throw\"abort\";} function Pa(a){try{O.navigator.sendBeacon?J(42):O.XMLHttpRequest&&\"withCredentials\"in new O.XMLHttpRequest&&J(40)}catch(c){}a.set(ld,Td(a),!0);a.set(Ac,R(a,Ac)+1);var b=[];Qa.map(function(c,d){d.F&&(c=a.get(c),void 0!=c&&c!=d.defaultValue&&(\"boolean\"==typeof c&&(c*=1),b.push(d.F+\"=\"+K(\"\"+c))))});b.push(\"z=\"+Bd());a.set(Ra,b.join(\"&\"),!0)} function Sa(a){var b=P(a,gd)||oe()+\"/collect\",c=a.get(qe),d=P(a,fa);!d&&a.get(Vd)&&(d=\"beacon\");if(c)pe(b,P(a,Ra),c,a.get(Ia));else if(d){c=d;d=P(a,Ra);var e=a.get(Ia);e=e||ua;\"image\"==c?wc(b,d,e):\"xhr\"==c&&wd(b,d,e)||\"beacon\"==c&&x(b,d,e)||ba(b,d,e)}else ba(b,P(a,Ra),a.get(Ia));b=a.get(Na);b=h(b);c=b.hitcount;b.hitcount=c?c+1:1;b=a.get(Na);delete h(b).pending_experiments;a.set(Ia,ua,!0)} function Hc(a){(O.gaData=O.gaData||{}).expId&&a.set(Nc,(O.gaData=O.gaData||{}).expId);(O.gaData=O.gaData||{}).expVar&&a.set(Oc,(O.gaData=O.gaData||{}).expVar);var b=a.get(Na);if(b=h(b).pending_experiments){var c=[];for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(encodeURIComponent(d)+\".\"+encodeURIComponent(b[d]));var d=c.join(\"!\")}else d=void 0;d&&a.set(m,d,!0)}function cd(){if(O.navigator&&\"preview\"==O.navigator.loadPurpose)throw\"abort\";} function yd(a){var b=O.gaDevIds;ka(b)&&0!=b.length&&a.set(\"&did\",b.join(\",\"),!0)}function vb(a){if(!a.get(Na))throw\"abort\";};var hd=function(){return Math.round(2147483647*Math.random())},Bd=function(){try{var a=new Uint32Array(1);O.crypto.getRandomValues(a);return a[0]&2147483647}catch(b){return hd()}};function Ta(a){var b=R(a,Ua);500=c)throw\"abort\";a.set(Wa,--c)}a.set(Ua,++b)};var Ya=function(){this.data=new ee},Qa=new ee,Za=[];Ya.prototype.get=function(a){var b=$a(a),c=this.data.get(a);b&&void 0==c&&(c=ea(b.defaultValue)?b.defaultValue():b.defaultValue);return b&&b.Z?b.Z(this,a,c):c};var P=function(a,b){a=a.get(b);return void 0==a?\"\":\"\"+a},R=function(a,b){a=a.get(b);return void 0==a||\"\"===a?0:1*a};Ya.prototype.set=function(a,b,c){if(a)if(\"object\"==typeof a)for(var d in a)a.hasOwnProperty(d)&&ab(this,d,a[d],c);else ab(this,a,b,c)}; var ab=function(a,b,c,d){if(void 0!=c)switch(b){case Na:wb.test(c)}var e=$a(b);e&&e.o?e.o(a,b,c,d):a.data.set(b,c,d)},bb=function(a,b,c,d,e){this.name=a;this.F=b;this.Z=d;this.o=e;this.defaultValue=c},$a=function(a){var b=Qa.get(a);if(!b)for(var c=0;c","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/manifest.89e0ef0512480dff482d","date":"2018-08-02T17:28:43.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/manifest.89e0ef0512480dff482d/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/manifest.89e0ef0512480dff482d/","excerpt":"","text":"!function(e){function a(f){if(c[f])return c[f].exports;var d=c[f]={i:f,l:!1,exports:{}};return e[f].call(d.exports,d,d.exports,a),d.l=!0,d.exports}var f=window.webpackJsonp;window.webpackJsonp=function(c,n,t){for(var r,b,o,i=0,u=[];i","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/hm","date":"2018-08-02T17:28:42.000Z","updated":"2018-08-02T17:28:43.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/hm/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/hm/","excerpt":"","text":"(function(){var h={},mt={},c={id:\"93bbd335a208870aa1f296bcd6842e5e\",dm:[\"juejin.im\"],js:\"tongji.baidu.com/hm-web/js/\",etrk:[],icon:'',ctrk:false,align:-1,nv:-1,vdur:1800000,age:31536000000,rec:0,rp:[],trust:0,vcard:0,qiao:0,lxb:0,kbtrk:0,conv:0,med:0,cvcc:'',cvcf:[],apps:''};var q=void 0,r=!0,t=null,u=!1;mt.cookie={};mt.cookie.set=function(a,b,d){var f;d.I&&(f=new Date,f.setTime(f.getTime()+d.I));document.cookie=a+\"=\"+b+(d.domain?\"; domain=\"+d.domain:\"\")+(d.path?\"; path=\"+d.path:\"\")+(f?\"; expires=\"+f.toGMTString():\"\")+(d.ib?\"; secure\":\"\")};mt.cookie.get=function(a){return(a=RegExp(\"(^| )\"+a+\"=([^;]*)(;|$)\").exec(document.cookie))?a[2]:t};mt.h={};mt.h.oa=function(a){return document.getElementById(a)}; mt.h.K=function(a,b){var d=[],f=[];if(!a)return f;for(;a.parentNode!=t;){for(var g=0,n=0,l=a.parentNode.childNodes.length,p=0;p","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.1cf647abe1f10e0260703f35041ea2f0","date":"2018-08-02T17:28:42.000Z","updated":"2018-08-02T17:28:42.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.1cf647abe1f10e0260703f35041ea2f0/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/app.1cf647abe1f10e0260703f35041ea2f0/","excerpt":"","text":"html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.iconfont{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection:before{content:\"\\E600\"}.icon-xlchatbox:before{content:\"\\E601\"}.article-content{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px}.article-content h1{margin:1.3rem 0;line-height:1.2}.article-content p{line-height:2.27rem}.article-content hr{border-top:1px solid #ddd;border-bottom:none;border-left:none;border-right:none;margin-top:2.7rem;margin-bottom:2.7rem}.article-content embed,.article-content iframe,.article-content img:not(.equation),.article-content video{max-width:100%;margin:0}.article-content img.lazyload{visibility:hidden}.article-content img.inited{background-color:#f8f9fa;background-position:50%;background-repeat:no-repeat;visibility:visible}.article-content img.loaded{background-image:none;background-color:transparent}.article-content img.error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjOWI2MDE2OC04MTZhLWJmNDctOTJiYi1lYWMyNGFiYmUzM2EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkQ0M0FGMzRDREIyMTFFNzk1NjhBQ0I2MTA2NUJEODAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkQ0M0FGMzNDREIyMTFFNzk1NjhBQ0I2MTA2NUJEODAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzExRjNBODVDRDlEMTFFN0FCNkRDRTdCQ0Y2MTY0N0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzExRjNBODZDRDlEMTFFN0FCNkRDRTdCQ0Y2MTY0N0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6UJKtsAAAFJUlEQVR42uyXS2hcZRTH78zcmUkmmUcymUwybbStiYKICuJCEQviphSiK0FoS0RRQ7uoSEvBRSuK2oDaTcnCTbG60IXgwk0W2pXuFGqFotaW0iSTZKbzyLwyM0n8/a/fF4Y6aV3ZhX7w58z9HufxP+c7945vc3PTuRvD79yl8d8z7M7Pzzvr6+vOxsaGc2u+fT6fRQhE/X5/H8iwVGTvZe0PBAKO67revlarFWg2myHm61rrVj/aF41GHXdubk5GdzI3jtIhkEJZGkiOgFEQYz4uycEKmLKGmZe+AHPPEsAHGO9BFkEWLKF7pd1uL7E3x3Mex65OTEz87sZisWOJROJNGZMieWSGvF410d1EXkcWkJ+AC51RMB9H7AsGg4u9vb1xdAzi0C5kjLWIjV5ONhqNOjZfcQn7ZQ6lSqXSTH9///dsKPK8LMOgAWpGNm+TMp05aqgMInowECTCYCgUElvDYHB1dfUR0vJ2JBJ5xmXiEnQMYPAMclFebZdrE103wxvKtWqlWq22CoVCi7kMDNzD3I8E95vqYGVl5YeRkZFjSoOLoj9Quh8vRsjFohQIlhqBvHnQYZQ5ljoVpHWoWCw6ROSsra05MHdgaGjoDHqiPP+ay+VeJLeXOKu6iSn3MnyNw2FkWkpsdcuAfufzeU+ZnsvlsgN1W5WMox46WQqHwxmMnmVOBhxy/tDg4ODpbDa7n3NJY2NZhm+IKjDUyV29Xnfw1Iu0p6fHi0zKyZ3nhEY6nfb2KVLLAg7pZsTktJcDJHP3GfZSZi7vZ/N1fq+pwKzX2iTq5LG5o2kinWTdtfTbfQMDA4rKY0XnkVfABTknZrSnUqmcVwC6otqD3psu55dAAeU7rTIpqdVqtimEUqnUFxTIXtY+XVhYmEbW5JDNs60HUxtViuggDr2F8d0U23cw8rFZT5szOVGtaIsY2WUrWHRaqsjPib6+vr0UhxOPxw/papCvI6xfsYVli8zmGqduwNi0GAJtzYs9DN/L9jL7y+KswWJeKbOKZFgKyO2TFMpxFZCG6MKJp8bGxnYnk0kb8fOk4ZTWtY/113DwFGvS3bbOSDcO7RDNnGm5pjnkWXgY+FnYUMEwEty5s8i+jo72E+tTUHgRPIaCwzy/pN5LNEpVGMMHRDkU17nPp6lyLwU6L6pxLi8WXFPRilgdJkohlBTZ6OjoSQ49qiiM0fPgVTmKQd2Az8EDlmr6gDqgR6lAxb/L2cs48LVpQGEVF/Xzi7qg31yTrCLD8IDuKkomKY6jlmIzxsH95ncOvCMqt1oXxm1dmGcXxmZh5kE5opcMiOhFoQboN23QayIUUIRoo5lM5sMurfEJ8C2YNM+K+OR2zdsUE8SNniMANSgF1s/vBe/2GAMFJltcoV6q+COKZVwHu4wk+BKcMM/vgXPdNopJMcYdf3x4eHgGfSFs+Ji76hWayV8RaurQcpzieG4bo3aEwftgB3gDHAZ7wNPdNss4Vf46RhPYaBqqHUu13rd+mvsL/A7/wy/PI+AbVT+YAhe7bTJXLsQ7+JB0bxlWBwIlJhudxbEdfZ2vSOQevfSB6Ju93VmjWx8XZY/q5eVlL8e0xc6vj795baS6XAUlVaj7mUKcBgVuwWes7et0cJuC26SAc947QDlAUZFuNcMn0EF+rwLvG0nfS+qr/F4xcxWzXqUWFmCqzb2MgVlFrK8PoK+NFEhK8iyZNl8gX3Hmml6tPkuv6U6+v37eOcedUd1p/61fL166/v8L82+NPwUYAMeAcHNjxjTRAAAAAElFTkSuQmCC)}.article-content img.equation{margin:0 .1em;max-width:100%;vertical-align:text-bottom}.article-content img:not(.equation){cursor:zoom-in}.article-content figure{margin:2.7rem auto;text-align:center}.article-content figure figcaption{text-align:center;font-size:1rem;line-height:2.7rem;color:#909090}.article-content pre{line-height:1.93rem;overflow:auto}.article-content code,.article-content pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.article-content code{font-size:1rem;padding:.26rem .53em;word-break:break-word;color:#4e5980;background-color:#f8f8f8;border-radius:2px;overflow-x:auto}.article-content pre>code{font-size:1rem;padding:.67rem 1.3rem;margin:0;word-break:normal;display:block}.article-content a{color:#259}.article-content a:active,.article-content a:hover{color:#275b8c}.article-content table{display:inline-block!important;font-size:1rem;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.article-content thead{background:#f6f6f6;color:#000;text-align:left}.article-content tr:nth-child(2n){background-color:#fcfcfc}.article-content td,.article-content th{padding:1rem .6rem;line-height:2rem}.article-content td{min-width:10rem}.article-content blockquote{margin:1em 0;border-left:4px solid #ddd;padding:0 1.3rem}.article-content blockquote>p{margin:.6rem 0}.article-content ol,.article-content ul{padding-left:2.7rem}.article-content ol li,.article-content ul li{margin-bottom:.6rem}.article-content ol ol,.article-content ol ul,.article-content ul ol,.article-content ul ul{margin-top:.27rem}.article-content pre>code{overflow-x:auto;-webkit-overflow-scrolling:touch;color:#333;background:#f8f8f8}.article-content .hljs-comment,.article-content .hljs-quote{color:#998}.article-content .hljs-keyword,.article-content .hljs-selector-tag,.article-content .hljs-subst{color:#333;font-weight:700}.article-content .hljs-literal,.article-content .hljs-number,.article-content .hljs-tag .hljs-attr,.article-content .hljs-template-variable,.article-content .hljs-variable{color:teal}.article-content .hljs-doctag,.article-content .hljs-string{color:#d14}.article-content .hljs-section,.article-content .hljs-selector-id,.article-content .hljs-title{color:#900;font-weight:700}.article-content .hljs-subst{font-weight:400}.article-content .hljs-class .hljs-title,.article-content .hljs-type{color:#458;font-weight:700}.article-content .hljs-attribute,.article-content .hljs-name,.article-content .hljs-tag{color:navy;font-weight:400}.article-content .hljs-link,.article-content .hljs-regexp{color:#009926}.article-content .hljs-bullet,.article-content .hljs-symbol{color:#990073}.article-content .hljs-built_in,.article-content .hljs-builtin-name{color:#0086b3}.article-content .hljs-meta{color:#999;font-weight:700}.article-content .hljs-deletion{background:#fdd}.article-content .hljs-addition{background:#dfd}.article-content .hljs-emphasis{font-style:italic}.article-content .hljs-strong{font-weight:700}.article-content p{line-height:inherit;margin-top:22px;margin-bottom:22px}.article-content img{max-height:none}.article-content a{color:#0269c8;border-bottom:1px solid #d1e9ff}.article-content code{background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.article-content figure{margin:22px auto}.article-content figure figcaption{margin-top:2px;line-height:1.6}.article-content blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.article-content blockquote:after{display:block;content:\"\"}.article-content blockquote>p{margin:10px 0}.article-content blockquote.warning{position:relative;border-left-color:#f75151}.article-content blockquote.warning:before{position:absolute;top:14px;left:-12px;background:#f75151;border-radius:50%;content:\"!\";width:20px;height:20px;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.article-content ol,.article-content ul{padding-left:28px}.article-content ol li,.article-content ul li{margin-bottom:0;list-style:inherit}.article-content ol li ol,.article-content ol li ul,.article-content ul li ol,.article-content ul li ul{margin-top:0}.article-content ol li{padding-left:6px}.article-content pre{position:relative;line-height:1.75}.article-content pre>code{padding:15px 12px;font-size:11px}.article-content pre>code.hljs[lang]{padding:18px 15px 12px}.article-content pre>code.hljs[lang]:before{content:attr(lang);position:absolute;right:15px;top:2px;color:hsla(0,0%,55%,.8)}.article-content pre>code.hljs[lang][lang=bash]:before{content:\"\"}.article-content pre>code.copyable .copy-code-btn{position:absolute;top:6px;right:15px;font-size:12px;line-height:1;cursor:pointer;color:hsla(0,0%,55%,.8);transition:color .1s}.article-content pre>code.copyable .copy-code-btn:hover{color:#8c8c8c}.article-content pre>code.copyable.hljs[lang]:before{right:70px}.article-content h1,.article-content h2,.article-content h3,.article-content h4,.article-content h5,.article-content h6{color:#333;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.article-content h1{font-size:30px;margin-bottom:5px}.article-content h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.article-content h3{font-size:18px;padding-bottom:0}.article-content h4{font-size:16px}.article-content h5{font-size:15px}.article-content h6{margin-top:5px}.article-content h1.heading+h2.heading{margin-top:20px}.article-content h1.heading+h3.heading{margin-top:15px}.article-content .heading+.heading{margin-top:0}.article-content h1+:not(.heading){margin-top:25px}@media (max-width:720px){.article-content h1{font-size:24px}.article-content h2{font-size:20px}.article-content h3{font-size:18px}.article-content pre>code .copy-code-btn{display:none}.article-content pre>code.hljs[lang]:before{top:2px;right:15px}}#nprogress{pointer-events:none}#nprogress .bar{background:#007fff;position:fixed;z-index:1031;top:0;left:0;width:100%;height:2px}#nprogress .peg{display:block;position:absolute;right:0;width:100px;height:100%;box-shadow:0 0 10px #007fff,0 0 5px #007fff;opacity:1;-webkit-transform:rotate(3deg) translateY(-4px);transform:rotate(3deg) translateY(-4px)}.nprogress-custom-parent{overflow:hidden;position:relative}.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}html{font-size:12px;font-family:-apple-system,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Arial,sans-serif;word-break:break-word;text-rendering:optimizeLegibility;color:#333;background-color:#f4f5f5}body{overflow-y:scroll}a{text-decoration:none;cursor:pointer;color:#909090}a:hover{color:#007fff}button{list-style:1}button:disabled{cursor:not-allowed}button.disabled,button.disabled:hover{background-color:#d2d2d2;cursor:not-allowed}ul{padding:0;margin:0}li{list-style:none}#juejin-seo-meta{display:none}.container{position:relative;margin:0 auto;width:100%;max-width:960px}.container:after{display:table;content:\"\";clear:both}.hidden{display:none}.root-view-bg{position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:-1}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.align-center{text-align:center}.align-right{text-align:right}.align-middle{vertical-align:middle}.center{margin-left:auto;margin-right:auto}.text-normal{color:#333}.text-muted{color:#666}.text-muted1{color:#909090}.text-muted2{color:#838383}.text-gray{color:#909090}.text-light{color:#d2d2d2}.text-blue{color:#007fff}.text-blue-hover{color:#0371df}.text-green{color:#37c700}.text-green-hover{color:#3cb40e}.text-orange{color:#ff8900}.text-red{color:#e22323}.text-a,.text-link{cursor:pointer;color:#333}@include transition(color $speed-normal);.text-a:active,.text-a:hover,.text-link:active,.text-link:hover{color:#275b8c}.text-link{color:#259}.text-pointer{cursor:pointer}.line-wrap{white-space:pre-wrap;word-break:break-all}.ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text-bold,b,strong{font-weight:700}.view-nav{position:fixed;top:5rem;width:100%;height:3.833rem;z-index:100;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);transition:all .2s;-webkit-transform:translateZ(0);transform:translateZ(0)}.view-nav,.view-nav:before{left:0;background-color:#fff}.view-nav:before{content:\"\";position:absolute;right:0;bottom:0;height:200%;z-index:-1}.view-nav.top{-webkit-transform:translate3d(0,-5rem,0);transform:translate3d(0,-5rem,0)}.view-nav .nav-list{max-width:960px;margin:auto;line-height:1}.view-nav .nav-list,.view-nav .nav-list .nav-item{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.view-nav .nav-list .nav-item{-ms-flex-negative:0;flex-shrink:0;font-size:1.16rem;color:#71777c;padding:0 1rem}.view-nav .nav-list .nav-item:first-child{padding:0 1rem 0 0}.view-nav .nav-list .nav-item:last-child{padding:0 0 0 1rem}.view-nav .nav-list .nav-item.active,.view-nav .nav-list .nav-item:hover{color:#007fff}.view-nav .nav-list .nav-item a{color:inherit}.nav-item{position:relative;cursor:pointer}.nav-item>a:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0}@media (max-width:980px){.view-nav .nav-list{width:auto;overflow-x:auto}.view-nav .nav-list .nav-item:first-child,.view-nav .nav-list .nav-item:last-child{padding:0 1.5rem}}.list-header{padding:1.3rem 1rem;border-bottom:1px solid hsla(0,0%,59%,.1)}.list-header .list-nav,.list-header .nav-list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.list-header .nav-list{-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1}.list-header .nav-list .nav-item.active a,.list-header .nav-list .nav-item a:hover{color:#007fff}.list-header .left .nav-item{padding:0 1.2rem;font-size:1.16rem;border-right:1px solid hsla(0,0%,59%,.2)}.list-header .left .nav-item:last-child{border:none}.list-header .right .nav-item{font-size:1.16rem;padding:0 .7rem;position:relative}.list-header .right .nav-item:not(:last-child):after{width:2px;height:2px;border-radius:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);content:\"\";position:absolute;left:100%;top:50%;background-color:#2b445d;-webkit-transform:translateY(-50%);transform:translateY(-50%);opacity:.5}@media (max-width:600px){.list-header .right{display:none}}.button,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#007fff;color:#fff;border-radius:2px;border:none;padding:.5rem 1.3rem;outline:none;transition:background-color .3s,color .3s;cursor:pointer}.button:hover,button:hover{background-color:#0371df;color:#fff}i+span{margin-left:.6rem}button+button{margin-left:.8rem}.subscribe-btn{border:1px solid #37c700;background-color:#fff;color:#37c700;margin:1rem auto;font-size:1.1rem}.subscribe-btn:hover{background-color:#fff;color:#3cb40e;border-color:#3cb40e}.subscribe-btn.subscribed{background-color:#37c700;color:#fff}.subscribe-btn.subscribed:hover{background-color:#3cb40e}.radio-group{cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px}.radio-group .radio-label{margin-left:6px}input[type=radio]{width:16px;height:16px;border:1px solid #bfcbd9;border-radius:50%;background-color:#fff;cursor:pointer;box-sizing:border-box;position:relative;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=radio]:after{width:6px;height:6px;border-radius:50%;background-color:#fff;content:\"\";position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0);transition:-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6);transition:transform .15s cubic-bezier(.71,-.46,.88,.6);transition:transform .15s cubic-bezier(.71,-.46,.88,.6),-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6)}input[type=radio]:checked{border-color:#20a0ff;background:#3a9afc}input[type=radio]:checked:after{-webkit-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1)}input[type=radio]:disabled{background-color:#eef1f6;border-color:#d1dbe5;cursor:not-allowed}input[type=radio]:disabled:checked{border-color:#d1dbe5;background-color:#d1dbe5}input[name=registerSmsCode]::-webkit-contacts-auto-fill-button{display:none;visibility:hidden}.editable,input[type=password],input[type=text],input[type=url],textarea{resize:none;outline:none;width:100%;display:block;box-shadow:none;border:1px solid #ddd;border-radius:2px;transition:border .3s;background-color:#fff;box-sizing:border-box}.aside-top-section{background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);border-radius:2px;margin-bottom:1.3rem;font-size:1.16rem;line-height:1.29;color:#333}.aside-top-section .aside-header{padding:1rem 1.3rem;border-bottom:1px solid hsla(0,0%,59%,.1);color:#333;font-size:1.16rem}.aside-top-section .aside-list{padding:1rem 1.3rem}.aside-top-section .aside-list .item{margin-bottom:1.5rem}.root-view-bg[data-v-29c9a1c5]{background-color:#fff}.not-found-view[data-v-29c9a1c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:4rem}.where-is-panfish[data-v-29c9a1c5]{position:relative;width:52rem;max-width:70%;padding-top:48%}.where-is-panfish .elem[data-v-29c9a1c5]{position:absolute;top:35%;left:50%}.where-is-panfish .bg[data-v-29c9a1c5]{width:77.724%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.where-is-panfish .panfish[data-v-29c9a1c5]{width:20.994%;-webkit-transform:translate(-55%,32%);transform:translate(-55%,32%);-webkit-animation:a 2s ease-in-out alternate infinite;animation:a 2s ease-in-out alternate infinite}.where-is-panfish .sea[data-v-29c9a1c5]{width:99.199%;-webkit-transform:translate(-50%,75.3%);transform:translate(-50%,75.3%);opacity:.7}.where-is-panfish .spray[data-v-29c9a1c5]{width:40.545%;-webkit-transform:translate(-55%,162%);transform:translate(-55%,162%);opacity:.4}@keyframes a{0%{-webkit-transform:translate(-55%,30%);transform:translate(-55%,30%)}to{-webkit-transform:translate(-55%,36%);transform:translate(-55%,36%)}}.index-link[data-v-29c9a1c5]{display:block;margin-top:2rem;padding:1.1rem 2rem;font-size:1.5rem;color:#fff;background-color:#007fff;border-radius:5px}.emoji-barrage .full-screen[data-v-475389e2]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:1001;overflow:hidden}.emoji-inner-screen[data-v-475389e2]{position:absolute;left:0;width:100%;height:100%;-webkit-transform:translate3d(-100%,-100%,0);transform:translate3d(-100%,-100%,0)}.emoji-inner-screen .template[data-v-475389e2]{position:relative;width:100%;height:100%}.emojin-inner-screen__0.animate[data-v-475389e2]{-webkit-animation:b 6s ease-in;animation:b 6s ease-in}.emojin-inner-screen__1.animate[data-v-475389e2]{-webkit-animation:c 6s ease-in;animation:c 6s ease-in}.emojin-inner-screen__2.animate[data-v-475389e2]{-webkit-animation:d 6s ease-in;animation:d 6s ease-in}@keyframes b{0%{-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}to{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes c{0%{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes d{0%{-webkit-transform:translate3d(50%,-100%,0);transform:translate3d(50%,-100%,0)}to{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}.auth-modal-box[data-v-6cb98ece]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.auth-form[data-v-6cb98ece]{position:relative;padding:2rem;width:26.5rem;max-width:100%;font-size:1.167rem;background-color:#fff;border-radius:2px;box-sizing:border-box}.close-btn[data-v-6cb98ece]{float:right;cursor:pointer;opacity:.4}.close-btn[data-v-6cb98ece]:hover{opacity:1}.title[data-v-6cb98ece]{font-size:1.5rem;margin:0 0 2rem}.input-group[data-v-6cb98ece]{margin-bottom:.5rem;overflow:hidden}.insert-book-ticket-txt[data-v-6cb98ece]{color:#007fff;margin-bottom:10px;font-size:12px;margin-top:-10px}.input-box[data-v-6cb98ece]{position:relative;margin-bottom:.8rem}.input[data-v-6cb98ece]{padding:10px;width:100%;border:1px solid #e9e9e9;border-radius:2px;outline:none;box-sizing:border-box}.input[data-v-6cb98ece]:focus{border-color:#007fff}.btn[data-v-6cb98ece]{width:100%;height:3.334rem;color:#fff;background-color:#007fff;border-radius:2px;outline:none;box-sizing:border-box;cursor:pointer}.btn[data-v-6cb98ece]:disabled{background-color:#909090;cursor:default}.vcode-box[data-v-6cb98ece]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.vcode-box .input[data-v-6cb98ece]{max-width:95px}.vcode-box .img-vcode[data-v-6cb98ece]{border:1px solid #ddd;position:relative;box-sizing:border-box;overflow:hidden;-ms-flex-negative:0;flex-shrink:0;z-index:0;width:160px;color:#fff;height:40px;margin-left:15px}.vcode-box .img-vcode img[data-v-6cb98ece]{max-height:40px}.vcode-box .img-vcode .hint[data-v-6cb98ece]{position:absolute;z-index:-1;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.send-vcode-btn[data-v-6cb98ece]{position:absolute;top:0;right:0;height:100%;color:#007fff;line-height:1;background-color:transparent}.send-vcode-btn[data-v-6cb98ece]:disabled{color:#909090;cursor:default}.send-vcode-btn[data-v-6cb98ece]:hover(:not(:disabled)){opacity:.8}.prompt-box[data-v-6cb98ece]{margin:1rem 0 0;color:#8b9196}.prompt-box.center[data-v-6cb98ece]{text-align:center}.prompt-box .right[data-v-6cb98ece]{float:right}.prompt-box .clickable[data-v-6cb98ece]{color:#007fff;cursor:pointer}.oauth-box[data-v-6cb98ece]{margin-top:1.2rem;line-height:1.9rem;color:#8b9196}.oauth-box .oauth[data-v-6cb98ece]{-ms-flex-pack:distribute;justify-content:space-around;margin-top:15px}.oauth-box .oauth-bg[data-v-6cb98ece],.oauth-box .oauth[data-v-6cb98ece]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.oauth-box .oauth-bg[data-v-6cb98ece]{width:45px;height:45px;border-radius:50%;background-color:#f4f8fb;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.oauth-box .oauth-btn[data-v-6cb98ece]{height:1.9rem;vertical-align:bottom;cursor:pointer}.panfish .normal[data-v-6cb98ece]{position:absolute;top:0;left:50%;width:10rem;-webkit-transform:translate(-50%,-83%);transform:translate(-50%,-83%);z-index:1}.panfish .greeting[data-v-6cb98ece]{position:absolute;top:0;left:50%;width:10rem;-webkit-transform:translate(-50%,-75.8%);transform:translate(-50%,-75.8%);z-index:1}.panfish .blindfold[data-v-6cb98ece]{position:absolute;top:0;left:50%;width:8.6rem;-webkit-transform:translate(-50%,-75%);transform:translate(-50%,-75%);z-index:1}.alert-list[data-v-2840e9c3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:fixed;top:2rem;right:2rem;z-index:1000}.alert-list .alert[data-v-2840e9c3]{margin-bottom:1rem}.alert[data-v-705be69c]{display:inline-block;padding:1rem 2rem;max-width:15rem;font-size:1.167rem;color:#007bff;background-color:#e6f3ff;box-shadow:0 1px 1px 0 hsla(0,0%,80%,.5);border:1px solid #b3d0ef;border-radius:2px;cursor:default}.error[data-v-705be69c]{color:#e33;background-color:#f6e3e3;border:1px solid #e99}.suspension-panel[data-v-6ddb54c6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:fixed;right:2rem;bottom:2rem;z-index:1000}@media (max-width:414px){.suspension-panel[data-v-6ddb54c6]{display:none}}.suspension-panel .btn[data-v-6ddb54c6]{margin:1rem 0 0;padding:0;width:3.33rem;height:3.33rem;line-height:1;color:#909090;background-color:#fff;border:1px solid #f1f1f1;border-radius:50%;box-shadow:0 0 5px rgba(0,0,0,.05);cursor:pointer}.suspension-panel .btn[data-v-6ddb54c6]:hover{box-shadow:0 0 5px #ddd}.suspension-panel .to-top-btn[data-v-6ddb54c6]{font-size:1.6rem}.suspension-panel .meiqia-btn[data-v-6ddb54c6]{font-size:1.3rem;color:#007fff}.quick-login-modal-box[data-v-61f20471]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.auth-form[data-v-61f20471]{position:relative;padding:0;width:30rem;max-width:100%;font-size:1.167rem;background-color:#fff;border-radius:2px;box-sizing:border-box;overflow:hidden}.close-btn[data-v-61f20471]{position:absolute;top:0;right:0;padding:1rem;cursor:pointer;opacity:.4}.close-btn[data-v-61f20471]:hover{opacity:1}.logo[data-v-61f20471]{width:100%}.form-title[data-v-61f20471]{margin:1.5rem 2rem;font-size:1.333rem;font-weight:600;line-height:1.3;color:#000}.auth-list[data-v-61f20471]{margin:0 2rem 2rem}.auth-btn[data-v-61f20471]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:.8rem;padding:1rem;width:100%;font-size:1.167rem;line-height:1;color:#fff;border-radius:3px;box-shadow:inset 0 -3px 0 0 rgba(0,0,0,.11)}.auth-btn .icon[data-v-61f20471]{margin:0 1rem;width:2rem}.auth-btn[data-v-61f20471]:hover{opacity:.9}.auth-btn.weibo[data-v-61f20471]{background-color:#d21a1a}.auth-btn.wechat[data-v-61f20471]{background-color:#5dba51}.auth-btn.github[data-v-61f20471]{background-color:#4c4c4c}.auth-btn.register[data-v-61f20471]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#007fff;background-color:transparent;box-shadow:none}.extension[data-v-19078e6d]{position:fixed;bottom:0;left:0;z-index:1000;width:100%;height:180px;cursor:pointer;display:none}.extension[data-v-19078e6d]:before{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;position:absolute;bottom:0;z-index:0;height:148px;z-index:-1;content:\"\";background-color:#fff}.extension .link[data-v-19078e6d]{width:100%;height:100%;color:#000;background-repeat:no-repeat;background-image:url(https://b-gold-cdn.xitu.io/v3/static/img/extension.138f3a7.png);background-position:bottom;background-size:auto 180px;image-rendering:-webkit-optimize-contrast}.extension .link .price[data-v-19078e6d]{margin-left:5px;margin-right:5px;color:#007fff}.extension .link .title[data-v-19078e6d]{font-size:26px;padding-top:58px;box-sizing:border-box;width:960px;margin:0 auto;padding-left:15px}.extension .ion-close[data-v-19078e6d]{position:absolute;top:45px;right:15px;font-size:12px;color:#bbb}.extension .ion-close[data-v-19078e6d]:hover{color:#999}.books[data-v-19078e6d]{display:none;left:15px;right:15px;position:fixed;bottom:15px;z-index:900}.books.book--mobile[data-v-19078e6d]{bottom:55px}.books .book-inner[data-v-19078e6d]{width:100%;height:50px;padding-left:15px;padding-right:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#fd4243;box-sizing:border-box;border-radius:2px;background:linear-gradient(108deg,#f87554,#f0232f);background:-webkit-linear-gradient(-12deg,#f87554,#f0232f)}.books .book-inner .icon[data-v-19078e6d]{width:38px}.books .book-inner .icon img[data-v-19078e6d]{width:100%;display:block}.books .book-inner .title[data-v-19078e6d]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-left:15px;color:#fff;font-size:15px}.books .book-inner .btn-get[data-v-19078e6d]{padding-left:15px;padding-right:15px;height:26px;line-height:26px;border-radius:2px;border:1px solid #fff;color:#fff}@media (max-width:960px){.books[data-v-19078e6d]{display:block}}@media (min-width:960px){.extension[data-v-19078e6d]{display:block}}.request-health-alert[data-v-3be6a426]{position:fixed;left:2rem;bottom:2rem;padding:1rem;max-width:50%;color:#e33;background-color:#f6e3e3;border:1px solid #e99;z-index:10000}@media (max-width:600px){.request-health-alert[data-v-3be6a426]{display:none}}.title[data-v-3be6a426]{margin:0 0 .4em;font-size:1.5em}.content[data-v-3be6a426]{line-height:1.5}.btn[data-v-3be6a426]{color:inherit;text-decoration:underline;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.close[data-v-3be6a426]{position:absolute;top:0;right:0;padding:1rem;cursor:pointer;opacity:.5}.close[data-v-3be6a426]:hover{opacity:1}.book-new-user-award-popup[data-v-7c95f01f]{background-color:rgba(0,0,0,.6);width:100%;height:100%;box-sizing:border-box;top:0;left:0;z-index:999;position:fixed;padding-left:12px;padding-right:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:auto}.content-box[data-v-7c95f01f]{position:relative;width:100%;max-width:350px;padding:30px 20px;background-image:linear-gradient(140deg,#f87554,#f0232f);border-radius:2px}.content-box .close[data-v-7c95f01f]{position:absolute;width:30px;top:10px;right:10px;height:30px;line-height:30px;color:#eed7a1;text-align:center;cursor:pointer}.content-box .header[data-v-7c95f01f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;margin-bottom:30px}.content-box .header .icon img[data-v-7c95f01f]{width:60px;display:block}.content-box .header .txt[data-v-7c95f01f]{font-size:28px;margin-left:25px;font-weight:700}.content-box .desc[data-v-7c95f01f]{color:#f6e3b7;font-size:14px;font-weight:300}.content-box .tickets[data-v-7c95f01f]{margin-top:18px}.content-box .tickets .ticket[data-v-7c95f01f]{padding-left:10px;padding-right:10px;margin-bottom:8px;font-size:16px;position:relative}.content-box .tickets .ticket[data-v-7c95f01f]:before{left:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAABwCAYAAADxLjt/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmMmJhZDk5Zi1iYjY5LTQzOWQtYWRmMC1jZDNlZDNkYTY2MWMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDBGRTYxOEMzQzhFMTFFODhDNkZGNzVDOTBGOTk4MUIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDBGRTYxOEIzQzhFMTFFODhDNkZGNzVDOTBGOTk4MUIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmMmJhZDk5Zi1iYjY5LTQzOWQtYWRmMC1jZDNlZDNkYTY2MWMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZjJiYWQ5OWYtYmI2OS00MzlkLWFkZjAtY2QzZWQzZGE2NjFjIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+3Ri1WgAAAt1JREFUeNrsmk1rE0EYx5+Z3TRpk3STJjENqWmpYjUl4NvBKghaj/oFvIgIVrx468EvoN70IKIfwJNnL3rwpoJQRUQU4htUqdbWYFoxMbv+Z3ZrarR52wmIzMAvnWTIL7Pz+sxQVnl0lZAy4AI4BHLkM5me8AlIEbF1RY4jXrqVXpJCxokn88RCsbUyRr//SkfSwyLDEzvIyB0kFYmDrKxWvYZKpGtt2AspaamWaqmWaqmWaqmWaqmW/udSxnsgtX8Q1SqI0m3fUvOXs/SWnEoZnwSJGUGiQJhYcFBCZn93Uqf8QdKQ3vGhbTlm5YhFssT6wm1LXwJhQzWpCkS1ImCzOFLaSygGPDZOLLEdf8fakp4BL8AiQKNSFCTBJJhi0ex55+s82V9eEaGJKLuPeApF3NxQyrwDb7OUBifBcVCQvZveSQbkG42YdsbRArgIToO7slMXHoM5JYP/ATgB7ok3tfmHaJI3SmbUezADXktx8XaR7KqSaSpGy6yX32IvPlc292+B+277zildUC7LSVNZIWf1kzLpHbAia9vQYX6ky177En37rHQ9LcomqK4qlS7J19p3pdKIazGVSuXFGAuElUmxklNe5kKWMimWKRqSksFRZdJz8tGNPuwKGSXSveColGI3IG74loa9KRoAJT68S8ncvwIOiIwxst9q7PlOpXFwHZySXxSbYKrQfItukY5524lsR26NopZTf7Tleukm8PEvZWIvxjdpGhwBctzw5CTx4d1NAwwhvent+yWx3gDL26ZHwATJG2D0cjCGx83Li1vCMGq170+3ePSnPLOnwK0xYuF0Z2GPGzMNEEMsRWbIjaUGUuLzAutPdBQV1qXxrejRCbniMB5wH7HL8LIuDaCWobji+FRBXKoPElqqpVqqpVqqpVqqpVqqpf+ktNqLmP+ZyNjLRaJaVYlUXMqKm95r5P53S9k7UvpK4hx1g9wb3LPemTTqV/pTgAEAoaGSDiPOhYkAAAAASUVORK5CYII=)}.content-box .tickets .ticket[data-v-7c95f01f]:after,.content-box .tickets .ticket[data-v-7c95f01f]:before{content:\"\";position:absolute;top:0;width:12px;height:56px;background-position:0 0;background-repeat:no-repeat;background-size:contain;z-index:2}.content-box .tickets .ticket[data-v-7c95f01f]:after{right:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAABwCAYAAADxLjt/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmMmJhZDk5Zi1iYjY5LTQzOWQtYWRmMC1jZDNlZDNkYTY2MWMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDBGRTYxOTAzQzhFMTFFODhDNkZGNzVDOTBGOTk4MUIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDBGRTYxOEYzQzhFMTFFODhDNkZGNzVDOTBGOTk4MUIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpmMmJhZDk5Zi1iYjY5LTQzOWQtYWRmMC1jZDNlZDNkYTY2MWMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZjJiYWQ5OWYtYmI2OS00MzlkLWFkZjAtY2QzZWQzZGE2NjFjIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+kZ53wQAAArtJREFUeNrsmM9rU0EQx2df3kttbC0FLYj1B/jjYMGLh4Ki/gmePXoXTx68CKIHPQv1YAU9ehN60EMP9UcrWHvRYjFo0KSxmJrmZ9Mmr3k7zj53m4eI+bF7sjvwZXdewofNvszO7DB/YQJBz3zSImlSirsATJMJcQA8TaPQKdIVFuTe660UA+DFFGBtVT0ZZ0imu1QIfGh+eATIA+Fdd8CExWgHvITyDpqBhtvQmpmDRsxCLdRCLdRCLdRCLdRCLdRCOzbWujq52qV+owJYL4U3FG0o1nKA1SzwyvdwjFh/11D01wHpMsZ/LoarlNYgJUkF0ruuoLi5BnxlHnjpq3qUIc2R3pDeksSScx1DcWMVgszr8GdLe0p6TJr687sdQXGrBkH6BYHzwt0k3SPdIG397fvtoXR15dk5BRR2i3RX63/Ky9+AF74o9347YHsob0KQer4kPUG+ph1RvLoihpPSvSn3Uw+Kxc9qKl75EwOxTy9oLanaDc9Eq0Af2hRBAiPSe2nklEK/GnXTZo6+oBH1Cmagjhf1dpuBxgei3qgRKHP7gbVWO25mpcwBNrhfeReN5Sg2fFxNj5HOGYE6Q4fFoALgjpls6u6C2OgZFQBnSVeNpGhn7xiwxD7l3u5kf9vn/ZgHsUMX6N/QJ7w98tS//M930WlXUrQzeXoG8Hd+FxH2kPSAlOoZup0FlmejqVlk0ml54MyTNrqGhgfN+g86Ej8Bzy9FHydlZhC/YKq3piwdNrySBSylAMXYrEc/neyt7In1gTN8FHCAIq5eDIuMYHm2TJ8MkXytqo95CQrlA+CMiP42lNQOmaxPcQdX0iw+eMTeTnYqVFTb0s7bPTUUUd52ufXK7qmFWqiFWqiFWuh/DkWuZr4RKC9nogXaR+YvTCQ1mXHZuHFlw2FMTE4Y2gDRD7xEyv8SYADFzwMCX/A+0gAAAABJRU5ErkJggg==)}.content-box .tickets .ticket .ticket__inner[data-v-7c95f01f]{display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#fff;border-top:1px solid #eed7a1;border-bottom:1px solid #eed7a1;height:54px;line-height:54px}.content-box .tickets .ticket .ticket__inner .enjoy[data-v-7c95f01f]{color:#8b572a;text-align:center;font-weight:300;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-negative:0;flex-shrink:0}.content-box .tickets .ticket .ticket__inner .enjoy span[data-v-7c95f01f]{display:block;text-align:center;color:#8b572a;font-weight:400}.content-box .tickets .ticket .ticket__inner .enjoy span.new-title[data-v-7c95f01f]{font-size:16px}.content-box .tickets .ticket .ticket__inner .sale[data-v-7c95f01f]{text-align:center;color:#8b572a;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-negative:0;flex-shrink:0;font-weight:500;background-position:0 0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAHCAIAAACtGQvAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODEzNTNEQjg0QUJGMTFFOEEzNkQ5OUI5OTE2QjQ5QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODEzNTNEQjk0QUJGMTFFOEEzNkQ5OUI5OTE2QjQ5QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowOTQ3M0RGRjRBQjUxMUU4QTM2RDk5Qjk5MTZCNDlCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowOTQ3M0UwMDRBQjUxMUU4QTM2RDk5Qjk5MTZCNDlCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppn6YbkAAAAoSURBVHjaYvz//z8DAwMTAxhAKZY/31/9+fqc6d+vT78+P0SVAwgwAH6mDnof3yNCAAAAAElFTkSuQmCC);background-repeat:repeat-y;background-size:2px}.content-box .remark[data-v-7c95f01f]{margin-top:15px;margin-bottom:15px;font-size:14px;color:#f6e3b7;font-weight:300}.content-box .submit-btn[data-v-7c95f01f]{cursor:pointer;line-height:45px;height:45px;border-radius:2px;text-align:center;background-image:linear-gradient(180deg,#fde2ac,#fbc174);box-shadow:0 1px 4px 0 rgba(0,0,0,.14);font-size:18px;color:#8b572a}.model[data-v-7c95f01f]{width:100%;max-width:320px;box-sizing:border-box;padding:30px 20px;border-radius:2px;background-color:#fff;padding:20px 25px}.model .heading[data-v-7c95f01f]{font-size:18px;font-weight:700}.model .content-text[data-v-7c95f01f]{font-size:14px;margin-top:10px}.model .btn-success-footer[data-v-7c95f01f]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.model .btn-success-footer .btn-ok[data-v-7c95f01f]{width:100px}.model .btn-success-footer .btn-ok.btn-link[data-v-7c95f01f]{color:#fff;background-color:#007fff}.model .btn-ok[data-v-7c95f01f]{cursor:pointer;margin-top:25px;text-align:center;height:30px;font-size:14px;color:#007fff;line-height:30px;border:1px solid #007fff;border-radius:2px}@media (max-width:376px){.content-box .desc[data-v-7c95f01f]{font-size:13px}}.iconfont[data-v-23cfca4d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-23cfca4d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-23cfca4d]:before{content:\"\\E601\"}.pin-modal .pin-modal-box[data-v-23cfca4d]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.65);z-index:500;overflow-x:hidden;overflow-y:hidden}.pin-modal .main[data-v-23cfca4d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:100%;height:100%;max-width:960px;z-index:501}.pin-modal .main .pin__editor[data-v-23cfca4d]{width:640px;top:0;position:absolute;left:50%;border-radius:2px;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);-webkit-transform:translate(-50%,60px);transform:translate(-50%,60px)}.pin-modal .main .pin__editor[data-v-23cfca4d] .editor-body{padding-top:0}.pin-modal .main .pin__editor[data-v-23cfca4d] .editor-body .editor{max-height:136px;overflow-y:auto}@media (max-width:980px){.pin-modal .main .pin__editor[data-v-23cfca4d]{display:none}}.iconfont[data-v-3b9e5e53]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3b9e5e53]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3b9e5e53]:before{content:\"\\E601\"}.pin-editor-dialog[data-v-3b9e5e53]{background-color:#fff;position:relative;box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.pin-editor-dialog .editor-body[data-v-3b9e5e53]{padding:1.333rem 1.666rem 0;background:#fff;position:relative;border-radius:2px}.pin-editor-dialog .editor-body .content[data-v-3b9e5e53]{position:relative;border-radius:2px;border:1px solid hsla(0,0%,59%,.2);background-color:rgba(226,230,235,.2)}.pin-editor-dialog .editor-body .content.active[data-v-3b9e5e53]{border:1px solid #007fff;background-color:#fff}.pin-editor-dialog .editor-body .content.dashed[data-v-3b9e5e53]{border:2px dashed #999}.pin-editor-dialog .editor-body .content .editor[data-v-3b9e5e53]{position:relative}.pin-editor-dialog .editor-body .content .editor.empty[data-v-3b9e5e53]{padding:8px 12px}.pin-editor-dialog .editor-body .content .image[data-v-3b9e5e53]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:12px;position:relative}.pin-editor-dialog .editor-body .content .image .select-box[data-v-3b9e5e53]{cursor:pointer;width:80px;height:80px;position:relative;border-radius:1.4px;border:1px dashed #c5c5c5;background:#f8f8f9}.pin-editor-dialog .editor-body .content .image .select-box[data-v-3b9e5e53]:hover{opacity:.6}.pin-editor-dialog .editor-body .content .image .select-box[data-v-3b9e5e53]:after,.pin-editor-dialog .editor-body .content .image .select-box[data-v-3b9e5e53]:before{content:\"\";width:2rem;height:1px;display:block;position:absolute;background:#c5c5c5;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.pin-editor-dialog .editor-body .content .image .select-box[data-v-3b9e5e53]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.pin-editor-dialog .editor-body .content .link[data-v-3b9e5e53]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border-radius:4px;padding:12px}.pin-editor-dialog .editor-body .content .topic[data-v-3b9e5e53]{padding:0 12px 12px}.pin-editor-dialog .editor-body .content .topic .topic-title[data-v-3b9e5e53]{font-size:13px;display:inline-block;line-height:22px;height:22px;padding:0 12px;border:1px solid #007fff;border-radius:14px;text-align:center;color:#007fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pin-editor-dialog .editor-body .content .count[data-v-3b9e5e53]{position:absolute;right:1rem;bottom:.8rem;font-size:13px;z-index:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.pin-editor-dialog .bottom[data-v-3b9e5e53]{padding:.833rem 1.666rem;background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:-2px}.pin-editor-dialog .cover[data-v-3b9e5e53]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;background:transparent}.iconfont[data-v-1561a938]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-1561a938]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-1561a938]:before{content:\"\\E601\"}.preview-image[data-v-1561a938]{position:relative;cursor:pointer}.preview-image .icon[data-v-1561a938]{border-radius:2px;margin:0 .666rem .666rem 0;width:6.68rem;height:6.68rem;background-repeat:no-repeat;background-size:cover;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-position:50%}.preview-image .icon[data-v-1561a938]:hover{-webkit-filter:brightness(.8);filter:brightness(.8)}.preview-image .delete[data-v-1561a938]{cursor:pointer;width:1.3rem;height:1.3rem;position:absolute;top:.333rem;right:1rem;border-radius:50%;border:1px solid #c5c5c5;background:rgba(0,0,0,.4);-webkit-transform:rotate(45deg);transform:rotate(45deg)}.preview-image .delete[data-v-1561a938]:after,.preview-image .delete[data-v-1561a938]:before{content:\"\";width:.8rem;height:1px;display:block;position:absolute;background:#fff;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.preview-image .delete[data-v-1561a938]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.preview-image .delete[data-v-1561a938]:hover{opacity:.8}.preview-image .check[data-v-1561a938]{height:2rem;width:2rem;position:absolute;top:50%;left:50%;margin-top:-1rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.preview-image .check[data-v-1561a938]:after{content:\"\";display:block;border-right:1rem solid #fff;border-top:1rem solid #fff;-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:scaleX(-1) rotate(145deg);transform:scaleX(-1) rotate(145deg);height:1rem;width:1rem;position:absolute;bottom:-1rem;left:-.5rem;-webkit-animation:e .8s;animation:e .8s}.preview-image .loading[data-v-1561a938]{width:4rem;height:4rem;position:absolute;top:44%;left:50%;background-repeat:no-repeat;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}@keyframes e{0%{height:0;width:0}33.3333%{width:1rem;height:0}}.lazy[data-v-b2db8566]{position:relative}.lazy[data-v-b2db8566]:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background-color:inherit;border-radius:inherit}.lazy[data-v-b2db8566]:not(.immediate):before{transition:opacity .2s}.lazy.loaded[data-v-b2db8566]:before{opacity:0;pointer-events:none}[data-v-f0e3c22e] .image-viewer{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000}[data-v-f0e3c22e] .image-viewer.loading:after{content:\"\";position:absolute;top:0;right:100%;width:50%;height:.2rem;background-color:#007fff;z-index:1;-webkit-animation:f 1s ease-in-out infinite;animation:f 1s ease-in-out infinite;-webkit-animation-delay:1s;animation-delay:1s}@keyframes f{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}to{-webkit-transform:translate3d(300%,0,0);transform:translate3d(300%,0,0)}}.fade-enter-active[data-v-3e1d80a5],.fade-leave-active[data-v-3e1d80a5]{transition:opacity .2s}.fade-enter[data-v-3e1d80a5],.fade-leave-to[data-v-3e1d80a5]{opacity:0}.image-box[data-v-3e1d80a5]{position:absolute;top:0;left:0;right:0;bottom:0;line-height:0;background-color:rgba(0,0,0,.8);overflow:auto}.image[data-v-3e1d80a5]{position:absolute;transition:all .2s;cursor:zoom-out}.image.error[data-v-3e1d80a5]{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.fade-enter-active[data-v-090cd86b],.fade-leave-active[data-v-090cd86b]{transition:opacity .2s}.fade-enter[data-v-090cd86b],.fade-leave-to[data-v-090cd86b]{opacity:0}.image-box[data-v-090cd86b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;line-height:0;background-color:rgba(0,0,0,.8);overflow:auto;-webkit-overflow-scrolling:touch}.image-box.large-long[data-v-090cd86b]{display:block}.image[data-v-090cd86b]{position:absolute;max-width:100%;transition:all .1s}.image.zoom[data-v-090cd86b]{max-width:1000%}.image.error[data-v-090cd86b]{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iconfont[data-v-71294244]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-71294244]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-71294244]:before{content:\"\\E601\"}.preview-link[data-v-71294244]{position:relative;padding:.833rem 1.333rem;border:1px solid #ebebeb;border-radius:.333rem;width:40.084rem;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.preview-link .content[data-v-71294244],.preview-link[data-v-71294244]{display:-webkit-box;display:-ms-flexbox;display:flex}.preview-link .content[data-v-71294244]{height:5.416rem;max-width:35rem;width:100%;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.preview-link .content.blank[data-v-71294244]{max-width:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.preview-link .content.blank span[data-v-71294244]{text-align:center;line-height:5.426rem;color:#2e3135;font-size:16px;font-weight:600}.preview-link .content .title[data-v-71294244]{font-size:1.25rem;font-weight:500;color:#000;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.preview-link .content .link[data-v-71294244]{margin-top:auto;font-size:13px;color:#8a93a0;font-weight:400}.preview-link .icon[data-v-71294244]{width:5.416rem;height:5.416rem;background-repeat:no-repeat;background-size:cover;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;border-radius:2px}.preview-link .close[data-v-71294244]{cursor:pointer;width:1.5rem;height:1.5rem;position:absolute;top:-.8rem;right:-.8rem;border-radius:50%;border:1px solid #fff;background:#000;opacity:.65;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.preview-link .close[data-v-71294244]:after,.preview-link .close[data-v-71294244]:before{content:\"\";width:1rem;height:1px;display:block;position:absolute;background:#c5c5c5;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.preview-link .close[data-v-71294244]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.preview-link .close[data-v-71294244]:hover{opacity:.6}.iconfont[data-v-30e7a76e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-30e7a76e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-30e7a76e]:before{content:\"\\E601\"}.header[data-v-30e7a76e]{font-size:1rem;position:relative}.header .title[data-v-30e7a76e]{font-size:1.3rem;color:#17181a;text-align:center;line-height:3.333rem;height:3.333rem;font-weight:500}.header .close[data-v-30e7a76e]{cursor:pointer;width:1.3rem;height:1.3rem;position:absolute;top:1rem;right:2rem;border-radius:50%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.header .close[data-v-30e7a76e]:after,.header .close[data-v-30e7a76e]:before{content:\"\";width:1.2rem;height:2px;display:block;position:absolute;background:#17181a;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.header .close[data-v-30e7a76e]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.header .close[data-v-30e7a76e]:hover{opacity:.8}.iconfont[data-v-f1c1bee4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-f1c1bee4]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-f1c1bee4]:before{content:\"\\E601\"}.editor-content[data-v-f1c1bee4]{position:relative;font-size:1.5rem;word-wrap:break-word}.rich-editor[data-v-f1c1bee4]{position:relative;height:100%;outline:none;border-radius:2px;color:#17181a;min-height:75px;font-size:1.25rem;padding:8px 10px}.rich-editor.indent[data-v-f1c1bee4]{min-height:39px}.rich-editor[data-v-f1c1bee4]:after{content:attr(placeholder);position:absolute;top:8px;color:rgba(23,24,26,.4);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:none}.rich-editor.empty[data-v-f1c1bee4]:after{display:inline-block}.rich-editor[data-v-f1c1bee4]:focus:after{opacity:.7}[data-v-f1c1bee4] .emoji{vertical-align:sub;width:1.666rem;height:1.666rem;cursor:default;margin:0 1px}.iconfont[data-v-1c6c8726]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-1c6c8726]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-1c6c8726]:before{content:\"\\E601\"}.toolbar[data-v-1c6c8726]{color:#007fff;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}.toolbar .tool[data-v-1c6c8726],.toolbar[data-v-1c6c8726]{display:-webkit-box;display:-ms-flexbox;display:flex}.toolbar .tool[data-v-1c6c8726]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.toolbar .tool .picker[data-v-1c6c8726]{z-index:1;margin-right:1.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.toolbar .tool .picker.not-suport[data-v-1c6c8726]{display:none}.iconfont[data-v-c1177eca]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-c1177eca]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-c1177eca]:before{content:\"\\E601\"}.emoji[data-v-c1177eca]{position:relative}.emoji .emoji-box[data-v-c1177eca]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;color:#027fff;cursor:pointer;font-size:1.2rem}.emoji .emoji-box .icon[data-v-c1177eca]{width:18px;height:18px;background-repeat:no-repeat;background-size:cover}.emoji .emoji-box span[data-v-c1177eca]{padding:.166rem;font-size:13px}.emoji .emoji-selector[data-v-c1177eca]{padding:1rem;position:absolute;top:2.8rem;z-index:1;bottom:0;width:280px;height:17.5rem;border-radius:2px;background-color:#fff;box-shadow:0 5px 18px 0 rgba(0,0,0,.16)}.emoji .emoji-selector .triangle[data-v-c1177eca]{position:absolute;top:-.7rem;left:15%;width:0;height:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-width:.8rem;border-style:solid;border-color:transparent transparent #fff}.emoji .emoji-selector .emoji-content[data-v-c1177eca]{overflow:auto;margin-bottom:10px}.emoji .emoji-selector ul.nextpage[data-v-c1177eca]{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;bottom:10px;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.emoji .emoji-selector ul.nextpage li[data-v-c1177eca]{margin:0 5px;width:6px;height:6px;border-radius:100%;background-color:#f0f0f0;cursor:pointer}.emoji .emoji-selector ul.nextpage li.active[data-v-c1177eca]{cursor:default;background-color:#d8d8d8}.iconfont[data-v-0f7b1eb7]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0f7b1eb7]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0f7b1eb7]:before{content:\"\\E601\"}.emoji-picker .emojis .category[data-v-0f7b1eb7]{max-width:280px;max-height:225px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.emoji-picker .emojis .category .item[data-v-0f7b1eb7]{font-size:1.4rem;padding:5px 4.5px;cursor:pointer}.emoji-picker .emojis .category .item[data-v-0f7b1eb7] .emoji{width:22px;height:22px;display:block}.emoji-picker .emojis .category .item[data-v-0f7b1eb7] .emoji:hover{-webkit-transform:scale(1.2);transform:scale(1.2)}.iconfont[data-v-030b79e8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-030b79e8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-030b79e8]:before{content:\"\\E601\"}.file-picker[data-v-030b79e8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#aeb6c0;z-index:3}.file-picker[data-v-030b79e8]:hover{cursor:not-allowed}.file-picker.active[data-v-030b79e8]{color:#027fff;cursor:pointer}.file-picker .icon[data-v-030b79e8]{width:18px;height:18px;background-repeat:no-repeat;background-size:cover}.file-picker span[data-v-030b79e8]{padding:.166rem;font-size:13px}.photo-uploader[data-v-e1b36d0a]{cursor:pointer;padding:.5rem}.iconfont[data-v-6f10b71c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-6f10b71c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-6f10b71c]:before{content:\"\\E601\"}.link-picker[data-v-6f10b71c]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.link-picker .triangle[data-v-6f10b71c]{position:absolute;top:-.6rem;left:50%;width:0;height:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-width:.8rem;border-style:solid;border-color:transparent transparent #fff}.link-picker .select[data-v-6f10b71c]{color:#aeb6c0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.link-picker .select[data-v-6f10b71c]:hover{cursor:not-allowed}.link-picker .select.active[data-v-6f10b71c]{cursor:pointer;color:#027fff}.link-picker .select .icon[data-v-6f10b71c]{width:18px;height:18px;background-repeat:no-repeat;background-size:cover}.link-picker .select span.link[data-v-6f10b71c]{padding:.166rem;font-size:13px}.link-picker .linkPanel[data-v-6f10b71c]{padding:18px 20px;color:#aeb6c0;background:#fff;position:absolute;width:279px;height:65px;top:2.8rem;left:-10rem;bottom:0;border-radius:2px;box-shadow:0 5px 18px 0 rgba(0,0,0,.16)}.link-picker .linkPanel .input[data-v-6f10b71c]{position:relative}.link-picker .linkPanel .input input[type=text][data-v-6f10b71c]{width:100%;background-color:#fafafb;border:1px solid #e5e5e5;border-radius:2px;outline:#027fff;color:#666;font-size:1.166rem;font-size:1.1rem;padding:.5rem 2.5rem .5rem .666rem}.link-picker .linkPanel .input input[type=text][data-v-6f10b71c]::-webkit-input-placeholder{color:#aeb6c0;font-size:13px;line-height:1}.link-picker .linkPanel .input input[type=text][data-v-6f10b71c]:-ms-input-placeholder{color:#aeb6c0;font-size:13px;line-height:1}.link-picker .linkPanel .input input[type=text][data-v-6f10b71c]::placeholder{color:#aeb6c0;font-size:13px;line-height:1}.link-picker .linkPanel .input input[type=text][data-v-6f10b71c]:focus{outline:none;border:1px solid #027fff;background-color:#fff}.link-picker .linkPanel .input .clear[data-v-6f10b71c]{cursor:pointer;width:1.2rem;height:1.2rem;position:absolute;top:.7rem;right:.6rem;border-radius:50%;border:1px solid #007fff;background:#f8f8f9;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.link-picker .linkPanel .input .clear[data-v-6f10b71c]:after,.link-picker .linkPanel .input .clear[data-v-6f10b71c]:before{content:\"\";width:.8rem;height:1px;display:block;position:absolute;background:#007fff;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.link-picker .linkPanel .input .clear[data-v-6f10b71c]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.link-picker .linkPanel .tip[data-v-6f10b71c]{padding:16px 0;font-size:13px;display:-webkit-box;display:-ms-flexbox;display:flex;color:#17181a;font-weight:400;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.link-picker .linkPanel .tip span[data-v-6f10b71c]{opacity:.4}.link-picker .linkPanel .tip span[data-v-6f10b71c]:nth-child(2){padding-right:.5rem;cursor:not-allowed}.link-picker .linkPanel .tip span.active[data-v-6f10b71c]{color:#027fff;cursor:pointer;opacity:1}.iconfont[data-v-7f622b88]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-7f622b88]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-7f622b88]:before{content:\"\\E601\"}.topic-picker[data-v-7f622b88]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.topic-picker .topic-selector[data-v-7f622b88]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.topic-picker .topic-selector .icon[data-v-7f622b88]{width:18px;height:18px;background-repeat:no-repeat;background-size:cover}.topic-picker .topic-selector .picker[data-v-7f622b88]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:0;font-size:13px;color:#027fff}.topic-picker .topic-selector.disable[data-v-7f622b88]{cursor:not-allowed}.topic-picker .topic-selector.disable .picker[data-v-7f622b88]{color:#aeb6c0}.topic-picker .topic_panel[data-v-7f622b88]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#fff;position:absolute;top:2.8rem;bottom:0;left:-9.8rem;width:316px;height:417px;border-radius:.2rem;box-shadow:0 5px 18px 0 rgba(0,0,0,.16)}.topic-picker .topic_panel .triangle[data-v-7f622b88]{position:absolute;top:-.6rem;left:50%;width:0;height:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-width:.8rem;border-style:solid;border-color:transparent transparent #fff}.topic-picker .topic_panel .top[data-v-7f622b88]{color:#aeb6c0;position:relative;padding:1.5rem 1.666rem 0}.topic-picker .topic_panel .top .search_input[data-v-7f622b88]{display:inline-block;height:2.666rem;width:100%;font-size:1.2rem;color:#666;border:.5px solid #e5e5e5;padding:.833rem 1rem;outline:none;background-color:#fafafb}.topic-picker .topic_panel .top input[data-v-7f622b88]::-webkit-input-placeholder{font-size:1.2rem}.topic-picker .topic_panel .top input[type=text][data-v-7f622b88]:focus{outline:none;border:.5px solid #007fff;background-color:#fff}.topic-picker .topic_panel .top .search_icon[data-v-7f622b88]{width:1.8rem;height:1.8rem;background-repeat:no-repeat;background-size:cover;position:absolute;top:50%;margin-top:-2px;right:2.666rem}.topic-picker .topic_panel .content[data-v-7f622b88]{overflow:auto;padding:0}.topic-picker .topic_panel .content.disableScroll[data-v-7f622b88]{overflow:hidden}.topic-picker .topic_panel .content .delete-topic[data-v-7f622b88]{cursor:pointer;color:#17181a;font-size:1.2rem;display:block;padding:0 1.666rem}.topic-picker .topic_panel .content .delete-topic li[data-v-7f622b88]{padding:16px 0 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid hsla(0,0%,59%,.1)}.topic-picker .topic_panel .content .delete-topic li[data-v-7f622b88]:hover{background-color:hsla(0,0%,87%,.05)}.topic-picker .topic_panel .content .delete-topic li .box[data-v-7f622b88]{width:3.5rem;height:3.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:4px;background-color:#eef2f5}.topic-picker .topic_panel .content .delete-topic li .box .icon[data-v-7f622b88]{width:1.833rem;height:1.833rem;background-repeat:no-repeat;background-size:contain;background-size:cover}.topic-picker .topic_panel .content .delete-topic li span[data-v-7f622b88]{color:#17181a;margin-left:.833rem}.topic-picker .topic_panel .content[data-v-7f622b88] .topic-list li{cursor:pointer;padding:0 1.666rem;border-bottom:none}.topic-picker .topic_panel .content[data-v-7f622b88] .topic-list li .topic-item{border-bottom:1px solid hsla(0,0%,59%,.1)}.topic-picker .topic_panel .content[data-v-7f622b88] .topic-list li:hover{background-color:#f8f8f8}.topic-picker .topic_panel .content .empty[data-v-7f622b88],.topic-picker .topic_panel .content .loading[data-v-7f622b88]{width:100%;height:364px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.topic-picker .topic_panel .content .empty .empty-icon[data-v-7f622b88],.topic-picker .topic_panel .content .empty .loading-icon[data-v-7f622b88],.topic-picker .topic_panel .content .loading .empty-icon[data-v-7f622b88],.topic-picker .topic_panel .content .loading .loading-icon[data-v-7f622b88]{width:5.166rem;height:4.666rem;background-repeat:no-repeat;background-size:contain}.topic-picker .topic_panel .content .empty span[data-v-7f622b88],.topic-picker .topic_panel .content .loading span[data-v-7f622b88]{padding:.6rem 0;font-size:15px;color:#b2bac2;opacity:.8}.topic-list li[data-v-86d880ae]:not(:last-child){border-bottom:1px solid hsla(0,0%,59%,.1)}.iconfont[data-v-112b2153]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-112b2153]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-112b2153]:before{content:\"\\E601\"}.topic-item[data-v-112b2153]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;margin:0;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;cursor:pointer;padding:10px 0}.icon[data-v-112b2153]{width:3.5rem;height:3.5rem;border-radius:.5rem;background-size:cover;background-repeat:no-repeat}.content[data-v-112b2153]{color:#8a9aa9;width:12rem;max-width:12rem;letter-spacing:normal;text-align:left;margin-left:14px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content span[data-v-112b2153]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.content span[data-v-112b2153]:first-child{color:#2e3135;font-size:1.25rem}.content span[data-v-112b2153]{padding-top:.1rem;font-size:13px}.content .subscribe[data-v-112b2153]{cursor:pointer}.content .followed[data-v-112b2153]{color:#37c701}.content em[data-v-112b2153]{font-style:normal}.iconfont[data-v-938cbdb0]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-938cbdb0]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-938cbdb0]:before{content:\"\\E601\"}.submit[data-v-938cbdb0]{display:-webkit-box;display:-ms-flexbox;display:flex}.submit .tip[data-v-938cbdb0],.submit button[data-v-938cbdb0]{height:32px;width:6rem;font-size:15px}.submit button[data-v-938cbdb0]{opacity:.2;cursor:not-allowed;padding:0;background-color:#027fff}.submit button.active[data-v-938cbdb0]{cursor:pointer;opacity:1}.submit .tip[data-v-938cbdb0]{color:#c2c2c2;text-align:center;width:10rem;line-height:36px;font-size:13px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.word-counter[data-v-19503a28]{color:#a1a9b3}.word-counter.limit[data-v-19503a28]{color:red}.welcome-view[data-v-02462315]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.welcome-view .welcome__feed[data-v-02462315]{overflow:hidden;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.welcome-view .welcome__side[data-v-02462315]{width:240px;min-width:240px;margin-left:20px}@media (max-width:960px){.welcome__side[data-v-02462315]{display:none}}.entry-list[data-v-f0edcf22]{width:100%;background-color:#fff}.empty[data-v-f0edcf22]{padding:2rem 0;width:100%;font-size:1.2rem;text-align:center}.item[data-v-f0edcf22]:not(:last-child){border-bottom:1px solid rgba(178,186,194,.15)}.iconfont[data-v-9f3d7718]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-9f3d7718]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-9f3d7718]:before{content:\"\\E601\"}.iconfont[data-v-2065a791]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-2065a791]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-2065a791]:before{content:\"\\E601\"}a[data-v-2065a791]{color:inherit}.entry[data-v-2065a791]:hover{background-color:rgba(0,0,0,.01)}.entry:hover .action-list>.item.hover[data-v-2065a791]{visibility:visible}.content-box[data-v-2065a791]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.5rem 2rem}.content-box[data-v-2065a791],.info-box[data-v-2065a791]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-box[data-v-2065a791]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:0}.meta-row[data-v-2065a791]{font-size:1rem;color:#b2bac2}.meta-list[data-v-2065a791]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;white-space:nowrap}.meta-list .item[data-v-2065a791]:not(:last-child):after{content:\"\\B7\";margin:0 .4em;color:#b2bac2}.meta-list .item.recommended[data-v-2065a791]{font-weight:500;color:#f70}.meta-list .item.hot[data-v-2065a791]{font-weight:500;color:red}.meta-list .item.events[data-v-2065a791]{font-weight:500;color:#033ee8}.meta-list .item.post[data-v-2065a791]{font-weight:500;color:#b71ed7}.meta-list .item.unparsed[data-v-2065a791]{font-weight:500;color:#007fff}.meta-list .item.username[data-v-2065a791]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.meta-list .item.tag[data-v-2065a791]{min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.meta-list .item.clickable[data-v-2065a791]:hover{color:#007fff}.meta-list .item .tag[data-v-2065a791]:not(:last-child):after{content:\"/\";margin:0 .2em;color:#b2bac2}.meta-list .item .tag[data-v-2065a791]:hover{color:#007fff}.action-list[data-v-2065a791]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;white-space:nowrap}.action-list:not(.active)>.item.hover[data-v-2065a791]{visibility:hidden}.action-list>.item[data-v-2065a791]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;padding:0 .8rem;height:2rem;font-size:1.083rem;line-height:1;white-space:nowrap;color:#b2bac2;border-radius:1px;border:1px solid #edeeef;background-color:#fff}.action-list>.item[data-v-2065a791]:hover{background-color:#f7f8fa}@media (max-width:600px){.action-list>.item[data-v-2065a791]{height:1.5rem;font-size:1rem}}.action-list>.item.more[data-v-2065a791]{margin-left:-1px}.action-list>.item.more.active .more-list[data-v-2065a791]{display:block}.action-list>.item.more .more-list[data-v-2065a791]{position:absolute;top:100%;left:0;margin-top:1rem;min-width:8rem;font-size:.9em;white-space:nowrap;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.action-list>.item.more .more-list[data-v-2065a791]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.action-list>.item.more .more-list .item[data-v-2065a791]{padding:.8rem .9rem}.action-list>.item.more .more-list .item[data-v-2065a791]:hover{background-color:#f7f8fa}.title-row[data-v-2065a791]{margin:.5rem 0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.title[data-v-2065a791]{font-size:1.4rem;font-weight:600;line-height:1.2;color:#2e3135}.title[data-v-2065a791]:hover{text-decoration:underline}.title[data-v-2065a791]:visited{color:#909090}@media (max-width:600px){.title[data-v-2065a791]{font-size:1.2rem}}.thumb[data-v-2065a791]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:5rem;height:5rem;margin-left:2rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.thumb[data-v-2065a791]{display:none}}.avatar[data-v-1b9df826]{display:inline-block;position:relative;background-position:50%;background-size:cover;background-repeat:no-repeat;background-color:#eee}.avatar.xmas[data-v-1b9df826]:after{content:\"\";position:absolute;left:25%;bottom:30%;width:90%;height:90%;background-position:50%;background-size:contain;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMyIgaGVpZ2h0PSIyMyIgdmlld0JveD0iMCAwIDIzIDIzIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJyb3RhdGUoLTE3IDIzLjM4MiA0LjgwOSkiPgogICAgICAgIDxwYXRoIGZpbGw9IiNEMzJDMjciIGQ9Ik0xMS4yMjMgMi40NzJoLTcuMTJsNC43NDYgNS4zODUgNC40NjIgNC41MDMgMi4yNzktLjcwNy0uNDc1LTYuNTMzeiIvPgogICAgICAgIDxlbGxpcHNlIGN4PSIxNC43NjkiIGN5PSIxNi40OCIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii42IiByeD0iMS42NDEiIHJ5PSIxLjY0OCIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNEMzJDMjciIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIuNiIgZD0iTTQuMTAzIDIuNTIyQzUuNjk5LjU3OCA3LjI2NC0uMjQyIDguNzk5LjA2MmMyLjMwMy40NTUgMy40MDggMS40NTggNC4zMjkgMi4wMDQuOTIuNTQ3IDMuMDM5IDEuOTE0IDMuODY4IDMuOTE5LjgyOSAyLjAwNC0uNzM3IDcuNzQ1LTEuNTY2IDkuMjAzLS44MjkgMS40NTgtMS4zODEtLjgyLTEuNjU4LTIuMzctLjE4NC0xLjAzMi0uMzk5LTMuNzY2LS42NDQtOC4yIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii42IiBkPSJNMTMuNjU2IDEwLjg0NGMuOTY2LTEuMjQgMS41MTMtMi4zMzggMS42NDEtMy4yOTYiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjRkZGIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjYiIGQ9Ik0uMzMgNC43MzRjLjY1OC0uNzIzIDEuOTc0LTIuMzQ5IDMuMjkxLTIuMjU4IDEuMzE3LjA5IDcuOTk2IDUuMTUgOC43NDggNi40MTQuNzUyIDEuMjY1IDEuODgxIDMuMzQzIDEuNTA1IDQuNTE4LS4zNzYgMS4xNzQtMi4zNDEgMi4xMTUtMi45MDYgMi4xMTUtLjU2NCAwLTUuMDktNS41NDktNi42ODgtNy4wODRDMi42OCA2LjkwMy0uMzMgNS40NTcuMzMgNC43MzR6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);-webkit-transform:rotate(15deg);transform:rotate(15deg);-webkit-transform-origin:bottom right;transform-origin:bottom right;transition:all .2s}.avatar.xmas[data-v-1b9df826]:hover:after{-webkit-transform:rotate(20deg);transform:rotate(20deg)}.thumb[data-v-009ea7bb]{background-position:50%;background-size:cover;background-repeat:no-repeat}.user-popover-box[data-v-311d2efa]{display:inline}.user-popover[data-v-311d2efa]{position:fixed;top:20rem;left:2rem;padding:1.333rem 1.333rem 1.833rem;width:267px;max-height:160px;font-weight:400;line-height:1.2;background-color:#fff;border:1px solid #d9dee0;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);box-sizing:border-box;border-radius:2px;cursor:default;z-index:250}@media (max-width:$width-small){.user-popover[data-v-311d2efa]{display:none}}.info-row[data-v-311d2efa]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-row .avatar[data-v-311d2efa]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1rem;width:4.833rem;height:4.833rem;border-radius:50%;border:1px solid #fff;box-shadow:0 2px 6px 0 rgba(0,0,0,.15)}.info-row .user-info[data-v-311d2efa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;line-height:1}.info-row .user-info .username[data-v-311d2efa]{margin-top:.333rem;font-size:1.25rem;line-height:1.2;font-weight:500;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info-row .user-info .position[data-v-311d2efa]{margin:1.5rem 0 0;font-size:1.083rem;line-height:1.2;color:#8f969c;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.meta-row[data-v-311d2efa]{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;margin-top:1.5rem}.meta-row .meta-list[data-v-311d2efa],.meta-row[data-v-311d2efa]{display:-webkit-box;display:-ms-flexbox;display:flex}.meta-row .meta-list[data-v-311d2efa]{margin:0;padding:0;list-style:none}.meta-row .meta-list .item[data-v-311d2efa],.meta-row .meta-list[data-v-311d2efa]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.meta-row .meta-list .item .count[data-v-311d2efa]{font-size:1.25rem;font-weight:600;color:#17181a}.meta-row .meta-list .item .title[data-v-311d2efa]{margin-top:.666rem;font-size:13px;color:#8f969c}.meta-row .follow-btn[data-v-311d2efa]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 1rem;padding:0;width:6.167rem;height:2.5rem;font-size:1.25rem;letter-spacing:normal;color:#37c701;background-color:#fff;border:1px solid #37c701;border-radius:2px}.meta-row .follow-btn[data-v-311d2efa]:hover:not(:disabled){opacity:.8}.meta-row .follow-btn.followed[data-v-311d2efa]{color:#fff;background-color:#1fd200}.meta-row .follow-btn[data-v-311d2efa]:disabled{color:#ccc;border-color:#ccc}.triangle-bottom[data-v-311d2efa]{position:absolute;bottom:-20px;left:50%;margin-left:-5px}[data-v-311d2efa] .triangle-bottom.container{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.triangle-bottom.isTop[data-v-311d2efa]{bottom:153px}.container[data-v-494d384d],[data-v-311d2efa] .triangle-bottom.isTop.container{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.container[data-v-494d384d]{width:14px;height:14px;position:relative;border-top:1px solid #fff;display:inline-block}.container .triangle[data-v-494d384d]{position:absolute;margin:auto;top:-6px;left:0;right:0;width:10px;height:10px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);border-right:1px solid #d9dee0;border-bottom:1px solid #d9dee0;background:#fff}.iconfont[data-v-6b46a625]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-6b46a625]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-6b46a625]:before{content:\"\\E601\"}a[data-v-6b46a625]{color:inherit}.entry[data-v-6b46a625]:hover{background-color:rgba(0,0,0,.01)}.entry:hover .action-list>.item.hover[data-v-6b46a625]{visibility:visible}.content-box[data-v-6b46a625]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.5rem 2rem}.content-box[data-v-6b46a625],.info-box[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-box[data-v-6b46a625]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:0}.meta-row[data-v-6b46a625]{font-size:1rem;color:#b2bac2}.meta-list[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;white-space:nowrap}.meta-list .item[data-v-6b46a625]:not(:last-child):after{content:\"\\B7\";margin:0 .4em;color:#b2bac2}.meta-list .item.recommended[data-v-6b46a625]{font-weight:500;color:#f70}.meta-list .item.hot[data-v-6b46a625]{font-weight:500;color:red}.meta-list .item.post[data-v-6b46a625]{font-weight:500;color:#b71ed7}.meta-list .item.unparsed[data-v-6b46a625]{font-weight:500;color:#007fff}.meta-list .item.username[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.meta-list .item.tag[data-v-6b46a625]{min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.meta-list .item.clickable[data-v-6b46a625]:hover{color:#007fff}.meta-list .item .tag[data-v-6b46a625]:not(:last-child):after{content:\"/\";margin:0 .2em;color:#b2bac2}.meta-list .item .tag[data-v-6b46a625]:hover{color:#007fff}.action-list[data-v-6b46a625]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;white-space:nowrap}.action-list:not(.active)>.item.hover[data-v-6b46a625]{visibility:hidden}.action-list>.item[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;padding:0 .8rem;height:2rem;font-size:1.083rem;line-height:1;white-space:nowrap;color:#b2bac2;border-radius:1px;border:1px solid #edeeef}@media (max-width:600px){.action-list>.item[data-v-6b46a625]{height:1.5rem;font-size:1rem}}.action-list>.item .title-box[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 .8rem;height:100%}.action-list>.item.like[data-v-6b46a625]{padding:0}.action-list>.item.like.liked[data-v-6b46a625]{color:#1dc400}.action-list>.item.comment[data-v-6b46a625]{margin-left:-1px;padding:0}.action-list>.item.share[data-v-6b46a625]{margin-left:.8rem}.action-list>.item.share.active .share-panel[data-v-6b46a625]{display:block}.action-list>.item.share .share-panel[data-v-6b46a625]{position:absolute;top:100%;left:-1px;margin-top:1rem;width:11rem;font-size:1.167rem;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.action-list>.item.share .share-panel[data-v-6b46a625]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.action-list>.item.share .share-panel .share-item[data-v-6b46a625]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.6rem .8rem}.action-list>.item.share .share-panel .share-item .icon[data-v-6b46a625]{margin-right:.6rem}.action-list>.item.share .share-panel .share-item[data-v-6b46a625]:hover{background-color:#f7f8fa}.action-list>.item.share .share-panel .share-item.weibo[data-v-6b46a625]{border-bottom:1px solid rgba(178,186,194,.15)}.action-list>.item.share .share-panel .share-item.wechat .qr-code-box[data-v-6b46a625]{margin:.8rem .4rem .7rem;width:100%;box-sizing:border-box}.action-list>.item.share .share-panel .share-item.wechat .qr-code-box .qr-code[data-v-6b46a625]{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.action-list>.item.collect[data-v-6b46a625]{margin-left:-1px;z-index:1}.action-list>.item.more[data-v-6b46a625]{margin-left:-1px}.action-list>.item.more.active .more-list[data-v-6b46a625]{display:block}.action-list>.item.more .more-list[data-v-6b46a625]{position:absolute;top:100%;left:0;margin-top:1rem;min-width:8rem;font-size:.9em;white-space:nowrap;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.action-list>.item.more .more-list[data-v-6b46a625]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.action-list>.item.more .more-list .item[data-v-6b46a625]{padding:.8rem .9rem}.action-list>.item.clickable[data-v-6b46a625]:hover,.action-list>.item.more .more-list .item[data-v-6b46a625]:hover{background-color:#f7f8fa}.action-list>.item .count[data-v-6b46a625]{margin-left:.2em;font-weight:700}.title-row[data-v-6b46a625]{margin:.5rem 0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.title[data-v-6b46a625]{font-size:1.4rem;font-weight:600;line-height:1.2;color:#2e3135}.title[data-v-6b46a625]:hover{text-decoration:underline}.title[data-v-6b46a625]:visited{color:#909090}@media (max-width:600px){.title[data-v-6b46a625]{font-size:1.2rem}}.thumb[data-v-6b46a625]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:5rem;height:5rem;margin-left:2rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.thumb[data-v-6b46a625]{display:none}}.collect-popup-box[data-v-e4647de6]{color:#000;cursor:default;z-index:50}.mask[data-v-e4647de6]{position:fixed;top:0;left:0;right:0;bottom:0}.collect-popup[data-v-e4647de6]{position:absolute;top:100%;left:50%;margin:1rem 0 0;margin-bottom:2rem;width:28rem;background-color:#fff;border:1px solid #eceeef;border-radius:3px;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-transform:translate(-50%);transform:translate(-50%);z-index:10}.collect-popup[data-v-e4647de6]:after{content:\"\";position:absolute;top:-.5rem;left:50%;margin-left:-.5rem;width:1rem;height:1rem;background-color:#fff;border:1px solid #eceeef;border-right:none;border-bottom:none;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.collect-popup.right[data-v-e4647de6]{top:0;left:100%;margin:0 0 0 1rem;-webkit-transform:translate(0);transform:translate(0)}.collect-popup.right[data-v-e4647de6]:after{display:none}.collect-popup>.title[data-v-e4647de6]{font-size:1.167rem;font-weight:700;line-height:3;text-align:center}.collection-list[data-v-e4647de6]{height:10rem;border:1px solid #eceeef;border-left:none;border-right:none;overflow-y:auto}.collection-list .item[data-v-e4647de6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem 1rem;cursor:pointer}.collection-list .item[data-v-e4647de6]:hover{background-color:#f8f9fa}.collection-list .item:hover .collect-btn[data-v-e4647de6]{display:block}.collection-list .item .item-block[data-v-e4647de6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.collection-list .item .thumb[data-v-e4647de6]{width:2.167rem;height:2.167rem;border-radius:2px}.collection-list .item .title[data-v-e4647de6]{margin:0 1rem;max-width:16rem;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collection-list .entry-count[data-v-e4647de6]{padding:.3em .5em;line-height:1;text-align:center;color:#b9bec2;background-color:#f2f2f2;border-radius:50%}.collection-list .collect-icon[data-v-e4647de6]{width:1.8rem;height:1.8rem;background-color:transparent;background-position:50%;background-size:contain;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIyMXB4IiB2aWV3Qm94PSIwIDAgMjEgMjEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+QkEzMzZDMDMtQzJDQS00RDc0LUE2RDAtMDVBNDBCNUZERjMwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLmtYHnqIsiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMjAuMDAwMDAwLCAtMTI1LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTAtQ29weS03IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNy4wMDAwMDAsIDI0LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9Iua3u+WKoCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkzLjAwMDAwMCwgMTAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMi1Db3B5IiBmaWxsPSIjODNDNzNBIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHJ4PSIxMC41Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0zIiBmaWxsPSIjRkZGRkZGIiB4PSI2IiB5PSIxMCIgd2lkdGg9IjkiIGhlaWdodD0iMSI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMyIgZmlsbD0iI0ZGRkZGRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAuNTAwMDAwLCAxMC41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMC41MDAwMDAsIC0xMC41MDAwMDApICIgeD0iNiIgeT0iMTAiIHdpZHRoPSI5IiBoZWlnaHQ9IjEiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+);display:none}.collection-list .collect-icon.collected[data-v-e4647de6]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIyMXB4IiB2aWV3Qm94PSIwIDAgMjEgMjEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+MzkwQTI0MDMtMEEwOS00M0I0LTlFM0EtOTcyOTI0OTZCOTlDPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLmtYHnqIsiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDA4LjAwMDAwMCwgLTEyNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTEwLUNvcHktOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzE1LjAwMDAwMCwgMjQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTEtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkzLjAwMDAwMCwgMTAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMi1Db3B5IiBmaWxsPSIjODNDNzNBIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHJ4PSIxMC41Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJMaW5lIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHBvaW50cz0iNiAxMSA5LjIyNDYxNTM4IDE0IDE1LjUgOCI+PC9wb2x5bGluZT4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+)}.collection-list .empty[data-v-e4647de6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#b9bec2}.collection-list .empty .empty-icon[data-v-e4647de6]{margin-bottom:1rem}.action-box[data-v-e4647de6]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;padding:0 1rem;height:3.334rem}.action-box .new-btn[data-v-e4647de6]{padding:0;width:100%;height:100%;color:#d2d2d2;text-align:left;background-color:transparent;box-sizing:border-box}.action-box .new-btn[data-v-e4647de6]:hover{color:#007fff}.action-box .new-form[data-v-e4647de6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.action-box .new-form .title-input[data-v-e4647de6]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;border:none;outline:none}.action-box .new-form .submit-btn[data-v-e4647de6]{margin:0 0 0 1rem;padding:.5rem 1rem;line-height:1;color:#007fff;background-color:#fff;border:1px solid currentColor;border-radius:2px;white-space:nowrap}.action-box .new-form .submit-btn[data-v-e4647de6]:disabled{color:#d2d2d2}.iconfont[data-v-f0fa4668]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-f0fa4668]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-f0fa4668]:before{content:\"\\E601\"}.content-box[data-v-f0fa4668]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:1.5rem 2rem;color:#b2bac2}.content-box[data-v-f0fa4668]:hover{background-color:rgba(0,0,0,.01)}.content-box .info-box[data-v-f0fa4668]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:0;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.content-box .info-box .meta-row[data-v-f0fa4668]{font-size:12px}.content-box .info-box .meta-row .username[data-v-f0fa4668]{color:#b3bac1}.content-box .info-box .meta-row .sign[data-v-f0fa4668]{font-weight:500;color:#ff0068}.content-box .info-box .meta-row .sign[data-v-f0fa4668]:after{content:\"\\B7\";margin:0 .4em;color:#b2bac2}.content-box .info-box .info-row[data-v-f0fa4668]{margin:.5rem 0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-box .info-box .info-row .title[data-v-f0fa4668]{font-size:1.4rem;font-weight:600;line-height:1.2;color:#2e3135}.content-box .info-box .info-row .desc[data-v-f0fa4668]{font-size:14px;margin-top:10px;color:#666}.content-box .info-box .action-row[data-v-f0fa4668]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.content-box .info-box .action-row .action-left[data-v-f0fa4668],.content-box .info-box .action-row .action-right[data-v-f0fa4668]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.content-box .info-box .action-row .link-btn[data-v-f0fa4668]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:2rem;border:1px solid #edeeef;border-radius:1px;padding-left:14px;padding-right:14px;color:#b3bac1;font-size:14px;white-space:nowrap}.content-box .info-box .action-row .link-btn[data-v-f0fa4668]:not(:first-child){margin-left:-1px}.content-box .info-box .action-row .share[data-v-f0fa4668]{position:relative}.content-box .info-box .action-row .share .share-panel[data-v-f0fa4668]{position:absolute;top:100%;left:-1px;margin-top:1rem;width:11rem;font-size:1.167rem;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.content-box .info-box .action-row .share .share-panel[data-v-f0fa4668]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.content-box .info-box .action-row .share .share-panel .share-item[data-v-f0fa4668]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.6rem .8rem}.content-box .info-box .action-row .share .share-panel .share-item .icon[data-v-f0fa4668]{margin-right:.6rem}.content-box .info-box .action-row .share .share-panel .share-item[data-v-f0fa4668]:hover{background-color:#f7f8fa}.content-box .info-box .action-row .share .share-panel .share-item.weibo[data-v-f0fa4668]{border-bottom:1px solid rgba(178,186,194,.15)}.content-box .info-box .action-row .share .share-panel .share-item.wechat .qr-code-box[data-v-f0fa4668]{margin:.8rem .4rem .7rem;width:100%;box-sizing:border-box}.content-box .info-box .action-row .share .share-panel .share-item.wechat .qr-code-box .qr-code[data-v-f0fa4668]{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.content-box .info-box .action-row .share.active .share-panel[data-v-f0fa4668]{display:block}.content-box .thumb[data-v-f0fa4668]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:5rem;height:5rem;margin-left:2rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.content-box .info-box .info-row .title[data-v-f0fa4668]{font-size:1.2rem}.content-box .info-box .action-row .link-btn[data-v-f0fa4668]{height:1.5rem;font-size:12px;padding-left:5px;padding-right:5px}.content-box .info-box .action-row .share[data-v-f0fa4668],.content-box .thumb[data-v-f0fa4668]{display:none}}.iconfont[data-v-9dff68b4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-9dff68b4]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-9dff68b4]:before{content:\"\\E601\"}.entry-masker[data-v-9dff68b4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding:0 2rem;min-height:114px}.screenshot[data-v-9dff68b4]{margin-right:2rem;width:60px;height:60px;border-radius:2px}.entry-info[data-v-9dff68b4]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;font-size:.7rem}.info-row[data-v-9dff68b4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2.5rem}.info-row.meta[data-v-9dff68b4]{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.entry-title-box[data-v-9dff68b4]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;position:relative}.entry-title-box .entry-title[data-v-9dff68b4]{width:60%;height:1.8rem}.meta-badge[data-v-9dff68b4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;padding:0 1rem;width:2rem;height:15px;border:1px solid}.meta-badge.comments[data-v-9dff68b4],.meta-badge.entry-action[data-v-9dff68b4]{margin-left:-1px}.entry-action[data-v-9dff68b4]{opacity:0}.entry-action .entry-action-list[data-v-9dff68b4]{position:absolute;top:100%;left:-1px;display:none}.entry-action .entry-action-list .entry-action-item[data-v-9dff68b4]{padding-left:1.6rem;padding-right:1.6rem}.entry-action:hover .entry-action-list[data-v-9dff68b4]{display:block}.meta-tag-box[data-v-9dff68b4]{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.meta-tag-box[data-v-9dff68b4],.meta-tag[data-v-9dff68b4]{display:-webkit-box;display:-ms-flexbox;display:flex}.meta-tag[data-v-9dff68b4]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:4rem;height:15px;border:1px solid;border-radius:1px}.meta-tag[data-v-9dff68b4]:first-child{margin-left:0}.meta-tag[data-v-9dff68b4]:last-child{margin-right:0}.user-avatar[data-v-9dff68b4]{margin-left:1.3rem;width:25px;height:25px;border-radius:1px}.masker[data-v-9dff68b4]{border-color:hsla(0,0%,95%,.1);background-color:hsla(0,0%,95%,.3)}@media (max-width:800px){.screenshot[data-v-9dff68b4]{display:none}}@media (max-width:600px){.entry-date[data-v-9dff68b4],.user-avatar[data-v-9dff68b4]{display:none}.entry-title[data-v-9dff68b4]{white-space:normal;overflow:auto}}@media (max-width:480px){.meta-tag[data-v-9dff68b4]{display:none}}.entry-list[data-v-86c0651c]{width:100%;background-color:#fff}.empty[data-v-86c0651c]{padding:2rem 0;width:100%;font-size:1.2rem;text-align:center}.item[data-v-86c0651c]:not(:last-child){border-bottom:1px solid rgba(178,186,194,.15)}.iconfont[data-v-f2ca14b0]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-f2ca14b0]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-f2ca14b0]:before{content:\"\\E601\"}a[data-v-f2ca14b0]{color:inherit}.entry[data-v-f2ca14b0]:hover{background-color:rgba(0,0,0,.01)}.content-box[data-v-f2ca14b0]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.167rem 2rem;min-height:5.75rem}.content-box[data-v-f2ca14b0],.info-box[data-v-f2ca14b0]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-box[data-v-f2ca14b0]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:0}.meta-row[data-v-f2ca14b0]{font-size:1rem;color:#8f969c}.meta-list[data-v-f2ca14b0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;white-space:nowrap}.meta-list .item[data-v-f2ca14b0]:not(:last-child):not(.category):after{content:\"\\B7\";margin:0 .4em;color:#8f969c}.meta-list .item.clickable[data-v-f2ca14b0]:hover{color:#007fff}.meta-list .item.username[data-v-f2ca14b0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.meta-list .item .category-title[data-v-f2ca14b0]{display:inline-block;margin-right:1.2rem;padding:.38rem 0;min-width:4.5rem;text-align:center;line-height:1;color:#fff;background-color:#c69f42;border-radius:2px}.meta-list .item .category-title.android[data-v-f2ca14b0]{background-color:#42c67d}.meta-list .item .category-title.frontend[data-v-f2ca14b0]{background-color:#56c4e1}.meta-list .item .category-title.ios[data-v-f2ca14b0]{background-color:#ff955b}.meta-list .item .category-title.backend[data-v-f2ca14b0]{background-color:#857dea}.meta-list .item .category-title.ai[data-v-f2ca14b0]{background-color:#e8596b}.meta-list .item .category-title.design[data-v-f2ca14b0]{background-color:#f2c400}.meta-list .item .category-title.product[data-v-f2ca14b0]{background-color:#a08563}.meta-list .item .category-title.freebie[data-v-f2ca14b0]{background-color:#606b9e}.meta-list .item .category-title.article[data-v-f2ca14b0]{background-color:#abbb79}.title-row[data-v-f2ca14b0]{margin:.5rem 0 .8rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.title[data-v-f2ca14b0]{font-size:1.4rem;font-weight:600;line-height:1.2;color:#2e3135}.title[data-v-f2ca14b0]:hover{text-decoration:underline}.title[data-v-f2ca14b0]:visited{color:#909090}@media (max-width:600px){.title[data-v-f2ca14b0]{font-size:1.2rem}}.thumb[data-v-f2ca14b0]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:8.9rem;height:5.75rem;margin-left:2rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.thumb[data-v-f2ca14b0]{display:none}}.iconfont[data-v-03d5ceda]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-03d5ceda]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-03d5ceda]:before{content:\"\\E601\"}.entry-masker[data-v-03d5ceda]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;padding:0 2rem;min-height:97px}.masker[data-v-03d5ceda]{border-color:hsla(0,0%,95%,.1);background-color:hsla(0,0%,95%,.3)}.title[data-v-03d5ceda]{width:80%;height:1.8rem}.meta[data-v-03d5ceda]{margin-top:1rem;width:40%;height:1.2rem}.category-nav[data-v-1add119e]{background-color:#fff;padding:1.5rem 2rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid #f6f6f6}.category-nav h5[data-v-1add119e]{margin:0;font-size:16px;font-weight:500}.category-nav .more[data-v-1add119e]{display:none}.category-nav .nav-list[data-v-1add119e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.category-nav .nav-list li.nav-item[data-v-1add119e]{font-size:14px;color:#90979c}.category-nav .nav-list li.nav-item[data-v-1add119e]:not(:last-child){margin-right:20px}.category-nav .nav-list li.nav-item.route-active[data-v-1add119e]{color:#007fff}@media (max-width:600px){.category-nav .nav-list[data-v-1add119e]{display:none}.category-nav .more[data-v-1add119e]{display:block}}.iconfont[data-v-25222c36]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-25222c36]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-25222c36]:before{content:\"\\E601\"}.welcome__side.sticky .sticky-section[data-v-25222c36]{opacity:1;z-index:5;pointer-events:all}.welcome__side .section[data-v-25222c36]{background-color:#fff;border-radius:2px;margin-bottom:1.5rem;overflow:hidden}.welcome__side .tag-link[data-v-25222c36]{color:#007fff}.welcome__side .tag-list[data-v-25222c36]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}.welcome__side .tag-list .tag[data-v-25222c36]{margin-right:12px;margin-bottom:12px;background-color:#f3f6f3;cursor:pointer;height:30px;line-height:30px;padding-left:22px;padding-right:22px;border-radius:30px}.welcome__side .tag-list .tag[data-v-25222c36]:hover{color:#fff;background-color:#0c0}.welcome__side .banner-section[data-v-25222c36]{height:200px}.welcome__side .sticky-section[data-v-25222c36]{position:fixed;width:240px;top:80px;opacity:0;z-index:-1;transition:all .2s;pointer-events:none}.iconfont[data-v-c1cc7ad0]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-c1cc7ad0]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-c1cc7ad0]:before{content:\"\\E601\"}.auth-section[data-v-c1cc7ad0]{padding:1.333rem;background-color:#fff}.title[data-v-c1cc7ad0]{font-weight:600}.slogan[data-v-c1cc7ad0],.title[data-v-c1cc7ad0]{margin-bottom:.5rem;font-size:1.167rem;color:#2e3135}.ticket[data-v-c1cc7ad0]{font-size:14px;color:#8f969c;margin-bottom:1rem}.ticket .highlight[data-v-c1cc7ad0]{margin-left:5px;margin-right:5px;color:#007fff}.input-box[data-v-c1cc7ad0]{position:relative;margin-bottom:.833rem}.input[data-v-c1cc7ad0]{padding:.7rem .6rem;width:100%;font-size:1.167rem;background-color:#fbfbfb;border:1px solid #f4f4f4;border-radius:2px;outline:none;box-sizing:border-box}.vcode-box[data-v-c1cc7ad0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.vcode-box .input[data-v-c1cc7ad0]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:auto;min-width:0}.vcode-box .vcode-img[data-v-c1cc7ad0]{border:1px solid #f4f4f4;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;width:8rem;height:2.9rem;margin-left:.4rem}.send-vcode-btn[data-v-c1cc7ad0]{position:absolute;top:0;right:0;height:100%;font-size:1.167rem;color:#007fff;line-height:1;background-color:transparent}.send-vcode-btn[data-v-c1cc7ad0]:disabled{color:#909090;cursor:default}.send-vcode-btn[data-v-c1cc7ad0]:hover(:not(:disabled)){opacity:.8}.submit-btn[data-v-c1cc7ad0]{padding:.7rem 0;width:100%;font-size:1.167rem}.submit-btn[data-v-c1cc7ad0]:disabled{background-color:#909090;cursor:default}.oauth-box[data-v-c1cc7ad0]{margin-top:1.5rem;font-size:1rem;line-height:1.9rem;color:#8f969c}.oauth-box .oauth-btn[data-v-c1cc7ad0]{margin-left:1.2rem;height:1.9rem;vertical-align:bottom;cursor:pointer}.tag-link[data-v-26a2d138]{color:#007fff}.tag-list[data-v-26a2d138]{padding:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}.tag-list .tag[data-v-26a2d138]{margin-right:12px;margin-bottom:12px;background-color:#f3f6f3;cursor:pointer;height:30px;color:inherit;line-height:30px;padding-left:22px;padding-right:22px;border-radius:30px}.tag-list .tag[data-v-26a2d138]:hover{color:#fff;background-color:#0c0}.iconfont[data-v-59ba9598]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-59ba9598]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-59ba9598]:before{content:\"\\E601\"}.section[data-v-59ba9598]{margin-bottom:18px;background-color:#fff}.section .header[data-v-59ba9598]{height:45px;line-height:45px;padding-left:15px;padding-right:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid #f6f6f6}.section .header .title[data-v-59ba9598]{font-size:14px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-right:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iconfont[data-v-37ee4f90]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-37ee4f90]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-37ee4f90]:before{content:\"\\E601\"}.follow-section[data-v-37ee4f90]{background-color:transparent;text-align:center;color:#909090;box-shadow:none;overflow:visible}.follow-section .account-list[data-v-37ee4f90]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:1rem 0}.follow-section .account-list .icon[data-v-37ee4f90]{width:24px;margin-left:.5rem;margin-right:.5rem;cursor:pointer}.follow-section .account-list .wechat[data-v-37ee4f90]{position:relative}.follow-section .account-list .wechat:hover .qr-panel[data-v-37ee4f90]{opacity:1;-webkit-transform:rotateY(0deg);transform:rotateY(0deg)}.follow-section .account-list .wechat .qr-panel[data-v-37ee4f90]{position:absolute;background:#fff;width:10rem;top:100%;left:0;z-index:2;padding:.8rem 0 0;opacity:0;border:1px solid #ddd;-webkit-transform:rotateY(90deg);transform:rotateY(90deg)}.follow-section .account-list .wechat .qr[data-v-37ee4f90]{width:100%}.iconfont[data-v-360336b8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-360336b8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-360336b8]:before{content:\"\\E601\"}.more-section[data-v-360336b8]{background-color:transparent;text-align:center;color:#909090;font-size:1.1rem;box-shadow:none}.more-section .more-list[data-v-360336b8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:.4rem}.more-section .more-list .item[data-v-360336b8]:not(:last-child):after{content:\"\\B7\";margin:0 .4rem}.iconfont[data-v-56380f68]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-56380f68]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-56380f68]:before{content:\"\\E601\"}.link-section .link-list[data-v-56380f68]{padding:0}.link-section .item[data-v-56380f68]{position:relative}.link-section .item[data-v-56380f68]:hover{background-color:hsla(0,0%,85%,.1)}.link-section .link[data-v-56380f68]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem;height:100%}.link-section .icon[data-v-56380f68]{width:3rem;margin-right:.8rem}.link-section .title[data-v-56380f68]{position:relative;font-size:1.16rem;line-height:1;color:#333}.iconfont[data-v-c929dee6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-c929dee6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-c929dee6]:before{content:\"\\E601\"}.banner[data-v-c929dee6]{position:relative;font-size:0;cursor:pointer}.banner .banner-image[data-v-c929dee6]{width:100%;height:100%}.banner .ctrl-box .close-btn[data-v-c929dee6]{position:absolute;top:.5rem;right:.5rem;font-size:1rem;color:#909090;opacity:.5;display:none}.banner .ctrl-box .close-btn[data-v-c929dee6]:hover{opacity:1}.banner .ctrl-box .label[data-v-c929dee6]{position:absolute;right:10px;bottom:10px;line-height:36px;height:36px;font-size:20px;z-index:1;transform:scale(.5);-webkit-transform:scale(.5);transform-origin:right bottom;-webkit-transform-origin:right bottom;color:#fff;background-color:rgba(0,0,0,.2);border:1px solid #fff;border-radius:6px;padding-left:15px;padding-right:15px;font-weight:300}.banner .ctrl-box .label[data-v-c929dee6]:hover{background-color:rgba(0,0,0,.4)}.banner .ctrl-box .label:hover .inco[data-v-c929dee6]{display:inline-block}.banner .ctrl-box .label span[data-v-c929dee6]{vertical-align:top}.banner .ctrl-box .label .inco[data-v-c929dee6]{display:none}.banner:hover .ctrl-box .close-btn[data-v-c929dee6]{display:block}.app-link[data-v-fb64097a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.3rem}.app-link:hover .close-btn[data-v-fb64097a]{display:block}.qr-img[data-v-fb64097a]{margin-right:.5rem;width:4.167rem;height:4.167rem}.headline[data-v-fb64097a]{font-size:1.167rem;font-weight:600;color:#333}.desc[data-v-fb64097a]{margin-top:.5rem;font-size:1rem;color:#909090}.close-btn[data-v-fb64097a]{position:absolute;top:.5rem;right:.5rem;padding:.3rem .5rem;font-size:1rem;color:#999;opacity:.3;cursor:pointer;z-index:1;display:none}.close-btn[data-v-fb64097a]:hover{opacity:1}.iconfont[data-v-70a2cd6d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-70a2cd6d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-70a2cd6d]:before{content:\"\\E601\"}.sidebar-block[data-v-70a2cd6d]{position:relative;margin-bottom:1.5rem;border-radius:2px}.sidebar-block[data-v-70a2cd6d]:after{display:table;content:\"\";clear:both}.sidebar-block[data-v-70a2cd6d]:not(.pure){background-color:#fff}.sidebar-block:not(.pure) .block-title[data-v-70a2cd6d]{padding:1rem 1.3rem;font-size:1.16rem;color:#333;border-bottom:1px solid hsla(0,0%,59%,.1)}.slide-book[data-v-1f85cb5f]{position:relative;height:185px;overflow:hidden}.slide-book .item[data-v-1f85cb5f]{position:absolute}.fade-enter-active[data-v-1f85cb5f],.fade-leave-active[data-v-1f85cb5f]{position:absolute;left:0;width:100%;transition:all .25s ease}.fade-enter-to[data-v-1f85cb5f],.fade-leave[data-v-1f85cb5f]{-webkit-transform:translateX(0);transform:translateX(0)}.transition--prev .fade-leave-to[data-v-1f85cb5f]{-webkit-transform:translateX(100%);transform:translateX(100%)}.transition--next .fade-leave-to[data-v-1f85cb5f],.transition--prev .fade-enter[data-v-1f85cb5f]{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.transition--next .fade-enter[data-v-1f85cb5f]{-webkit-transform:translateX(100%);transform:translateX(100%)}.index-book-collect[data-v-1f85cb5f]{background-color:#fff;border-radius:2px;margin-bottom:1.5rem;overflow:hidden}.index-book-collect .header[data-v-1f85cb5f]{height:45px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-left:15px;padding-right:15px;border-bottom:1px solid #f6f6f6}.index-book-collect .header .title[data-v-1f85cb5f]{line-height:45px;padding-right:5px;font-size:14px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.index-book-collect .header .controllers[data-v-1f85cb5f]{height:12px;font-size:12px;color:#7d7d7d;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.index-book-collect .header .controllers .arrow[data-v-1f85cb5f]{cursor:pointer;line-height:1;width:5px;padding:0 6px}.index-book-collect .header .controllers .arrow[data-v-1f85cb5f]:hover{color:#007fff}.index-book-collect .book-newuser .newuser-title[data-v-1f85cb5f]{padding-left:15px;padding-right:15px;height:20px;margin-top:5px}.index-book-collect .book-newuser .newuser-title span[data-v-1f85cb5f]{float:left;display:block;margin-right:5px;color:#878c90}.index-book-collect .book-newuser .newuser-title[data-v-1f85cb5f]:after{content:\"\";display:block;height:0;border-bottom:1px solid #f5f5f5;padding-top:8px;overflow:hidden}.index-book-collect .book-newuser .giftbag[data-v-1f85cb5f]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:15px 15px 20px;cursor:pointer}.index-book-collect .book-newuser .giftbag img[data-v-1f85cb5f]{width:52px;display:block}.index-book-collect .book-newuser .giftbag .content-text[data-v-1f85cb5f]{margin-left:12px}.index-book-collect .book-newuser .giftbag .content-text .title[data-v-1f85cb5f]{font-size:14px;font-weight:700;margin-bottom:8px}.index-book-collect .book-newuser .giftbag .content-text .title .highlight[data-v-1f85cb5f]{color:#fc4544;margin-left:5px;margin-right:5px}.index-book-collect .book-newuser .giftbag .content-text .btn-giftbag[data-v-1f85cb5f]{width:60px;height:20px;color:#007fff;line-height:20px;border-radius:2px;font-size:12px;text-align:center;border:1px solid #007fff}.slide-book-list .item[data-v-133abdc5]{padding:10px 15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.slide-book-list .item .poster[data-v-133abdc5]{width:52px;height:72px;-ms-flex-negative:0;flex-shrink:0}.slide-book-list .item .poster .poster-img[data-v-133abdc5]{height:100%;width:100%}.slide-book-list .item[data-v-133abdc5]:hover{background-color:#f8f8f8}.slide-book-list .item:hover .img-box img[data-v-133abdc5]{-webkit-transform:translateZ(0);transform:translateZ(0)}.slide-book-list .item .content-text[data-v-133abdc5]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-left:10px}.slide-book-list .item .content-text .title[data-v-133abdc5]{color:#000;font-size:14px;line-height:1.3;font-weight:500}.slide-book-list .item .content-text .price[data-v-133abdc5]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-top:6px}.slide-book-list .item .content-text .price .new[data-v-133abdc5]{margin-right:6px;color:#fc4544}.slide-book-list .item .content-text .price .delete[data-v-133abdc5]{color:#878c90;text-decoration:line-through}.mobile-bottom-bar[data-v-00a4671b]{width:100%;height:4.6rem;background-color:#f8f9fa;border-top:1px solid #f1f1f1;position:fixed;bottom:0;left:0;display:none;z-index:100}.mobile-bottom-bar .bar-container[data-v-00a4671b]{width:960px;height:inherit;margin:auto;padding:0 1rem;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;box-sizing:border-box}.mobile-bottom-bar .bar-container .left[data-v-00a4671b],.mobile-bottom-bar .bar-container[data-v-00a4671b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.mobile-bottom-bar .bar-container .left img[data-v-00a4671b]{width:5rem;margin-right:.8rem}.mobile-bottom-bar .bar-container .left span[data-v-00a4671b]{font-size:1.1rem}.mobile-bottom-bar .bar-container .button[data-v-00a4671b]{position:relative;white-space:nowrap;margin-left:.8rem}.mobile-bottom-bar .bar-container .button .pop-up[data-v-00a4671b]{position:absolute;top:-3.5rem;right:0;background-color:#007fff;padding:.5rem 1.2rem;border-radius:3px;z-index:1}.mobile-bottom-bar .bar-container .button .pop-up[data-v-00a4671b]:after{content:\" \";position:absolute;bottom:-1.4rem;right:20%;border-width:.9rem;border-style:solid;border-top-color:#007fff;border-right-color:transparent;border-left-color:transparent;border-bottom-color:transparent}.mobile-bottom-bar .bar-container .button .pop-up .pop-up-content[data-v-00a4671b]{color:#fff}@media (max-width:600px){.mobile-bottom-bar[data-v-00a4671b]{display:block}.mobile-bottom-bar .bar-container[data-v-00a4671b]{width:100%}}.timeline-index-view.verify[data-v-1682589a]{margin-top:1.5rem}.timeline-index-view.v2 .list-header[data-v-1682589a]{padding-left:1.3rem;padding-right:1.3rem}.aside[data-v-1682589a]{position:absolute;top:0;right:0}.nav-list[data-v-1682589a]{position:relative}.nav-list .nav-item.right[data-v-1682589a]{position:absolute;top:0;right:0}.timeline-entry-list[data-v-1682589a],.user-action-nav[data-v-1682589a]{margin-right:21.667rem;background-color:#fff;border-radius:2px;box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.timeline-entry-list[data-v-1682589a]{margin-top:1.3rem}@media (max-width:700px){.user-action-nav[data-v-1682589a]{width:100%}.nav-item.right[data-v-1682589a]{display:none}.timeline-entry-list[data-v-1682589a]{width:100%}}.iconfont[data-v-2dd5b1da]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-2dd5b1da]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-2dd5b1da]:before{content:\"\\E601\"}.user-action-nav[data-v-2dd5b1da]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:1.16rem}.user-action-nav .nav-list[data-v-2dd5b1da],.user-action-nav[data-v-2dd5b1da]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-action-nav .nav-list .avatar[data-v-2dd5b1da]{width:50px;height:50px;border-radius:2px 0 0 2px}.user-action-nav .nav-list.left .nav-item[data-v-2dd5b1da]{padding:0 1.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-action-nav .nav-list.left .nav-item .icon[data-v-2dd5b1da]{margin-right:.3rem}.user-action-nav .nav-list.left a[data-v-2dd5b1da]{color:#007fff}.user-action-nav .nav-list.left a[data-v-2dd5b1da]:hover{color:#0371df}.user-action-nav .nav-list.right .nav-item[data-v-2dd5b1da]{padding-right:2rem}@media (max-width:600px){.user-action-nav[data-v-2dd5b1da]{display:none}}.index-aside[data-v-2b9fe4cd]{width:20rem;position:absolute;top:0;right:0;z-index:1}.index-aside.sticky .sticky-block[data-v-2b9fe4cd]{opacity:1;top:127px;z-index:5;pointer-events:all}.index-aside.sticky.top .sticky-block[data-v-2b9fe4cd]{top:67px}.sidebar-block[data-v-2b9fe4cd]{background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);border-radius:2px;margin-bottom:1.3rem;font-size:1.16rem;line-height:1.29;color:#333}.sidebar-block li[data-v-2b9fe4cd]{list-style:none}.sidebar-block.banner-block[data-v-2b9fe4cd]{overflow:hidden}.sidebar-block.banner-block .banner[data-v-2b9fe4cd]{height:200px}.sidebar-block.sticky-block[data-v-2b9fe4cd]{position:fixed;background-color:transparent;box-shadow:none;opacity:0;transition:all .2s;width:20rem;z-index:-1;top:67px;pointer-events:none}.sidebar-block.sticky-block .sticky-banner[data-v-2b9fe4cd]{height:200px;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);border-radius:2px;overflow:hidden}.sidebar-block.sticky-block .sticky-banner[data-v-2b9fe4cd]:not(:last-child){margin-bottom:1.3rem}.sidebar-block.user-block .user-block-header[data-v-2b9fe4cd]{padding:1rem 1.3rem;border-bottom:1px solid hsla(0,0%,59%,.1)}.sidebar-block.user-block .item .link[data-v-2b9fe4cd]{padding:1rem 1.3rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.sidebar-block.user-block .item .link[data-v-2b9fe4cd]:hover{background-color:hsla(0,0%,85%,.1)}.sidebar-block.user-block .item .link .avatar[data-v-2b9fe4cd]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:3rem;height:3rem;border-radius:50%;margin-right:.8rem}.sidebar-block.user-block .item .link .user-info[data-v-2b9fe4cd]{overflow:hidden}.sidebar-block.user-block .item .link .username[data-v-2b9fe4cd]{color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-block.user-block .item .link .position[data-v-2b9fe4cd]{color:#909090;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-block.link-block .link-list[data-v-2b9fe4cd]{padding:0}.sidebar-block.link-block .item[data-v-2b9fe4cd]{position:relative}.sidebar-block.link-block .item[data-v-2b9fe4cd]:hover{background-color:hsla(0,0%,85%,.1)}.sidebar-block.link-block .link[data-v-2b9fe4cd]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem;height:100%}.sidebar-block.link-block .icon[data-v-2b9fe4cd]{width:3rem;margin-right:.8rem}.sidebar-block.link-block .title[data-v-2b9fe4cd]{position:relative;font-size:1.16rem;line-height:1;color:#333}.sidebar-block.more-block[data-v-2b9fe4cd]{background-color:transparent;box-shadow:none}.sidebar-block.more-block .more-list[data-v-2b9fe4cd]{font-size:1rem;line-height:1.6;color:#9aa3ab}.sidebar-block.more-block .more-list[data-v-2b9fe4cd]:after{display:table;content:\"\";clear:both}.sidebar-block.more-block .more-list .item[data-v-2b9fe4cd]{float:left}.sidebar-block.more-block .more-list .item[data-v-2b9fe4cd]:not(:last-child):after{content:\"\\B7\";margin:0 .5rem;color:#c6cfda}@media (max-width:700px){.index-aside[data-v-2b9fe4cd]{display:none}}.book-list .book[data-v-3b78d59f]{cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;padding:15px}.book-list .book[data-v-3b78d59f]:hover{background-color:#f8f8f8}.book-list .book .poster[data-v-3b78d59f]{margin-right:10px;-ms-flex-negative:0;flex-shrink:0;height:72px;width:52px;box-shadow:0 2px 7px 0 rgba(0,0,0,.26)}.book-list .book .poster .poster-img[data-v-3b78d59f]{width:100%;height:100%}.book-list .book .info[data-v-3b78d59f]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.book-list .book .info .title[data-v-3b78d59f]{max-height:52px;font-size:14px;font-weight:500;line-height:1.3;margin-bottom:5px;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:3}.book-list .book .info .bought[data-v-3b78d59f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.book-list .book .info .bought .num[data-v-3b78d59f]{font-size:12px;color:#878c90}.book-list .book .info .bought .try-read[data-v-3b78d59f]{height:20px;color:#fff;font-size:12px;padding-left:5px;line-height:20px;padding-right:5px;border-radius:2px;background-color:#007fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-list .book .info .bought .try-read[data-v-3b78d59f]:after{width:0;height:0;content:\"\";display:inline-block;border-style:solid;border-width:3px 0 3px 3px;margin-left:3px;border-color:transparent transparent transparent #fff}.verify-email-alert[data-v-28551526]{padding:.5rem 1rem;font-size:1.1rem;line-height:1.5;color:#333;background-color:#e3eff9}.content[data-v-28551526]{margin-right:4rem;text-align:center}.btn[data-v-28551526]{color:#007fff;cursor:pointer}.close-btn[data-v-28551526]{float:right}.iconfont[data-v-33ad6c76]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-33ad6c76]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-33ad6c76]:before{content:\"\\E601\"}.getting-started[data-v-33ad6c76]{overflow-x:hidden;background-color:#007fff}#cov[data-v-33ad6c76]{position:fixed;width:100%;height:100%;left:0;top:0}.header[data-v-33ad6c76]{padding-top:54px}.header .title[data-v-33ad6c76]{font-size:36px;font-weight:600;color:#fff;text-align:center}.header .subtitle[data-v-33ad6c76]{font-size:14px;color:#fff;margin-top:20px;text-align:center}.fade-enter-active[data-v-33ad6c76]{transition:all 1s}.fade-enter[data-v-33ad6c76]{-webkit-transform:translateX(10%);transform:translateX(10%);opacity:0}.fade-leave[data-v-33ad6c76]{-webkit-transform:translateX(-10%);transform:translateX(-10%);opacity:0}.footer[data-v-33ad6c76]{background-color:#f8f9fa;opacity:.98;width:100%;height:85px;box-sizing:border-box;padding:23px 0;position:fixed;bottom:0;z-index:10}.footer button[data-v-33ad6c76]{width:206px;height:38px}.footer button.loading[data-v-33ad6c76]{background-color:#d2d2d2;color:#fff}.footer button.loading span[data-v-33ad6c76]:before{-webkit-animation:g 1s infinite linear;animation:g 1s infinite linear}.footer button[data-v-33ad6c76]:disabled{background-color:#ddd;color:#fff}@-webkit-keyframes g{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.align-center[data-v-33ad6c76]{text-align:center}.tag-wrap[data-v-6de1943c]{position:relative;min-height:100vh}.tag-list[data-v-6de1943c]{width:540px;max-width:100%;margin-left:auto;margin-right:auto;margin-top:45px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}.iconfont[data-v-3bfc0762]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3bfc0762]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3bfc0762]:before{content:\"\\E601\"}.action-box .subscribe-btn.subscribed[data-v-3bfc0762]:hover{background-color:#37c700}.tag[data-v-3bfc0762]{width:160px;min-width:160px;background-color:#fff;border:1px solid #f1f1f1;transition:border-color .3s;text-align:center;padding:1rem 0;margin-bottom:20px;border-radius:2px}.thumb[data-v-3bfc0762]{height:32px;margin:.5em .5em 1em}.title[data-v-3bfc0762]{font-size:16px;line-height:2rem;color:#333}.meta-box[data-v-3bfc0762]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.1rem;color:#909090}.meta-box .meta[data-v-3bfc0762]{line-height:2rem}.meta-box .meta.article[data-v-3bfc0762]{margin-left:.8rem}.users[data-v-382ff5d0]{position:relative;min-height:100vh}.users-list[data-v-382ff5d0]{width:528px;margin:45px auto 115px;padding:45px;box-sizing:border-box;background-color:#fff}.iconfont[data-v-dcba894c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-dcba894c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-dcba894c]:before{content:\"\\E601\"}.users[data-v-dcba894c]{position:relative;min-height:100vh}img[data-v-dcba894c]{-o-user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.right[data-v-dcba894c]{float:right}.category-checkbox[data-v-dcba894c]{display:inline-block;width:22px;height:22px;cursor:pointer;background:url(https://lc-mhke0kuv.cn-n1.lcfile.com/dc932a27b71491c7.png) 50%/cover}.category-checkbox.true[data-v-dcba894c]{background:url(https://lc-mhke0kuv.cn-n1.lcfile.com/5ef5d412784ff76f.png) 50%/cover}.category[data-v-dcba894c]{background-color:#fff}.category .title[data-v-dcba894c]{font-size:16px;font-weight:600;color:#333;margin:20px 0;display:inline-block}.category .all[data-v-dcba894c]{float:right;position:relative;margin-top:1em;font-size:16px;margin-right:10px}.category .all .selector[data-v-dcba894c]{font-size:16px;margin-left:.5em;position:relative}.category ul[data-v-dcba894c]{padding:0}.category ul li[data-v-dcba894c]{position:relative;list-style:none;padding:16px 0;border-bottom:1px solid #f1f1f1}.category ul li[data-v-dcba894c]:first-child{border-top:1px solid #f1f1f1}.category ul li .avatar[data-v-dcba894c]{width:44px;height:44px;border-radius:22px;float:left;margin-right:17px;display:inline-block;border:0}.category ul li .wrap[data-v-dcba894c]{margin-left:60px;width:340px;max-width:60%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-height:47px}.category ul li .wrap .name[data-v-dcba894c]{padding-top:4px;padding-bottom:4px;font-size:14px;font-weight:600;color:#333;display:inline-block}.category ul li .wrap .description[data-v-dcba894c]{display:block;font-size:14px;color:#666}.category ul li .selector[data-v-dcba894c]{position:absolute;right:10px;top:25px}.reset-password-form[data-v-c608f536]{margin:6rem auto;width:40rem;max-width:100%}.reset-password-form[data-v-9895192a]{padding:4rem 3rem;font-size:1.16rem;background-color:#fff;border-radius:2px;box-sizing:border-box}.title[data-v-9895192a]{margin:0;font-size:2rem;text-align:center}.nav[data-v-9895192a]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:3rem;background-color:#f8f9fa;border-bottom:1px solid #f1f1f1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nav .nav-item[data-v-9895192a]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:.8rem 1rem;text-align:center;cursor:pointer}.nav .nav-item[data-v-9895192a]:hover{color:#007fff}.nav .nav-item.active[data-v-9895192a]{color:#007fff;border-bottom:2px solid currentColor}.form-body[data-v-9895192a]{margin-top:3rem;text-align:center}.input[data-v-9895192a]{margin:0;padding:.5rem 0;font-size:1.1em;border:none;border-bottom:1px solid #eee;outline:none}.input.full-width[data-v-9895192a]{width:100%}.btn[data-v-9895192a]{padding:.8rem 1.6rem;color:#fff;background-color:#007fff;border-radius:2px;border:none;outline:none}.btn[data-v-9895192a]:disabled{background-color:#999;cursor:default}.index-link[data-v-9895192a]{display:inline-block;margin:1.5rem auto 0;color:#007fff;text-decoration:none}.input-group[data-v-9895192a]:not(:first-child){margin-top:2rem}.submit-btn[data-v-9895192a]{margin-top:3rem;width:100%}.panel[data-v-9895192a]{position:relative}.panel .success-message[data-v-9895192a]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:3rem 0;background-color:#fff;z-index:1}.panel .success-message[data-v-9895192a],.phone-panel .vcode-input-group[data-v-9895192a]{display:-webkit-box;display:-ms-flexbox;display:flex}.phone-panel .vcode-input-group .vcode-input[data-v-9895192a]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.phone-panel .vcode-input-group .send-vcode-btn[data-v-9895192a]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:1rem}.image-input-group[data-v-9895192a]{display:-webkit-box;display:-ms-flexbox;display:flex}.image-input-group .input[data-v-9895192a]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.image-input-group .img-vcode[data-v-9895192a]{width:160px;height:40px;border:1px solid #eee;position:relative;z-index:0;margin-left:1rem}.image-input-group .img-vcode span[data-v-9895192a]{position:absolute;z-index:-1;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.me-panel[data-v-6af367f8]{margin-bottom:49px}.me-panel .info[data-v-6af367f8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 20px;margin-top:15px;background-color:#fff}.me-panel .info .hero .avatar[data-v-6af367f8]{width:55px;height:55px;border-radius:50%}.me-panel .info .message[data-v-6af367f8]{padding-left:20px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.me-panel .info .message .username[data-v-6af367f8]{font-size:16px;font-weight:400}.me-panel .info .message .desc[data-v-6af367f8]{color:#666}.me-panel .list[data-v-6af367f8]{margin-top:15px;margin-bottom:15px}.me-panel .list .item[data-v-6af367f8]{background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:15px;padding-right:15px;height:45px;line-height:45px;position:relative}.me-panel .list .item[data-v-6af367f8]:not(:first-child):before{content:\"\";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #ddd;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.me-panel .list .item .text[data-v-6af367f8]{font-size:16px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.me-panel .list .item .total[data-v-6af367f8]{color:#7f8389;-ms-flex-negative:0;flex-shrink:0;font-size:14px}.me-panel .list .item.message .total[data-v-6af367f8]{border-radius:10px;background-color:red;color:#fff;padding-left:6px;padding-right:6px;height:18px;line-height:18px}.me-panel .logout[data-v-6af367f8]{background-color:#fff;line-height:45px;height:45px;text-align:center;font-size:16px}.book-sticky-footer[data-v-af4288b0]{position:fixed;left:0;bottom:0;width:100%;height:50px;z-index:100;background-color:#fff;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.book-sticky-footer[data-v-af4288b0]:before{content:\" \";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #ddd;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);z-index:2}.book-sticky-footer .box[data-v-af4288b0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-sticky-footer .box .item[data-v-af4288b0]{padding-top:5px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:0;flex-basis:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.book-sticky-footer .box .item .icon[data-v-af4288b0]{margin-left:auto;margin-right:auto;width:25px;height:25px}.book-sticky-footer .box .item .icon .active[data-v-af4288b0]{display:none}.book-sticky-footer .box .item img[data-v-af4288b0]{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}.book-sticky-footer .box .item.router-link-exact-active .icon .normal[data-v-af4288b0]{display:none}.book-sticky-footer .box .item.router-link-exact-active .icon .active[data-v-af4288b0]{display:block}.book-sticky-footer .box .item.router-link-exact-active .title[data-v-af4288b0]{color:#007fff}.book-sticky-footer .box .item .title[data-v-af4288b0]{font-size:12px;margin-top:2px}.iconfont[data-v-defc1ee6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-defc1ee6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-defc1ee6]:before{content:\"\\E601\"}.wechat-quick-login[data-v-defc1ee6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.wechat-quick-login .quick-box[data-v-defc1ee6]{max-width:100%;min-width:280px;margin-left:10px;margin-top:-20px;margin-right:10px;background-color:#fff;border-radius:2px;box-sizing:border-box}.wechat-quick-login .quick-box .header[data-v-defc1ee6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:18px;font-weight:400;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:20px 20px 0}.wechat-quick-login .quick-box .header .desc[data-v-defc1ee6]{margin-top:5px;font-size:15px;color:#888}.wechat-quick-login .quick-box .auth-box[data-v-defc1ee6]{padding:0 20px 5px;margin-top:10px}.wechat-quick-login .quick-box .auth-box .auth-btn[data-v-defc1ee6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px;color:#fff;height:45px;border-radius:2px;font-size:14px;font-size:16px;font-weight:300}.wechat-quick-login .quick-box .auth-box .auth-btn img[data-v-defc1ee6]{display:block;width:22px;margin-right:10px}.wechat-quick-login .quick-box .auth-box .auth-btn.wx[data-v-defc1ee6]{background-color:#09bb07}.wechat-quick-login .quick-box .auth-box .auth-btn.jj[data-v-defc1ee6]{background-color:#007fff}.wechat-quick-login .quick-box .footer[data-v-defc1ee6]{height:45px;line-height:45px;color:#555;font-size:18px;text-align:center;border-top:1px solid #e5e5e5}.bought-index[data-v-0380ee18]{min-height:100vh;box-sizing:border-box;padding-bottom:50px;position:relative;margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom)}.books-list[data-v-0380ee18]{width:100%;max-width:700px;margin-right:auto;margin-left:auto;box-shadow:0 1px 3px 0 rgba(4,5,13,.23)}.book-empty[data-v-0380ee18]{width:100%;position:absolute;left:0;top:0;bottom:0;padding-bottom:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-empty .txt[data-v-0380ee18]{text-align:center;color:gray;margin-top:25px;margin-bottom:25px}.book-empty .buy[data-v-0380ee18]{padding-left:80px;padding-right:80px}.book-unlogined[data-v-0380ee18]{text-align:center;font-size:16px;padding-top:50px}.book-unlogined .link[data-v-0380ee18]{text-decoration:underline;color:#007fff}.iconfont[data-v-37aa673d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-37aa673d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-37aa673d]:before{content:\"\\E601\"}.item[data-v-37aa673d]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:25px;box-sizing:border-box;background-color:#fff;position:relative}.item[data-v-37aa673d]:after{display:table;content:\"\";clear:both}.item[data-v-37aa673d]:not(:last-child){border-bottom:1px solid #e6e8e8}.item[data-v-37aa673d]:hover{background-color:#f7f9f9}.poster[data-v-37aa673d]{width:100px;height:140px;-ms-flex-negative:0;flex-shrink:0;box-shadow:3px 4px 12px 0 rgba(0,0,0,.2);overflow:hidden;background-color:#ccc}.poster .poster-img[data-v-37aa673d]{height:100%;width:100%}.info[data-v-37aa673d]{position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;box-sizing:border-box;font-size:14px;color:#2e3135;padding-left:22px}.info .title[data-v-37aa673d]{color:inherit;font-size:20px;font-weight:400}.info .title[data-v-37aa673d]:hover{color:#007fff}.info .title .presale[data-v-37aa673d]{display:inline-block;vertical-align:middle;padding-left:6px;padding-right:6px;height:20px;margin-top:-3px;line-height:20px;color:#fff;font-size:12px;cursor:default;margin-right:8px;border-radius:2px;background-color:#ed7b11}.info .desc[data-v-37aa673d]{margin-top:5px;line-height:20px;height:20px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;color:#71777c}.info .author[data-v-37aa673d]{margin-top:6px;overflow:hidden;white-space:nowrap}.info .author .author-info[data-v-37aa673d],.info .author[data-v-37aa673d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.info .author .author-info[data-v-37aa673d]{-ms-flex-negative:0;flex-shrink:0}.info .author .user[data-v-37aa673d]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#000}.info .author .hero[data-v-37aa673d]{width:26px;height:26px;border-radius:50%;margin-right:8px;background-position:50%;background-size:cover;background-repeat:no-repeat}.info .author .name[data-v-37aa673d]{color:#333}.info .author .author-desc[data-v-37aa673d]{color:#71777c;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info .author .author-desc .selfDescription[data-v-37aa673d]{margin-left:10px;margin-right:10px}.info .other[data-v-37aa673d]{margin-top:6px;display:-webkit-box;display:-ms-flexbox;display:flex}.info .other .price[data-v-37aa673d],.info .other[data-v-37aa673d]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.info .other .price[data-v-37aa673d]{color:#ed7b11;font-size:18px;margin-right:15px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.info .other .price .yuanjia[data-v-37aa673d]{text-decoration:line-through;margin-left:5px;font-size:14px;color:#aaa}.info .other .price.bought[data-v-37aa673d]{font-size:14px}.info .other .presale[data-v-37aa673d]{display:none}.info .other span.message[data-v-37aa673d]{opacity:.6;font-size:13px;color:#71777c}.info .other span.message.presale[data-v-37aa673d]{color:#ed7b11}.info .other span.message[data-v-37aa673d]:not(:last-child):after{content:\"\\B7\";color:#71777c;margin-left:5px;margin-right:5px}.info .footer-bar[data-v-37aa673d]{height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.m-aside[data-v-37aa673d]{min-width:80px;margin-left:10px;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:center;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;display:none;z-index:3}.m-aside .price[data-v-37aa673d]{height:30px;line-height:30px;padding-left:15px;padding-right:15px;border-radius:15px;background-color:#f0f7ff;font-size:14px;font-weight:500;text-align:center;color:#07f;position:relative;z-index:2}.m-aside .price.bought[data-v-37aa673d]{background-color:initial;color:#b8b8b8}.m-aside .price .tooltip[data-v-37aa673d]{right:0;top:calc(100% + 5px)}.m-aside .price .tooltip[data-v-37aa673d]:before{right:30px}.more[data-v-37aa673d]{height:30px;-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.more .more-list[data-v-37aa673d]{position:absolute;top:100%;right:0;min-width:8rem;white-space:nowrap;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.more .more-list[data-v-37aa673d]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.more .more-list .item[data-v-37aa673d]{padding:.5rem .9rem}.more .more-list .item[data-v-37aa673d]:hover{background-color:#f7f8fa}.more.open .more-list[data-v-37aa673d]{display:block}@media (max-width:700px){.info .full-link[data-v-37aa673d]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:1}.info .recommend-award[data-v-37aa673d],.more[data-v-37aa673d]{display:none}.info.hasSale[data-v-37aa673d]{padding-bottom:0}.info .title .presale[data-v-37aa673d]{display:none}.info .other .messages .presale[data-v-37aa673d]{display:inline-block}.m-aside[data-v-37aa673d]{display:block}.item[data-v-37aa673d]{padding:16px 14px}.item[data-v-37aa673d]:not(:last-child){border-bottom:none}.item[data-v-37aa673d]:not(:last-child):before{content:\" \";position:absolute;left:0;bottom:0;right:0;height:0;border-bottom:1px solid #e6e8e8;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);z-index:2}.item .poster[data-v-37aa673d]{width:52px;height:72px}.item .info[data-v-37aa673d]{padding-left:16px}.item .info .title[data-v-37aa673d]{font-size:16px;font-weight:700}.item .info .author-desc[data-v-37aa673d],.item .info .desc[data-v-37aa673d],.item .info .hero[data-v-37aa673d],.item .info .price[data-v-37aa673d]{display:none}.item .other[data-v-37aa673d]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.item .footer-bar[data-v-37aa673d],.item .other .read-duration[data-v-37aa673d]{display:none}}.tooltip[data-v-07c2587c]{cursor:pointer;min-height:20px;line-height:18px;padding:2px 6px;border-radius:2px;background-color:#ff5e41;color:#fff;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;position:absolute}.tooltip.left[data-v-07c2587c]:before{left:20px;border-width:0 5px 5px}.tooltip.left[data-v-07c2587c]:before,.tooltip.right[data-v-07c2587c]:before{content:\"\";position:absolute;top:-5px;width:0;height:0;border-color:transparent transparent #ff5e41;border-style:solid}.tooltip.right[data-v-07c2587c]:before{right:20px;border-width:0 3px 5px}.tooltip .pre-text[data-v-07c2587c]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.tooltip .pre-text img.gift[data-v-07c2587c]{width:16px;margin-right:3px}.tooltip .pre-text.is-count-down[data-v-07c2587c]:after{content:\"\\B7\";display:inline-block;vertical-align:middle;padding-left:5px;padding-right:5px}.tooltip .count-down[data-v-07c2587c]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.tooltip .count-down .ms[data-v-07c2587c]{min-width:20px;display:inline-block}@media (max-width:640px){.break-text[data-v-07c2587c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.break-text .pre-text[data-v-07c2587c]:after{display:none}}.fade-enter-active[data-v-d7a82ec8],.fade-leave-active[data-v-d7a82ec8]{position:absolute;left:0;width:100%;transition:all .25s ease}.fade-enter-to[data-v-d7a82ec8],.fade-leave[data-v-d7a82ec8]{-webkit-transform:translateZ(0);transform:translateZ(0)}.transition--prev .fade-leave-to[data-v-d7a82ec8]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.transition--next .fade-leave-to[data-v-d7a82ec8],.transition--prev .fade-enter[data-v-d7a82ec8]{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.transition--next .fade-enter[data-v-d7a82ec8]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.book-wap-section[data-v-d7a82ec8]{overflow:hidden}.book-body[data-v-d7a82ec8]{position:relative;width:100%;min-height:100vh;box-sizing:border-box;margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom);padding-bottom:50px}.book-content[data-v-d7a82ec8]{width:100%}.bottom-mobile-buy[data-v-d7a82ec8]{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:pointer;position:fixed;bottom:60px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:10;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;background-color:#007fff;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 4px 10px rgba(0,0,0,.15);width:178px;height:40px;border-radius:40px;margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom)}.iconfont[data-v-4a7af208]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-4a7af208]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-4a7af208]:before{content:\"\\E601\"}.book-handle[data-v-4a7af208]{position:fixed;width:100%;left:50%;bottom:0;height:50px;background-color:#fff;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.book-handle[data-v-4a7af208]:before{content:\"\";position:absolute;left:0;right:0;top:0;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);border-top:1px solid #ddd}.book-handle .step-btn[data-v-4a7af208]{-webkit-appearance:none;cursor:pointer;position:absolute;top:0;z-index:10;width:30px;height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.book-handle .step-btn.step-btn--prev[data-v-4a7af208]{left:30px}.book-handle .step-btn.step-btn--prev[data-v-4a7af208]:before{content:\"\";width:0;height:0;border-width:8px 10px 8px 0;border-color:transparent #007fff transparent transparent;border-style:solid}.book-handle .step-btn.step-btn--prev[data-v-4a7af208]:disabled:before{border-color:transparent #ddd transparent transparent}.book-handle .step-btn.step-btn--next[data-v-4a7af208]{right:30px}.book-handle .step-btn.step-btn--next[data-v-4a7af208]:before{content:\"\";width:0;height:0;border-width:8px 0 8px 10px;border-color:transparent transparent transparent #007fff;border-style:solid}.book-handle .step-btn.step-btn--next[data-v-4a7af208]:disabled:before{border-color:transparent transparent transparent #ddd}.book-handle .menu-btn[data-v-4a7af208]{width:18px}.book-handle .menu-btn img[data-v-4a7af208]{display:block;width:100%}.iconfont[data-v-decff8c4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-decff8c4]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-decff8c4]:before{content:\"\\E601\"}.iconfont[data-v-5d06e5a3]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5d06e5a3]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5d06e5a3]:before{content:\"\\E601\"}.buying-guide[data-v-5d06e5a3]{max-width:800px;margin-left:auto;margin-right:auto;padding:20px 60px 40px;box-shadow:1px 1px 8px rgba(0,0,0,.15);background-color:#fff;border-radius:2px;box-sizing:border-box;min-height:calc(100vh - 160px);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.buying-guide.buying-guide--m[data-v-5d06e5a3]{min-height:calc(100vh - 50px)}.buying-guide .buying-inner[data-v-5d06e5a3]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;margin-right:auto;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;z-index:0}.buying-guide .buying-inner .poster[data-v-5d06e5a3]{margin-bottom:40px;position:relative}.buying-guide .buying-inner .poster[data-v-5d06e5a3]:after{content:\"\";position:absolute;top:0;left:50%;width:86%;-webkit-transform:translateX(-50%);transform:translateX(-50%);height:100%;box-shadow:0 18px 40px rgba(52,82,110,.5)}.buying-guide .buying-inner .poster .thumb[data-v-5d06e5a3]{border-radius:2px;overflow:hidden;width:150px;height:210px;position:relative;z-index:2}.buying-guide .buying-inner .title[data-v-5d06e5a3]{font-size:18px;margin-bottom:12px}.buying-guide .buying-inner .desc[data-v-5d06e5a3]{font-size:15px;margin-bottom:16px;color:#7d7d7d}.buying-guide .buying-inner .button-buy[data-v-5d06e5a3]{font-size:16px}@media (max-width:475px){.buying-guide[data-v-5d06e5a3]{padding:20px}}.iconfont[data-v-67d20023]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-67d20023]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-67d20023]:before{content:\"\\E601\"}.section-writing[data-v-67d20023]{max-width:800px;margin-left:auto;margin-right:auto;padding:20px 60px 40px;box-shadow:1px 1px 8px rgba(0,0,0,.15);background-color:#fff;border-radius:2px;box-sizing:border-box;min-height:calc(100vh - 160px);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.section-writing.section-writing--m[data-v-67d20023]{min-height:calc(100vh - 50px)}.section-writing .writing-inner[data-v-67d20023]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;margin-right:auto;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;z-index:0}.section-writing .writing-inner .poster[data-v-67d20023]{margin-bottom:50px;position:relative}.section-writing .writing-inner .poster[data-v-67d20023]:after{content:\"\";position:absolute;top:0;left:50%;width:86%;-webkit-transform:translateX(-50%);transform:translateX(-50%);height:100%;box-shadow:0 18px 40px rgba(52,82,110,.5)}.section-writing .writing-inner .poster .thumb[data-v-67d20023]{border-radius:2px;overflow:hidden;width:150px;height:210px;position:relative;z-index:2}.section-writing .writing-inner .title[data-v-67d20023]{font-size:18px;margin-bottom:12px}@media (max-width:475px){.section-writing[data-v-67d20023]{padding:20px}}.iconfont[data-v-41acfafa]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-41acfafa]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-41acfafa]:before{content:\"\\E601\"}.section-page[data-v-41acfafa]{max-width:800px;margin-left:auto;margin-right:auto;padding:20px 60px 40px;box-shadow:1px 1px 8px rgba(0,0,0,.15);background-color:#fff;border-radius:2px;box-sizing:border-box}.section-page img[data-v-41acfafa]{max-width:100%}.section-page .comment-box[data-v-41acfafa]{padding-bottom:1rem}.book-comments[data-v-41acfafa]{padding-top:30px}.book-comments .box-title[data-v-41acfafa]{margin:1.3rem 0;text-align:center;color:#909090;font-weight:500;font-size:16px}@media (max-width:475px){.section-page[data-v-41acfafa]{padding:20px}}.iconfont[data-v-efcd2e56]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-efcd2e56]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-efcd2e56]:before{content:\"\\E601\"}.avatar[data-v-efcd2e56]{width:3rem;height:3rem}.comment-form[data-v-efcd2e56]{position:relative;padding:1.3rem 1.3rem 1.3rem 6rem;background-color:#f8f9fa;border:1px solid #f1f1f1;border-radius:4px}.comment-form.unauthorized[data-v-efcd2e56]{padding:0}@media (max-width:600px){.comment-form[data-v-efcd2e56]{padding:1rem}}.comment-form .avatar[data-v-efcd2e56]{position:absolute;left:2rem;top:1.3rem;width:3.4rem;height:3.4rem;border-radius:50%}@media (max-width:600px){.comment-form .avatar[data-v-efcd2e56]{display:none}}.comment-form .content-input[data-v-efcd2e56]{height:3.4rem;line-height:1.9rem;border-radius:4px;padding:.6rem;border:1px solid #ddd;font-size:1.3rem}.comment-form .content-input[data-v-efcd2e56]:hover{border-color:#007fff}.comment-form .action-box[data-v-efcd2e56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-top:1rem}.comment-form .action-box .image-uploader[data-v-efcd2e56]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-right:1rem;font-size:1.334rem}.comment-form .action-box .submit-box[data-v-efcd2e56]{white-space:nowrap}.comment-form .action-box .submit-text[data-v-efcd2e56]{margin-right:.8rem;color:#909090}@media (max-width:600px){.comment-form .action-box .submit-text[data-v-efcd2e56]{display:none}}.comment-form .action-box .submit-btn[data-v-efcd2e56]{padding:0;width:6rem;height:3rem;font-size:1.3rem}.unauthorized-panel[data-v-efcd2e56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:2.5rem 1rem}.unauthorized-panel .authorize-btn[data-v-efcd2e56]{padding:.5rem 1rem;font-size:1rem;color:#007fff;background-color:transparent;border:1px solid currentColor;border-radius:3px}.unauthorized-panel .authorize-btn[data-v-efcd2e56]:hover{color:#005eee}.unauthorized-panel .placeholder[data-v-efcd2e56]{margin-left:1.3rem;font-size:1.167rem;font-weight:500;color:#4a4a4a}.submitting-mask[data-v-efcd2e56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;color:#666;background-color:hsla(0,0%,100%,.8);z-index:1}.input[data-v-54e3f196]{display:none}.preview-box[data-v-54e3f196]{display:inline-block;position:relative;max-height:16rem;max-width:16rem}.preview-box .preview[data-v-54e3f196]{max-width:100%;max-height:100%}.preview-box .clean-btn[data-v-54e3f196]{position:absolute;top:1rem;right:1rem;padding:0;line-height:1;color:#fff;text-shadow:#000 0 0 2px;background-color:transparent;opacity:.8}.preview-box .clean-btn[data-v-54e3f196]:hover{opacity:1}.upload-btn[data-v-54e3f196]{padding:0;height:3rem;color:#909090;background-color:transparent;cursor:pointer}.upload-btn[data-v-54e3f196]:hover{color:#333}.item[data-v-51163f89]{position:relative;padding-top:1.5rem;padding-bottom:1.5rem}.item[data-v-51163f89]:not(:last-of-type):not(.highlight):before{content:\"\";position:absolute;left:3.5rem;bottom:0;right:0;border-bottom:1px solid #f5f5f5}.more-btn[data-v-51163f89]{padding:1.8rem 0;font-size:1.08rem;text-align:center;color:#07f;cursor:pointer}.more-btn[data-v-51163f89]:hover{color:#05d}.more-btn.loading[data-v-51163f89]{color:#ddd;cursor:default}.iconfont[data-v-7f6a837b]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-7f6a837b]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-7f6a837b]:before{content:\"\\E601\"}.comment[data-v-7f6a837b]{position:relative;overflow:hidden}.comment:hover .remove-btn[data-v-7f6a837b]{display:inline-block}.avatar[data-v-7f6a837b]{position:absolute;top:0;left:0;width:2.7rem;height:2.7rem;cursor:pointer;border-radius:50%}.content-box[data-v-7f6a837b]{margin:.5rem 0 0 3.5rem}.user-info[data-v-7f6a837b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;-ms-flex-wrap:wrap;flex-wrap:wrap}.user-info .username[data-v-7f6a837b]{font-size:1.2rem;font-weight:600;color:#333;margin-right:.6rem}.user-info .position[data-v-7f6a837b]{font-size:1rem;color:#909090;max-width:220px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content[data-v-7f6a837b]{margin:.3rem 0 .5rem;font-size:1.2rem;line-height:1.7;color:#333}.content .content-html[data-v-7f6a837b]{margin-right:.5em;white-space:pre-wrap}.content .show-all[data-v-7f6a837b]{color:#6799cd;white-space:nowrap;cursor:pointer}.content .username[data-v-7f6a837b]{color:#007fff}.footer[data-v-7f6a837b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;color:#909090}.footer .like-btn[data-v-7f6a837b]{padding:.3rem .5rem;background-color:hsla(0,0%,95%,.8);color:#909090;font-size:1rem;margin-right:1rem;border-radius:2px}.footer .like-btn.liked[data-v-7f6a837b]{color:#007fff;background-color:rgba(0,127,255,.1)}.footer .sub-comment-btn[data-v-7f6a837b]{position:relative;margin-right:15px;font-size:20px;height:30px;color:#909090;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.footer .sub-comment-btn[data-v-7f6a837b]:before{content:\"\";display:inline-block;width:16px;height:16px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTYgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5PdmFsIDI8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8ZyBpZD0iV2ViX+ayuOeCueivpuaDhemhtV/lsZXlvIDor4TorroiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODQuMDAwMDAwLCAtNTg2LjAwMDAwMCkiIHN0cm9rZT0iIzkwOTA5MCI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC05IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzODQuMDAwMDAwLCA1ODUuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOCwxNS41MTg1MTg1IEMxMS44NjU5OTMyLDE1LjUxODUxODUgMTUsMTIuNzE2MTUyNyAxNSw5LjI1OTI1OTI2IEMxNSw1LjgwMjM2NTgzIDExLjg2NTk5MzIsMyA4LDMgQzQuMTM0MDA2NzUsMyAxLDUuODAyMzY1ODMgMSw5LjI1OTI1OTI2IEMxLDEwLjYyMjc3NTggMS40ODc1ODMyNiwxMS44ODQ0NjIxIDIuMzE1MzQ4OTQsMTIuOTEyNTE1MyBDMi40MzYzOTI3OCwxMy4wNjI4NDcxIDEuOTMzMzMzMzMsMTYgMS45MzMzMzMzMywxNiBDMS45MzMzMzMzMywxNiA0Ljk4MDgwMzYsMTQuOTA3OTg0NyA0Ljk4MDgwMzYsMTQuOTA3OTg0NyBDNS45MTE4NTcyOSwxNS4yNjMyNzkyIDYuOTE4ODQxMDQsMTUuNTE4NTE4NSA4LDE1LjUxODUxODUgWiIgaWQ9Ik92YWwtMiI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);background-repeat:no-repeat;background-position:50%;background-size:contain;margin-right:5px;vertical-align:middle}.footer .sub-comment-btn .title[data-v-7f6a837b]{font-size:13px}.footer .sub-comment-btn .sub-comment--arrow[data-v-7f6a837b]{position:absolute;top:100%;left:0;width:100%}.footer .sub-comment-btn .sub-comment--arrow[data-v-7f6a837b]:before{content:\"\";position:absolute;left:30px;border-width:0 9px 10px;border-style:solid;border-color:transparent transparent #eaeaea;top:100%}.footer .sub-comment-btn .sub-comment--arrow[data-v-7f6a837b]:after{content:\"\";position:absolute;top:calc(100% + 2px);left:31px;border-width:0 8px 8px;border-style:solid;border-color:transparent transparent #fff}.footer .remove-btn[data-v-7f6a837b]{margin:0 1.4rem 0 auto;padding:0;float:right;color:#909090;background-color:transparent;cursor:pointer}.reply-form[data-v-7f6a837b]{position:relative;margin:.6rem 0 1.5rem}.reply-form .reply-input[data-v-7f6a837b]{font-size:1.3rem;line-height:1.7rem;padding:.5rem;height:62px;margin-bottom:.8rem}.reply-form .reply-input[data-v-7f6a837b]:hover{border-color:#007fff}.reply-form .action-box[data-v-7f6a837b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;font-size:1.1rem}.reply-form .action-box .cancel-btn[data-v-7f6a837b]{background-color:#f1f1f1;color:#333}.reply-form.replying[data-v-7f6a837b]:before{content:\"\\63D0\\4EA4\\4E2D...\";display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;color:#666;background-color:hsla(0,0%,100%,.8);z-index:1}@media (max-width:600px){.avatar[data-v-7f6a837b]{left:.5rem;top:.1rem;width:2.4rem;height:2.4rem}}.sub-comment-box[data-v-746db1b2]{margin-top:9px;border:1px solid #eaeaea;border-radius:3px}.sub-comment-box .sub-comment-box__inner[data-v-746db1b2]{padding:16px}.sub-comment-box .sub-comment-box__inner .sub-comment-list[data-v-746db1b2],.sub-comment-box .sub-comment-box__inner .sub-comment-list li[data-v-746db1b2]{padding-bottom:15px}.sub-comment-box .sub-comment-box__inner .sub-comment-list li[data-v-746db1b2]:not(:first-child){padding-top:15px}.sub-comment-box .sub-comment-box__inner .sub-comment-list li[data-v-746db1b2]:not(:last-child){border-bottom:1px solid #e1e5e8}.sub-comment-box .sub-comment-box__inner .reply-form[data-v-746db1b2]{margin-top:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;height:auto}.sub-comment-box .sub-comment-box__inner .reply-form textarea[data-v-746db1b2]{height:35px;padding:6px;font-size:14px;border-radius:3px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.sub-comment-box .sub-comment-box__inner .reply-form button[data-v-746db1b2]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:75px;flex-basis:75px;min-width:75px;height:35px;margin-left:8px;padding-left:0;padding-right:0;font-size:15px;text-align:center}.sub-comment-box .sub-comment-box__inner .empty-comment dl[data-v-746db1b2]{text-align:center;width:60px;margin:0 auto;padding-top:25px;padding-bottom:25px;color:#909090}.sub-comment-box .sub-comment-box__inner .empty-comment dl dt img[data-v-746db1b2]{width:60px;vertical-align:top}.sub-comment-box .sub-comment-box__inner .empty-comment dl dd[data-v-746db1b2]{margin:0;text-align:center;height:18px;margin-top:5px}.sub-comment-box__top[data-v-746db1b2]{display:none}.sub-comment-box__m[data-v-746db1b2]{position:fixed;left:0;top:0;z-index:251;background:#fff;width:100%;height:100%}.sub-comment-box__m .sub-comment-box__top[data-v-746db1b2]{display:block;height:50px;line-height:50px;border-bottom:1px solid #ddd;background-color:#fafafa}.sub-comment-box__m .sub-comment-box__top h3[data-v-746db1b2]{margin:0;text-align:center;font-weight:400;font-size:18px}.sub-comment-box__m .sub-comment-box__top .icon-close[data-v-746db1b2]{width:25px;height:25px;border-radius:50%;border:1px solid #b6bac1;float:left;position:absolute;left:15px;top:11px}.sub-comment-box__m .sub-comment-box__top .icon-close[data-v-746db1b2]:before{position:absolute;left:50%;top:50%;content:\"\";width:14px;height:1px;background-color:#b6bac1;-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:-7px;margin-top:-1px}.sub-comment-box__m .sub-comment-box__top .icon-close[data-v-746db1b2]:after{position:absolute;left:50%;top:50%;content:\"\";width:14px;height:1px;background-color:#b6bac1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);margin-left:-7px;margin-top:-1px}.sub-comment-box__m .sub-comment-box__inner[data-v-746db1b2]{max-height:calc(100vh - 85px);overflow-y:auto}.sub-comment-box__m .sub-comment-box__inner .pagination[data-v-746db1b2],.sub-comment-box__m .sub-comment-box__inner .reply-form[data-v-746db1b2],.sub-comment-box__m .sub-comment-box__inner[data-v-746db1b2]:after,.sub-comment-box__m .sub-comment-box__inner[data-v-746db1b2]:before{display:none}.sub-comment-box.sub-comment-box__m[data-v-746db1b2]{margin-top:0}.sub-comment:hover .remove-btn[data-v-6fdfc18a]{display:inline-block}.sub-comment .user-popover--avatar[data-v-6fdfc18a]{float:left;width:26px;margin-right:10px}.sub-comment .avatar[data-v-6fdfc18a]{width:26px;height:26px;border-radius:3px}.sub-comment .content-box[data-v-6fdfc18a]{overflow:hidden}.sub-comment .content-box .header .user-info[data-v-6fdfc18a]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;line-height:20px;font-size:13px}.sub-comment .content-box .header .user-info .user-popover--info[data-v-6fdfc18a]{margin-right:10px}.sub-comment .content-box .header .user-info .user-popover--info .username[data-v-6fdfc18a]{font-size:15px;color:#333}.sub-comment .content-box .header .user-info .position[data-v-6fdfc18a]{color:rgba(43,68,116,.5)}.sub-comment .content-box .content[data-v-6fdfc18a]{margin-top:5px;font-size:14px;white-space:pre-wrap}.sub-comment .content-box .content .text-reply[data-v-6fdfc18a]{margin-right:2px}.sub-comment .content-box .content .text-reply a[data-v-6fdfc18a]{margin-left:3px}.sub-comment .content-box .content .text-reply .username[data-v-6fdfc18a]{color:#6799cd}.sub-comment .content-box .content .content-html[data-v-6fdfc18a]{margin-right:.5em}.sub-comment .content-box .content .show-all[data-v-6fdfc18a]{color:#6799cd;white-space:nowrap;cursor:pointer}.sub-comment .content-box .footer[data-v-6fdfc18a]{padding-top:5px;color:#909090}.sub-comment .content-box .footer .reply-btn[data-v-6fdfc18a]{visibility:hidden;margin-left:16px}.sub-comment .content-box .footer .remove-btn[data-v-6fdfc18a]{margin:0 0 0 auto;padding:0;float:right;color:#909090;background-color:transparent;cursor:pointer}.sub-comment:hover .content-box .footer .reply-btn[data-v-6fdfc18a]{visibility:visible}.sub-comment__m .position[data-v-6fdfc18a],.sub-comment__m .reply-btn[data-v-6fdfc18a]{display:none}.sub-comment__m .content-box .header .user-info .username[data-v-6fdfc18a]{color:#596690;font-size:16px}.confirm-dialog-box[data-v-65d5b7df]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.8);z-index:1000}.confirm-dialog[data-v-65d5b7df]{position:relative;padding:2rem;width:38rem;max-width:100%;background-color:#fff;border:1px solid hsla(217,5%,71%,.4);border-radius:3px;box-shadow:0 1px 2px 0 rgba(0,0,0,.24)}.dialog-header[data-v-65d5b7df]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dialog-header .dialog-title[data-v-65d5b7df]{font-size:1.417rem;font-weight:600;color:#000;cursor:default}.dialog-header .close-btn[data-v-65d5b7df]{position:absolute;top:1.5rem;right:1.5rem;padding:.5rem;font-size:1.2rem;color:#979797;background-color:transparent;border:none;outline:none;cursor:pointer}.dialog-header .close-btn[data-v-65d5b7df]:hover{color:#666}.dialog-body[data-v-65d5b7df]{padding:1rem 0 1.5rem;font-size:1.167rem;line-height:1.7;color:#333;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.dialog-footer[data-v-65d5b7df]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dialog-footer .ctrl-btn[data-v-65d5b7df]{padding:.6rem 1.9rem;font-size:1.167rem;color:#a5a5a5;background-color:#fff;border:none;border-radius:3px;outline:none;cursor:pointer}.dialog-footer .ctrl-btn[data-v-65d5b7df]:hover:not(:disabled){opacity:.8}.dialog-footer .confirm-btn[data-v-65d5b7df]{margin-left:1.5rem;color:#1288ff;border:1px solid currentColor}.dialog-footer .confirm-btn[data-v-65d5b7df]:disabled{color:#a5a5a5;cursor:default}.pagination[data-v-2c38f2aa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.pagination li[data-v-2c38f2aa]{margin:0 8px;cursor:pointer;padding:0 5px;font-size:14px}.pagination li[data-v-2c38f2aa]:hover{color:#679acd}.pagination li.current[data-v-2c38f2aa],.pagination li.ellipsis[data-v-2c38f2aa]{color:#bbb;cursor:default}.iconfont[data-v-d7096830]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-d7096830]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-d7096830]:before{content:\"\\E601\"}.payment-wrap[data-v-d7096830]{position:fixed;z-index:500}.payment-wrap .payment-masker[data-v-d7096830]{position:fixed;left:0;top:0;right:0;bottom:0;z-index:500;background-color:rgba(0,0,0,.65)}.payment-wrap .payment-inner[data-v-d7096830]{position:fixed;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:360px;min-height:100px;z-index:501;border-radius:2px;overflow:hidden;transition:all .2s linear;box-shadow:0 1px 6px 0 rgba(0,0,0,.15);background-color:#fff}.fade-enter-active[data-v-d7096830],.fade-leave-active[data-v-d7096830]{transition:opacity .35s}.fade-enter[data-v-d7096830],.fade-leave-to[data-v-d7096830]{opacity:0}.iconfont[data-v-328c7a30]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-328c7a30]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-328c7a30]:before{content:\"\\E601\"}.payment-qr-code[data-v-328c7a30]{min-height:250px;background-color:#fff}.payment-qr-code .heading[data-v-328c7a30]{padding:18px;font-size:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ededed}.payment-qr-code .heading .back[data-v-328c7a30]{position:relative;cursor:pointer;margin-right:15px}.payment-qr-code .heading .back[data-v-328c7a30]:before{content:\"\";display:block;border-width:0 0 2px 2px;width:10px;height:10px;border-style:solid;border-color:transparent transparent #979797 #979797;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.payment-qr-code .qr-img[data-v-328c7a30]{height:180px;padding-top:25px;padding-bottom:25px;text-align:center}.payment-qr-code .qr-img img[data-v-328c7a30]{max-height:180px}.payment-qr-code .bottom[data-v-328c7a30]{height:25px;padding-bottom:25px;text-align:center;font-size:18px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.payment-qr-code .bottom img[data-v-328c7a30]{width:25px;margin-right:10px}.iconfont[data-v-0b599438]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0b599438]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0b599438]:before{content:\"\\E601\"}.button--buy[data-v-0b599438]{width:100%;font-size:18px;line-height:1;padding:14px 30px;background-color:#007fff;color:#fff;text-align:center}.button--buy[data-v-0b599438]:disabled{background-color:#c9c9c9;opacity:.8}.button--buy[data-v-0b599438]:not(:disabled):hover{background-color:#0371df}.payment-dialog[data-v-0b599438]{background-color:#fff;color:#333}.payment-dialog .sale-card[data-v-0b599438]{margin-left:5px;height:20px;line-height:20px;font-size:12px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#fa5600;color:#fff}.payment-dialog .cell>div[data-v-0b599438]{margin-left:20px;margin-right:20px;padding-top:14px;padding-bottom:14px;font-size:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-shadow:0 1px 0 #ededed}.payment-dialog .cell>div .pay-bar[data-v-0b599438],.payment-dialog .cell>div.pay-sale[data-v-0b599438]{box-shadow:none}.payment-dialog .close-btn[data-v-0b599438]{position:absolute;right:20px;top:25px;cursor:pointer;width:15px;height:15px}.payment-dialog .close-btn[data-v-0b599438]:before{content:\"\";position:absolute;top:50%;left:50%;width:18px;height:2px;background-color:#bec3c7;-webkit-transform:translate(-50%,-50%) rotate(-45deg);transform:translate(-50%,-50%) rotate(-45deg);-webkit-transform-origin:center;transform-origin:center}.payment-dialog .close-btn[data-v-0b599438]:after{content:\"\";position:absolute;top:50%;left:50%;width:18px;height:2px;background-color:#bec3c7;-webkit-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg);-webkit-transform-origin:center;transform-origin:center}.payment-dialog .name[data-v-0b599438]{font-size:15px}.payment-dialog div.title[data-v-0b599438]{margin-left:0;margin-right:0;padding:18px 35px 18px 20px;font-size:20px}.payment-dialog .price .rmb[data-v-0b599438]{font-size:18px;font-weight:500}.payment-dialog .price .delete[data-v-0b599438]{color:#b0b0b0;text-decoration:line-through;margin-left:3px}.payment-dialog .price .price-sale[data-v-0b599438]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.payment-dialog .pay-way img[data-v-0b599438]{height:27px;display:block}.payment-dialog .pay-way .ali-pay[data-v-0b599438]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.payment-dialog .pay-way .ali-pay img[data-v-0b599438]{height:22px;margin-right:3px}.payment-dialog .pay-sale[data-v-0b599438]{cursor:pointer}.payment-dialog .pay-sale .sale-choose[data-v-0b599438]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.payment-dialog .pay-sale .sale-choose .sale-item[data-v-0b599438],.payment-dialog .pay-sale .sale-choose[data-v-0b599438]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.payment-dialog .pay-sale .sale-choose .sale-item input[data-v-0b599438]{margin-right:3px}.payment-dialog .pay-sale .sale-choose .sale-item .text[data-v-0b599438]{font-size:14px;margin-right:3px}.payment-dialog .pay-sale .sale-choose .sale-item[data-v-0b599438]:not(:first-child){margin-left:10px}.payment-dialog .pay-sale .sale-choose .not-sale[data-v-0b599438]{color:#a5a5a5}.payment-dialog .pay-bar[data-v-0b599438]{padding-top:17px;padding-bottom:17px}.iconfont[data-v-5fe21a36]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5fe21a36]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5fe21a36]:before{content:\"\\E601\"}.conpon-wrap[data-v-5fe21a36]{position:fixed;left:0;top:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.conpon-masker[data-v-5fe21a36]{position:fixed;left:0;top:0;right:0;bottom:0;background-color:rgba(0,0,0,.2)}.conpon-inner[data-v-5fe21a36]{position:relative;width:300px;padding-bottom:20px;border-radius:2px;box-shadow:0 1px 6px 0 rgba(0,0,0,.15);background-color:#fff;transition:all .2s linear}.conpon-inner.conpon-inner--blus[data-v-5fe21a36]{margin-top:0}.conpon-inner.conpon-inner--focus[data-v-5fe21a36]{margin-top:-100px}.conpon-inner .heading[data-v-5fe21a36]{font-size:18px;height:50px;line-height:50px;border-bottom:1px solid #ededed;padding-left:15px}.conpon-inner .content .conpon-input[data-v-5fe21a36]{padding:25px 25px 20px}.conpon-inner .content .conpon-input .state-text[data-v-5fe21a36]{color:red;font-size:14px;margin-top:6px}.conpon-inner .content .conpon-input input[data-v-5fe21a36]{outline:none;width:100%;height:35px;text-indent:5px;font-size:14px;border-radius:2px;border:1px solid #007fff;box-sizing:border-box}.conpon-inner .footer[data-v-5fe21a36]{padding-left:25px;padding-right:25px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.conpon-inner .footer .btn[data-v-5fe21a36]{cursor:pointer;padding-left:20px;padding-right:20px}.conpon-inner .footer .cancel[data-v-5fe21a36]{color:#a5a5a5}.conpon-inner .footer .ok[data-v-5fe21a36]{margin-left:10px;height:26px;line-height:26px;border-radius:2px;border:1px solid #007fff;color:#007fff}.iconfont[data-v-5132bae5]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5132bae5]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5132bae5]:before{content:\"\\E601\"}.books-index-view[data-v-5132bae5]{margin-top:20px;width:100%;margin-left:auto;margin-right:auto;position:relative}.books-index-view.no-header[data-v-5132bae5]{margin-top:0}.books-index-view .books-solgan[data-v-5132bae5]{margin-left:auto;margin-right:auto;width:600px;padding-top:30px;padding-bottom:50px;text-align:center}.books-index-view .books-solgan .title[data-v-5132bae5]{font-size:20px;color:#007fff;margin-bottom:15px}.books-index-view .books-solgan .desc[data-v-5132bae5]{font-size:15px;color:#333;line-height:1.7}.list-wrap[data-v-5132bae5]{position:relative;min-height:calc(100vh - 340px);margin-bottom:50px;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.copy-right[data-v-5132bae5]{text-align:center;font-size:14px;opacity:.7;color:#3a4e64;margin-bottom:40px}.copy-right a[data-v-5132bae5]{color:inherit}.books-list[data-v-5132bae5]{width:100%;max-width:700px;box-shadow:0 1px 3px 0 rgba(4,5,13,.23)}.aside[data-v-5132bae5]{position:absolute;right:0;top:0;width:240px}.aside .sticky-section[data-v-5132bae5]{position:fixed;top:80px}.aside .sticky-section .section[data-v-5132bae5]{width:240px;overflow:hidden;border-radius:2px;box-shadow:0 1px 3px 0 rgba(4,5,13,.23);background-color:#fff}.aside .sticky-section .section .slogan[data-v-5132bae5]{padding:15px 16px;border-bottom:1px solid #e6e8e8}.aside .sticky-section .section .slogan .title[data-v-5132bae5]{font-size:15px;color:#000}.aside .sticky-section .section .slogan .desc[data-v-5132bae5]{margin-top:8px;line-height:1.4;font-size:14px;color:#646464}.aside .sticky-section .section .wechat-qr[data-v-5132bae5]{padding:12px 16px}.aside .sticky-section .section .wechat-qr .title[data-v-5132bae5]{font-size:15px}.aside .sticky-section .section .wechat-qr .qr-img[data-v-5132bae5]{margin-top:9px;height:95px;background:url(https://b-gold-cdn.xitu.io/v3/static/img/wechat-qr.f1926e7.png) no-repeat center 0;background-size:contain;border-radius:2px}.aside .sticky-section .help[data-v-5132bae5]{margin-top:10px}.aside .sticky-section .help .items[data-v-5132bae5],.aside .sticky-section .help[data-v-5132bae5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.aside .sticky-section .help .items[data-v-5132bae5]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:90px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#71777b}.aside .sticky-section .help .items[data-v-5132bae5]:hover{background-color:#f9f9f9}.aside .sticky-section .help .items[data-v-5132bae5]:first-child{position:relative}.aside .sticky-section .help .items[data-v-5132bae5]:first-child:after{content:\"\";position:absolute;width:0;height:45px;top:50%;right:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);border-right:1px solid #efefef}.aside .sticky-section .help .items img[data-v-5132bae5]{width:auto;height:28px}.aside .sticky-section .help .items .title[data-v-5132bae5]{margin-top:8px;font-size:14px}.aside .sticky-section .book-new-user-ticket-for-book-index[data-v-5132bae5]{margin-top:10px}.aside.top .sticky-section[data-v-5132bae5]{top:20px}.books-masker[data-v-5132bae5]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:1000;background-color:rgba(0,0,0,.54)}.books-masker .qr-popup[data-v-5132bae5]{width:258px;height:378px;background-image:url(https://b-gold-cdn.xitu.io/v3/static/img/masker.8cd50e6.png);background-size:contain;background-position:50%;background-repeat:no-repeat;position:absolute;left:50%;top:50%;margin-top:-189px;margin-left:-129px;text-align:center;color:#fff;padding-top:32px;padding-left:20px;padding-right:20px;box-sizing:border-box}.books-masker .qr-popup .close[data-v-5132bae5]{position:absolute;right:16px;top:16px;font-size:14px;line-height:1;cursor:pointer}.books-masker .qr-popup .title[data-v-5132bae5]{font-size:28px;font-weight:300}.books-masker .qr-popup .title span[data-v-5132bae5]{display:block;text-align:center}.books-masker .qr-popup .qr-code[data-v-5132bae5]{margin-top:68px}.books-masker .qr-popup .qr-code img[data-v-5132bae5]{width:140px;height:140px}@media (max-width:960px){.books-index-view .books-list[data-v-5132bae5]{margin-left:auto;margin-right:auto}.books-index-view .aside[data-v-5132bae5],.books-index-view .books-list[data-v-5132bae5]:before{display:none}}@media (max-width:700px){.books-index-view .books-solgan[data-v-5132bae5]{max-width:100%;padding:35px;box-sizing:border-box}.books-index-view .books-solgan .desc[data-v-5132bae5]{font-size:13px}.copy-right[data-v-5132bae5]{display:none}}.related-user-list-modal[data-v-df0a8f00]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.95);overflow-y:auto;z-index:250}.title[data-v-df0a8f00]{margin:5rem 0 2rem;text-align:center}.user-list[data-v-df0a8f00]{margin:auto;padding:0 0 2rem;width:40rem;max-width:90%}.user-list .item[data-v-df0a8f00]{padding:1rem 0}.close-btn[data-v-df0a8f00]{position:fixed;top:2rem;right:3rem;font-size:1.3rem;cursor:pointer}.user[data-v-0cf13ed8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.avatar[data-v-0cf13ed8]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:4rem;height:4rem;border-radius:50%;margin-right:1.3rem}.user-info[data-v-0cf13ed8]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;overflow:hidden}.intro[data-v-0cf13ed8]{color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.username[data-v-0cf13ed8]{font-size:1.4rem;color:#333}.follow-btn[data-v-0cf13ed8]{min-width:7rem;background-color:transparent;border:1px solid #37c700;color:#37c700}.follow-btn[data-v-0cf13ed8]:hover{border-color:#3cb40e;color:#3cb40e}.follow-btn.followed[data-v-0cf13ed8]{background-color:#37c700;color:#fff}.follow-btn.followed[data-v-0cf13ed8]:hover{background-color:#3cb40e}.book-new-user-award-aside[data-v-394f4cd6]{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:pointer;padding:13px 0;border-radius:2px;height:80px;background:#fd4243;background:linear-gradient(108deg,#f87554,#f0232f);background:-webkit-linear-gradient(-12deg,#f87554,#f0232f);box-sizing:border-box;box-shadow:0 1px 3px 0 rgba(4,5,13,.23)}.book-new-user-award-aside .pic[data-v-394f4cd6]{margin:0 12px;width:50px;-ms-flex-negative:0;flex-shrink:0}.book-new-user-award-aside .pic img[data-v-394f4cd6]{width:100%;display:block}.book-new-user-award-aside .content[data-v-394f4cd6]{position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.book-new-user-award-aside .content .title[data-v-394f4cd6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;font-size:14px;height:25px}.book-new-user-award-aside .content .desc[data-v-394f4cd6]{margin-top:2px}.book-new-user-award-aside .content .desc .get[data-v-394f4cd6]{width:60px;height:20px;color:#fff;line-height:20px;border-radius:2px;font-size:12px;text-align:center;border:1px solid #fff}.book-new-user-use-ticket-progress[data-v-308fcd1a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default;padding:11px 0 11px 10px;height:65px;border-radius:2px;box-sizing:border-box;background:#fff;box-shadow:0 1px 3px 0 rgba(4,5,13,.23)}.book-new-user-use-ticket-progress .pic[data-v-308fcd1a]{width:45px;-ms-flex-negative:0;flex-shrink:0}.book-new-user-use-ticket-progress .pic img[data-v-308fcd1a]{width:100%;display:block}.book-new-user-use-ticket-progress .content[data-v-308fcd1a]{padding-left:10px;position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.book-new-user-use-ticket-progress .content .title[data-v-308fcd1a]{color:#000;font-size:14px}.book-new-user-use-ticket-progress .content .title .highlight[data-v-308fcd1a]{padding:0 3px;color:red}.book-new-user-use-ticket-progress .content .desc[data-v-308fcd1a]{font-size:12px;color:#4a4a4a;white-space:nowrap}.iconfont[data-v-55a4e6c5]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-55a4e6c5]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-55a4e6c5]:before{content:\"\\E601\"}.book-info-view[data-v-55a4e6c5]{margin-top:1.767rem;min-height:calc(100vh - 195px)}.button--buy[data-v-55a4e6c5]{height:40px;font-size:16px;padding-left:30px;padding-right:30px;background-color:#007fff;color:#fff;text-align:center}.button--buy[data-v-55a4e6c5]:disabled{background-color:#c9c9c9;opacity:.8}.button--buy[data-v-55a4e6c5]:not(:disabled):hover{background-color:#0371df}.button--write[data-v-55a4e6c5]{height:40px;font-size:16px;padding-left:30px;padding-right:30px;color:#71777c;text-align:center;background-color:#fff;border:1px solid #aeb6c0}.button--write[data-v-55a4e6c5]:disabled{background-color:#c9c9c9;opacity:.8}.button--write[data-v-55a4e6c5]:not(:disabled):hover{background-color:#f3f3f3}.book-box[data-v-55a4e6c5]{max-width:720px;width:100%;margin-left:auto;margin-right:auto;box-shadow:0 1px 2px 0 rgba(0,0,0,.15);background-color:#fff}.book-info[data-v-55a4e6c5]{padding:20px}.book-info .poster[data-v-55a4e6c5]{width:130px;height:182px;border-radius:2px;background-repeat:no-repeat;float:left;margin-right:20px}.book-info .poster img[data-v-55a4e6c5]{width:100%;height:100%;object-fit:cover;cursor:zoom-in}.book-info .info[data-v-55a4e6c5]{margin-left:150px;font-size:14px;min-height:182px}.book-info .info .title-line .title[data-v-55a4e6c5]{font-size:20px;font-weight:700;color:#333}.book-info .info .title-line .title[data-v-55a4e6c5]:hover{color:#007fff}.book-info .info .title-line .title .presale[data-v-55a4e6c5]{vertical-align:middle;display:inline-block;padding-left:6px;padding-right:6px;margin-top:-3px;height:20px;line-height:20px;color:#fff;font-size:12px;cursor:default;margin-right:8px;border-radius:2px;background-color:#ed7b11}.book-info .info .media[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.book-info .info .media .add-group[data-v-55a4e6c5]{height:auto;display:none}.book-info .info .media .desc[data-v-55a4e6c5]{margin-top:10px;min-height:40px;line-height:20px;overflow:hidden;color:#71777c}.book-info .info .media .author[data-v-55a4e6c5]{position:relative;margin-top:12px}.book-info .info .media .author .author-info[data-v-55a4e6c5],.book-info .info .media .author[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-info .info .media .author .author-info[data-v-55a4e6c5]{-ms-flex-negative:0;flex-shrink:0;color:#333}.book-info .info .media .author .author-info .user[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#000}.book-info .info .media .author .author-info .hero[data-v-55a4e6c5]{width:26px;height:26px;border-radius:50%;margin-right:8px}.book-info .info .media .author .author-desc[data-v-55a4e6c5]{color:#71777c;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.book-info .info .media .author .author-desc .position[data-v-55a4e6c5]{margin-left:10px;margin-right:10px}.book-info .other[data-v-55a4e6c5]{margin-top:25px;position:relative}.book-info .other .not-buy[data-v-55a4e6c5]{position:relative}.book-mobile-other[data-v-55a4e6c5]{display:none;padding:15px;background:#fff;position:relative}.book-mobile-other[data-v-55a4e6c5]:after{content:\"\";position:absolute;left:0;right:0;bottom:0;border-bottom:1px solid #e5e5e5;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.book-mobile-other button[data-v-55a4e6c5]{border-radius:5px}.book-mobile-other .button--write[data-v-55a4e6c5]{-ms-flex-preferred-size:85px;flex-basis:85px;-ms-flex-negative:0;flex-shrink:0}.book-mobile-other .button--buy[data-v-55a4e6c5]{-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.book-mobile-other .sale-tooltip[data-v-55a4e6c5]{right:16px;bottom:-15px;z-index:2}.book-mobile-other .invite-tooltip[data-v-55a4e6c5]{position:absolute;right:17px;bottom:-18px;width:68px;height:34px;z-index:2;font-size:13px;padding-top:6px;padding-bottom:2px;text-align:center;background-image:url(https://b-gold-cdn.xitu.io/v3/static/img/invite-bg.a0e61e2.png);background-repeat:no-repeat;background-position:0 0;background-size:contain;color:#8b572a;box-sizing:border-box;line-height:25px}.book-bought[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:8px 22px 8px 15px;border-top:1px solid #ecf0f3;border-bottom:1px solid #ecf0f3;cursor:pointer}.book-bought .label[data-v-55a4e6c5],.book-bought[data-v-55a4e6c5]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-bought .label[data-v-55a4e6c5]{color:#666;font-size:16px;font-weight:400;-ms-flex-negative:0;flex-shrink:0}.book-bought .label[data-v-55a4e6c5],.book-bought .users[data-v-55a4e6c5]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.book-bought .users[data-v-55a4e6c5]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-left:24px;-ms-flex-wrap:wrap;flex-wrap:wrap;height:24px;overflow:hidden}.book-bought .users .user[data-v-55a4e6c5]{-ms-flex-negative:0;flex-shrink:0;width:24px;height:24px;margin-left:10px;border-radius:50%;background-size:cover}.book-bought .users .user[data-v-55a4e6c5]:first-child{margin-left:0}.book-content[data-v-55a4e6c5]{padding:30px;padding-bottom:0}.book-content .book-content-head[data-v-55a4e6c5]{position:relative;font-weight:700;margin-bottom:20px;color:#333;line-height:1.5;padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.book-section-view[data-v-55a4e6c5]{padding:30px;padding-top:1px}.copy-right[data-v-55a4e6c5]{text-align:center;font-size:14px;opacity:.7;color:#3a4e64;margin-bottom:40px}.right-side[data-v-55a4e6c5]{position:absolute;right:0;top:5px;height:30px}.more[data-v-55a4e6c5],.right-side[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.more[data-v-55a4e6c5]{cursor:pointer}.more img[data-v-55a4e6c5]{width:30px}.more .more-list[data-v-55a4e6c5]{position:absolute;top:100%;right:0;min-width:8rem;white-space:nowrap;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.more .more-list[data-v-55a4e6c5]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.more .more-list .item[data-v-55a4e6c5]{padding:.5rem .9rem}.more .more-list .item[data-v-55a4e6c5]:hover{background-color:#f7f8fa}.more.open .more-list[data-v-55a4e6c5]{display:block}.add-group[data-v-55a4e6c5]{height:30px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:10px}.add-group img[data-v-55a4e6c5]{width:18px;display:block}.add-group span[data-v-55a4e6c5]{font-size:12px;margin-left:5px;color:#b3bac2}.books-other[data-v-55a4e6c5]{max-width:720px;width:100%;margin:24px auto 50px;box-shadow:0 1px 2px 0 rgba(0,0,0,.15)}.books-other .header[data-v-55a4e6c5]{height:50px;border-bottom:1px solid #eceded;line-height:50px;padding-left:25px;font-size:16px;background-color:#fff}.bottom-mobile-buy[data-v-55a4e6c5]{display:none;cursor:pointer;position:fixed;bottom:60px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:10;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;background-color:#007fff;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 4px 10px rgba(0,0,0,.15);width:178px;height:40px;border-radius:40px;margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom)}@media (max-width:720px){.books-other .header[data-v-55a4e6c5]{padding-left:14px}.book-info-view[data-v-55a4e6c5]{margin-top:0}.book-info[data-v-55a4e6c5]{padding:15px}.book-info .info .title-line .title .presale[data-v-55a4e6c5]{display:none}.book-info .info .media .author[data-v-55a4e6c5]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.book-info .info .media .author-desc[data-v-55a4e6c5]{display:none}.book-info .info .media .add-group[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex}.book-info .messages[data-v-55a4e6c5]{display:block}.book-info .poster[data-v-55a4e6c5]{width:85px;height:119px;background-repeat:no-repeat;margin-right:13px}.book-info .info[data-v-55a4e6c5]{margin-left:0;min-height:119px}.book-info .info .title[data-v-55a4e6c5]{font-size:18px}.book-info .info .media .desc[data-v-55a4e6c5]{margin-top:5px}.book-info .info .media .author[data-v-55a4e6c5]{marign-top:10px}.book-info .other[data-v-55a4e6c5]{display:none}.book-content[data-v-55a4e6c5]{padding:15px;padding-bottom:0}.book-content .book-content-head[data-v-55a4e6c5]{font-size:20px;font-weight:600;border-bottom:0;margin-bottom:0}.book-section-view[data-v-55a4e6c5]{padding:15px;padding-top:0}.book-mobile-other[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex}.book-mobile-other button[data-v-55a4e6c5]{padding-left:15px;padding-right:15px}.book-intro[data-v-55a4e6c5]{padding:15px}.book-intro .intro-head[data-v-55a4e6c5]{font-size:16px;font-weight:600;margin-bottom:8px}.bottom-mobile-buy[data-v-55a4e6c5]{display:-webkit-box;display:-ms-flexbox;display:flex}}.iconfont[data-v-73a9cc28]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-73a9cc28]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-73a9cc28]:before{content:\"\\E601\"}.masker[data-v-73a9cc28]{position:fixed;z-index:500;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.masker .box[data-v-73a9cc28]{width:300px;height:auto;min-height:400px;border-radius:3px;padding:35px 25px;box-sizing:border-box;background-color:#fff;position:relative}.masker .box .title[data-v-73a9cc28]{font-size:18px;color:#007fff;text-align:center}.masker .box .desc[data-v-73a9cc28]{color:#939393;font-size:14px;margin-top:15px;text-align:center}.masker .box .desc .code[data-v-73a9cc28]{color:#000;font-weight:700;padding-left:3px;padding-right:3px}.masker .box .qr-box[data-v-73a9cc28]{margin-top:20px;margin-bottom:20px;text-align:center;min-height:240px}.masker .box .qr-box img[data-v-73a9cc28]{width:180px;border-radius:2px;box-shadow:0 0 30px rgba(0,0,0,.2)}.masker .box .btn-read[data-v-73a9cc28]{width:100%;height:32px}.masker .box .close-btn[data-v-73a9cc28]{position:absolute;right:15px;top:15px;cursor:pointer;width:15px;height:15px}.masker .box .close-btn[data-v-73a9cc28]:before{content:\"\";position:absolute;top:50%;left:50%;width:18px;height:2px;background-color:#bec3c7;-webkit-transform:translate(-50%,-50%) rotate(-45deg);transform:translate(-50%,-50%) rotate(-45deg);-webkit-transform-origin:center;transform-origin:center}.masker .box .close-btn[data-v-73a9cc28]:after{content:\"\";position:absolute;top:50%;left:50%;width:18px;height:2px;background-color:#bec3c7;-webkit-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg);-webkit-transform-origin:center;transform-origin:center}.book-new-user-coupon[data-v-9bd78fe6]{position:relative;height:28px;margin-right:5px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.book-new-user-coupon .icon[data-v-9bd78fe6]{cursor:pointer}.book-new-user-coupon .icon img[data-v-9bd78fe6]{height:28px}.book-new-user-coupon .icon:hover+.card[data-v-9bd78fe6]{display:block}.book-new-user-coupon .card[data-v-9bd78fe6]{display:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);white-space:nowrap;right:28px;line-height:1;color:#8b572a;padding:5px;background:linear-gradient(180deg,#eed7a1,#fdedc9);background:-webkit-linear-gradient(180deg,#eed7a1,#fdedc9);font-size:12px;border-radius:2px;margin-right:8px;font-weight:400}.book-new-user-coupon .card[data-v-9bd78fe6]:after{position:absolute;content:\"\";right:0;width:0;height:0;top:50%;margin-top:-6px;right:-6px;border-style:solid;border-color:transparent transparent transparent #eed7a1;border-width:6px 0 6px 6px}.section[data-v-52e38b40]{position:relative;min-height:75px;cursor:default;padding-left:20px;padding-right:35px;border-radius:2px;font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#8f9193}.section.section-link[data-v-52e38b40]{cursor:pointer}.section[data-v-52e38b40]:hover{color:#333;background-color:#e9e9e9}.section:hover .more[data-v-52e38b40]{display:block}.section.read[data-v-52e38b40]{color:#333}.section.route-active[data-v-52e38b40]{color:#333;background-color:#e0e0e0}.section.read .step .step-btn[data-v-52e38b40],.section.route-active .step .step-btn[data-v-52e38b40]{border-color:#007fff;color:#007fff}.section.read .step[data-v-52e38b40]:after,.section.read .step[data-v-52e38b40]:before,.section.route-active .step[data-v-52e38b40]:after,.section.route-active .step[data-v-52e38b40]:before{background-color:#007fff}.section.route-active .step[data-v-52e38b40]:after{background-color:#b5b7ba}.section .center[data-v-52e38b40]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-top:12px;padding-bottom:12px}.section .center .title[data-v-52e38b40]{font-size:16px}.section .center .sub-line[data-v-52e38b40]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:3px}.section .center .sub-line .to-read[data-v-52e38b40]{-ms-flex-negative:0;flex-shrink:0;width:40px;height:20px;color:#fff;line-height:20px;border-radius:2px;margin-right:10px;text-align:center;font-size:12px;background-color:#fa5600}.section .center .sub-line .writing[data-v-52e38b40]{color:#6ea7da;margin-right:12px}.section .center .sub-line .statistics[data-v-52e38b40]{color:#b2bac2;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.section .center .sub-line .statistics span[data-v-52e38b40]{margin-right:12px}.section .step[data-v-52e38b40]{-ms-flex-align:center;margin-right:15px;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch}.section .step .step-btn[data-v-52e38b40],.section .step[data-v-52e38b40]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.section .step .step-btn[data-v-52e38b40]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;-ms-flex-negative:0;flex-shrink:0;width:36px;height:36px;font-size:16px;border-radius:50%;border:2px solid #b5b7ba;color:#b5b7ba;box-sizing:border-box;text-align:center;background-color:#fff;z-index:1}.section .step[data-v-52e38b40]:before{top:0}.section .step[data-v-52e38b40]:after,.section .step[data-v-52e38b40]:before{z-index:0;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:2px;background-color:#b5b7ba;height:50%;content:\"\"}.section .step[data-v-52e38b40]:after{top:50%}.section:first-child .step[data-v-52e38b40]:before,.section:last-child .step[data-v-52e38b40]:after{display:none}@media (max-width:720px){.section .step .step-btn[data-v-52e38b40]{width:30px;height:30px;font-size:12px}}.iconfont[data-v-52e38b40]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-52e38b40]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-52e38b40]:before{content:\"\\E601\"}.section-of-info[data-v-52e38b40]{color:#000}.section-of-info .section[data-v-52e38b40]{position:relative;min-height:70px}.section-of-info .section[data-v-52e38b40]:hover{border-radius:2px;background-color:hsla(0,0%,85%,.2)}.section-of-info .section .title[data-v-52e38b40]{color:#000}.section-of-info .section .step .step-btn[data-v-52e38b40]{width:45px;height:45px;border-width:3px;font-size:18px}.section-of-info .section .step[data-v-52e38b40]:after,.section-of-info .section .step[data-v-52e38b40]:before{width:2px}.section-of-info .aside[data-v-52e38b40]{display:none}@media (max-width:720px){.section-of-info .section[data-v-52e38b40]{padding-left:0;padding-right:0;min-height:auto}.section-of-info .section[data-v-52e38b40]:after{content:\"\";position:absolute;left:30px;right:0;bottom:-1px;border-bottom:1px solid #e5e5e5;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.section-of-info .section[data-v-52e38b40]:hover{background-color:transparent}.section-of-info .section .statistics .comment[data-v-52e38b40]{display:none}.section-of-info .section .center[data-v-52e38b40]{padding-right:50px}.section-of-info .section .center .to-read[data-v-52e38b40]{display:none}.section-of-info .section .step[data-v-52e38b40]{margin-right:10px}.section-of-info .section .step[data-v-52e38b40]:after,.section-of-info .section .step[data-v-52e38b40]:before{display:none}.section-of-info .section .step .step-btn[data-v-52e38b40]{width:20px;font-size:16px;background-color:transparent;border-width:0}.section-of-info .aside[data-v-52e38b40]{display:block;position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.section-of-info .aside .to-read--m[data-v-52e38b40]{width:45px;text-align:center;height:20px;line-height:20px;border-radius:2px;border:1px solid #ff7600;color:#ff7600}.section-of-info .aside .lock[data-v-52e38b40]{width:45px;text-align:center}.section-of-info .aside .lock img[data-v-52e38b40]{width:12px;vertical-align:bottom}.section-of-info .aside .lock+.to-read--m[data-v-52e38b40]{margin-top:3px}}.iconfont[data-v-a39a1c6e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-a39a1c6e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-a39a1c6e]:before{content:\"\\E601\"}.fade-enter-active[data-v-a39a1c6e],.fade-leave-active[data-v-a39a1c6e]{position:absolute;left:0;width:100%;transition:all .25s ease}.fade-enter-to[data-v-a39a1c6e],.fade-leave[data-v-a39a1c6e]{-webkit-transform:translateZ(0);transform:translateZ(0)}.transition--prev .fade-leave-to[data-v-a39a1c6e]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.transition--next .fade-leave-to[data-v-a39a1c6e],.transition--prev .fade-enter[data-v-a39a1c6e]{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.transition--next .fade-enter[data-v-a39a1c6e]{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}a[data-v-a39a1c6e]{text-decoration:none}.book-read-view[data-v-a39a1c6e]{position:relative;overflow:hidden}.book-section[data-v-a39a1c6e]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex}.book-summary[data-v-a39a1c6e]{width:320px;position:fixed;left:0;top:0;height:100%;cursor:default;-ms-flex-negative:0;flex-shrink:0;z-index:2;border-right:1px solid #ddd;transition:all .3s cubic-bezier(.4,0,.2,1);will-change:left}.book-summary .book-summary-masker[data-v-a39a1c6e]{display:none;position:fixed;left:0;top:0;z-index:0;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.book-summary .book-summary-inner[data-v-a39a1c6e]{transition:all .3s cubic-bezier(.4,0,.2,1);background-color:#f0f1f4;position:relative;z-index:1;height:100%}.book-summary .book-summary-inner .book-summary__header[data-v-a39a1c6e]{height:60px;display:-webkit-box;display:-ms-flexbox;display:flex;padding-left:16px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:1px solid #ddd}.book-summary .book-summary-inner .book-summary__header .logo[data-v-a39a1c6e]{height:30px}.book-summary .book-summary-inner .book-summary__header .logo img[data-v-a39a1c6e]{height:100%}.book-summary .book-summary-inner .book-summary__header .label[data-v-a39a1c6e]{margin-left:13px;margin-right:25px;padding-left:10px;padding-right:10px;height:24px;line-height:24px;font-size:15px;font-weight:500;color:#007fff;position:relative;background-color:rgba(0,127,255,.1)}.book-summary .book-summary-inner .book-summary__header .label[data-v-a39a1c6e]:after{content:\"\";position:absolute;bottom:0;right:0;width:0;height:0;border-color:rgba(0,127,255,.2) #fff #fff rgba(0,127,255,.2);border-width:5px;border-style:solid}.book-summary .book-summary-inner .book-summary__header .audit[data-v-a39a1c6e]{color:#71777c;font-size:15px;opacity:.6}.book-summary .book-summary-inner .section-buy[data-v-a39a1c6e]{height:60px;cursor:pointer;background-color:#007fff;color:#fff;font-size:18px;line-height:60px;text-align:center}.book-summary .book-summary-inner .book-directory[data-v-a39a1c6e]{overflow-y:auto;box-sizing:border-box;-webkit-overflow-scrolling:touch;height:calc(100% - 180px)}.book-summary .book-summary-inner .book-directory.bought[data-v-a39a1c6e]{height:calc(100% - 120px)}.book-content[data-v-a39a1c6e]{width:100%;margin-left:320px;transition:all .3s cubic-bezier(.4,0,.2,1)}.book-content .book-content-inner[data-v-a39a1c6e]{position:relative}.book-content .book-content-inner .book-progress[data-v-a39a1c6e]{display:none}.book-content .book-content-inner .book-content__header[data-v-a39a1c6e]{position:fixed;right:0;left:320px;min-width:320px;background-color:#fff;z-index:1;border-bottom:1px solid #ddd;height:60px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:20px;padding-right:20px;transition:all .3s cubic-bezier(.4,0,.2,1);font-size:18px}.book-content .book-content-inner .book-content__header .switch[data-v-a39a1c6e]{display:none;padding-left:15px;margin-right:10px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHQ9IjE1MDQ2Nzg3ODQ4NzciIGNsYXNzPSJpY29uIiBzdHlsZT0iIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMzA0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiA+CiAgPGRlZnM+CiAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+CiAgPC9kZWZzPgogIDxwYXRoIGQ9Ik02MzAuMjcyIDEyMC4zMmMwLTY1LjUzNi01My4yNDgtMTE4Ljc4NC0xMTguNzg0LTExOC43ODRTMzkyLjcwNCA1NC43ODQgMzkyLjcwNCAxMjAuMzIgNDQ2LjQ2NCAyMzkuMTA0IDUxMiAyMzkuMTA0czExOC4yNzItNTMuMjQ4IDExOC4yNzItMTE4Ljc4NHogbTAgMzc4LjM2OGMwLTY1LjUzNi01My4yNDgtMTE4Ljc4NC0xMTguNzg0LTExOC43ODRzLTExOC43ODQgNTMuMjQ4LTExOC43ODQgMTE4Ljc4NCA1My4yNDggMTE4Ljc4NCAxMTguNzg0IDExOC43ODRjNjYuMDQ4LTAuNTEyIDExOC43ODQtNTMuMjQ4IDExOC43ODQtMTE4Ljc4NHogbTAgNDAxLjkyYzAtNjUuNTM2LTUzLjI0OC0xMTguNzg0LTExOC43ODQtMTE4Ljc4NHMtMTE4Ljc4NCA1My4yNDgtMTE4Ljc4NCAxMTguNzg0UzQ0Ni40NjQgMTAxOC44OCA1MTIgMTAxOC44OHMxMTguMjcyLTUzLjI0OCAxMTguMjcyLTExOC4yNzJ6IiBmaWxsPSIjYTdhOWFkIiBwLWlkPSIzMDQxIj48L3BhdGg+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-position:0;background-size:16px}.book-content .book-content-inner .book-content__header .switch img[data-v-a39a1c6e]{width:30px;vertical-align:middle}.book-content .book-content-inner .book-content__header .menu[data-v-a39a1c6e]{width:auto;height:20px;margin-right:20px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.book-content .book-content-inner .book-content__header .menu img[data-v-a39a1c6e]{vertical-align:top}.book-content .book-content-inner .book-content__header .hero[data-v-a39a1c6e]{position:absolute;right:20px}.book-content .book-content-inner .book-content__header .title[data-v-a39a1c6e]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.book-content .book-content-inner .book-content__header .title a[data-v-a39a1c6e]{color:#222}.book-content .book-content-inner .book-content__header .title a[data-v-a39a1c6e]:hover{text-decoration:underline}.book-content .book-content-inner .book-content__header .user-auth[data-v-a39a1c6e]{position:relative;right:0;margin-left:10px;margin-right:5px;-ms-flex-negative:0;flex-shrink:0}.book-content .book-content-inner .book-body[data-v-a39a1c6e]{min-height:100vh;box-sizing:border-box;padding-top:90px;padding-bottom:70px;position:relative;background-color:#e6e7e9;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.bottom-mobile-buy[data-v-a39a1c6e]{display:none;cursor:pointer;position:fixed;bottom:20px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:10;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;background-color:#007fff;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 4px 10px rgba(0,0,0,.15);width:178px;height:40px;border-radius:40px;margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom)}.book-summary__footer[data-v-a39a1c6e]{position:absolute;left:0;bottom:0;right:0;height:60px;padding-top:20px;padding-left:20px;box-sizing:border-box;background-color:#f0f1f4;z-index:1}.book-summary__footer .ion-close[data-v-a39a1c6e]{position:absolute;right:15px;top:15px;cursor:pointer;color:#bec3c7;line-height:1}.book-summary__footer .qr-icon[data-v-a39a1c6e]{width:20px;position:relative}.book-summary__footer .qr-icon img[data-v-a39a1c6e]{cursor:pointer;width:100%}.book-summary__footer .qr-tips[data-v-a39a1c6e]{z-index:-1;opacity:0;position:absolute;left:16px;bottom:50px;width:180px;height:235px;box-sizing:border-box;background-color:#fff;padding:20px 30px 0;border-radius:2px;transition:all .3s ease;visibility:hidden;box-shadow:0 1px 2px rgba(0,0,0,.15)}.book-summary__footer .qr-tips.show[data-v-a39a1c6e]{z-index:1;visibility:visible;opacity:1}.book-summary__footer .qr-tips .title[data-v-a39a1c6e]{margin-top:10px;text-align:center}.book-summary__footer .qr-tips .title span[data-v-a39a1c6e]{display:block;font-size:16px}.book-summary__footer .qr-tips .qr-img[data-v-a39a1c6e]{margin-top:15px}.book-summary__footer .qr-tips .qr-img img[data-v-a39a1c6e]{width:100%}.book-summary__footer .qr-tips[data-v-a39a1c6e]:after{content:\"\";position:absolute;-webkit-transform:rotate(45deg);transform:rotate(45deg);box-shadow:1px 2px 2px rgba(0,0,0,.15);left:9px;bottom:0;width:0;height:0;bottom:-4px;border-style:solid;border-width:5px;border-color:transparent #fff #fff transparent}@media (min-width:700px){.book-section.fold-pc .book-summary[data-v-a39a1c6e]{left:-320px}.book-section.fold-pc .book-content[data-v-a39a1c6e]{margin-left:0}.book-section.fold-pc .book-content .book-content__header[data-v-a39a1c6e]{left:0;top:-60px}.book-section.fold-pc .book-content .book-content__header.visible[data-v-a39a1c6e]{top:0}.book-section.fold-pc .book-content .book-direction[data-v-a39a1c6e]{margin-left:0}.book-section.fold-pc .book-content .book-progress[data-v-a39a1c6e]{display:block}}@media (max-width:700px){.book-summary[data-v-a39a1c6e]{transition:none;width:0}.book-summary.unfold-mobile[data-v-a39a1c6e]{width:100%;left:0}.book-summary.unfold-mobile .book-summary-masker[data-v-a39a1c6e]{display:block}.book-summary.unfold-mobile .book-summary-inner[data-v-a39a1c6e]{left:0}.book-summary .book-summary-inner[data-v-a39a1c6e]{left:-300px;box-shadow:0 2px 30px 0 rgba(0,0,0,.4);width:260px}.book-summary .book-summary-inner .book-directory[data-v-a39a1c6e]{height:calc(100% - 120px)}.book-content[data-v-a39a1c6e]{margin-left:0}.book-content .book-content-inner .book-content__header[data-v-a39a1c6e]{left:0;padding-left:0;padding-right:0}.book-content .book-content-inner .book-content__header .menu[data-v-a39a1c6e]{display:none}.book-content .book-content-inner .book-content__header .switch[data-v-a39a1c6e]{display:block}.section-buy[data-v-a39a1c6e]{display:none}.bottom-mobile-buy[data-v-a39a1c6e]{display:-webkit-box;display:-ms-flexbox;display:flex}}.iconfont[data-v-600d9c48]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-600d9c48]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-600d9c48]:before{content:\"\\E601\"}.book-progress[data-v-600d9c48]{position:absolute;left:20px;top:calc(100% + 20px)}.book-progress ul li[data-v-600d9c48]{margin-bottom:5px;width:6px;height:6px;background-color:#ccc;border-radius:50%}.book-progress ul li.active[data-v-600d9c48]{background-color:#aaa}.iconfont[data-v-76ca1e36]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-76ca1e36]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-76ca1e36]:before{content:\"\\E601\"}.book-handle[data-v-76ca1e36]{position:fixed;width:100%;left:50%;max-width:calc(100vw - 340px);bottom:70px;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin-left:160px}.book-handle .step-btn[data-v-76ca1e36],.book-handle[data-v-76ca1e36]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.book-handle .step-btn[data-v-76ca1e36]{cursor:pointer;position:absolute;bottom:0;z-index:10;width:50px;height:50px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:14px;border-radius:50%;background-color:#007fff;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 4px 10px rgba(0,0,0,.15)}.book-handle .step-btn img[data-v-76ca1e36]{width:32px}.book-handle .step-btn.step-btn--prev[data-v-76ca1e36]{left:10px}.book-handle .step-btn.step-btn--next[data-v-76ca1e36]{right:10px}.book-handle .step-btn.step-btn--finished[data-v-76ca1e36]{background-color:#fff;right:10px}.book-handle .step-btn.step-btn--buy[data-v-76ca1e36]{right:10px}@media (min-width:1320px){.book-handle[data-v-76ca1e36]{max-width:980px}}@media (max-width:700px){.book-handle[data-v-76ca1e36]{max-width:100%;bottom:30px;margin-left:0}.book-handle .step-btn.step-btn--buy[data-v-76ca1e36]{display:none}.book-handle .step-btn.step-btn--next[data-v-76ca1e36]{right:10px}}.section[data-v-8a5cc2ba]{position:relative;min-height:75px;cursor:default;padding-left:20px;padding-right:35px;border-radius:2px;font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#8f9193}.section.section-link[data-v-8a5cc2ba]{cursor:pointer}.section[data-v-8a5cc2ba]:hover{color:#333;background-color:#e9e9e9}.section:hover .more[data-v-8a5cc2ba]{display:block}.section.read[data-v-8a5cc2ba]{color:#333}.section.route-active[data-v-8a5cc2ba]{color:#333;background-color:#e0e0e0}.section.read .step .step-btn[data-v-8a5cc2ba],.section.route-active .step .step-btn[data-v-8a5cc2ba]{border-color:#007fff;color:#007fff}.section.read .step[data-v-8a5cc2ba]:after,.section.read .step[data-v-8a5cc2ba]:before,.section.route-active .step[data-v-8a5cc2ba]:after,.section.route-active .step[data-v-8a5cc2ba]:before{background-color:#007fff}.section.route-active .step[data-v-8a5cc2ba]:after{background-color:#b5b7ba}.section .center[data-v-8a5cc2ba]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-top:12px;padding-bottom:12px}.section .center .title[data-v-8a5cc2ba]{font-size:16px}.section .center .sub-line[data-v-8a5cc2ba]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:3px}.section .center .sub-line .to-read[data-v-8a5cc2ba]{-ms-flex-negative:0;flex-shrink:0;width:40px;height:20px;color:#fff;line-height:20px;border-radius:2px;margin-right:10px;text-align:center;font-size:12px;background-color:#fa5600}.section .center .sub-line .writing[data-v-8a5cc2ba]{color:#6ea7da;margin-right:12px}.section .center .sub-line .statistics[data-v-8a5cc2ba]{color:#b2bac2;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.section .center .sub-line .statistics span[data-v-8a5cc2ba]{margin-right:12px}.section .step[data-v-8a5cc2ba]{-ms-flex-align:center;margin-right:15px;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch}.section .step .step-btn[data-v-8a5cc2ba],.section .step[data-v-8a5cc2ba]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.section .step .step-btn[data-v-8a5cc2ba]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;-ms-flex-negative:0;flex-shrink:0;width:36px;height:36px;font-size:16px;border-radius:50%;border:2px solid #b5b7ba;color:#b5b7ba;box-sizing:border-box;text-align:center;background-color:#fff;z-index:1}.section .step[data-v-8a5cc2ba]:before{top:0}.section .step[data-v-8a5cc2ba]:after,.section .step[data-v-8a5cc2ba]:before{z-index:0;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:2px;background-color:#b5b7ba;height:50%;content:\"\"}.section .step[data-v-8a5cc2ba]:after{top:50%}.section:first-child .step[data-v-8a5cc2ba]:before,.section:last-child .step[data-v-8a5cc2ba]:after{display:none}@media (max-width:720px){.section .step .step-btn[data-v-8a5cc2ba]{width:30px;height:30px;font-size:12px}}.iconfont[data-v-8a5cc2ba]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-8a5cc2ba]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-8a5cc2ba]:before{content:\"\\E601\"}.section[data-v-8a5cc2ba]{min-height:60px;padding-left:16px}.section .center .title[data-v-8a5cc2ba]{font-size:14px}.section .center .sub-line[data-v-8a5cc2ba]{font-size:12px}.section .step[data-v-8a5cc2ba]{margin-right:10px}.section .step .step-btn[data-v-8a5cc2ba]{width:30px;height:30px;font-size:14px}.iconfont[data-v-09cfbe39]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-09cfbe39]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-09cfbe39]:before{content:\"\\E601\"}.more[data-v-09cfbe39]{position:absolute;right:0;top:0;z-index:2;cursor:pointer;display:none;width:25px;padding-right:10px;height:100%;background-size:18px auto;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHQ9IjE1MDQ2Nzg3ODQ4NzciIGNsYXNzPSJpY29uIiBzdHlsZT0iIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMzA0MCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiA+CiAgPGRlZnM+CiAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+CiAgPC9kZWZzPgogIDxwYXRoIGQ9Ik02MzAuMjcyIDEyMC4zMmMwLTY1LjUzNi01My4yNDgtMTE4Ljc4NC0xMTguNzg0LTExOC43ODRTMzkyLjcwNCA1NC43ODQgMzkyLjcwNCAxMjAuMzIgNDQ2LjQ2NCAyMzkuMTA0IDUxMiAyMzkuMTA0czExOC4yNzItNTMuMjQ4IDExOC4yNzItMTE4Ljc4NHogbTAgMzc4LjM2OGMwLTY1LjUzNi01My4yNDgtMTE4Ljc4NC0xMTguNzg0LTExOC43ODRzLTExOC43ODQgNTMuMjQ4LTExOC43ODQgMTE4Ljc4NCA1My4yNDggMTE4Ljc4NCAxMTguNzg0IDExOC43ODRjNjYuMDQ4LTAuNTEyIDExOC43ODQtNTMuMjQ4IDExOC43ODQtMTE4Ljc4NHogbTAgNDAxLjkyYzAtNjUuNTM2LTUzLjI0OC0xMTguNzg0LTExOC43ODQtMTE4Ljc4NHMtMTE4Ljc4NCA1My4yNDgtMTE4Ljc4NCAxMTguNzg0UzQ0Ni40NjQgMTAxOC44OCA1MTIgMTAxOC44OHMxMTguMjcyLTUzLjI0OCAxMTguMjcyLTExOC4yNzJ6IiBmaWxsPSIjYTdhOWFkIiBwLWlkPSIzMDQxIj48L3BhdGg+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-position:0}.more.open .more-menu[data-v-09cfbe39]{display:block;z-index:2}.more .more-menu[data-v-09cfbe39]{display:none;position:absolute;right:0;top:90%;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border-radius:2px}.more .more-menu div[data-v-09cfbe39]{color:#71777c;width:auto;padding-left:18px;padding-right:18px;height:40px;line-height:40px;min-width:140px}.more .more-menu div[data-v-09cfbe39]:hover{color:#333;background-color:rgba(0,0,0,.05)}.iconfont[data-v-11fc2358]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-11fc2358]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-11fc2358]:before{content:\"\\E601\"}.user-auth[data-v-11fc2358]{height:100%;position:absolute;right:15px}.nav-item a[data-v-11fc2358]{color:#71777c}.nav-item.active>.icon[data-v-11fc2358],.nav-item.active>a[data-v-11fc2358]{color:#007fff}.nav-menu-item>a[data-v-11fc2358]{display:block;color:#71777c}.avatar[data-v-11fc2358]{width:2.5rem;height:2.5rem;border-radius:50%}.nav-list[data-v-11fc2358]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.nav-item[data-v-11fc2358],.nav-list[data-v-11fc2358]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;margin:0}.nav-item[data-v-11fc2358]{color:#71777c;font-size:1.33rem;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.nav-item:hover>a[data-v-11fc2358]{color:#007fff}.nav-item.menu[data-v-11fc2358]{position:relative}.nav-item.auth[data-v-11fc2358]{color:#007fff}.nav-item.auth span[data-v-11fc2358]:hover{color:#0371df}.nav-item.auth .login[data-v-11fc2358]:after{content:\"\\B7\";margin:0 .4rem}.nav-menu[data-v-11fc2358]{position:absolute;width:11rem;left:50%;top:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin:0;padding:0;list-style:none;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid hsla(217,5%,71%,.45);border-radius:4px;font-size:1.2rem}.nav-menu .nav-menu-item-group[data-v-11fc2358]{padding:1rem 0}.nav-menu .nav-menu-item[data-v-11fc2358]{font-size:1.3rem;cursor:pointer}.nav-menu .nav-menu-item[data-v-11fc2358]:hover{background-color:hsla(0,0%,95%,.5)}.nav-menu .nav-menu-item>a[data-v-11fc2358]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.5rem 1rem}.nav-menu .nav-menu-item>a>span[data-v-11fc2358]{margin-left:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.nav-menu .more[data-v-11fc2358]{position:relative}.nav-menu .more:hover .more-dropdown-list[data-v-11fc2358]{display:block}.nav-menu .more .more-icon[data-v-11fc2358]{float:right;color:#b2bac2;font-size:1.2rem;line-height:2rem}.nav-menu.user-dropdown-list[data-v-11fc2358]{width:13rem;right:0;left:auto;-webkit-transform:translateX(0);transform:translateX(0)}.nav-menu.user-dropdown-list .nav-menu-item-group[data-v-11fc2358]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.04)}.more-dropdown-list[data-v-11fc2358]{position:absolute;left:auto;top:0;right:102%;-webkit-transform:translateX(0);transform:translateX(0);display:none}.more-dropdown-list[data-v-11fc2358]:after{content:\"\";position:absolute;top:0;left:100%;width:1.3rem;height:4rem}.notification[data-v-11fc2358]{position:relative}.notification .count[data-v-11fc2358]{position:absolute;left:50%;bottom:43%;margin:0;padding:.4rem .67rem;font-size:1rem;line-height:1;text-align:center;color:#f1f1f1;background-color:#007fff;border-radius:3rem;border:2px solid #fff;word-break:normal}.fengwei[data-v-11fc2358]{display:inline-block;width:1em;height:1em;margin-right:.8rem;font-size:1.2em;vertical-align:middle;color:#b2bac2}.iconfont[data-v-405614c3]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-405614c3]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-405614c3]:before{content:\"\\E601\"}.content[data-v-405614c3]{min-height:calc(100vh - 188px)}.nav-list[data-v-405614c3]{position:relative}.nav-list .nav-item.right[data-v-405614c3]{position:absolute;top:0;right:0}.nav-list .nav-item.right .link[data-v-405614c3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav-list .more-city[data-v-405614c3]{cursor:pointer;position:relative;font-size:1.16rem;color:#71777c;padding:0 1rem;height:100%;margin-right:10px}.nav-list .more-city:hover .txt[data-v-405614c3]{color:#007fff}.nav-list .more-city:hover .txt[data-v-405614c3]:after{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.nav-list .more-city:hover .menu[data-v-405614c3]{display:block}.nav-list .more-city .txt[data-v-405614c3]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav-list .more-city .txt span[data-v-405614c3]{margin-right:5px}.nav-list .more-city .txt[data-v-405614c3]:after{display:block;content:\"\";width:0;height:0;line-height:0;font-size:0;border-style:solid;border-width:6px 6px 0;border-color:#72777b transparent transparent;-webkit-transform-origin:center center;transform-origin:center center;transition:-webkit-transform .25s linear;transition:transform .25s linear;transition:transform .25s linear,-webkit-transform .25s linear}.nav-list .more-city .menu[data-v-405614c3]{display:none;position:absolute;left:0;top:100%;min-width:100px;border-radius:2px;background-color:#fff;box-shadow:0 2px 6px 0 rgba(0,0,0,.15)}.nav-list .more-city .menu span[data-v-405614c3]{padding-left:10px;display:block;height:30px;line-height:30px;font-size:14px;cursor:pointer}.nav-list .more-city .menu span.route-active[data-v-405614c3],.nav-list .more-city .menu span[data-v-405614c3]:hover{background-color:#f9f9f9;color:#007fff}.panel[data-v-405614c3]{height:280px;display:-webkit-box;display:-ms-flexbox;display:flex}.panel .banner[data-v-405614c3]{-ms-flex-negative:0;flex-shrink:0;width:470px;min-width:320px;height:280px;background-color:#fff;border-radius:2px;overflow:hidden;box-shadow:1px 1px 1px rgba(50,50,50,.1)}.panel .calendar[data-v-405614c3]{-ms-flex-negative:0;flex-shrink:0;width:475px;margin-left:15px;position:relative}.panel .calendar[data-v-405614c3]:after{left:0;right:0;bottom:0;top:0;position:absolute;content:\"\";background-color:#fff;border-radius:2px;overflow:hidden;z-index:-1;box-shadow:1px 1px 1px rgba(50,50,50,.1)}.events-empty[data-v-405614c3]{margin-top:35px;text-align:center;color:#666;font-size:13px}.events-wrap[data-v-405614c3]{overflow:hidden;width:100%}.events-list[data-v-405614c3]{margin-top:35px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;margin-left:-7px;margin-right:-7px}.copy-right[data-v-405614c3]{text-align:center;font-size:14px;opacity:.7;color:#3a4e64;margin-bottom:40px}.copy-right a[data-v-405614c3]{color:inherit}@media (max-width:720px){.nav-list .more-city[data-v-405614c3],.nav-list .nav-item.right[data-v-405614c3]{display:none}}@media (max-width:960px){.panel .banner[data-v-405614c3]{width:100%}.panel .calendar[data-v-405614c3]{display:none}.panel .events-list[data-v-405614c3]{margin-left:0;margin-right:0}}.iconfont[data-v-ebc274d8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-ebc274d8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-ebc274d8]:before{content:\"\\E601\"}.banner[data-v-ebc274d8]{position:relative}.banner .view-box[data-v-ebc274d8]{overflow:hidden;position:relative;width:100%;height:100%}.banner .btn[data-v-ebc274d8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;width:4rem;height:100%;font-size:1.8rem;color:#000;cursor:pointer;color:#fff}.banner .btn[data-v-ebc274d8]:hover{opacity:.6}.banner .btn.prev-btn[data-v-ebc274d8]{left:0}.banner .btn.next-btn[data-v-ebc274d8]{right:0}.indicators[data-v-ebc274d8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:4rem;right:4rem;bottom:20px}.indicators li[data-v-ebc274d8]{width:8px;height:8px;border-radius:50%;border:1px solid #fff;cursor:pointer;box-shadow:1px 1px 1px rgba(50,50,50,.1)}.indicators li[data-v-ebc274d8]:not(:last-child){margin-right:5px}.indicators li.active[data-v-ebc274d8],.indicators li[data-v-ebc274d8]:hover{border:1px solid #007fff;background-color:#007fff}.fade-enter-active[data-v-ebc274d8],.fade-leave-active[data-v-ebc274d8]{position:absolute;left:0;width:100%;transition:all .25s ease}.fade-enter-to[data-v-ebc274d8],.fade-leave[data-v-ebc274d8]{-webkit-transform:translateX(0);transform:translateX(0)}.transition--prev .fade-leave-to[data-v-ebc274d8]{-webkit-transform:translateX(100%);transform:translateX(100%)}.transition--next .fade-leave-to[data-v-ebc274d8],.transition--prev .fade-enter[data-v-ebc274d8]{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.transition--next .fade-enter[data-v-ebc274d8]{-webkit-transform:translateX(100%);transform:translateX(100%)}.iconfont[data-v-eb654012]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-eb654012]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-eb654012]:before{content:\"\\E601\"}.link[data-v-eb654012]{display:block;width:100%;height:100%;background-color:#ccc;background-position:50%;background-size:cover;background-repeat:no-repeat}.iconfont[data-v-219ca2d8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-219ca2d8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-219ca2d8]:before{content:\"\\E601\"}.calendar .calendar-month[data-v-219ca2d8]{height:30px;padding-bottom:5px;padding-top:5px;height:25px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;cursor:default}.calendar .calendar-month .time-text[data-v-219ca2d8]{width:80px;font-size:14px;color:#007fff;font-weight:700;text-align:center}.calendar .calendar-month .arrow-left[data-v-219ca2d8]{cursor:pointer;width:50px;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.calendar .calendar-month .arrow-left[data-v-219ca2d8]:before{display:block;content:\"\";width:0;height:0;border-style:solid;border-width:8px;border-color:transparent #007fff transparent transparent}.calendar .calendar-month .arrow-left[data-v-219ca2d8]:active:before,.calendar .calendar-month .arrow-left[data-v-219ca2d8]:hover:before{border-color:transparent #003486 transparent transparent}.calendar .calendar-month .arrow-right[data-v-219ca2d8]{cursor:pointer;width:50px;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:.8}.calendar .calendar-month .arrow-right[data-v-219ca2d8]:before{display:block;content:\"\";width:0;height:0;border-style:solid;border-width:8px;border-color:transparent transparent transparent #007fff}.calendar .calendar-month .arrow-right[data-v-219ca2d8]:active:before,.calendar .calendar-month .arrow-right[data-v-219ca2d8]:hover:before{border-color:transparent transparent transparent #003486}.calendar .calendar-week[data-v-219ca2d8]{padding-left:10px;padding-right:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;background-color:#007fff;color:#fff;text-align:center;font-size:12px}.calendar .calendar-week span[data-v-219ca2d8]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.calendar .calendar-days[data-v-219ca2d8]{padding-left:10px;padding-right:10px;padding-top:7px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;text-align:center}.calendar .calendar-days .day[data-v-219ca2d8]{cursor:pointer;width:14.28571%;box-sizing:border-box;padding-bottom:5px;padding-top:3px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.calendar .calendar-days .day .txt[data-v-219ca2d8]{width:20px;height:20px;line-height:20px;color:#72777b;font-size:13px;opacity:.4}.calendar .calendar-days .day .events[data-v-219ca2d8]{height:5px;margin-top:3px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.calendar .calendar-days .day .events span.ev[data-v-219ca2d8]{width:4px;height:4px;border-radius:50%;overflow:hidden;border:1px solid #007fff}.calendar .calendar-days .day .events span.ev[data-v-219ca2d8]:not(:last-child){margin-right:3px}.calendar .calendar-days .day .events-panel[data-v-219ca2d8]{display:none;position:absolute;width:168px;top:100%;z-index:1;margin-top:2px;border:1px solid #007fff;background-color:#fff;border-radius:2px;padding:10px}.calendar .calendar-days .day .events-panel[data-v-219ca2d8]:before{content:\"\";border-width:0 6px 6px;border-color:transparent transparent #007fff;border-style:solid;position:absolute;top:0;left:50%;-webkit-transform:translate(-50%,-6px);transform:translate(-50%,-6px)}.calendar .calendar-days .day .events-panel .events-inner[data-v-219ca2d8]{max-height:75px;overflow:hidden}.calendar .calendar-days .day .events-panel .msg[data-v-219ca2d8]{line-height:15px;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.calendar .calendar-days .day .events-panel .msg .link[data-v-219ca2d8]{color:#007fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.calendar .calendar-days .day .events-panel .msg[data-v-219ca2d8]:before{display:block;-ms-flex-negative:0;flex-shrink:0;content:\"\";width:5px;height:5px;border-radius:50%;background-color:#003386;overflow:hidden;margin-right:5px}.calendar .calendar-days .day:hover .events span.ev[data-v-219ca2d8]{background-color:#007fff}.calendar .calendar-days .day:hover .events-panel[data-v-219ca2d8]{display:block}.calendar .calendar-days .day.holiday .txt[data-v-219ca2d8]{color:#007fff}.calendar .calendar-days .day.cur-month .txt[data-v-219ca2d8]{opacity:1}.calendar .calendar-days .day.cur-day .txt[data-v-219ca2d8]{border-radius:50%;color:#fff;background-color:#007fff}.iconfont[data-v-d669ffa0]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-d669ffa0]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-d669ffa0]:before{content:\"\\E601\"}.events[data-v-d669ffa0]{cursor:pointer;width:25%;padding-left:7px;padding-right:7px;box-sizing:border-box;position:relative;margin-bottom:30px}.events[data-v-d669ffa0],.events[data-v-d669ffa0]:before{transition:all .2s linear}.events[data-v-d669ffa0]:before{content:\"\";position:absolute;left:7px;right:7px;top:0;bottom:0;z-index:-1;border-radius:2px;overflow:hidden;background-color:#fff;box-shadow:1px 1px 1px rgba(0,0,0,.15)}.events[data-v-d669ffa0]:hover{-webkit-transform:translateY(-3px);transform:translateY(-3px)}.events[data-v-d669ffa0]:hover:before{box-shadow:0 7px 15px rgba(0,0,0,.1)}.events .events-inner[data-v-d669ffa0]{border-radius:2px;overflow:hidden;color:#333}.events .events-inner .banner[data-v-d669ffa0]{padding-top:58.82%;background-color:#ccc;background-repeat:no-repeat}.message[data-v-d669ffa0]{padding:20px 12px 15px}.message span[data-v-d669ffa0]{vertical-align:middle}.message .icon[data-v-d669ffa0]{width:16px;height:16px;margin-right:5px;display:inline-block;background-position:50%;background-repeat:no-repeat;background-size:contain}.message .icon.icon-calendar[data-v-d669ffa0]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABICAYAAACqT5alAAAABGdBTUEAALGPC/xhBQAAAwpJREFUeAHtW7+LGlEQvtU1ggRCQg5MOtNe6dkGPPI3SIojCVyaNIIgaHVFKgVRsEkTCYQUwT8hBIVUEZPS9iwjmCbksPDXZmazKy/y3u4+4t6+YZ8gvp2Z9/y++cbZOTmNI8Gj3+/fmk6nry3LeoYhhmG8z+Vyl6VSaSnYEolZFqcpQumQrbl+IF4DG17WXZsKr7I4EyLQrrKsn2dj/VGseZh4NhebkDAEPHCDmFeejXFHsuRh4tlscF6EI0Ef9pvGjvCuaQ2HQ3M8Hp+nUqkvlUrlyivTrVYrv16vv3nFhO0zTfO0Wq1+93qfTqfzaLVaPS4UCh+KxeIaY22F2+32vdFo9HW73b7bbDZ3vQ6h5EMuyAm5IUebMNzHksvl8hNc5CmRkcSaR47INQH3MRwsdmShpT90DvvBOdS2MTGckJsxMRiC4swj1wRsfMFChDI4xWucrFg7a3Nj9v03ee1ikMT53Gg2m3MgfZ8BO89kMifZbPaXM8X8M1rOZrM7i8ViAvHHzJ4oltI4ITk/jUajYXHQDoD003K5PGd93W73GMh+BNsZa49wLY1TRBg5INk3yWTSvv04JfQKbFEri9jYhxTO3X2YPcFZI7FLIMpxKWWSwhm7SUsTVqpYQwCjFQ4hqUodqRVWSo4QwGiFQ0iqUkcKJ616vW4ohVQSjOBvhL/feEieRTpcf4ZJyxcAvFY4QJJIhwi79P+yEnXJ/e5/6Dg/3Lqk/TJE3a8Vpq6gH/7YKSz8mna/m/plTjW/qPvHTmFNWLXSPDQerfChM6raedKztKj77Xf1qOL8EqxL2i9D1P1aYeoK+uGPncJ6lvYrCer+2JW0Jky9ZP3wx05hMrO0n3JB/bFTWBMOWhpU47TCVJULilvP0kEzRTVOf4apKhcUt1Y4aKaoxmGX/g3gb1MlIIn7Gkt6IrmJcvgECfcoM5DE3jPgV2n467TPsPFMcjO18EGtVnuSgJ+nWel0+hzQD6gxkMA7QI7Idfcvwo7SL+GQC3iewJN6I7sGDtifeqDsWyQL66M/9RJVEFaNX94AAAAASUVORK5CYII=)}.message .icon.icon-location[data-v-d669ffa0]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABICAYAAACqT5alAAAABGdBTUEAALGPC/xhBQAACUVJREFUeAHtm2dsVlUYx+mAlqGAq0JEKX4wMY5+QFARIyaosRGIo0YTBy6UIqFltEowbqCDEoQiagQHjjoRlSBiFTWRKKIfHGikMqyIaEuhi5bW36Mv6fve+5w731uj6UmO7z3P/j9nn2KvXj2lJwM9GfgvZyAl6uA7OztTFi1adFZ7e/sp+Boaq1kpKSkNfNceqf3799+an59/kHakJRLAS5YsyWhqaro4NTV1YkdHxwQQDHFDQQJakdlIgt5Eb+2cOXP2uOkE4ScVcFVVVZ+ampo7CWQegR8XJKCYTgcJeC49PX3ezJkzd4WwY1NNCmAZtgsXLrwW649QR9i8BCe0APyxPn36PFpQUFAf3EyXZmjApaWl/Q8fPvwMJq/qMpvcL0Dvorcn0ttbw1oOBXjBggUnE8waejgnbCAe9JvwdVNRUdGrHmSNIoEBl5eXn83K+x5gTzBajzEItI3PTdQfqbW0f2MxO5rvoXyfhI2L+D6e6liQ7UQAzEWljoIOzECAFy9enNXa2vo5gQ5zsC2sD6hPUtcVFxfvF4JWsJPKGnA+vDzq7dRMTS6Odi32quLanj99A5Ytp7m5uZogz3Pw8jW8IoJa7yCjshg5wxg5D2H/BgRSNSF6upl6AVvXlxrfieYbMD3xJMHc5mB0+ejRo6ePGzeu3UHGlcVieAXDfjW+jtKEAbybw0rOtGnT/tD4JpqaQZNwWVnZOfBuNfBl78ynV6eGBSv2Z8+evVZGETZ3aP7gnXTw4MF5Gs+J5gswQ60ER+qoILB7WUwqnZz55ZG8b9LS0i5HT46hWrmLkZCtMUw0NXhNuKSk5HKG2DsaD9rzBCdzzliWLVs2gB65DIGzqH+fpUleDcfIdfRmjVERBttfLj9vUW0dRKJfJNHXO+nH8zwDZu5uIsCx8cryjcO9AwYMONV08OficExbW9tcdKcirq6+2KiGN4fAvxCbWsH/E9iQFTyhoNvJKMieNWvWjgSGoWHLmCbHynw8zsZoPBw+aALLqMg5dOjQVnQL0VXBik344/j5DFAzpG0o90NvsvLQTeGkN9FKN7U9AW5pabkCA5rszoEDBz6hGSf40whGeu5kjW+lIZtGrWD4SnJshd6vZfib1ohJNgUDQQNhE2Xumgy+NmXKFDlFJZTq6up0gn+dOiiB4a3BOlSq7vEAfkkzgZ+xlZWVgzWeleYJMMNWHc4EsMZqUNqbN2+WuXa6xvNASyXB6tGRebqFWLTrYnpDQ8O5HmyrwzRBb+XKlZlk8JgE4j+NluHDh3+i0GUhu0Oje6Xhbwx7vpoweBs1O/iU1xTX4trD+/btG6JZwcGveXl5h6085u5Qgsqx0v22WYhkK7IVQw+LXHIAE7zJkLxH2QoBZduIwQgjDGqqX2RNcSaYce1h5pO68JCI+gRLsYZJXpN1oQ3U+CTUdOtS47TacAWMg9+tStKGnqXReZnYq9H90kioyc4Jmi3k1Titsq6AMbTHqiRt6Orc5v1pG8mwbVWaDRfaNwa+OnTx+atBPoHsCnjw4MFi6FCCFg0cnCjnYyt9+vTpDdA+tNJ9tjvY8tZqOkyZUzU6HZCco6UcLAD3udUJDtIaGxsvtdKljXyZRvdKQ3+19i4tz8DYGK/ZYSp9qtGtNNceFgXAfWxVlDbZnqTRCfY96G9oPDcaYP8k+Lma3Pbt2+XMLW9hCQWdXUm9PGB9U4KHrsaEpUuXHtvV7PoiiJtoyVOPn9KC8NWmx3ds3qIZM3WIJuuph5nHH+GsUTFwNHdctTc47B/o16/fheioc1Gx9QvXvIvQkwuHrXCgGQnxGhsDArG9q9E1mifAzGO5lr2tGYCWX1FRMULjyQLGw8AEFiC5bckxtMMqR7A7qPcB9jQeAjZb+dKmB1OopfJr5aPbzH1cPdNbZaVtM6AJCY0MT8KhOi9x+tWgQYPGxBJjMtFL7tW8eJ6BnSyS0MBvDT36nVEhxuBefR/rxQMGuddI6tUGno2cbqMYCH379l3HXwRly7EtGgSeU1dX9yy/1wC+02CiFz0uhwN1yJp0SPSV2L3fxMefemU0yXsa0qJMsK0YrzIZgn4VPfHyihUr+jnI+GIBVha+FwBsGol1vXv3Nr2zqb48AxZtAC9TrcSI0sP19fUfc7U7xUnOjUfSegO2DHurqBkmeeJ5urCwsNnE1+hpGtFE27Bhw57x48dfAn+YSQb6EObbncgdlZub+8X69etlq/FUpCeZOnn8GecNvnNdlDoyMjJuxH6di1wC2zRUEoTiGwzb6wD0QjzN4buOXniFuiYzM3OjTAtNlnesM5GRRVG2nTM1GSsN+XdZ8NySYlXzvkof0ZTjHSeenbTV29IROesvAcrQE71a6m9UWfzkIiB/PfT9rwVY5XM50Xnef/Hzd/Hdw6LF/JJ35of/MfGv/PdbevcMkmjcEUxR+Vq0jhgB7FK+ZYv6VwqHlPlBwEqwgQCz0e/HoeOKHVUm8FszcuRIX3tvfCyBAIsBVtMKfuTI2a2F0bUwzF8nAwOWUxPZfqo70eKvlgvJqjA+AwOOOS0lCHWrCROUSRdfJaatzaRjpYcCzEq5myFWaTUaRRuwu9jLHw9rOxRgcc7rxKMEcyBsIB70Hwjbu+IjNGCeVvZhZ5GHgAOLkNBt2dnZqwIbiFMMDThmq5ygBHgkBdvztD/rBHGWFMDM5QPM5flBAvCgs4WXkFc9yHkSSQpg8ZSVlSWL105PXn0I0bv3UH0fIU0ukgZ48uTJLRzoi02OgtABKjeiDUF0TTpJAywOuL28SJCfmZz5pLdzZp7pU8dVPKmAY94KkjQEl7MDfO+KwKdA0gEzBKWHAx/uY/HX8fRqeqX0CTFRPOmAxTwrdjG97OutKT4sdB/0+28o4/WdviMBzPVxJ6DLnRw78H7gjTuyq2ckgAUMC84Cemq3AzCVxUpfoP1TKFU4ADEywBwWGgFc6DOmNUHeqfz4iAywBEHwr/DzvpeAZM7z7DrDi2wYmUgBS2Dcpu4GTJuHIOfzv+r87EEulEjkgGN7qeNtioT8xJNRSSgkHpUjByxxsBA9BCjjAgaPq67+SO8Rh2exbgHstIAB9q2oF6r4bHQLYHEoCxjgVsc75/tnar6FFmmz2wALilGjRt0M6Nv4fJbfR6hj5F0sUoQ9xnsy0JOB/1UG/gJLeStzjxn4iwAAAABJRU5ErkJggg==)}.message .title[data-v-d669ffa0]{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2;height:40px;font-size:14px;font-weight:700}.message .date[data-v-d669ffa0]{margin-top:6px}.message .bottom[data-v-d669ffa0]{margin-top:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.message .bottom .address[data-v-d669ffa0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.message .bottom .btn-join[data-v-d669ffa0]{width:100px;height:25px;border-radius:30px;background-color:#4d91fd;line-height:25px;color:#fff;text-align:center}.message .bottom .btn-join.btn-detail[data-v-d669ffa0]{background-color:#aaa}@media (max-width:960px){.events[data-v-d669ffa0]{width:33.33%}}@media (max-width:720px){.events[data-v-d669ffa0]{width:50%}}@media (max-width:480px){.events[data-v-d669ffa0]{width:100%}}.set-new-password-form[data-v-3ab1b045]{margin:6rem auto;width:40rem;max-width:100%}.reset-password-form[data-v-1097766d]{padding:4rem 3rem;font-size:1.16rem;background-color:#fff;border-radius:2px;box-sizing:border-box}.title[data-v-1097766d]{margin:0;font-size:2rem;text-align:center}.form-body[data-v-1097766d]{margin-top:3rem;text-align:center}.input[data-v-1097766d]{margin:0;padding:.5rem 0;font-size:1.1em;border:none;border-bottom:1px solid #eee;outline:none}.input.full-width[data-v-1097766d]{width:100%}.btn[data-v-1097766d]{padding:.8rem 1.6rem;color:#fff;background-color:#007fff;border-radius:2px;border:none;outline:none}.input-group[data-v-1097766d]:not(:first-child){margin-top:2rem}.submit-btn[data-v-1097766d]{margin-top:3rem;width:100%}.index-link[data-v-1097766d]{display:inline-block;margin:1.5rem auto 0;color:#007fff;text-decoration:none}.message[data-v-1097766d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:3rem 0;background-color:#fff;z-index:1}.iconfont[data-v-41d33d72]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-41d33d72]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-41d33d72]:before{content:\"\\E601\"}.entry-public-view[data-v-41d33d72]{position:relative}.entry-public-view .entry-public-main[data-v-41d33d72]{position:relative;background-color:#fff;max-width:700px;padding:50px;padding-left:24px;padding-right:24px;box-sizing:border-box}.entry-public-view .entry-public-main .thumb--header[data-v-41d33d72]{position:absolute;left:0;right:0;top:0;width:100%;height:240px}.entry-public-view .entry-public-main .thumb-placeholder[data-v-41d33d72]{height:190px}.entry-public-view .entry-public-main .entry-public-info[data-v-41d33d72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.entry-public-view .entry-public-main .entry-public-info .info-item[data-v-41d33d72]{margin-right:1rem}.entry-public-view .entry-public-main .banner[data-v-41d33d72]{display:block;margin-top:1.5em;margin-bottom:1.5em;padding:1em;font-size:1.167rem;line-height:1.5;color:inherit;background-color:#e4f1eb;border:1px solid #dbe4e0;border-radius:4px}.entry-public-view .entry-public-main .banner .text[data-v-41d33d72]{margin-right:.5em}.entry-public-view .entry-public-main .banner .link[data-v-41d33d72]{color:#259}.entry-public-view .entry-public-main .originalUrl[data-v-41d33d72]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:.5em}.entry-public-view .entry-public-main .originalUrl a[data-v-41d33d72]{color:#259}.entry-public-view .entry-public-main .tag-list[data-v-41d33d72]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:2rem auto 3rem;-ms-flex-wrap:wrap;flex-wrap:wrap}.entry-public-view .entry-public-main .tag-list .item[data-v-41d33d72]{cursor:pointer;margin-right:.6em;margin-bottom:.6rem;padding:.2em .7em;border-radius:2px;border:1px solid #f1f1f1;transition:color .3s,border-color .3s,background-color .3s;line-height:1.5}.entry-public-view .entry-public-main .tag-list .item[data-v-41d33d72]:hover{color:#007fff;border-color:rgba(0,127,255,.15);background-color:rgba(0,127,255,.05)}.entry-public-view .related-entry-list-box[data-v-41d33d72]{display:none}.entry-public-view .related-entry-list-box .title[data-v-41d33d72]{text-align:center;margin:1.3rem 0;color:#909090;font-size:1.3rem}.entry-public-view .related-entry-list-box .related-entry-list[data-v-41d33d72]{padding:1.3rem 2.5rem;border:1px solid #f1f1f1;border-radius:2px}.entry-public-view .related-entry-list-box .related-entry-list .item[data-v-41d33d72]{margin-bottom:1.6rem}.entry-public-view .related-entry-list-box .related-entry-list .item[data-v-41d33d72]:last-child{margin-bottom:0}.entry-public-view .origin-link[data-v-41d33d72]{display:block;margin:2rem 0;padding:1rem .5rem;font-size:1.3rem;line-height:1;text-align:center;color:#fff;background-color:#007fff;border-radius:3px}.entry-public-view .entry-public-aside[data-v-41d33d72]{position:absolute;right:0;top:0;width:240px}.entry-public-view .entry-public-aside .section[data-v-41d33d72]{background-color:#fff;border-radius:2px;overflow:hidden}.entry-public-view .entry-public-aside .section[data-v-41d33d72]:not(:last-child){margin-bottom:1.5rem}.entry-public-view .comment-box[data-v-41d33d72]{margin:0 2rem 6rem}.entry-public-view .comment-box .comment-title[data-v-41d33d72]{margin:1.3rem 0;font-size:1.3rem;font-weight:500;text-align:center;color:#909090}.entry-public-view .comment-box .comment-list[data-v-41d33d72]{margin-top:1rem}@media (min-width:960px){.entry-public-view .wechat-banner[data-v-41d33d72]{display:none}}@media (max-width:700px){.entry-public-view .entry-public-main .thumb--header[data-v-41d33d72]{height:180px}.entry-public-view .entry-public-main .thumb-placeholder[data-v-41d33d72]{height:170px}.entry-public-view .entry-public-main .related-entry-list-box .title[data-v-41d33d72]{text-align:left}.entry-public-view .entry-public-main .related-entry-list-box .related-entry-list[data-v-41d33d72]{padding:0;border:none}.entry-public-view .entry-public-main .comment-box[data-v-41d33d72]{margin:0 0 6rem}.entry-public-view .entry-public-main[data-v-41d33d72]{max-width:100%;padding-top:12px;padding-bottom:12px}}@media (max-width:960px){.entry-public-view .entry-public-main[data-v-41d33d72]{margin:0 auto}.entry-public-view .entry-public-main .related-entry-list-box[data-v-41d33d72]{display:block}.entry-public-view .entry-public-aside[data-v-41d33d72]{display:none}}.sticky .sticky-section[data-v-41d33d72]{position:fixed;top:87px;width:20rem;opacity:1;z-index:5;transition:all .2s}.sticky.top .sticky-section[data-v-41d33d72]{top:27px}.article-suspended-panel[data-v-41d33d72]{position:fixed;margin-left:-85px;top:200px}.collection-section[data-v-41d33d72]{background-color:#fff}.collection-section .aside-header[data-v-41d33d72]{padding:1rem 1.3rem;font-size:1.16rem;color:#333;border-bottom:1px solid hsla(0,0%,59%,.1)}.collection-section .link[data-v-41d33d72]{display:block;padding:1rem 1.3rem}.collection-section .link[data-v-41d33d72]:hover{background-color:hsla(0,0%,85%,.1)}.collection-section .link .title[data-v-41d33d72]{display:block;font-size:1.16rem;color:#333}.collection-section .link .meta[data-v-41d33d72]{display:block;margin-top:.2rem;font-size:1.1rem;color:#c2c2c2}.iconfont[data-v-9db545a6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-9db545a6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-9db545a6]:before{content:\"\\E601\"}.related-entry .thumb[data-v-9db545a6]{width:88px;height:48px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.5rem;margin-left:0;margin-top:0}.related-entry .title[data-v-9db545a6]{font-size:1.3rem;cursor:pointer;color:#333}.related-entry .title[data-v-9db545a6]:hover{color:#275b8c}.related-entry .entry-link[data-v-9db545a6]{display:-webkit-box;display:-ms-flexbox;display:flex}.related-entry .entry-link .info[data-v-9db545a6]{overflow:hidden}.related-entry .entry-link .title-row[data-v-9db545a6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:400px;font-weight:600}.related-entry .entry-link .meta-list[data-v-9db545a6]{margin-top:.5rem;color:#ddd}.related-entry .entry-link .meta-list .meta[data-v-9db545a6],.related-entry .entry-link .meta-list[data-v-9db545a6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.related-entry .entry-link .meta-list .meta[data-v-9db545a6]{font-size:1.1rem;margin-right:1rem}.related-entry .entry-link .meta-list .meta .icon[data-v-9db545a6]{margin-right:.3rem}@media (max-width:600px){.related-entry .thumb[data-v-9db545a6]{display:none}.related-entry .entry-link .title-row[data-v-9db545a6]{width:100%}}.wechat-sidebar-block:hover .close-btn[data-v-1988842d]{display:block}.close-btn[data-v-1988842d]{position:absolute;top:.5rem;right:.5rem;padding:.3rem .5rem;font-size:1rem;color:#333;opacity:.5;cursor:pointer;z-index:1;display:none}.close-btn[data-v-1988842d]:hover{opacity:1}.wechat-banner[data-v-a0f279e6]{position:relative;font-size:0}.wechat-img[data-v-a0f279e6]{width:100%;image-rendering:-webkit-optimize-contrast}.item[data-v-f6632f66]{display:block;padding:.8rem 1.3rem}.item[data-v-f6632f66]:hover{background-color:hsla(0,0%,85%,.1)}.entry-title[data-v-f6632f66]{font-size:1.16rem;color:#333}.entry-meta-box[data-v-f6632f66]{margin-top:.4rem}.entry-meta[data-v-f6632f66]{display:inline-block;margin-right:1.5rem;font-size:1.1rem;color:#c2c2c2}.entry-meta .count[data-v-f6632f66]{margin-left:.4rem}.panel-btn[data-v-2febaf4d]{position:relative;margin-bottom:.75rem;width:3rem;height:3rem;background-color:#fff;background-position:50%;background-repeat:no-repeat;border-radius:50%;box-shadow:0 2px 4px 0 rgba(0,0,0,.04);cursor:pointer}.panel-btn:not(.share-btn).active.with-badge[data-v-2febaf4d]:after{background-color:#74ca46}.panel-btn.with-badge[data-v-2febaf4d]:after{content:attr(badge);position:absolute;top:0;left:75%;padding:.1rem .4rem;font-size:1rem;text-align:center;line-height:1;white-space:nowrap;color:#fff;background-color:#c6c6c6;border-radius:.7rem;-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:scale(.75);transform:scale(.75)}.panel-btn.like-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PHBhdGggZmlsbD0iI0M2QzZDNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOS4xMzEgMTYuMzU4di4wNDJsLS4wMzEtLjAyMS0uMDMxLjAyMXYtLjA0MmMtLjg3LS41ODktMTAuNDM1LTcuMjI2LTcuNTE3LTEyLjM0OC43NjMtMS4zNCAxLjgwMy0xLjcgMi42OS0xLjkxNiAyLjQ4LS42MDYgNC41OCAxLjkwOCA0Ljg1OCAyLjI1OS4yNzktLjM1MSAyLjM3Ny0yLjg2NSA0Ljg1OS0yLjI2Ljg4Ni4yMTcgMS45MjYuNTc4IDIuNjkgMS45MTdDMTkuNTY1IDkuMTMyIDEwIDE1Ljc2OSA5LjEzIDE2LjM1OHoiLz48L3N2Zz4=)}.panel-btn.like-btn.active[data-v-2febaf4d],.panel-btn.like-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PHBhdGggZmlsbD0iIzc0Q0E0NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOS4xMzEgMTYuMzU4di4wNDJsLS4wMzEtLjAyMS0uMDMxLjAyMXYtLjA0MmMtLjg3LS41ODktMTAuNDM1LTcuMjI2LTcuNTE3LTEyLjM0OC43NjMtMS4zNCAxLjgwMy0xLjcgMi42OS0xLjkxNiAyLjQ4LS42MDYgNC41OCAxLjkwOCA0Ljg1OCAyLjI1OS4yNzktLjM1MSAyLjM3Ny0yLjg2NSA0Ljg1OS0yLjI2Ljg4Ni4yMTcgMS45MjYuNTc4IDIuNjkgMS45MTdDMTkuNTY1IDkuMTMyIDEwIDE1Ljc2OSA5LjEzIDE2LjM1OHoiLz48L3N2Zz4K)}.panel-btn.comment-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iI0M2QzZDNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMi43IDEuOThoMTIuNmExLjggMS44IDAgMCAxIDEuOCAxLjh2Ny40MTJhMS44IDEuOCAwIDAgMS0xLjggMS44aC00LjEzNUw5IDE1LjY2OGwtMi4wNDktMi42NzZIMi43YTEuOCAxLjggMCAwIDEtMS44LTEuOFYzLjc4YTEuOCAxLjggMCAwIDEgMS44LTEuOHptLjkgMi41NDF2Ljg0N2gxMC44di0uODQ3SDMuNnptMCAyLjU0MXYuODQ3aDEwLjh2LS44NDdIMy42em0wIDIuNTQydi44NDdIOXYtLjg0N0gzLjZ6Ii8+PC9zdmc+)}.panel-btn.comment-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iIzc0Q0E0NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMy4yIDEuOThoMTIuNmExLjggMS44IDAgMCAxIDEuOCAxLjh2Ny40MTJhMS44IDEuOCAwIDAgMS0xLjggMS44aC00LjEzNUw5LjUgMTUuNjY4bC0yLjA0OS0yLjY3NkgzLjJhMS44IDEuOCAwIDAgMS0xLjgtMS44VjMuNzhhMS44IDEuOCAwIDAgMSAxLjgtMS44em0uOSAyLjU0MXYuODQ3aDEwLjh2LS44NDdINC4xem0wIDIuNTQxdi44NDdoMTAuOHYtLjg0N0g0LjF6bTAgMi41NDJ2Ljg0N2g1LjR2LS44NDdINC4xeiIvPjwvc3ZnPgo=)}.panel-btn.collect-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iI0M2QzZDNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuNiAxMi45NkgxMXYxaDIuNnYyLjZoMXYtMi42aDIuNnYtMWgtMi42di0yLjZoLTF2Mi42ek0xIDIuOTZoMTYuMnYxSDF2LTF6bTAgNC45NWgxNi4ydjFIMXYtMXptMCA1LjA1aDl2MUgxdi0xeiIvPjwvc3ZnPg==)}.panel-btn.collect-btn.active[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSIgdmlld0JveD0iMCAwIDE4IDE5Ij48cGF0aCBmaWxsPSIjNzRDQTQ2IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMy4xNjYgMTMuMzQ0bDMuMzY5LTMuMzQ3LjcwNy43MDctNC4wNDMgNC4wMTctLjAxOS0uMDE5LS4wMDguMDA5TDExIDEyLjcwN2wuNzA3LS43MDcgMS40NTkgMS4zNDR6TTEgMmgxNi4ydjFIMVYyem0wIDQuOTVoMTYuMnYxSDF2LTF6TTEgMTJoOXYxSDF2LTF6Ii8+PC9zdmc+Cg==)}.panel-btn.collect-btn.open[data-v-2febaf4d],.panel-btn.collect-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iIzc0Q0E0NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuNiAxMi45NkgxMXYxaDIuNnYyLjZoMXYtMi42aDIuNnYtMWgtMi42di0yLjZoLTF2Mi42ek0xIDIuOTZoMTYuMnYxSDF2LTF6bTAgNC45NWgxNi4ydjFIMXYtMXptMCA1LjA1aDl2MUgxdi0xeiIvPjwvc3ZnPgo=)}.panel-btn.weibo-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSI+PGcgZmlsbD0iI0M2QzZDNiI+PHBhdGggZD0iTTEzLjA4NCA4LjU5NGMtLjIzNi0uMDcxLS4zOTgtLjEyLS4yNzQtLjQzMi4yNjgtLjY3OC4yOTYtMS4yNjQuMDA1LTEuNjgxLS41NDQtLjc4My0yLjAzNC0uNzQtMy43NDItLjAyMSAwLS4wMDEtLjUzNi4yMzYtLjQtLjE5Mi4yNjQtLjg1LjIyNC0xLjU2Mi0uMTg1LTEuOTczLS45MjYtLjkzNC0zLjM5LjAzNS01LjUwMyAyLjE2MS0xLjU4MiAxLjU5My0yLjUgMy4yODEtMi41IDQuNzQxIDAgMi43OTIgMy41NTYgNC40OSA3LjAzNiA0LjQ5IDQuNTYyIDAgNy41OTctMi42NjggNy41OTctNC43ODYgMC0xLjI4LTEuMDcxLTIuMDA3LTIuMDM0LTIuMzA3ek03LjUzIDE0LjY4NmMtMi43NzYuMjc2LTUuMTczLS45ODctNS4zNTQtMi44MjMtLjE4LTEuODM1IDEuOTI1LTMuNTQ2IDQuNzAyLTMuODIyIDIuNzc3LS4yNzcgNS4xNzQuOTg3IDUuMzU0IDIuODIxLjE4IDEuODM2LTEuOTI0IDMuNTQ4LTQuNzAyIDMuODI0em04LjU4NC0xMS4yMDJhNC40MjEgNC40MjEgMCAwIDAtNC4yMjctMS4zNzcuNjQ2LjY0NiAwIDAgMCAuMjY4IDEuMjY1IDMuMTQ1IDMuMTQ1IDAgMCAxIDMuMDA1Ljk3OWMuNzgyLjg3My45OTUgMi4wNjQuNjYgMy4xMDktLjExLjM0LjA3Ni43MDQuNDE0LjgxNC4zMzcuMTEuNy0uMDc2LjgwOS0uNDE2di0uMDAyYTQuNDkgNC40OSAwIDAgMC0uOTMtNC4zNzIiLz48cGF0aCBkPSJNMTQuNDIyIDUuMDIxYTIuMTUzIDIuMTUzIDAgMCAwLTIuMDU5LS42Ny41NTYuNTU2IDAgMCAwIC4yMzEgMS4wODhjLjM1Ny0uMDc1Ljc0NS4wMzYgMS4wMDcuMzI4LjI2Mi4yOTMuMzMzLjY5Mi4yMiAxLjA0MmEuNTUzLjU1MyAwIDEgMCAxLjA1Mi4zNDIgMi4xODUgMi4xODUgMCAwIDAtLjQ1LTIuMTNNNy44MDggOS40NTNjLTEuMzIxLS4zNDYtMi44MTUuMzE3LTMuMzg5IDEuNDg5LS41ODQgMS4xOTUtLjAyIDIuNTIyIDEuMzE2IDIuOTU2IDEuMzgzLjQ0OSAzLjAxMy0uMjQgMy41OC0xLjUzLjU1OC0xLjI2LS4xNC0yLjU2LTEuNTA3LTIuOTE1em0tMS4wMDkgMy4wNTNjLS4yNjkuNDMtLjg0NC42Mi0xLjI3Ny40Mi0uNDI3LS4xOTUtLjU1My0uNjk2LS4yODQtMS4xMTYuMjY1LS40Mi44Mi0uNjA2IDEuMjUtLjQyNC40MzYuMTg2LjU3NS42ODQuMzExIDEuMTJ6bS44ODUtMS4xNDRjLS4wOTcuMTY3LS4zMTIuMjQ4LS40OC4xNzgtLjE2Ni0uMDY4LS4yMTgtLjI1NS0uMTI0LS40Mi4wOTctLjE2My4zMDQtLjI0My40NjktLjE3Ny4xNjcuMDYyLjIyNy4yNTEuMTM1LjQyeiIvPjwvZz48L3N2Zz4=)}.panel-btn.weibo-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iI0Q1MkIyQSIgZD0iTTEzLjU4NCA4LjU5NGMtLjIzNi0uMDcxLS4zOTgtLjEyLS4yNzQtLjQzMi4yNjgtLjY3OC4yOTYtMS4yNjQuMDA1LTEuNjgxLS41NDQtLjc4My0yLjAzNC0uNzQtMy43NDItLjAyMSAwLS4wMDEtLjUzNi4yMzYtLjQtLjE5Mi4yNjQtLjg1LjIyNC0xLjU2Mi0uMTg1LTEuOTczLS45MjYtLjkzNC0zLjM5LjAzNS01LjUwMyAyLjE2MS0xLjU4MiAxLjU5My0yLjUgMy4yODEtMi41IDQuNzQxIDAgMi43OTIgMy41NTYgNC40OSA3LjAzNiA0LjQ5IDQuNTYyIDAgNy41OTctMi42NjggNy41OTctNC43ODYgMC0xLjI4LTEuMDcxLTIuMDA3LTIuMDM0LTIuMzA3ek04LjAzIDE0LjY4NmMtMi43NzYuMjc2LTUuMTczLS45ODctNS4zNTQtMi44MjMtLjE4LTEuODM1IDEuOTI1LTMuNTQ2IDQuNzAyLTMuODIyIDIuNzc3LS4yNzcgNS4xNzQuOTg3IDUuMzU0IDIuODIxLjE4IDEuODM2LTEuOTI0IDMuNTQ4LTQuNzAyIDMuODI0eiIvPjxwYXRoIGZpbGw9IiNFODkyMTMiIGQ9Ik0xNi42MTQgMy40ODRhNC40MjEgNC40MjEgMCAwIDAtNC4yMjctMS4zNzcuNjQ2LjY0NiAwIDAgMCAuMjY4IDEuMjY1IDMuMTQ1IDMuMTQ1IDAgMCAxIDMuMDA1Ljk3OWMuNzgyLjg3My45OTUgMi4wNjQuNjYgMy4xMDktLjExLjM0LjA3Ni43MDQuNDE0LjgxNC4zMzcuMTEuNy0uMDc2LjgwOS0uNDE2di0uMDAyYTQuNDkgNC40OSAwIDAgMC0uOTMtNC4zNzIiLz48cGF0aCBmaWxsPSIjRTg5MjEzIiBkPSJNMTQuOTIyIDUuMDIxYTIuMTUzIDIuMTUzIDAgMCAwLTIuMDU5LS42Ny41NTYuNTU2IDAgMCAwIC4yMzEgMS4wODhjLjM1Ny0uMDc1Ljc0NS4wMzYgMS4wMDcuMzI4LjI2Mi4yOTMuMzMzLjY5Mi4yMiAxLjA0MmEuNTUzLjU1MyAwIDEgMCAxLjA1Mi4zNDIgMi4xODUgMi4xODUgMCAwIDAtLjQ1LTIuMTMiLz48cGF0aCBmaWxsPSIjMDQwMDAwIiBkPSJNOC4zMDggOS40NTNjLTEuMzIxLS4zNDYtMi44MTUuMzE3LTMuMzg5IDEuNDg5LS41ODQgMS4xOTUtLjAyIDIuNTIyIDEuMzE2IDIuOTU2IDEuMzgzLjQ0OSAzLjAxMy0uMjQgMy41OC0xLjUzLjU1OC0xLjI2LS4xNC0yLjU2LTEuNTA3LTIuOTE1em0tMS4wMDkgMy4wNTNjLS4yNjkuNDMtLjg0NC42Mi0xLjI3Ny40Mi0uNDI3LS4xOTUtLjU1My0uNjk2LS4yODQtMS4xMTYuMjY1LS40Mi44Mi0uNjA2IDEuMjUtLjQyNC40MzYuMTg2LjU3NS42ODQuMzExIDEuMTJ6bS44ODUtMS4xNDRjLS4wOTcuMTY3LS4zMTIuMjQ4LS40OC4xNzgtLjE2Ni0uMDY4LS4yMTgtLjI1NS0uMTI0LS40Mi4wOTctLjE2My4zMDQtLjI0My40NjktLjE3Ny4xNjcuMDYyLjIyNy4yNTEuMTM1LjQyeiIvPjwvZz48L3N2Zz4=)}.panel-btn.qq-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iI0M2QzZDNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUuNDUyIDExLjM4OGMtLjAxLS45NTctLjM4LTEuNDc2LS44MDYtMi4xNTQtLjE5Mi0uMjgyLS40MTQtLjQ3Mi0uNjA1LS43NTUtLjAzLS4xNTMuMDMyLS4yNjgtLjAxMi0uNjctLjA0My0uNjA1LS4yNjQtLjgzOS0uMzEtLjkxMy4wMi0uMTYtLjA0NC0xLjQ4NC0uNTIzLTIuMjY3LTEuNDYyLTIuNjEyLTQuMjMtMi43MDctNC41NjgtMi43MDloLS4wMDRjLS4zMzguMDAyLTMuMTA2LjA5Ny00LjU2OCAyLjcwOS0uNDc5Ljc4My0uNTQzIDIuMTA3LS41MjMgMi4yNjctLjA0Ni4wNzQtLjI2Ny4zMDgtLjMxLjkxMi0uMDQ0LjQwMy4wMTguNTE4LS4wMTIuNjcxLS4xOTEuMjgzLS40MTMuNDczLS42MDUuNzU1LS40MjUuNjc4LS43OTcgMS4xOTctLjgwNiAyLjE1NC0uMDA3LjcxNC4xNjIgMS42ODcuNjYzIDEuNy4xNTgtLjAxMi4yOTMtLjExNy41NjctLjQyNGE2LjMgNi4zIDAgMCAwIC40MjgtLjU4OGMuMDU2LjE0OS4xOSAxLjE4NCAxLjEyIDEuNzIzLS45NTYuNDUtMS40MjQuNzM1LTEuNDQgMS4zMi4wMi4zMzcuNDIzLjc4NyAxLjE2NS45OTZhNi4wNSA2LjA1IDAgMCAwIDIuOTI4LjA0OWMuNTM1LS4xMy42OTYtLjI1OSAxLjM5NS0uNjQzLjcuMzg0Ljg2LjUxNCAxLjM5NS42NDNhNi4wNTIgNi4wNTIgMCAwIDAgMi45MjgtLjA0OWMuNzQyLS4yMSAxLjE0NS0uNjU5IDEuMTY1LS45OTctLjAxNi0uNTg0LS40ODQtLjg2OC0xLjQ0LTEuMzE5LjkzLS41MzkgMS4wNjQtMS41NzQgMS4xMi0xLjcyM2E2LjMgNi4zIDAgMCAwIC40MjguNTg4Yy4yNzQuMzA3LjQxLjQxMi41NjcuNDI0LjUtLjAxMy42Ny0uOTg2LjY2My0xLjd6Ii8+PC9zdmc+)}.panel-btn.qq-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOSI+PHBhdGggZmlsbD0iIzU1QjJGMSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUuOTUyIDExLjM4OGMtLjAxLS45NTctLjM4LTEuNDc2LS44MDYtMi4xNTQtLjE5Mi0uMjgyLS40MTQtLjQ3Mi0uNjA1LS43NTUtLjAzLS4xNTMuMDMyLS4yNjgtLjAxMi0uNjctLjA0My0uNjA1LS4yNjQtLjgzOS0uMzEtLjkxMy4wMi0uMTYtLjA0NC0xLjQ4NC0uNTIzLTIuMjY3LTEuNDYyLTIuNjEyLTQuMjMtMi43MDctNC41NjgtMi43MDloLS4wMDRjLS4zMzguMDAyLTMuMTA2LjA5Ny00LjU2OCAyLjcwOS0uNDc5Ljc4My0uNTQzIDIuMTA3LS41MjMgMi4yNjctLjA0Ni4wNzQtLjI2Ny4zMDgtLjMxLjkxMi0uMDQ0LjQwMy4wMTguNTE4LS4wMTIuNjcxLS4xOTEuMjgzLS40MTMuNDczLS42MDUuNzU1LS40MjUuNjc4LS43OTcgMS4xOTctLjgwNiAyLjE1NC0uMDA3LjcxNC4xNjIgMS42ODcuNjYzIDEuNy4xNTgtLjAxMi4yOTMtLjExNy41NjctLjQyNGE2LjMgNi4zIDAgMCAwIC40MjgtLjU4OGMuMDU2LjE0OS4xOSAxLjE4NCAxLjEyIDEuNzIzLS45NTYuNDUtMS40MjQuNzM1LTEuNDQgMS4zMi4wMi4zMzcuNDIzLjc4NyAxLjE2NS45OTZhNi4wNSA2LjA1IDAgMCAwIDIuOTI4LjA0OWMuNTM1LS4xMy42OTYtLjI1OSAxLjM5NS0uNjQzLjcuMzg0Ljg2LjUxNCAxLjM5NS42NDNhNi4wNTIgNi4wNTIgMCAwIDAgMi45MjgtLjA0OWMuNzQyLS4yMSAxLjE0NS0uNjU5IDEuMTY1LS45OTctLjAxNi0uNTg0LS40ODQtLjg2OC0xLjQ0LTEuMzE5LjkzLS41MzkgMS4wNjQtMS41NzQgMS4xMi0xLjcyM2E2LjMgNi4zIDAgMCAwIC40MjguNTg4Yy4yNzQuMzA3LjQxLjQxMi41NjcuNDI0LjUtLjAxMy42Ny0uOTg2LjY2My0xLjd6Ii8+PC9zdmc+)}.panel-btn.wechat-btn[data-v-2febaf4d]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PHBhdGggZmlsbD0iI0M2QzZDNiIgZD0iTTguMzg3IDguMDdjMS45MzktMS44MjggNS4xMjYtMS45NDIgNy4yNy0uNDE2Ljk0NC42NzUgMS42ODggMS42NzIgMS44ODggMi44MzVhMy40NjkgMy40NjkgMCAwIDEtLjEwNyAxLjY2NGMtLjE5OS42MTUtLjU1NyAxLjE2NS0uOTg1IDEuNjQ0LS4yNjUuMjk2LS41Ni41NjYtLjg3LjgxMy0uMDUuMDQtLjE3NC4wOTQtLjE1NC4xNmwuMDQzLjE0Mi4wODIuMjc1LjMzNCAxLjExMy0xLjM2Mi0uNzUtLjM0Mi0uMTg3Yy0uMDI4LS4wMTUtLjExMy4wMjQtLjE0Mi4wMzEtLjA3Ni4wMi0uMTUzLjAzOC0uMjMuMDU3LS4xOC4wNDMtLjM2LjA4NS0uNTQyLjEyYTUuNjUgNS42NSAwIDAgMS0yLjE4My0uMDE2Yy0xLjE1My0uMjMtMi4yMjgtLjgwMS0zLjAxNS0xLjY4Mi0uODM0LS45MzQtMS4yMjMtMi4yMjMtLjk5Ni0zLjQ2LjE2Ni0uOTAyLjY0OS0xLjcxOCAxLjMxLTIuMzQzbS4xNzktMS45NDdjLjQ1MiAwIC43OC0uMzI5Ljc4LS43ODNhLjc1My43NTMgMCAwIDAtLjc4LS43OGMtLjQzOSAwLS45MzYuMjk0LS45MzYuNzggMCAuNDg2LjQ5Ny43ODMuOTM2Ljc4M000LjIwNSA0LjU2Yy0uNDM5IDAtLjkzOS4yOTQtLjkzOS43OCAwIC40ODcuNS43ODQuOTM5Ljc4NC40NTEgMCAuNzc3LS4zMy43NzctLjc4M2EuNzUyLjc1MiAwIDAgMC0uNzc3LS43OG05LjgxMyA0LjUzOGMtLjM1IDAtLjY3OS4zNzktLjYwOC43MjcuMDgyLjQwNS40OTYuNTk0Ljg2OS40OS4yOS0uMDguNTY4LS4zNDUuNTEyLS42NzEtLjA2LS4zNTctLjQ0My0uNTQ2LS43NzMtLjU0Nm0tMy40MjcgMGMtLjM1IDAtLjY4NC4zNzYtLjYxMy43MjcuMDgzLjQwNy41MDIuNTk0Ljg3NS40OS4yOS0uMDguNTY2LS4zNDUuNTExLS42NzEtLjA2LS4zNTktLjQ0Mi0uNTQ2LS43NzMtLjU0Nm0tNS4yMDctNy4xNWMyLjQ1Ni0uMjgzIDUuMjE4LjcwNiA2LjU0NyAyLjg5Mi4yNzQuNDUuNDY4Ljk0LjU4NCAxLjQ1M2E1LjU1NSA1LjU1NSAwIDAgMC0zLjk0IDEuMDYxIDQuOTM0IDQuOTM0IDAgMCAwLTEuNzUgMi40NyA0LjcxIDQuNzEgMCAwIDAtLjAxNSAyLjY5NWMtLjc1LjA2LTEuNDc0LS4wMjYtMi4yMS0uMTc2bC0uNTEyLS4xMDVjLS4wNy0uMDE0LS4xNDQuMDQ0LS4yMDguMDc2bC0uMzA1LjE1My0xLjI3My42NDEtLjQzNC4yMTkuNDg2LTEuNDY3LjEyNS0uMzc4Yy4wMTktLjA1OC0uMDMtLjA2Ny0uMDc2LS4xYTguMzYzIDguMzYzIDAgMCAxLS41MzgtLjQyM0E2LjI0IDYuMjQgMCAwIDEgLjg0MyA5Ljg0N2E0LjU4NCA0LjU4NCAwIDAgMS0uNzQ2LTMuNTgyQy4zMTIgNS4yMy44ODcgNC4zIDEuNjU5IDMuNTk0YzEuMDItLjkzOCAyLjM1OC0xLjQ5IDMuNzI1LTEuNjQ3Ii8+PC9zdmc+)}.panel-btn.wechat-btn[data-v-2febaf4d]:hover{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOSIgaGVpZ2h0PSIxOCI+PHBhdGggZmlsbD0iIzQ0QjAzNSIgZD0iTTguODg3IDguMDdjMS45MzktMS44MjggNS4xMjYtMS45NDIgNy4yNy0uNDE2Ljk0NC42NzUgMS42ODggMS42NzIgMS44ODggMi44MzVhMy40NjkgMy40NjkgMCAwIDEtLjEwNyAxLjY2NGMtLjE5OS42MTUtLjU1NyAxLjE2NS0uOTg1IDEuNjQ0LS4yNjUuMjk2LS41Ni41NjYtLjg3LjgxMy0uMDUuMDQtLjE3NC4wOTQtLjE1NC4xNmwuMDQzLjE0Mi4wODIuMjc1LjMzNCAxLjExMy0xLjM2Mi0uNzUtLjM0Mi0uMTg3Yy0uMDI4LS4wMTUtLjExMy4wMjQtLjE0Mi4wMzEtLjA3Ni4wMi0uMTUzLjAzOC0uMjMuMDU3LS4xOC4wNDMtLjM2LjA4NS0uNTQyLjEyYTUuNjUgNS42NSAwIDAgMS0yLjE4My0uMDE2Yy0xLjE1My0uMjMtMi4yMjgtLjgwMS0zLjAxNS0xLjY4Mi0uODM0LS45MzQtMS4yMjMtMi4yMjMtLjk5Ni0zLjQ2LjE2Ni0uOTAyLjY0OS0xLjcxOCAxLjMxLTIuMzQzbS4xNzktMS45NDdjLjQ1MiAwIC43OC0uMzI5Ljc4LS43ODNhLjc1My43NTMgMCAwIDAtLjc4LS43OGMtLjQzOSAwLS45MzYuMjk0LS45MzYuNzggMCAuNDg2LjQ5Ny43ODMuOTM2Ljc4M000LjcwNSA0LjU2Yy0uNDM5IDAtLjkzOS4yOTQtLjkzOS43OCAwIC40ODcuNS43ODQuOTM5Ljc4NC40NTEgMCAuNzc3LS4zMy43NzctLjc4M2EuNzUyLjc1MiAwIDAgMC0uNzc3LS43OG05LjgxMyA0LjUzOGMtLjM1IDAtLjY3OS4zNzktLjYwOC43MjcuMDgyLjQwNS40OTYuNTk0Ljg2OS40OS4yOS0uMDguNTY4LS4zNDUuNTEyLS42NzEtLjA2LS4zNTctLjQ0My0uNTQ2LS43NzMtLjU0Nm0tMy40MjcgMGMtLjM1IDAtLjY4NC4zNzYtLjYxMy43MjcuMDgzLjQwNy41MDIuNTk0Ljg3NS40OS4yOS0uMDguNTY2LS4zNDUuNTExLS42NzEtLjA2LS4zNTktLjQ0Mi0uNTQ2LS43NzMtLjU0Nm0tNS4yMDctNy4xNWMyLjQ1Ni0uMjgzIDUuMjE4LjcwNiA2LjU0NyAyLjg5Mi4yNzQuNDUuNDY4Ljk0LjU4NCAxLjQ1M2E1LjU1NSA1LjU1NSAwIDAgMC0zLjk0IDEuMDYxIDQuOTM0IDQuOTM0IDAgMCAwLTEuNzUgMi40NyA0LjcxIDQuNzEgMCAwIDAtLjAxNSAyLjY5NWMtLjc1LjA2LTEuNDc0LS4wMjYtMi4yMS0uMTc2bC0uNTEyLS4xMDVjLS4wNy0uMDE0LS4xNDQuMDQ0LS4yMDguMDc2bC0uMzA1LjE1My0xLjI3My42NDEtLjQzNC4yMTkuNDg2LTEuNDY3LjEyNS0uMzc4Yy4wMTktLjA1OC0uMDMtLjA2Ny0uMDc2LS4xYTguMzYzIDguMzYzIDAgMCAxLS41MzgtLjQyMyA2LjI0IDYuMjQgMCAwIDEtMS4wMjItMS4xMTMgNC41ODQgNC41ODQgMCAwIDEtLjc0Ni0zLjU4MmMuMjE1LTEuMDMzLjc5LTEuOTYzIDEuNTYyLTIuNjcgMS4wMi0uOTM4IDIuMzU4LTEuNDkgMy43MjUtMS42NDciLz48L3N2Zz4=)}.panel-btn.wechat-btn:hover .wechat-qr-code-img[data-v-2febaf4d]{display:block}.share-title[data-v-2febaf4d]{margin:2.5rem 0 1rem;font-size:1rem;text-align:center;color:#c6c6c6;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.wechat-qr-code-img[data-v-2febaf4d]{position:absolute;top:100%;left:50%;width:8rem;height:8rem;margin-top:1rem;border:.5rem solid #fff;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:none}.books-recommend-footer .heading[data-v-d4c2d1ba]{color:#909090;height:25px;line-height:25px;font-size:1.3rem;margin:1.3rem 0}.books-recommend-footer .book-list .book[data-v-d4c2d1ba]{display:-webkit-box;display:-ms-flexbox;display:flex}.books-recommend-footer .book-list .book[data-v-d4c2d1ba]:not(:last-child){margin-bottom:15px}.books-recommend-footer .book-list .poster[data-v-d4c2d1ba]{width:52px;height:72px;margin-right:10px;-ms-flex-negative:0;flex-shrink:0;box-shadow:0 2px 7px 0 rgba(0,0,0,.26)}.books-recommend-footer .book-list .poster .poster-img[data-v-d4c2d1ba]{width:100%;height:100%}.books-recommend-footer .book-list .info[data-v-d4c2d1ba]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.books-recommend-footer .book-list .info .title[data-v-d4c2d1ba]{font-size:1.3rem;font-weight:500;margin-bottom:3px;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:3}.books-recommend-footer .book-list .info .bought[data-v-d4c2d1ba]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#878c90}.books-recommend-footer .book-list .info .bought span[data-v-d4c2d1ba]{margin-right:5px}.books-recommend-footer .book-list .info .bought .try-read[data-v-d4c2d1ba]{height:20px;color:#fff;font-size:12px;padding-left:5px;line-height:20px;padding-right:5px;border-radius:2px;background-color:#007fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.books-recommend-footer .book-list .info .bought .try-read[data-v-d4c2d1ba]:after{width:0;height:0;content:\"\";display:inline-block;border-style:solid;border-width:3px 0 3px 3px;margin-left:3px;border-color:transparent transparent transparent #fff}@media (min-width:720px){.books-recommend-footer .heading[data-v-d4c2d1ba]{text-align:center}}.entry-detail-view[data-v-3c658d17]{margin-bottom:2rem}.iconfont[data-v-491c7b26]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-491c7b26]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-491c7b26]:before{content:\"\\E601\"}.entry-detail-panel[data-v-491c7b26]{width:960px;margin:auto;box-sizing:border-box}.header[data-v-491c7b26]{width:100%;height:200px;position:relative;background-color:#007fff;z-index:1}.header-background-image[data-v-491c7b26]{width:100%;height:200px;position:absolute;top:0;left:0}.mask[data-v-491c7b26]{content:\"\";display:block;background-color:rgba(0,0,0,.4);position:absolute;top:0;left:0;right:0;bottom:0}.header-entry-info[data-v-491c7b26]{position:absolute;bottom:0;width:100%;box-sizing:border-box;padding:0 2rem 2.2rem 4rem}.header-entry-info .title[data-v-491c7b26]{color:#fff}.header-entry-info .action-box[data-v-491c7b26]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header-entry-info .action-box .action-list[data-v-491c7b26],.header-entry-info .action-box[data-v-491c7b26]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.header-entry-info .action-box .action-list .like-btn[data-v-491c7b26],.header-entry-info .action-box .action-list .read-btn[data-v-491c7b26]{font-size:1.16rem;font-weight:700;padding:.6rem 1rem;margin-right:1.3rem}.header-entry-info .action-box .action-list .like-btn[data-v-491c7b26]{background-color:#fff;color:#000}.header-entry-info .action-box .action-list .like-btn.liked[data-v-491c7b26],.header-entry-info .action-box .action-list .like-btn[data-v-491c7b26]:hover{color:#007fff}.header-entry-info .action-box .action-list .collect-btn[data-v-491c7b26]{font-size:1.16rem;padding:.4rem 1rem;color:#fff;background-color:transparent;border:1px solid currentColor;position:relative}.header-entry-info .action-box .action-list .collect-btn[data-v-491c7b26]:hover{background-color:hsla(0,0%,100%,.15)}.header-entry-info .action-box .action-list .collect-btn.active[data-v-491c7b26]{background-color:#83c73a;border-color:#83c73a}.header-entry-info .action-box .action-list .collect-btn.active[data-v-491c7b26]:hover{background-color:#76b433;border-color:#76b433}.header-entry-info .action-box .action-list .collect-btn .icon[data-v-491c7b26]{margin-right:.3rem}.header-entry-info .action-box .meta-tag-list .item[data-v-491c7b26]{float:left;margin-left:.5rem;background-color:transparent;border:1px solid #fff;color:#fff;font-size:1rem;padding:.3rem .6rem;border-radius:2px;cursor:pointer}.header-entry-info .action-box .meta-tag-list .item.hot[data-v-491c7b26]{color:#ff8900;border-color:#ff8900}.main[data-v-491c7b26]{display:-webkit-box;display:-ms-flexbox;display:flex}.main .entry-detail-left[data-v-491c7b26]{background-color:#fff;border-left:1px solid #f1f1f1;border-right:1px solid #f1f1f1;width:660px}.main .entry-detail-left .info-section[data-v-491c7b26]{padding:2.7rem 2.7rem 1.5rem 10.6rem;border-bottom:1px solid #f1f1f1;position:relative}.main .entry-detail-left .info-title[data-v-491c7b26]{-ms-flex-align:center;font-size:1.2rem;color:#909090;white-space:nowrap}.main .entry-detail-left .info-title .user-info-block[data-v-491c7b26],.main .entry-detail-left .info-title[data-v-491c7b26]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}.main .entry-detail-left .info-title .user-info-block[data-v-491c7b26]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;-ms-flex-align:center;margin-right:2rem;overflow:hidden}.main .entry-detail-left .info-title .user-info-block .avatar[data-v-491c7b26]{position:absolute;width:2.7rem;height:2.7rem;top:2.3rem;left:7rem;border-radius:50%}.main .entry-detail-left .info-title .user-info-block .username[data-v-491c7b26]{color:#333;font-size:1.2rem;font-weight:600}.main .entry-detail-left .info-title .user-info-block .user-link[data-v-491c7b26]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:.6rem;min-width:0}.main .entry-detail-left .info-title .user-info-block .position[data-v-491c7b26]{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.main .entry-detail-left .info-title .entry-info[data-v-491c7b26]{margin:0 0 0 auto}.main .entry-detail-left .banner-section[data-v-491c7b26]{margin:2rem 2rem 0}@media (min-width:960px){.main .entry-detail-left .banner-section[data-v-491c7b26]{display:none}}.main .entry-detail-left .abstract[data-v-491c7b26]{padding:.7rem 1.2rem .4rem 1.3rem;border-left:2px solid #ddd;word-break:break-all;white-space:pre-wrap;font-size:1.25rem;line-height:1.5;color:#333;margin-top:1rem}.main .entry-detail-left .edit[data-v-491c7b26]{float:right;cursor:pointer}.main .entry-detail-left .edit .icon[data-v-491c7b26]{margin-right:.3em}.main .entry-detail-left .entry-info-mobile[data-v-491c7b26]{margin-top:1rem;font-size:1.2rem;color:#909090;display:none}.main .section[data-v-491c7b26]:after{display:table;content:\"\";clear:both}.main .comment-section[data-v-491c7b26]{padding:2.7rem 2.7rem 2.7rem 6.7rem}.main .comment-form[data-v-491c7b26]{margin-bottom:1rem}.main .comment-list-header[data-v-491c7b26]{margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #f5f5f5}.main .entry-detail-right[data-v-491c7b26]{width:300px}@media (max-width:600px){.entry-detail-panel[data-v-491c7b26]{width:100%}.entry-detail-right[data-v-491c7b26]{display:none}.header-entry-info[data-v-491c7b26]{padding:0 2rem 2.2rem}.header-entry-info .title[data-v-491c7b26]{font-size:1.4rem}.main .entry-detail-left[data-v-491c7b26]{width:100%}.main .entry-detail-left .info-section[data-v-491c7b26]{padding:2rem}.main .entry-detail-left .info-title .entry-info[data-v-491c7b26],.main .entry-detail-left .info-title .user-info .avatar[data-v-491c7b26]{display:none}.main .entry-detail-left .entry-info-mobile[data-v-491c7b26]{display:block}.main .comment-section[data-v-491c7b26]{padding:2rem}.meta-tag-list[data-v-491c7b26]{display:none}}.comment-list-header[data-v-edceec6e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:1.167rem;color:#666}.sort-list[data-v-edceec6e]{margin:0;padding:0;list-style:none}.sort-list .item[data-v-edceec6e]{float:right;margin-left:1rem;cursor:pointer}.sort-list .item.active[data-v-edceec6e],.sort-list .item[data-v-edceec6e]:hover{color:#007fff}.item[data-v-1d5eec4d]{position:relative}.item:not(:last-of-type):not(.highlight) .vote[data-v-1d5eec4d]{margin-bottom:2rem}.item:not(:last-of-type):not(.highlight) .vote[data-v-1d5eec4d]:before{content:\"\";position:absolute;left:4rem;bottom:0;right:0;border-bottom:1px solid #f5f5f5}.more[data-v-1d5eec4d]{margin:1rem 0 2rem}.more-link[data-v-1d5eec4d]{display:block;padding:1em;font-size:1.2rem;text-align:center;color:#6799cd;background-color:#f4f8fd;border:1px solid currentColor;border-radius:2px}.more-link[data-v-1d5eec4d]:hover{color:#007fff}@media (min-width:601px){.other-box[data-v-1d5eec4d]{margin-left:4rem;position:relative;height:20px;margin-bottom:25px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.other-box[data-v-1d5eec4d]:before{content:\"\";position:absolute;top:10px;left:0;width:100%;border-bottom:1px solid #f5f5f5}.other[data-v-1d5eec4d]{position:relative;z-index:2;margin:0 auto;background-color:#fff;color:#909090;padding-left:12px;padding-right:12px;font-size:13px}}@media (max-width:600px){.other-box[data-v-1d5eec4d]{height:40px;margin-bottom:30px}.other[data-v-1d5eec4d]{padding-top:6px;padding-bottom:6px;height:25px;line-height:25px;font-size:14px;background:#f8f9fa;color:#b4b9c4;border-bottom:1px solid #ccc;border-top:1px solid #ccc;padding-left:15px;position:absolute;left:0;right:0}}.iconfont[data-v-3c5520ba]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3c5520ba]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3c5520ba]:before{content:\"\\E601\"}.vote[data-v-3c5520ba]{position:relative;padding:0 0 2rem}.like-btn[data-v-3c5520ba]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;padding:.6rem 0;width:3rem;font-size:1.2rem;line-height:1;color:#6799cd;background-color:rgba(233,242,250,.5);border-radius:2px;border:none;outline:none;cursor:pointer}.like-btn.liked[data-v-3c5520ba]{color:#fff;background-color:#6799cd}.like-btn[data-v-3c5520ba]:hover{background-color:#e9f2fa}.like-btn .like-count[data-v-3c5520ba]{margin:0}.content-box[data-v-3c5520ba]{margin-left:4rem}.header[data-v-3c5520ba]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header .user-info[data-v-3c5520ba],.header[data-v-3c5520ba]{display:-webkit-box;display:-ms-flexbox;display:flex}.header .user-info[data-v-3c5520ba]{-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;white-space:nowrap;overflow:hidden}.header .user-info .username[data-v-3c5520ba]{font-size:13px;font-weight:600;color:#333;margin-right:.6rem}.header .user-info .position[data-v-3c5520ba]{font-size:1rem;color:#909090;text-overflow:ellipsis;overflow:hidden;margin-left:8px}.header .date[data-v-3c5520ba]{margin-left:2rem;color:#909090;white-space:nowrap}.content[data-v-3c5520ba]{margin:.3rem 0 .5rem;font-size:13px;line-height:1.7;color:#333}.content .content-html[data-v-3c5520ba]{margin-right:.5em;white-space:pre-wrap}.content .show-all[data-v-3c5520ba]{color:#6799cd;white-space:nowrap;cursor:pointer}.content .image[data-v-3c5520ba]{display:block;margin:.5em 0;max-width:100%;cursor:zoom-in}.ctrl-box .ctrl-btn[data-v-3c5520ba],.ctrl-box[data-v-3c5520ba]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ctrl-box .ctrl-btn[data-v-3c5520ba]{position:relative;margin-right:15px;font-size:20px;color:#909090}.ctrl-box .ctrl-btn .icon[data-v-3c5520ba]{width:16px;margin-right:5px;vertical-align:middle}.ctrl-box .ctrl-btn .title[data-v-3c5520ba]{font-size:13px}.ctrl-box .ctrl-btn .sub-comment--arrow[data-v-3c5520ba]{position:absolute;top:100%;left:0;width:100%}.ctrl-box .ctrl-btn .sub-comment--arrow[data-v-3c5520ba]:before{content:\"\";position:absolute;left:30px;border-width:0 9px 10px;border-style:solid;border-color:transparent transparent #eaeaea;top:100%}.ctrl-box .ctrl-btn .sub-comment--arrow[data-v-3c5520ba]:after{content:\"\";position:absolute;top:calc(100% + 2px);left:31px;border-width:0 8px 8px;border-style:solid;border-color:transparent transparent #fff}.iconfont[data-v-6fc3ca6d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-6fc3ca6d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-6fc3ca6d]:before{content:\"\\E601\"}.share-popup[data-v-6fc3ca6d]{position:absolute;top:100%;left:-1px;margin-top:1rem;width:11rem;font-size:1.167rem;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);z-index:10}.share-popup[data-v-6fc3ca6d]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.share-popup .share-item[data-v-6fc3ca6d]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.6rem .8rem}.share-popup .share-item .icon[data-v-6fc3ca6d]{margin-right:.6rem}.share-popup .share-item[data-v-6fc3ca6d]:hover{background-color:#f7f8fa}.share-popup .share-item.weibo[data-v-6fc3ca6d]{border-bottom:1px solid rgba(178,186,194,.15)}.share-popup .share-item.wechat .qr-code-box[data-v-6fc3ca6d]{margin:.8rem .4rem .7rem;width:100%;box-sizing:border-box}.share-popup .share-item.wechat .qr-code-box .qr-code[data-v-6fc3ca6d]{width:100%}.iconfont[data-v-fe6b869a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-fe6b869a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-fe6b869a]:before{content:\"\\E601\"}.aside[data-v-fe6b869a]{border-right:1px solid #f1f1f1;background-color:#f8f9fa;padding:0 2.5rem;height:100%}.aside .block-header[data-v-fe6b869a]{padding-top:2.5rem;margin:0 0 1.3rem;font-size:1.3rem}.aside .share .item[data-v-fe6b869a]{position:relative;border-radius:20px;border:1px solid #ddd;background-color:transparent;font-size:1rem;padding:.27rem 1.74rem;cursor:pointer;margin-top:.4rem;margin-bottom:.4rem;margin-right:.6rem;line-height:1.7rem;display:inline-block;vertical-align:middle}.aside .share .item .inline[data-v-fe6b869a]{height:1.3rem;vertical-align:middle;margin-right:.6rem}.aside .share .item.wechat:hover .qr-code[data-v-fe6b869a]{display:block;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.aside .share .item.wechat .qr-code[data-v-fe6b869a]{position:absolute;top:120%;left:50%;width:10rem;height:10rem;border:.5rem solid #fff;box-shadow:0 .5em .5em #ddd;-webkit-transform:translate(-50%);transform:translate(-50%);display:none;z-index:1}.aside .tag .item[data-v-fe6b869a]{display:inline-block;position:relative}.aside .tag .item a[data-v-fe6b869a]{display:block;background-color:#fff;padding:.6rem 1rem;margin:.5rem .5rem .5rem 0;cursor:pointer;border-radius:2px;font-size:1rem;line-height:1.5rem;border:1px solid #f1f1f1;color:#909090}.aside .attender-list .item[data-v-fe6b869a],.aside .liker-list .item[data-v-fe6b869a]{display:inline-block;position:relative;width:2.7rem;height:2.7rem;margin:.3rem;border-radius:50%;overflow:hidden;cursor:pointer}.aside .attender-list .item.more[data-v-fe6b869a],.aside .liker-list .item.more[data-v-fe6b869a]{text-align:center;line-height:2.7rem;vertical-align:top;color:#909090;background-color:#fff}.aside .attender-list .item .avatar[data-v-fe6b869a],.aside .liker-list .item .avatar[data-v-fe6b869a]{width:2.7rem;height:2.7rem;border-radius:50%}.aside .like[data-v-fe6b869a]{padding-bottom:60px}.aside .related-entry-block .item[data-v-fe6b869a]{position:relative;margin:.6rem 0 1.3rem}.aside .participant[data-v-fe6b869a]{padding-bottom:2.5rem}.aside .aside-block.app[data-v-fe6b869a]{background-color:#fff;margin-top:30px}.banner-wx[data-v-fe6b869a]{margin-top:30px}.collection-block .title[data-v-fe6b869a]{display:block;font-size:1.16rem;color:#333}.collection-block .title[data-v-fe6b869a]:hover{color:#275b8c}.collection-block .meta[data-v-fe6b869a]{margin-top:.5rem;font-size:1rem;color:#909090}@media (max-width:600px){.aside[data-v-fe6b869a]{display:none}}.badge-modal-box[data-v-27de1b66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.badge-modal[data-v-27de1b66]{position:relative;width:48rem;max-width:100%;background-color:#fff;border-radius:3px;overflow:hidden}.header[data-v-27de1b66]{padding:1.5rem 2rem;font-size:1.4rem;color:#fff;line-height:1.2;background-color:#007fff;cursor:default}.header .close-btn[data-v-27de1b66]{float:right;font-size:1.2rem;line-height:1;opacity:.3;cursor:pointer}.header .close-btn[data-v-27de1b66]:hover{opacity:.8}.body[data-v-27de1b66]{padding:2rem;font-size:1.3rem}.tips-box[data-v-27de1b66]{margin:0 0 2rem}.badge-box[data-v-27de1b66]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 2rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.badge-box .badge[data-v-27de1b66]{margin-bottom:.5rem}.badge-box .badge[data-v-27de1b66]:not(:last-child){margin-right:2rem}.share-code-box[data-v-27de1b66]{margin:0 0 .5rem;font-size:1.2rem}.share-code-box .share-code[data-v-27de1b66]:not(:last-child){margin-bottom:.5rem}.badge[data-v-46d7daa4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:20px;color:#ccc;cursor:pointer}.badge.active .radio[data-v-46d7daa4]{border:3px solid #007fff;box-shadow:none}.radio[data-v-46d7daa4]{display:inline-block;position:relative;margin-right:.7rem;width:1rem;height:1rem;border:1px solid #ccc;border-radius:50%;box-shadow:inset 0 0 2px #ccc;box-sizing:border-box}.share-code[data-v-001738f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.share-code .title[data-v-001738f6]{width:6em}.share-code .text[data-v-001738f6]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;height:2rem;color:inherit;background-color:#fff;border:1px solid #ccc;border-right:none;outline:none;box-sizing:border-box;cursor:text}.share-code .copy-btn[data-v-001738f6]{padding:0;width:4em;height:2rem;line-height:1;color:#333;background-color:#ccc;border:none;outline:none;border-radius:0}.share-code .copy-btn[data-v-001738f6]:hover{background-color:#bbb}.iconfont[data-v-9209b240]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-9209b240]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-9209b240]:before{content:\"\\E601\"}.title[data-v-9209b240]{font-size:1.16rem;cursor:pointer;color:#333}.title[data-v-9209b240]:hover{color:#275b8c}.meta-list[data-v-9209b240]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:.5rem}.meta-list .item[data-v-9209b240]{margin-right:1rem;color:#909090;font-size:1rem}.iconfont[data-v-3d86beee]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3d86beee]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3d86beee]:before{content:\"\\E601\"}.aside[data-v-3d86beee]{width:20rem;position:absolute;top:0;right:0;z-index:1}.aside.sticky .sticky-section-box[data-v-3d86beee]{position:fixed;top:10.5rem;width:20rem;transition:all .2s}.aside.sticky.top .sticky-section-box[data-v-3d86beee]{top:5.5rem}.aside .section[data-v-3d86beee]{background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);border-radius:2px;font-size:1.16rem;line-height:1.29;color:#333}.aside .section[data-v-3d86beee]:not(:last-child){margin-bottom:1.3rem}.aside .section.top-section .aside-header[data-v-3d86beee]{padding:1rem 1.3rem;border-bottom:1px solid hsla(0,0%,59%,.1);color:#333;font-size:1.16rem}.aside .section.top-section .aside-list[data-v-3d86beee]{padding:1rem 1.3rem}.aside .section.top-section .aside-list .item[data-v-3d86beee]{margin-bottom:1.5rem}.aside .section.top-section .aside-list .link[data-v-3d86beee]{display:block;position:relative}.aside .section.top-section .aside-list .title[data-v-3d86beee]{color:#333;font-size:1.16rem;cursor:pointer;transition:all .3s;word-break:break-all}.aside .section.top-section .aside-list .title[data-v-3d86beee]:hover{color:#007fff}.aside .section.top-section .aside-list .meta-list[data-v-3d86beee]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:.6rem 0 1.3rem;font-size:1.1rem;color:#c2c2c2}.aside .section.top-section .aside-list .meta-list .meta[data-v-3d86beee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:1.5rem}.aside .section.top-section .aside-list .meta-list .meta .icon[data-v-3d86beee]{margin-right:.4rem}.column-entry-list[data-v-3d86beee]{width:700px;background-color:#fff;border-radius:2px}.column-entry-list .list-header[data-v-3d86beee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.3rem 2rem}.column-entry-list .list-title[data-v-3d86beee]{font-size:1.3rem;color:#000}.column-entry-list .nav-item[data-v-3d86beee]{padding:0 .8rem;font-size:1.16rem;border-right:1px solid hsla(0,0%,59%,.2)}.column-entry-list .nav-item.active a[data-v-3d86beee]{color:#007fff}.column-entry-list .nav-item[data-v-3d86beee]:last-child{border:none;padding-right:0}@media (max-width:600px){.aside[data-v-3d86beee]{display:none}.column-entry-list[data-v-3d86beee]{width:100%}}.item[data-v-3f37517a]{padding:2.5rem;border-bottom:1px solid hsla(0,0%,59%,.1)}.empty[data-v-3f37517a]{padding:2rem 0;width:100%;font-size:1.2rem;text-align:center}.iconfont[data-v-36108f72]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-36108f72]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-36108f72]:before{content:\"\\E601\"}a[data-v-36108f72]{color:inherit}.column-entry:hover .action-row .action-list .action.hover[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex}.user-info-row[data-v-36108f72]{font-size:1.16rem;padding:.3rem 0 1.3rem;color:#8b8b8b}.user-info-row .user-info[data-v-36108f72],.user-info-row[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-info-row .user-info[data-v-36108f72]{cursor:pointer}.user-info-row .user-info .avatar[data-v-36108f72]{width:2.5rem;height:2.5rem;border-radius:50%;margin-right:1rem}.user-info-row .user-info .username[data-v-36108f72]:after{content:\"\\B7\";margin:0 .5rem;display:inline-block}.thumb-row[data-v-36108f72]{position:relative;padding-top:33.4%;margin-bottom:2rem}.thumb-row .thumb[data-v-36108f72]{position:absolute;top:0;left:0;right:0;bottom:0;background:50%/cover;background-color:#f8f9fa;cursor:pointer;border-radius:3px}.abstract-row[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.abstract-row .title[data-v-36108f72]{width:100%;margin-bottom:.8rem;font-size:2rem;color:#000;line-height:1.3;font-weight:600;letter-spacing:.04rem}.abstract-row .title[data-v-36108f72]:hover{color:#007fff}.abstract-row .title[data-v-36108f72]:visited{color:#909090}.abstract-row .abstract[data-v-36108f72]{width:100%;max-height:7.800000000000001rem;line-height:1.5;letter-spacing:.02rem;color:#8b8b8b;cursor:pointer;overflow:hidden;font-size:1.3rem}.abstract-row .abstract.with-thumb[data-v-36108f72]{max-height:1.95rem}.action-row[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:1.5rem;color:rgba(24,37,50,.3)}.action-row .action-list .action[data-v-36108f72],.action-row .action-list[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative}.action-row .action-list .action[data-v-36108f72]{cursor:pointer;padding:0 1rem;height:25px;line-height:25px;white-space:nowrap;border:1px solid #f1f1f1;border-radius:1px;background-color:#fff;transition:color,border-color,background-color .3s}.action-row .action-list .action .icon[data-v-36108f72]{font-size:1.2rem}.action-row .action-list .action .count[data-v-36108f72]{margin-left:.3rem;font-weight:700}.action-row .action-list .action.comment[data-v-36108f72]{margin-left:-1px}.action-row .action-list .action.clickable[data-v-36108f72]:not(.active):hover{color:#9f9f9f;background-color:hsla(0,0%,95%,.3)}.action-row .action-list .action.clickable.active[data-v-36108f72]:hover{border-color:#76b433;background-color:#76b433}.action-row .action-list .action.active[data-v-36108f72]{color:#fff;border-color:#83c73a;background-color:#83c73a}.action-row .action-list .action.active .icon-likes[data-v-36108f72]{-webkit-animation:h .5s;animation:h .5s}.action-row .action-list .action.hover[data-v-36108f72]:not(.active){display:none}.action-row .action-list .action.collect[data-v-36108f72]{position:relative;margin-left:.8rem}.action-row .action-list .action.collect .icon[data-v-36108f72]{margin-right:.5rem}@keyframes h{0%{-webkit-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(.8);transform:scale(.8)}40%{-webkit-transform:scale(1.5);transform:scale(1.5)}60%{-webkit-transform:scale(.5);transform:scale(.5)}75%{-webkit-transform:scale(1.2);transform:scale(1.2)}90%{-webkit-transform:scale(.9);transform:scale(.9)}to{-webkit-transform:scale(1);transform:scale(1)}}.entry-action-box[data-v-36108f72]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.read-action[data-v-36108f72]{margin-left:2rem;position:relative}.read-action .icon[data-v-36108f72]{font-size:2rem;cursor:pointer}.read-action[data-v-36108f72]:hover{color:#8b8b8b}.more-action-list[data-v-36108f72]{position:absolute;padding:1rem 0;right:-2.5rem;top:-.6rem;min-width:10rem;white-space:nowrap;border-radius:2px;border:1px solid #f1f1f1;background-color:#fff;box-shadow:0 1px 2px 1px hsla(0,0%,95%,.5);-webkit-transform:translateY(-100%);transform:translateY(-100%)}.more-action-list[data-v-36108f72]:after{content:\"\";position:absolute;top:98%;right:3.2rem;width:.93rem;height:.93rem;background-color:#fff;box-shadow:2px 2px 1px 0 hsla(0,0%,95%,.8);-webkit-transform:rotate(45deg) translateY(-50%);transform:rotate(45deg) translateY(-50%)}.more-action-list .more-action-item[data-v-36108f72]{padding:.6rem 2rem;color:#8b8b8b;cursor:pointer}.more-action-list .more-action-item[data-v-36108f72]:hover{background-color:#f8f9fa}.more-action-list .more-action-item a[data-v-36108f72]{color:#8b8b8b}.iconfont[data-v-aa0c1ff8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-aa0c1ff8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-aa0c1ff8]:before{content:\"\\E601\"}.column-entry-masker[data-v-aa0c1ff8]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border-bottom:1px solid hsla(0,0%,95%,.5);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.column-entry-masker[data-v-aa0c1ff8],.info-row[data-v-aa0c1ff8]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.info-row[data-v-aa0c1ff8]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.6rem 0;min-width:0}.user-meta-row[data-v-aa0c1ff8]{padding-top:0}.user-meta-row .user-avatar[data-v-aa0c1ff8]{margin-right:1rem;width:30px;height:30px;border-radius:50%}.user-meta-row .username[data-v-aa0c1ff8]{width:10.7rem;height:1.2rem}.screenshot-row[data-v-aa0c1ff8]{padding-top:30%}.entry-abstract-row[data-v-aa0c1ff8]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding-bottom:0}.entry-abstract-row .entry-title[data-v-aa0c1ff8]{margin-bottom:1.3rem;width:100%;height:3rem}.entry-abstract-row .entry-description[data-v-aa0c1ff8]{width:100%;height:1.73rem}.masker[data-v-aa0c1ff8]{border-color:hsla(0,0%,95%,.1);background-color:hsla(0,0%,95%,.3)}.iconfont[data-v-15b7a0f9]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-15b7a0f9]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-15b7a0f9]:before{content:\"\\E601\"}.collection-list-box[data-v-15b7a0f9]{margin-right:21.667rem;background-color:#fff}.collection-list-box .right .nav-item[data-v-15b7a0f9]{padding:0 1.2rem}.collection-list-box .right .nav-item[data-v-15b7a0f9]:after{display:none}.collection-list-box .right .nav-item.active a[data-v-15b7a0f9]{color:#007fff}@media (max-width:600px){.collection-list-box[data-v-15b7a0f9]{width:100%}}.collection-list[data-v-5892eb8d]{padding:2.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.item[data-v-5892eb8d]{margin:0 0 1.4rem;width:calc(50% - .8rem);height:13.3rem;box-sizing:border-box}.empty[data-v-5892eb8d]{width:100%;font-size:1.2rem;text-align:center}@media (max-width:600px){.item[data-v-5892eb8d]{width:100%}}.iconfont[data-v-12d785cd]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-12d785cd]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-12d785cd]:before{content:\"\\E601\"}.one-collection[data-v-12d785cd]{position:relative;height:100%}.one-collection:hover .mask[data-v-12d785cd]{background-color:rgba(0,0,0,.3)}.one-collection .thumb[data-v-12d785cd]{width:100%;height:100%;border-radius:2px}.one-collection .mask[data-v-12d785cd]{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;transition:all .2s;background-color:hsla(0,0%,43%,0);background-image:linear-gradient(hsla(0,0%,56%,.3),rgba(70,70,70,.6))}.one-collection .content[data-v-12d785cd]{position:absolute;top:1.1rem;left:1.1rem;right:1.1rem;bottom:1.1rem;overflow:hidden;z-index:1}.one-collection .content .title[data-v-12d785cd]{position:absolute;left:0;right:4rem;bottom:3rem;font-size:18px;font-weight:500;line-height:1.4;color:#fff;cursor:pointer}.one-collection .content .meta-list[data-v-12d785cd]{position:absolute;left:0;right:5em;bottom:0;height:28px;font-size:12px;line-height:28px;color:#fff;white-space:nowrap;overflow:hidden}.one-collection .content .meta-list .meta[data-v-12d785cd]{display:inline-block;max-width:7rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.one-collection .content .meta-list .meta[data-v-12d785cd]:first-child{max-width:6rem}.one-collection .content .meta-list .meta[data-v-12d785cd]:not(:first-child):before{content:\"\\B7\";margin:0 .4rem}.one-collection .content .follow-btn[data-v-12d785cd]{position:absolute;right:0;bottom:0;width:4.8rem;height:25px;font-size:12px;line-height:1;color:#fff;background:transparent;border:1px solid #fff;border-radius:2px;padding:0}.one-collection .content .follow-btn.followed[data-v-12d785cd],.one-collection .content .follow-btn[data-v-12d785cd]:hover{background-color:hsla(0,0%,100%,.5)}.one-collection .content .follow-btn .busy-icon[data-v-12d785cd]:before{-webkit-animation:i 1s linear infinite;animation:i 1s linear infinite}@keyframes i{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.iconfont[data-v-7bf45f0e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-7bf45f0e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-7bf45f0e]:before{content:\"\\E601\"}.masker[data-v-7bf45f0e]{position:relative;height:100%;border-color:hsla(0,0%,95%,.1);background-color:hsla(0,0%,95%,.3)}.iconfont[data-v-17cce05e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-17cce05e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-17cce05e]:before{content:\"\\E601\"}.slider[data-v-17cce05e]{margin-right:21.667rem;margin-bottom:1.5rem;border-radius:2px}@media (max-width:600px){.slider[data-v-17cce05e]{display:none}}.repo-list-box[data-v-17cce05e]{margin-right:21.667rem;margin-bottom:4rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.repo-list-box[data-v-17cce05e]{margin-right:auto}}.list-header[data-v-17cce05e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.8rem 2.333rem}.list-header .title[data-v-17cce05e]{font-size:1.5rem;font-weight:600;color:#2e3135}.list-header .customize-btn[data-v-17cce05e]{margin-left:auto;padding:.5rem 0;font-size:1.167rem;color:#007fff;background-color:#fff;border:none;outline:none}.list-header .customize-btn[data-v-17cce05e]:hover{color:#1b56a5}.list-header .customize-btn .icon[data-v-17cce05e]{margin-right:.4rem;font-size:1.4em;vertical-align:middle}.repo-nav-aside-box[data-v-17cce05e]{width:20rem;position:absolute;top:0;right:0;z-index:1}@media (max-width:600px){.repo-nav-aside-box[data-v-17cce05e]{display:none}}.repo-nav-aside-box .repo-nav-aside[data-v-17cce05e]{position:fixed;top:6.8rem;width:20rem;transition:all .2s}.repo-nav-aside-box.top .repo-nav-aside[data-v-17cce05e]{top:1.8rem}.repo-list[data-v-5f83054d]{background-color:#fff;box-sizing:border-box}.repo-list.empty[data-v-5f83054d]:after,.repo-list.error[data-v-5f83054d]:after{display:block;padding:1rem 0;font-size:1.16rem;text-align:center;color:#666}.repo-list.error[data-v-5f83054d]:after{content:attr(error-msg)}.repo-list.empty[data-v-5f83054d]:after{content:attr(empty-msg)}.item[data-v-5f83054d]{box-sizing:border-box}.item[data-v-5f83054d]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.1)}.repo[data-v-f02aa77c]:hover{background-color:#fbfbfb}.repo-link[data-v-f02aa77c]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;padding:24px 30px;box-sizing:border-box}.repo-user[data-v-f02aa77c]{margin-right:15px}.repo-user .user[data-v-f02aa77c]{height:48px;width:48px;overflow:hidden;border-radius:3px;display:block}.repo-user .user img[data-v-f02aa77c]{width:100%}.repo-aside[data-v-f02aa77c]{width:130px;height:130px;-ms-flex-negative:0;flex-shrink:0;background-color:#ccc}.repo-content[data-v-f02aa77c]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden}.repo-content .repo-header[data-v-f02aa77c]{margin-bottom:8px}.repo-content .repo-header .title[data-v-f02aa77c]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding:0;font-size:1.334rem;font-weight:600;color:#0366d6;overflow:hidden;margin-right:20px}.repo-content .repo-header .title .title-text[data-v-f02aa77c]{color:inherit}.repo-content .repo-header .title .title-text[data-v-f02aa77c]:hover{text-decoration:underline}.repo-content .repo-desc[data-v-f02aa77c]{color:#2e3135;font-size:14px;line-height:20px;max-height:60px;margin-right:70px;color:#333;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.repo-content .repo-meta[data-v-f02aa77c]{margin-top:15px;font-size:1.167rem;font-weight:700;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.repo-content .repo-meta .icon[data-v-f02aa77c]{margin-right:5px}.repo-content .repo-meta>span[data-v-f02aa77c]:not(:last-child){margin-right:25px}.repo-content .repo-meta .lang .lang-color[data-v-f02aa77c]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:12px;height:12px;border-radius:50%}.repo-content .repo-meta .time[data-v-f02aa77c]{color:#b4b6b8;font-size:12px;font-weight:400}@media (max-width:640px){.repo-user[data-v-f02aa77c]{display:none}.repo-content .repo-header .title .title-text[data-v-f02aa77c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}}.iconfont[data-v-0e41573c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0e41573c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0e41573c]:before{content:\"\\E601\"}.repo-masker[data-v-0e41573c]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:2rem 2.5rem}.masker[data-v-0e41573c]{border-color:hsla(0,0%,95%,.1);background-color:hsla(0,0%,95%,.3)}.avatar[data-v-0e41573c]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.25rem;width:4rem;height:4rem}.content[data-v-0e41573c]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.content .title[data-v-0e41573c]{height:1.5rem}.content .desc[data-v-0e41573c]{margin:1rem 0 2rem;height:1.5rem}@media (max-width:640px){.avatar[data-v-0e41573c]{display:none}}.repo-nav-aside[data-v-e3c40da6]{background-color:#fff;border-radius:2px}.block[data-v-e3c40da6]{position:relative;padding:1.333rem;box-sizing:border-box}.block[data-v-e3c40da6]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.05)}.block[data-v-e3c40da6]:hover{background-color:#fcfcfc}.block:hover>.sub-block-panel[data-v-e3c40da6]{display:block}.block .title[data-v-e3c40da6]{font-size:1.333rem;font-weight:500;line-height:1.2;color:#2e3135}.block .title[data-v-e3c40da6]:hover{color:#000}.block .child-list[data-v-e3c40da6]{margin-top:.3rem}.block .child-list .child[data-v-e3c40da6]{display:inline-block;margin-top:.6rem;margin-right:1.667rem;font-size:1.167rem;line-height:1.2;color:#3b76c5}.block .child-list .child[data-v-e3c40da6]:hover{color:#1b56a5}.sub-block-panel[data-v-e3c40da6]{position:absolute;top:0;right:100%;width:100%;background-color:#fff;box-shadow:0 2px 6px 0 rgba(0,0,0,.15);border-radius:2px;display:none}.sub-block-panel .block .title[data-v-e3c40da6]{font-size:1.167rem;font-weight:400}.sub-block-panel .child-list.leaf-list[data-v-e3c40da6]{margin-top:0;padding:1.333rem;padding-top:.7rem}.iconfont[data-v-6d5257e9]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-6d5257e9]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-6d5257e9]:before{content:\"\\E601\"}.slider[data-v-6d5257e9]{position:relative;height:12rem;background-color:#fff;overflow:hidden}.slider:hover .ctrl[data-v-6d5257e9]{opacity:1}.list[data-v-6d5257e9]{position:relative;height:100%;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;overflow:hidden}.list .item[data-v-6d5257e9]{height:100%;float:left}.list .item.with-thumb .text-box[data-v-6d5257e9]{padding-left:1.667rem}.list .item .link[data-v-6d5257e9]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%}.list .item .thumb[data-v-6d5257e9]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:12rem;height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover}.list .item .text-box[data-v-6d5257e9]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:1.667rem 5rem;height:100%;box-sizing:border-box;cursor:pointer}.list .item .text-box .title[data-v-6d5257e9]{margin-bottom:.8rem;font-size:1.5rem;font-weight:600;line-height:1.5}.list .item .text-box .desc[data-v-6d5257e9],.list .item .text-box .title[data-v-6d5257e9]{max-height:3em;color:#2e3135;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2}.list .item .text-box .desc[data-v-6d5257e9]{font-size:14px;line-height:1.57;opacity:.7}.ctrl[data-v-6d5257e9]{opacity:0;transition:all .2s;z-index:1}.ctrl .btn[data-v-6d5257e9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;width:4rem;height:100%;font-size:1.8rem;color:#000;opacity:.15}.ctrl .btn[data-v-6d5257e9]:not(.disabled){cursor:pointer}.ctrl .btn[data-v-6d5257e9]:hover:not(.disabled){opacity:.3}.ctrl .btn.prev-btn[data-v-6d5257e9]{left:0}.ctrl .btn.next-btn[data-v-6d5257e9]{right:0}.iconfont[data-v-031b4a6e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-031b4a6e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-031b4a6e]:before{content:\"\\E601\"}.customize-modal[data-v-031b4a6e]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.96);overflow:auto;z-index:500}.close-btn[data-v-031b4a6e]{position:fixed;top:2rem;right:3rem;padding:.5rem;font-size:1.4rem;color:#333;cursor:pointer}.close-btn[data-v-031b4a6e]:hover{color:#000}.modal-content[data-v-031b4a6e]{margin:6rem auto 4rem;width:40rem;max-width:90%}.modal-content>.title[data-v-031b4a6e]{margin:0 0 3.4rem;font-size:2.167rem;font-weight:600;text-align:center;color:#393939}.subscribed-list[data-v-031b4a6e]{margin-bottom:2.1rem}.subscribed-list .item[data-v-031b4a6e]{display:inline-block;position:relative;margin:0 1.25rem 1.25rem 0;padding:.4rem .9rem;font-size:1rem;font-weight:500;color:#007fff;background-color:#e8eff6;border:1px solid #cbdff8;border-radius:1px;cursor:default}.subscribed-list .item .remove-btn[data-v-031b4a6e]{position:absolute;top:-.65rem;right:-.65rem;font-size:1.3rem;color:#82868b;cursor:pointer}.subscribed-list .item .remove-btn[data-v-031b4a6e]:hover{color:#52565b}.tag-list .item[data-v-031b4a6e]{margin-bottom:2.333rem}.tag[data-v-1500dc76]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:500}.tag .icon[data-v-1500dc76]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.5rem;width:4rem;height:4rem;background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:5px}.tag .title[data-v-1500dc76]{margin-right:1.5rem;font-size:1.333rem;color:#393939}.tag .subscribe-btn[data-v-1500dc76]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 auto;padding:0;width:7rem;height:2.6rem;font-size:1.167rem;color:#37c701;background-color:#fff;border:1px solid currentColor;border-radius:2px;outline:none}.tag .subscribe-btn[data-v-1500dc76]:hover{color:#27b701}.tag .subscribe-btn.subscribed[data-v-1500dc76]{color:#fff;background-color:#37c701;border-color:#37c701}.tag .subscribe-btn.subscribed[data-v-1500dc76]:hover{background-color:#27b701;border-color:#27b701}.iconfont[data-v-1a77993a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-1a77993a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-1a77993a]:before{content:\"\\E601\"}.repo-list-box[data-v-1a77993a]{margin-right:21.667rem;margin-bottom:4rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.repo-list-box[data-v-1a77993a]{margin-right:auto}}.list-header[data-v-1a77993a]{padding:1.5rem 1rem}.list-header .title[data-v-1a77993a]{margin-left:1.333rem}.list-header .title .tag[data-v-1a77993a]{font-size:1.167rem;font-weight:600;color:#2e3135}.list-header .title .tag[data-v-1a77993a]:not(:last-child):after{content:\" / \"}.list-header .title .tag[data-v-1a77993a]:hover{color:#007fff}.list-header .title .tag[data-v-1a77993a]:hover:after{color:#2e3135}.list-header .nav-item[data-v-1a77993a]{padding:0 1.2rem}.list-header .nav-item[data-v-1a77993a]:not(:last-child):after{content:\"\";position:absolute;left:100%;top:50%;width:1px;height:1.3rem;background-color:#b7b8ba}.repo-nav-aside-box[data-v-1a77993a]{width:20rem;position:absolute;top:0;right:0;z-index:1}@media (max-width:600px){.repo-nav-aside-box[data-v-1a77993a]{display:none}}.repo-nav-aside-box .repo-nav-aside[data-v-1a77993a]{position:fixed;top:6.8rem;width:20rem;transition:all .2s}.repo-nav-aside-box.top .repo-nav-aside[data-v-1a77993a]{top:1.8rem}.explore-entry-list[data-v-be629f76]{margin-right:21.667rem;background-color:#fff}@media (max-width:700px){.explore-entry-list[data-v-be629f76]{width:100%}}.view.share-entry-view[data-v-686f98f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:2rem}.head[data-v-686f98f6]{margin:3rem 0}.head .title[data-v-686f98f6]{margin:0;font-size:2rem;line-height:1}.forbidden-box[data-v-686f98f6]{margin:2rem 0;padding:2rem 1rem;font-size:1.167rem;text-align:center;color:#007bff;background-color:#e6f3ff;border:1px solid #b3d0ef}.forbidden-box .link[data-v-686f98f6]{color:inherit;margin:0 .5em;text-decoration:underline}.meta-tag-list .item.active[data-v-458e133b]{background-color:#eee}.entry-form[data-v-458e133b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative}.entry-form .entry-form-input[data-v-458e133b]{-webkit-box-flex:2;-ms-flex:2;flex:2;padding-right:1.3rem}.entry-form .image-upload-block[data-v-458e133b]{-webkit-box-flex:1;-ms-flex:1;flex:1}.input[data-v-458e133b]{padding:1rem;font-size:1.3rem;line-height:1.4}.input[data-v-458e133b]:not(:last-child){margin-bottom:1.6rem}.input[data-v-458e133b]:hover{border-color:$blue}.category-list-box[data-v-458e133b]{margin:1.3rem auto;display:-webkit-box;display:-ms-flexbox;display:flex}.category-list-box .category-list[data-v-458e133b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.tag-list-box[data-v-458e133b]{margin:1.3rem auto}.tag-list-box .tag-list[data-v-458e133b],.tag-list-box[data-v-458e133b]{display:-webkit-box;display:-ms-flexbox;display:flex}.tag-list-box .tag-list[data-v-458e133b]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.title[data-v-458e133b]{-ms-flex-negative:0;flex-shrink:0;font-size:1.3rem;margin-right:1.3rem;line-height:31px}.submit-btn[data-v-458e133b]{width:100%;font-size:1.3rem;margin-top:3rem}.thumb-uploader[data-v-458e133b]{position:relative;cursor:pointer;text-align:center;padding:3rem .6rem;border:1px dashed hsla(0,0%,40%,.2);background-color:hsla(0,0%,95%,.9);min-height:14rem;color:hsla(0,0%,40%,.5);transition:color .3s,background-color .3s}.meta-tag-list-box[data-v-458e133b]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:1.6rem auto}.meta-tag-list-box .item[data-v-458e133b]{border:1px solid #f1f1f1;color:#909090;font-size:1rem;line-height:1;display:inline-block;margin-right:.6rem;padding:.7rem 1rem;cursor:pointer;background-color:#fff;border-radius:2px;transition:all .3s}.meta-tag-list-box .item.active[data-v-458e133b],.meta-tag-list-box .item[data-v-458e133b]:hover{color:#007fff;border-color:rgba(0,127,255,.15);background-color:rgba(0,127,255,.05);transition:all .3s}.submitting-mask[data-v-458e133b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;color:#666;background-color:hsla(0,0%,100%,.8);z-index:1}.shared-alert[data-v-458e133b]{position:fixed;top:2rem;right:2rem;z-index:300;display:inline-block;padding:1rem 2rem;max-width:15rem;font-size:1.167rem;box-shadow:0 1px 1px 0 hsla(0,0%,80%,.5);border:1px solid #b3d0ef;border-radius:2px;cursor:default}.shared-alert.warn[data-v-458e133b]{color:#e33;background-color:#f6e3e3;border:1px solid #e99}.shared-alert .redict[data-v-458e133b]{color:#e33;text-decoration:underline}.image-uploader[data-v-5be59570]{position:relative}.input[data-v-5be59570]{display:none}.action-box[data-v-5be59570]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;right:0;bottom:0;cursor:pointer}.action-box .prompt[data-v-5be59570]{font-size:1.2rem}.action-box.with-image[data-v-5be59570]{background-color:rgba(0,0,0,.2);opacity:0}.action-box.with-image .prompt[data-v-5be59570]{color:#fff}.action-box.with-image[data-v-5be59570]:hover{opacity:1}.preview[data-v-5be59570]{position:absolute;top:0;left:0;right:0;bottom:0;background-position:50%;background-size:cover}.category-list .item[data-v-f544e898]{border:1px solid #f1f1f1;color:#909090;font-size:1rem;line-height:1;display:inline-block;margin-right:.6rem;padding:.7rem 1rem;margin-bottom:.6rem;cursor:pointer;background-color:#fff;border-radius:2px;transition:all .3s}.category-list .item.active[data-v-f544e898],.category-list .item[data-v-f544e898]:hover{color:#007fff;border-color:rgba(0,127,255,.15);background-color:rgba(0,127,255,.05);transition:all .3s}.tag-list .item[data-v-4eaf2326]{position:relative;border:1px solid rgba(0,127,255,.15);color:#909090;font-size:1rem;line-height:1;display:inline-block;margin-right:.6rem;margin-bottom:.6rem;padding:.7rem .9rem;cursor:pointer;background-color:#fff;border-radius:2px;transition:all .3s;color:#007fff;background-color:rgba(0,127,255,.05)}.tag-list .tag-title-input[data-v-4eaf2326]{padding:.5rem;font-size:1rem}.tag-list .tag-title-input[data-v-4eaf2326]:hover{border-color:#007fff}.tag-list .add[data-v-4eaf2326]{position:relative}.tag-list .add .suggested-tag-list[data-v-4eaf2326]{position:absolute;top:105%;left:0;background-color:#fff;z-index:500;width:120%;border:1px solid #ddd}.tag-list .add .suggested-tag-list .tag[data-v-4eaf2326]{padding:.5rem 1rem;cursor:pointer;width:100%;font-size:1.3rem;box-sizing:border-box}.tag-list .add .suggested-tag-list .tag[data-v-4eaf2326]:hover{color:#007fff}.tag-list .add .suggested-tag-list .tag.selected[data-v-4eaf2326]{background-color:#eee}.view.edit-entry-view[data-v-74e829e1]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:2rem}.head[data-v-74e829e1]{margin:3rem 0}.head .title[data-v-74e829e1]{margin:0;font-size:2rem;line-height:1}.iconfont[data-v-547193a6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-547193a6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-547193a6]:before{content:\"\\E601\"}.published-view[data-v-547193a6]{width:960px;margin-top:24px;margin-left:auto;margin-right:auto}.published-view .thanks[data-v-547193a6]{height:70px;padding-top:150px;text-align:center;background-image:url(https://b-gold-cdn.xitu.io/v3/static/img/panfish.ded05ef.png);background-repeat:no-repeat;background-position:center 0;background-size:100px;font-size:16px;color:#666}.published-view .share-content[data-v-547193a6]{margin-left:100px;margin-right:100px;padding:40px 20px 60px;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);margin-bottom:10px}.published-view .share-content .title[data-v-547193a6]{font-size:24px;text-align:center;margin-bottom:60px;display:block;color:inherit;text-decoration:underline}.published-view .share-content .share-list[data-v-547193a6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:14px}.published-view .share-content .share-list .item[data-v-547193a6]{margin:.4rem .6rem .4rem 10px;margin-right:10px;position:relative;border-radius:20px;border:1px solid #e0e0e0;background-color:#fff;font-size:1rem;padding:.27rem 1.74rem;cursor:pointer;line-height:2rem;display:inline-block;vertical-align:middle}.published-view .share-content .share-list .item .inline[data-v-547193a6]{height:16px;vertical-align:middle;margin-right:.6rem}.published-view .share-content .share-list .item.weibo img.inline[data-v-547193a6]{height:20px}.published-view .share-content .share-list .item.wechat .qr-code[data-v-547193a6]{position:absolute;top:120%;left:50%;width:10rem;height:10rem;border:.5rem solid #fff;box-shadow:0 .5em .5em #ddd;-webkit-transform:translate(-50%);transform:translate(-50%);display:none;z-index:1}.published-view .share-content .share-list .item.wechat:hover .qr-code[data-v-547193a6]{display:block;image-rendering:-webkit-optimize-contrast}.published-view .handle[data-v-547193a6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-top:40px}.published-view .handle button[data-v-547193a6]{width:140px;height:40px;font-size:16px}.published-view .handle .back-text[data-v-547193a6]{margin-top:20px;font-size:16px;color:#007fff;cursor:pointer}.nav-list[data-v-08be65c5]{display:-webkit-box;display:-ms-flexbox;display:flex}.view-nav[data-v-08be65c5]{background-color:#f8f9fa}.nav-item .unread-count[data-v-08be65c5]{display:inline-block;margin-left:.2em;padding:.4rem .7rem;line-height:1;text-align:center;color:#f1f1f1;background-color:#007fff;border-radius:2rem;-webkit-transform:scale(.8);transform:scale(.8)}.nav-item.active[data-v-08be65c5],.nav-item[data-v-08be65c5]:hover{box-shadow:inset 0 -2px currentColor}.view-nav .nav-list .nav-item[data-v-08be65c5]{padding:0 1rem}.notification-list[data-v-08be65c5]{border-radius:2px}.user-view[data-v-0869890a]{position:relative;width:700px}.user-view .notification-list[data-v-0869890a]{width:100%;margin-bottom:1rem}@media (max-width:980px){.user-view[data-v-0869890a]{width:100%}}.iconfont[data-v-a76c6926]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-a76c6926]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-a76c6926]:before{content:\"\\E601\"}.notification-list.system[data-v-a76c6926]{padding:1.666rem 0;width:700px;background:#fff;border-radius:0}.notification-list .item[data-v-a76c6926]:not(:last-child){margin-bottom:1.333rem}.empty[data-v-a76c6926]{text-align:center;font-size:1.3rem;color:#666}@media (max-width:600px){.notification-list.system[data-v-a76c6926]{width:100%}}.iconfont[data-v-2f229cbd]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-2f229cbd]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-2f229cbd]:before{content:\"\\E601\"}.user-notification[data-v-2f229cbd]{padding:2rem;background:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);position:relative}.followed[data-v-2f229cbd],.user-notification[data-v-2f229cbd]{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}.followed .topbar[data-v-2f229cbd],.followed[data-v-2f229cbd],.user-notification[data-v-2f229cbd]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}.followed .topbar[data-v-2f229cbd]{padding:.5rem 0;color:#17181a;font-size:1.3rem;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.followed .topbar .all[data-v-2f229cbd]{color:#027fff;cursor:pointer}.followed .content[data-v-2f229cbd]{padding:1rem;border-radius:2px;border:1px solid #ebebeb;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.followed .content .profile[data-v-2f229cbd],.followed .content[data-v-2f229cbd]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.followed .content .profile .avatar[data-v-2f229cbd]{width:4.15rem;height:4.15rem;border-radius:100%}.followed .content .profile .info[data-v-2f229cbd]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 1rem}.followed .content .profile .info span.name[data-v-2f229cbd]{font-size:1.3rem;font-weight:600;color:#2e3135}.followed .content .profile .info span.position[data-v-2f229cbd]{color:#8a9aa9;font-size:1.2rem;padding:.5rem 0;text-overflow:ellipsis;max-width:40rem;display:inline-block;overflow:hidden;white-space:nowrap}.followed .content .follow-btn[data-v-2f229cbd]{font-size:1.333rem;font-weight:600;width:9rem;height:2.833rem;color:#37c701;border-radius:3px;background-color:#fff;border:1px solid #37c701}.followed .content .follow-btn[data-v-2f229cbd]:hover{opacity:.8}.followed .content .follow-btn.active[data-v-2f229cbd]{color:#fff;background-color:#37c701}.link[data-v-2f229cbd]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.link .user[data-v-2f229cbd],.link[data-v-2f229cbd]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.link .user .avatar[data-v-2f229cbd]{width:3.75rem;height:3.75rem;border-radius:100%}.link .user .profile[data-v-2f229cbd]{padding:0 1rem;color:#8a9aa9;font-size:1rem}.link .user .profile .name[data-v-2f229cbd]{color:#2e3135;font-size:1.3rem;font-weight:600}.link .user .profile .name .multi[data-v-2f229cbd]{margin-left:.333rem;font-size:1.2rem;font-style:normal;font-weight:400}.link .user .profile .info[data-v-2f229cbd]{font-size:1.166rem;padding:.5rem 0;display:-webkit-box;display:-ms-flexbox;display:flex}.link .user .profile .info span[data-v-2f229cbd]{margin-right:.5rem}.link .user .profile .info .position[data-v-2f229cbd]{text-overflow:ellipsis;max-width:40rem;display:inline-block;overflow:hidden;white-space:nowrap}.link .check[data-v-2f229cbd]{font-size:1.16rem;cursor:pointer;color:#027fff}.entry[data-v-2f229cbd]{padding:0 0 0 5rem;font-size:1.25rem}.entry .content[data-v-2f229cbd]{color:#17181a;padding:0 0 .6rem}.entry .entryUrl[data-v-2f229cbd]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-radius:2px;background-color:#f8f8f8;height:3.25rem;padding:0 1rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.entry .entryUrl .icon[data-v-2f229cbd]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:1.4rem;height:1.4rem;background-repeat:no-repeat;background-size:100% 120%;display:inline-block}.entry .entryUrl .icon.comment[data-v-2f229cbd]{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.entry .entryUrl span[data-v-2f229cbd]{color:#2e3135;text-overflow:ellipsis;overflow:hidden}.entry .entryUrl span em[data-v-2f229cbd]{color:#a1a9b3;font-style:normal;padding:0 .5rem}.entry .entryUrl span a[data-v-2f229cbd]{color:#2e3135}.entry .entryUrl span a[data-v-2f229cbd]:hover{color:#007fff}.user-list[data-v-2f229cbd]{position:absolute;top:0;bottom:0;width:100%;height:100%;background:#fff}.user-list .title[data-v-2f229cbd]{color:#393939;font-size:2rem;font-weight:600;line-height:3rem;height:3rem;text-align:center}@media (max-width:600px){.user-notification[data-v-2f229cbd]{padding:1rem}.user-notification .others .link[data-v-2f229cbd]{font-size:1.083rem}.user-notification .others .link .user .avatar[data-v-2f229cbd]{width:3rem;height:3rem}.user-notification .others .link .user .profile .name[data-v-2f229cbd]{font-size:1.166rem}.user-notification .others .link .user .profile .info[data-v-2f229cbd]{font-size:1.083rem;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex}.user-notification .others .link .user .profile .info .position[data-v-2f229cbd]{text-overflow:ellipsis;max-width:15rem;display:inline-block;overflow:hidden;white-space:nowrap}.user-notification .entry[data-v-2f229cbd]{padding:0 0 0 2rem;margin-top:1rem}.user-notification .entry .content[data-v-2f229cbd]{font-size:1.166rem}.user-notification .entry .entryUrl[data-v-2f229cbd]{padding:.5rem 1rem;font-size:1.083rem;height:2rem}.user-notification .followed .topbar[data-v-2f229cbd]{font-size:1.166rem}.user-notification .followed .content[data-v-2f229cbd]{padding:.5rem}.user-notification .followed .content .profile .avatar[data-v-2f229cbd]{width:3rem;height:3rem}.user-notification .followed .content .profile .info[data-v-2f229cbd]{font-size:1.083rem}.user-notification .followed .content .profile .info .name[data-v-2f229cbd]{font-size:1.166rem}.user-notification .followed .content .profile .info .position[data-v-2f229cbd]{font-size:1.083rem;text-overflow:ellipsis;max-width:15rem;display:inline-block;overflow:hidden;white-space:nowrap}.user-notification .followed .follow-btn[data-v-2f229cbd]{width:7rem;height:2.8rem;line-height:2.8rem;padding:0;font-size:1.166rem}}.iconfont[data-v-0d0b3cd7]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0d0b3cd7]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0d0b3cd7]:before{content:\"\\E601\"}.userlist-modal[data-v-0d0b3cd7]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.96);overflow:auto;z-index:251}.close-btn[data-v-0d0b3cd7]{position:fixed;top:2rem;right:3rem;padding:.5rem;font-size:1.4rem;color:#333;cursor:pointer}.close-btn[data-v-0d0b3cd7]:hover{color:#000}.modal-content[data-v-0d0b3cd7]{margin:6rem auto 4rem;width:45rem;max-width:90%}.modal-content>.title[data-v-0d0b3cd7]{margin:0 0 3.4rem;font-size:2.167rem;font-weight:600;text-align:center;color:#393939}.iconfont[data-v-20c7396d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-20c7396d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-20c7396d]:before{content:\"\\E601\"}.user-masker[data-v-20c7396d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:7rem;padding:1rem 2.4rem;box-sizing:border-box}.user-masker[data-v-20c7396d]:before{content:\"\";background-color:hsla(0,0%,95%,.3);width:100%;height:40%}.user[data-v-20c7396d]{position:relative;box-sizing:border-box}.user[data-v-20c7396d]:hover{background-color:hsla(0,0%,87%,.1)}.link[data-v-20c7396d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.5rem 2.4rem;min-height:7rem}.avatar[data-v-20c7396d]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.667rem;width:3.75rem;height:3.75rem;border-radius:50%}.info-box[data-v-20c7396d]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.info-box .username[data-v-20c7396d]{font-size:1.333rem;font-weight:500;color:#393939}.info-box .detail[data-v-20c7396d]{margin-top:.6rem;font-size:1rem;font-weight:500;color:#b9c0c8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.follow-btn[data-v-20c7396d]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 1rem;padding:0;width:6.6rem;height:2.5rem;font-size:1.1rem;color:#37c701;background-color:#fff;border:1px solid rgba(55,199,1,.6);border-radius:2px}.follow-btn[data-v-20c7396d]:hover{opacity:.8}.follow-btn.active[data-v-20c7396d]{color:#fff;background-color:#37c701}.iconfont[data-v-3dbf9606]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3dbf9606]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3dbf9606]:before{content:\"\\E601\"}.notification .wrap[data-v-3dbf9606]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;font-size:1.25rem;cursor:pointer;line-height:1.5;color:#666;padding:0 2rem}.notification .wrap:hover .read-state[data-v-3dbf9606]{color:#007fff}.notification .wrap .title[data-v-3dbf9606]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.notification .wrap .title[data-v-3dbf9606] .highlight{margin:0 .1em;font-weight:600;color:#666}.notification .wrap .title[data-v-3dbf9606] .highlight:hover{color:#007fff}.notification .wrap .read-state[data-v-3dbf9606]{margin-left:2em;font-size:1rem;color:#f1f1f1}.notification .wrap.unread[data-v-3dbf9606]{color:#007fff}.notification .wrap .date[data-v-3dbf9606]{min-width:10em;font-size:1rem;text-align:right;white-space:nowrap}@media (max-width:600px){.notification .wrap[data-v-3dbf9606]{font-size:1rem}.notification .wrap .read-state[data-v-3dbf9606]{margin-left:1rem}.notification .wrap .date[data-v-3dbf9606]{min-width:5rem}.notification .wrap .date .icon[data-v-3dbf9606]{display:none}}.skeleton-row[data-v-0876b106]{margin-bottom:.8rem;height:1.2rem;background-color:#f3f3f3}.skeleton-avatar[data-v-0876b106]{border-radius:50%;background-color:#f3f3f3}.skeleton-notification[data-v-0876b106]{padding:2rem;min-height:140px;background-color:#fff;box-sizing:border-box}.skeleton-notification-header[data-v-0876b106]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.skeleton-notification-header .skeleton-avatar[data-v-0876b106]{width:3.75rem;height:3.75rem}.skeleton-notification-header .profile[data-v-0876b106]{margin-left:1.2rem}.skeleton-notification-header .profile .name[data-v-0876b106]{margin-top:.3rem;width:5rem}.skeleton-notification-header .profile .info[data-v-0876b106]{width:8rem}.skeleton-notification-body[data-v-0876b106]{padding:0 0 0 5rem}.skeleton-notification-body .skeleton-row[data-v-0876b106]:last-of-type{margin-bottom:0;width:90%}.setting-view[data-v-0c1977f1]{margin-bottom:2rem;width:58rem;max-width:100%}.sub-view-box[data-v-0c1977f1]{position:relative;padding:2.7rem 4rem 7rem;background-color:#fff;border-radius:2px}@media (max-width:600px){.sub-view-box[data-v-0c1977f1]{padding:1rem}}.sub-view-box[data-v-0c1977f1] .setting-list .item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:2rem 0;border-top:1px solid #f1f1f1}.sub-view-box[data-v-0c1977f1] .setting-list .item:last-child{border-bottom:1px solid #f1f1f1}.sub-view-box[data-v-0c1977f1] .setting-list .item .title{font-size:1.2rem;color:#333;width:10rem}.sub-view-box[data-v-0c1977f1] .setting-list .item .action-box{margin-left:1rem}@media (max-width:600px){.sub-view-box[data-v-0c1977f1] .setting-list .item{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.sub-view-box[data-v-0c1977f1] .setting-list .item .action-box .icon,.sub-view-box[data-v-0c1977f1] .setting-list .item>.icon{display:none}.sub-view-box[data-v-0c1977f1] .setting-list .item .title{padding-bottom:1rem;font-size:1.4rem}.sub-view-box[data-v-0c1977f1] .setting-list .item .input-box{width:100%}.sub-view-box[data-v-0c1977f1] .setting-list .item .account.empty:after{content:\"\\672A\\7ED1\\5B9A\";color:#999}}.setting-list .item[data-v-3aef9809]:first-child{padding:1rem 0}.avatar-uploader[data-v-34752ba4]{display:-webkit-box;display:-ms-flexbox;display:flex}.input[data-v-34752ba4]{display:none}.avatar[data-v-34752ba4]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:6rem;height:6rem;margin-right:1rem}.hint[data-v-34752ba4]{color:#909090;font-size:1rem;margin-bottom:1.5rem}.profile-input[data-v-23b87424]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-flex:1;-ms-flex:1;flex:1}.btn[data-v-23b87424]{background-color:transparent;color:#007fff;font-size:1.2rem;padding:0;white-space:nowrap}.btn.cancel-btn[data-v-23b87424]{color:#666}.btn .icon[data-v-23b87424]{vertical-align:bottom;height:1.5rem;margin-right:.6rem}.input[data-v-23b87424]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:inline-block;border:none;outline:none;color:#909090;font-size:1.3rem}.setting-list .item>.icon[data-v-47bd29de]{margin-right:.5em;height:1.4em;vertical-align:bottom}.setting-list .item .account[data-v-47bd29de]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;font-size:1.167rem;color:#909090}.setting-list .item .input-box[data-v-47bd29de]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex}.setting-list .item .btn[data-v-47bd29de]{padding:0;font-size:1.2rem;color:#007fff;background-color:transparent;white-space:nowrap}.setting-list .item .btn .icon[data-v-47bd29de]{margin-right:.6rem;height:1.5rem;vertical-align:bottom}.bind-email-modal-box[data-v-082ae14d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.bind-email-form[data-v-082ae14d]{position:relative;padding:2rem;width:26.5rem;max-width:100%;font-size:1.167rem;background-color:#fff;border-radius:2px;box-sizing:border-box}.close-btn[data-v-082ae14d]{float:right;cursor:pointer;opacity:.4}.close-btn[data-v-082ae14d]:hover{opacity:1}.title[data-v-082ae14d]{font-size:1.5rem;margin:0 0 2rem}.input-group[data-v-082ae14d]{margin-bottom:1.5rem;overflow:hidden}.input-box[data-v-082ae14d]{position:relative;margin-bottom:.8rem}.input[data-v-082ae14d]{padding:1rem;width:100%;border:1px solid #e9e9e9;border-radius:2px;outline:none;box-sizing:border-box}.input[data-v-082ae14d]:focus{border-color:#007fff}.btn[data-v-082ae14d]{width:100%;height:3.334rem;color:#fff;background-color:#007fff;border-radius:2px;outline:none;box-sizing:border-box;cursor:pointer}.btn[data-v-082ae14d]:disabled{background-color:#909090;cursor:default}.bind-phone-number-modal-box[data-v-ac2ed6a6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3);z-index:500}.bind-phone-number-form[data-v-ac2ed6a6]{position:relative;padding:2rem;width:26.5rem;max-width:100%;font-size:1.167rem;background-color:#fff;border-radius:2px;box-sizing:border-box}.close-btn[data-v-ac2ed6a6]{float:right;cursor:pointer;opacity:.4}.close-btn[data-v-ac2ed6a6]:hover{opacity:1}.title[data-v-ac2ed6a6]{font-size:1.5rem;margin:0 0 2rem}.input-group[data-v-ac2ed6a6]{margin-bottom:1.5rem;overflow:hidden}.input-box[data-v-ac2ed6a6]{position:relative;margin-bottom:.8rem}.input[data-v-ac2ed6a6]{padding:9px;width:100%;border:1px solid #e9e9e9;border-radius:2px;outline:none;box-sizing:border-box}.input[data-v-ac2ed6a6]:focus{border-color:#007fff}.btn[data-v-ac2ed6a6]{width:100%;height:3.334rem;color:#fff;background-color:#007fff;border-radius:2px;outline:none;box-sizing:border-box;cursor:pointer}.btn[data-v-ac2ed6a6]:disabled{background-color:#909090;cursor:default}.vcode-box[data-v-ac2ed6a6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.vcode-box .input[data-v-ac2ed6a6]{width:auto;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden}.vcode-box .img-vcode[data-v-ac2ed6a6]{border:1px solid #ddd;position:relative;box-sizing:border-box;overflow:hidden;z-index:0;width:160px;color:#333;height:40px;margin-left:15px;-ms-flex-negative:0;flex-shrink:0}.vcode-box .img-vcode img[data-v-ac2ed6a6]{max-height:46px}.vcode-box .img-vcode .hint[data-v-ac2ed6a6]{position:absolute;z-index:-1;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.send-vcode-btn[data-v-ac2ed6a6]{position:absolute;top:0;right:0;height:100%;color:#007fff;line-height:1;background-color:transparent}.send-vcode-btn[data-v-ac2ed6a6]:disabled{color:#909090;cursor:default}.send-vcode-btn[data-v-ac2ed6a6]:hover(:not(:disabled)){opacity:.8}.submit-btn[data-v-2625beaa]{float:right;margin:1.5rem 0 0;padding:.8rem 1.4rem;font-size:1.333rem;color:#fff;background-color:#007fff}.submit-btn[data-v-2625beaa]:disabled{background-color:#ddd}.password-input[data-v-c3a8f324]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-flex:1;-ms-flex:1;flex:1}.btn[data-v-c3a8f324]{background-color:transparent;color:#007fff;font-size:1.2rem;padding:0}.btn.cancel-btn[data-v-c3a8f324]{color:#666}.btn .icon[data-v-c3a8f324]{vertical-align:bottom;height:1.5rem;margin-right:.6rem}.input[data-v-c3a8f324]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:inline-block;border:none;outline:none;color:#909090;font-size:1.3rem}.iconfont[data-v-8673b9aa]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-8673b9aa]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-8673b9aa]:before{content:\"\\E601\"}.setting-invitation-view .invitation-section .invite-title[data-v-8673b9aa]{font-size:1.3rem;line-height:2;color:#000;font-weight:600}.setting-invitation-view .invitation-section .line[data-v-8673b9aa]{height:1px;background-color:hsla(0,0%,59%,.1);margin-top:1rem;margin-bottom:1rem}.setting-invitation-view .invitation-section .content[data-v-8673b9aa]{font-size:1.3rem;color:rgba(0,0,0,.8);line-height:1.7;margin-bottom:2rem}.setting-invitation-view .invitation-section .invitation-form .label[data-v-8673b9aa]{font-size:1.3rem;color:rgba(0,0,0,.8);line-height:2.4rem;margin-bottom:.6rem;font-weight:700}.setting-invitation-view .invitation-section .invitation-form .form-input[data-v-8673b9aa]{width:25rem;margin-bottom:.8rem;padding:.9rem;box-shadow:none;border:1px solid #ddd;border-radius:2px;background-color:#fff;transition:border .3s;font-size:1.3rem;color:#333}.setting-invitation-view .invitation-section .invitation-form .form-input[data-v-8673b9aa]:focus,.setting-invitation-view .invitation-section .invitation-form .form-input[data-v-8673b9aa]:hover{border-color:#007fff}.setting-invitation-view .invitation-section .invitation-form .send-btn[data-v-8673b9aa]{margin:.5rem 0 3rem;padding:.6rem 1.6rem;font-size:1.3rem}.setting-invitation-view .invitation-section .invitation-form .send-btn[data-v-8673b9aa]:hover{background-color:#0371df}.setting-invitation-view .invitation-section .invitation-form .send-btn.disable[data-v-8673b9aa]{background-color:hsla(0,0%,56%,.3);cursor:not-allowed}@media (max-width:600px){.invitation .settings-container[data-v-8673b9aa]{width:100%;padding:1.3rem 2rem}.invitation .invitation-section .line[data-v-8673b9aa]{width:100%;margin:1rem auto}}.mail-inner[data-v-a2ba18aa]{font-size:14px}.mail-inner .switch[data-v-a2ba18aa]{margin-top:30px}.mail-inner .switch .radio-group[data-v-a2ba18aa]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.mail-inner .switch .radio-group+.radio-group[data-v-a2ba18aa]{margin-left:25px}.iconfont[data-v-cde57b56]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-cde57b56]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-cde57b56]:before{content:\"\\E601\"}.desc[data-v-cde57b56]{font-size:14px}.desc .link-index[data-v-cde57b56]{color:#007fff}.award-rules[data-v-cde57b56]{padding-top:30px;text-align:center;color:#4a4a4a;line-height:1.6}.award-statistics[data-v-cde57b56]{padding-top:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.award-statistics .item[data-v-cde57b56]{width:25%;padding-left:3px;padding-right:3px;box-sizing:border-box;font-size:12px;position:relative;color:#4a4a4a}.award-statistics .item .text[data-v-cde57b56]{width:100%;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.award-statistics .item .text span[data-v-cde57b56]{vertical-align:middle}.award-statistics .item .text .highlight[data-v-cde57b56]{padding-right:5px;padding-left:5px;font-size:18px;color:#007fff}.award-statistics .item[data-v-cde57b56]:not(:last-child):after{content:\"\";position:absolute;right:0;top:50%;height:15px;width:1px;-webkit-transform:translateY(-50%);transform:translateY(-50%);background-color:#e6e6e6}@media (max-width:700px){.award-statistics .item[data-v-cde57b56]{margin-bottom:10px}.award-statistics .item .text[data-v-cde57b56]{padding-top:30px}.award-statistics .item .text .highlight[data-v-cde57b56]{padding:0;position:absolute;left:0;top:0;right:0;text-align:center}.award-statistics .item[data-v-cde57b56]:after{display:none}.award-statistics .item .unit[data-v-cde57b56]:before{content:\"(\";display:inline-block}.award-statistics .item .unit[data-v-cde57b56]:after{content:\")\";display:inline-block}}.award-rules-detail[data-v-cde57b56]{padding-top:30px}.award-rules-detail .rules-list[data-v-cde57b56]{font-size:14px}.award-rules-detail .rules-list .rules[data-v-cde57b56]{padding-top:5px;color:#7d7d7d;display:-webkit-box;display:-ms-flexbox;display:flex}.award-rules-detail .rules-list .rules .step[data-v-cde57b56]{padding-right:3px;-ms-flex-negative:0;flex-shrink:0}.award-rules-detail .rules-list .rules .pre[data-v-cde57b56]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;line-height:inherit;white-space:pre-wrap}.award-invite[data-v-cde57b56]{padding-top:30px}.award-invite .users-list .item[data-v-cde57b56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #f7f7f7;font-size:14px;min-height:40px;color:#7d7d7d}.award-invite .users-list .item .step[data-v-cde57b56]{-ms-flex-negative:0;flex-shrink:0;min-width:25px;text-align:center}.award-invite .users-list .item .content[data-v-cde57b56]{padding-left:10px;padding-right:20px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.award-invite .users-list .item .content .user[data-v-cde57b56]{font-weight:700;color:#007fff;margin-right:3px}.award-invite .users-list .item .content .book[data-v-cde57b56]{font-weight:700;margin-left:3px}.award-invite .users-list .item .date[data-v-cde57b56]{-ms-flex-negative:0;flex-shrink:0;font-size:12px;color:#9b9b9b}.award-more[data-v-cde57b56]{cursor:pointer;border-bottom:1px solid #f7f7f7;height:40px}.award-empty[data-v-cde57b56],.award-more[data-v-cde57b56]{text-align:center;color:#9b9b9b;font-size:14px;line-height:40px}.award-empty[data-v-cde57b56]{height:41px}@media (max-width:640px){.users-list .date[data-v-cde57b56]{display:none}}.iconfont[data-v-fc5bed60]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-fc5bed60]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-fc5bed60]:before{content:\"\\E601\"}.award-progress[data-v-fc5bed60]{margin-top:25px;padding-top:30px;margin-left:13px;margin-right:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative}.award-progress .line[data-v-fc5bed60]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:3px;background-color:#d8d8d8}.award-progress .point[data-v-fc5bed60]{width:10px;height:10px;border-radius:50%;background-color:#d8d8d8}.award-progress .point.highlight[data-v-fc5bed60]{background-color:#007fff}.award-progress .end[data-v-fc5bed60],.award-progress .start[data-v-fc5bed60]{position:relative}.award-progress .end .text[data-v-fc5bed60],.award-progress .start .text[data-v-fc5bed60]{position:absolute;white-space:nowrap;font-weight:700;font-size:13px;bottom:20px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.award-progress .line--sale[data-v-fc5bed60]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:0;bottom:0}.award-progress .line--sale .sale[data-v-fc5bed60]{-ms-flex-negative:0;flex-shrink:0;position:relative}.award-progress .line--sale .sale .sign[data-v-fc5bed60]{font-size:13px;position:absolute;top:-32px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);white-space:nowrap;padding-left:5px;padding-right:5px;background-color:#007fff;color:#fff;height:22px;line-height:22px;border-radius:2px}.award-progress .line--sale .sale .sign .arrow[data-v-fc5bed60]{position:absolute;left:50%;top:100%;width:0;height:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-width:6px 6px 0;border-style:solid;border-color:#007fff transparent transparent}.award-progress .line--sale .line[data-v-fc5bed60]{background-color:#007fff}.iconfont[data-v-23659145]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-23659145]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-23659145]:before{content:\"\\E601\"}.wallet-view[data-v-23659145]{font-size:16px;line-height:1;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-x:hidden}.wallet-view[data-v-23659145]:after{content:attr(msg);position:absolute;top:10rem;left:50%;font-size:$small-font-size;color:#c0c6cc;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10}.wallet-view .wallet-view-bg[data-v-23659145]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#f8f9fa;z-index:-1}.wallet-view .wallet-container[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;margin:0 auto;width:830px;max-width:100%}.wallet-view .wallet-section[data-v-23659145]{margin:1em 0 0;background-color:#fff;border-radius:$radius-md}.wallet-view .wallet-header-section[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.wallet-view .wallet-header-section[data-v-23659145]:after{padding:2em 0;left:0;width:100%;font-size:.875em;text-align:center;color:#d2d2d2}.wallet-view .wallet-header-section.loading[data-v-23659145]:after{content:attr(msg)}.wallet-view .wallet-body-section[data-v-23659145]{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;margin-bottom:3em}.wallet-view .wallet-header-box[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;height:7.875em;box-sizing:border-box}.wallet-view .wallet-header-box[data-v-23659145]:not(:last-child){border-right:1px solid #f8f9fa}.wallet-view .wallet-user[data-v-23659145]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:1.625em;width:55.422%}.wallet-view .wallet-user .user-avatar[data-v-23659145]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:74px;height:74px;border-radius:50%;background-color:#f8f9fa;background-position:50%;background-size:cover}.wallet-view .user-info-box[data-v-23659145]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:1.25em;min-width:0}.wallet-view .user-info-box .user-name[data-v-23659145]{font-weight:600;color:#000;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.wallet-view .user-info-box .user-ctrl-box[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:.8em;font-size:.875em}.wallet-view .user-info-box .user-ctrl-box .withdraw-btn[data-v-23659145]{padding:.5em 1.5em;color:#007fff;background-color:#fff;border:1px solid currentColor;white-space:nowrap;transition:all $speed-normal}.wallet-view .user-info-box .user-ctrl-box .withdraw-btn[data-v-23659145]:not([disabled]):hover{color:#06c}.wallet-view .user-info-box .user-ctrl-box .withdraw-btn[disabled][data-v-23659145]{color:#d2d2d2}.wallet-view .user-info-box .user-ctrl-box .withdraw-tip[data-v-23659145]{margin-left:1em;color:#909090;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.wallet-view .user-info-box .user-ctrl-box .setting-link[data-v-23659145]{margin-left:.2em;color:#007fff;cursor:pointer}.wallet-view .wallet-amount-box[data-v-23659145]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.wallet-view .wallet-amount[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:1.25em}.wallet-view .wallet-amount .amount-desc[data-v-23659145]{font-size:.75em;color:#909090}.wallet-view .wallet-amount .amount-desc[data-v-23659145]:before{content:\"\\A5\";display:inline-block;margin-right:.2em;width:1.3em;height:1.3em;text-align:center;line-height:1.25;border:1px solid currentColor;border-radius:50%;-webkit-transform:scale(.9);transform:scale(.9)}.wallet-view .wallet-amount .amount[data-v-23659145]{margin-top:.3em;font-size:2.125em}.wallet-view .wallet-amount .amount.balance-amount[data-v-23659145]{color:#37c700}.wallet-view .wallet-amount .amount.income-amount[data-v-23659145]{color:#666}.wallet-view .wallet-amount[data-v-23659145]:not(:last-child){border-right:1px solid #f8f9fa}.wallet-view .wallet-bill-table[data-v-23659145]{width:100%;text-align:left;line-height:4.4}.wallet-view .wallet-bill-table .bill-head[data-v-23659145]{font-size:.9375em;font-weight:600}.wallet-view .wallet-bill-table .bill-head[data-v-23659145]:after{content:\"\";position:absolute;left:0;width:100%;border-bottom:1px solid #f8f9fa}.wallet-view .wallet-bill-table .bill-body[data-v-23659145]{font-size:.875em}.wallet-view .wallet-bill-table .bill-body .bill-row[data-v-23659145]:not(:last-child){border-bottom:1px solid #f8f9fa}.wallet-view .wallet-bill-table .bill-body .bill-item-amount.income[data-v-23659145]{color:#37c700}.wallet-view .wallet-bill-table .bill-body .bill-item-state[data-v-23659145]{color:#909090}.wallet-view .wallet-bill-table .bill-item[data-v-23659145]{padding:0 2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wallet-view .wallet-bill-table .bill-item.bill-item-remark .item-content[data-v-23659145]{max-width:19.5em;overflow:hidden;text-overflow:ellipsis}.wallet-view .wallet-bill-table .post-link[data-v-23659145]{color:#007fff}.wallet-view .wallet-bill-table .indication[data-v-23659145]{text-align:center;color:#d2d2d2}@media (max-width:800px){.wallet-view .wallet-user[data-v-23659145]{width:auto}.wallet-view .withdraw-tip[data-v-23659145]{display:none}.wallet-view .wallet-bill-table .bill-item[data-v-23659145]{padding:0 1em}}@media (max-width:600px){.wallet-view .withdraw-tip[data-v-23659145]{display:block}.wallet-view .wallet-header-section[data-v-23659145]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.wallet-view .wallet-amount-box[data-v-23659145]{border-top:1px solid #f8f9fa}.wallet-view .wallet-amount[data-v-23659145]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.wallet-view .wallet-user[data-v-23659145]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:auto}.wallet-view .wallet-user .user-avatar[data-v-23659145]{margin:.6em 0 0}.wallet-view .user-info-box[data-v-23659145]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0}.wallet-view .user-info-box .user-name[data-v-23659145]{margin:1em 0 .5em;font-size:1.85em;font-weight:400}.wallet-view .user-info-box .user-ctrl-box[data-v-23659145]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.wallet-view .user-info-box .user-ctrl-box .withdraw-tip[data-v-23659145]{margin:1em 0 0}.wallet-view .bill-item-remark[data-v-23659145]{display:none}}.iconfont[data-v-d4bee656]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-d4bee656]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-d4bee656]:before{content:\"\\E601\"}.withdraw-modal-box[data-v-d4bee656]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.9);z-index:10}.withdraw-modal[data-v-d4bee656]{position:absolute;top:50%;left:50%;padding:1.75em;width:23.75em;max-width:100%;border:1px solid #d9d9d9;border-radius:2px;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);background-color:#fff;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.modal-header[data-v-d4bee656]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.modal-header .title[data-v-d4bee656]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin:.5em 0 0;font-weight:600}.modal-header .close-btn[data-v-d4bee656]{height:1em;color:#e8e8e8;cursor:pointer}.modal-header .close-btn[data-v-d4bee656]:hover{color:#cfcfcf}.modal-body[data-v-d4bee656]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;padding:2em 0;font-size:.875em}.modal-body .error-tip[data-v-d4bee656]{position:absolute;top:.8em;right:0;font-size:.875em;color:#e22323}.modal-body .input-row[data-v-d4bee656]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.35em 0}.modal-body .input-row .label[data-v-d4bee656]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:.8em;width:5em;text-align:right}.modal-body .input-row .input-box[data-v-d4bee656]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;height:2.857em;border:1px solid #e8e8e8;border-radius:$radius-small}.modal-body .input-row .input-box .input[data-v-d4bee656]{padding:0 .8em;width:100%;height:100%;border:none;outline:none;background-color:transparent}.modal-body .input-row .input-box[data-v-d4bee656]:after,.modal-body .input-row .input-box[data-v-d4bee656]:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none;z-index:-1}.modal-body .input-row .input-box.empty[data-v-d4bee656]:after{content:attr(holder-text);left:.8em;color:#909090}.modal-body .input-row .input-box.currency[data-v-d4bee656]{padding-left:1.5em}.modal-body .input-row .input-box.currency[data-v-d4bee656]:before{content:\"\\A5\";margin-top:.01em;left:.622em;font-size:1.286em;font-weight:500;color:#666}.modal-body .input-row .input-box.currency[data-v-d4bee656]:after{left:2.3em}.modal-body .success-panel[data-v-d4bee656]{display:-webkit-box;display:-ms-flexbox;display:flex}.modal-body .success-panel .face[data-v-d4bee656]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.5em;width:77px;height:77px;background-position:50%;background-size:contain;background-image:url(https://b-gold-cdn.xitu.io/images/wallet/face.svg)}.modal-body .success-panel .words[data-v-d4bee656]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.modal-body .success-panel .words p[data-v-d4bee656]{margin:.4em 0;line-height:1.5}.modal-body .success-panel .words .rule-link[data-v-d4bee656]{margin-left:.5em;color:#007fff}.modal-footer[data-v-d4bee656]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.modal-footer .ctrl-btn[data-v-d4bee656]{padding:.4em 1.2em;font-size:.875em;background-color:#fff;border-radius:$radius-small;outline:none}.modal-footer .ctrl-btn[disabled][data-v-d4bee656]{color:#d2d2d2}.modal-footer .cancel-btn[data-v-d4bee656]{margin-right:1em;color:#666;border:none}.modal-footer .cancel-btn[data-v-d4bee656]:not([disabled]):hover{color:#4d4d4d}.modal-footer .confirm-btn[data-v-d4bee656]{color:#007fff;border:1px solid currentColor}.modal-footer .confirm-btn[data-v-d4bee656]:not([disabled]):hover{color:#06c}.iconfont[data-v-4cdfa676]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-4cdfa676]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-4cdfa676]:before{content:\"\\E601\"}.user-view[data-v-4cdfa676]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:6rem;line-height:1.2}.major-area[data-v-4cdfa676]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.minor-area[data-v-4cdfa676]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:1rem;width:20rem}.minor-area .sticky[data-v-4cdfa676]{position:fixed;top:6.766999999999999rem;width:20rem;transition:all .2s}.minor-area .sticky.top[data-v-4cdfa676]{top:1.767rem}.minor-area .sticky.with-list-header[data-v-4cdfa676]{top:10.934rem}.minor-area .sticky.top.with-list-header[data-v-4cdfa676]{top:5.933999999999999rem}@media (max-width:960px){.minor-area[data-v-4cdfa676]{display:none}}.block[data-v-4cdfa676]{background-color:#fff;border-radius:2px}.user-info-block[data-v-4cdfa676]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:2.5rem}@media (max-width:600px){.user-info-block[data-v-4cdfa676]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.user-info-block .avatar[data-v-4cdfa676]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:2.4rem;width:7.5rem;height:7.5rem;background-color:#f9f9f9;border-radius:50%}.user-info-block .avatar[data-v-4cdfa676]:hover{-webkit-transform:rotate(666turn);transform:rotate(666turn);transition-delay:1s;transition-property:all;transition-duration:59s;transition-timing-function:cubic-bezier(.34,0,.84,1)}@media (max-width:600px){.user-info-block .avatar[data-v-4cdfa676]{margin-right:0}}.user-info-block .info-box[data-v-4cdfa676]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-right:2rem}@media (max-width:600px){.user-info-block .info-box[data-v-4cdfa676]{margin:1rem 0}}.user-info-block .action-box[data-v-4cdfa676]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}@media (max-width:600px){.user-info-block .action-box[data-v-4cdfa676]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.user-info-block .action-box .link-box[data-v-4cdfa676]{margin-bottom:auto}.user-info-block .action-box .btn[data-v-4cdfa676]{margin:1rem 0 0;padding:0;height:2.834rem;font-size:1.333rem;font-weight:500;line-height:1.2;border:1px solid currentColor;background-color:#fff;border-radius:4px}.user-info-block .action-box .btn[data-v-4cdfa676]:hover{opacity:.8}.user-info-block .action-box .follow-btn[data-v-4cdfa676]{width:9rem;color:#92c452}.user-info-block .action-box .follow-btn.active[data-v-4cdfa676]{color:#fff;background-color:#92c452;border-color:#92c452}.user-info-block .action-box .setting-btn[data-v-4cdfa676]{width:9.834rem;color:#3780f7}.stat-block[data-v-4cdfa676]{margin-bottom:1rem}.stat-block .block-title[data-v-4cdfa676]{padding:1.333rem;font-size:1.333rem;font-weight:600;color:#31445b;border-bottom:1px solid hsla(240,2%,90%,.5)}.stat-block .block-body[data-v-4cdfa676]{padding:1.333rem}.stat-block .block-body .stat-item[data-v-4cdfa676]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.25rem;color:#000}.stat-block .block-body .stat-item[data-v-4cdfa676]:not(:last-child){margin-bottom:.8rem}.stat-block .block-body .stat-item .icon[data-v-4cdfa676]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.2rem}.stat-block .block-body .stat-item .count[data-v-4cdfa676]{margin:0 .3em;font-weight:500}.follow-block[data-v-4cdfa676]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;margin-bottom:1rem}.follow-block[data-v-4cdfa676]:after{content:\"\";position:absolute;top:50%;left:50%;width:1px;height:50%;background-color:#f3f3f4;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.follow-block .follow-item[data-v-4cdfa676]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:1.333rem 0;text-align:center;color:#31445b}.follow-block .follow-item[data-v-4cdfa676]:hover{opacity:.8}.follow-block .follow-item .item-title[data-v-4cdfa676]{font-size:1.333rem;font-weight:500}.follow-block .follow-item .item-count[data-v-4cdfa676]{margin-top:.5rem;font-size:1.25rem;font-weight:600}.more-block[data-v-4cdfa676]{background-color:transparent}.more-block .more-item[data-v-4cdfa676]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:1.25rem .417rem;font-size:1.25rem;color:#000;border-top:1px solid hsla(240,2%,90%,.5)}.more-block .more-item[data-v-4cdfa676]:last-child{border-bottom:1px solid hsla(240,2%,90%,.5)}.more-block .more-item[data-v-4cdfa676]:hover{opacity:.8}.more-block .more-item .item-title[data-v-4cdfa676]{margin-right:auto}.list-block[data-v-4cdfa676]{margin-top:1rem}.open-in-app[data-v-e1024e9a]{position:fixed;left:50%;bottom:2rem;height:2.5em;padding:0 1.5em;font-size:1.167rem;background-color:#007fff;border-radius:1.5em;border:none;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);outline:none;-webkit-transform:translate(-50%);transform:translate(-50%);z-index:2000;display:none}@media (max-width:600px){.open-in-app[data-v-e1024e9a]{display:block}}.iconfont[data-v-282a39d4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-282a39d4]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-282a39d4]:before{content:\"\\E601\"}.info-box[data-v-282a39d4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@media (max-width:600px){.info-box[data-v-282a39d4]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.info-box .intro[data-v-282a39d4],.info-box .position[data-v-282a39d4]{text-align:center}.info-box .intro .icon[data-v-282a39d4],.info-box .position .icon[data-v-282a39d4]{display:none}}.info-box .username[data-v-282a39d4]{margin:0;padding:0;font-size:2.167rem;font-weight:600;line-height:1.2;color:#000}.info-box .intro[data-v-282a39d4],.info-box .position[data-v-282a39d4]{display:-webkit-box;display:-ms-flexbox;display:flex;font-size:1.25rem;line-height:1.5;color:#72777b}.info-box .intro .icon[data-v-282a39d4],.info-box .position .icon[data-v-282a39d4]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:.6rem;height:1.8rem}.info-box .intro .content[data-v-282a39d4],.info-box .position .content[data-v-282a39d4]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.info-box .intro .content .split[data-v-282a39d4],.info-box .position .content .split[data-v-282a39d4]{display:inline-block;margin:0 .5em;width:1px;height:.7em;background-color:#72777b;opacity:.5}.info-box .intro .info-input[data-v-282a39d4],.info-box .position .info-input[data-v-282a39d4]{color:#4a68ad;cursor:pointer}.info-box .intro .info-input[data-v-282a39d4]:hover,.info-box .position .info-input[data-v-282a39d4]:hover{opacity:.8}.info-box .intro .info-input[data-v-282a39d4]:before,.info-box .position .info-input[data-v-282a39d4]:before{content:\"+ \"}.info-box .position[data-v-282a39d4]{margin-top:1rem}.info-box .intro[data-v-282a39d4]{margin-top:.4rem}.link[data-v-9595d788]:not(:first-child){margin-left:1rem}.link[data-v-9595d788]:hover{opacity:.8}.link.inactive[data-v-9595d788]{opacity:.5;filter:url(\"data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg'&gt;&lt;filter id='grayscale'&gt;&lt;feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale\");-webkit-filter:grayscale(100%);filter:grayscale(100%)}.iconfont[data-v-815abe10]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-815abe10]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-815abe10]:before{content:\"\\E601\"}.detail-list.sticky-box[data-v-815abe10]{padding-top:4.167rem}.list-header[data-v-815abe10]{position:relative;margin:0;padding:0;height:4.167rem;background-color:#fff;border:none;box-shadow:inset 0 -1px 0 hsla(240,2%,90%,.5);z-index:100}.list-header.sticky[data-v-815abe10]{position:fixed;top:5rem;left:0;right:0;transition:all .2s}.list-header.sticky.top[data-v-815abe10]{top:0}.list-header.sticky .avatar[data-v-815abe10],.list-header.sticky .btn[data-v-815abe10]{display:block}.list-header .header-content[data-v-815abe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 auto;height:100%;max-width:960px;white-space:nowrap}@media (min-width:960px){.list-header .header-content .only-in-scroll-mode[data-v-815abe10]{display:none}}@media (max-width:960px){.list-header .header-content[data-v-815abe10]{max-width:none;overflow-x:auto}.list-header .header-content .not-in-scroll-mode[data-v-815abe10]{display:none}}.list-header .avatar[data-v-815abe10]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 1.6rem;width:2.833rem;height:2.833rem;border-radius:50%;cursor:pointer;display:none}.list-header .nav-item[data-v-815abe10]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;width:7.5rem;height:100%}.list-header .nav-item:not(.active):not(.open):hover .item-count[data-v-815abe10],.list-header .nav-item:not(.active):not(.open):hover .item-title[data-v-815abe10]{opacity:.8}.list-header .nav-item.active[data-v-815abe10]{box-shadow:inset 0 -2px 0 #3780f7}.list-header .nav-item.active .item-count[data-v-815abe10],.list-header .nav-item.active .item-title[data-v-815abe10]{color:#3780f7}.list-header .nav-item .item-title[data-v-815abe10]{font-size:1.333rem;font-weight:500;color:#31445b}.list-header .nav-item .item-count[data-v-815abe10]{margin-left:.4rem;font-size:1.25rem;color:#b2bac2;line-height:1}.list-header .nav-item.more .item-count[data-v-815abe10]{padding-top:.2em}.list-header .nav-item .more-panel[data-v-815abe10]{position:absolute;top:100%;left:50%;margin:0 0 0 -3.75rem;padding:.6rem 0;width:7.5rem;background-color:#fff;border:1px solid #f3f3f4;border-radius:2px;box-shadow:0 2px 4px 0 rgba(0,0,0,.05);z-index:1}.list-header .nav-item .more-panel[data-v-815abe10]:after,.list-header .nav-item .more-panel[data-v-815abe10]:before{content:\"\";position:absolute;top:0;left:50%}.list-header .nav-item .more-panel[data-v-815abe10]:before{margin:-7px 0 0 -7px;border:7px solid transparent;border-bottom-color:#f3f3f4;border-top:none}.list-header .nav-item .more-panel[data-v-815abe10]:after{margin:-6px 0 0 -6px;border:6px solid transparent;border-bottom-color:#fff;border-top:none}.list-header .nav-item .more-panel .more-item[data-v-815abe10]{display:block;padding:.6rem 0;font-size:1.25rem;text-align:center;color:#000}.list-header .nav-item .more-panel .more-item[data-v-815abe10]:hover{background-color:#fcfcfc}.list-header .nav-item .more-panel .more-item.active[data-v-815abe10]{color:#3780f7}.list-header .btn[data-v-815abe10]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 auto;padding:0;height:2.834rem;font-size:1.333rem;font-weight:500;line-height:1.2;border:1px solid currentColor;background-color:#fff;border-radius:4px;display:none}.list-header .btn[data-v-815abe10]:hover{opacity:.8}.list-header .follow-btn[data-v-815abe10]{width:9rem;color:#92c452}.list-header .follow-btn.active[data-v-815abe10]{color:#fff;background-color:#92c452;border-color:#92c452}.list-header .setting-btn[data-v-815abe10]{width:9.834rem;color:#3780f7}.list-body .empty-box[data-v-815abe10]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:4rem 0;font-size:1.167rem;font-weight:500;color:#b2bac2;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.list-body .empty-box .empty-text[data-v-815abe10]{margin-top:1.2rem}[data-v-815abe10] .list-body .sub-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 2.4rem;height:4.167rem;white-space:nowrap;border-bottom:1px solid hsla(240,2%,90%,.5)}[data-v-815abe10] .list-body .sub-header .sub-header-title{margin-right:1rem;font-size:1.25rem;font-weight:600;color:#000}[data-v-815abe10] .list-body .sub-header .sub-type-box{margin-left:auto}[data-v-815abe10] .list-body .sub-header .sub-type-box .sub-type{position:relative;padding:1rem 0;font-size:1.167rem;color:#72777b}[data-v-815abe10] .list-body .sub-header .sub-type-box .sub-type.active{color:#000}[data-v-815abe10] .list-body .sub-header .sub-type-box .sub-type:hover{opacity:.8}[data-v-815abe10] .list-body .sub-header .sub-type-box .sub-type:not(:last-child){margin-right:2rem}[data-v-815abe10] .list-body .sub-header .sub-type-box .sub-type:not(:last-child):after{content:\"\";position:absolute;top:50%;right:-1rem;margin-top:-.5em;width:1px;height:1em;background-color:#b2bac2;opacity:.5}[data-v-815abe10] .entry .content-box{padding-left:2.4rem;padding-right:2.4rem}[data-v-815abe10] .collection-list-box ul.collection-list{padding:2rem 2.4rem;padding-bottom:1.2rem}[data-v-815abe10] .collection-list-box ul.collection-list .item{margin-bottom:.8rem;width:calc(50% - .4rem)}@media (max-width:600px){[data-v-815abe10] .collection-list-box ul.collection-list .item{width:100%}}.iconfont[data-v-7921c096]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-7921c096]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-7921c096]:before{content:\"\\E601\"}.item[data-v-7921c096]:not(:last-child){border-bottom:1px solid hsla(240,2%,90%,.5)}.activity-masker[data-v-7921c096]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:10rem;padding:1rem 2.4rem;box-sizing:border-box}.activity-masker[data-v-7921c096]:before{content:\"\";background-color:hsla(0,0%,95%,.3);width:100%;height:40%}.activity[data-v-7921c096]{position:relative;box-sizing:border-box}.activity[data-v-7921c096]:hover{background-color:hsla(0,0%,87%,.1)}.link[data-v-7921c096]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:1.667rem 2.4rem}.link[data-v-7921c096],.meta-box[data-v-7921c096]{display:-webkit-box;display:-ms-flexbox;display:flex}.meta-box[data-v-7921c096]{font-size:1.25rem;font-weight:500;color:#b2bac2}.meta-box .date[data-v-7921c096]{margin-left:auto}.content[data-v-7921c096]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:.833rem}.user .avatar[data-v-7921c096]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.667rem;width:3.75rem;height:3.75rem;border-radius:50%}.user .info-box[data-v-7921c096]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.user .info-box .username[data-v-7921c096]{font-size:1.333rem;font-weight:600;color:#2e3135}.user .info-box .detail[data-v-7921c096]{margin-top:.6rem;font-size:1rem;font-weight:500;color:#b9c0c8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag .thumb[data-v-7921c096]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.667rem;width:3.75rem;height:3.75rem;border-radius:2px}.tag .title[data-v-7921c096]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:1.333rem;font-weight:600;color:#2e3135}.entry[data-v-7921c096]{padding:1.25rem;background-color:#fdfdfd;border:1px solid #f2f2f2;border-radius:2px}.entry .title[data-v-7921c096]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:1.333rem;font-weight:600;color:#2e3135;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.entry .thumb[data-v-7921c096]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:1rem;width:3.75rem;height:3.75rem;border-radius:2px}.iconfont[data-v-034c1c20]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-034c1c20]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-034c1c20]:before{content:\"\\E601\"}.content-box[data-v-034c1c20]{display:block;padding:2rem 2.4rem;color:#b2bac2}.content-box[data-v-034c1c20]:hover{background-color:rgba(0,0,0,.01)}.content-box .meta-row .username[data-v-034c1c20]{color:#3b76c5;margin-right:10px}.content-box .info-row[data-v-034c1c20]{margin:8px 0 12px}.content-box .info-row .title[data-v-034c1c20]{font-size:18px;color:#333;font-weight:600}.content-box .info-row .desc[data-v-034c1c20]{font-size:14px;margin-top:10px;color:#666}.content-box .action-row[data-v-034c1c20]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.content-box .action-row .action-right[data-v-034c1c20]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.content-box .action-row span[data-v-034c1c20]{margin-right:10px}.iconfont[data-v-8817a5e4]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-8817a5e4]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-8817a5e4]:before{content:\"\\E601\"}.content-box[data-v-8817a5e4]{display:block;padding:2rem 2.4rem;color:#b2bac2}.content-box .meta-row .username[data-v-8817a5e4]{color:#3b76c5;margin-right:10px}.content-box .info-row[data-v-8817a5e4]{margin:8px 0 12px}.content-box .info-row .title[data-v-8817a5e4]{font-size:18px;color:#333;font-weight:600}.content-box .info-row .desc[data-v-8817a5e4]{font-size:14px;margin-top:10px;color:#666;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.content-box .action-row[data-v-8817a5e4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:14px}.content-box .action-row .action-right .more[data-v-8817a5e4],.content-box .action-row .action-right[data-v-8817a5e4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.content-box .action-row .action-right .more[data-v-8817a5e4]{position:relative}.content-box .action-row span[data-v-8817a5e4]{margin-right:10px}.more.open .more-list[data-v-8817a5e4]{display:block}.more-list[data-v-8817a5e4]{position:absolute;top:100%;left:0;min-width:8rem;white-space:nowrap;color:#8f969c;background-color:#fff;box-shadow:0 1px 2px 0 #e0e4e9;border:1px solid rgba(217,222,224,.99);display:none;z-index:10}.more-list[data-v-8817a5e4]:before{content:\"\";position:absolute;left:0;right:0;bottom:100%;height:1rem}.more-list .item[data-v-8817a5e4]{padding:.5rem .9rem}.more-list .item[data-v-8817a5e4]:hover{background-color:#f7f8fa}.iconfont[data-v-0022b817]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0022b817]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0022b817]:before{content:\"\\E601\"}.item[data-v-0022b817]:not(:last-child){border-bottom:1px solid hsla(240,2%,90%,.5)}.tag-masker[data-v-0022b817]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:7rem;padding:1rem 2.4rem;box-sizing:border-box}.tag-masker[data-v-0022b817]:before{content:\"\";background-color:hsla(0,0%,95%,.3);width:100%;height:40%}.tag[data-v-0022b817]{position:relative;box-sizing:border-box}.tag[data-v-0022b817]:hover{background-color:hsla(0,0%,87%,.1)}.link[data-v-0022b817]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.5rem 2.4rem;min-height:7rem}.thumb[data-v-0022b817]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.667rem;width:3.75rem;height:3.75rem;border-radius:2px}.title[data-v-0022b817]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:1.333rem;font-weight:600;color:#2e3135}.subscribe-btn[data-v-0022b817]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 1rem;padding:0;width:7.5rem;height:2.5rem;font-size:1rem;color:#92c452;background-color:#fff;border:1px solid #92c452;border-radius:2px}.subscribe-btn[data-v-0022b817]:hover{opacity:.8}.subscribe-btn.active[data-v-0022b817]{color:#fff;background-color:#92c452}.iconfont[data-v-dc1504f6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-dc1504f6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-dc1504f6]:before{content:\"\\E601\"}.item[data-v-dc1504f6]:not(:last-child){border-bottom:1px solid hsla(240,2%,90%,.5)}.user-masker[data-v-dc1504f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:7rem;padding:1rem 2.4rem;box-sizing:border-box}.user-masker[data-v-dc1504f6]:before{content:\"\";background-color:hsla(0,0%,95%,.3);width:100%;height:40%}.user[data-v-dc1504f6]{position:relative;box-sizing:border-box}.user[data-v-dc1504f6]:hover{background-color:hsla(0,0%,87%,.1)}.link[data-v-dc1504f6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.5rem 2.4rem;min-height:7rem}.avatar[data-v-dc1504f6]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.667rem;width:3.75rem;height:3.75rem;border-radius:50%}.info-box[data-v-dc1504f6]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.info-box .username[data-v-dc1504f6]{font-size:1.333rem;font-weight:600;color:#2e3135}.info-box .detail[data-v-dc1504f6]{margin-top:.6rem;font-size:1rem;font-weight:500;color:#b9c0c8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.follow-btn[data-v-dc1504f6]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:0 0 0 1rem;padding:0;width:7.5rem;height:2.5rem;font-size:1rem;color:#92c452;background-color:#fff;border:1px solid #92c452;border-radius:2px}.follow-btn[data-v-dc1504f6]:hover{opacity:.8}.follow-btn.active[data-v-dc1504f6]{color:#fff;background-color:#92c452}.pin-list[data-v-b0b69e16]{background:#f4f5f5}.pin-list .item[data-v-b0b69e16]{margin-bottom:8px}.iconfont[data-v-8dac9d0e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-8dac9d0e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-8dac9d0e]:before{content:\"\\E601\"}.pin[data-v-8dac9d0e]{background-color:#fff}.pin-header-from[data-v-8dac9d0e]{line-height:1;color:#8a9aa9;font-size:13px;padding:10px 20px 9px;border-bottom:1px solid #ebebeb}.pin-header-from span[data-v-8dac9d0e]{margin-left:4px}.pin-header-row[data-v-8dac9d0e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 2rem 0 20px}.pin-header-row .user-link[data-v-8dac9d0e]{font-size:0}.pin-header-row .avatar[data-v-8dac9d0e]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:3.75rem;height:3.75rem;border-radius:50%}@media (max-width:600px){.pin-header-row .avatar[data-v-8dac9d0e]{width:3.5rem;height:3.5rem}}.pin-header-row .pin-header-content[data-v-8dac9d0e]{margin-left:1rem}.pin-header-row .username[data-v-8dac9d0e]{font-size:1.25rem;font-weight:600;color:#2e3135}.pin-header-row .meta-box[data-v-8dac9d0e]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:.2rem 0 0;font-size:13px;color:#8a9aa9;cursor:default}.pin-header-row .meta-box .position[data-v-8dac9d0e]{max-width:12em}.pin-header-row .meta-box .dot[data-v-8dac9d0e]{margin:0 .5em}.pin-header-row .meta-box .time-box[data-v-8dac9d0e]{color:#8a9aa9}.pin-topic-row .topic-title[data-v-8dac9d0e]{font-size:13px;display:inline-block;line-height:22px;height:22px;padding:0 12px;border:1px solid #007fff;border-radius:14px;text-align:center;color:#007fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pin-content-row[data-v-8dac9d0e],.pin-image-row[data-v-8dac9d0e],.pin-link-row[data-v-8dac9d0e],.pin-topic-row[data-v-8dac9d0e]{position:relative;margin:1rem 4rem 0 6.45rem}@media (max-width:600px){.pin-content-row[data-v-8dac9d0e],.pin-image-row[data-v-8dac9d0e],.pin-link-row[data-v-8dac9d0e],.pin-topic-row[data-v-8dac9d0e]{margin-left:2rem;margin-right:2rem}}.pin-image-row[data-v-8dac9d0e]{margin-top:.333rem}.pin-content-row[data-v-8dac9d0e]{margin-top:.2rem}.pin-topic-row[data-v-8dac9d0e]{margin-top:.666rem}.content-box[data-v-7f9a139a]{font-size:1.25rem;line-height:1.5;white-space:pre-wrap;color:#17181a}.topic-title[data-v-7f9a139a]{margin-right:.3em;color:#007fff}.limit-btn[data-v-7f9a139a]{display:inline-block;margin-top:.4rem;color:#007fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.limit-btn[data-v-7f9a139a]:hover{opacity:.8}[data-v-7f9a139a] .emoji{width:1.666rem;height:1.666rem;vertical-align:sub}.iconfont[data-v-c07c0cd2]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-c07c0cd2]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-c07c0cd2]:before{content:\"\\E601\"}.link-box[data-v-c07c0cd2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.833rem 1.333rem;width:44.166rem;max-width:100%;max-height:7.083rem;background-color:#fff;border:1px solid #ebebeb;border-radius:4px;box-sizing:border-box}@media (max-width:600px){.link-box .link-thumb[data-v-c07c0cd2]{width:6rem;height:6rem}.link-box .link-info-box[data-v-c07c0cd2]{height:6rem}}.link-box[data-v-c07c0cd2]:hover{box-shadow:1px 1px 4px 0 rgba(0,0,0,.1)}.link-thumb[data-v-c07c0cd2]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:1.333rem;width:5.416rem;height:5.416rem;background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:2px}.link-thumb.blank[data-v-c07c0cd2]{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NSIgaGVpZ2h0PSI2NSIgdmlld0JveD0iMCAwIDY1IDY1Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjY1IiBoZWlnaHQ9IjY1IiBmaWxsPSIjMDA3RkZGIiByeD0iMiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0zMS4wMTYgNDAuNGMuNjUyLS42MjYgMS43Ny0uNjI2IDIuNTE1LS4wOS42NTIuNzE3LjY1MiAxLjc5IDAgMi40MTdsLTIuMTQzIDIuMDU4Yy0zLjA3MyAyLjk1My04LjAxIDIuOTUzLTExLjA4MyAwQzE4LjgzIDQzLjM3NiAxOCA0MS40NiAxOCAzOS40NjFjMC0yIC44My0zLjkxNSAyLjMwNS01LjMyNWw1LjEyMy00LjkyMUMyNi44OTQgMjcuNzk3IDI4Ljg4OCAyNyAzMC45NjkgMjdjMi4wOCAwIDQuMDc1Ljc5NyA1LjU0MiAyLjIxNS42NTIuNzE1LjY1MiAxLjc5IDAgMi40MTYtLjc0NS42MjYtMS44NjMuNjI2LTIuNTE1IDBhNC40NzMgNC40NzMgMCAwIDAtMy4wNzMtMS4yNTNjLTEuMjExIDAtMi4yMzYuNDQ3LTMuMDc0IDEuMjUzbC01LjEyMiA0LjkyMWE0LjA5NiA0LjA5NiAwIDAgMCAwIDUuOTA3QTQuNDczIDQuNDczIDAgMCAwIDI1LjggNDMuNzFjMS4yMSAwIDIuMjM1LS40NDcgMy4wNzQtMS4yNTJsMi4xNDItMi4wNTl6bTEzLjY4LTIwLjE4NWMzLjA3MiAyLjg2MyAzLjA3MiA3LjY5NSAwIDEwLjY0OGwtNS4xMTkgNC45MjJjLTMuMDcxIDIuOTUzLTguMDA1IDIuOTUzLTExLjA3NiAwbC0uMDkzLS4wOWExLjYwOSAxLjYwOSAwIDAgMSAuMDkzLTIuMjM2Yy43NDUtLjYyNyAxLjg2MS0uNjI3IDIuNTEzIDBhNC40NjggNC40NjggMCAwIDAgMy4wNzIgMS4yNTJjMS4yMSAwIDIuMjMzLS40NDcgMy4wNzEtMS4yNTJsNS4xMi00LjkyMmE0LjA5OCA0LjA5OCAwIDAgMCAwLTUuOTA2IDQuNDY4IDQuNDY4IDAgMCAwLTMuMDcyLTEuMjUzYy0xLjIxIDAtMi4yMzQuNDQ3LTMuMDcyIDEuMjUzbC0yLjE0IDIuMDU4Yy0uNzQ1LjYyNi0xLjg2Mi42MjYtMi41MTQgMC0uNjUxLS43MTYtLjY1MS0xLjc5IDAtMi40MTZsMi4xNDEtMi4wNThDMzUuMDg2IDE4Ljc5NyAzNy4wOCAxOCAzOS4xNTggMThjMi4wOCAwIDQuMDczLjc5NyA1LjUzOCAyLjIxNXoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);background-repeat:no-repeat;background-size:cover}.link-info-box[data-v-c07c0cd2]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:5.416rem;min-width:0}.link-info-box .link-title[data-v-c07c0cd2]{font-size:1.25rem;font-weight:500;line-height:1.5;color:#000;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2}.link-info-box .link-domain[data-v-c07c0cd2]{margin-top:auto;font-size:1.167rem;color:#8a93a0}.image-box[data-v-5296fd9a]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;max-width:100%}.image-box.col-1 .image[data-v-5296fd9a]{width:16.666rem}.image-box.col-1 .image.long[data-v-5296fd9a]{width:12.333rem}.image-box.col-3[data-v-5296fd9a]{width:398px}.image-box.col-3 .image[data-v-5296fd9a]{width:calc((100% - 4px * 2) / 3);max-width:9.166rem}.image-box.col-3 .image[data-v-5296fd9a]:not(:nth-child(3n)){margin-right:4px}.image-box.col-4[data-v-5296fd9a]{width:532px}.image-box.col-4 .image[data-v-5296fd9a]{width:calc((100% - 4px * 3) / 4);max-width:9.166rem}.image-box.col-4 .image[data-v-5296fd9a]:not(:nth-child(4n)){margin-right:4px}.image[data-v-5296fd9a]{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;margin-top:4px;max-width:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;cursor:zoom-in}.image .ratio-holder[data-v-5296fd9a]{pointer-events:none}.image .label[data-v-5296fd9a]{position:absolute;right:.667rem;bottom:.667rem;padding:.1rem .3rem;font-size:1rem;color:#fff;background-color:rgba(0,0,0,.49);border:1px solid #fff;border-radius:2px}.gallery[data-v-43b51726],.image .label[data-v-5296fd9a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gallery[data-v-43b51726]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);overflow-y:scroll;z-index:10000}.gallery-close[data-v-43b51726]{position:fixed;top:40px;right:50px;width:40px;height:40px;cursor:pointer;z-index:10001;text-align:center;line-height:40px;z-index:10002}.gallery-close .close-icon[data-v-43b51726]{font-size:24px;color:#fff;opacity:.6;transition:.2s}.gallery-close .close-icon[data-v-43b51726]:hover{opacity:1}.gallery-control-item[data-v-43b51726]{position:fixed;top:0;width:50%;height:100%;z-index:10000}.gallery-control-item[data-v-43b51726]:first-of-type{left:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAK9fX1gfn5+YUAAAAGAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1g///////////+fn5ggAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hP////////////////39/YIAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+4IAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2h/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+38AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2if////////////////v7+34AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2i/////////////////v7+3wAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9vb2jP////////////////v7+3sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAFAAAABwAAAAkAAAAL9vb2jf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABgAAAAkAAAAL9vb2j/////////////////v7+3gAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAK9vb2kP////////////////n5+XgAAAAEAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAH+Pj4kP////////////////T09HkAAAAHAAAABAAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+/v7j/////////////////Ly8nkAAAAKAAAACAAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAPv7+3T////////////////29vaKAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7d/////////////////b29ogAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/t6////////////////9fX1hQAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+33////////////////19fWCAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7gP////////////////X19X8AAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uD////////////////9fX1fAAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+4b////////////////09PR5AAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7if////////////////Ly8ncAAAAKAAAACQAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uM////////////////8vLydQAAAAoAAAAIAAAABQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+47////////////////09PRxAAAACAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7kf////////////////b29m0AAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP9/f2T///////////////++vr6aQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/39/Zb//////////v39/WkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAGAgIAC////lv39/WgAAAAC8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA+AAAAPwAAAD+AAAA/wAAAA==),auto}.gallery-control-item[data-v-43b51726]:last-of-type{right:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAG+fn5hfX19YEAAAAKAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+fn5gv//////////9fX1gwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAP39/YL////////////////19fWEAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7gv////////////////X19YUAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/uA////////////////9vb2hwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+3/////////////////29vaIAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7fv////////////////b29okAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t8////////////////9vb2iwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+3v////////////////29vaMAAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7ev////////////////b29o0AAAALAAAACQAAAAcAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t4////////////////9vb2jwAAAAsAAAAJAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAABPn5+Xj////////////////29vaQAAAACgAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAQAAAAH9PT0ef////////////////j4+JAAAAAHAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAACAAAAAry8vJ5////////////////+/v7jwAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iv////////////////v7+3QAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+3cAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1gv////////////////v7+30AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1f/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1fP////////////////v7+4MAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9PT0ef////////////////v7+4YAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAEAAAABgAAAAkAAAAK8vLyd/////////////////v7+4kAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABQAAAAgAAAAK8vLydf////////////////v7+4sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAYAAAAI9PT0cf////////////////v7+44AAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAF9vb2bf////////////////v7+5EAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAA+vr6af////7///////////39/ZMAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/Wr////+//////39/ZYAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/f39aP///5aAgIACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAA==),auto}.gallery-content[data-v-43b51726]{position:absolute;width:50%;left:25%;height:0;z-index:10001}.gallery-content img[data-v-43b51726]{width:100%}.gallery-content .inner-control-item[data-v-43b51726]{position:absolute;top:0;width:50%;height:100%}.gallery-content .inner-control-item[data-v-43b51726]:first-of-type{left:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAK9fX1gfn5+YUAAAAGAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1g///////////+fn5ggAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hP////////////////39/YIAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+4IAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2h/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+38AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2if////////////////v7+34AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2i/////////////////v7+3wAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9vb2jP////////////////v7+3sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAFAAAABwAAAAkAAAAL9vb2jf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABgAAAAkAAAAL9vb2j/////////////////v7+3gAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAK9vb2kP////////////////n5+XgAAAAEAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAH+Pj4kP////////////////T09HkAAAAHAAAABAAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+/v7j/////////////////Ly8nkAAAAKAAAACAAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAPv7+3T////////////////29vaKAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7d/////////////////b29ogAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/t6////////////////9fX1hQAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+33////////////////19fWCAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7gP////////////////X19X8AAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uD////////////////9fX1fAAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+4b////////////////09PR5AAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7if////////////////Ly8ncAAAAKAAAACQAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uM////////////////8vLydQAAAAoAAAAIAAAABQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+47////////////////09PRxAAAACAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7kf////////////////b29m0AAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP9/f2T///////////////++vr6aQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/39/Zb//////////v39/WkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAGAgIAC////lv39/WgAAAAC8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA+AAAAPwAAAD+AAAA/wAAAA==),auto}.gallery-content .inner-control-item[data-v-43b51726]:last-of-type{right:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAG+fn5hfX19YEAAAAKAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+fn5gv//////////9fX1gwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAP39/YL////////////////19fWEAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7gv////////////////X19YUAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/uA////////////////9vb2hwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+3/////////////////29vaIAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7fv////////////////b29okAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t8////////////////9vb2iwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+3v////////////////29vaMAAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7ev////////////////b29o0AAAALAAAACQAAAAcAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t4////////////////9vb2jwAAAAsAAAAJAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAABPn5+Xj////////////////29vaQAAAACgAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAQAAAAH9PT0ef////////////////j4+JAAAAAHAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAACAAAAAry8vJ5////////////////+/v7jwAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iv////////////////v7+3QAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+3cAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1gv////////////////v7+30AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1f/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1fP////////////////v7+4MAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9PT0ef////////////////v7+4YAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAEAAAABgAAAAkAAAAK8vLyd/////////////////v7+4kAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABQAAAAgAAAAK8vLydf////////////////v7+4sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAYAAAAI9PT0cf////////////////v7+44AAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAF9vb2bf////////////////v7+5EAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAA+vr6af////7///////////39/ZMAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/Wr////+//////39/ZYAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/f39aP///5aAgIACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAA==),auto}.gallery-footer[data-v-43b51726]{position:fixed;bottom:0;width:100%;height:100px;z-index:10002}.gallery-footer:hover .gallery-counter[data-v-43b51726]{bottom:0}.gallery-footer .gallery-counter[data-v-43b51726]{position:absolute;bottom:-66px;width:100%;height:66px;font-size:22px;color:#fff;text-align:center;line-height:66px;letter-spacing:4px;background-color:rgba(0,0,0,.5);transition:bottom .3s}.gallery-footer .gallery-counter .current-index[data-v-43b51726]{font-size:28px}.mobile-gallery[data-v-d6d9bca6]{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;background-color:#000;z-index:10000}.mobile-gallery-close[data-v-d6d9bca6],.mobile-gallery-counter[data-v-d6d9bca6]{position:fixed;z-index:10001}.mobile-gallery-counter[data-v-d6d9bca6]{top:24px;width:100%;font-size:16px;letter-spacing:2px;text-shadow:0 0 3px #333;text-align:center}.mobile-gallery-close[data-v-d6d9bca6]{top:20px;right:20px;padding:4px 16px;font-size:14px;border-radius:3px;background-color:rgba(0,0,0,.3);border:1px solid hsla(0,0%,100%,.3)}.mobile-gallery-loading[data-v-d6d9bca6]{position:absolute;top:50%;left:50%;margin:-20px 0 0 -20px;z-index:10001}.mobile-gallery-group[data-v-d6d9bca6],.mobile-gallery-img[data-v-d6d9bca6]{height:100%;overflow-y:scroll}.mobile-gallery-group[data-v-d6d9bca6]{font-size:0}.mobile-gallery-img[data-v-d6d9bca6]{float:left}.mobile-gallery-img img[data-v-d6d9bca6]{position:relative;display:block;width:100%}.carousel-box[data-v-0deee079]{margin-top:4px;width:100%}.carousel-action-bar[data-v-0deee079]{border-radius:2px;background-color:#f4f5f7}.action-list[data-v-0deee079]{height:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.action-list li[data-v-0deee079]{margin:0 12px;display:inline-block;font-size:13px;color:#76797e;cursor:pointer}.action-list li:hover .icon svg path[data-v-0deee079]{fill:#027fff}.action-list li:hover .action-name[data-v-0deee079]{color:#027fff}.action-list li .icon[data-v-0deee079]{margin-right:6px;display:inline-block;line-height:35px}.action-list li .icon svg path[data-v-0deee079]{transition:.2s}.action-list li .action-name[data-v-0deee079]{line-height:33px;vertical-align:top;transition:.2s}.carousel-content[data-v-0deee079]{position:relative;background-color:#f4f5f7;overflow:hidden}.carousel-content .carousel-loading[data-v-0deee079]{position:relative;height:300px}.carousel-content .carousel-loading .icon-loading[data-v-0deee079]{position:absolute;top:50%;left:50%;margin:-20px 0 0 -20px}.carousel-content img.carousel-image[data-v-0deee079]{margin:0 auto;display:block;width:100%;cursor:zoom-out}.carousel-content img.carousel-image.error-image[data-v-0deee079]{padding:32px 100px;width:32px}.carousel-content .controller-item[data-v-0deee079]{position:absolute;top:0;width:30%;height:100%}.carousel-content .controller-item[data-v-0deee079]:first-of-type{left:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAK9fX1gfn5+YUAAAAGAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1g///////////+fn5ggAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hP////////////////39/YIAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+4IAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2h/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+38AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2if////////////////v7+34AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2i/////////////////v7+3wAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9vb2jP////////////////v7+3sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAFAAAABwAAAAkAAAAL9vb2jf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABgAAAAkAAAAL9vb2j/////////////////v7+3gAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAK9vb2kP////////////////n5+XgAAAAEAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAH+Pj4kP////////////////T09HkAAAAHAAAABAAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+/v7j/////////////////Ly8nkAAAAKAAAACAAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAPv7+3T////////////////29vaKAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7d/////////////////b29ogAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/t6////////////////9fX1hQAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+33////////////////19fWCAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7gP////////////////X19X8AAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uD////////////////9fX1fAAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+4b////////////////09PR5AAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7if////////////////Ly8ncAAAAKAAAACQAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uM////////////////8vLydQAAAAoAAAAIAAAABQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+47////////////////09PRxAAAACAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7kf////////////////b29m0AAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP9/f2T///////////////++vr6aQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/39/Zb//////////v39/WkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAGAgIAC////lv39/WgAAAAC8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA+AAAAPwAAAD+AAAA/wAAAA==),auto}.carousel-content .controller-item[data-v-0deee079]:last-of-type{right:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAG+fn5hfX19YEAAAAKAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+fn5gv//////////9fX1gwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAP39/YL////////////////19fWEAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7gv////////////////X19YUAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/uA////////////////9vb2hwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+3/////////////////29vaIAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7fv////////////////b29okAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t8////////////////9vb2iwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+3v////////////////29vaMAAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7ev////////////////b29o0AAAALAAAACQAAAAcAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t4////////////////9vb2jwAAAAsAAAAJAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAABPn5+Xj////////////////29vaQAAAACgAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAQAAAAH9PT0ef////////////////j4+JAAAAAHAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAACAAAAAry8vJ5////////////////+/v7jwAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iv////////////////v7+3QAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+3cAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1gv////////////////v7+30AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1f/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1fP////////////////v7+4MAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9PT0ef////////////////v7+4YAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAEAAAABgAAAAkAAAAK8vLyd/////////////////v7+4kAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABQAAAAgAAAAK8vLydf////////////////v7+4sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAYAAAAI9PT0cf////////////////v7+44AAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAF9vb2bf////////////////v7+5EAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAA+vr6af////7///////////39/ZMAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/Wr////+//////39/ZYAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/f39aP///5aAgIACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAA==),auto}.carousel-list[data-v-0deee079]{margin-top:8px;font-size:0}.carousel-item[data-v-0deee079]{display:inline-block;width:10.22222%;cursor:pointer;overflow:hidden}.carousel-item+.carousel-item[data-v-0deee079]{margin-left:1%}.carousel-item .thumb[data-v-0deee079]{position:relative;width:100%;border:2px solid transparent;box-sizing:border-box;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;overflow:hidden;opacity:.6;transition:.2s}.carousel-item .thumb[data-v-0deee079]:after,.carousel-item .thumb[data-v-0deee079]:before{content:\"\";display:block}.carousel-item .thumb[data-v-0deee079]:after{padding-top:100%}.carousel-item .thumb[data-v-0deee079]:before{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid transparent;box-sizing:border-box;transition:.2s}.carousel-item .thumb.active[data-v-0deee079],.carousel-item .thumb[data-v-0deee079]:hover{border-color:#027fff;opacity:1}.carousel-item .thumb.active[data-v-0deee079]:before,.carousel-item .thumb[data-v-0deee079]:hover:before{border-color:#fff}.pin-carousel[data-v-3368faa6]{width:100%}.action-bar[data-v-3368faa6]{height:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#f4f5f7}.action-item[data-v-3368faa6]{padding:0 12px;display:inline-block;font-size:13px;color:#76797e;cursor:pointer;line-height:32px}.action-item:not(.not-allow):hover .icon svg path[data-v-3368faa6]{fill:#027fff}.action-item:not(.not-allow):hover .action-name[data-v-3368faa6]{color:#027fff}.action-item .action-name[data-v-3368faa6],.action-item .icon[data-v-3368faa6]{display:inline-block}.action-item .icon[data-v-3368faa6]{margin-right:6px;vertical-align:middle}.action-item .action-name[data-v-3368faa6],.action-item .icon svg path[data-v-3368faa6]{transition:.2s}.action-item.not-allow[data-v-3368faa6]{cursor:not-allowed;opacity:.6}.carousel-body[data-v-3368faa6]{position:relative;height:320px;background-color:#f4f5f7;overflow:hidden;transition:height .2s}.carousel-body .carousel-error[data-v-3368faa6],.carousel-body .carousel-image[data-v-3368faa6],.carousel-body .carousel-loading[data-v-3368faa6]{position:absolute}.carousel-body .carousel-error[data-v-3368faa6],.carousel-body .carousel-loading[data-v-3368faa6]{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.carousel-body .carousel-error[data-v-3368faa6]{width:50px}.carousel-body .carousel-image[data-v-3368faa6]{position:absolute;top:0;left:0;display:block;width:100%;-webkit-transform-origin:top left;transform-origin:top left}.carousel-body .toggle-area[data-v-3368faa6]{position:absolute;top:0;width:30%;height:100%;z-index:1}.carousel-body .toggle-area.prev[data-v-3368faa6]{left:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAK9fX1gfn5+YUAAAAGAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1g///////////+fn5ggAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hP////////////////39/YIAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+4IAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2h/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+38AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2if////////////////v7+34AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2i/////////////////v7+3wAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9vb2jP////////////////v7+3sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAFAAAABwAAAAkAAAAL9vb2jf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABgAAAAkAAAAL9vb2j/////////////////v7+3gAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAK9vb2kP////////////////n5+XgAAAAEAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAH+Pj4kP////////////////T09HkAAAAHAAAABAAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+/v7j/////////////////Ly8nkAAAAKAAAACAAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAPv7+3T////////////////29vaKAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7d/////////////////b29ogAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/t6////////////////9fX1hQAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+33////////////////19fWCAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7gP////////////////X19X8AAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uD////////////////9fX1fAAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+4b////////////////09PR5AAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7if////////////////Ly8ncAAAAKAAAACQAAAAYAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/uM////////////////8vLydQAAAAoAAAAIAAAABQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+47////////////////09PRxAAAACAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7kf////////////////b29m0AAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP9/f2T///////////////++vr6aQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/39/Zb//////////v39/WkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAGAgIAC////lv39/WgAAAAC8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA+AAAAPwAAAD+AAAA/wAAAA==),auto}.carousel-body .toggle-area.next[data-v-3368faa6]{right:0;cursor:url(data:application/octet-stream;base64,AAABAAEAEBwAAAEAIACYBwAAFgAAACgAAAAQAAAAOAAAAAEAIAAAAAAAAAcAABILAAASCwAAAAAAAAAAAAAAAAAG+fn5hfX19YEAAAAKAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAA+fn5gv//////////9fX1gwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAP39/YL////////////////19fWEAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAD+/v7gv////////////////X19YUAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAAgAAAAP7+/uA////////////////9vb2hwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAEAAAABAAAAAQAAAAEAAAACAAAAA/v7+3/////////////////29vaIAAAACwAAAAkAAAAHAAAABQAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAAD+/v7fv////////////////b29okAAAALAAAACQAAAAcAAAAFAAAAAwAAAAIAAAABAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t8////////////////9vb2iwAAAAsAAAAJAAAABwAAAAUAAAADAAAAAgAAAAAAAAABAAAAAQAAAAEAAAACAAAAA/v7+3v////////////////29vaMAAAACwAAAAkAAAAHAAAABQAAAAMAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAIAAAAD+/v7ev////////////////b29o0AAAALAAAACQAAAAcAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAP7+/t4////////////////9vb2jwAAAAsAAAAJAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAABPn5+Xj////////////////29vaQAAAACgAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAQAAAAH9PT0ef////////////////j4+JAAAAAHAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAACAAAAAry8vJ5////////////////+/v7jwAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iv////////////////v7+3QAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9vb2iP////////////////v7+3cAAAADAAAAAQAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1hf////////////////v7+3oAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1gv////////////////v7+30AAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1f/////////////////v7+4AAAAADAAAAAgAAAAEAAAABAAAAAgAAAAMAAAAFAAAABwAAAAkAAAAL9fX1fP////////////////v7+4MAAAADAAAAAgAAAAEAAAABAAAAAQAAAAMAAAAFAAAABwAAAAkAAAAL9PT0ef////////////////v7+4YAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAEAAAABgAAAAkAAAAK8vLyd/////////////////v7+4kAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAABQAAAAgAAAAK8vLydf////////////////v7+4sAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAYAAAAI9PT0cf////////////////v7+44AAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAF9vb2bf////////////////v7+5EAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAA+vr6af////7///////////39/ZMAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/Wr////+//////39/ZYAAAADAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/f39aP///5aAgIACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAHAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAACAAAAAwAAAAOAAAADwAAAA8AAAAOAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAA==),auto}.carousel-body .toggle-area.zoomout[data-v-3368faa6]{width:100%;cursor:zoom-out;z-index:0}.nav-list[data-v-3368faa6]{margin-top:8px;font-size:0}.nav-item[data-v-3368faa6]{display:inline-block;width:10.22222%;cursor:pointer;overflow:hidden}.nav-item+.nav-item[data-v-3368faa6]{margin-left:1%}.nav-item .thumb[data-v-3368faa6]{position:relative;background-size:cover;background-position:50%;background-repeat:no-repeat;border:2px solid transparent;box-sizing:border-box;overflow:hidden;opacity:.6;transition:.2s}.nav-item .thumb[data-v-3368faa6]:after,.nav-item .thumb[data-v-3368faa6]:before{content:\"\";display:block}.nav-item .thumb[data-v-3368faa6]:before{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid transparent;box-sizing:border-box;transition:.2s}.nav-item .thumb[data-v-3368faa6]:after{padding-top:100%}.nav-item .thumb.active[data-v-3368faa6],.nav-item .thumb[data-v-3368faa6]:hover{border-color:#027fff;opacity:1}.nav-item .thumb.active[data-v-3368faa6]:before,.nav-item .thumb[data-v-3368faa6]:hover:before{border-color:#fff}.fade-enter-active[data-v-3368faa6],.fade-leave-active[data-v-3368faa6]{transition:opacity .3s}.fade-enter[data-v-3368faa6],.fade-leave-to[data-v-3368faa6]{opacity:0}.carousel-loading[data-v-88558122]{width:80px;height:76px;overflow:hidden}.carousel-loading .content[data-v-88558122]{position:relative;-webkit-transform:scale(1.8);transform:scale(1.8)}.carousel-loading .section[data-v-88558122]{margin-left:22px;position:absolute;-webkit-animation:j 1.2s infinite;animation:j 1.2s infinite}.carousel-loading .section.a[data-v-88558122]{top:0;left:14px}.carousel-loading .section.b[data-v-88558122]{top:12px;left:7px;-webkit-animation-delay:.2s;animation-delay:.2s}.carousel-loading .section.c[data-v-88558122]{top:20px;left:0;-webkit-animation-delay:.4s;animation-delay:.4s}@keyframes j{0%{opacity:0}35%{opacity:1}60%{opacity:0}to{opacity:0}}.iconfont[data-v-2750dac2]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-2750dac2]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-2750dac2]:before{content:\"\\E601\"}.action-box[data-v-2750dac2]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;margin-top:1.333rem;height:34px;border-top:1px solid #ebebeb}@media (max-width:600px){.action-box .action[data-v-2750dac2]{-webkit-box-flex:1;-ms-flex:1 1 50%;flex:1 1 50%}.action-box .share-action[data-v-2750dac2]{display:none}}.action[data-v-2750dac2]{-webkit-box-flex:1;-ms-flex:1 1 33.333%;flex:1 1 33.333%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;height:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.action:hover .action-title-box[data-v-2750dac2]{opacity:.8}.action[data-v-2750dac2]:not(:last-child):after{content:\"\";position:absolute;top:50%;right:0;margin-top:-1rem;width:1px;height:2rem;background-color:#ebebeb}@media (max-width:600px){.action[data-v-2750dac2]:nth-child(2):after{display:none}}.action.like-action.active .action-title[data-v-2750dac2]{color:#37c700}.action-title-box[data-v-2750dac2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.action-title-box .icon[data-v-2750dac2]{width:18px;height:18px}.action-title-box .action-title[data-v-2750dac2]{margin-left:.3em;font-size:13px;font-weight:500;color:#8a93a0}.share-panel[data-v-2750dac2]{position:absolute;top:100%;left:50%;margin:0 0 0 -5.5rem;width:11rem;background-color:#fff;border:1px solid #ebebeb;border-radius:2px;z-index:1}.share-panel.top[data-v-2750dac2]{top:auto;bottom:100%}.share-panel.top[data-v-2750dac2]:after,.share-panel.top[data-v-2750dac2]:before{display:none}.share-panel[data-v-2750dac2]:after,.share-panel[data-v-2750dac2]:before{content:\"\";position:absolute;top:0;left:50%}.share-panel[data-v-2750dac2]:before{margin:-7px 0 0 -7px;border:7px solid transparent;border-bottom-color:#ebebeb;border-top:none}.share-panel[data-v-2750dac2]:after{margin:-6px 0 0 -6px;border:6px solid transparent;border-bottom-color:#fff;border-top:none}.share-panel .share-item[data-v-2750dac2]{padding:.5rem .9rem}.share-panel .share-item[data-v-2750dac2]:not(:last-child){border-bottom:1px solid #ebebeb}.share-panel .share-item[data-v-2750dac2]:hover{background-color:#fdfdfd}.share-panel .share-title-box[data-v-2750dac2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.167rem;color:#8a93a0}.share-panel .share-title-box .icon[data-v-2750dac2]{margin-right:.8rem;width:20px}.share-panel .qr-code[data-v-2750dac2]{margin:.6rem 0 .8rem;height:8.333rem;background-position:50%;background-repeat:no-repeat;background-size:contain}.iconfont[data-v-dcad7f9a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-dcad7f9a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-dcad7f9a]:before{content:\"\\E601\"}.comment-list-box[data-v-dcad7f9a]{position:relative;background-color:#fff;border-top:1px solid #ebebeb}.comment-list-box[data-v-dcad7f9a]:after,.comment-list-box[data-v-dcad7f9a]:before{display:table;content:\"\";clear:both}.comment-list-box .triangle-top[data-v-dcad7f9a]{position:absolute;top:-8px;left:50%;margin:-7px 0 0 -7px}.comment-form[data-v-dcad7f9a]{margin:1.333rem 1.666rem}@media (max-width:600px){.comment-form[data-v-dcad7f9a]{margin:1.25rem 2rem}}.comment-list[data-v-dcad7f9a]{margin:0 1.666rem 0 6.5rem}@media (max-width:600px){.comment-list[data-v-dcad7f9a]{margin:0 2rem}}.fetch-more-comment[data-v-dcad7f9a]{display:block;padding:1.1rem 0;font-size:1.083rem;text-align:center;color:#406599;border-top:1px solid #ebebeb;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fetch-more-comment[data-v-dcad7f9a]:hover{opacity:.8}.iconfont[data-v-db50653c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-db50653c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-db50653c]:before{content:\"\\E601\"}.comment-form[data-v-db50653c]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;padding:1rem 1.333rem;background-color:#fafbfc;border-radius:3px}.comment-form.focused .input-box[data-v-db50653c]{border-color:#007fff}.comment-form.reply[data-v-db50653c]{margin-top:1.083rem;padding:1rem}.comment-form.reply .avatar-box[data-v-db50653c]{display:none}.comment-form.sub-reply[data-v-db50653c]{background-color:#fff;border:1px solid #f1f1f2}.avatar-box[data-v-db50653c]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}@media (max-width:600px){.avatar-box[data-v-db50653c]{display:none}}.avatar[data-v-db50653c]{margin:0 1rem 0 0;width:2.666rem;height:2.666rem;border-radius:50%}.form-box[data-v-db50653c]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;position:relative}.form-box.disabled[data-v-db50653c]:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.input-box[data-v-db50653c]{font-size:0;background-color:#fff;border:1px solid #f1f1f1;border-radius:3px}.rich-input[data-v-db50653c]{position:relative;padding:.6rem 1rem;font-size:1.083rem;line-height:1.7;color:#17181a;outline:none;min-height:1.3em}.rich-input[data-v-db50653c]:before{content:attr(placeholder);position:absolute;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rich-input[data-v-db50653c]:not(.empty):before{display:none}.image-preview-box[data-v-db50653c]{display:inline-block;position:relative;margin:0 1rem 1rem}.image-preview-box .image-preview[data-v-db50653c]{width:6.667rem;height:6.667rem;background-position:50%;background-repeat:no-repeat;background-size:cover}.image-preview-box .clean-btn[data-v-db50653c]{position:absolute;top:.333rem;right:.333rem;cursor:pointer}.image-preview-box .clean-btn[data-v-db50653c]:hover{opacity:.8}.action-box[data-v-db50653c]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:.65rem 0 0}@media (max-width:600px){.action-box .emoji-btn[data-v-db50653c]{display:none}}[data-v-db50653c] .action-box .emoji-btn span{font-size:13px}.image-btn[data-v-db50653c]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.083rem;color:#027fff;cursor:pointer;margin-left:20px}.image-btn[data-v-db50653c]:hover{opacity:.8}.image-btn .icon[data-v-db50653c]{margin-right:.333rem;width:18px;height:18px}.submit[data-v-db50653c]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:auto}.submit span[data-v-db50653c]{color:#c2c2c2;margin-right:8px;font-size:13px}.submit .submit-btn[data-v-db50653c]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:auto;padding:.5rem 1.3rem;font-size:1.25rem;color:#fff;background-color:#027fff;border-radius:2px;cursor:pointer}.submit .submit-btn[data-v-db50653c]:hover{background-color:#0371df}.submit .submit-btn[data-v-db50653c]:disabled{cursor:default;opacity:.4}[data-v-db50653c] .rich-input .emoji{vertical-align:sub;width:1.666rem;height:1.666rem;cursor:default;margin:0 1px}.comment-list .item[data-v-5b54a416]:not(:last-child){margin-bottom:1.333rem}.comment-list .item[data-v-5b54a416]:not(:last-child) .comment-divider-line{border-bottom:1px solid #f1f1f1}.iconfont[data-v-78cc4cf0]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-78cc4cf0]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-78cc4cf0]:before{content:\"\\E601\"}.comment[data-v-78cc4cf0]{display:-webkit-box;display:-ms-flexbox;display:flex}.popover[data-v-78cc4cf0]{height:33px}.user-link[data-v-78cc4cf0]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.avatar[data-v-78cc4cf0]{width:2.666rem;height:2.666rem;border-radius:50%}.content-box[data-v-78cc4cf0]{margin-left:.833rem;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.meta-box[data-v-78cc4cf0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.083rem;line-height:1.2;white-space:nowrap}.meta-box .username[data-v-78cc4cf0]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:0;color:#333}.meta-box .position[data-v-78cc4cf0]{color:#8a9aa9;font-size:1.083rem;margin-left:4px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:16rem}@media (max-width:600px){.meta-box .position[data-v-78cc4cf0]{max-width:12rem}}@media (max-width:320px){.meta-box .position[data-v-78cc4cf0]{max-width:5rem}}.reply-stat[data-v-78cc4cf0]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:7px;font-weight:400}.reply-stat .time[data-v-78cc4cf0]{font-size:1.083rem;color:#8a9aa9;cursor:default}.reply-stat .action-box[data-v-78cc4cf0]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-left:auto;min-width:8.8rem;color:#8a93a0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reply-stat .action-box .comment-action span[data-v-78cc4cf0]{margin-left:6px}.reply-stat .action-box .action[data-v-78cc4cf0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:.5rem;cursor:pointer}.reply-stat .action-box .action[data-v-78cc4cf0]:hover{opacity:.8}.reply-stat .action-box .action.active[data-v-78cc4cf0]{color:#37c700}.reply-stat .action-box .action-title[data-v-78cc4cf0]{margin-left:.25rem}.content[data-v-78cc4cf0]{margin-top:.55rem;font-size:1.083rem;line-height:1.833rem;white-space:pre-wrap;color:#505050}.limit-btn[data-v-78cc4cf0]{font-size:1.083rem;display:inline-block;margin-top:.4rem;color:#007fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.limit-btn[data-v-78cc4cf0]:hover{opacity:.8}.image[data-v-78cc4cf0]{margin-top:.8rem;width:6.667rem;height:6.667rem;background-position:50%;background-repeat:no-repeat;background-size:cover;cursor:zoom-in}.content .emoji[data-v-78cc4cf0],[data-v-78cc4cf0] .content .emoji,[data-v-78cc4cf0] .rich-input .emoji{width:1.666rem;height:1.666rem;vertical-align:sub}[data-v-78cc4cf0] .content .emoji{margin-right:2px}[data-v-78cc4cf0] .content .emoji:first-child{margin-left:4px}[data-v-78cc4cf0] .content .emoji:last-child{margin-right:4px}[data-v-78cc4cf0] .content .parse-emoji-url img{height:1.333rem}.sub-comment-list[data-v-7ce1c650]{margin:1rem 0;padding:0 0 0 1rem;background-color:#fafbfc;border-radius:3px}.sub-comment-list .item[data-v-7ce1c650]:not(:last-child) .user-content-box{border-bottom:1px solid #f1f1f1}.fetch-more[data-v-7ce1c650]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fetch-more-comment[data-v-7ce1c650]{display:inline-block;margin:1rem 0;font-size:1.083rem;color:#406599;cursor:pointer}.fetch-more-comment[data-v-7ce1c650]:hover{opacity:.8}.iconfont[data-v-0e80c338]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-0e80c338]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-0e80c338]:before{content:\"\\E601\"}.sub-comment[data-v-0e80c338]{position:relative;padding:1rem 0 0}.sub-comment-content-row[data-v-0e80c338]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:start}.sub-comment-content-box[data-v-0e80c338]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.popover[data-v-0e80c338]{height:33px}.avatar[data-v-0e80c338]{width:2.666rem;height:2.666rem;border-radius:50%}.user-content-box[data-v-0e80c338]{margin-left:.833rem;margin-right:1rem;padding-bottom:12px;font-size:1.083rem;color:#17181a;width:100%}.user-content-box .profie[data-v-0e80c338]{display:-webkit-box;display:-ms-flexbox;display:flex}.user-content-box .profie .username[data-v-0e80c338]{color:#333;margin-right:4px}.user-content-box .profie .position[data-v-0e80c338]{color:#8a9aa9;font-size:13px;font-weight:400;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:16rem}@media (max-width:600px){.user-content-box .profie .position[data-v-0e80c338]{max-width:10rem}}@media (max-width:320px){.user-content-box .profie .position[data-v-0e80c338]{max-width:5rem}}.user-content-box .content-box[data-v-0e80c338]{display:inline-block;margin-top:.5rem}.user-content-box .content-box .content[data-v-0e80c338]{white-space:pre-wrap;color:#505050;line-height:1.833rem}.user-content-box .limit-btn[data-v-0e80c338]{color:#007fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.user-content-box .limit-btn[data-v-0e80c338]:hover{opacity:.8}.user-content-box .limit-btn.all[data-v-0e80c338]{display:inline-block;margin:.4rem 0}.user-content-box .image[data-v-0e80c338]{margin:0 .5em;color:#406599;cursor:pointer;position:relative}.user-content-box .image a.image-preview[data-v-0e80c338]{position:relative;z-index:1;display:none;padding:8px;position:absolute;margin-left:17px;top:2rem;left:0;background-color:#fff;border-radius:2px;box-shadow:0 5px 18px 0 rgba(0,0,0,.16);border:.5px solid hsla(0,0%,59%,.2);-webkit-transform:translate(-50%);transform:translate(-50%)}@media (max-width:600px){.user-content-box .image a.image-preview[data-v-0e80c338]{display:none}}.user-content-box .image a.image-preview .image[data-v-0e80c338]{width:200px;height:100%;min-height:170px;margin:0}.user-content-box .image a.image-preview .triangle-top[data-v-0e80c338]{position:absolute;top:-8px;left:50%;margin:-7px 0 0 -7px}.user-content-box .image:hover a.image-preview[data-v-0e80c338]{display:inline-block}.sub-comment-stat-box[data-v-0e80c338]{margin-top:7px;font-size:13px}.sub-comment-action-box[data-v-0e80c338],.sub-comment-stat-box[data-v-0e80c338]{display:-webkit-box;display:-ms-flexbox;display:flex;color:#8a93a0}.sub-comment-action-box[data-v-0e80c338]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-left:auto;min-width:8.8rem;font-size:1.083rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width:600px){.sub-comment-action-box[data-v-0e80c338]{display:none}}.sub-comment-action-box .comment-action span[data-v-0e80c338]{margin-left:6px}.sub-comment-action-box .action[data-v-0e80c338]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:.5rem;cursor:pointer}.sub-comment-action-box .action[data-v-0e80c338]:hover{opacity:.8}.sub-comment-action-box .action.active[data-v-0e80c338]{color:#37c700}.sub-comment-action-box .action-title[data-v-0e80c338]{margin-left:.25rem}.sub-comment[data-v-0e80c338] .reply-form .triangle{display:none}.content .emoji[data-v-0e80c338],[data-v-0e80c338] .rich-input .emoji{width:1.666rem;height:1.666rem;vertical-align:sub}[data-v-0e80c338] .content .emoji{width:1.5rem;height:1.5rem;vertical-align:sub;margin-right:2px}[data-v-0e80c338] .content .emoji:first-child{margin-left:4px}[data-v-0e80c338] .content .emoji:last-child{margin-right:4px}[data-v-0e80c338] .user-popover-box{display:inline-block}[data-v-0e80c338] .user-popover-box a.be-replied{color:#406599}.pin-header-more[data-v-e069ff9a]{position:relative;margin:0 -1px 0 auto}.more-button[data-v-e069ff9a]{cursor:pointer}.more-button path[data-v-e069ff9a]{fill:#b8c1cc}.more-button:hover path[data-v-e069ff9a]{fill:#9da7b3}.dropdown[data-v-e069ff9a]{position:absolute;margin-top:6px;z-index:1}.dropdown-menu[data-v-e069ff9a]{display:block;padding:6px 0;border-radius:3px;background-color:#fff;border:1px solid #ebebeb;box-shadow:0 3px 12px 0 rgba(0,0,0,.06)}.dropdown-menu li[data-v-e069ff9a]{padding:6px 28px;display:block;font-size:13px;color:#84878b;text-align:center;cursor:pointer;white-space:nowrap}.dropdown-menu li[data-v-e069ff9a]:hover{color:#64686e;background-color:#f8f8f8}.dropdown-caret[data-v-e069ff9a],.dropdown-caret[data-v-e069ff9a]:after{position:absolute;top:-11px;left:0;width:0;height:0;border:6px solid;border-color:transparent transparent #ebebeb}.dropdown-caret[data-v-e069ff9a]:after{content:\"\";top:-5px;left:-6px;border-bottom-color:#fff}.popover-enter-active[data-v-e069ff9a],.popover-leave-active[data-v-e069ff9a]{-webkit-transform:translateY(0);transform:translateY(0);transition:.3s}.popover-enter[data-v-e069ff9a],.popover-leave-to[data-v-e069ff9a]{opacity:0;-webkit-transform:translateY(-8px);transform:translateY(-8px)}@media (max-width:600px){.dropdown-menu li[data-v-e069ff9a]{padding:10px 12px}}.iconfont[data-v-57e1d61a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-57e1d61a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-57e1d61a]:before{content:\"\\E601\"}.masker[data-v-57e1d61a]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.65);z-index:500}.dialog[data-v-57e1d61a]{padding:20px 24px;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-60%);transform:translate(-50%,-60%);width:380px;background-color:#fff;border-radius:2px;box-shadow:0 1px 6px 0 rgba(0,0,0,.15);z-index:501}.dialog-header[data-v-57e1d61a]{padding-bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.dialog-header .title[data-v-57e1d61a]{font-size:16px;color:#17181a;font-weight:600}.dialog-header .header-button[data-v-57e1d61a]{margin-top:5px;width:13px;height:13px;cursor:pointer}.dialog-header .header-button img[data-v-57e1d61a]{width:100%}.dialog-body[data-v-57e1d61a]{padding-bottom:8px;font-size:15px;color:#333}.dialog-footer[data-v-57e1d61a]{padding-top:8px;text-align:right}.footer-button[data-v-57e1d61a]{display:inline-block;padding:6px 18px;outline:0;text-align:center;white-space:nowrap;font-size:14px;color:#909090;border:1px solid #c0c6cc;border-radius:2px;background-color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;transition:.2s}.footer-button.loading[data-v-57e1d61a]{opacity:.4;cursor:default}.footer-button[data-v-57e1d61a]:hover{background-color:#f1f1f1}.footer-button.primary[data-v-57e1d61a]{color:#fff}.footer-button.primary.loading[data-v-57e1d61a]:hover,.footer-button.primary[data-v-57e1d61a]{border-color:#007fff;background-color:#007fff}.footer-button.primary[data-v-57e1d61a]:hover{border-color:#0371df;background-color:#0371df}.masker-fade-enter-active[data-v-57e1d61a],.masker-fade-leave-active[data-v-57e1d61a]{transition:opacity .3s}.masker-fade-enter[data-v-57e1d61a],.masker-fade-leave-to[data-v-57e1d61a]{opacity:0}.dialog-fade-enter-active[data-v-57e1d61a],.dialog-fade-leave-active[data-v-57e1d61a]{transition:.3s}.dialog-fade-enter[data-v-57e1d61a],.dialog-fade-leave-to[data-v-57e1d61a]{-webkit-transform:translate(-50%,-52%);transform:translate(-50%,-52%);opacity:0}@media (max-width:600px){.dialog[data-v-57e1d61a]{padding:20px 20px 12px;width:80%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.dialog-header[data-v-57e1d61a]{display:none}.dialog .footer-button[data-v-57e1d61a]{border:0;color:#007fff}.dialog .footer-button[data-v-57e1d61a]:hover{background-color:#fff}.dialog .footer-button.primary[data-v-57e1d61a]{color:#007fff;border-color:none;background-color:#fff}.dialog .footer-button.primary[data-v-57e1d61a]:hover{border-color:none;background-color:#fff}.dialog button+button[data-v-57e1d61a]{margin-left:0}}.iconfont[data-v-b29ccd98]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-b29ccd98]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-b29ccd98]:before{content:\"\\E601\"}.report-menu[data-v-b29ccd98]{margin-top:10px}.report-menu-item[data-v-b29ccd98]{padding:10px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.report-menu-item .radio[data-v-b29ccd98]{position:relative;width:14px;height:14px;border:1px solid #979797;border-radius:50%;background-color:#fff;display:inline-block;transition:.2s}.report-menu-item .radio[data-v-b29ccd98]:before{position:absolute;top:50%;left:50%;content:\"\";display:block;margin-left:-3px;margin-top:-3px;width:6px;height:6px;border-radius:50%;box-shadow:0 0 3px transparent;background-color:#fff;-webkit-transform:scale(.3);transform:scale(.3);transition:.3s}.report-menu-item .radio.active[data-v-b29ccd98]{background-color:#007fff;border-color:#007fff}.report-menu-item .radio.active[data-v-b29ccd98]:before{-webkit-transform:scale(.8);transform:scale(.8);box-shadow:0 0 3px rgba(0,0,0,.3)}.report-menu-item .text[data-v-b29ccd98]{margin-left:10px;line-height:1}@media (max-width:600px){.report-menu-item[data-v-b29ccd98]{padding:12px 0}.report-menu-item .radio[data-v-b29ccd98]{width:16px;height:16px}.report-menu-item .text[data-v-b29ccd98]{margin-left:12px}}.view-nav[data-v-11253836]{position:fixed;top:5rem;left:0;width:100%;height:46px;background-color:#fff;z-index:100}.view-nav .nav-list[data-v-11253836]{width:960px;height:100%;margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex}.view-nav .nav-list .nav-item[data-v-11253836]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:1.16rem;font-weight:600;padding:0 2.5rem;border-bottom:2px solid transparent;transition:border-bottom .3s,color .3s}.view-nav .nav-list .nav-item.active[data-v-11253836],.view-nav .nav-list .nav-item[data-v-11253836]:hover{border-bottom-color:#007fff}.view-nav .nav-list .nav-item.active a[data-v-11253836]{color:#007fff}.root-view-bg[data-v-11253836]{background-color:#fff}.tag-list[data-v-6a61a5f6]{padding-top:2rem}.item[data-v-28824dff]{width:25%;display:inline-block;margin-bottom:1.3rem;padding:0 .7rem;box-sizing:border-box}@media (max-width:600px){.item[data-v-28824dff]{width:50%}}.status[data-v-28824dff]{padding:2rem 0;width:100%;font-size:1.2rem;text-align:center}.iconfont[data-v-24a220a8]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-24a220a8]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-24a220a8]:before{content:\"\\E601\"}.tag[data-v-24a220a8]{display:inline-block;width:100%;background-color:#fff;border:1px solid #f1f1f1;transition:border-color .3s;text-align:center;padding:1.5rem 0}.thumb[data-v-24a220a8]{width:100%;height:32px;margin:1rem auto;background-color:#fff}.title[data-v-24a220a8]{font-size:1.5rem;line-height:2rem;color:#333}.meta-box[data-v-24a220a8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.1rem;color:#909090}.meta-box .meta[data-v-24a220a8]{line-height:2rem}.meta-box .meta.article[data-v-24a220a8]{margin-left:.8rem}.iconfont[data-v-5f400cf3]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5f400cf3]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5f400cf3]:before{content:\"\\E601\"}.nav-list[data-v-5f400cf3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-wrap:wrap;flex-wrap:wrap}.nav-list .nav-item[data-v-5f400cf3]{padding:1rem .6rem;margin-left:.8rem;font-size:1.3rem;white-space:nowrap}.nav-list .nav-item.search[data-v-5f400cf3]{margin-left:2rem;cursor:default}.nav-list .nav-item.search .search-input[data-v-5f400cf3]{padding:.5rem;font-size:1.2rem;border:1px solid hsla(0,0%,59%,.2);outline:none}@media (max-width:600px){.nav-list .nav-item.search[data-v-5f400cf3]{display:none}}.list-header[data-v-5f400cf3]{border-bottom:none}.iconfont[data-v-29c63d85]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-29c63d85]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-29c63d85]:before{content:\"\\E601\"}.tag-info-box[data-v-29c63d85]{position:relative;height:150px;background-color:#f8f9fa;border-bottom:1px solid #f1f1f1}.tag-info-box.bg .tag-info[data-v-29c63d85]{color:#fff}.tag-info-box .background[data-v-29c63d85],.tag-info-box .tag-info[data-v-29c63d85]{position:absolute;top:0;width:100%;height:100%}.tag-info-box .tag-info[data-v-29c63d85]{text-align:center;color:#666;padding:4rem 0;box-sizing:border-box}.tag-info-box .tag-info .title[data-v-29c63d85]{font-size:25px;line-height:30px;font-weight:700;margin-bottom:.3rem}.list-header[data-v-29c63d85]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:.3rem}.list-header .left[data-v-29c63d85],.list-header[data-v-29c63d85]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.list-header .left .tag-icon[data-v-29c63d85]{height:2rem;margin-right:2rem}.list-header .nav-list[data-v-29c63d85]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.list-header .nav-list .nav-item[data-v-29c63d85]{font-size:1.3rem;margin-left:2rem}.list-header .nav-list .nav-item.active[data-v-29c63d85]{color:#007fff}.list-header .subscribe-btn[data-v-29c63d85]{white-space:nowrap}.search-view[data-v-f72b4436]{width:960px;margin:-50px auto 0}.suggested-tag-list-box[data-v-f72b4436]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:16px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:1.2rem 2rem 2rem;background-color:#fff;border-bottom:1px solid hsla(0,0%,59%,.1)}.title[data-v-f72b4436]{margin-top:.8rem}.suggested-tag-list[data-v-f72b4436]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.suggested-tag-list .tag[data-v-f72b4436]{cursor:pointerr;margin:.8rem .8rem 0 0;padding:.5rem 1rem;border-radius:2px;line-height:1;display:inline-block;font-size:1.1rem;border:1px solid #f1f1f1;color:#909090;transition:color .3s,border-color .3s,background-color .3s}@media (max-width:600px){.search-view[data-v-f72b4436]{width:100%}}.iconfont[data-v-13f76525]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-13f76525]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-13f76525]:before{content:\"\\E601\"}.column-view[data-v-13f76525]{padding:0 0 8rem}.main-area[data-v-13f76525]{position:relative;width:700px;max-width:100%;background-color:#fff;border-radius:2px;box-sizing:border-box}.main-area[data-v-13f76525]:after{display:table;content:\"\";clear:both}.article-area[data-v-13f76525]{margin-bottom:1.5rem;padding:0 2rem}.article[data-v-13f76525]{margin-bottom:3rem;padding:2rem 0 0}.article-placeholder[data-v-13f76525]{width:100%}.author-info-block[data-v-13f76525]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:2rem}.author-info-block .avatar-link[data-v-13f76525]{font-size:0}.author-info-block .avatar[data-v-13f76525]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1rem;width:3.333rem;height:3.333rem;border-radius:50%}.author-info-block .author-info-box[data-v-13f76525]{min-width:0}.author-info-block .username[data-v-13f76525]{display:inline-block;max-width:100%;font-size:1.3rem;font-weight:700;color:#333}.author-info-block .meta-box[data-v-13f76525]{font-size:1.1rem;color:#909090}.author-info-block .time[data-v-13f76525]{letter-spacing:1px}.author-info-block .views-count[data-v-13f76525]{margin-left:.5em}.author-info-block .dot[data-v-13f76525]{margin:0 .5em}.author-info-block .edit-btn[data-v-13f76525]{color:#1264b6;cursor:pointer}.author-info-block .edit-btn[data-v-13f76525]:hover{text-decoration:underline}.article-hero[data-v-13f76525]{margin-bottom:2rem;width:100%}.article-hero[data-v-13f76525]:after{content:\"\";display:block;padding-top:56.29%;width:100%;pointer-events:none}.article-title[data-v-13f76525]{margin:.67em 0;font-size:2.5rem;font-weight:700;line-height:1.5}@media (max-width:600px){.article-title[data-v-13f76525]{font-size:2rem}}.tag-list-box[data-v-13f76525]{margin-bottom:2rem}.tag-list-box .tag-list-title[data-v-13f76525]{margin-bottom:2rem;padding:0 0 0 2rem;font-size:1.25rem;font-weight:600;color:#000;border-left:6px solid #ddd}.tag-list-box .tag-list[data-v-13f76525]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.tag-list-box .tag-list .item[data-v-13f76525]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 1.25rem 1rem 0;padding:.167rem;background-color:#fff;border:1px solid #e3e3e3;border-radius:2px}.tag-list-box .tag-list .tag-icon[data-v-13f76525]{width:1.75rem;height:1.75rem;border-radius:2px}@media (max-width:600px){.tag-list-box .tag-list .tag-icon[data-v-13f76525]{display:none}}.tag-list-box .tag-list .tag-title[data-v-13f76525]{padding:0 .75rem;font-size:1rem;line-height:1.75rem;color:#919191}.wechat-banner[data-v-13f76525]{margin-bottom:2rem}@media (min-width:960px){.wechat-banner[data-v-13f76525]{display:none}}.book-box[data-v-13f76525]{margin-bottom:2rem}@media (min-width:960px){.book-box[data-v-13f76525]{display:none}}.article-banner[data-v-13f76525]{margin-bottom:2.5rem;padding:0 0 0 2rem;border-left:6px solid #ddd}.article-banner .banner-title[data-v-13f76525]{font-size:1.3rem;line-height:1.6;color:#007fff}.article-banner .banner-content[data-v-13f76525]{margin-top:.2rem;font-size:1.1rem;line-height:1.4;color:#909090}.comment-box[data-v-13f76525]{padding:0 2rem}.comment-box.extended[data-v-13f76525]{padding-bottom:2rem}@media (max-width:600px){.comment-box[data-v-13f76525]{padding:0}}.comment-box .comment-title[data-v-13f76525]{margin-bottom:1.3rem;font-size:1.3rem;font-weight:500;text-align:center;color:#909090}.comment-box .comment-form[data-v-13f76525]{margin-bottom:1rem}.recommended-entry-list-title[data-v-13f76525]{padding:1.3rem 2rem;font-size:1.25rem;font-weight:600;color:#909090;border-bottom:1px solid rgba(178,186,194,.15)}.sidebar[data-v-13f76525]{position:absolute;top:0;right:0;width:20rem}.article-suspended-panel[data-v-13f76525]{position:fixed;margin-left:-7rem;top:16rem}@media (max-width:960px){.sidebar[data-v-13f76525]{display:none}.main-area[data-v-13f76525]{width:100%}}.iconfont[data-v-01f8f25d]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-01f8f25d]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-01f8f25d]:before{content:\"\\E601\"}.sidebar.sticky .sticky-block-box[data-v-01f8f25d]{position:fixed;top:6.766999999999999rem;width:inherit;transition:top .2s}.sidebar.sticky.top .sticky-block-box[data-v-01f8f25d]{top:1.767rem}.iconfont[data-v-72a03554]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-72a03554]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-72a03554]:before{content:\"\\E601\"}.item[data-v-72a03554]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-item[data-v-72a03554]{padding:1.3rem}.user-item .avatar[data-v-72a03554]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1rem;width:4.167rem;height:4.167rem;border-radius:50%}.user-item .info-box[data-v-72a03554]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0}.user-item .info-box .username[data-v-72a03554]{font-size:1.333rem;font-weight:600;color:#000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-item .info-box .position[data-v-72a03554]{margin-top:.8rem;font-size:1.25rem;color:#72777b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.stat-item[data-v-72a03554]{margin-bottom:.8rem;padding:0 1.3rem}.stat-item[data-v-72a03554]:last-child{margin-bottom:1.3rem}.stat-item .icon[data-v-72a03554]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1rem}.stat-item .content[data-v-72a03554]{font-size:1.25rem;color:#000}.stat-item .content .count[data-v-72a03554]{margin:0 .3em;font-weight:500}.iconfont[data-v-3269f0ad]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3269f0ad]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3269f0ad]:before{content:\"\\E601\"}.catalog-title[data-v-3269f0ad]{font-size:1.167rem;color:#000}.catalog-body[data-v-3269f0ad]{position:relative;margin:6px 0;overflow:hidden}.catalog-list[data-v-3269f0ad]{position:relative}.catalog-list[data-v-3269f0ad]:before{content:\"\";position:absolute;top:0;left:7px;bottom:0;width:2px;background-color:#ebedef;opacity:.5}.catalog-list[data-v-3269f0ad] a{color:inherit}.catalog-list[data-v-3269f0ad] .sub-list{margin:0;padding:0}.catalog-list[data-v-3269f0ad] .item{margin:0;padding:0;font-size:1.167rem;font-weight:400;line-height:1.3;color:#333;list-style:none}.catalog-list[data-v-3269f0ad] .item a{display:block;position:relative;padding:4px 0 4px 12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.catalog-list[data-v-3269f0ad] .item a:before{content:\"\";position:absolute;top:50%;left:0;margin-top:-2px;width:4px;height:4px;background-color:currentColor;border-radius:50%}.catalog-list[data-v-3269f0ad] .item a:hover{background-color:#ebedef}.catalog-list[data-v-3269f0ad] .item.d1{font-weight:600;color:#000}.catalog-list[data-v-3269f0ad] .item.d1>a{margin:6px 0;padding:4px 0 4px 21px}.catalog-list[data-v-3269f0ad] .item.d1>a:before{left:5px;margin-top:-3px;width:6px;height:6px}.catalog-list[data-v-3269f0ad] .item.d1:first-child>a{margin-top:0}.catalog-list[data-v-3269f0ad] .item.d2>a{padding-left:36px}.catalog-list[data-v-3269f0ad] .item.d2>a:before{left:24px}.catalog-list[data-v-3269f0ad] .item.d3>a{padding-left:51px}.catalog-list[data-v-3269f0ad] .item.d3>a:before{left:39px}.catalog-list[data-v-3269f0ad] .item.active>a{color:#007fff;background-color:#ebedef}.root-view-bg[data-v-b2eb77b6]{background-color:#fff}.collection-header[data-v-b2eb77b6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;height:15.5rem}.collection-header .bg-box[data-v-b2eb77b6]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}.collection-header .bg-box .bg[data-v-b2eb77b6],.collection-header .bg-box .mask[data-v-b2eb77b6]{position:absolute;width:100%;height:100%;pointer-events:none}.collection-header .bg-box .mask[data-v-b2eb77b6]{background-image:linear-gradient(hsla(0,0%,56%,.3),rgba(70,70,70,.7)),linear-gradient(hsla(0,0%,43%,.3),hsla(0,0%,43%,.3))}.collection-header .edit-bg-btn[data-v-b2eb77b6]{position:absolute;top:2rem;right:3rem;cursor:pointer}.collection-header .edit-bg-btn[data-v-b2eb77b6]:hover{opacity:.6}.collection-header .bg-input[data-v-b2eb77b6]{display:none}.collection-header .title[data-v-b2eb77b6]{position:relative;margin:0;color:#fff;font-size:2.667rem;font-weight:700}.collection-header .title.editing[data-v-b2eb77b6]{padding:0;min-width:12em;max-width:100%;text-align:center;background-color:transparent;border:none;outline:none}.collection-header .description[data-v-b2eb77b6]{position:relative;margin:1em 0 0;color:#fff;font-size:1.167rem}.collection-header .description.editing[data-v-b2eb77b6]{padding:0;min-width:24em;max-width:100%;text-align:center;background-color:transparent;border:none;outline:none}.collection-header .description.empty[data-v-b2eb77b6]{color:hsla(0,0%,100%,.4)}.collection-header .edit-btn[data-v-b2eb77b6]{position:absolute;top:50%;left:100%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%);cursor:pointer}.collection-header .edit-btn[data-v-b2eb77b6]:hover{opacity:.6}.container[data-v-b2eb77b6]{padding:0 2rem;box-sizing:border-box}.info-box[data-v-b2eb77b6]{position:relative;padding:1.5rem 0;line-height:1;background-color:#f8f9fa}.info-box .container[data-v-b2eb77b6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.info-box .container[data-v-b2eb77b6]:after{content:none}.info-box .info-list[data-v-b2eb77b6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.167rem;color:#909090}.info-box .info-list.right[data-v-b2eb77b6]{float:right}.info-box .info-list .item[data-v-b2eb77b6]{float:left}.info-box .info-list.left .item[data-v-b2eb77b6]:not(:last-child):not(.follow):after{content:\"\\B7\";margin:0 .5em}.info-box .follow-btn[data-v-b2eb77b6]{margin:0 1rem 0 0;padding:0;width:6rem;height:2.3rem;color:#83c73a;background-color:#fff;border:1px solid currentColor}.info-box .follow-btn[data-v-b2eb77b6]:hover{color:#3cb40e}.info-box .follow-btn.followed[data-v-b2eb77b6]{color:#fff;background-color:#83c73a;border-color:#83c73a}.info-box .follow-btn.followed[data-v-b2eb77b6]:hover{color:#fff;background-color:#3cb40e;border-color:#3cb40e}.info-box .share-btn[data-v-b2eb77b6]{position:relative;padding:0 .5em;color:inherit;background-color:transparent;border:none;outline:none}.info-box .share-btn .icon[data-v-b2eb77b6]{margin-right:.5em;height:1em;vertical-align:bottom}.info-box .share-btn.wechat:hover .qrcode-panel[data-v-b2eb77b6]{display:block}.info-box .line[data-v-b2eb77b6]{display:inline-block;margin:0 .5em;height:1em;width:1px;background-color:#ddd}.info-box .qrcode-panel[data-v-b2eb77b6]{position:absolute;top:180%;left:0;padding:1rem;text-align:center;background-color:#fff;border:1px solid #ddd;z-index:10;display:none}.info-box .qrcode-panel .qrcode-title[data-v-b2eb77b6]{display:block;margin:0 0 1rem}.info-box .qrcode-panel .qrcode[data-v-b2eb77b6]{width:9.5rem;height:9.5rem;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.info-box .menu-btn[data-v-b2eb77b6]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin-left:.5em;height:1.3em;cursor:pointer}.info-box .menu-btn .icon[data-v-b2eb77b6]{font-size:2rem}.info-box .menu-btn:hover .menu[data-v-b2eb77b6]{display:block}.info-box .menu-btn .menu[data-v-b2eb77b6]{position:absolute;top:120%;right:-.5em;font-size:.9em;background-color:#fff;border:1px solid #ddd;white-space:nowrap;z-index:10;display:none}.info-box .menu-btn .menu .menu-item[data-v-b2eb77b6]{padding:1em}.info-box .menu-btn .menu .menu-item[data-v-b2eb77b6]:hover{color:#333;background-color:#f9f9f9}.list-header[data-v-b2eb77b6]{padding:1.6rem 0 0;border-bottom:none}.list-header .more-link[data-v-b2eb77b6]{font-size:1.167rem}.list-header .more-link .more-icon[data-v-b2eb77b6]{font-size:1.1em}.list-header .more-link .avatar[data-v-b2eb77b6]{margin:0 .5rem;width:1.5rem;height:1.5rem;border-radius:50%;vertical-align:bottom}.list-header .nav-list[data-v-b2eb77b6]{font-size:1.334rem;color:#909090}.list-header .nav-list .nav-item[data-v-b2eb77b6]:not(:last-child):after{content:\"|\";margin:1rem;color:#ddd}.entry-list[data-v-b2eb77b6]{margin-bottom:4rem}.entry-list>.container[data-v-b2eb77b6]{padding:0}@media (max-width:600px){.info-box .info-list[data-v-b2eb77b6]{font-size:1rem}.info-box .info-list.right[data-v-b2eb77b6]{display:none}}.iconfont[data-v-54aef2e5]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-54aef2e5]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-54aef2e5]:before{content:\"\\E601\"}.content-block[data-v-54aef2e5]{margin-bottom:1.5rem;background-color:#fff;border-radius:2px}.content-block>.title-box[data-v-54aef2e5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.6rem;border-bottom:1px solid hsla(0,0%,59%,.2)}.content-block>.title-box .title[data-v-54aef2e5]{font-size:1.2rem;font-weight:600;color:#000;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.right-block-box[data-v-54aef2e5]{float:right;width:20rem;font-size:1.167rem;color:#000}.right-block-box .title-box[data-v-54aef2e5]{padding:0 1.3rem}.right-block-box .body-box[data-v-54aef2e5]{padding:1.3rem}@media (max-width:600px){.right-block-box[data-v-54aef2e5]{float:none;width:auto}}.tips-block .body-box[data-v-54aef2e5]{font-size:1.167rem;line-height:2}.tips-block .body-box .list[data-v-54aef2e5]{margin:0;padding:0}.tips-block .body-box .list .item[data-v-54aef2e5]{list-style:none}.tips-block .body-box .list .item[data-v-54aef2e5]:not(:last-child){margin-bottom:1rem}.miner-block .miner-list[data-v-54aef2e5]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:.5rem}.miner-block .miner-list .avatar-box[data-v-54aef2e5]{margin-bottom:.5rem}.miner-block .miner-list .avatar-box[data-v-54aef2e5]:not(:last-child){margin-right:.3rem}.miner-block .miner-list .avatar[data-v-54aef2e5]{width:2rem;height:2rem;border-radius:50%}.miner-block .empty[data-v-54aef2e5]{margin-bottom:1rem;color:#999}.miner-block .repo-link[data-v-54aef2e5]{font-size:1.167rem;color:#3474f7}.main-block[data-v-54aef2e5]{margin-right:21.5rem;padding:2.5rem;color:#000}@media (max-width:600px){.main-block[data-v-54aef2e5]{margin-right:0;padding:1.3rem}}.main-block .title[data-v-54aef2e5]{margin:0;padding:1.2rem 0;font-size:2.667rem;font-weight:600}.main-block .sub-title[data-v-54aef2e5]{margin:0;padding:1.4rem 0;font-size:2rem;font-weight:600;border-bottom:1px solid #ececec}.main-block .select-list[data-v-54aef2e5]{margin:1.5rem 0;padding:0 0 0 1rem}.main-block .select-list .item[data-v-54aef2e5]{position:relative;padding:0 0 0 2rem;font-size:1.25rem;line-height:2;cursor:pointer}.main-block .select-list .item[data-v-54aef2e5]:first-child:after{content:\"\\FF08\\5F53\\524D\\91C7\\7528\\FF09\";color:#949494}.main-block .select-list .item[data-v-54aef2e5]:not(:last-child){margin-bottom:.8rem}.main-block .select-list .item.new[data-v-54aef2e5]{padding-top:.5em}.main-block .select-list .item[data-v-54aef2e5]:before{content:\"\";position:absolute;top:.5em;left:0;width:.9em;height:.9em;border:.05em solid #979797;border-radius:50%}.main-block .select-list .item.active[data-v-54aef2e5]:before{width:.4em;height:.4em;border:.3em solid #007fff}.main-block .select-list .item .content-input[data-v-54aef2e5]{padding:.5rem 1rem;min-height:10rem;line-height:1.5;border:1px solid #979797;border-radius:2px}.main-block .select-list .item .content-input[data-v-54aef2e5]:focus,.main-block .select-list .item .content-input[data-v-54aef2e5]:hover{border-color:#007fff}.main-block .ctrl-box[data-v-54aef2e5]{margin-bottom:2rem;text-align:right}.main-block .ctrl-box .vcode-box[data-v-54aef2e5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin:2.5rem 0 1.667rem}.main-block .ctrl-box .vcode-box .vcode-input[data-v-54aef2e5]{margin-left:1rem;width:7.8rem;height:2.5rem;font-size:1rem;text-align:center;border:1px solid #979797;border-radius:2px;outline:none;box-sizing:border-box}.main-block .ctrl-box .vcode-box .vcode-img[data-v-54aef2e5]{height:2.5rem}.main-block .ctrl-box .submit-btn[data-v-54aef2e5]{padding:.5rem 4rem;font-size:1.25rem;color:#fff;background-color:#3474f7;border-radius:2px}.main-block .ctrl-box .submit-btn[data-v-54aef2e5]:disabled{background-color:#ccc}[data-v-184bf8a5] .markdown-body{word-break:normal}[data-v-184bf8a5] .markdown-body *{box-sizing:border-box}[data-v-184bf8a5] .markdown-body a{color:#0366d6;text-decoration:none}[data-v-184bf8a5] .markdown-body a:hover{text-decoration:underline}[data-v-184bf8a5] .markdown-body table{border-spacing:0;border-collapse:collapse}[data-v-184bf8a5] .markdown-body li{list-style:initial}[data-v-184bf8a5] .markdown-body code,[data-v-184bf8a5] .markdown-body pre,[data-v-184bf8a5] .markdown-body tt{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}[data-v-184bf8a5] .markdown-body pre{margin-top:0;margin-bottom:0}[data-v-184bf8a5] .markdown-body .pl-c{color:#6a737d}[data-v-184bf8a5] .markdown-body .pl-c1,[data-v-184bf8a5] .markdown-body .pl-s .pl-v{color:#005cc5}[data-v-184bf8a5] .markdown-body .pl-e,[data-v-184bf8a5] .markdown-body .pl-en{color:#6f42c1}[data-v-184bf8a5] .markdown-body .pl-s .pl-s1,[data-v-184bf8a5] .markdown-body .pl-smi{color:#24292e}[data-v-184bf8a5] .markdown-body .pl-ent{color:#22863a}[data-v-184bf8a5] .markdown-body .pl-k{color:#d73a49}[data-v-184bf8a5] .markdown-body .pl-pds,[data-v-184bf8a5] .markdown-body .pl-s,[data-v-184bf8a5] .markdown-body .pl-s .pl-pse .pl-s1,[data-v-184bf8a5] .markdown-body .pl-sr,[data-v-184bf8a5] .markdown-body .pl-sr .pl-cce,[data-v-184bf8a5] .markdown-body .pl-sr .pl-sra,[data-v-184bf8a5] .markdown-body .pl-sr .pl-sre{color:#032f62}[data-v-184bf8a5] .markdown-body .pl-smw,[data-v-184bf8a5] .markdown-body .pl-v{color:#e36209}[data-v-184bf8a5] .markdown-body .pl-bu{color:#b31d28}[data-v-184bf8a5] .markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}[data-v-184bf8a5] .markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}[data-v-184bf8a5] .markdown-body .pl-c2:before{content:\"^M\"}[data-v-184bf8a5] .markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}[data-v-184bf8a5] .markdown-body .pl-ml{color:#735c0f}[data-v-184bf8a5] .markdown-body .pl-mh,[data-v-184bf8a5] .markdown-body .pl-mh .pl-en,[data-v-184bf8a5] .markdown-body .pl-ms{font-weight:700;color:#005cc5}[data-v-184bf8a5] .markdown-body .pl-mi{font-style:italic;color:#24292e}[data-v-184bf8a5] .markdown-body .pl-mb{font-weight:700;color:#24292e}[data-v-184bf8a5] .markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}[data-v-184bf8a5] .markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}[data-v-184bf8a5] .markdown-body .pl-mc{color:#e36209;background-color:#ffebda}[data-v-184bf8a5] .markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}[data-v-184bf8a5] .markdown-body .pl-mdr{font-weight:700;color:#6f42c1}[data-v-184bf8a5] .markdown-body .pl-ba{color:#586069}[data-v-184bf8a5] .markdown-body .pl-sg{color:#959da5}[data-v-184bf8a5] .markdown-body .pl-corl{text-decoration:underline;color:#032f62}[data-v-184bf8a5] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;word-wrap:break-word}[data-v-184bf8a5] .markdown-body:before{display:table;content:\"\"}[data-v-184bf8a5] .markdown-body:after{display:table;clear:both;content:\"\"}[data-v-184bf8a5] .markdown-body>:first-child{margin-top:0!important}[data-v-184bf8a5] .markdown-body>:last-child{margin-bottom:0!important}[data-v-184bf8a5] .markdown-body a:not([href]){color:inherit;text-decoration:none}[data-v-184bf8a5] .markdown-body .absent{color:#cb2431}[data-v-184bf8a5] .markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}[data-v-184bf8a5] .markdown-body .anchor:focus{outline:none}[data-v-184bf8a5] .markdown-body blockquote,[data-v-184bf8a5] .markdown-body dl,[data-v-184bf8a5] .markdown-body ol,[data-v-184bf8a5] .markdown-body p,[data-v-184bf8a5] .markdown-body pre,[data-v-184bf8a5] .markdown-body table,[data-v-184bf8a5] .markdown-body ul{margin-top:0;margin-bottom:16px}[data-v-184bf8a5] .markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}[data-v-184bf8a5] .markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}[data-v-184bf8a5] .markdown-body blockquote>:first-child{margin-top:0}[data-v-184bf8a5] .markdown-body blockquote>:last-child{margin-bottom:0}[data-v-184bf8a5] .markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}[data-v-184bf8a5] .markdown-body h1,[data-v-184bf8a5] .markdown-body h2,[data-v-184bf8a5] .markdown-body h3,[data-v-184bf8a5] .markdown-body h4,[data-v-184bf8a5] .markdown-body h5,[data-v-184bf8a5] .markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}[data-v-184bf8a5] .markdown-body h1 .octicon-link,[data-v-184bf8a5] .markdown-body h2 .octicon-link,[data-v-184bf8a5] .markdown-body h3 .octicon-link,[data-v-184bf8a5] .markdown-body h4 .octicon-link,[data-v-184bf8a5] .markdown-body h5 .octicon-link,[data-v-184bf8a5] .markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}[data-v-184bf8a5] .markdown-body h1:hover .anchor,[data-v-184bf8a5] .markdown-body h2:hover .anchor,[data-v-184bf8a5] .markdown-body h3:hover .anchor,[data-v-184bf8a5] .markdown-body h4:hover .anchor,[data-v-184bf8a5] .markdown-body h5:hover .anchor,[data-v-184bf8a5] .markdown-body h6:hover .anchor{text-decoration:none}[data-v-184bf8a5] .markdown-body h1:hover .anchor .octicon-link,[data-v-184bf8a5] .markdown-body h2:hover .anchor .octicon-link,[data-v-184bf8a5] .markdown-body h3:hover .anchor .octicon-link,[data-v-184bf8a5] .markdown-body h4:hover .anchor .octicon-link,[data-v-184bf8a5] .markdown-body h5:hover .anchor .octicon-link,[data-v-184bf8a5] .markdown-body h6:hover .anchor .octicon-link{visibility:visible}[data-v-184bf8a5] .markdown-body h1 code,[data-v-184bf8a5] .markdown-body h1 tt,[data-v-184bf8a5] .markdown-body h2 code,[data-v-184bf8a5] .markdown-body h2 tt,[data-v-184bf8a5] .markdown-body h3 code,[data-v-184bf8a5] .markdown-body h3 tt,[data-v-184bf8a5] .markdown-body h4 code,[data-v-184bf8a5] .markdown-body h4 tt,[data-v-184bf8a5] .markdown-body h5 code,[data-v-184bf8a5] .markdown-body h5 tt,[data-v-184bf8a5] .markdown-body h6 code,[data-v-184bf8a5] .markdown-body h6 tt{font-size:inherit}[data-v-184bf8a5] .markdown-body h1{padding-bottom:.3em;font-size:2em;border-bottom:1px solid #eaecef}[data-v-184bf8a5] .markdown-body h2{padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid #eaecef}[data-v-184bf8a5] .markdown-body h3{font-size:1.25em}[data-v-184bf8a5] .markdown-body h4{font-size:1em}[data-v-184bf8a5] .markdown-body h5{font-size:.875em}[data-v-184bf8a5] .markdown-body h6{font-size:.85em;color:#6a737d}[data-v-184bf8a5] .markdown-body ol,[data-v-184bf8a5] .markdown-body ul{padding-left:2em}[data-v-184bf8a5] .markdown-body ol.no-list,[data-v-184bf8a5] .markdown-body ul.no-list{padding:0;list-style-type:none}[data-v-184bf8a5] .markdown-body ol ol,[data-v-184bf8a5] .markdown-body ol ul,[data-v-184bf8a5] .markdown-body ul ol,[data-v-184bf8a5] .markdown-body ul ul{margin-top:0;margin-bottom:0}[data-v-184bf8a5] .markdown-body li>p{margin-top:16px}[data-v-184bf8a5] .markdown-body li+li{margin-top:.25em}[data-v-184bf8a5] .markdown-body dl{padding:0}[data-v-184bf8a5] .markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}[data-v-184bf8a5] .markdown-body dl dd{padding:0 16px;margin-bottom:16px}[data-v-184bf8a5] .markdown-body table{display:block;width:100%;overflow:auto}[data-v-184bf8a5] .markdown-body table th{font-weight:600}[data-v-184bf8a5] .markdown-body table td,[data-v-184bf8a5] .markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}[data-v-184bf8a5] .markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}[data-v-184bf8a5] .markdown-body table tr:nth-child(2n){background-color:#f6f8fa}[data-v-184bf8a5] .markdown-body table img{background-color:transparent}[data-v-184bf8a5] .markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}[data-v-184bf8a5] .markdown-body img[align=right]{padding-left:20px}[data-v-184bf8a5] .markdown-body img[align=left]{padding-right:20px}[data-v-184bf8a5] .markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}[data-v-184bf8a5] .markdown-body span.frame{display:block;overflow:hidden}[data-v-184bf8a5] .markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #dfe2e5}[data-v-184bf8a5] .markdown-body span.frame span img{display:block;float:left}[data-v-184bf8a5] .markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#24292e}[data-v-184bf8a5] .markdown-body span.align-center{display:block;overflow:hidden;clear:both}[data-v-184bf8a5] .markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}[data-v-184bf8a5] .markdown-body span.align-center span img{margin:0 auto;text-align:center}[data-v-184bf8a5] .markdown-body span.align-right{display:block;overflow:hidden;clear:both}[data-v-184bf8a5] .markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}[data-v-184bf8a5] .markdown-body span.align-right span img{margin:0;text-align:right}[data-v-184bf8a5] .markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}[data-v-184bf8a5] .markdown-body span.float-left span{margin:13px 0 0}[data-v-184bf8a5] .markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}[data-v-184bf8a5] .markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}[data-v-184bf8a5] .markdown-body code,[data-v-184bf8a5] .markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}[data-v-184bf8a5] .markdown-body code:after,[data-v-184bf8a5] .markdown-body code:before,[data-v-184bf8a5] .markdown-body tt:after,[data-v-184bf8a5] .markdown-body tt:before{letter-spacing:-.2em;content:\"\\A0\"}[data-v-184bf8a5] .markdown-body code br,[data-v-184bf8a5] .markdown-body tt br{display:none}[data-v-184bf8a5] .markdown-body del code{text-decoration:inherit}[data-v-184bf8a5] .markdown-body pre{word-wrap:normal}[data-v-184bf8a5] .markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}[data-v-184bf8a5] .markdown-body .highlight{margin-bottom:16px}[data-v-184bf8a5] .markdown-body .highlight pre{margin-bottom:0;word-break:normal}[data-v-184bf8a5] .markdown-body .highlight pre,[data-v-184bf8a5] .markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}[data-v-184bf8a5] .markdown-body pre code,[data-v-184bf8a5] .markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}[data-v-184bf8a5] .markdown-body pre code:after,[data-v-184bf8a5] .markdown-body pre code:before,[data-v-184bf8a5] .markdown-body pre tt:after,[data-v-184bf8a5] .markdown-body pre tt:before{content:normal}[data-v-184bf8a5] .markdown-body .csv-data td,[data-v-184bf8a5] .markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}[data-v-184bf8a5] .markdown-body .csv-data .blob-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}[data-v-184bf8a5] .markdown-body .csv-data tr{border-top:0}[data-v-184bf8a5] .markdown-body .csv-data th{font-weight:600;background:#f6f8fa;border-top:0}.iconfont[data-v-184bf8a5]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-184bf8a5]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-184bf8a5]:before{content:\"\\E601\"}.content-block[data-v-184bf8a5]{margin-top:1.5rem;background-color:#fff;border-radius:2px}.content-block>.title-box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.6rem;border-bottom:1px solid hsla(0,0%,59%,.2)}.content-block>.title-box .title[data-v-184bf8a5]{font-size:1.2rem;font-weight:600;color:#000;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-block>.footer-box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.6rem;border-top:1px solid hsla(0,0%,59%,.2)}.content-block>.footer-box .text[data-v-184bf8a5]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-block[data-v-184bf8a5]{padding:2.5rem 2.5rem 1.5rem}.header-block:hover .repo-btn.report-btn[data-v-184bf8a5]{display:inline-block}@media (max-width:600px){.header-block[data-v-184bf8a5]{padding:1.3rem}}.header-block .repo-title[data-v-184bf8a5]{margin:.3rem 0 1.5rem;font-size:2.667rem;font-weight:400;line-height:1.2;color:#000}@media (max-width:600px){.header-block .repo-title[data-v-184bf8a5]{font-size:2rem;line-height:1.2}}.header-block .repo-title .link[data-v-184bf8a5]{color:inherit}.header-block .repo-title .link[data-v-184bf8a5]:hover{text-decoration:underline}.header-block .repo-title .link .name[data-v-184bf8a5]{font-weight:600}.header-block .repo-title .trans-btn[data-v-184bf8a5]{margin-left:1rem;font-size:1.167rem;vertical-align:middle;color:#bebfc2;white-space:nowrap}.header-block .repo-title .trans-btn[data-v-184bf8a5]:hover{color:#999}.header-block .repo-title .trans-btn .icon[data-v-184bf8a5]{margin-right:.5rem}.header-block .repo-desc[data-v-184bf8a5]{margin:0 0 2rem;font-size:1.334rem;line-height:1.4;white-space:pre-wrap;color:#000}.header-block .action-box[data-v-184bf8a5]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header-block .action-box[data-v-184bf8a5],.header-block .repo-btn-box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.header-block .repo-btn-box[data-v-184bf8a5]{margin-right:2rem}.header-block .repo-btn[data-v-184bf8a5]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:inline-block;margin-bottom:1rem;padding:0;font-size:1rem;font-weight:600;line-height:1;white-space:nowrap;color:#23292e;background-color:#fff;border:1px solid #ccced0;border-radius:3px;overflow:hidden}.header-block .repo-btn[data-v-184bf8a5]:not(:last-child){margin-right:.8rem}.header-block .repo-btn:hover .title-box[data-v-184bf8a5]{background-color:#e6ebf1}.header-block .repo-btn.report-btn[data-v-184bf8a5]{padding:0 .5rem;font-size:1.167rem;font-weight:400;color:#bebfc2;background-color:transparent;border:none;display:none}.header-block .repo-btn.report-btn[data-v-184bf8a5]:hover{color:#999}.header-block .repo-btn .box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:2.3rem;padding:0 .8em}.header-block .repo-btn .box .icon[data-v-184bf8a5]{fill:currentColor}.header-block .repo-btn .box .icon~.title[data-v-184bf8a5]{margin-left:.5em}.header-block .repo-btn .title-box[data-v-184bf8a5]{float:left;background-color:#eff4f7;border-radius:3px 0 0 3px}.header-block .repo-btn .count-box[data-v-184bf8a5]{border-left:1px solid #ccced0}.header-block .link-btn[data-v-184bf8a5]{color:#fff;background-color:#007fff;border-color:#007fff}.header-block .link-btn:hover .title-box[data-v-184bf8a5]{background-color:#006fef}.header-block .link-btn .title-box[data-v-184bf8a5]{background-color:transparent}.header-block .tran-box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1rem;font-size:1.167rem;color:#2e3135}.header-block .tran-box .title[data-v-184bf8a5]{margin-right:.5rem}.header-block .tran-box .avatar-box[data-v-184bf8a5]:not(:last-child){margin-right:.3rem}.header-block .tran-box .avatar[data-v-184bf8a5]{width:2rem;height:2rem;border-radius:50%}.right-block-box[data-v-184bf8a5]{float:right;width:18.334rem;font-size:1.167rem;color:#000}@media (max-width:600px){.right-block-box[data-v-184bf8a5]{float:none;width:auto}}.meta-block .title-box[data-v-184bf8a5]{padding:0 1.3rem}.meta-block .title-box .avatar[data-v-184bf8a5]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:.5rem;width:1.833rem;height:1.833rem;border-radius:3px}.meta-block .body-box[data-v-184bf8a5]{padding:.8rem 1.3rem}.meta-block .body-box .item[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2rem}.meta-block .body-box .item .icon[data-v-184bf8a5]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin:.1rem .5rem 0 0}.meta-block .footer-box[data-v-184bf8a5]{padding:0 1.3rem;color:#2e3135}.meta-block .footer-box .icon[data-v-184bf8a5]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:.5rem}.meta-block .footer-box .link[data-v-184bf8a5]{color:inherit}.lang-block .title-box[data-v-184bf8a5]{padding:0 1.3rem}.lang-block .body-box[data-v-184bf8a5]{padding:.8rem 1.3rem}.lang-block .body-box .item[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2rem}.lang-block .body-box .item .dot[data-v-184bf8a5]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:.75rem;height:.75rem;border-radius:50%;background-color:#000}.lang-block .body-box .item .lang[data-v-184bf8a5]{max-width:9em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.lang-block .body-box .item .prop[data-v-184bf8a5]{margin-left:.5em;color:#999}.miner-block .body-box[data-v-184bf8a5]{padding:1rem 1.3rem}.miner-block .body-box .icon[data-v-184bf8a5]{margin-right:.6rem;color:red}.miner-block .body-box .text[data-v-184bf8a5]{margin:0;color:#000}.catalog-block[data-v-184bf8a5]{width:18.334rem;background-color:transparent}@media (max-width:600px){.catalog-block[data-v-184bf8a5]{display:none}}.catalog-block.sticky[data-v-184bf8a5]{position:fixed;top:5rem;transition:all .2s}.catalog-block.sticky.top[data-v-184bf8a5]{top:0}.comment-block[data-v-184bf8a5],.readme-block[data-v-184bf8a5]{margin-right:19.834rem}@media (max-width:600px){.comment-block[data-v-184bf8a5],.readme-block[data-v-184bf8a5]{margin-right:0}}.comment-block .title-box[data-v-184bf8a5],.readme-block .title-box[data-v-184bf8a5]{padding:0 2.5rem}@media (max-width:600px){.comment-block .title-box[data-v-184bf8a5],.readme-block .title-box[data-v-184bf8a5]{padding:0 1.3rem}}.comment-block .title-box .icon[data-v-184bf8a5],.readme-block .title-box .icon[data-v-184bf8a5]{margin-right:.3rem}.readme-block[data-v-184bf8a5]{position:relative;max-height:200rem;max-height:150vh;overflow:hidden}.readme-block.extended[data-v-184bf8a5]{max-height:none}.readme-block .readme-content-wrap[data-v-184bf8a5]{position:relative;padding:2.5rem}@media (max-width:600px){.readme-block .readme-content-wrap[data-v-184bf8a5]{padding:1.3rem}}.readme-block .readme-empty[data-v-184bf8a5]{padding:2.5rem;font-size:1.167rem;text-align:center;color:#999}.readme-block .readme-empty[data-v-184bf8a5]:before{content:\"\\65E0\\5185\\5BB9\"}@media (max-width:600px){.readme-block .readme-empty[data-v-184bf8a5]{padding:1.3rem}}.readme-block .extend-box[data-v-184bf8a5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;left:0;right:0;bottom:0;height:10rem;background-image:linear-gradient(transparent,#fff 30%);z-index:1}.readme-block .extend-box .extend-btn[data-v-184bf8a5]{margin-top:1.5rem;padding:.5rem 2rem;color:#007fff;background-color:transparent;border:1px solid currentColor;border-radius:4px}.readme-block .extend-box .extend-btn[data-v-184bf8a5]:hover{color:#669fff}.comment-block[data-v-184bf8a5]{margin-bottom:4rem}.comment-block .comment-box[data-v-184bf8a5]{padding:2.5rem}@media (max-width:600px){.comment-block .comment-box[data-v-184bf8a5]{padding:1.3rem}}.comment-block .comment-box .comment-form[data-v-184bf8a5]{margin-bottom:2rem}.iconfont[data-v-67ca0085]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-67ca0085]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-67ca0085]:before{content:\"\\E601\"}.pin-view[data-v-67ca0085]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;width:640px;max-width:100%;margin-bottom:6rem}.pin-view .pin-container[data-v-67ca0085]{width:640px;max-width:100%;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.pin-view .pin-container .pin__editor[data-v-67ca0085]{z-index:10}.pin-view .pin-container .pin__editor .bottom[data-v-67ca0085]{padding:.5rem 1rem;border:1px solid #dedede}.pin-view .pin-container .pin-editor-dialog .bottom[data-v-67ca0085]{padding-left:1rem;padding-right:1rem;border:1px solid #dedede}.pin-view .pin-container .auth[data-v-67ca0085]{height:11.559rem;border:1px solid hsla(0,0%,87%,.5);background:#fff;border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.pin-view .pin-container .auth button[data-v-67ca0085]{font-size:1.166rem;color:#027fff;width:6.666rem;height:2.833rem;background:#fff;border-radius:2px;border:1px solid #027fff}.pin-view .pin-container .auth span[data-v-67ca0085]{font-size:1.166rem;color:#a1a9b3;padding:1rem 0}.pin-view .pin-container .nav-category[data-v-67ca0085]{position:relative;margin:8px 0;width:100%;height:3.5rem;line-height:3.5rem;background-color:#fff;transition:all .2s;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1}.pin-view .pin-container .nav-category .box[data-v-67ca0085]{width:100%}.pin-view .pin-container .nav-category .box .nav-list[data-v-67ca0085]{margin:auto}.pin-view .pin-container .nav-category .box .nav-list .nav-item[data-v-67ca0085],.pin-view .pin-container .nav-category .box .nav-list[data-v-67ca0085]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.pin-view .pin-container .nav-category .box .nav-list .nav-item[data-v-67ca0085]{width:25%;font-size:15px}.pin-view .pin-container .nav-category .box .nav-list .nav-item.nav-item>a[data-v-67ca0085]:hover{color:#909090}.pin-view .pin-container .nav-category .box .nav-list .nav-item.active>a[data-v-67ca0085],.pin-view .pin-container .nav-category .box .nav-list .nav-item.active>a[data-v-67ca0085]:hover{color:#007fff}.pin-view .pin-container .nav-category .box .nav-list .nav-item.active[data-v-67ca0085]:after{content:\"\";width:3rem;height:3px;border-radius:2px;background-color:#007fff;position:absolute;top:75%;left:50%;margin-left:-1.5rem}.pin-view .pin-container .nav-category .box .nav-list .nav-item .new[data-v-67ca0085]{display:inline-block;position:absolute;top:.6rem;left:62%;width:2rem;height:1.2rem;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDI1IDE1Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iI0YzMzI0OSIgZD0iTTIgMGgyMWEyIDIgMCAwIDEgMiAydjhhMiAyIDAgMCAxLTIgMkg3bC00IDN2LTNIMmEyIDIgMCAwIDEtMi0yVjJhMiAyIDAgMCAxIDItMnoiLz4KICAgICAgICA8dGV4dCBmaWxsPSIjRkZGIiBmb250LWZhbWlseT0iQXJpYWxSb3VuZGVkTVRCb2xkLCBBcmlhbCBSb3VuZGVkIE1UIEJvbGQiIGZvbnQtc2l6ZT0iOCI+CiAgICAgICAgICAgIDx0c3BhbiB4PSIzIiB5PSI5Ij5ORVc8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgIDwvZz4KPC9zdmc+Cg==);background-position:50%;background-repeat:no-repeat;background-size:contain}.pin-view .pin-container .nav-category .box .pin-tip[data-v-67ca0085]{cursor:pointer;font-size:1.166rem;height:3rem;line-height:3rem;width:100%;background-color:#e3eff9;color:#007fff;text-align:center}.pin-view .pin-container .nav-category.top[data-v-67ca0085]{position:fixed;top:0;left:0;width:100%;margin:0}.pin-view .pin-container .nav-category.top .box[data-v-67ca0085]{width:960px;max-width:100%;margin:0 auto}.pin-view .pin-container .nav-category.top .box .nav-list[data-v-67ca0085]{width:640px;max-width:100%;margin-left:0}.pin-view .pin-container .nav-category.top .box .pin-tip[data-v-67ca0085]{width:640px;max-width:100%}.pin-view .sidebar[data-v-67ca0085]{position:absolute;top:0;right:0;width:300px;margin-left:20px}@media (max-width:980px){.main-container>.view[data-v-67ca0085]{margin-top:1rem}.pin-view[data-v-67ca0085]{width:100%}.pin-view.main-container>.view[data-v-67ca0085]{margin-top:1rem}.pin-view .pin-container[data-v-67ca0085]{width:100%}.pin-view .pin-container .auth[data-v-67ca0085],.pin-view .pin-container .pin__editor[data-v-67ca0085]{display:none}.pin-view .pin-container .nav-category[data-v-67ca0085]{margin-top:0}.pin-view .pin__side[data-v-67ca0085]{display:none}}.iconfont[data-v-645c4b7e]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-645c4b7e]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-645c4b7e]:before{content:\"\\E601\"}.iconfont[data-v-000dbf6c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-000dbf6c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-000dbf6c]:before{content:\"\\E601\"}.subscribed-list .empty[data-v-000dbf6c]{height:20.833rem;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;background:#fff;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.subscribed-list .empty .icon[data-v-000dbf6c]{width:5.25rem;height:4.66rem;background-repeat:no-repeat;background-size:contain}.subscribed-list .empty span[data-v-000dbf6c]{margin-top:1.5rem;color:#b2bac2;font-size:1.25rem}.subscribed-list .list .pin[data-v-000dbf6c]{margin-bottom:8px}.subscribed-list .list .follow[data-v-000dbf6c]{background:#fff;margin-bottom:8px}.iconfont[data-v-311f0135]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-311f0135]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-311f0135]:before{content:\"\\E601\"}.follow[data-v-311f0135]{box-shadow:0 1px 2px 0 rgba(0,0,0,.05);padding:1.35rem 2rem;background:#fff}.follow .box[data-v-311f0135]{width:100%;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex}.follow .box .avatar[data-v-311f0135]{width:45px;height:45px;background-size:cover;background-repeat:no-repeat;border-radius:100%;background-position:50%}.follow .box .content[data-v-311f0135]{color:#a1a9b3;padding:0 1rem;font-size:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#8a9aa9}.follow .box .content .info .username[data-v-311f0135]{color:#2e3135;font-size:15px;font-weight:600;margin-bottom:.2rem}.follow .box .content .info span[data-v-311f0135]{padding:0 .333rem}.follow .box .content .date[data-v-311f0135]{margin-top:.18rem;font-size:14px}[data-v-311f0135] .user-popover-box{display:inline-block}.skeleton-row[data-v-68057e6a]{margin-bottom:.8rem;height:1.2rem;background-color:#f3f3f3}.skeleton-avatar[data-v-68057e6a]{border-radius:50%;background-color:#f3f3f3}.skeleton-pin[data-v-68057e6a]{padding:16px 2rem;margin-bottom:1rem;min-height:190px;background-color:#fff;box-sizing:border-box}.skeleton-pin.subscribe[data-v-68057e6a]{padding:1.35rem 2rem;margin-bottom:8px;min-height:70px}.skeleton-pin.subscribe .skeleton-avatar[data-v-68057e6a]{width:45px;height:45px}.skeleton-pin.subscribe .info[data-v-68057e6a]{padding-top:0;width:12rem;height:auto}.skeleton-pin.subscribe .info .skeleton-row[data-v-68057e6a]:last-of-type{width:5rem;margin-bottom:0}.skeleton-pin-header[data-v-68057e6a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.skeleton-pin-header .skeleton-avatar[data-v-68057e6a]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1.2rem;width:3.75rem;height:3.75rem}.skeleton-pin-header .info[data-v-68057e6a]{padding-top:.6rem;width:6rem;height:4rem}.skeleton-pin-body[data-v-68057e6a]{margin-top:.8rem;padding:0 0 0 5rem}.iconfont[data-v-5967d585]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5967d585]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5967d585]:before{content:\"\\E601\"}.slider[data-v-5967d585]{position:relative;height:12rem;background-color:#fff;overflow:hidden}.slider:hover .ctrl[data-v-5967d585]{opacity:1}.list[data-v-5967d585]{position:relative;height:100%;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;overflow:hidden}.list .item[data-v-5967d585]{height:100%;float:left}.list .item.with-thumb .text-box[data-v-5967d585]{padding-left:1.667rem}.list .item .link[data-v-5967d585]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;border-radius:2px;background-color:transparent}.list .item .thumb[data-v-5967d585]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:2px;box-shadow:0 1px 3px 0 rgba(0,0,0,.05);-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.ctrl[data-v-5967d585]{opacity:0;transition:all .2s;z-index:1}.ctrl .btn[data-v-5967d585]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;width:4rem;height:100%;font-size:1.8rem;color:#000;opacity:.15}.ctrl .btn[data-v-5967d585]:not(.disabled){cursor:pointer}.ctrl .btn[data-v-5967d585]:hover:not(.disabled){opacity:.3}.ctrl .btn.prev-btn[data-v-5967d585]{left:0}.ctrl .btn.next-btn[data-v-5967d585]{right:0}ul.pagination[data-v-5967d585]{width:100%;position:absolute;bottom:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}ul.pagination li[data-v-5967d585]{cursor:pointer;margin:0 5px;width:6px;height:6px;border-radius:50%;background-color:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,.1);opacity:.4}ul.pagination li.active[data-v-5967d585]{opacity:1}.topic-sidebar[data-v-dd1fbcf6]{border-radius:.2rem;background-color:#fff;margin-bottom:8px}.topic-sidebar .title[data-v-dd1fbcf6]{padding:1rem 1.33rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid hsla(0,0%,59%,.1)}.topic-sidebar .title span[data-v-dd1fbcf6]:first-child{color:#2e3135;font-size:1.25rem;font-weight:600}.topic-sidebar .title a[data-v-dd1fbcf6]{color:#007fff;font-size:13px}.topic-sidebar .title a i[data-v-dd1fbcf6]{margin-left:.3rem}.topic-sidebar .content[data-v-dd1fbcf6]{padding:0 1.33rem 6px}.iconfont[data-v-3764b436]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-3764b436]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-3764b436]:before{content:\"\\E601\"}.profile-box[data-v-3764b436]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:#fff;margin-bottom:8px;font-size:13px}.profile-box .profile[data-v-3764b436],.profile-box[data-v-3764b436]{display:-webkit-box;display:-ms-flexbox;display:flex}.profile-box .profile[data-v-3764b436]{padding:16px 0 16px 16px;height:5rem;max-height:92px;border-bottom:1px solid rgba(92,96,102,.1)}.profile-box .profile .avatar[data-v-3764b436]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-right:1rem;width:60px;height:60px;border-radius:50%;border:1px solid #fff;box-shadow:0 2px 6px 0 rgba(0,0,0,.15)}.profile-box .profile .user-info[data-v-3764b436]{margin:1rem 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.profile-box .profile .user-info .username[data-v-3764b436]{color:#17181a;font-size:15px;font-weight:600;line-height:1}.profile-box .profile .user-info .position[data-v-3764b436]{color:#8f969c;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:1}.profile-box .stat-list[data-v-3764b436]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding:0;list-style:none;text-align:center;padding:16.5px 0}.profile-box .stat-list .item[data-v-3764b436]{-webkit-box-flex:1;-ms-flex:1 1 33.333%;flex:1 1 33.333%;max-height:2.833rem;line-height:1}.profile-box .stat-list .item[data-v-3764b436]:not(:last-child){border-right:1px solid rgba(92,96,102,.1)}.profile-box .stat-list .item .title[data-v-3764b436]{font-size:13px;color:#8a9aa9;margin-bottom:.5rem}.profile-box .stat-list .item .count[data-v-3764b436]{font-size:15px;font-weight:600;color:#2e3135}.iconfont[data-v-e9a11cf6]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-e9a11cf6]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-e9a11cf6]:before{content:\"\\E601\"}.topic-view[data-v-e9a11cf6]{width:100%;max-width:920px;margin-top:1.5rem;padding:0 1.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:6rem}.root-view-bg[data-v-e9a11cf6]{background-color:#fff}.iconfont[data-v-56e4f3cc]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-56e4f3cc]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-56e4f3cc]:before{content:\"\\E601\"}.topic-list[data-v-56e4f3cc]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:2rem}.topic-list .title[data-v-56e4f3cc]{padding:0 1.2rem;text-align:left;font-size:2rem;color:#0e0e0e;font-weight:600;margin:2rem 0}.topic-list .list[data-v-56e4f3cc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;max-width:920px;-ms-flex-wrap:wrap;flex-wrap:wrap}.iconfont[data-v-a9075514]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-a9075514]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-a9075514]:before{content:\"\\E601\"}.topic-item[data-v-a9075514]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;padding:1.5rem 1.2rem;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.icon[data-v-a9075514]{width:6rem;height:6rem;border-radius:1rem;margin-right:2%;background-size:cover;background-repeat:no-repeat}.content[data-v-a9075514]{color:#8a9aa9;width:12rem;max-width:12rem;letter-spacing:normal;text-align:left;margin-left:1.2rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content a[data-v-a9075514],.content span[data-v-a9075514]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}a[data-v-a9075514]{font-weight:600;color:#2e3135;font-size:1.4rem}span[data-v-a9075514]{padding-top:.5rem;font-size:1.1rem}.subscribe[data-v-a9075514]{cursor:pointer}.followed[data-v-a9075514]{color:#37c701}em[data-v-a9075514]{font-style:normal}.skeleton-row[data-v-39e51eea]{margin-bottom:.8rem;height:1.2rem;background-color:#f3f3f3}.skeleton-avatar[data-v-39e51eea]{border-radius:50%;background-color:#f3f3f3}.topic-skeleton[data-v-39e51eea]{padding:0 1.2rem;width:100%}.topic-skeleton .title[data-v-39e51eea]{margin:2rem 0 2rem 1.2rem;width:8.2rem;text-align:left;background-color:#f3f3f3}.topic-skeleton .title span[data-v-39e51eea]{font-size:2rem;font-weight:600;opacity:0}.topic-skeleton .list[data-v-39e51eea]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;max-width:920px;-ms-flex-wrap:wrap;flex-wrap:wrap}.topic-skeleton .list .topic-item[data-v-39e51eea]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;padding:1.5rem 1.2rem;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.topic-skeleton .list .topic-item .icon[data-v-39e51eea]{margin-right:2%;width:6rem;height:6rem;border-radius:1rem;background-color:#f3f3f3}.topic-skeleton .list .topic-item .content[data-v-39e51eea]{margin-left:1.2rem;width:12rem}.topic-skeleton .list .topic-item .content .skeleton-row.s[data-v-39e51eea]{width:30%}.topic-skeleton .list .topic-item .content .skeleton-row.m[data-v-39e51eea]{width:60%}.iconfont[data-v-03f66d6f]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-03f66d6f]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-03f66d6f]:before{content:\"\\E601\"}.topic .topic-view[data-v-03f66d6f]{width:640px;max-width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:6rem}.topic .topic-view .topic-container[data-v-03f66d6f]{width:640px;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.topic .topic-view .topic-container .pin__editor[data-v-03f66d6f]{border-radius:2px;width:100%}.topic .topic-view .topic-container .pin__editor[data-v-03f66d6f] .editor .rich-editor{min-height:37px}.topic .topic-view .topic-container .nav-category[data-v-03f66d6f]{position:relative;margin:8px 0;width:100%;height:3.5rem;line-height:3.5rem;background-color:#fff;border-radius:2px;transition:all .2s;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:0}.topic .topic-view .topic-container .nav-category.auth[data-v-03f66d6f]{margin-top:0}.topic .topic-view .topic-container .nav-category .box[data-v-03f66d6f]{width:100%}.topic .topic-view .topic-container .nav-category .box .nav-list[data-v-03f66d6f]{margin:auto}.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item[data-v-03f66d6f],.topic .topic-view .topic-container .nav-category .box .nav-list[data-v-03f66d6f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item[data-v-03f66d6f]{width:25%;font-size:15px}.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item.nav-item>a[data-v-03f66d6f]:hover{color:#909090}.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item.active>a[data-v-03f66d6f],.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item.active>a[data-v-03f66d6f]:hover{color:#007fff}.topic .topic-view .topic-container .nav-category .box .nav-list .nav-item.active[data-v-03f66d6f]:after{content:\"\";width:3rem;height:3px;border-radius:2px;background-color:#007fff;position:absolute;top:75%;left:50%;margin-left:-1.5rem}.topic .topic-view .topic-container .nav-category.top[data-v-03f66d6f]{position:fixed;top:0;left:0;width:100%;margin:0;z-index:1}.topic .topic-view .topic-container .nav-category.top .box[data-v-03f66d6f]{width:960px;max-width:100%;margin:0 auto}.topic .topic-view .topic-container .nav-category.top .box .nav-list[data-v-03f66d6f]{width:700px;max-width:100%;margin-left:0}.topic .topic-view .topic-container .nav-category.top .box .pin-tip[data-v-03f66d6f]{width:700px;max-width:100%}.topic .topic-view .pin-content[data-v-03f66d6f]{width:100%}.topic .topic-view .pin-content .pin__box[data-v-03f66d6f]{border-radius:2px;background:#fff;margin-bottom:1rem}.topic .topic__side[data-v-03f66d6f]{position:absolute;margin-left:20px;width:300px;top:0;right:0}@media (max-width:980px){.topic .main-container .topic-view .topic-container[data-v-03f66d6f]{width:100%}.topic .main-container .topic-view .topic-container .pin__editor[data-v-03f66d6f],.topic .main-container .topic-view .topic__side[data-v-03f66d6f]{display:none}.topic .main-container .topic-view .topic__box[data-v-03f66d6f]{width:100%;max-width:960px}}.iconfont[data-v-52ccb01c]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-52ccb01c]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-52ccb01c]:before{content:\"\\E601\"}.attender__side[data-v-52ccb01c]{background:#fff}.iconfont[data-v-70b7f1b3]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-70b7f1b3]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-70b7f1b3]:before{content:\"\\E601\"}.topic-attender .attender[data-v-70b7f1b3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.topic-attender .attender .title[data-v-70b7f1b3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;color:#2e3135;font-weight:600;font-size:15px;padding:0 1.5rem;line-height:44px;height:44px;border-bottom:1px solid hsla(0,0%,59%,.1)}.topic-attender .attender .title span.all[data-v-70b7f1b3]{font-size:13px;color:#007fff;cursor:pointer;font-weight:400}.topic-attender .attender .title span.all i[data-v-70b7f1b3]{margin-left:.4rem}.topic-attender .attender .content[data-v-70b7f1b3]{padding:8px 0 4px;width:100%;margin:0 auto;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap}.topic-attender .attender .content .user_box[data-v-70b7f1b3],.topic-attender .attender .content[data-v-70b7f1b3]{display:-webkit-box;display:-ms-flexbox;display:flex;background:#fff;-webkit-box-direction:normal}.topic-attender .attender .content .user_box[data-v-70b7f1b3]{width:25%;-webkit-box-orient:vertical;-ms-flex-flow:column;flex-flow:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:1rem 0;cursor:pointer}.topic-attender .attender .content .user_box .user[data-v-70b7f1b3] .user-popover-box{display:inline-block;width:3.833rem;height:3.833rem}.topic-attender .attender .content .user_box .user .avatar[data-v-70b7f1b3]{width:46px;height:46px;border-radius:36px}.topic-attender .attender .content .user_box span[data-v-70b7f1b3]{max-width:5rem;display:inline-block;padding:.12rem 0;color:#333;font-size:12px;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.iconfont[data-v-57305d5a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-57305d5a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-57305d5a]:before{content:\"\\E601\"}.topic-box[data-v-57305d5a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:#fff;margin-bottom:8px}.topic-box .wallpaper[data-v-57305d5a]{position:relative;height:109px;overflow:hidden}.topic-box .wallpaper span[data-v-57305d5a]{display:inline-block;width:100%;height:100%;background-position:50%;background-size:120%;background-repeat:no-repeat;-webkit-filter:blur(6.3px);filter:blur(6.3px);-webkit-transform:scale(1.1);transform:scale(1.1)}.topic-box .content[data-v-57305d5a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative}.topic-box .content .icon[data-v-57305d5a]{-webkit-filter:none;filter:none;position:absolute;top:-2.5rem;left:50%;width:5rem;height:5rem;border-radius:5px;margin-left:-32px;border:2px solid hsla(0,0%,100%,.6);z-index:1;box-sizing:content-box}.topic-box .content .icon[data-v-57305d5a]:before{content:\"\";position:absolute;background-color:#fff;width:5rem;height:5rem;z-index:-1;border-radius:3px}.topic-box .content .icon span[data-v-57305d5a]{width:100%;height:100%;display:inline-block;background-repeat:no-repeat;background-size:cover;border-radius:3px}.topic-box .content .title[data-v-57305d5a]{font-size:15px;margin-top:41px;text-align:center;font-weight:600;color:#17181a}.topic-box .content .describe[data-v-57305d5a]{font-size:13px;color:#1a1b1d;width:100%;margin-bottom:12px}.topic-box .content .describe .desc-title[data-v-57305d5a]{color:#17181a;font-weight:600;font-size:14px;padding:0 16px}.topic-box .content .describe span[data-v-57305d5a]{padding:0 16px;display:inline-block}.topic-box .content .describe .limit-ctl-box[data-v-57305d5a]{cursor:pointer;font-size:13px;color:#027fff;padding:0 16px}.topic-box .content button[data-v-57305d5a]{padding:0;width:6.5rem;height:2.5rem;line-height:2.5rem;text-align:center;background:#fff;border-radius:3px;color:#37c701;border:1px solid #37c701;font-size:15px;margin:10px 0 8px}.topic-box .content button.followed[data-v-57305d5a]{background:#37c701;color:#fff}.topic-box .stat-box[data-v-57305d5a]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding:0;list-style:none;text-align:center;padding:12px 0;border-top:1px solid rgba(92,96,102,.1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.topic-box .stat-box .item[data-v-57305d5a]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;max-height:2.833rem}.topic-box .stat-box .item[data-v-57305d5a]:not(:last-child){border-right:1px solid rgba(92,96,102,.1)}.topic-box .stat-box .item .title[data-v-57305d5a]{padding-top:6px;font-size:13px;color:#8a9aa9}.topic-box .stat-box .item .count[data-v-57305d5a]{font-size:19px;font-weight:600;color:#2e3135;line-height:.84}.iconfont[data-v-ae2ebf0a]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-ae2ebf0a]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-ae2ebf0a]:before{content:\"\\E601\"}.main-area[data-v-ae2ebf0a]{position:relative;margin-bottom:10rem;width:700px;max-width:100%;background-color:#fff;border-radius:2px;box-sizing:border-box}.main-area[data-v-ae2ebf0a]:after{display:table;content:\"\";clear:both}.feedback-view[data-v-1ada1585]{margin:0 auto}.feedback-tips[data-v-1ada1585]{position:fixed;top:40%;left:0;width:100%;-webkit-transform:translateY(-40%);transform:translateY(-40%);text-align:center}.feedback-tips p[data-v-1ada1585]{font-size:1.4rem;color:#909090;line-height:1}.feedback-tips button[data-v-1ada1585]{font-size:1.2rem;padding:.8rem 1.5rem}.main-header-box[data-v-3f216172]{position:relative;height:5rem}.main-header[data-v-3f216172]{position:fixed;top:0;left:0;right:0;transition:all .2s;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}.main-header.visible[data-v-3f216172]{-webkit-transform:translateZ(0);transform:translateZ(0)}.main-container>.view[data-v-3f216172]{margin-top:1.767rem}.main-container.with-view-nav>.view[data-v-3f216172]{margin-top:5.6rem}.main-container.tight>.view[data-v-3f216172]{margin-top:0}.main-container.tight.with-view-nav>.view[data-v-3f216172]{margin-top:3.833rem}@font-face{font-family:iconfont;src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358);src:url(https://b-gold-cdn.xitu.io/fonts/iconfont.eot?t=1470110358#iefix) format(\"embedded-opentype\"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.woff?t=1470110358) format(\"woff\"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.ttf?t=1470110358) format(\"truetype\"),url(https://b-gold-cdn.xitu.io/fonts/iconfont.svg?t=1470110358#iconfont) format(\"svg\")}.iconfont[data-v-5ce25e66]{font-family:iconfont!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-xlcollection[data-v-5ce25e66]:before{content:\"\\E600\"}.icon-xlchatbox[data-v-5ce25e66]:before{content:\"\\E601\"}.logo[data-v-5ce25e66]{margin-right:2rem}.nav-item a[data-v-5ce25e66]{color:#71777c}.nav-item.active>.icon[data-v-5ce25e66],.nav-item.active>a[data-v-5ce25e66]{color:#007fff}.nav-menu-item>a[data-v-5ce25e66]{display:block;color:#71777c}.avatar[data-v-5ce25e66]{width:2.5rem;height:2.5rem;border-radius:50%}.main-header[data-v-5ce25e66]{background:#fff;border-bottom:1px solid #f1f1f1;color:#909090;height:5rem;z-index:250}.main-header .container[data-v-5ce25e66]{max-width:960px;margin:auto}.container[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}.main-nav[data-v-5ce25e66]{height:100%;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.main-nav-list[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex}.phone-show-menu[data-v-5ce25e66]{cursor:pointer;display:none}.phone-hide[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex}.nav-list[data-v-5ce25e66]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.nav-item[data-v-5ce25e66],.nav-list[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;margin:0}.nav-item[data-v-5ce25e66]{color:#71777c;padding:0 1.2rem;font-size:1.33rem;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.nav-item.pin .tip[data-v-5ce25e66]{z-index:2;cursor:auto;width:17rem;background:#fff;padding:1rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;position:absolute;top:4.5rem;left:-50%;margin-left:-3.7rem;color:#17181a;font-size:15px;border-radius:2px;box-shadow:0 2px 8px 0 rgba(0,0,0,.34)}.nav-item.pin .tip .panfish[data-v-5ce25e66]{height:63px;width:57px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-repeat:no-repeat;background-size:contain}.nav-item.pin .tip .content[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:.5rem 0 0 .5rem;color:#17181a}.nav-item.pin .tip .content button[data-v-5ce25e66]{padding:0;width:6.41rem;height:2rem;color:#fff;font-size:13px;border-radius:12px;margin-top:.5rem}.nav-item.pin .tip .triangle[data-v-5ce25e66]{display:block;position:absolute;top:0;left:50%;width:1rem;height:1rem;-webkit-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg);background:#fff;border-top:1px solid #f4f5f5;border-left:1px solid #f4f5f5}.nav-item.pin .tip .close[data-v-5ce25e66]{cursor:pointer;width:1rem;height:1rem;position:absolute;top:.5rem;right:.5rem;border-radius:50%;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.nav-item.pin .tip .close[data-v-5ce25e66]:after,.nav-item.pin .tip .close[data-v-5ce25e66]:before{content:\"\";width:.8rem;height:2px;display:block;position:absolute;background:#c5c5c5;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.nav-item.pin .tip .close[data-v-5ce25e66]:after{-webkit-transform:translate(-50%,-50%) rotate(90deg);transform:translate(-50%,-50%) rotate(90deg)}.nav-item.pin .tip .close[data-v-5ce25e66]:hover{opacity:.8}.nav-item:hover>a[data-v-5ce25e66]{color:#007fff}.nav-item[data-v-5ce25e66]:last-child{padding-right:0}.nav-item.link-item[data-v-5ce25e66]{padding:0 1.6rem;height:5rem}.nav-item.book.new a[data-v-5ce25e66]:after{position:absolute;margin-left:2px;margin-top:-3px;content:\"\";color:#d0021b;white-space:nowrap;-webkit-transform:scale(.6);transform:scale(.6);font-weight:700;font-size:14px;-webkit-transform-origin:0 0;transform-origin:0 0}.nav-item.book.new-year a[data-v-5ce25e66]:after{left:0;top:0;position:absolute;content:\"\";background-position:50%;background-repeat:no-repeat;background-size:60px auto;width:100%;height:100%}.nav-item.search[data-v-5ce25e66]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;cursor:auto}.nav-item.add[data-v-5ce25e66]{cursor:default}.nav-item.notification:hover .icon[data-v-5ce25e66]{color:#007fff}.nav-item.menu[data-v-5ce25e66]{position:relative}.nav-item.submit[data-v-5ce25e66]{color:#007fff;position:relative}.nav-item.submit[data-v-5ce25e66]:hover{color:#0371df}.nav-item.submit[data-v-5ce25e66]:after{content:\"|\";position:absolute;top:20px;left:100%;color:hsla(0,0%,59%,.4)}.nav-item.submit .submit-panel[data-v-5ce25e66]{position:absolute;top:101%;left:-123px;width:326px;box-sizing:border-box;padding:2.5rem 2rem;border-radius:2px;color:#909090;font-size:1.1rem;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid hsla(220,6%,72%,.5);cursor:default;z-index:11}.nav-item.submit .submit-panel[data-v-5ce25e66]:before{content:\"\";position:absolute;top:0;left:50%;width:1rem;height:1rem;border-top:1px solid hsla(220,6%,72%,.5);border-left:1px solid hsla(220,6%,72%,.5);background-color:#fff;-webkit-transform:rotate(45deg) translate(-50%,-50%);transform:rotate(45deg) translate(-50%,-50%);-webkit-transform-origin:0 0;transform-origin:0 0}.nav-item.submit .submit-panel .title[data-v-5ce25e66]{font-size:1.4rem;line-height:1;font-weight:700;color:#000;text-align:center;margin-bottom:2rem}.nav-item.submit .submit-panel .benefit-list[data-v-5ce25e66]{margin-left:2rem}.nav-item.submit .submit-panel .item[data-v-5ce25e66]{list-style:initial;margin-bottom:1rem}.nav-item.submit .submit-panel .link[data-v-5ce25e66]{color:#6cbd45;text-decoration:underline}.nav-item.submit .submit-panel button[data-v-5ce25e66]{display:block;margin:2rem auto 0;background-color:#83c73a;font-size:1.2rem;padding:1rem 4rem}.nav-item.auth[data-v-5ce25e66]{color:#007fff}.nav-item.auth span[data-v-5ce25e66]:hover{color:#0371df}.nav-item.auth .login[data-v-5ce25e66]:after{content:\"\\B7\";margin:0 .4rem}.nav-item .icon[data-v-5ce25e66]{font-size:2rem;color:#71777c}.nav-item .icon[data-v-5ce25e66]:hover{color:#007fff}.submit-fixed-bg[data-v-5ce25e66]{position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;z-index:10}.search-form[data-v-5ce25e66]{border:1px solid hsla(0,0%,59%,.2);background-color:rgba(227,231,236,.2);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-radius:2px}.search-form.active[data-v-5ce25e66]{background-color:#fff;border:1px solid #007fff}.search-form .search-icon[data-v-5ce25e66]{padding:0 .5rem;cursor:pointer}.search-form .search-input[data-v-5ce25e66]{border:none;width:8rem;padding:.6rem 1rem;box-shadow:none;outline:none;font-size:1.1rem;color:#666;background-color:transparent}.nav-menu[data-v-5ce25e66]{position:absolute;width:11rem;left:50%;top:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin:0;padding:0;list-style:none;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid hsla(217,5%,71%,.45);border-radius:4px;font-size:1.2rem}.nav-menu .nav-menu-item-group[data-v-5ce25e66]{padding:1rem 0}.nav-menu .nav-menu-item[data-v-5ce25e66]{font-size:1.3rem;cursor:pointer}.nav-menu .nav-menu-item[data-v-5ce25e66]:hover{background-color:hsla(0,0%,95%,.5)}.nav-menu .nav-menu-item>a[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:.5rem 1rem}.nav-menu .nav-menu-item>a>span[data-v-5ce25e66]{margin-left:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.nav-menu .more[data-v-5ce25e66]{position:relative}.nav-menu .more:hover .more-dropdown-list[data-v-5ce25e66]{display:block}.nav-menu .more .more-icon[data-v-5ce25e66]{float:right;color:#b2bac2;font-size:1.2rem;line-height:2rem}.nav-menu.user-dropdown-list[data-v-5ce25e66]{width:13rem;right:0;left:auto;-webkit-transform:translateX(0);transform:translateX(0)}.nav-menu.user-dropdown-list .nav-menu-item-group[data-v-5ce25e66]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.04)}.add-group[data-v-5ce25e66]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;height:2.667rem;cursor:pointer}.add-group.active .more-list[data-v-5ce25e66]{display:block}.add-group .add-btn[data-v-5ce25e66],.add-group .more[data-v-5ce25e66]{height:100%;color:#fff;background-color:#007fff;border-radius:3px}.add-group .add-btn.active[data-v-5ce25e66],.add-group .add-btn[data-v-5ce25e66]:hover,.add-group .more.active[data-v-5ce25e66],.add-group .more[data-v-5ce25e66]:hover{background-color:#0876e4}.add-group .add-btn[data-v-5ce25e66]{padding:0 .9rem;font-size:1.167rem;border-top-right-radius:0;border-bottom-right-radius:0}.add-group .more[data-v-5ce25e66]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:1.25rem;border-left:1px solid hsla(0,0%,100%,.1);border-top-left-radius:0;border-bottom-left-radius:0}.add-group .more .more-icon[data-v-5ce25e66]{margin-top:.2rem;font-size:1rem}.add-group .more-list[data-v-5ce25e66]{position:absolute;top:100%;left:0;right:0;padding:.417rem 0;font-size:1.167rem;color:#3b76c5;background-color:#fff;border:1px solid #ebebeb;border-radius:2px;box-shadow:0 1px 2px 0 rgba(0,0,0,.05);display:none;z-index:1}.add-group .more-list .item[data-v-5ce25e66]{padding:0 0 0 .8rem;line-height:1.9}.add-group .more-list .item[data-v-5ce25e66]:hover{background-color:#f9f9f9}.more-dropdown-list[data-v-5ce25e66]{position:absolute;left:auto;top:0;right:102%;-webkit-transform:translateX(0);transform:translateX(0);display:none}.more-dropdown-list[data-v-5ce25e66]:after{content:\"\";position:absolute;top:0;left:100%;width:1.3rem;height:4rem}.notification[data-v-5ce25e66]{position:relative}.notification.active .icon[data-v-5ce25e66]{color:#007fff}.notification .count[data-v-5ce25e66]{position:absolute;left:50%;bottom:43%;margin:0;padding:.4rem .67rem;font-size:1rem;line-height:1;text-align:center;color:#f1f1f1;background-color:#007fff;border-radius:3rem;border:2px solid #fff;word-break:normal}.fengwei[data-v-5ce25e66]{display:inline-block;width:1em;height:1em;margin-right:.8rem;font-size:1.2em;vertical-align:middle;color:#b2bac2}.fix-bg[data-v-5ce25e66]{position:fixed;top:0;left:0;bottom:0;right:0;opacity:0}@media (max-width:980px){.logo[data-v-5ce25e66]{margin-right:0}.container[data-v-5ce25e66]{width:96%}.main-nav-list[data-v-5ce25e66]{display:block;position:absolute;left:0;top:0;background-color:#fff}.phone-show-menu[data-v-5ce25e66]{height:5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#007fff;font-size:1.3rem;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 2rem}.phone-show-menu span[data-v-5ce25e66]{margin-right:.5rem}.phone-hide[data-v-5ce25e66]{display:none;background-color:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);border:1px solid hsla(217,5%,71%,.45);border-radius:4px;font-size:1.2rem}.phone-hide.show[data-v-5ce25e66]{display:block}.nav-item.link-item[data-v-5ce25e66]{height:4rem}.nav-item.add[data-v-5ce25e66],.nav-item.search[data-v-5ce25e66],.nav-item.submit[data-v-5ce25e66],.pinTip[data-v-5ce25e66],.tip[data-v-5ce25e66]{display:none}}","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/ionicons.min","date":"2018-08-02T17:28:42.000Z","updated":"2018-08-02T17:28:42.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/ionicons.min/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/ionicons.min/","excerpt":"","text":"@charset \"UTF-8\";/*! Ionicons, v2.0.0 Created by Ben Sperry for the Ionic Framework, http://ionicons.com/ https://twitter.com/benjsperry https://twitter.com/ionicframework MIT License: https://github.com/driftyco/ionicons Android-style icons originally built by Google’s Material Design Icons: https://github.com/google/material-design-icons used under CC BY http://creativecommons.org/licenses/by/4.0/ Modified icons to fit ionicon’s grid from original. */@font-face{font-family:\"Ionicons\";src:url(\"../fonts/ionicons.eot?v=2.0.0\");src:url(\"../fonts/ionicons.eot?v=2.0.0#iefix\") format(\"embedded-opentype\"),url(\"../fonts/ionicons.ttf?v=2.0.0\") format(\"truetype\"),url(\"../fonts/ionicons.woff?v=2.0.0\") format(\"woff\"),url(\"../fonts/ionicons.svg?v=2.0.0#Ionicons\") format(\"svg\");font-weight:normal;font-style:normal}.ion,.ionicons,.ion-alert:before,.ion-alert-circled:before,.ion-android-add:before,.ion-android-add-circle:before,.ion-android-alarm-clock:before,.ion-android-alert:before,.ion-android-apps:before,.ion-android-archive:before,.ion-android-arrow-back:before,.ion-android-arrow-down:before,.ion-android-arrow-dropdown:before,.ion-android-arrow-dropdown-circle:before,.ion-android-arrow-dropleft:before,.ion-android-arrow-dropleft-circle:before,.ion-android-arrow-dropright:before,.ion-android-arrow-dropright-circle:before,.ion-android-arrow-dropup:before,.ion-android-arrow-dropup-circle:before,.ion-android-arrow-forward:before,.ion-android-arrow-up:before,.ion-android-attach:before,.ion-android-bar:before,.ion-android-bicycle:before,.ion-android-boat:before,.ion-android-bookmark:before,.ion-android-bulb:before,.ion-android-bus:before,.ion-android-calendar:before,.ion-android-call:before,.ion-android-camera:before,.ion-android-cancel:before,.ion-android-car:before,.ion-android-cart:before,.ion-android-chat:before,.ion-android-checkbox:before,.ion-android-checkbox-blank:before,.ion-android-checkbox-outline:before,.ion-android-checkbox-outline-blank:before,.ion-android-checkmark-circle:before,.ion-android-clipboard:before,.ion-android-close:before,.ion-android-cloud:before,.ion-android-cloud-circle:before,.ion-android-cloud-done:before,.ion-android-cloud-outline:before,.ion-android-color-palette:before,.ion-android-compass:before,.ion-android-contact:before,.ion-android-contacts:before,.ion-android-contract:before,.ion-android-create:before,.ion-android-delete:before,.ion-android-desktop:before,.ion-android-document:before,.ion-android-done:before,.ion-android-done-all:before,.ion-android-download:before,.ion-android-drafts:before,.ion-android-exit:before,.ion-android-expand:before,.ion-android-favorite:before,.ion-android-favorite-outline:before,.ion-android-film:before,.ion-android-folder:before,.ion-android-folder-open:before,.ion-android-funnel:before,.ion-android-globe:before,.ion-android-hand:before,.ion-android-hangout:before,.ion-android-happy:before,.ion-android-home:before,.ion-android-image:before,.ion-android-laptop:before,.ion-android-list:before,.ion-android-locate:before,.ion-android-lock:before,.ion-android-mail:before,.ion-android-map:before,.ion-android-menu:before,.ion-android-microphone:before,.ion-android-microphone-off:before,.ion-android-more-horizontal:before,.ion-android-more-vertical:before,.ion-android-navigate:before,.ion-android-notifications:before,.ion-android-notifications-none:before,.ion-android-notifications-off:before,.ion-android-open:before,.ion-android-options:before,.ion-android-people:before,.ion-android-person:before,.ion-android-person-add:before,.ion-android-phone-landscape:before,.ion-android-phone-portrait:before,.ion-android-pin:before,.ion-android-plane:before,.ion-android-playstore:before,.ion-android-print:before,.ion-android-radio-button-off:before,.ion-android-radio-button-on:before,.ion-android-refresh:before,.ion-android-remove:before,.ion-android-remove-circle:before,.ion-android-restaurant:before,.ion-android-sad:before,.ion-android-search:before,.ion-android-send:before,.ion-android-settings:before,.ion-android-share:before,.ion-android-share-alt:before,.ion-android-star:before,.ion-android-star-half:before,.ion-android-star-outline:before,.ion-android-stopwatch:before,.ion-android-subway:before,.ion-android-sunny:before,.ion-android-sync:before,.ion-android-textsms:before,.ion-android-time:before,.ion-android-train:before,.ion-android-unlock:before,.ion-android-upload:before,.ion-android-volume-down:before,.ion-android-volume-mute:before,.ion-android-volume-off:before,.ion-android-volume-up:before,.ion-android-walk:before,.ion-android-warning:before,.ion-android-watch:before,.ion-android-wifi:before,.ion-aperture:before,.ion-archive:before,.ion-arrow-down-a:before,.ion-arrow-down-b:before,.ion-arrow-down-c:before,.ion-arrow-expand:before,.ion-arrow-graph-down-left:before,.ion-arrow-graph-down-right:before,.ion-arrow-graph-up-left:before,.ion-arrow-graph-up-right:before,.ion-arrow-left-a:before,.ion-arrow-left-b:before,.ion-arrow-left-c:before,.ion-arrow-move:before,.ion-arrow-resize:before,.ion-arrow-return-left:before,.ion-arrow-return-right:before,.ion-arrow-right-a:before,.ion-arrow-right-b:before,.ion-arrow-right-c:before,.ion-arrow-shrink:before,.ion-arrow-swap:before,.ion-arrow-up-a:before,.ion-arrow-up-b:before,.ion-arrow-up-c:before,.ion-asterisk:before,.ion-at:before,.ion-backspace:before,.ion-backspace-outline:before,.ion-bag:before,.ion-battery-charging:before,.ion-battery-empty:before,.ion-battery-full:before,.ion-battery-half:before,.ion-battery-low:before,.ion-beaker:before,.ion-beer:before,.ion-bluetooth:before,.ion-bonfire:before,.ion-bookmark:before,.ion-bowtie:before,.ion-briefcase:before,.ion-bug:before,.ion-calculator:before,.ion-calendar:before,.ion-camera:before,.ion-card:before,.ion-cash:before,.ion-chatbox:before,.ion-chatbox-working:before,.ion-chatboxes:before,.ion-chatbubble:before,.ion-chatbubble-working:before,.ion-chatbubbles:before,.ion-checkmark:before,.ion-checkmark-circled:before,.ion-checkmark-round:before,.ion-chevron-down:before,.ion-chevron-left:before,.ion-chevron-right:before,.ion-chevron-up:before,.ion-clipboard:before,.ion-clock:before,.ion-close:before,.ion-close-circled:before,.ion-close-round:before,.ion-closed-captioning:before,.ion-cloud:before,.ion-code:before,.ion-code-download:before,.ion-code-working:before,.ion-coffee:before,.ion-compass:before,.ion-compose:before,.ion-connection-bars:before,.ion-contrast:before,.ion-crop:before,.ion-cube:before,.ion-disc:before,.ion-document:before,.ion-document-text:before,.ion-drag:before,.ion-earth:before,.ion-easel:before,.ion-edit:before,.ion-egg:before,.ion-eject:before,.ion-email:before,.ion-email-unread:before,.ion-erlenmeyer-flask:before,.ion-erlenmeyer-flask-bubbles:before,.ion-eye:before,.ion-eye-disabled:before,.ion-female:before,.ion-filing:before,.ion-film-marker:before,.ion-fireball:before,.ion-flag:before,.ion-flame:before,.ion-flash:before,.ion-flash-off:before,.ion-folder:before,.ion-fork:before,.ion-fork-repo:before,.ion-forward:before,.ion-funnel:before,.ion-gear-a:before,.ion-gear-b:before,.ion-grid:before,.ion-hammer:before,.ion-happy:before,.ion-happy-outline:before,.ion-headphone:before,.ion-heart:before,.ion-heart-broken:before,.ion-help:before,.ion-help-buoy:before,.ion-help-circled:before,.ion-home:before,.ion-icecream:before,.ion-image:before,.ion-images:before,.ion-information:before,.ion-information-circled:before,.ion-ionic:before,.ion-ios-alarm:before,.ion-ios-alarm-outline:before,.ion-ios-albums:before,.ion-ios-albums-outline:before,.ion-ios-americanfootball:before,.ion-ios-americanfootball-outline:before,.ion-ios-analytics:before,.ion-ios-analytics-outline:before,.ion-ios-arrow-back:before,.ion-ios-arrow-down:before,.ion-ios-arrow-forward:before,.ion-ios-arrow-left:before,.ion-ios-arrow-right:before,.ion-ios-arrow-thin-down:before,.ion-ios-arrow-thin-left:before,.ion-ios-arrow-thin-right:before,.ion-ios-arrow-thin-up:before,.ion-ios-arrow-up:before,.ion-ios-at:before,.ion-ios-at-outline:before,.ion-ios-barcode:before,.ion-ios-barcode-outline:before,.ion-ios-baseball:before,.ion-ios-baseball-outline:before,.ion-ios-basketball:before,.ion-ios-basketball-outline:before,.ion-ios-bell:before,.ion-ios-bell-outline:before,.ion-ios-body:before,.ion-ios-body-outline:before,.ion-ios-bolt:before,.ion-ios-bolt-outline:before,.ion-ios-book:before,.ion-ios-book-outline:before,.ion-ios-bookmarks:before,.ion-ios-bookmarks-outline:before,.ion-ios-box:before,.ion-ios-box-outline:before,.ion-ios-briefcase:before,.ion-ios-briefcase-outline:before,.ion-ios-browsers:before,.ion-ios-browsers-outline:before,.ion-ios-calculator:before,.ion-ios-calculator-outline:before,.ion-ios-calendar:before,.ion-ios-calendar-outline:before,.ion-ios-camera:before,.ion-ios-camera-outline:before,.ion-ios-cart:before,.ion-ios-cart-outline:before,.ion-ios-chatboxes:before,.ion-ios-chatboxes-outline:before,.ion-ios-chatbubble:before,.ion-ios-chatbubble-outline:before,.ion-ios-checkmark:before,.ion-ios-checkmark-empty:before,.ion-ios-checkmark-outline:before,.ion-ios-circle-filled:before,.ion-ios-circle-outline:before,.ion-ios-clock:before,.ion-ios-clock-outline:before,.ion-ios-close:before,.ion-ios-close-empty:before,.ion-ios-close-outline:before,.ion-ios-cloud:before,.ion-ios-cloud-download:before,.ion-ios-cloud-download-outline:before,.ion-ios-cloud-outline:before,.ion-ios-cloud-upload:before,.ion-ios-cloud-upload-outline:before,.ion-ios-cloudy:before,.ion-ios-cloudy-night:before,.ion-ios-cloudy-night-outline:before,.ion-ios-cloudy-outline:before,.ion-ios-cog:before,.ion-ios-cog-outline:before,.ion-ios-color-filter:before,.ion-ios-color-filter-outline:before,.ion-ios-color-wand:before,.ion-ios-color-wand-outline:before,.ion-ios-compose:before,.ion-ios-compose-outline:before,.ion-ios-contact:before,.ion-ios-contact-outline:before,.ion-ios-copy:before,.ion-ios-copy-outline:before,.ion-ios-crop:before,.ion-ios-crop-strong:before,.ion-ios-download:before,.ion-ios-download-outline:before,.ion-ios-drag:before,.ion-ios-email:before,.ion-ios-email-outline:before,.ion-ios-eye:before,.ion-ios-eye-outline:before,.ion-ios-fastforward:before,.ion-ios-fastforward-outline:before,.ion-ios-filing:before,.ion-ios-filing-outline:before,.ion-ios-film:before,.ion-ios-film-outline:before,.ion-ios-flag:before,.ion-ios-flag-outline:before,.ion-ios-flame:before,.ion-ios-flame-outline:before,.ion-ios-flask:before,.ion-ios-flask-outline:before,.ion-ios-flower:before,.ion-ios-flower-outline:before,.ion-ios-folder:before,.ion-ios-folder-outline:before,.ion-ios-football:before,.ion-ios-football-outline:before,.ion-ios-game-controller-a:before,.ion-ios-game-controller-a-outline:before,.ion-ios-game-controller-b:before,.ion-ios-game-controller-b-outline:before,.ion-ios-gear:before,.ion-ios-gear-outline:before,.ion-ios-glasses:before,.ion-ios-glasses-outline:before,.ion-ios-grid-view:before,.ion-ios-grid-view-outline:before,.ion-ios-heart:before,.ion-ios-heart-outline:before,.ion-ios-help:before,.ion-ios-help-empty:before,.ion-ios-help-outline:before,.ion-ios-home:before,.ion-ios-home-outline:before,.ion-ios-infinite:before,.ion-ios-infinite-outline:before,.ion-ios-information:before,.ion-ios-information-empty:before,.ion-ios-information-outline:before,.ion-ios-ionic-outline:before,.ion-ios-keypad:before,.ion-ios-keypad-outline:before,.ion-ios-lightbulb:before,.ion-ios-lightbulb-outline:before,.ion-ios-list:before,.ion-ios-list-outline:before,.ion-ios-location:before,.ion-ios-location-outline:before,.ion-ios-locked:before,.ion-ios-locked-outline:before,.ion-ios-loop:before,.ion-ios-loop-strong:before,.ion-ios-medical:before,.ion-ios-medical-outline:before,.ion-ios-medkit:before,.ion-ios-medkit-outline:before,.ion-ios-mic:before,.ion-ios-mic-off:before,.ion-ios-mic-outline:before,.ion-ios-minus:before,.ion-ios-minus-empty:before,.ion-ios-minus-outline:before,.ion-ios-monitor:before,.ion-ios-monitor-outline:before,.ion-ios-moon:before,.ion-ios-moon-outline:before,.ion-ios-more:before,.ion-ios-more-outline:before,.ion-ios-musical-note:before,.ion-ios-musical-notes:before,.ion-ios-navigate:before,.ion-ios-navigate-outline:before,.ion-ios-nutrition:before,.ion-ios-nutrition-outline:before,.ion-ios-paper:before,.ion-ios-paper-outline:before,.ion-ios-paperplane:before,.ion-ios-paperplane-outline:before,.ion-ios-partlysunny:before,.ion-ios-partlysunny-outline:before,.ion-ios-pause:before,.ion-ios-pause-outline:before,.ion-ios-paw:before,.ion-ios-paw-outline:before,.ion-ios-people:before,.ion-ios-people-outline:before,.ion-ios-person:before,.ion-ios-person-outline:before,.ion-ios-personadd:before,.ion-ios-personadd-outline:before,.ion-ios-photos:before,.ion-ios-photos-outline:before,.ion-ios-pie:before,.ion-ios-pie-outline:before,.ion-ios-pint:before,.ion-ios-pint-outline:before,.ion-ios-play:before,.ion-ios-play-outline:before,.ion-ios-plus:before,.ion-ios-plus-empty:before,.ion-ios-plus-outline:before,.ion-ios-pricetag:before,.ion-ios-pricetag-outline:before,.ion-ios-pricetags:before,.ion-ios-pricetags-outline:before,.ion-ios-printer:before,.ion-ios-printer-outline:before,.ion-ios-pulse:before,.ion-ios-pulse-strong:before,.ion-ios-rainy:before,.ion-ios-rainy-outline:before,.ion-ios-recording:before,.ion-ios-recording-outline:before,.ion-ios-redo:before,.ion-ios-redo-outline:before,.ion-ios-refresh:before,.ion-ios-refresh-empty:before,.ion-ios-refresh-outline:before,.ion-ios-reload:before,.ion-ios-reverse-camera:before,.ion-ios-reverse-camera-outline:before,.ion-ios-rewind:before,.ion-ios-rewind-outline:before,.ion-ios-rose:before,.ion-ios-rose-outline:before,.ion-ios-search:before,.ion-ios-search-strong:before,.ion-ios-settings:before,.ion-ios-settings-strong:before,.ion-ios-shuffle:before,.ion-ios-shuffle-strong:before,.ion-ios-skipbackward:before,.ion-ios-skipbackward-outline:before,.ion-ios-skipforward:before,.ion-ios-skipforward-outline:before,.ion-ios-snowy:before,.ion-ios-speedometer:before,.ion-ios-speedometer-outline:before,.ion-ios-star:before,.ion-ios-star-half:before,.ion-ios-star-outline:before,.ion-ios-stopwatch:before,.ion-ios-stopwatch-outline:before,.ion-ios-sunny:before,.ion-ios-sunny-outline:before,.ion-ios-telephone:before,.ion-ios-telephone-outline:before,.ion-ios-tennisball:before,.ion-ios-tennisball-outline:before,.ion-ios-thunderstorm:before,.ion-ios-thunderstorm-outline:before,.ion-ios-time:before,.ion-ios-time-outline:before,.ion-ios-timer:before,.ion-ios-timer-outline:before,.ion-ios-toggle:before,.ion-ios-toggle-outline:before,.ion-ios-trash:before,.ion-ios-trash-outline:before,.ion-ios-undo:before,.ion-ios-undo-outline:before,.ion-ios-unlocked:before,.ion-ios-unlocked-outline:before,.ion-ios-upload:before,.ion-ios-upload-outline:before,.ion-ios-videocam:before,.ion-ios-videocam-outline:before,.ion-ios-volume-high:before,.ion-ios-volume-low:before,.ion-ios-wineglass:before,.ion-ios-wineglass-outline:before,.ion-ios-world:before,.ion-ios-world-outline:before,.ion-ipad:before,.ion-iphone:before,.ion-ipod:before,.ion-jet:before,.ion-key:before,.ion-knife:before,.ion-laptop:before,.ion-leaf:before,.ion-levels:before,.ion-lightbulb:before,.ion-link:before,.ion-load-a:before,.ion-load-b:before,.ion-load-c:before,.ion-load-d:before,.ion-location:before,.ion-lock-combination:before,.ion-locked:before,.ion-log-in:before,.ion-log-out:before,.ion-loop:before,.ion-magnet:before,.ion-male:before,.ion-man:before,.ion-map:before,.ion-medkit:before,.ion-merge:before,.ion-mic-a:before,.ion-mic-b:before,.ion-mic-c:before,.ion-minus:before,.ion-minus-circled:before,.ion-minus-round:before,.ion-model-s:before,.ion-monitor:before,.ion-more:before,.ion-mouse:before,.ion-music-note:before,.ion-navicon:before,.ion-navicon-round:before,.ion-navigate:before,.ion-network:before,.ion-no-smoking:before,.ion-nuclear:before,.ion-outlet:before,.ion-paintbrush:before,.ion-paintbucket:before,.ion-paper-airplane:before,.ion-paperclip:before,.ion-pause:before,.ion-person:before,.ion-person-add:before,.ion-person-stalker:before,.ion-pie-graph:before,.ion-pin:before,.ion-pinpoint:before,.ion-pizza:before,.ion-plane:before,.ion-planet:before,.ion-play:before,.ion-playstation:before,.ion-plus:before,.ion-plus-circled:before,.ion-plus-round:before,.ion-podium:before,.ion-pound:before,.ion-power:before,.ion-pricetag:before,.ion-pricetags:before,.ion-printer:before,.ion-pull-request:before,.ion-qr-scanner:before,.ion-quote:before,.ion-radio-waves:before,.ion-record:before,.ion-refresh:before,.ion-reply:before,.ion-reply-all:before,.ion-ribbon-a:before,.ion-ribbon-b:before,.ion-sad:before,.ion-sad-outline:before,.ion-scissors:before,.ion-search:before,.ion-settings:before,.ion-share:before,.ion-shuffle:before,.ion-skip-backward:before,.ion-skip-forward:before,.ion-social-android:before,.ion-social-android-outline:before,.ion-social-angular:before,.ion-social-angular-outline:before,.ion-social-apple:before,.ion-social-apple-outline:before,.ion-social-bitcoin:before,.ion-social-bitcoin-outline:before,.ion-social-buffer:before,.ion-social-buffer-outline:before,.ion-social-chrome:before,.ion-social-chrome-outline:before,.ion-social-codepen:before,.ion-social-codepen-outline:before,.ion-social-css3:before,.ion-social-css3-outline:before,.ion-social-designernews:before,.ion-social-designernews-outline:before,.ion-social-dribbble:before,.ion-social-dribbble-outline:before,.ion-social-dropbox:before,.ion-social-dropbox-outline:before,.ion-social-euro:before,.ion-social-euro-outline:before,.ion-social-facebook:before,.ion-social-facebook-outline:before,.ion-social-foursquare:before,.ion-social-foursquare-outline:before,.ion-social-freebsd-devil:before,.ion-social-github:before,.ion-social-github-outline:before,.ion-social-google:before,.ion-social-google-outline:before,.ion-social-googleplus:before,.ion-social-googleplus-outline:before,.ion-social-hackernews:before,.ion-social-hackernews-outline:before,.ion-social-html5:before,.ion-social-html5-outline:before,.ion-social-instagram:before,.ion-social-instagram-outline:before,.ion-social-javascript:before,.ion-social-javascript-outline:before,.ion-social-linkedin:before,.ion-social-linkedin-outline:before,.ion-social-markdown:before,.ion-social-nodejs:before,.ion-social-octocat:before,.ion-social-pinterest:before,.ion-social-pinterest-outline:before,.ion-social-python:before,.ion-social-reddit:before,.ion-social-reddit-outline:before,.ion-social-rss:before,.ion-social-rss-outline:before,.ion-social-sass:before,.ion-social-skype:before,.ion-social-skype-outline:before,.ion-social-snapchat:before,.ion-social-snapchat-outline:before,.ion-social-tumblr:before,.ion-social-tumblr-outline:before,.ion-social-tux:before,.ion-social-twitch:before,.ion-social-twitch-outline:before,.ion-social-twitter:before,.ion-social-twitter-outline:before,.ion-social-usd:before,.ion-social-usd-outline:before,.ion-social-vimeo:before,.ion-social-vimeo-outline:before,.ion-social-whatsapp:before,.ion-social-whatsapp-outline:before,.ion-social-windows:before,.ion-social-windows-outline:before,.ion-social-wordpress:before,.ion-social-wordpress-outline:before,.ion-social-yahoo:before,.ion-social-yahoo-outline:before,.ion-social-yen:before,.ion-social-yen-outline:before,.ion-social-youtube:before,.ion-social-youtube-outline:before,.ion-soup-can:before,.ion-soup-can-outline:before,.ion-speakerphone:before,.ion-speedometer:before,.ion-spoon:before,.ion-star:before,.ion-stats-bars:before,.ion-steam:before,.ion-stop:before,.ion-thermometer:before,.ion-thumbsdown:before,.ion-thumbsup:before,.ion-toggle:before,.ion-toggle-filled:before,.ion-transgender:before,.ion-trash-a:before,.ion-trash-b:before,.ion-trophy:before,.ion-tshirt:before,.ion-tshirt-outline:before,.ion-umbrella:before,.ion-university:before,.ion-unlocked:before,.ion-upload:before,.ion-usb:before,.ion-videocamera:before,.ion-volume-high:before,.ion-volume-low:before,.ion-volume-medium:before,.ion-volume-mute:before,.ion-wand:before,.ion-waterdrop:before,.ion-wifi:before,.ion-wineglass:before,.ion-woman:before,.ion-wrench:before,.ion-xbox:before{display:inline-block;font-family:\"Ionicons\";speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ion-alert:before{content:\"\\f101\"}.ion-alert-circled:before{content:\"\\f100\"}.ion-android-add:before{content:\"\\f2c7\"}.ion-android-add-circle:before{content:\"\\f359\"}.ion-android-alarm-clock:before{content:\"\\f35a\"}.ion-android-alert:before{content:\"\\f35b\"}.ion-android-apps:before{content:\"\\f35c\"}.ion-android-archive:before{content:\"\\f2c9\"}.ion-android-arrow-back:before{content:\"\\f2ca\"}.ion-android-arrow-down:before{content:\"\\f35d\"}.ion-android-arrow-dropdown:before{content:\"\\f35f\"}.ion-android-arrow-dropdown-circle:before{content:\"\\f35e\"}.ion-android-arrow-dropleft:before{content:\"\\f361\"}.ion-android-arrow-dropleft-circle:before{content:\"\\f360\"}.ion-android-arrow-dropright:before{content:\"\\f363\"}.ion-android-arrow-dropright-circle:before{content:\"\\f362\"}.ion-android-arrow-dropup:before{content:\"\\f365\"}.ion-android-arrow-dropup-circle:before{content:\"\\f364\"}.ion-android-arrow-forward:before{content:\"\\f30f\"}.ion-android-arrow-up:before{content:\"\\f366\"}.ion-android-attach:before{content:\"\\f367\"}.ion-android-bar:before{content:\"\\f368\"}.ion-android-bicycle:before{content:\"\\f369\"}.ion-android-boat:before{content:\"\\f36a\"}.ion-android-bookmark:before{content:\"\\f36b\"}.ion-android-bulb:before{content:\"\\f36c\"}.ion-android-bus:before{content:\"\\f36d\"}.ion-android-calendar:before{content:\"\\f2d1\"}.ion-android-call:before{content:\"\\f2d2\"}.ion-android-camera:before{content:\"\\f2d3\"}.ion-android-cancel:before{content:\"\\f36e\"}.ion-android-car:before{content:\"\\f36f\"}.ion-android-cart:before{content:\"\\f370\"}.ion-android-chat:before{content:\"\\f2d4\"}.ion-android-checkbox:before{content:\"\\f374\"}.ion-android-checkbox-blank:before{content:\"\\f371\"}.ion-android-checkbox-outline:before{content:\"\\f373\"}.ion-android-checkbox-outline-blank:before{content:\"\\f372\"}.ion-android-checkmark-circle:before{content:\"\\f375\"}.ion-android-clipboard:before{content:\"\\f376\"}.ion-android-close:before{content:\"\\f2d7\"}.ion-android-cloud:before{content:\"\\f37a\"}.ion-android-cloud-circle:before{content:\"\\f377\"}.ion-android-cloud-done:before{content:\"\\f378\"}.ion-android-cloud-outline:before{content:\"\\f379\"}.ion-android-color-palette:before{content:\"\\f37b\"}.ion-android-compass:before{content:\"\\f37c\"}.ion-android-contact:before{content:\"\\f2d8\"}.ion-android-contacts:before{content:\"\\f2d9\"}.ion-android-contract:before{content:\"\\f37d\"}.ion-android-create:before{content:\"\\f37e\"}.ion-android-delete:before{content:\"\\f37f\"}.ion-android-desktop:before{content:\"\\f380\"}.ion-android-document:before{content:\"\\f381\"}.ion-android-done:before{content:\"\\f383\"}.ion-android-done-all:before{content:\"\\f382\"}.ion-android-download:before{content:\"\\f2dd\"}.ion-android-drafts:before{content:\"\\f384\"}.ion-android-exit:before{content:\"\\f385\"}.ion-android-expand:before{content:\"\\f386\"}.ion-android-favorite:before{content:\"\\f388\"}.ion-android-favorite-outline:before{content:\"\\f387\"}.ion-android-film:before{content:\"\\f389\"}.ion-android-folder:before{content:\"\\f2e0\"}.ion-android-folder-open:before{content:\"\\f38a\"}.ion-android-funnel:before{content:\"\\f38b\"}.ion-android-globe:before{content:\"\\f38c\"}.ion-android-hand:before{content:\"\\f2e3\"}.ion-android-hangout:before{content:\"\\f38d\"}.ion-android-happy:before{content:\"\\f38e\"}.ion-android-home:before{content:\"\\f38f\"}.ion-android-image:before{content:\"\\f2e4\"}.ion-android-laptop:before{content:\"\\f390\"}.ion-android-list:before{content:\"\\f391\"}.ion-android-locate:before{content:\"\\f2e9\"}.ion-android-lock:before{content:\"\\f392\"}.ion-android-mail:before{content:\"\\f2eb\"}.ion-android-map:before{content:\"\\f393\"}.ion-android-menu:before{content:\"\\f394\"}.ion-android-microphone:before{content:\"\\f2ec\"}.ion-android-microphone-off:before{content:\"\\f395\"}.ion-android-more-horizontal:before{content:\"\\f396\"}.ion-android-more-vertical:before{content:\"\\f397\"}.ion-android-navigate:before{content:\"\\f398\"}.ion-android-notifications:before{content:\"\\f39b\"}.ion-android-notifications-none:before{content:\"\\f399\"}.ion-android-notifications-off:before{content:\"\\f39a\"}.ion-android-open:before{content:\"\\f39c\"}.ion-android-options:before{content:\"\\f39d\"}.ion-android-people:before{content:\"\\f39e\"}.ion-android-person:before{content:\"\\f3a0\"}.ion-android-person-add:before{content:\"\\f39f\"}.ion-android-phone-landscape:before{content:\"\\f3a1\"}.ion-android-phone-portrait:before{content:\"\\f3a2\"}.ion-android-pin:before{content:\"\\f3a3\"}.ion-android-plane:before{content:\"\\f3a4\"}.ion-android-playstore:before{content:\"\\f2f0\"}.ion-android-print:before{content:\"\\f3a5\"}.ion-android-radio-button-off:before{content:\"\\f3a6\"}.ion-android-radio-button-on:before{content:\"\\f3a7\"}.ion-android-refresh:before{content:\"\\f3a8\"}.ion-android-remove:before{content:\"\\f2f4\"}.ion-android-remove-circle:before{content:\"\\f3a9\"}.ion-android-restaurant:before{content:\"\\f3aa\"}.ion-android-sad:before{content:\"\\f3ab\"}.ion-android-search:before{content:\"\\f2f5\"}.ion-android-send:before{content:\"\\f2f6\"}.ion-android-settings:before{content:\"\\f2f7\"}.ion-android-share:before{content:\"\\f2f8\"}.ion-android-share-alt:before{content:\"\\f3ac\"}.ion-android-star:before{content:\"\\f2fc\"}.ion-android-star-half:before{content:\"\\f3ad\"}.ion-android-star-outline:before{content:\"\\f3ae\"}.ion-android-stopwatch:before{content:\"\\f2fd\"}.ion-android-subway:before{content:\"\\f3af\"}.ion-android-sunny:before{content:\"\\f3b0\"}.ion-android-sync:before{content:\"\\f3b1\"}.ion-android-textsms:before{content:\"\\f3b2\"}.ion-android-time:before{content:\"\\f3b3\"}.ion-android-train:before{content:\"\\f3b4\"}.ion-android-unlock:before{content:\"\\f3b5\"}.ion-android-upload:before{content:\"\\f3b6\"}.ion-android-volume-down:before{content:\"\\f3b7\"}.ion-android-volume-mute:before{content:\"\\f3b8\"}.ion-android-volume-off:before{content:\"\\f3b9\"}.ion-android-volume-up:before{content:\"\\f3ba\"}.ion-android-walk:before{content:\"\\f3bb\"}.ion-android-warning:before{content:\"\\f3bc\"}.ion-android-watch:before{content:\"\\f3bd\"}.ion-android-wifi:before{content:\"\\f305\"}.ion-aperture:before{content:\"\\f313\"}.ion-archive:before{content:\"\\f102\"}.ion-arrow-down-a:before{content:\"\\f103\"}.ion-arrow-down-b:before{content:\"\\f104\"}.ion-arrow-down-c:before{content:\"\\f105\"}.ion-arrow-expand:before{content:\"\\f25e\"}.ion-arrow-graph-down-left:before{content:\"\\f25f\"}.ion-arrow-graph-down-right:before{content:\"\\f260\"}.ion-arrow-graph-up-left:before{content:\"\\f261\"}.ion-arrow-graph-up-right:before{content:\"\\f262\"}.ion-arrow-left-a:before{content:\"\\f106\"}.ion-arrow-left-b:before{content:\"\\f107\"}.ion-arrow-left-c:before{content:\"\\f108\"}.ion-arrow-move:before{content:\"\\f263\"}.ion-arrow-resize:before{content:\"\\f264\"}.ion-arrow-return-left:before{content:\"\\f265\"}.ion-arrow-return-right:before{content:\"\\f266\"}.ion-arrow-right-a:before{content:\"\\f109\"}.ion-arrow-right-b:before{content:\"\\f10a\"}.ion-arrow-right-c:before{content:\"\\f10b\"}.ion-arrow-shrink:before{content:\"\\f267\"}.ion-arrow-swap:before{content:\"\\f268\"}.ion-arrow-up-a:before{content:\"\\f10c\"}.ion-arrow-up-b:before{content:\"\\f10d\"}.ion-arrow-up-c:before{content:\"\\f10e\"}.ion-asterisk:before{content:\"\\f314\"}.ion-at:before{content:\"\\f10f\"}.ion-backspace:before{content:\"\\f3bf\"}.ion-backspace-outline:before{content:\"\\f3be\"}.ion-bag:before{content:\"\\f110\"}.ion-battery-charging:before{content:\"\\f111\"}.ion-battery-empty:before{content:\"\\f112\"}.ion-battery-full:before{content:\"\\f113\"}.ion-battery-half:before{content:\"\\f114\"}.ion-battery-low:before{content:\"\\f115\"}.ion-beaker:before{content:\"\\f269\"}.ion-beer:before{content:\"\\f26a\"}.ion-bluetooth:before{content:\"\\f116\"}.ion-bonfire:before{content:\"\\f315\"}.ion-bookmark:before{content:\"\\f26b\"}.ion-bowtie:before{content:\"\\f3c0\"}.ion-briefcase:before{content:\"\\f26c\"}.ion-bug:before{content:\"\\f2be\"}.ion-calculator:before{content:\"\\f26d\"}.ion-calendar:before{content:\"\\f117\"}.ion-camera:before{content:\"\\f118\"}.ion-card:before{content:\"\\f119\"}.ion-cash:before{content:\"\\f316\"}.ion-chatbox:before{content:\"\\f11b\"}.ion-chatbox-working:before{content:\"\\f11a\"}.ion-chatboxes:before{content:\"\\f11c\"}.ion-chatbubble:before{content:\"\\f11e\"}.ion-chatbubble-working:before{content:\"\\f11d\"}.ion-chatbubbles:before{content:\"\\f11f\"}.ion-checkmark:before{content:\"\\f122\"}.ion-checkmark-circled:before{content:\"\\f120\"}.ion-checkmark-round:before{content:\"\\f121\"}.ion-chevron-down:before{content:\"\\f123\"}.ion-chevron-left:before{content:\"\\f124\"}.ion-chevron-right:before{content:\"\\f125\"}.ion-chevron-up:before{content:\"\\f126\"}.ion-clipboard:before{content:\"\\f127\"}.ion-clock:before{content:\"\\f26e\"}.ion-close:before{content:\"\\f12a\"}.ion-close-circled:before{content:\"\\f128\"}.ion-close-round:before{content:\"\\f129\"}.ion-closed-captioning:before{content:\"\\f317\"}.ion-cloud:before{content:\"\\f12b\"}.ion-code:before{content:\"\\f271\"}.ion-code-download:before{content:\"\\f26f\"}.ion-code-working:before{content:\"\\f270\"}.ion-coffee:before{content:\"\\f272\"}.ion-compass:before{content:\"\\f273\"}.ion-compose:before{content:\"\\f12c\"}.ion-connection-bars:before{content:\"\\f274\"}.ion-contrast:before{content:\"\\f275\"}.ion-crop:before{content:\"\\f3c1\"}.ion-cube:before{content:\"\\f318\"}.ion-disc:before{content:\"\\f12d\"}.ion-document:before{content:\"\\f12f\"}.ion-document-text:before{content:\"\\f12e\"}.ion-drag:before{content:\"\\f130\"}.ion-earth:before{content:\"\\f276\"}.ion-easel:before{content:\"\\f3c2\"}.ion-edit:before{content:\"\\f2bf\"}.ion-egg:before{content:\"\\f277\"}.ion-eject:before{content:\"\\f131\"}.ion-email:before{content:\"\\f132\"}.ion-email-unread:before{content:\"\\f3c3\"}.ion-erlenmeyer-flask:before{content:\"\\f3c5\"}.ion-erlenmeyer-flask-bubbles:before{content:\"\\f3c4\"}.ion-eye:before{content:\"\\f133\"}.ion-eye-disabled:before{content:\"\\f306\"}.ion-female:before{content:\"\\f278\"}.ion-filing:before{content:\"\\f134\"}.ion-film-marker:before{content:\"\\f135\"}.ion-fireball:before{content:\"\\f319\"}.ion-flag:before{content:\"\\f279\"}.ion-flame:before{content:\"\\f31a\"}.ion-flash:before{content:\"\\f137\"}.ion-flash-off:before{content:\"\\f136\"}.ion-folder:before{content:\"\\f139\"}.ion-fork:before{content:\"\\f27a\"}.ion-fork-repo:before{content:\"\\f2c0\"}.ion-forward:before{content:\"\\f13a\"}.ion-funnel:before{content:\"\\f31b\"}.ion-gear-a:before{content:\"\\f13d\"}.ion-gear-b:before{content:\"\\f13e\"}.ion-grid:before{content:\"\\f13f\"}.ion-hammer:before{content:\"\\f27b\"}.ion-happy:before{content:\"\\f31c\"}.ion-happy-outline:before{content:\"\\f3c6\"}.ion-headphone:before{content:\"\\f140\"}.ion-heart:before{content:\"\\f141\"}.ion-heart-broken:before{content:\"\\f31d\"}.ion-help:before{content:\"\\f143\"}.ion-help-buoy:before{content:\"\\f27c\"}.ion-help-circled:before{content:\"\\f142\"}.ion-home:before{content:\"\\f144\"}.ion-icecream:before{content:\"\\f27d\"}.ion-image:before{content:\"\\f147\"}.ion-images:before{content:\"\\f148\"}.ion-information:before{content:\"\\f14a\"}.ion-information-circled:before{content:\"\\f149\"}.ion-ionic:before{content:\"\\f14b\"}.ion-ios-alarm:before{content:\"\\f3c8\"}.ion-ios-alarm-outline:before{content:\"\\f3c7\"}.ion-ios-albums:before{content:\"\\f3ca\"}.ion-ios-albums-outline:before{content:\"\\f3c9\"}.ion-ios-americanfootball:before{content:\"\\f3cc\"}.ion-ios-americanfootball-outline:before{content:\"\\f3cb\"}.ion-ios-analytics:before{content:\"\\f3ce\"}.ion-ios-analytics-outline:before{content:\"\\f3cd\"}.ion-ios-arrow-back:before{content:\"\\f3cf\"}.ion-ios-arrow-down:before{content:\"\\f3d0\"}.ion-ios-arrow-forward:before{content:\"\\f3d1\"}.ion-ios-arrow-left:before{content:\"\\f3d2\"}.ion-ios-arrow-right:before{content:\"\\f3d3\"}.ion-ios-arrow-thin-down:before{content:\"\\f3d4\"}.ion-ios-arrow-thin-left:before{content:\"\\f3d5\"}.ion-ios-arrow-thin-right:before{content:\"\\f3d6\"}.ion-ios-arrow-thin-up:before{content:\"\\f3d7\"}.ion-ios-arrow-up:before{content:\"\\f3d8\"}.ion-ios-at:before{content:\"\\f3da\"}.ion-ios-at-outline:before{content:\"\\f3d9\"}.ion-ios-barcode:before{content:\"\\f3dc\"}.ion-ios-barcode-outline:before{content:\"\\f3db\"}.ion-ios-baseball:before{content:\"\\f3de\"}.ion-ios-baseball-outline:before{content:\"\\f3dd\"}.ion-ios-basketball:before{content:\"\\f3e0\"}.ion-ios-basketball-outline:before{content:\"\\f3df\"}.ion-ios-bell:before{content:\"\\f3e2\"}.ion-ios-bell-outline:before{content:\"\\f3e1\"}.ion-ios-body:before{content:\"\\f3e4\"}.ion-ios-body-outline:before{content:\"\\f3e3\"}.ion-ios-bolt:before{content:\"\\f3e6\"}.ion-ios-bolt-outline:before{content:\"\\f3e5\"}.ion-ios-book:before{content:\"\\f3e8\"}.ion-ios-book-outline:before{content:\"\\f3e7\"}.ion-ios-bookmarks:before{content:\"\\f3ea\"}.ion-ios-bookmarks-outline:before{content:\"\\f3e9\"}.ion-ios-box:before{content:\"\\f3ec\"}.ion-ios-box-outline:before{content:\"\\f3eb\"}.ion-ios-briefcase:before{content:\"\\f3ee\"}.ion-ios-briefcase-outline:before{content:\"\\f3ed\"}.ion-ios-browsers:before{content:\"\\f3f0\"}.ion-ios-browsers-outline:before{content:\"\\f3ef\"}.ion-ios-calculator:before{content:\"\\f3f2\"}.ion-ios-calculator-outline:before{content:\"\\f3f1\"}.ion-ios-calendar:before{content:\"\\f3f4\"}.ion-ios-calendar-outline:before{content:\"\\f3f3\"}.ion-ios-camera:before{content:\"\\f3f6\"}.ion-ios-camera-outline:before{content:\"\\f3f5\"}.ion-ios-cart:before{content:\"\\f3f8\"}.ion-ios-cart-outline:before{content:\"\\f3f7\"}.ion-ios-chatboxes:before{content:\"\\f3fa\"}.ion-ios-chatboxes-outline:before{content:\"\\f3f9\"}.ion-ios-chatbubble:before{content:\"\\f3fc\"}.ion-ios-chatbubble-outline:before{content:\"\\f3fb\"}.ion-ios-checkmark:before{content:\"\\f3ff\"}.ion-ios-checkmark-empty:before{content:\"\\f3fd\"}.ion-ios-checkmark-outline:before{content:\"\\f3fe\"}.ion-ios-circle-filled:before{content:\"\\f400\"}.ion-ios-circle-outline:before{content:\"\\f401\"}.ion-ios-clock:before{content:\"\\f403\"}.ion-ios-clock-outline:before{content:\"\\f402\"}.ion-ios-close:before{content:\"\\f406\"}.ion-ios-close-empty:before{content:\"\\f404\"}.ion-ios-close-outline:before{content:\"\\f405\"}.ion-ios-cloud:before{content:\"\\f40c\"}.ion-ios-cloud-download:before{content:\"\\f408\"}.ion-ios-cloud-download-outline:before{content:\"\\f407\"}.ion-ios-cloud-outline:before{content:\"\\f409\"}.ion-ios-cloud-upload:before{content:\"\\f40b\"}.ion-ios-cloud-upload-outline:before{content:\"\\f40a\"}.ion-ios-cloudy:before{content:\"\\f410\"}.ion-ios-cloudy-night:before{content:\"\\f40e\"}.ion-ios-cloudy-night-outline:before{content:\"\\f40d\"}.ion-ios-cloudy-outline:before{content:\"\\f40f\"}.ion-ios-cog:before{content:\"\\f412\"}.ion-ios-cog-outline:before{content:\"\\f411\"}.ion-ios-color-filter:before{content:\"\\f414\"}.ion-ios-color-filter-outline:before{content:\"\\f413\"}.ion-ios-color-wand:before{content:\"\\f416\"}.ion-ios-color-wand-outline:before{content:\"\\f415\"}.ion-ios-compose:before{content:\"\\f418\"}.ion-ios-compose-outline:before{content:\"\\f417\"}.ion-ios-contact:before{content:\"\\f41a\"}.ion-ios-contact-outline:before{content:\"\\f419\"}.ion-ios-copy:before{content:\"\\f41c\"}.ion-ios-copy-outline:before{content:\"\\f41b\"}.ion-ios-crop:before{content:\"\\f41e\"}.ion-ios-crop-strong:before{content:\"\\f41d\"}.ion-ios-download:before{content:\"\\f420\"}.ion-ios-download-outline:before{content:\"\\f41f\"}.ion-ios-drag:before{content:\"\\f421\"}.ion-ios-email:before{content:\"\\f423\"}.ion-ios-email-outline:before{content:\"\\f422\"}.ion-ios-eye:before{content:\"\\f425\"}.ion-ios-eye-outline:before{content:\"\\f424\"}.ion-ios-fastforward:before{content:\"\\f427\"}.ion-ios-fastforward-outline:before{content:\"\\f426\"}.ion-ios-filing:before{content:\"\\f429\"}.ion-ios-filing-outline:before{content:\"\\f428\"}.ion-ios-film:before{content:\"\\f42b\"}.ion-ios-film-outline:before{content:\"\\f42a\"}.ion-ios-flag:before{content:\"\\f42d\"}.ion-ios-flag-outline:before{content:\"\\f42c\"}.ion-ios-flame:before{content:\"\\f42f\"}.ion-ios-flame-outline:before{content:\"\\f42e\"}.ion-ios-flask:before{content:\"\\f431\"}.ion-ios-flask-outline:before{content:\"\\f430\"}.ion-ios-flower:before{content:\"\\f433\"}.ion-ios-flower-outline:before{content:\"\\f432\"}.ion-ios-folder:before{content:\"\\f435\"}.ion-ios-folder-outline:before{content:\"\\f434\"}.ion-ios-football:before{content:\"\\f437\"}.ion-ios-football-outline:before{content:\"\\f436\"}.ion-ios-game-controller-a:before{content:\"\\f439\"}.ion-ios-game-controller-a-outline:before{content:\"\\f438\"}.ion-ios-game-controller-b:before{content:\"\\f43b\"}.ion-ios-game-controller-b-outline:before{content:\"\\f43a\"}.ion-ios-gear:before{content:\"\\f43d\"}.ion-ios-gear-outline:before{content:\"\\f43c\"}.ion-ios-glasses:before{content:\"\\f43f\"}.ion-ios-glasses-outline:before{content:\"\\f43e\"}.ion-ios-grid-view:before{content:\"\\f441\"}.ion-ios-grid-view-outline:before{content:\"\\f440\"}.ion-ios-heart:before{content:\"\\f443\"}.ion-ios-heart-outline:before{content:\"\\f442\"}.ion-ios-help:before{content:\"\\f446\"}.ion-ios-help-empty:before{content:\"\\f444\"}.ion-ios-help-outline:before{content:\"\\f445\"}.ion-ios-home:before{content:\"\\f448\"}.ion-ios-home-outline:before{content:\"\\f447\"}.ion-ios-infinite:before{content:\"\\f44a\"}.ion-ios-infinite-outline:before{content:\"\\f449\"}.ion-ios-information:before{content:\"\\f44d\"}.ion-ios-information-empty:before{content:\"\\f44b\"}.ion-ios-information-outline:before{content:\"\\f44c\"}.ion-ios-ionic-outline:before{content:\"\\f44e\"}.ion-ios-keypad:before{content:\"\\f450\"}.ion-ios-keypad-outline:before{content:\"\\f44f\"}.ion-ios-lightbulb:before{content:\"\\f452\"}.ion-ios-lightbulb-outline:before{content:\"\\f451\"}.ion-ios-list:before{content:\"\\f454\"}.ion-ios-list-outline:before{content:\"\\f453\"}.ion-ios-location:before{content:\"\\f456\"}.ion-ios-location-outline:before{content:\"\\f455\"}.ion-ios-locked:before{content:\"\\f458\"}.ion-ios-locked-outline:before{content:\"\\f457\"}.ion-ios-loop:before{content:\"\\f45a\"}.ion-ios-loop-strong:before{content:\"\\f459\"}.ion-ios-medical:before{content:\"\\f45c\"}.ion-ios-medical-outline:before{content:\"\\f45b\"}.ion-ios-medkit:before{content:\"\\f45e\"}.ion-ios-medkit-outline:before{content:\"\\f45d\"}.ion-ios-mic:before{content:\"\\f461\"}.ion-ios-mic-off:before{content:\"\\f45f\"}.ion-ios-mic-outline:before{content:\"\\f460\"}.ion-ios-minus:before{content:\"\\f464\"}.ion-ios-minus-empty:before{content:\"\\f462\"}.ion-ios-minus-outline:before{content:\"\\f463\"}.ion-ios-monitor:before{content:\"\\f466\"}.ion-ios-monitor-outline:before{content:\"\\f465\"}.ion-ios-moon:before{content:\"\\f468\"}.ion-ios-moon-outline:before{content:\"\\f467\"}.ion-ios-more:before{content:\"\\f46a\"}.ion-ios-more-outline:before{content:\"\\f469\"}.ion-ios-musical-note:before{content:\"\\f46b\"}.ion-ios-musical-notes:before{content:\"\\f46c\"}.ion-ios-navigate:before{content:\"\\f46e\"}.ion-ios-navigate-outline:before{content:\"\\f46d\"}.ion-ios-nutrition:before{content:\"\\f470\"}.ion-ios-nutrition-outline:before{content:\"\\f46f\"}.ion-ios-paper:before{content:\"\\f472\"}.ion-ios-paper-outline:before{content:\"\\f471\"}.ion-ios-paperplane:before{content:\"\\f474\"}.ion-ios-paperplane-outline:before{content:\"\\f473\"}.ion-ios-partlysunny:before{content:\"\\f476\"}.ion-ios-partlysunny-outline:before{content:\"\\f475\"}.ion-ios-pause:before{content:\"\\f478\"}.ion-ios-pause-outline:before{content:\"\\f477\"}.ion-ios-paw:before{content:\"\\f47a\"}.ion-ios-paw-outline:before{content:\"\\f479\"}.ion-ios-people:before{content:\"\\f47c\"}.ion-ios-people-outline:before{content:\"\\f47b\"}.ion-ios-person:before{content:\"\\f47e\"}.ion-ios-person-outline:before{content:\"\\f47d\"}.ion-ios-personadd:before{content:\"\\f480\"}.ion-ios-personadd-outline:before{content:\"\\f47f\"}.ion-ios-photos:before{content:\"\\f482\"}.ion-ios-photos-outline:before{content:\"\\f481\"}.ion-ios-pie:before{content:\"\\f484\"}.ion-ios-pie-outline:before{content:\"\\f483\"}.ion-ios-pint:before{content:\"\\f486\"}.ion-ios-pint-outline:before{content:\"\\f485\"}.ion-ios-play:before{content:\"\\f488\"}.ion-ios-play-outline:before{content:\"\\f487\"}.ion-ios-plus:before{content:\"\\f48b\"}.ion-ios-plus-empty:before{content:\"\\f489\"}.ion-ios-plus-outline:before{content:\"\\f48a\"}.ion-ios-pricetag:before{content:\"\\f48d\"}.ion-ios-pricetag-outline:before{content:\"\\f48c\"}.ion-ios-pricetags:before{content:\"\\f48f\"}.ion-ios-pricetags-outline:before{content:\"\\f48e\"}.ion-ios-printer:before{content:\"\\f491\"}.ion-ios-printer-outline:before{content:\"\\f490\"}.ion-ios-pulse:before{content:\"\\f493\"}.ion-ios-pulse-strong:before{content:\"\\f492\"}.ion-ios-rainy:before{content:\"\\f495\"}.ion-ios-rainy-outline:before{content:\"\\f494\"}.ion-ios-recording:before{content:\"\\f497\"}.ion-ios-recording-outline:before{content:\"\\f496\"}.ion-ios-redo:before{content:\"\\f499\"}.ion-ios-redo-outline:before{content:\"\\f498\"}.ion-ios-refresh:before{content:\"\\f49c\"}.ion-ios-refresh-empty:before{content:\"\\f49a\"}.ion-ios-refresh-outline:before{content:\"\\f49b\"}.ion-ios-reload:before{content:\"\\f49d\"}.ion-ios-reverse-camera:before{content:\"\\f49f\"}.ion-ios-reverse-camera-outline:before{content:\"\\f49e\"}.ion-ios-rewind:before{content:\"\\f4a1\"}.ion-ios-rewind-outline:before{content:\"\\f4a0\"}.ion-ios-rose:before{content:\"\\f4a3\"}.ion-ios-rose-outline:before{content:\"\\f4a2\"}.ion-ios-search:before{content:\"\\f4a5\"}.ion-ios-search-strong:before{content:\"\\f4a4\"}.ion-ios-settings:before{content:\"\\f4a7\"}.ion-ios-settings-strong:before{content:\"\\f4a6\"}.ion-ios-shuffle:before{content:\"\\f4a9\"}.ion-ios-shuffle-strong:before{content:\"\\f4a8\"}.ion-ios-skipbackward:before{content:\"\\f4ab\"}.ion-ios-skipbackward-outline:before{content:\"\\f4aa\"}.ion-ios-skipforward:before{content:\"\\f4ad\"}.ion-ios-skipforward-outline:before{content:\"\\f4ac\"}.ion-ios-snowy:before{content:\"\\f4ae\"}.ion-ios-speedometer:before{content:\"\\f4b0\"}.ion-ios-speedometer-outline:before{content:\"\\f4af\"}.ion-ios-star:before{content:\"\\f4b3\"}.ion-ios-star-half:before{content:\"\\f4b1\"}.ion-ios-star-outline:before{content:\"\\f4b2\"}.ion-ios-stopwatch:before{content:\"\\f4b5\"}.ion-ios-stopwatch-outline:before{content:\"\\f4b4\"}.ion-ios-sunny:before{content:\"\\f4b7\"}.ion-ios-sunny-outline:before{content:\"\\f4b6\"}.ion-ios-telephone:before{content:\"\\f4b9\"}.ion-ios-telephone-outline:before{content:\"\\f4b8\"}.ion-ios-tennisball:before{content:\"\\f4bb\"}.ion-ios-tennisball-outline:before{content:\"\\f4ba\"}.ion-ios-thunderstorm:before{content:\"\\f4bd\"}.ion-ios-thunderstorm-outline:before{content:\"\\f4bc\"}.ion-ios-time:before{content:\"\\f4bf\"}.ion-ios-time-outline:before{content:\"\\f4be\"}.ion-ios-timer:before{content:\"\\f4c1\"}.ion-ios-timer-outline:before{content:\"\\f4c0\"}.ion-ios-toggle:before{content:\"\\f4c3\"}.ion-ios-toggle-outline:before{content:\"\\f4c2\"}.ion-ios-trash:before{content:\"\\f4c5\"}.ion-ios-trash-outline:before{content:\"\\f4c4\"}.ion-ios-undo:before{content:\"\\f4c7\"}.ion-ios-undo-outline:before{content:\"\\f4c6\"}.ion-ios-unlocked:before{content:\"\\f4c9\"}.ion-ios-unlocked-outline:before{content:\"\\f4c8\"}.ion-ios-upload:before{content:\"\\f4cb\"}.ion-ios-upload-outline:before{content:\"\\f4ca\"}.ion-ios-videocam:before{content:\"\\f4cd\"}.ion-ios-videocam-outline:before{content:\"\\f4cc\"}.ion-ios-volume-high:before{content:\"\\f4ce\"}.ion-ios-volume-low:before{content:\"\\f4cf\"}.ion-ios-wineglass:before{content:\"\\f4d1\"}.ion-ios-wineglass-outline:before{content:\"\\f4d0\"}.ion-ios-world:before{content:\"\\f4d3\"}.ion-ios-world-outline:before{content:\"\\f4d2\"}.ion-ipad:before{content:\"\\f1f9\"}.ion-iphone:before{content:\"\\f1fa\"}.ion-ipod:before{content:\"\\f1fb\"}.ion-jet:before{content:\"\\f295\"}.ion-key:before{content:\"\\f296\"}.ion-knife:before{content:\"\\f297\"}.ion-laptop:before{content:\"\\f1fc\"}.ion-leaf:before{content:\"\\f1fd\"}.ion-levels:before{content:\"\\f298\"}.ion-lightbulb:before{content:\"\\f299\"}.ion-link:before{content:\"\\f1fe\"}.ion-load-a:before{content:\"\\f29a\"}.ion-load-b:before{content:\"\\f29b\"}.ion-load-c:before{content:\"\\f29c\"}.ion-load-d:before{content:\"\\f29d\"}.ion-location:before{content:\"\\f1ff\"}.ion-lock-combination:before{content:\"\\f4d4\"}.ion-locked:before{content:\"\\f200\"}.ion-log-in:before{content:\"\\f29e\"}.ion-log-out:before{content:\"\\f29f\"}.ion-loop:before{content:\"\\f201\"}.ion-magnet:before{content:\"\\f2a0\"}.ion-male:before{content:\"\\f2a1\"}.ion-man:before{content:\"\\f202\"}.ion-map:before{content:\"\\f203\"}.ion-medkit:before{content:\"\\f2a2\"}.ion-merge:before{content:\"\\f33f\"}.ion-mic-a:before{content:\"\\f204\"}.ion-mic-b:before{content:\"\\f205\"}.ion-mic-c:before{content:\"\\f206\"}.ion-minus:before{content:\"\\f209\"}.ion-minus-circled:before{content:\"\\f207\"}.ion-minus-round:before{content:\"\\f208\"}.ion-model-s:before{content:\"\\f2c1\"}.ion-monitor:before{content:\"\\f20a\"}.ion-more:before{content:\"\\f20b\"}.ion-mouse:before{content:\"\\f340\"}.ion-music-note:before{content:\"\\f20c\"}.ion-navicon:before{content:\"\\f20e\"}.ion-navicon-round:before{content:\"\\f20d\"}.ion-navigate:before{content:\"\\f2a3\"}.ion-network:before{content:\"\\f341\"}.ion-no-smoking:before{content:\"\\f2c2\"}.ion-nuclear:before{content:\"\\f2a4\"}.ion-outlet:before{content:\"\\f342\"}.ion-paintbrush:before{content:\"\\f4d5\"}.ion-paintbucket:before{content:\"\\f4d6\"}.ion-paper-airplane:before{content:\"\\f2c3\"}.ion-paperclip:before{content:\"\\f20f\"}.ion-pause:before{content:\"\\f210\"}.ion-person:before{content:\"\\f213\"}.ion-person-add:before{content:\"\\f211\"}.ion-person-stalker:before{content:\"\\f212\"}.ion-pie-graph:before{content:\"\\f2a5\"}.ion-pin:before{content:\"\\f2a6\"}.ion-pinpoint:before{content:\"\\f2a7\"}.ion-pizza:before{content:\"\\f2a8\"}.ion-plane:before{content:\"\\f214\"}.ion-planet:before{content:\"\\f343\"}.ion-play:before{content:\"\\f215\"}.ion-playstation:before{content:\"\\f30a\"}.ion-plus:before{content:\"\\f218\"}.ion-plus-circled:before{content:\"\\f216\"}.ion-plus-round:before{content:\"\\f217\"}.ion-podium:before{content:\"\\f344\"}.ion-pound:before{content:\"\\f219\"}.ion-power:before{content:\"\\f2a9\"}.ion-pricetag:before{content:\"\\f2aa\"}.ion-pricetags:before{content:\"\\f2ab\"}.ion-printer:before{content:\"\\f21a\"}.ion-pull-request:before{content:\"\\f345\"}.ion-qr-scanner:before{content:\"\\f346\"}.ion-quote:before{content:\"\\f347\"}.ion-radio-waves:before{content:\"\\f2ac\"}.ion-record:before{content:\"\\f21b\"}.ion-refresh:before{content:\"\\f21c\"}.ion-reply:before{content:\"\\f21e\"}.ion-reply-all:before{content:\"\\f21d\"}.ion-ribbon-a:before{content:\"\\f348\"}.ion-ribbon-b:before{content:\"\\f349\"}.ion-sad:before{content:\"\\f34a\"}.ion-sad-outline:before{content:\"\\f4d7\"}.ion-scissors:before{content:\"\\f34b\"}.ion-search:before{content:\"\\f21f\"}.ion-settings:before{content:\"\\f2ad\"}.ion-share:before{content:\"\\f220\"}.ion-shuffle:before{content:\"\\f221\"}.ion-skip-backward:before{content:\"\\f222\"}.ion-skip-forward:before{content:\"\\f223\"}.ion-social-android:before{content:\"\\f225\"}.ion-social-android-outline:before{content:\"\\f224\"}.ion-social-angular:before{content:\"\\f4d9\"}.ion-social-angular-outline:before{content:\"\\f4d8\"}.ion-social-apple:before{content:\"\\f227\"}.ion-social-apple-outline:before{content:\"\\f226\"}.ion-social-bitcoin:before{content:\"\\f2af\"}.ion-social-bitcoin-outline:before{content:\"\\f2ae\"}.ion-social-buffer:before{content:\"\\f229\"}.ion-social-buffer-outline:before{content:\"\\f228\"}.ion-social-chrome:before{content:\"\\f4db\"}.ion-social-chrome-outline:before{content:\"\\f4da\"}.ion-social-codepen:before{content:\"\\f4dd\"}.ion-social-codepen-outline:before{content:\"\\f4dc\"}.ion-social-css3:before{content:\"\\f4df\"}.ion-social-css3-outline:before{content:\"\\f4de\"}.ion-social-designernews:before{content:\"\\f22b\"}.ion-social-designernews-outline:before{content:\"\\f22a\"}.ion-social-dribbble:before{content:\"\\f22d\"}.ion-social-dribbble-outline:before{content:\"\\f22c\"}.ion-social-dropbox:before{content:\"\\f22f\"}.ion-social-dropbox-outline:before{content:\"\\f22e\"}.ion-social-euro:before{content:\"\\f4e1\"}.ion-social-euro-outline:before{content:\"\\f4e0\"}.ion-social-facebook:before{content:\"\\f231\"}.ion-social-facebook-outline:before{content:\"\\f230\"}.ion-social-foursquare:before{content:\"\\f34d\"}.ion-social-foursquare-outline:before{content:\"\\f34c\"}.ion-social-freebsd-devil:before{content:\"\\f2c4\"}.ion-social-github:before{content:\"\\f233\"}.ion-social-github-outline:before{content:\"\\f232\"}.ion-social-google:before{content:\"\\f34f\"}.ion-social-google-outline:before{content:\"\\f34e\"}.ion-social-googleplus:before{content:\"\\f235\"}.ion-social-googleplus-outline:before{content:\"\\f234\"}.ion-social-hackernews:before{content:\"\\f237\"}.ion-social-hackernews-outline:before{content:\"\\f236\"}.ion-social-html5:before{content:\"\\f4e3\"}.ion-social-html5-outline:before{content:\"\\f4e2\"}.ion-social-instagram:before{content:\"\\f351\"}.ion-social-instagram-outline:before{content:\"\\f350\"}.ion-social-javascript:before{content:\"\\f4e5\"}.ion-social-javascript-outline:before{content:\"\\f4e4\"}.ion-social-linkedin:before{content:\"\\f239\"}.ion-social-linkedin-outline:before{content:\"\\f238\"}.ion-social-markdown:before{content:\"\\f4e6\"}.ion-social-nodejs:before{content:\"\\f4e7\"}.ion-social-octocat:before{content:\"\\f4e8\"}.ion-social-pinterest:before{content:\"\\f2b1\"}.ion-social-pinterest-outline:before{content:\"\\f2b0\"}.ion-social-python:before{content:\"\\f4e9\"}.ion-social-reddit:before{content:\"\\f23b\"}.ion-social-reddit-outline:before{content:\"\\f23a\"}.ion-social-rss:before{content:\"\\f23d\"}.ion-social-rss-outline:before{content:\"\\f23c\"}.ion-social-sass:before{content:\"\\f4ea\"}.ion-social-skype:before{content:\"\\f23f\"}.ion-social-skype-outline:before{content:\"\\f23e\"}.ion-social-snapchat:before{content:\"\\f4ec\"}.ion-social-snapchat-outline:before{content:\"\\f4eb\"}.ion-social-tumblr:before{content:\"\\f241\"}.ion-social-tumblr-outline:before{content:\"\\f240\"}.ion-social-tux:before{content:\"\\f2c5\"}.ion-social-twitch:before{content:\"\\f4ee\"}.ion-social-twitch-outline:before{content:\"\\f4ed\"}.ion-social-twitter:before{content:\"\\f243\"}.ion-social-twitter-outline:before{content:\"\\f242\"}.ion-social-usd:before{content:\"\\f353\"}.ion-social-usd-outline:before{content:\"\\f352\"}.ion-social-vimeo:before{content:\"\\f245\"}.ion-social-vimeo-outline:before{content:\"\\f244\"}.ion-social-whatsapp:before{content:\"\\f4f0\"}.ion-social-whatsapp-outline:before{content:\"\\f4ef\"}.ion-social-windows:before{content:\"\\f247\"}.ion-social-windows-outline:before{content:\"\\f246\"}.ion-social-wordpress:before{content:\"\\f249\"}.ion-social-wordpress-outline:before{content:\"\\f248\"}.ion-social-yahoo:before{content:\"\\f24b\"}.ion-social-yahoo-outline:before{content:\"\\f24a\"}.ion-social-yen:before{content:\"\\f4f2\"}.ion-social-yen-outline:before{content:\"\\f4f1\"}.ion-social-youtube:before{content:\"\\f24d\"}.ion-social-youtube-outline:before{content:\"\\f24c\"}.ion-soup-can:before{content:\"\\f4f4\"}.ion-soup-can-outline:before{content:\"\\f4f3\"}.ion-speakerphone:before{content:\"\\f2b2\"}.ion-speedometer:before{content:\"\\f2b3\"}.ion-spoon:before{content:\"\\f2b4\"}.ion-star:before{content:\"\\f24e\"}.ion-stats-bars:before{content:\"\\f2b5\"}.ion-steam:before{content:\"\\f30b\"}.ion-stop:before{content:\"\\f24f\"}.ion-thermometer:before{content:\"\\f2b6\"}.ion-thumbsdown:before{content:\"\\f250\"}.ion-thumbsup:before{content:\"\\f251\"}.ion-toggle:before{content:\"\\f355\"}.ion-toggle-filled:before{content:\"\\f354\"}.ion-transgender:before{content:\"\\f4f5\"}.ion-trash-a:before{content:\"\\f252\"}.ion-trash-b:before{content:\"\\f253\"}.ion-trophy:before{content:\"\\f356\"}.ion-tshirt:before{content:\"\\f4f7\"}.ion-tshirt-outline:before{content:\"\\f4f6\"}.ion-umbrella:before{content:\"\\f2b7\"}.ion-university:before{content:\"\\f357\"}.ion-unlocked:before{content:\"\\f254\"}.ion-upload:before{content:\"\\f255\"}.ion-usb:before{content:\"\\f2b8\"}.ion-videocamera:before{content:\"\\f256\"}.ion-volume-high:before{content:\"\\f257\"}.ion-volume-low:before{content:\"\\f258\"}.ion-volume-medium:before{content:\"\\f259\"}.ion-volume-mute:before{content:\"\\f25a\"}.ion-wand:before{content:\"\\f358\"}.ion-waterdrop:before{content:\"\\f25b\"}.ion-wifi:before{content:\"\\f25c\"}.ion-wineglass:before{content:\"\\f2b9\"}.ion-woman:before{content:\"\\f25d\"}.ion-wrench:before{content:\"\\f2ba\"}.ion-xbox:before{content:\"\\f30c\"}","categories":[],"tags":[]},{"title":"","slug":"Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/iconfont","date":"2018-08-02T17:28:42.000Z","updated":"2018-08-02T17:28:42.000Z","comments":true,"path":"2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/iconfont/","link":"","permalink":"http://io.stelawliet.top/2018/08/03/Java/concurrent/assets/Tomcat组成与工作原理 - 掘金_files/iconfont/","excerpt":"","text":"@font-face {font-family: \"fengwei\"; src: url('iconfont.eot?t=1510903272184'); /* IE9*/ src: url('iconfont.eot?t=1510903272184#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAq0AAsAAAAAD1gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kgMY21hcAAAAYAAAAC5AAACVJuNyfRnbHlmAAACPAAABf0AAAe4kpWOu2hlYWQAAAg8AAAALwAAADYPiKHNaGhlYQAACGwAAAAcAAAAJAfeA5FobXR4AAAIiAAAABQAAABAP+kAAGxvY2EAAAicAAAAIgAAACIQYA5AbWF4cAAACMAAAAAfAAAAIAEfAGxuYW1lAAAI4AAAAUsAAAJhtIeV/HBvc3QAAAosAAAAhQAAAK5NRmfseJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/s84gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDyTZm7438AQw9zA0AAUZgTJAQAnogyOeJzFkdkNg0AMRGeBkINjRQ6EQEoFqSl1UEO+UlRqmTbIeE0+UgFGDzFe5Fl5AOwA5OIhCiC8EWD1Ujekfo5T6hd4Stc4INP3zMieA6dlUXdmxU5qTOpXQX/XuOKux1SmWYUcS+w15ai5lc4btIg6LrFZhe2s/6tO78+qtBXMK7oiK0d7BGvHsmPjWH5sHcuV0dG+wc7R5sGzowzAi6M0wKtjefPmwDx7x27HwYF5jg7Mc3IQvwkmLb8AAAB4nG1VfYjcRBSfN7NJ9uN2s9nNx95ukr3dXDY99257u5vbVOT2rq31tFe1UoVWbWttrYJasShVesqJPSgopSCtgiJtsX6AiiIVlCL1FEWxoPiHQou0Wuo/UrT+oeht6pv0KggmM2+SeTPvZd77vV+IQMils+w4K5A8WUKa5FqylhAQ61DNUAsqnt+gddAqgmaoGeY5XkVyqg02DkZVVPVWx68ZoiTKkAEb2pVWx2tQD8b8Lr0GWroF0F8qrsu5Zo7th2TBs+fC1fQIaGXHlLsj4Q3DE2prIB/f1ZfL9edyz8ZFQYhTGpMz8KChJ4REUgxfEeSidrw8RMvQ1+8V12xID5RyW/b6OyzXSADMzkK+NJB5bUIpKthmino+1y9l0/FCMe0MqrDrXKqQ77NqPxG8GJ71bzbHBJIiMp6XCF0IGuBlQLIh31Ycpa05lBw9JQinjkbykbvx+vcNJbwbnoZjWyJbKPbSP4hECsTFmHkNcKpOGtotXVNUUaqgZaULbRhtdsGvec0MqDpblo6V8rFYeBcsSLpl6b0duglg6lQdqNcHsNNDw7nCNsfSQ/GyBv7SrXAP1CfrwAW6jUW+76R/kj6iEI30o/egE6CPmlfFZBggeZCvjFUk7PTtYRXUXNEpLMl428NPXwJYXoI7w1cOwG+hTMvLUDOU1kBTWifCB7zD8GKotA60uAshitcgxksgSZIhOaIT4rbHHK0NFUWqcBca7zhFt8xfHA1n6HXvhQ9ugT3hDO/z8x+N/s6SvQ8+oVPN+dH50Svf/jX9GSMoYR4UQvJo5MrtSobrSU/Sk7027zAdHqPm+jmIr3iHnt/x6o6jD3224p3P188RGtk5Sn8nKhnk0a/5nVYZJLFa8ycAY+93AqZUeOSdilLhSPXo95tle0Q+c0YetjNbww9129a/hbhhWUa4D3byEY5tlkds+ewZvvBusIdtCI9TG8yrzJ6JArjbSLDn6SWe96DWCRBGHR/zj22si8A3dAkxJUodQ7OhjKUh3c+W3V56Qk7mWC0lMrrxmY0UxPhgPKMmgMrJF9asBLG8YUy+OZcdsoTlA9poccP27RvqbmWyr5AVEmo6L93buq3Gz4052Yc56ZLVmI0uGOhdxNNzJOuiV+UfESDcRMlAFIpVDu+Ojo82GLWO0TJs0CS9FXg8QqjDbWjBBvpmcWWp3kk4tYqZW7U0m8tVSwULgsnu1WAVSv+nu3qGqyZgvNEYh0g+moXs8EMTeXelL49vc6t5UOSmncoCKEm7KSv/q4xUkLpiA2UU40s99iPLIL4JNCAKKDG0wBjrEB7qmkiF9L5tg9P2LXBwFaWr4ODa8vTgtn10j7FTjtf9U+F9LgWgLrxwyq/H5Z2LmHmcUax9M7K6FGoiz48BGBAXc+jy9KkIIuqnnOy58SnRpEoKlqpdFYiq9j6Coe4QNvpxSqGmODV+Luukwm807ZI2rj1X5qqhRW6YoQukQTaRzegJKxP50uBg0LFAxSo6RphGOROlJmdQUUVdawK64AW4mlMqThhNvd3qjPk13NDBDQhxXcXFmqobraAZ8Dnfo5sSiWRZi8dSMWYmrcP2TTYzzeszALqSTkAsttr3WbA/ODwm+OcvPzA/zYR4QlYlIW2mrSNWtGUqqyupJAixad+H7xJSUrOSgiQwe619xDQZ2p1KqYoOIAKLrUJDzPePBM8Ev/Kxs6fTF2MxNROXhT77eus/O3CDwDcs8grG5yn6BUaqj2SxggvIAkpbMRQsVS3IS4BkHE3kA3bhjvfDj2HiuQuvhw+PjIzcse7krV/R/b0faHVF7yJ9YvSa3rvX0r29p+laPueGQhX+vuLjDD0dMaRNyvh3I+CwShWpAVm5km/boIoucmSekwXPuuvYwImiKrK3btzd+yVjZLDBl7uf101z4Q266Z7wgTVI0ZP1OshrOBljo7vCuXShVEjDbjDrVv9C+PKiZvryUhLV7Cw7xGbxr6NyvkPAKYjnxT+EqwSGcoieKA0CDJZ6k9EIbz32OJvF94XZy/OMj+Hk1q1wAk/2Dz9gZ3UAAAB4nGNgZGBgAGKZl/fb4vltvjJwszCAwDWTdS8Q9P8GFgbmBiCXg4EJJAoAS9MLawB4nGNgZGBgbvjfwBDDwgACQJKRARUIAABHFgJ5eJxjYWBgYH7JwMDCQB4GAD43ASkAAAAAAHYAnADaAQ4BOAFcAZoB2AJMAnYCqgM6A2wDsgPcAAB4nGNgZGBgEGBIYGBlAAEmIOYCQgaG/2A+AwATzQGMAHicXZE7TsNAEIZ/k5dwJAoQVBQrIVEEyXmUEV2kpE+RjiJx1o4j22utN4lSch5OwAk4AS0Np6DjjzMU2Kud/eafh2a9AK7xBQ/n75b7zB469M58Qb4XbpAfhJvknnALXQyF29SfhX08YSLcxQ1ydvCal/R6eBX2cIU34Qvyu3CD/CHcJH8Kt3CHb+E29R9hHwuvI9zFo/fiT6xeOr1Wq6NKQpNHJnd+pPP4oJO5jnfp0oonx0LbMjG5GgYDUWY61/avR7mPR85FKrImU1M202lqVGHNVocu2DhXjPv9SPQgNBlHmsBCYwlHu4bCCkfaBCEMf0ZUWce8iPEcMQ48E8xpY+yQstLWYv+9Ba1FSTp1UnyEAINazqzyTnn1OUrsmTWi6lijuC37ZKSpTKY5Q0pWKKrYlkpIPcCmqiowRp8rquUH1Q2zXzkga4kAeJxtyFsOgjAQRuH+XIpWUVyTS3AFBQaYUDoEhsDy1fjq93RyTGJ+nPmvQoIUGXJYFDjhDIcLrihxwx0VHgZHxrETu/sQSPN9YaW8XXynrpHPapQl2iC9bGpnWlaJxUqqHPss8Eip+m/E0R3spaFZVrW1bP2g5VOmmiO1r8HPZMwbZsEmzAAAAA==') format('woff'), url('iconfont.ttf?t=1510903272184') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/ url('iconfont.svg?t=1510903272184#fengwei') format('svg'); /* iOS 4.1- */ } .fengwei { font-family:\"fengwei\" !important; font-size:16px; font-style:normal; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .fw-info:before { content: \"\\e60b\"; } .fw-wallet:before { content: \"\\e60c\"; } .fw-write:before { content: \"\\e60d\"; } .fw-draft:before { content: \"\\e60e\"; } .fw-collection:before { content: \"\\e60f\"; } .fw-logout:before { content: \"\\e611\"; } .fw-person:before { content: \"\\e612\"; } .fw-setting:before { content: \"\\e613\"; } .fw-like:before { content: \"\\e614\"; } .fw-tag:before { content: \"\\e615\"; } .fw-link:before { content: \"\\e616\"; } .fw-xiaocepost:before { content: \"\\e618\"; } .fw-bought:before { content: \"\\e61a\"; } .fw-xiaoce:before { content: \"\\e61b\"; }","categories":[],"tags":[]},{"title":"bean生命周期测试","slug":"Java/spring/annotation/bean生命周期测试","date":"2018-08-02T12:20:45.000Z","updated":"2018-08-03T01:18:58.000Z","comments":true,"path":"2018/08/02/Java/spring/annotation/bean生命周期测试/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Java/spring/annotation/bean生命周期测试/","excerpt":"","text":"Bean初始化和销毁生命周期测试可自定义的生命周期函数 实现BeanPostProcessor 的postProcessBeforeInitialization和postProcessAfterInitialization 定义@Bean注解的 initMethod和deatroyMethod(值对应被注解类的函数名) @javax.annotation的@PostConstruct和@PreDestroy注解 实现接口InitializingBean,DisposableBean的afterPropertiesSet和destroy方法 创建测试的MyBean类 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public class MyBean implements InitializingBean, DisposableBean &#123; @Value(\"$&#123;myBean.name&#125;\") private String name; @Value(\"$&#123;myBean.age&#125;\") private int age; public MyBean(String name) &#123; System.out.println(\"private myBean constructor\"); &#125; public MyBean(String name, int age) &#123; this.name = name; this.age = age; System.out.println(\"public myBean constructor(...)\"); &#125; public MyBean() &#123; System.out.println(\"public myBean constructor()\"); &#125; //@Bean initMethod public void beanInit() &#123; System.out.println(\"myBean Bean init()..\"); &#125; //@Bean destroyMethod public void beanDestroy() &#123; System.out.println(\"myBean Bean destroy()..\"); &#125; //impl InitializingBean @Override public void afterPropertiesSet() throws Exception &#123; System.out.println(\"InitializingBean.afterPropertiesSet() \"); &#125; //impl DisposableBean @Override public void destroy() throws Exception &#123; System.out.println(\"DisposableBean.destroy()\"); &#125; @PostConstruct public void PostConstruct() &#123; System.out.println(\"@PostConstruct\"); &#125; @PreDestroy public void PreDestroy() &#123; System.out.println(\"@PreDestroy\"); &#125; @Override public String toString() &#123; final StringBuilder sb = new StringBuilder(\"myBean&#123;\"); sb.append(\"name='\").append(name).append('\\''); sb.append(\", age=\").append(age); sb.append('&#125;'); return sb.toString(); &#125;&#125; 创建实现BeanPostProcessor的MyBeanPostProcessor类12345678910111213141516171819@Componentpublic class MyBeanPostProcessor implements BeanPostProcessor &#123; @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; if (beanName.equals(\"myBean\"))&#123; System.out.println(\"BeanPostProcessor.postProcessBeforeInitialization()\"); &#125; return bean; &#125; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; if (beanName.equals(\"myBean\"))&#123; System.out.println(\"BeanPostProcessor.postProcessAfterInitialization()\"); &#125; return bean; &#125;&#125; 配置类1234567891011121314151617@Configuration@ComponentScan(\"resource\")@PropertySource(\"classpath:/test.properties\")public class ConfLifeCycle &#123; @Bean(initMethod = \"beanInit\",destroyMethod = \"beanDestroy\") public MyBean myBean()&#123; return new MyBean(); &#125; public static void main(String[] args) &#123; AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(ConfLifeCycle.class); MyBean bean = context.getBean(MyBean.class); System.out.println(\"bean = \" + bean); context.close(); &#125;&#125; 打印结果1234567891011121314151617八月 02, 2018 8:35:36 下午 org.springframework.context.support.AbstractApplicationContext prepareRefresh信息: Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3581c5f3: startup date [Thu Aug 02 20:35:36 CST 2018]; root of context hierarchy八月 02, 2018 8:35:36 下午 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor &lt;init&gt;信息: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring@Bean bodypublic myBean constructor()BeanPostProcessor.postProcessBeforeInitialization()@PostConstructInitializingBean.afterPropertiesSet() @Bean.init()BeanPostProcessor.postProcessAfterInitialization()bean = myBean&#123;name='@@', age=122&#125;八月 02, 2018 8:35:36 下午 org.springframework.context.support.AbstractApplicationContext doClose信息: Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@3581c5f3: startup date [Thu Aug 02 20:35:36 CST 2018]; root of context hierarchy@PreDestroyDisposableBean.destroy()@Bean.destroy() 从打印结果看执行顺序为123456789101112//容器初始化调用无参构造创建实例public myBean constructor() BeanPostProcessor.postProcessBeforeInitialization()@PostConstructInitializingBean.afterPropertiesSet() @Bean.init()BeanPostProcessor.postProcessAfterInitialization()---------------------//容器关闭 @PreDestroyDisposableBean.destroy()@Bean.destroy() 初始化顺序 BeanPostProcessor.postProcessBeforeInitialization()的初始化最早. java jsr注解规范的@PostConstruct 实现InitializingBean接口的afterPropertiesSet() @Bean注解中定义的`@Bean.init()` 所有的自定义初始化函数完成后BeanPostProcessor.postProcessAfterInitialization() 销毁顺序 @PreDestroy DisposableBean.destroy() 最后@Bean注解中定义的destroy() 使用场景分析","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"http://io.stelawliet.top/categories/java/spring/"},{"name":"annotation","slug":"java/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/spring/annotation/"}],"tags":[{"name":"bean","slug":"bean","permalink":"http://io.stelawliet.top/tags/bean/"},{"name":"lifeCycle","slug":"lifeCycle","permalink":"http://io.stelawliet.top/tags/lifeCycle/"}]},{"title":"tcp握手挥手分析@github","slug":"Java/concurrent/线程池了解","date":"2018-08-02T10:19:14.000Z","updated":"2018-08-02T10:29:09.000Z","comments":true,"path":"2018/08/02/Java/concurrent/线程池了解/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Java/concurrent/线程池了解/","excerpt":"","text":"如何优雅的使用和理解线程池前言平时接触过多线程开发的童鞋应该都或多或少了解过线程池，之前发布的《阿里巴巴 Java 手册》里也有一条： 可见线程池的重要性。 简单来说使用线程池有以下几个目的： 线程是稀缺资源，不能频繁的创建。 解耦作用；线程的创建于执行完全分开，方便维护。 应当将其放入一个池子中，可以给其他任务进行复用。 线程池原理谈到线程池就会想到池化技术，其中最核心的思想就是把宝贵的资源放到一个池子中；每次使用都从里面获取，用完之后又放回池子供其他人使用，有点吃大锅饭的意思。 那在 Java 中又是如何实现的呢？ 在 JDK 1.5 之后推出了相关的 api，常见的创建线程池方式有以下几种： Executors.newCachedThreadPool()：无限线程池。 Executors.newFixedThreadPool(nThreads)：创建固定大小的线程池。 Executors.newSingleThreadExecutor()：创建单个线程的线程池。 其实看这三种方式创建的源码就会发现： 123456 public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;()); &#125;复制代码 实际上还是利用 ThreadPoolExecutor 类实现的。 所以我们重点来看下 ThreadPoolExecutor 是怎么玩的。 首先是创建线程的 api： 12ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, RejectedExecutionHandler handler) 复制代码 这几个核心参数的作用： corePoolSize 为线程池的基本大小。 maximumPoolSize 为线程池最大线程大小。 keepAliveTime 和 unit 则是线程空闲后的存活时间。 workQueue 用于存放任务的阻塞队列。 handler 当队列和最大线程池都满了之后的饱和策略。 了解了这几个参数再来看看实际的运用。 通常我们都是使用: 12threadPool.execute(new Job());复制代码 这样的方式来提交一个任务到线程池中，所以核心的逻辑就是 execute() 函数了。 在具体分析之前先了解下线程池中所定义的状态，这些状态都和线程的执行密切相关： version=1.0?> version=1.0?> version=1.0?> version=1.0?> version=1.0?> version=1.0?> version=1.0?>","categories":[{"name":"server","slug":"server","permalink":"http://io.stelawliet.top/categories/server/"}],"tags":[{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"},{"name":"tcp","slug":"tcp","permalink":"http://io.stelawliet.top/tags/tcp/"}]},{"title":"tcp握手挥手分析@github","slug":"Linux/net/计算机网络面试","date":"2018-08-02T09:42:33.000Z","updated":"2018-08-02T10:20:10.000Z","comments":true,"path":"2018/08/02/Linux/net/计算机网络面试/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Linux/net/计算机网络面试/","excerpt":"","text":"TCP的三次握手与四次挥手（详解+动图）2017年06月04日 21:53:54 阅读数：34449 背景描述 通过上一篇中网络模型中的IP层的介绍，我们知道网络层，可以实现两个主机之间的通信。但是这并不具体，因为，真正进行通信的实体是在主机中的进程，是一个主机中的一个进程与另外一个主机中的一个进程在交换数据。IP协议虽然能把数据报文送到目的主机，但是并没有交付给主机的具体应用进程。而端到端的通信才应该是应用进程之间的通信。 UDP，在传送数据前不需要先建立连接，远地的主机在收到UDP报文后也不需要给出任何确认。虽然UDP不提供可靠交付，但是正是因为这样，省去和很多的开销，使得它的速度比较快，比如一些对实时性要求较高的服务，就常常使用的是UDP。对应的应用层的协议主要有 DNS,TFTP,DHCP,SNMP,NFS 等。 TCP，提供面向连接的服务，在传送数据之前必须先建立连接，数据传送完成后要释放连接。因此TCP是一种可靠的的运输服务，但是正因为这样，不可避免的增加了许多的开销，比如确认，流量控制等。对应的应用层的协议主要有 SMTP,TELNET,HTTP,FTP 等。 常用的熟知端口号 应用程序 FTP TFTP TELNET SMTP DNS HTTP SSH MYSQL 熟知端口 21,20 69 23 25 53 80 22 3306 传输层协议 TCP UDP TCP TCP UDP TCP TCP的概述 TCP把连接作为最基本的对象，每一条TCP连接都有两个端点，这种断点我们叫作套接字（socket），它的定义为端口号拼接到IP地址即构成了套接字，例如，若IP地址为192.3.4.16 而端口号为80，那么得到的套接字为192.3.4.16:80。 TCP报文首部 源端口和目的端口，各占2个字节，分别写入源端口和目的端口； 序号，占4个字节，TCP连接中传送的字节流中的每个字节都按顺序编号。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始； 确认号，占4个字节，是期望收到对方下一个报文的第一个数据字节的序号。例如，B收到了A发送过来的报文，其序列号字段是501，而数据长度是200字节，这表明B正确的收到了A发送的到序号700为止的数据。因此，B期望收到A的下一个数据序号是701，于是B在发送给A的确认报文段中把确认号置为701； 数据偏移，占4位，它指出TCP报文的数据距离TCP报文段的起始处有多远； 保留，占6位，保留今后使用，但目前应都位0； 紧急URG，当URG=1，表明紧急指针字段有效。告诉系统此报文段中有紧急数据； 确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1； 推送PSH，当两个应用进程进行交互式通信时，有时在一端的应用进程希望在键入一个命令后立即就能收到对方的响应，这时候就将PSH=1； 复位RST，当RST=1，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立连接； 同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1； 终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放； 窗口，占2字节，指的是通知接收方，发送本报文你需要有多大的空间来接受； 检验和，占2字节，校验首部和数据这两部分； 紧急指针，占2字节，指出本报文段中的紧急数据的字节数； 选项，长度可变，定义一些其他的可选的参数。 最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。 TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态； TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN=1，同时选择一个初始序列号 seq=x ，此时，TCP客户端进程进入了 SYN-SENT（同步已发送状态）状态。TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。 TCP服务器收到请求报文后，如果同意连接，则发出确认报文。确认报文中应该 ACK=1，SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y，此时，TCP服务器进程进入了SYN-RCVD（同步收到）状态。这个报文也不能携带数据，但是同样要消耗一个序号。 TCP客户进程收到确认后，还要向服务器给出确认。确认报文的ACK=1，ack=y+1，自己的序列号seq=x+1，此时，TCP连接建立，客户端进入ESTABLISHED（已建立连接）状态。TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。 当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。 为什么TCP客户端最后还要发送一次确认呢？ 一句话，主要防止已经失效的连接请求报文突然又传送到了服务器，从而产生错误。 如果使用的是两次握手建立连接，假设有这样一种场景，客户端发送了第一个请求连接并且没有丢失，只是因为在网络结点中滞留的时间太长了，由于TCP的客户端迟迟没有收到确认报文，以为服务器没有收到，此时重新向服务器发送这条报文，此后客户端和服务器经过两次握手完成连接，传输数据，然后关闭连接。此时此前滞留的那一次请求连接，网络通畅了到达了服务器，这个报文本该是失效的，但是，两次握手的机制将会让客户端和服务器再次建立连接，这将导致不必要的错误和资源的浪费。 如果采用的是三次握手，就算是那一次失效的报文传送过来了，服务端接受到了那条失效报文并且回复了确认报文，但是客户端不会再次发出确认。由于服务器收不到确认，就知道客户端并没有请求连接。 TCP连接的释放（四次挥手） 四次挥手 数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。 客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。 服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。 客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。 服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。 客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。 服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，服务器结束TCP连接的时间要比客户端早一些。 为什么客户端最后还要等待2MSL？ MSL（Maximum Segment Lifetime），TCP允许不同的实现可以设置不同的MSL值。 第一，保证客户端发送的最后一个ACK报文能够到达服务器，因为这个ACK报文可能丢失，站在服务器的角度看来，我已经发送了FIN+ACK报文请求断开了，客户端还没有给我回应，应该是我发送的请求断开报文它没有收到，于是服务器又会重新发送一次，而客户端就能在这个2MSL时间段内收到这个重传的报文，接着给出回应报文，并且会重启2MSL计时器。 第二，防止类似与“三次握手”中提到了的“已经失效的连接请求报文段”出现在本连接中。客户端发送完最后一个确认报文后，在这个2MSL时间中，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样新的连接中不会出现旧连接的请求报文。 为什么建立连接是三次握手，关闭连接确是四次挥手呢？ 建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。 如果已经建立了连接，但是客户端突然出现故障了怎么办？ TCP还设有一个保活计时器，显然，客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75分钟发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。","categories":[{"name":"server","slug":"server","permalink":"http://io.stelawliet.top/categories/server/"}],"tags":[{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"},{"name":"tcp","slug":"tcp","permalink":"http://io.stelawliet.top/tags/tcp/"}]},{"title":"对象分配坑分析@掘金","slug":"Java/JVM/对象taoyui","date":"2018-08-02T09:39:29.000Z","updated":"2018-08-02T09:40:59.000Z","comments":true,"path":"2018/08/02/Java/JVM/对象taoyui/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Java/JVM/对象taoyui/","excerpt":"","text":"Java中对象并不是都在堆上分配内存的。前段时间，给星球的球友们专门码了一篇文章《深入分析Java的编译原理》，其中深入的介绍了Java中的javac编译和JIT编译的区别及原理。并在文中提到：JIT编译除了具有缓存的功能外，还会对代码做各种优化，比如：逃逸分析、 锁消除、 锁膨胀、 方法内联、 空值检查消除、 类型检测消除、 公共子表达式消除等。 有球友阅读完这部分内容后，对JVM产生了浓厚的兴趣，自己回去专门学习了一下，在学习过程中遇到一个小问题，关于Java内存分配的。所以和我在微信上做过简单的交流。主要涉及到Java中的堆和栈、数组内存分配、逃逸分析、编译优化等技术及原理。本文也是关于这部分知识点的分享。 JVM内存分配策略关于JVM的内存结构及内存分配方式，不是本文的重点，这里只做简单回顾。以下是我们知道的一些常识： 1、根据Java虚拟机规范，Java虚拟机所管理的内存包括方法区、虚拟机栈、本地方法栈、堆、程序计数器等。 2、我们通常认为JVM中运行时数据存储包括堆和栈。这里所提到的栈其实指的是虚拟机栈，或者说是虚拟栈中的局部变量表。 3、栈中存放一些基本类型的变量数据（int/short/long/byte/float/double/Boolean/char）和对象引用。 4、堆中主要存放对象，即通过new关键字创建的对象。 5、数组引用变量是存放在栈内存中，数组元素是存放在堆内存中。 在《深入理解Java虚拟机中》关于Java堆内存有这样一段描述： 但是，随着JIT编译期的发展与逃逸分析技术逐渐成熟，栈上分配、标量替换优化技术将会导致一些微妙的变化，所有的对象都分配到堆上也渐渐变得不那么“绝对”了。 这里只是简单提了一句，并没有深入分析，很多人看到这里由于对JIT、逃逸分析等技术不了解，所以也无法真正理解上面这段话的含义。 PS：这里默认大家都了解什么是JIT，不了解的朋友可以先自行Google了解下，或者加入我的知识星球，阅读那篇球友专享文章。 其实，在编译期间，JIT会对代码做很多优化。其中有一部分优化的目的就是减少内存堆分配压力，其中一种重要的技术叫做逃逸分析。 逃逸分析逃逸分析(Escape Analysis)是目前Java虚拟机中比较前沿的优化技术。这是一种可以有效减少Java 程序中同步负载和内存堆分配压力的跨函数全局数据流分析算法。通过逃逸分析，Java Hotspot编译器能够分析出一个新的对象的引用的使用范围从而决定是否要将这个对象分配到堆上。 逃逸分析的基本行为就是分析对象动态作用域：当一个对象在方法中被定义后，它可能被外部方法所引用，例如作为调用参数传递到其他地方中，称为方法逃逸。 例如： 1234567public static StringBuffer craeteStringBuffer(String s1, String s2) &#123; StringBuffer sb = new StringBuffer(); sb.append(s1); sb.append(s2); return sb;&#125;复制代码 StringBuffer sb是一个方法内部变量，上述代码中直接将sb返回，这样这个StringBuffer有可能被其他方法所改变，这样它的作用域就不只是在方法内部，虽然它是一个局部变量，称其逃逸到了方法外部。甚至还有可能被外部线程访问到，譬如赋值给类变量或可以在其他线程中访问的实例变量，称为线程逃逸。 上述代码如果想要StringBuffer sb不逃出方法，可以这样写： 1234567public static String createStringBuffer(String s1, String s2) &#123; StringBuffer sb = new StringBuffer(); sb.append(s1); sb.append(s2); return sb.toString();&#125;复制代码 不直接返回 StringBuffer，那么StringBuffer将不会逃逸出方法。 使用逃逸分析，编译器可以对代码做如下优化： 一、同步省略。如果一个对象被发现只能从一个线程被访问到，那么对于这个对象的操作可以不考虑同步。 二、将堆分配转化为栈分配。如果一个对象在子程序中被分配，要使指向该对象的指针永远不会逃逸，对象可能是栈分配的候选，而不是堆分配。 三、分离对象或标量替换。有的对象可能不需要作为一个连续的内存结构存在也可以被访问到，那么对象的部分（或全部）可以不存储在内存，而是存储在CPU寄存器中。 上面的关于同步省略的内容，我在《深入理解多线程（五）—— Java虚拟机的锁优化技术》中有介绍过，即锁优化中的锁消除技术，依赖的也是逃逸分析技术。 本文，主要来介绍逃逸分析的第二个用途：将堆分配转化为栈分配。 其实，以上三种优化中，栈上内存分配其实是依靠标量替换来实现的。由于不是本文重点，这里就不展开介绍了。如果大家感兴趣，我后面专门出一篇文章，全面介绍下逃逸分析。 在Java代码运行时，通过JVM参数可指定是否开启逃逸分析， -XX:+DoEscapeAnalysis ： 表示开启逃逸分析 -XX:-DoEscapeAnalysis ： 表示关闭逃逸分析 从jdk 1.7开始已经默认开始逃逸分析，如需关闭，需要指定-XX:-DoEscapeAnalysis 对象的栈上内存分配我们知道，在一般情况下，对象和数组元素的内存分配是在堆内存上进行的。但是随着JIT编译器的日渐成熟，很多优化使这种分配策略并不绝对。JIT编译器就可以在编译期间根据逃逸分析的结果，来决定是否可以将对象的内存分配从堆转化为栈。 我们来看以下代码： 123456789101112131415161718192021222324public static void main(String[] args) &#123; long a1 = System.currentTimeMillis(); for (int i = 0; i &lt; 1000000; i++) &#123; alloc(); &#125; // 查看执行时间 long a2 = System.currentTimeMillis(); System.out.println(&quot;cost &quot; + (a2 - a1) + &quot; ms&quot;); // 为了方便查看堆内存中对象个数，线程sleep try &#123; Thread.sleep(100000); &#125; catch (InterruptedException e1) &#123; e1.printStackTrace(); &#125;&#125;private static void alloc() &#123; User user = new User();&#125;static class User &#123;&#125;复制代码 其实代码内容很简单，就是使用for循环，在代码中创建100万个User对象。 我们在alloc方法中定义了User对象，但是并没有在方法外部引用他。也就是说，这个对象并不会逃逸到alloc外部。经过JIT的逃逸分析之后，就可以对其内存分配进行优化。 我们指定以下JVM参数并运行： 12-Xmx4G -Xms4G -XX:-DoEscapeAnalysis -XX:+PrintGCDetails -XX:+HeapDumpOnOutOfMemoryError 复制代码 在程序打印出 cost XX ms 后，代码运行结束之前，我们使用[jmap][1]命令，来查看下当前堆内存中有多少个User对象： 1234567891011121314➜ ~ jps2809 StackAllocTest2810 Jps➜ ~ jmap -histo 2809 num #instances #bytes class name---------------------------------------------- 1: 524 87282184 [I 2: 1000000 16000000 StackAllocTest$User 3: 6806 2093136 [B 4: 8006 1320872 [C 5: 4188 100512 java.lang.String 6: 581 66304 java.lang.Class复制代码 从上面的jmap执行结果中我们可以看到，堆中共创建了100万个StackAllocTest$User实例。 在关闭逃避分析的情况下（-XX:-DoEscapeAnalysis），虽然在alloc方法中创建的User对象并没有逃逸到方法外部，但是还是被分配在堆内存中。也就说，如果没有JIT编译器优化，没有逃逸分析技术，正常情况下就应该是这样的。即所有对象都分配到堆内存中。 接下来，我们开启逃逸分析，再来执行下以上代码。 12-Xmx4G -Xms4G -XX:+DoEscapeAnalysis -XX:+PrintGCDetails -XX:+HeapDumpOnOutOfMemoryError 复制代码 在程序打印出 cost XX ms 后，代码运行结束之前，我们使用jmap命令，来查看下当前堆内存中有多少个User对象： 12345678910111213141516➜ ~ jps7092858 Launcher2859 StackAllocTest2860 Jps➜ ~ jmap -histo 2859 num #instances #bytes class name---------------------------------------------- 1: 524 101944280 [I 2: 6806 2093136 [B 3: 83619 1337904 StackAllocTest$User 4: 8006 1320872 [C 5: 4188 100512 java.lang.String 6: 581 66304 java.lang.Class复制代码 从以上打印结果中可以发现，开启了逃逸分析之后（-XX:+DoEscapeAnalysis），在堆内存中只有8万多个StackAllocTest$User对象。也就是说在经过JIT优化之后，堆内存中分配的对象数量，从100万降到了8万。 除了以上通过jmap验证对象个数的方法以外，读者还可以尝试将堆内存调小，然后执行以上代码，根据GC的次数来分析，也能发现，开启了逃逸分析之后，在运行期间，GC次数会明显减少。正是因为很多堆上分配被优化成了栈上分配，所以GC次数有了明显的减少。 总结所以，如果以后再有人问你：是不是所有的对象和数组都会在堆内存分配空间？ 那么你可以告诉他：不一定，随着JIT编译器的发展，在编译期间，如果JIT经过逃逸分析，发现有些对象没有逃逸出方法，那么有可能堆内存分配会被优化成栈内存分配。但是这也并不是绝对的。就像我们前面看到的一样，在开启逃逸分析之后，也并不是所有User对象都没有在堆上分配。","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"jvm","slug":"java/jvm","permalink":"http://io.stelawliet.top/categories/java/jvm/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"jvm","slug":"jvm","permalink":"http://io.stelawliet.top/tags/jvm/"}]},{"title":"java面试@掘金","slug":"Java/faceEx/1java面试大概","date":"2018-08-02T09:18:53.000Z","updated":"2018-08-02T09:20:18.000Z","comments":true,"path":"2018/08/02/Java/faceEx/1java面试大概/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Java/faceEx/1java面试大概/","excerpt":"","text":"一个两年Java的面试总结前言16年毕业到现在也近两年了，最近面试了阿里集团（菜鸟网络，蚂蚁金服），网易，滴滴，点我达，最终收到点我达，网易offer，蚂蚁金服二面挂掉，菜鸟网络一个月了还在流程中… 最终有幸去了网易。 但是要特别感谢点我达的领导及HR，真的非常非常好，很感谢他们一直的关照和指导。 面试整体事项 简历要准备好，联系方式一定要正确清晰醒目，项目经历按照时间倒序阐述，注意描述自己在项目中承担的职责，简历的模板尽量选择简洁的，毕竟程序员大部分还是喜欢简单明了的。 推荐boss直聘，我觉得很好用（不是广告）。 一般的整体面试流程都是电面-&gt;现场面-&gt;HR面-&gt;等着。 不要觉得HR说让你回去等消息就是GG了，他们也要跟你之前的面试官讨论，再向领导汇报，如果说不急可能还要和其他候选人比较，所以HR让你回去等消息绝对不是说明你完蛋了。 面试前准备好自我介绍，1分钟左右就可以，可以写在纸上，电面可以照着念，等你到了现场面了基本也都快背下来你的自我介绍了。 准备好扎实的基础，这是一切的根源，没实力怎么都没用的。 面试中你可以把你的面试官往你会的知识上引导（我遇到过你会什么他不问什么的）。 遇到了设计类题目不要着急，面试官不是为了让你几分钟设计一个高并发高可用设计模式完美的架构，只是想看看你的思路，看看你应变的能力，然后给你些提示看看你能否迅速的调整。 offer都会有的，不要着急，把面试当成一个交流的过程。 需要准备的知识以下为在近期面试中比较有印象的问题，也就不分公司了，因为没什么意义，大致分类记录一下，目前只想起这么多，不过一定要知道这些问题只是冰山一角，就算都会了也不能怎么样，最最重要的，还是坚实的基础，清醒的头脑。 Java基础 HashMap的源码，实现原理，JDK8中对HashMap做了怎样的优化。 HaspMap扩容是怎样扩容的，为什么都是2的N次幂的大小。 HashMap，HashTable，ConcurrentHashMap的区别。 极高并发下HashTable和ConcurrentHashMap哪个性能更好，为什么，如何实现的。 HashMap在高并发下如果没有处理线程安全会有怎样的安全隐患，具体表现是什么。 java中四种修饰符的限制范围。 Object类中的方法。 接口和抽象类的区别，注意JDK8的接口可以有实现。 动态代理的两种方式，以及区别。 Java序列化的方式。 传值和传引用的区别，Java是怎么样的，有没有传值引用。 一个ArrayList在循环过程中删除，会不会出问题，为什么。 @transactional注解在什么情况下会失效，为什么。 数据结构和算法 B+树 快速排序，堆排序，插入排序（其实八大排序算法都应该了解 一致性Hash算法，一致性Hash算法的应用 JVM JVM的内存结构。 JVM方法栈的工作过程，方法栈和本地方法栈有什么区别。 JVM的栈中引用如何和堆中的对象产生关联。 可以了解一下逃逸分析技术。 GC的常见算法，CMS以及G1的垃圾回收过程，CMS的各个阶段哪两个是Stop the world的，CMS会不会产生碎片，G1的优势。 标记清除和标记整理算法的理解以及优缺点。 eden survivor区的比例，为什么是这个比例，eden survivor的工作过程。 JVM如何判断一个对象是否该被GC，可以视为root的都有哪几种类型。 强软弱虚引用的区别以及GC对他们执行怎样的操作。 Java是否可以GC直接内存。 Java类加载的过程。 双亲委派模型的过程以及优势。 常用的JVM调优参数。 dump文件的分析。 Java有没有主动触发GC的方式（没有）。 多线程 Java实现多线程有哪几种方式。 Callable和Future的了解。 线程池的参数有哪些，在线程池创建一个线程的过程。 volitile关键字的作用，原理。 synchronized关键字的用法，优缺点。 Lock接口有哪些实现类，使用场景是什么。 可重入锁的用处及实现原理，写时复制的过程，读写锁，分段锁（ConcurrentHashMap中的segment）。 悲观锁，乐观锁，优缺点，CAS有什么缺陷，该如何解决。 ABC三个线程如何保证顺序执行。 线程的状态都有哪些。 sleep和wait的区别。 notify和notifyall的区别。 ThreadLocal的了解，实现原理。 数据库相关常见的数据库优化手段 索引的优缺点，什么字段上建立索引 数据库连接池。 durid的常用配置。 计算机网络TCP，UDP区别。 三次握手，四次挥手，为什么要四次挥手。 长连接和短连接。 连接池适合长连接还是短连接。 设计模式观察者模式 代理模式 单例模式，有五种写法，可以参考文章单例模式的五种实现方式 可以考Spring中使用了哪些设计模式 分布式相关分布式事务的控制。 分布式锁如何设计。 分布式session如何设计。 dubbo的组件有哪些，各有什么作用。 zookeeper的负载均衡算法有哪些。 dubbo是如何利用接口就可以通信的。 缓存相关redis和memcached的区别。 redis支持哪些数据结构。 redis是单线程的么，所有的工作都是单线程么。 redis如何存储一个String的。 redis的部署方式，主从，集群。 redis的哨兵模式，一个key值如何在redis集群中找到存储在哪里。 redis持久化策略。 框架相关SpringMVC的Controller是如何将参数和前端传来的数据一一对应的。 Mybatis如何找到指定的Mapper的，如何完成查询的。 Quartz是如何完成定时任务的。 自定义注解的实现。 Spring使用了哪些设计模式。 Spring的IOC有什么优势。 Spring如何维护它拥有的bean。 一些较新的东西 JDK8的新特性，流的概念及优势，为什么有这种优势。 区块链了解 如何设计双11交易总额面板，要做到高并发高可用 一些小建议可以去leetcode上刷题换换思路。 八大排序算法一定要手敲一遍（快排，堆排尤其重要）。 了解一些新兴的技术。 面试之后面试官都会问你有没有什么问题，千万不要没问题，也别傻乎乎的问一些敏感问题。 了解你要面试的公司的产品及竞争产品。 几个链接很多Java面试题www.importnew.com/22083.html 更多Java面试题www.importnew.com/22087.html 还是Java面试题www.importnew.com/17232.html 总结无论是哪家公司，都很重视高并发高可用的技术，重视基础，重视JVM。面试是一个双向选择的过程，不要抱着畏惧的心态去面试，不利于自己的发挥。同时看中的应该不止薪资，还要看你是不是真的喜欢这家公司，是不是能真的得到锻炼。其实我写了这么多，只是我自己的总结，并不一定适用于所有人，相信经过一些面试，大家都会有这些感触。 如果这些文字能够帮到你，那就最好了，帮不到就当是我自己的一个记录。 最后，希望大家都能找到适合自己的公司，开开心心的撸代码 原文出处：segmentfault.com/a/119000001…","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"face","slug":"java/face","permalink":"http://io.stelawliet.top/categories/java/face/"}],"tags":[{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"},{"name":"face","slug":"face","permalink":"http://io.stelawliet.top/tags/face/"}]},{"title":"Mysql锁@掘金","slug":"sql/Mysql锁","date":"2018-08-02T09:15:40.000Z","updated":"2018-08-02T09:16:29.000Z","comments":true,"path":"2018/08/02/sql/Mysql锁/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/sql/Mysql锁/","excerpt":"","text":"MySQL/InnoDB中，乐观锁、悲观锁、共享锁、排它锁、行锁、表锁、死锁概念的理解MySQL/InnoDB的加锁，一直是一个面试中常问的话题。例如，数据库如果有高并发请求，如何保证数据完整性？产生死锁问题如何排查并解决？我在工作过程中，也会经常用到，乐观锁，排它锁，等。于是今天就对这几个概念进行学习，屡屡思路，记录一下。 注：MySQL是一个支持插件式存储引擎的数据库系统。本文下面的所有介绍，都是基于InnoDB存储引擎，其他引擎的表现，会有较大的区别。 存储引擎查看 MySQL给开发者提供了查询存储引擎的功能，我这里使用的是MySQL5.6.4，可以使用： SHOW ENGINES 乐观锁用数据版本（Version）记录机制实现，这是乐观锁最常用的一种实现方式。何谓数据版本？即为数据增加一个版本标识，一般是通过为数据库表增加一个数字类型的 “version” 字段来实现。当读取数据时，将version字段的值一同读出，数据每更新一次，对此version值加1。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的version值进行比对，如果数据库表当前版本号与第一次取出来的version值相等，则予以更新，否则认为是过期数据。 举例 1、数据库表设计 三个字段，分别是id,value、version 12select id,value,version from TABLE where id=#&#123;id&#125;复制代码 2、每次更新表中的value字段时，为了防止发生冲突，需要这样操作 1234update TABLEset value=2,version=version+1where id=#&#123;id&#125; and version=#&#123;version&#125;;复制代码 悲观锁与乐观锁相对应的就是悲观锁了。悲观锁就是在操作数据时，认为此操作会出现数据冲突，所以在进行每次操作时都要通过获取锁才能进行对相同数据的操作，这点跟java中的synchronized很相似，所以悲观锁需要耗费较多的时间。另外与乐观锁相对应的，悲观锁是由数据库自己实现了的，要用的时候，我们直接调用数据库的相关语句就可以了。 说到这里，由悲观锁涉及到的另外两个锁概念就出来了，它们就是共享锁与排它锁。共享锁和排它锁是悲观锁的不同的实现，它俩都属于悲观锁的范畴。 使用，排它锁 举例 要使用悲观锁，我们必须关闭mysql数据库的自动提交属性，因为MySQL默认使用autocommit模式，也就是说，当你执行一个更新操作后，MySQL会立刻将结果进行提交。 我们可以使用命令设置MySQL为非autocommit模式： 123456789101112131415161718192021222324set autocommit=0;# 设置完autocommit后，我们就可以执行我们的正常业务了。具体如下：# 1. 开始事务begin;/begin work;/start transaction; (三者选一就可以)# 2. 查询表信息select status from TABLE where id=1 for update;# 3. 插入一条数据insert into TABLE (id,value) values (2,2);# 4. 修改数据为update TABLE set value=2 where id=1;# 5. 提交事务commit;/commit work;复制代码 共享锁共享锁又称读锁 read lock，是读取操作创建的锁。其他用户可以并发读取数据，但任何事务都不能对数据进行修改（获取数据上的排他锁），直到已释放所有共享锁。 如果事务T对数据A加上共享锁后，则其他事务只能对A再加共享锁，不能加排他锁。获得共享锁的事务只能读数据，不能修改数据 打开第一个查询窗口 1234begin;/begin work;/start transaction; (三者选一就可以)SELECT * from TABLE where id = 1 lock in share mode;复制代码 然后在另一个查询窗口中，对id为1的数据进行更新 12update TABLE set name=&quot;www.souyunku.com&quot; where id =1;复制代码 此时，操作界面进入了卡顿状态，过了超时间，提示错误信息 如果在超时前，执行 commit，此更新语句就会成功。 123[SQL]update test_one set name=&quot;www.souyunku.com&quot; where id =1;[Err] 1205 - Lock wait timeout exceeded; try restarting transaction复制代码 加上共享锁后，也提示错误信息 12update test_one set name=&quot;www.souyunku.com&quot; where id =1 lock in share mode;复制代码 123[SQL]update test_one set name=&quot;www.souyunku.com&quot; where id =1 lock in share mode;[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;lock in share mode&apos; at line 1复制代码 在查询语句后面增加 LOCK IN SHARE MODE，Mysql会对查询结果中的每行都加共享锁，当没有其他线程对查询结果集中的任何一行使用排他锁时，可以成功申请共享锁，否则会被阻塞。其他线程也可以读取使用了共享锁的表，而且这些线程读取的是同一个版本的数据。 加上共享锁后，对于update,insert,delete语句会自动加排它锁。 排它锁排他锁 exclusive lock（也叫writer lock）又称写锁。 排它锁是悲观锁的一种实现，在上面悲观锁也介绍过。 若事务 1 对数据对象A加上X锁，事务 1 可以读A也可以修改A，其他事务不能再对A加任何锁，直到事物 1 释放A上的锁。这保证了其他事务在事物 1 释放A上的锁之前不能再读取和修改A。排它锁会阻塞所有的排它锁和共享锁 读取为什么要加读锁呢：防止数据在被读取的时候被别的线程加上写锁， 使用方式：在需要执行的语句后面加上for update就可以了 行锁行锁又分共享锁和排他锁,由字面意思理解，就是给某一行加上锁，也就是一条记录加上锁。 注意：行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁。 共享锁： 名词解释：共享锁又叫做读锁，所有的事务只能对其进行读操作不能写操作，加上共享锁后在事务结束之前其他事务只能再加共享锁，除此之外其他任何类型的锁都不能再加了。 12SELECT * from TABLE where id = &quot;1&quot; lock in share mode; 结果集的数据都会加共享锁复制代码 排他锁： 名词解释：若某个事物对某一行加上了排他锁，只能这个事务对其进行读写，在此事务结束之前，其他事务不能对其进行加任何锁，其他进程可以读取,不能进行写操作，需等待其释放。 12select status from TABLE where id=1 for update;复制代码 可以参考之前演示的共享锁,排它锁语句 由于对于表中,id字段为主键，就也相当于索引。执行加锁时，会将id这个索引为1的记录加上锁，那么这个锁就是行锁。 表锁如何加表锁 innodb 的行锁是在有索引的情况下,没有索引的表是锁定全表的. Innodb中的行锁与表锁 前面提到过，在Innodb引擎中既支持行锁也支持表锁，那么什么时候会锁住整张表，什么时候或只锁住一行呢？ 只有通过索引条件检索数据，InnoDB才使用行级锁，否则，InnoDB将使用表锁！ 在实际应用中，要特别注意InnoDB行锁的这一特性，不然的话，可能导致大量的锁冲突，从而影响并发性能。 行级锁都是基于索引的，如果一条SQL语句用不到索引是不会使用行级锁的，会使用表级锁。行级锁的缺点是：由于需要请求大量的锁资源，所以速度慢，内存消耗大。 死锁死锁（Deadlock） 所谓死锁：是指两个或两个以上的进程在执行过程中，因争夺资源而造成的一种互相等待的现象，若无外力作用，它们都将无法推进下去。此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。由于资源占用是互斥的，当某个进程提出申请资源后，使得有关进程在无外力协助下，永远分配不到必需的资源而无法继续运行，这就产生了一种特殊现象死锁。 解除正在死锁的状态有两种方法： 第一种： 1.查询是否锁表 12show OPEN TABLES where In_use &gt; 0;复制代码 2.查询进程（如果您有SUPER权限，您可以看到所有线程。否则，您只能看到您自己的线程） 12show processlist复制代码 3.杀死进程id（就是上面命令的id列） 12kill id复制代码 第二种： 1：查看当前的事务 12SELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;复制代码 2：查看当前锁定的事务 12SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;复制代码 3：查看当前等锁的事务 12SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS; 复制代码 杀死进程 12kill 进程ID复制代码 如果系统资源充足，进程的资源请求都能够得到满足，死锁出现的可能性就很低，否则就会因争夺有限的资源而陷入死锁。其次，进程运行推进顺序与速度不同，也可能产生死锁。 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。 （3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。 （4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。 虽然不能完全避免死锁，但可以使死锁的数量减至最少。将死锁减至最少可以增加事务的吞吐量并减少系统开销，因为只有很少的事务回滚，而回滚会取消事务执行的所有工作。由于死锁时回滚而由应用程序重新提交。 下列方法有助于最大限度地降低死锁： （1）按同一顺序访问对象。 （2）避免事务中的用户交互。 （3）保持事务简短并在一个批处理中。 （4）使用低隔离级别。 （5）使用绑定连接。 参考 : blog.csdn.net/puhaiyang/a… www.jb51.net/article/780…","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://io.stelawliet.top/tags/mysql/"},{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"}]},{"title":"BAT 40面试题解答@掘金","slug":"Java/faceEx/BAT JAVASE40面试","date":"2018-08-02T08:59:07.000Z","updated":"2018-08-02T09:13:22.000Z","comments":true,"path":"2018/08/02/Java/faceEx/BAT JAVASE40面试/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Java/faceEx/BAT JAVASE40面试/","excerpt":"","text":"BTA 常问的 Java基础40道常见面试题及详细答案最近看到网上流传着，各种面试经验及面试题，往往都是一大堆技术题目贴上去，而没有答案。 为此我业余时间整理了，Java基础常见的40道常见面试题，及详细答案，望各路大牛，发现不对的地方，不吝赐教，留言即可。 我陆续会更新更多的面试知识点 请关注公众号 “搜云库” 获取最新文章 八种基本数据类型的大小，以及他们的封装类 引用数据类型 Switch能否用string做参数 equals与==的区别 自动装箱，常量池 Object有哪些公用方法 Java的四种引用，强弱软虚，用到的场景 Hashcode的作用 HashMap的hashcode的作用 为什么重载hashCode方法？ ArrayList、LinkedList、Vector的区别 String、StringBuffer与StringBuilder的区别 Map、Set、List、Queue、Stack的特点与用法 HashMap和HashTable的区别 JDK7与JDK8中HashMap的实现 HashMap和ConcurrentHashMap的区别，HashMap的底层源码 ConcurrentHashMap能完全替代HashTable吗 为什么HashMap是线程不安全的 如何线程安全的使用HashMap 多并发情况下HashMap是否还会产生死循环 TreeMap、HashMap、LindedHashMap的区别 Collection包结构，与Collections的区别 try?catch?finally，try里有return，finally还执行么 Excption与Error包结构，OOM你遇到过哪些情况，SOF你遇到过哪些情况 Java(OOP)面向对象的三个特征与含义 Override和Overload的含义去区别 Interface与abstract类的区别 Static?class?与non?static?class的区别 java多态的实现原理 foreach与正常for循环效率对比 Java?IO与NIO java反射的作用于原理 泛型常用特点 解析XML的几种方式的原理与特点：DOM、SAX Java1.7与1.8,1.9,10 新特性 设计模式：单例、工厂、适配器、责任链、观察者等等 JNI的使用 AOP是什么 OOP是什么 AOP与OOP的区别 八种基本数据类型的大小，以及他们的封装类八种基本数据类型：int、short、float、double、long、boolean、byte、char。 封装类分别是：Integer、Short、Float、Double、Long、Boolean、Byte、Character。 img 引用数据类型引用数据类型是由类的编辑器定义的，他们是用于访问对象的。这些变量被定义为不可更改的特定类型。 例如：Employee， Puppy 等等 类对象和数组变量就是这种引用数据类型。 任何引用数据类型的默认值都为空。 一个引用数据类型可以被用于任何声明类型和兼容类型的对象。 Switch能否用string做参数jdk7之前 switch 只能支持 byte、short、char、int 这几个基本数据类型和其对应的封装类型。 switch后面的括号里面只能放int类型的值，但由于byte，short，char类型，它们会?自动?转换为int类型（精精度小的向大的转化），所以它们也支持。 jdk1.7后 整形，枚举类型，字符串都可以。 原理 123456789101112switch (expression) // 括号里是一个表达式，结果是个整数&#123; case constant1: // case 后面的标号，也是个整数 group of statements 1; break; case constant2: group of statements 2; break; ... default: default group of statements&#125;复制代码 jdk1.7后，整形，枚举类，字符串都可以。 123456789101112131415161718public class TestString &#123; static String string = &quot;123&quot;; public static void main(String[] args) &#123; switch (string) &#123; case &quot;123&quot;: System.out.println(&quot;123&quot;); break; case &quot;abc&quot;: System.out.println(&quot;abc&quot;); break; default: System.out.println(&quot;defauls&quot;); break; &#125; &#125;&#125;复制代码 为什么jdk1.7后又可以用string类型作为switch参数呢？ 其实，jdk1.7并没有新的指令来处理switch string，而是通过调用switch中string.hashCode,将string转换为int从而进行判断。 equals与==的区别使用==比较原生类型如：boolean、int、char等等，使用equals()比较对象。 1、==是判断两个变量或实例是不是指向同一个内存空间。 equals是判断两个变量或实例所指向的内存空间的值是不是相同。 2、==是指对内存地址进行比较。 equals()是对字符串的内容进行比较。 3、==指引用是否相同。 equals()指的是值是否相同。 1234567891011121314151617181920212223public static void main(String[] args) &#123; String a = new String(&quot;ab&quot;); // a 为一个引用 String b = new String(&quot;ab&quot;); // b为另一个引用,对象的内容一样 String aa = &quot;ab&quot;; // 放在常量池中 String bb = &quot;ab&quot;; // 从常量池中查找 System.out.println(aa == bb); // true System.out.println(a == b); // false，非同一对象 System.out.println(a.equals(b)); // true System.out.println(42 == 42.0); // true &#125;public static void main(String[] args) &#123; Object obj1 = new Object(); Object obj2 = new Object(); System.out.println(obj1.equals(obj2));//false System.out.println(obj1==obj2);//false obj1=obj2; System.out.println(obj1==obj2);//true System.out.println(obj2==obj1);//true&#125;复制代码 自动装箱，常量池自动装箱 在jdk?1.5之前，如果你想要定义一个value为100的Integer对象，则需要如下定义： 1234567Integer i = new Integer(100);int intNum1 = 100; //普通变量Integer intNum2 = intNum1; //自动装箱int intNum3 = intNum2; //自动拆箱Integer intNum4 = 100; //自动装箱复制代码 上面的代码中，intNum2为一个Integer类型的实例，intNum1为Java中的基础数据类型，将intNum1赋值给intNum2便是自动装箱；而将intNum2赋值给intNum3则是自动拆箱。 八种基本数据类型： boolean byte char shrot int long float double ,所生成的变量相当于常量。 基本类型包装类：Boolean Byte Character Short Integer Long Float Double。 自动拆箱和自动装箱定义： 自动装箱是将一个java定义的基本数据类型赋值给相应封装类的变量。 拆箱与装箱是相反的操作，自动拆箱则是将一个封装类的变量赋值给相应基本数据类型的变量。 Object有哪些公用方法Object是所有类的父类，任何类都默认继承Object clone 保护方法，实现对象的浅复制，只有实现了Cloneable接口才可以调用该方法，否则抛出CloneNotSupportedException异常。 equals 在Object中与==是一样的，子类一般需要重写该方法。 hashCode 该方法用于哈希查找，重写了equals方法一般都要重写hashCode方法。这个方法在一些具有哈希功能的Collection中用到。 getClass final方法，获得运行时类型 wait 使当前线程等待该对象的锁，当前线程必须是该对象的拥有者，也就是具有该对象的锁。wait() 方法一直等待，直到获得锁或者被中断。 wait(long timeout) 设定一个超时间隔，如果在规定时间内没有获得锁就返回。 调用该方法后当前线程进入睡眠状态，直到以下事件发生 1、其他线程调用了该对象的notify方法。 2、其他线程调用了该对象的notifyAll方法。 3、其他线程调用了interrupt中断该线程。 4、时间间隔到了。 5、此时该线程就可以被调度了，如果是被中断的话就抛出一个InterruptedException异常。 notify 唤醒在该对象上等待的某个线程。 notifyAll 唤醒在该对象上等待的所有线程。 toString 转换成字符串，一般子类都有重写，否则打印句柄。 Java的四种引用，强弱软虚，用到的场景从JDK1.2版本开始，把对象的引用分为四种级别，从而使程序能更加灵活的控制对象的生命周期。这四种级别由高到低依次为：强引用、软引用、弱引用和虚引用。 1、强引用 最普遍的一种引用方式，如String s = “abc”，变量s就是字符串“abc”的强引用，只要强引用存在，则垃圾回收器就不会回收这个对象。 2、软引用（SoftReference） 用于描述还有用但非必须的对象，如果内存足够，不回收，如果内存不足，则回收。一般用于实现内存敏感的高速缓存，软引用可以和引用队列ReferenceQueue联合使用，如果软引用的对象被垃圾回收，JVM就会把这个软引用加入到与之关联的引用队列中。 3、弱引用（WeakReference） 弱引用和软引用大致相同，弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。在垃圾回收器线程扫描它所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。 4、虚引用（PhantomReference） 就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收器回收。 虚引用主要用来跟踪对象被垃圾回收器回收的活动。 虚引用与软引用和弱引用的一个区别在于： 虚引用必须和引用队列 （ReferenceQueue）联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引，就会在回收对象的内存之前，把这个虚引用加入到与之关联的引用队列中。 Hashcode的作用http://blog.csdn.net/seu_calvin/article/details/52094115 1、HashCode的特性 （1）HashCode的存在主要是用于查找的快捷性，如Hashtable，HashMap等，HashCode经常用于确定对象的存储地址。 （2）如果两个对象相同，?equals方法一定返回true，并且这两个对象的HashCode一定相同。 （3）两个对象的HashCode相同，并不一定表示两个对象就相同，即equals()不一定为true，只能够说明这两个对象在一个散列存储结构中。 （4）如果对象的equals方法被重写，那么对象的HashCode也尽量重写。 2、HashCode作用 Java中的集合有两类，一类是List，再有一类是Set。前者集合内的元素是有序的，元素可以重复；后者元素无序，但元素不可重复。 equals方法可用于保证元素不重复，但如果每增加一个元素就检查一次，若集合中现在已经有1000个元素，那么第1001个元素加入集合时，就要调用1000次equals方法。这显然会大大降低效率。?于是，Java采用了哈希表的原理。 哈希算法也称为散列算法，是将数据依特定算法直接指定到一个地址上。 这样一来，当集合要添加新的元素时，先调用这个元素的HashCode方法，就一下子能定位到它应该放置的物理位置上。 （1）如果这个位置上没有元素，它就可以直接存储在这个位置上，不用再进行任何比较了。 （2）如果这个位置上已经有元素了，就调用它的equals方法与新元素进行比较，相同的话就不存了。 （3）不相同的话，也就是发生了Hash key相同导致冲突的情况，那么就在这个Hash key的地方产生一个链表，将所有产生相同HashCode的对象放到这个单链表上去，串在一起（很少出现）。 这样一来实际调用equals方法的次数就大大降低了，几乎只需要一两次。 如何理解HashCode的作用： 从Object角度看，JVM每new一个Object，它都会将这个Object丢到一个Hash表中去，这样的话，下次做Object的比较或者取这个对象的时候（读取过程），它会根据对象的HashCode再从Hash表中取这个对象。这样做的目的是提高取对象的效率。若HashCode相同再去调用equal。 3、HashCode实践（如何用来查找） HashCode是用于查找使用的，而equals是用于比较两个对象是否相等的。 （1）例如内存中有这样的位置 120 1 2 3 4 5 6 7复制代码 而我有个类，这个类有个字段叫ID，我要把这个类存放在以上8个位置之一，如果不用HashCode而任意存放，那么当查找时就需要到这八个位置里挨个去找，或者用二分法一类的算法。 但以上问题如果用HashCode就会使效率提高很多 定义我们的HashCode为ID％8，比如我们的ID为9，9除8的余数为1，那么我们就把该类存在1这个位置，如果ID是13，求得的余数是5，那么我们就把该类放在5这个位置。依此类推。 （2）但是如果两个类有相同的HashCode，例如9除以8和17除以8的余数都是1，也就是说，我们先通过?HashCode来判断两个类是否存放某个桶里，但这个桶里可能有很多类，那么我们就需要再通过equals在这个桶里找到我们要的类。 请看下面这个例子 1234567891011121314151617181920212223242526272829public class HashTest &#123; private int i; public int getI() &#123; return i; &#125; public void setI(int i) &#123; this.i = i; &#125; public int hashCode() &#123; return i % 10; &#125; public final static void main(String[] args) &#123; HashTest a = new HashTest(); HashTest b = new HashTest(); a.setI(1); b.setI(1); Set&lt;HashTest&gt; set = new HashSet&lt;HashTest&gt;(); set.add(a); set.add(b); System.out.println(a.hashCode() == b.hashCode()); System.out.println(a.equals(b)); System.out.println(set); &#125;&#125;复制代码 输出结果为： 1234trueFalse[HashTest@1, HashTest@1]复制代码 以上这个示例，我们只是重写了HashCode方法，从上面的结果可以看出，虽然两个对象的HashCode相等，但是实际上两个对象并不是相等，因为我们没有重写equals方法，那么就会调用Object默认的equals方法，显示这是两个不同的对象。 这里我们将生成的对象放到了HashSet中，而HashSet中只能够存放唯一的对象，也就是相同的（适用于equals方法）的对象只会存放一个，但是这里实际上是两个对象ab都被放到了HashSet中，这样HashSet就失去了他本身的意义了。 下面我们继续重写equals方法： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class HashTest &#123; private int i; public int getI() &#123; return i; &#125; public void setI(int i) &#123; this.i = i; &#125; public boolean equals(Object object) &#123; if (object == null) &#123; return false; &#125; if (object == this) &#123; return true; &#125; if (!(object instanceof HashTest)) &#123; return false; &#125; HashTest other = (HashTest) object; if (other.getI() == this.getI()) &#123; return true; &#125; return false; &#125; public int hashCode() &#123; return i % 10; &#125; public final static void main(String[] args) &#123; HashTest a = new HashTest(); HashTest b = new HashTest(); a.setI(1); b.setI(1); Set&lt;HashTest&gt; set = new HashSet&lt;HashTest&gt;(); set.add(a); set.add(b); System.out.println(a.hashCode() == b.hashCode()); System.out.println(a.equals(b)); System.out.println(set); &#125;&#125;复制代码 输出结果如下所示。 从结果我们可以看出，现在两个对象就完全相等了，HashSet中也只存放了一份对象。 注意： hashCode()只是简单示例写的，真正的生产换将不是这样的 1234truetrue[HashTest@1]复制代码 HashMap的hashcode的作用hashCode的存在主要是用于查找的快捷性，如Hashtable，HashMap等，hashCode是用来在散列存储结构中确定对象的存储地址的。 如果两个对象相同，就是适用于equals(java.lang.Object) 方法，那么这两个对象的hashCode一定要相同。 如果对象的equals方法被重写，那么对象的hashCode也尽量重写，并且产生hashCode使用的对象，一定要和equals方法中使用的一致，否则就会违反上面提到的第2点。 两个对象的hashCode相同，并不一定表示两个对象就相同，也就是不一定适用于equals(java.lang.Object) 方法，只能够说明这两个对象在散列存储结构中，如Hashtable，他们“存放在同一个篮子里”。 什么时候需要重写？ 一般的地方不需要重载hashCode，只有当类需要放在HashTable、HashMap、HashSet等等hash结构的集合时才会重载hashCode，那么为什么要重载hashCode呢？ 要比较两个类的内容属性值，是否相同时候，根据hashCode 重写规则，重写类的 指定字段的hashCode()，equals()方法。 例如 1234567891011121314151617181920212223242526272829303132public class EmpWorkCondition&#123; /** * 员工ID */ private Integer empId; /** * 员工服务总单数 */ private Integer orderSum; @Override public boolean equals(Object o) &#123; if (this == o) &#123; return true; &#125; if (o == null || getClass() != o.getClass()) &#123; return false; &#125; EmpWorkCondition that = (EmpWorkCondition) o; return Objects.equals(empId, that.empId); &#125; @Override public int hashCode() &#123; return Objects.hash(empId); &#125; // 省略 getter setter&#125;复制代码 12345678910111213141516171819public static void main(String[] args) &#123; List&lt;EmpWorkCondition&gt; list1 = new ArrayList&lt;EmpWorkCondition&gt;(); EmpWorkCondition emp1 = new EmpWorkCondition(); emp1.setEmpId(100); emp1.setOrderSum(90000); list1.add(emp1); List&lt;EmpWorkCondition&gt; list2 = new ArrayList&lt;EmpWorkCondition&gt;(); EmpWorkCondition emp2 = new EmpWorkCondition(); emp2.setEmpId(100); list2.add(emp2); System.out.println(list1.contains(emp2));&#125;复制代码 输出结果：true 上面的方法，做的事情就是，比较两个集合中的，实体类对象属性值，是否一致 OrderSum 不在比较范围内，因为没有重写它的，equals()和hashCode()方法 为什么要重载equal方法？ 因为Object的equal方法默认是两个对象的引用的比较，意思就是指向同一内存,地址则相等，否则不相等；如果你现在需要利用对象里面的值来判断是否相等，则重载equal方法。 为什么重载hashCode方法？一般的地方不需要重载hashCode，只有当类需要放在HashTable、HashMap、HashSet等等hash结构的集合时才会重载hashCode，那么为什么要重载hashCode呢？ 如果你重写了equals，比如说是基于对象的内容实现的，而保留hashCode的实现不变，那么很可能某两个对象明明是“相等”，而hashCode却不一样。 这样，当你用其中的一个作为键保存到hashMap、hasoTable或hashSet中，再以“相等的”找另一个作为键值去查找他们的时候，则根本找不到。 为什么equals()相等，hashCode就一定要相等，而hashCode相等，却不要求equals相等? 1、因为是按照hashCode来访问小内存块，所以hashCode必须相等。 2、HashMap获取一个对象是比较key的hashCode相等和equal为true。 之所以hashCode相等，却可以equal不等，就比如ObjectA和ObjectB他们都有属性name，那么hashCode都以name计算，所以hashCode一样，但是两个对象属于不同类型，所以equal为false。 为什么需要hashCode? 1、通过hashCode可以很快的查到小内存块。 2、通过hashCode比较比equal方法快，当get时先比较hashCode，如果hashCode不同，直接返回false。 ArrayList、LinkedList、Vector的区别List的三个子类的特点 ArrayList: 底层数据结构是数组，查询快，增删慢。 线程不安全，效率高。 Vector: 底层数据结构是数组，查询快，增删慢。 线程安全，效率低。 Vector相对ArrayList查询慢(线程安全的)。 Vector相对LinkedList增删慢(数组结构)。 LinkedList 底层数据结构是链表，查询慢，增删快。 线程不安全，效率高。 Vector和ArrayList的区别 Vector是线程安全的,效率低。 ArrayList是线程不安全的,效率高。 共同点:底层数据结构都是数组实现的,查询快,增删慢。 ArrayList和LinkedList的区别 ArrayList底层是数组结果,查询和修改快。 LinkedList底层是链表结构的,增和删比较快,查询和修改比较慢。 共同点:都是线程不安全的 List有三个子类使用 查询多用ArrayList。 增删多用LinkedList。 如果都多ArrayList。 String、StringBuffer与StringBuilder的区别String：适用于少量的字符串操作的情况。 StringBuilder：适用于单线程下在字符缓冲区进行大量操作的情况。 StringBuffer：适用多线程下在字符缓冲区进行大量操作的情况。 StringBuilder：是线程不安全的，而StringBuffer是线程安全的。 这三个类之间的区别主要是在两个方面，即运行速度和线程安全这两方面。 首先说运行速度，或者说是执行速度，在这方面运行速度快慢为：StringBuilder &gt; StringBuffer &gt; String。 String最慢的原因 String为字符串常量，而StringBuilder和StringBuffer均为字符串变量，即String对象一旦创建之后该对象是不可更改的，但后两者的对象是变量，是可以更改的。 再来说线程安全 在线程安全上，StringBuilder是线程不安全的，而StringBuffer是线程安全的。 如果一个StringBuffer对象在字符串缓冲区被多个线程使用时，StringBuffer中很多方法可以带有synchronized关键字，所以可以保证线程是安全的，但StringBuilder的方法则没有该关键字，所以不能保证线程安全，有可能会出现一些错误的操作。所以如果要进行的操作是多线程的，那么就要使用StringBuffer，但是在单线程的情况下，还是建议使用速度比较快的StringBuilder。 Map、Set、List、Queue、Stack的特点与用法Map Map是键值对，键Key是唯一不能重复的，一个键对应一个值，值可以重复。 TreeMap可以保证顺序。 HashMap不保证顺序，即为无序的。 Map中可以将Key和Value单独抽取出来，其中KeySet()方法可以将所有的keys抽取正一个Set。而Values()方法可以将map中所有的values抽取成一个集合。 Set 不包含重复元素的集合，set中最多包含一个null元素。 只能用Lterator实现单项遍历，Set中没有同步方法。 List 有序的可重复集合。 可以在任意位置增加删除元素。 用Iterator实现单向遍历，也可用ListIterator实现双向遍历。 Queue Queue遵从先进先出原则。 使用时尽量避免add()和remove()方法,而是使用offer()来添加元素，使用poll()来移除元素，它的优点是可以通过返回值来判断是否成功。 LinkedList实现了Queue接口。 Queue通常不允许插入null元素。 Stack Stack遵从后进先出原则。 Stack继承自Vector。 它通过五个操作对类Vector进行扩展，允许将向量视为堆栈，它提供了通常的push和pop操作，以及取堆栈顶点的peek()方法、测试堆栈是否为空的empty方法等。 用法 如果涉及堆栈，队列等操作，建议使用List。 对于快速插入和删除元素的，建议使用LinkedList。 如果需要快速随机访问元素的，建议使用ArrayList。 更为精炼的总结 Collection 是对象集合， Collection 有两个子接口 List 和 Set List 可以通过下标 (1,2..) 来取得值，值可以重复。 Set 只能通过游标来取值，并且值是不能重复的。 ArrayList ， Vector ， LinkedList 是 List 的实现类 ArrayList 是线程不安全的， Vector 是线程安全的，这两个类底层都是由数组实现的。 LinkedList 是线程不安全的，底层是由链表实现的。 Map 是键值对集合 HashTable 和 HashMap 是 Map 的实现类。 HashTable 是线程安全的，不能存储 null 值。 HashMap 不是线程安全的，可以存储 null 值。 Stack类：继承自Vector，实现一个后进先出的栈。提供了几个基本方法，push、pop、peak、empty、search等。 Queue接口：提供了几个基本方法，offer、poll、peek等。已知实现类有LinkedList、PriorityQueue等。 HashMap和HashTable的区别https://segmentfault.com/a/1190000008101567 Hashtable是基于陈旧的Dictionary类的，HashMap是Java 1.2引进的Map接口的一个实现，它们都是集合中将数据无序存放的。 1、hashMap去掉了HashTable?的contains方法，但是加上了containsValue()和containsKey()方法 HashTable Synchronize同步的，线程安全，HashMap不允许空键值为空?，效率低。 HashMap 非Synchronize线程同步的，线程不安全，HashMap允许空键值为空?，效率高。 Hashtable是基于陈旧的Dictionary类的，HashMap是Java 1.2引进的Map接口的一个实现，它们都是集合中将数据无序存放的。 Hashtable的方法是同步的，HashMap未经同步，所以在多线程场合要手动同步HashMap这个区别就像Vector和ArrayList一样。 查看Hashtable的源代码就可以发现，除构造函数外，Hashtable的所有 public 方法声明中都有 synchronized 关键字，而HashMap的源代码中则连 synchronized 的影子都没有，当然，注释除外。 2、Hashtable不允许 null 值(key 和 value 都不可以)，HashMap允许 null 值(key和value都可以)。 3、两者的遍历方式大同小异，Hashtable仅仅比HashMap多一个elements方法。 12345678Hashtable table = new Hashtable();table.put(&quot;key&quot;, &quot;value&quot;);Enumeration em = table.elements();while (em.hasMoreElements()) &#123; String obj = (String) em.nextElement(); System.out.println(obj);&#125;复制代码 4、HashTable使用Enumeration，HashMap使用Iterator 从内部机制实现上的区别如下： 哈希值的使用不同，Hashtable直接使用对象的hashCode 123int hash = key.hashCode();int index = (hash &amp; 0x7FFFFFFF) % tab.length;复制代码 而HashMap重新计算hash值，而且用与代替求模： 12345678910111213int hash = hash(k);int i = indexFor(hash, table.length);static int hash(Object x) &#123;&amp;emsp;&amp;emsp;int h = x.hashCode();&amp;emsp;&amp;emsp;h += ~(h &lt;&lt; 9);&amp;emsp;&amp;emsp;h ^= (h &gt;&gt;&gt; 14);&amp;emsp;&amp;emsp;h += (h &lt;&lt; 4);&amp;emsp;&amp;emsp;h ^= (h &gt;&gt;&gt; 10);&amp;emsp;&amp;emsp;return h;&#125;复制代码 123static int indexFor(int h， int length) &#123;&amp;emsp;&amp;emsp;return h &amp; (length-1);复制代码 Hashtable中hash数组默认大小是11，增加的方式是 old*2+1。HashMap中hash数组的默认大小是16，而且一定是2的指数。 JDK7与JDK8中HashMap的实现JDK7中的HashMap HashMap底层维护一个数组，数组中的每一项都是一个Entry。 12transient Entry&lt;K,V&gt;[] table;复制代码 我们向 HashMap 中所放置的对象实际上是存储在该数组当中。 而Map中的key，value则以Entry的形式存放在数组中。 123456static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; V value; Entry&lt;K,V&gt; next; int hash;复制代码 总结一下map.put后的过程： 当向 HashMap 中 put 一对键值时，它会根据 key的 hashCode 值计算出一个位置， 该位置就是此对象准备往数组中存放的位置。 如果该位置没有对象存在，就将此对象直接放进数组当中；如果该位置已经有对象存在了，则顺着此存在的对象的链开始寻找(为了判断是否是否值相同，map不允许&lt;key,value&gt;键值对重复)， 如果此链上有对象的话，再去使用 equals方法进行比较，如果对此链上的每个对象的 equals 方法比较都为 false，则将该对象放到数组当中，然后将数组中该位置以前存在的那个对象链接到此对象的后面。 JDK8中的HashMap JDK8中采用的是位桶+链表/红黑树（有关红黑树请查看红黑树）的方式，也是非线程安全的。当某个位桶的链表的长度达到某个阀值的时候，这个链表就将转换成红黑树。 JDK8中，当同一个hash值的节点数不小于8时，将不再以单链表的形式存储了，会被调整成一颗红黑树（上图中null节点没画）。这就是JDK7与JDK8中HashMap实现的最大区别。 接下来，我们来看下JDK8中HashMap的源码实现。 JDK中Entry的名字变成了Node，原因是和红黑树的实现TreeNode相关联。 12transient Node&lt;K,V&gt;[] table;复制代码 当冲突节点数不小于8-1时，转换成红黑树。 12static final int TREEIFY_THRESHOLD = 8;复制代码 HashMap和ConcurrentHashMap的区别，HashMap的底层源码为了线程安全从ConcurrentHashMap代码中可以看出，它引入了一个“分段锁”的概念，具体可以理解为把一个大的Map拆分成N个小的HashTable，根据key.hashCode()来决定把key放到哪个HashTable中。 Hashmap本质是数组加链表。根据key取得hash值，然后计算出数组下标，如果多个key对应到同一个下标，就用链表串起来，新插入的在前面。 ConcurrentHashMap：在hashMap的基础上，ConcurrentHashMap将数据分为多个segment，默认16个（concurrency level），然后每次操作对一个segment加锁，避免多线程锁的几率，提高并发效率。 总结 JDK6,7中的ConcurrentHashmap主要使用Segment来实现减小锁粒度，把HashMap分割成若干个Segment，在put的时候需要锁住Segment，get时候不加锁，使用volatile来保证可见性，当要统计全局时（比如size），首先会尝试多次计算modcount来确定，这几次尝试中，是否有其他线程进行了修改操作，如果没有，则直接返回size。如果有，则需要依次锁住所有的Segment来计算。 jdk7中ConcurrentHashmap中，当长度过长碰撞会很频繁，链表的增改删查操作都会消耗很长的时间，影响性能。 jdk8 中完全重写了concurrentHashmap,代码量从原来的1000多行变成了 6000多 行，实现上也和原来的分段式存储有很大的区别。 JDK8中采用的是位桶+链表/红黑树（有关红黑树请查看红黑树）的方式，也是非线程安全的。当某个位桶的链表的长度达到某个阀值的时候，这个链表就将转换成红黑树。 JDK8中，当同一个hash值的节点数不小于8时，将不再以单链表的形式存储了，会被调整成一颗红黑树（上图中null节点没画）。这就是JDK7与JDK8中HashMap实现的最大区别。 主要设计上的变化有以下几点 1.jdk8不采用segment而采用node，锁住node来实现减小锁粒度。 2.设计了MOVED状态 当resize的中过程中 线程2还在put数据，线程2会帮助resize。 3.使用3个CAS操作来确保node的一些操作的原子性，这种方式代替了锁。 4.sizeCtl的不同值来代表不同含义，起到了控制的作用。 至于为什么JDK8中使用synchronized而不是ReentrantLock，我猜是因为JDK8中对synchronized有了足够的优化吧。 ConcurrentHashMap能完全替代HashTable吗hashTable虽然性能上不如ConcurrentHashMap，但并不能完全被取代，两者的迭代器的一致性不同的，hash table的迭代器是强一致性的，而concurrenthashmap是弱一致的。 ConcurrentHashMap的get，clear，iterator 都是弱一致性的。 Doug Lea 也将这个判断留给用户自己决定是否使用ConcurrentHashMap。 ConcurrentHashMap与HashTable都可以用于多线程的环境，但是当Hashtable的大小增加到一定的时候，性能会急剧下降，因为迭代时需要被锁定很长的时间。因为ConcurrentHashMap引入了分割(segmentation)，不论它变得多么大，仅仅需要锁定map的某个部分，而其它的线程不需要等到迭代完成才能访问map。简而言之，在迭代的过程中，ConcurrentHashMap仅仅锁定map的某个部分，而Hashtable则会锁定整个map。 那么既然ConcurrentHashMap那么优秀，为什么还要有Hashtable的存在呢？ConcurrentHashMap能完全替代HashTable吗？ HashTable虽然性能上不如ConcurrentHashMap，但并不能完全被取代，两者的迭代器的一致性不同的，HashTable的迭代器是强一致性的，而ConcurrentHashMap是弱一致的。 ConcurrentHashMap的get，clear，iterator 都是弱一致性的。 Doug Lea 也将这个判断留给用户自己决定是否使用ConcurrentHashMap。 那么什么是强一致性和弱一致性呢？ get方法是弱一致的，是什么含义？可能你期望往ConcurrentHashMap底层数据结构中加入一个元素后，立马能对get可见，但ConcurrentHashMap并不能如你所愿。换句话说，put操作将一个元素加入到底层数据结构后，get可能在某段时间内还看不到这个元素，若不考虑内存模型，单从代码逻辑上来看，却是应该可以看得到的。 下面将结合代码和java内存模型相关内容来分析下put/get方法。put方法我们只需关注Segment#put，get方法只需关注Segment#get，在继续之前，先要说明一下Segment里有两个volatile变量：count和table；HashEntry里有一个volatile变量：value。 总结 ConcurrentHashMap的弱一致性主要是为了提升效率，是一致性与效率之间的一种权衡。要成为强一致性，就得到处使用锁，甚至是全局锁，这就与Hashtable和同步的HashMap一样了。 为什么HashMap是线程不安全的HashMap 在并发执行 put 操作时会引起死循环，导致 CPU 利用率接近100%。因为多线程会导致 HashMap 的 Node 链表形成环形数据结构，一旦形成环形数据结构，Node 的 next 节点永远不为空，就会在获取 Node 时产生死循环。 如何线程安全的使用HashMap了解了 HashMap 为什么线程不安全，那现在看看如何线程安全的使用 HashMap。这个无非就是以下三种方式： Hashtable ConcurrentHashMap Synchronized Map Hashtable 例子 12345678//HashtableMap&lt;String, String&gt; hashtable = new Hashtable&lt;&gt;();//synchronizedMapMap&lt;String, String&gt; synchronizedHashMap = Collections.synchronizedMap(new HashMap&lt;String, String&gt;());//ConcurrentHashMapMap&lt;String, String&gt; concurrentHashMap = new ConcurrentHashMap&lt;&gt;();Hashtable复制代码 先稍微吐槽一下，为啥命名不是 HashTable 啊，看着好难受不管了就装作它叫HashTable 吧。这货已经不常用了，就简单说说吧。HashTable 源码中是使用?synchronized?来保证线程安全的，比如下面的 get 方法和 put 方法： 1234567public synchronized V get(Object key) &#123; // 省略实现&#125;public synchronized V put(K key, V value) &#123;// 省略实现&#125;复制代码 所以当一个线程访问 HashTable 的同步方法时，其他线程如果也要访问同步方法，会被阻塞住。举个例子，当一个线程使用 put 方法时，另一个线程不但不可以使用 put 方法，连 get 方法都不可以，好霸道啊！！！so~~，效率很低，现在基本不会选择它了。 ConcurrentHashMap ConcurrentHashMap 于 Java 7 的，和8有区别,在8中 CHM 摒弃了 Segment（锁段）的概念，而是启用了一种全新的方式实现,利用 CAS 算法，有时间会重新总结一下。 SynchronizedMap synchronizedMap() 方法后会返回一个 SynchronizedMap 类的对象，而在 SynchronizedMap 类中使用了 synchronized 同步关键字来保证对 Map 的操作是线程安全的。 性能对比 这是要靠数据说话的时代，所以不能只靠嘴说 CHM 快，它就快了。写个测试用例，实际的比较一下这三种方式的效率(源码来源)，下面的代码分别通过三种方式创建 Map 对象，使用 ExecutorService 来并发运行5个线程，每个线程添加/获取500K个元素。 123456789101112131415161718192021222324Test started for: class java.util.Hashtable2500K entried added/retrieved in 2018 ms2500K entried added/retrieved in 1746 ms2500K entried added/retrieved in 1806 ms2500K entried added/retrieved in 1801 ms2500K entried added/retrieved in 1804 msFor class java.util.Hashtable the average time is 1835 msTest started for: class java.util.Collections$SynchronizedMap2500K entried added/retrieved in 3041 ms2500K entried added/retrieved in 1690 ms2500K entried added/retrieved in 1740 ms2500K entried added/retrieved in 1649 ms2500K entried added/retrieved in 1696 msFor class java.util.Collections$SynchronizedMap the average time is 1963 msTest started for: class java.util.concurrent.ConcurrentHashMap2500K entried added/retrieved in 738 ms2500K entried added/retrieved in 696 ms2500K entried added/retrieved in 548 ms2500K entried added/retrieved in 1447 ms2500K entried added/retrieved in 531 msFor class java.util.concurrent.ConcurrentHashMap the average time is 792 ms复制代码 ConcurrentHashMap 性能是明显优于 Hashtable 和 SynchronizedMap 的,CHM 花费的时间比前两个的一半还少。 多并发情况下HashMap是否还会产生死循环今天本来想看下了ConcurrentHashMap的源码，ConcurrentHashMap是Java 5中支持高并发、高吞吐量的线程安全HashMap实现。 在看很多博客在介绍ConcurrentHashMap之前，都说HashMap适用于单线程访问，这是因为HashMap的所有方法都没有进行锁同步，因此是线程不安全的，不仅如此，当多线程访问的时候还容易产生死循环。 虽然自己在前几天的时候看过HashMap的源码，感觉思路啥啥的都还清楚，对于多线程访问只知道HashMap是线程不安全的，但是不知道HashMap在多线程并发的情况下会产生死循环呢，为什么会产生,何种情况下才会产生死循环呢？？？ 《Java困惑》：多并发情况下HashMap是否还会产生死循环。 blog.csdn.net/u010412719/… 既然会产生死循环，为什么并发情况下，还是用ConcurrentHashMap。 jdk 好像有，但是Jdk8 已经修复了这个问题。 TreeMap、HashMap、LindedHashMap的区别LinkedHashMap可以保证HashMap集合有序，存入的顺序和取出的顺序一致。 TreeMap实现SortMap接口，能够把它保存的记录根据键排序,默认是按键值的升序排序，也可以指定排序的比较器，当用Iterator遍历TreeMap时，得到的记录是排过序的。 HashMap不保证顺序，即为无序的，具有很快的访问速度。 HashMap最多只允许一条记录的键为Null;允许多条记录的值为 Null。 HashMap不支持线程的同步。 我们在开发的过程中使用HashMap比较多，在Map中在Map 中插入、删除和定位元素，HashMap 是最好的选择。 但如果您要按自然顺序或自定义顺序遍历键，那么TreeMap会更好。 如果需要输出的顺序和输入的相同,那么用LinkedHashMap 可以实现,它还可以按读取顺序来排列。 Collection包结构，与Collections的区别blog.sina.com.cn/s/blog_1058… Collection 是集合类的上级接口，子接口主要有Set、List 、Map。 Collecions 是针对集合类的一个帮助类， 提供了操作集合的工具方法，一系列静态方法实现对各种集合的搜索、排序线性、线程安全化等操作。 例如 123Map&lt;String, Object&gt; map4 = Collections.synchronizedMap(new HashMap&lt;String, Object&gt;()); 线程安全 的HashMapCollections.sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c); 排序 List复制代码 Collection Collection 是单列集合 List 元素是有序的、可重复。 有序的 collection，可以对列表中每个元素的插入位置进行精确地控制。 可以根据元素的整数索引（在列表中的位置）访问元素，并搜索列表中的元素。 可存放重复元素，元素存取是有序的。 List接口中常用类 Vector：线程安全，但速度慢，已被ArrayList替代。底层数据结构是数组结构。 ArrayList：线程不安全，查询速度快。底层数据结构是数组结构。 LinkedList：线程不安全。增删速度快。底层数据结构是列表结构。 Set Set接口中常用的类 Set(集) 元素无序的、不可重复。 取出元素的方法只有迭代器。不可以存放重复元素，元素存取是无序的。 HashSet：线程不安全，存取速度快。它是如何保证元素唯一性的呢？依赖的是元素的hashCode方法和euqals方法。 TreeSet：线程不安全，可以对Set集合中的元素进行排序。它的排序是如何进行的呢？通过compareTo或者compare方法中的来保证元素的唯一性。元素是以二叉树的形式存放的。 Map map是一个双列集合 Hashtable:线程安全，速度快。底层是哈希表数据结构。是同步的。不允许null作为键，null作为值。 Properties:用于配置文件的定义和操作，使用频率非常高，同时键和值都是字符串。是集合中可以和IO技术相结合的对象。 HashMap:线程不安全，速度慢。底层也是哈希表数据结构。是不同步的。允许null作为键，null作为值，替代了Hashtable。 LinkedHashMap: 可以保证HashMap集合有序。存入的顺序和取出的顺序一致。 TreeMap：可以用来对Map集合中的键进行排序 try?catch?finally，try里有return，finally还执行么肯定会执行。finally{}块的代码。 只有在try{}块中包含遇到System.exit(0)。 之类的导致Java虚拟机直接退出的语句才会不执行。 当程序执行try{}遇到return时，程序会先执行return语句，但并不会立即返回——也就是把return语句要做的一切事情都准备好，也就是在将要返回、但并未返回的时候，程序把执行流程转去执行finally块，当finally块执行完成后就直接返回刚才return语句已经准备好的结果。 Excption与Error包结构。OOM你遇到过哪些情况，SO F你遇到过哪些情况Throwable是 Java 语言中所有错误或异常的超类。 Throwable包含两个子类: Error 和 Exception 。它们通常用于指示发生了异常情况。 Throwable包含了其线程创建时线程执行堆栈的快照，它提供了printStackTrace()等接口用于获取堆栈跟踪数据等信息。 Java将可抛出(Throwable)的结构分为三种类型： 被检查的异常(Checked Exception)。 运行时异常(RuntimeException)。 错误(Error)。 运行时异常RuntimeException 定义 : RuntimeException及其子类都被称为运行时异常。 特点 : Java编译器不会检查它 也就是说，当程序中可能出现这类异常时，倘若既”没有通过throws声明抛出它”，也”没有用try-catch语句捕获它”，还是会编译通过。 例如，除数为零时产生的ArithmeticException异常，数组越界时产生的IndexOutOfBoundsException异常，fail-fail机制产生的ConcurrentModificationException异常等，都属于运行时异常。 堆内存溢出 OutOfMemoryError（OOM） 除了程序计数器外，虚拟机内存的其他几个运行时区域都有发生OutOfMemoryError(OOM)异常的可能。 Java Heap 溢出。 一般的异常信息：java.lang.OutOfMemoryError:Java heap spacess。 java堆用于存储对象实例，我们只要不断的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，就会在对象数量达到最大堆容量限制后产生内存溢出异常。 堆栈溢出 StackOverflow （SOF） StackOverflowError 的定义： 当应用程序递归太深而发生堆栈溢出时，抛出该错误。 因为栈一般默认为1-2m，一旦出现死循环或者是大量的递归调用，在不断的压栈过程中，造成栈容量超过1m而导致溢出。 栈溢出的原因： 递归调用。 大量循环或死循环。 全局变量是否过多。 数组、List、map数据过大。 Java(OOP)面向对象的三个特征与含义封装（高内聚低耦合 –&gt;解耦） 封装是指将某事物的属性和行为包装到对象中，这个对象只对外公布需要公开的属性和行为，而这个公布也是可以有选择性的公布给其它对象。在java中能使用private、protected、public三种修饰符或不用（即默认defalut）对外部对象访问该对象的属性和行为进行限制。 java的继承（重用父类的代码） 继承是子对象可以继承父对象的属性和行为，亦即父对象拥有的属性和行为，其子对象也就拥有了这些属性和行为。 java中的多态（父类引用指向子类对象） 多态是指父对象中的同一个行为能在其多个子对象中有不同的表现。 有两种多态的机制：编译时多态、运行时多态。 1、方法的重载：重载是指同一类中有多个同名的方法，但这些方法有着不同的参数。，因此在编译时就可以确定到底调用哪个方法，它是一种编译时多态。 2、方法的重写：子类可以覆盖父类的方法，因此同样的方法会在父类中与子类中有着不同的表现形式。 Override和Overload的含义去区别重载 Overload方法名相同，参数列表不同(个数、顺序、类型不同)与返回类型无关。 重写Override 覆盖。 将父类的方法覆盖。 重写方法重写：方法名相同，访问修饰符只能大于被重写的方法访问修饰符，方法签名个数，顺序个数类型相同。 Override（重写） 方法名、参数、返回值相同。 子类方法不能缩小父类方法的访问权限。 子类方法不能抛出比父类方法更多的异常(但子类方法可以不抛出异常)。 存在于父类和子类之间。 方法被定义为final不能被重写。 Overload（重载） 参数类型、个数、顺序至少有一个不相同。 不能重载只有返回值不同的方法名。 存在于父类和子类、同类中。 而重载的规则 1、必须具有不同的参数列表。 2、可以有不同的返回类型，只要参数列表不同就可以了。 3、可以有不同的访问修饰符。 4、可以抛出不同的异常。 重写方法的规则 1、参数列表必须完全与被重写的方法相同，否则不能称其为重写而是重载。 2、返回的类型必须一直与被重写的方法的返回类型相同，否则不能称其为重写而是重载。 3、访问修饰符的限制一定要大于被重写方法的访问修饰符（public&gt;protected&gt;default&gt;private）。 4、重写方法一定不能抛出新的检查异常或者比被重写方法申明更加宽泛的检查型异常。 例如： 父类的一个方法申明了一个检查异常IOException，在重写这个方法是就不能抛出Exception,只能抛出IOException的子类异常，可以抛出非检查异常。 Interface与abstract类的区别Interface 只能有成员常量，只能是方法的声明。 Abstract class可以有成员变量，可以声明普通方法和抽象方法。 interface是接口，所有的方法都是抽象方法，成员变量是默认的public static final 类型。接口不能实例化自己。 abstract class是抽象类，至少包含一个抽象方法的累叫抽象类，抽象类不能被自身实例化，并用abstract关键字来修饰。 Static?class?与non?static?class的区别static class（内部静态类） 1、用static修饰的是内部类，此时这个内部类变为静态内部类；对测试有用。 2、内部静态类不需要有指向外部类的引用。 3、静态类只能访问外部类的静态成员，不能访问外部类的非静态成员。 non static class（非静态内部类） 1、非静态内部类需要持有对外部类的引用。 2、非静态内部类能够访问外部类的静态和非静态成员。 3、一个非静态内部类不能脱离外部类实体被创建。 4、一个非静态内部类可以访问外部类的数据和方法。 java多态的实现原理www.cnblogs.com/startRuning… foreach与正常for循环效率对比用for循环arrayList 10万次花费时间：5毫秒。 用foreach循环arrayList 10万次花费时间：7毫秒。 用for循环linkList 10万次花费时间：4481毫秒。 用foreach循环linkList 10万次花费时间：5毫秒。 循环ArrayList时，普通for循环比foreach循环花费的时间要少一点。 循环LinkList时，普通for循环比foreach循环花费的时间要多很多。 当我将循环次数提升到一百万次的时候，循环ArrayList，普通for循环还是比foreach要快一点；但是普通for循环在循环LinkList时，程序直接卡死。 ArrayList：ArrayList是采用数组的形式保存对象的，这种方式将对象放在连续的内存块中，所以插入和删除时比较麻烦，查询比较方便。 LinkList：LinkList是将对象放在独立的空间中，而且每个空间中还保存下一个空间的索引，也就是数据结构中的链表结构，插入和删除比较方便，但是查找很麻烦，要从第一个开始遍历。 结论： 需要循环数组结构的数据时，建议使用普通for循环，因为for循环采用下标访问，对于数组结构的数据来说，采用下标访问比较好。 需要循环链表结构的数据时，一定不要使用普通for循环，这种做法很糟糕，数据量大的时候有可能会导致系统崩溃。 Java?IO与NIONIO是为了弥补IO操作的不足而诞生的，NIO的一些新特性有：非阻塞I/O，选择器，缓冲以及管道。管道（Channel），缓冲（Buffer） ，选择器（ Selector）是其主要特征。 概念解释 Channel——管道实际上就像传统IO中的流，到任何目的地(或来自任何地方)的所有数据都必须通过一个 Channel 对象。一个 Buffer 实质上是一个容器对象。 每一种基本 Java 类型都有一种缓冲区类型： 12345678ByteBuffer——byteCharBuffer——charShortBuffer——shortIntBuffer——intLongBuffer——longFloatBuffer——floatDoubleBuffer——double复制代码 Selector——选择器用于监听多个管道的事件，使用传统的阻塞IO时我们可以方便的知道什么时候可以进行读写，而使用非阻塞通道，我们需要一些方法来知道什么时候通道准备好了，选择器正是为这个需要而诞生的。 NIO和传统的IO有什么区别呢？ IO是面向流的，NIO是面向块（缓冲区）的。 IO面向流的操作一次一个字节地处理数据。一个输入流产生一个字节的数据，一个输出流消费一个字节的数据。，导致了数据的读取和写入效率不佳。 NIO面向块的操作在一步中产生或者消费一个数据块。按块处理数据比按(流式的)字节处理数据要快得多，同时数据读取到一个它稍后处理的缓冲区，需要时可在缓冲区中前后移动。这就增加了处理过程中的灵活性。通俗来说，NIO采取了“预读”的方式，当你读取某一部分数据时，他就会猜测你下一步可能会读取的数据而预先缓冲下来。 IO是阻塞的，NIO是非阻塞的 对于传统的IO，当一个线程调用read() 或 write()时，该线程被阻塞，直到有一些数据被读取，或数据完全写入。该线程在此期间不能再干任何事情了。 而对于NIO，使用一个线程发送读取数据请求，没有得到响应之前，线程是空闲的，此时线程可以去执行别的任务，而不是像IO中那样只能等待响应完成。 NIO和IO适用场景 NIO是为弥补传统IO的不足而诞生的，但是尺有所短寸有所长，NIO也有缺点，因为NIO是面向缓冲区的操作，每一次的数据处理都是对缓冲区进行的，那么就会有一个问题，在数据处理之前必须要判断缓冲区的数据是否完整或者已经读取完毕，如果没有，假设数据只读取了一部分，那么对不完整的数据处理没有任何意义。所以每次数据处理之前都要检测缓冲区数据。 那么NIO和IO各适用的场景是什么呢？ 如果需要管理同时打开的成千上万个连接，这些连接每次只是发送少量的数据，例如聊天服务器，这时候用NIO处理数据可能是个很好的选择。 而如果只有少量的连接，而这些连接每次要发送大量的数据，这时候传统的IO更合适。使用哪种处理数据，需要在数据的响应等待时间和检查缓冲区数据的时间上作比较来权衡选择。 通俗解释，最后，对于NIO和传统IO 有一个网友讲的生动的例子： 以前的流总是堵塞的，一个线程只要对它进行操作，其它操作就会被堵塞，也就相当于水管没有阀门，你伸手接水的时候，不管水到了没有，你就都只能耗在接水（流）上。 nio的Channel的加入，相当于增加了水龙头（有阀门），虽然一个时刻也只能接一个水管的水，但依赖轮换策略，在水量不大的时候，各个水管里流出来的水，都可以得到妥 善接纳，这个关键之处就是增加了一个接水工，也就是Selector，他负责协调，也就是看哪根水管有水了的话，在当前水管的水接到一定程度的时候，就切换一下：临时关上当 前水龙头，试着打开另一个水龙头（看看有没有水）。 当其他人需要用水的时候，不是直接去接水，而是事前提了一个水桶给接水工，这个水桶就是Buffer。也就是，其他人虽然也可能要等，但不会在现场等，而是回家等，可以做 其它事去，水接满了，接水工会通知他们。 这其实也是非常接近当前社会分工细化的现实，也是统分利用现有资源达到并发效果的一种很经济的手段，而不是动不动就来个并行处理，虽然那样是最简单的，但也是最浪费资源的方式。 java反射的作用于原理什么是Java的反射呢？ Java 反射是可以让我们在运行时，通过一个类的Class对象来获取它获取类的方法、属性、父类、接口等类的内部信息的机制。 这种动态获取信息以及动态调用对象的方法的功能称为JAVA的反射。 反射的作用？ 反射就是：在任意一个方法里： 1.如果我知道一个类的名称/或者它的一个实例对象， 我就能把这个类的所有方法和变量的信息找出来(方法名，变量名，方法，修饰符，类型，方法参数等等所有信息) 2.如果我还明确知道这个类里某个变量的名称，我还能得到这个变量当前的值。 3.当然，如果我明确知道这个类里的某个方法名+参数个数类型，我还能通过传递参数来运行那个类里的那个方法。 反射机制主要提供了以下功能： 在运行时判断任意一个对象所属的类。 在运行时构造任意一个类的对象。 在运行时判断任意一个类所具有的成员变量和方法。 在运行时调用任意一个对象的方法。 生成动态代理。 反射的原理？ JAVA语言编译之后会生成一个.class文件，反射就是通过字节码文件找到某一个类、类中的方法以及属性等。 反射的实现API有哪些？ 反射的实现主要借助以下四个类： 12345Class：类的对象Constructor：类的构造方法Field：类中的属性对象Method：类中的方法对象复制代码 反射的实例 blog.csdn.net/xuefeng_yan… www.cnblogs.com/zhaoyanjun/… 泛型常用特点12List&lt;String&gt;能否转为List&lt;Object&gt;复制代码 不可以强转类型的 这个问题涉及到了，范型向上转型 和 范型向下转型问题。 List向上转换至List（等价于List）会丢失String类的身份（String类型的特有接口）。 当需要由List向下转型时，你的程序必须明确的知道将对象转换成何种具体类型，不然这将是不安全的操作。 如果要强转类型,Json 序列化转型 123List&lt;String&gt; str = new ArrayList&lt;String&gt;();List&lt;Object&gt; obj= JSONObject.parseArray(JSONObject.toJSONString(str));复制代码 或者遍历，或者克隆，但是取出来就是（Object）了，需要强转，String 因为类型丢了。 解析XML的几种方式的原理与特点：DOM、SAXAndroid中三种常用解析XML的方式（DOM、SAX、PULL）简介及区别。 http://blog.csdn.net/cangchen/article/details/44034799 xml解析的两种基本方式：DOM和SAX的区别是? 123DOM: document object model。SAX: simple api for xml 。复制代码 dom一次性把xml文件全部加载到内存中简历一个结构一摸一样的树， 效率低。 SAX解析器的优点是解析速度快，占用内存少，效率高。 DOM在内存中以树形结构存放，因此检索和更新效率会更高。但是对于特别大的文档，解析和加载整个文档将会很耗资源。 DOM，它是生成一个树，有了树以后你搜索、查找都可以做。 SAX，它是基于流的，就是解析器从头到尾解析一遍xml文件，解析完了以后你不过想再查找重新解析。 sax解析器核心是事件处理机制。例如解析器发现一个标记的开始标记时，将所发现的数据会封装为一个标记开始事件，并把这个报告给事件处理器。 平时工作中，xml解析你是使用什么？ 123JDOMDOM4J复制代码 Java1.7与1.8,1.9,10 新特性1.5 自动装箱与拆箱 枚举(常用来设计单例模式) 静态导入 可变参数 内省 1.6 Web服务元数据 脚本语言支持 JTable的排序和过滤 更简单,更强大的JAX-WS 轻量级Http Server 嵌入式数据库 Derby 1.7 switch中可以使用字串了 运用List tempList = new ArrayList&lt;&gt;(); 即泛型实例化类型自动推断 语法上支持集合，而不一定是数组 新增一些取环境信息的工具方法 Boolean类型反转，空指针安全,参与位运算 两个char间的equals 安全的加减乘除 map集合支持并发请求，且可以写成 Map map = {name:”xxx”,age:18}; 1.8 允许在接口中有默认方法实现 Lambda表达式 函数式接口 方法和构造函数引用 Lambda的范围 内置函数式接口 Streams Parallel Streams Map 时间日期API Annotations 1.9 Jigsaw 项目;模块化源码 简化进程API 轻量级 JSON API 钱和货币的API 改善锁争用机制 代码分段缓存 智能Java编译, 第二阶段 HTTP 2.0客户端 Kulla计划: Java的REPL实现 10 本地变量类型推断 统一JDK仓库 垃圾回收器接口 G1的并行Full GC 应用程序类数据共享 ThreadLocal握手机制 设计模式：单例、工厂、适配器、责任链、观察者等等【示例】设计模式——单例模式、工厂模式、代理模式、观察者模式、装饰器模式 blog.csdn.net/learrrrrrrr… 菜鸟教程-设计模式 www.runoob.com/design-patt… 什么是设计模式 设计模式是一种解决方案，用于解决在软件设计中普遍存在的问题，是前辈们对之前软件设计中反复出现的问题的一个总结。 我们学设计模式，是为了学习如何合理的组织我们的代码，如何解耦，如何真正的达到对修改封闭对扩展开放的效果，而不是去背诵那些类的继承模式，然后自己记不住，回过头来就骂设计模式把你的代码搞复杂了，要反设计模式。 设计模式的六大原则 开闭原则：实现热插拔，提高扩展性。 里氏代换原则：实现抽象的规范，实现子父类互相替换； 依赖倒转原则：针对接口编程，实现开闭原则的基础； 接口隔离原则：降低耦合度，接口单独设计，互相隔离； 迪米特法则，又称不知道原则：功能模块尽量独立； 合成复用原则：尽量使用聚合，组合，而不是继承； 1、开闭原则（Open Close Principle） 开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。 2、里氏代换原则（Liskov Substitution Principle） 里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。 3、依赖倒转原则（Dependence Inversion Principle） 这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。 4、接口隔离原则（Interface Segregation Principle） 这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。 5、迪米特法则，又称最少知道原则（Demeter Principle） 最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。 6、合成复用原则（Composite Reuse Principle） 合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。 JNI的使用www.cnblogs.com/larryzeal/p… JNI是 Java Native Interface 的缩写，它提供了若干的API实现了Java和其他语言的通信（主要是C&amp;C++）。从Java1.1开始，JNI标准成为java平台的一部分，它允许Java代码和其他语言写的代码进行交互。JNI一开始是为了本地已编译语言，尤其是C和C++而设计的，但是它并不妨碍你使用其他编程语言，只要调用约定受支持就可以了。使用java与本地已编译的代码交互，通常会丧失平台可移植性。 JNI步骤 java类中编写带有native 声明的方法。 使用 javac 命令编译所编写的java类。 使用 javah 命令生成头文件。 使用C/C++实现本地方法。 生成动态连接库。 执行（java）。 JNI实例 12345678910public class HelloWorld &#123; public native void displayHelloWorld();//所有native关键词修饰的都是对本地的声明 static &#123; System.loadLibrary(&quot;hello&quot;);//载入本地库 &#125; public static void main(String[] args) &#123; new HelloWorld().displayHelloWorld(); &#125;&#125;复制代码 AOP是什么AOP(Aspect Oriented Programming) 面向切面编程，是目前软件开发中的一个热点，是Spring框架内容，利用AOP可以对业务逻辑的各个部分隔离，从而使的业务逻辑各部分的耦合性降低，提高程序的可重用性，踢开开发效率，主要功能：日志记录，性能统计，安全控制，事务处理，异常处理等。 AOP实现原理是java动态代理，但是jdk的动态代理必须实现接口，所以spring的aop是用cglib这个库实现的，cglis使用里asm这个直接操纵字节码的框架，所以可以做到不使用接口的情况下实现动态代理。 OOP是什么OOP面向对象编程，针对业务处理过程的实体及其属性和行为进行抽象封装，以获得更加清晰高效的逻辑单元划分。 AOP与OOP的区别OOP面向对象编程，针对业务处理过程的实体及其属性和行为进行抽象封装，以获得更加清晰高效的逻辑单元划分。而AOP则是针对业务处理过程中的切面进行提取，它所面对的是处理过程的某个步骤或阶段，以获得逻辑过程的中各部分之间低耦合的隔离效果。这两种设计思想在目标上有着本质的差异。 举例： 对于“雇员”这样一个业务实体进行封装，自然是OOP的任务，我们可以建立一个“Employee”类，并将“雇员”相关的属性和行为封装其中。而用AOP 设计思想对“雇员”进行封装则无从谈起。 同样，对于“权限检查”这一动作片段进行划分，则是AOP的目标领域。 OOP面向名次领域，AOP面向动词领域。 总之AOP可以通过预编译方式和运行期动态代理实现在不修改源码的情况下，给程序动态同意添加功能的一项技术。","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"face","slug":"java/face","permalink":"http://io.stelawliet.top/categories/java/face/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"}]},{"title":"tomcat分析@掘金","slug":"Linux/server/Tomcat/Tomcat组成与工作原理","date":"2018-08-02T08:38:04.000Z","updated":"2018-08-03T06:38:00.000Z","comments":true,"path":"2018/08/02/Linux/server/Tomcat/Tomcat组成与工作原理/","link":"","permalink":"http://io.stelawliet.top/2018/08/02/Linux/server/Tomcat/Tomcat组成与工作原理/","excerpt":"","text":"Tomcat组成与工作原理Tomcat是什么 开源的 Java Web 应用服务器，实现了 Java EE(Java Platform Enterprise Edition)的部 分技术规范，比如 Java Servlet、Java Server Page、JSTL、Java WebSocket。Java EE 是 Sun 公 司为企业级应用推出的标准平台，定义了一系列用于企业级开发的技术规范，除了上述的之外，还有 EJB、Java Mail、JPA、JTA、JMS 等，而这些都依赖具体容器的实现。 img 上图对比了 Java EE 容器的实现情况，Tomcat 和 Jetty 都只提供了 Java Web 容器必需的 Servlet 和 JSP 规范，开发者要想实现其他的功能，需要自己依赖其他开源实现。 Glassfish 是由 sun 公司推出，Java EE 最新规范出来之后，首先会在 Glassfish 上进行实 现，所以是研究 Java EE 最新技术的首选。 最常见的情况是使用 Tomcat 作为 Java Web 服务器，使用 Spring 提供的开箱即用的强大 的功能，并依赖其他开源库来完成负责的业务功能实现。 Servlet容器Tomcat 组成如下图：主要有 Container 和 Connector 以及相关组件构成。 img Server：指的就是整个 Tomcat 服 务器，包含多组服务，负责管理和 启动各个 Service，同时监听 8005 端口发过来的 shutdown 命令，用 于关闭整个容器 ； Service：Tomcat 封装的、对外提 供完整的、基于组件的 web 服务， 包含 Connectors、Container 两个 核心组件，以及多个功能组件，各 个 Service 之间是独立的，但是共享 同一 JVM 的资源 ； Connector：Tomcat 与外部世界的连接器，监听固定端口接收外部请求，传递给 Container，并 将 Container 处理的结果返回给外部； Container：Catalina，Servlet 容器，内部有多层容器组成，用于管理 Servlet 生命周期，调用 servlet 相关方法。 Loader：封装了 Java ClassLoader，用于 Container 加载类文件； Realm：Tomcat 中为 web 应用程序提供访问认证和角色管理的机制； JMX：Java SE 中定义技术规范，是一个为应用程序、设备、系统等植入管理功能的框架，通过 JMX 可以远程监控 Tomcat 的运行状态； Jasper：Tomcat 的 Jsp 解析引擎，用于将 Jsp 转换成 Java 文件，并编译成 class 文件。 Session：负责管理和创建 session，以及 Session 的持久化(可自定义)，支持 session 的集群。 Pipeline：在容器中充当管道的作用，管道中可以设置各种 valve(阀门)，请求和响应在经由管 道中各个阀门处理，提供了一种灵活可配置的处理请求和响应的机制。 Naming：命名服务，JNDI， Java 命名和目录接口，是一组在 Java 应用中访问命名和目录服务的 API。命名服务将名称和对象联系起来，使得我们可以用名称访问对象，目录服务也是一种命名 服务，对象不但有名称，还有属性。Tomcat 中可以使用 JNDI 定义数据源、配置信息，用于开发 与部署的分离。 Container组成 img Engine：Servlet 的顶层容器，包含一 个或多个 Host 子容器；Host：虚拟主机，负责 web 应用的部 署和 Context 的创建；Context：Web 应用上下文，包含多个 Wrapper，负责 web 配置的解析、管 理所有的 Web 资源；Wrapper：最底层的容器，是对 Servlet 的封装，负责 Servlet 实例的创 建、执行和销毁。 生命周期管理Tomcat 为了方便管理组件和容器的生命周期，定义了从创建、启动、到停止、销毁共 12 中状态，tomcat 生命周期管理了内部状态变化的规则控制，组件和容器只需实现相应的生命周期 方法即可完成各生命周期内的操作(initInternal、startInternal、stopInternal、 destroyInternal)； 比如执行初始化操作时，会判断当前状态是否 New，如果不是则抛出生命周期异常；是的 话则设置当前状态为 Initializing，并执行 initInternal 方法，由子类实现，方法执行成功则设置当 前状态为 Initialized，执行失败则设置为 Failed 状态； img Tomcat 的生命周期管理引入了事件机制，在组件或容器的生命周期状态发生变化时会通 知事件监听器，监听器通过判断事件的类型来进行相应的操作。事件监听器的添加可以在 server.xml 文件中进行配置; Tomcat 各类容器的配置过程就是通过添加 listener 的方式来进行的，从而达到配置逻辑与 容器的解耦。如 EngineConfig、HostConfig、ContextConfig。EngineConfig：主要打印启动和停止日志HostConfig：主要处理部署应用，解析应用 META-INF/context.xml 并创建应用的 Context ContextConfig：主要解析并合并 web.xml，扫描应用的各类 web 资源 (filter、servlet、listener) img Tomcat 的启动过程 img 启动从 Tomcat 提供的 start.sh 脚本开始，shell 脚本会调用 Bootstrap 的 main 方法，实际 调用了 Catalina 相应的 load、start 方法。 load 方法会通过 Digester 进行 config/server.xml 的解析，在解析的过程中会根据 xml 中的关系 和配置信息来创建容器，并设置相关的属性。接着 Catalina 会调用 StandardServer 的 init 和 start 方法进行容器的初始化和启动。 按照 xml 的配置关系，server 的子元素是 service，service 的子元素是顶层容器 Engine，每层容器有持有自己的子容器，而这些元素都实现了生命周期管理 的各个方法，因此就很容易的完成整个容器的启动、关闭等生命周期的管理。 StandardServer 完成 init 和 start 方法调用后，会一直监听来自 8005 端口(可配置)，如果接收 到 shutdown 命令，则会退出循环监听，执行后续的 stop 和 destroy 方法，完成 Tomcat 容器的 关闭。同时也会调用 JVM 的 Runtime.getRuntime()﴿.addShutdownHook 方法，在虚拟机意外退 出的时候来关闭容器。 所有容器都是继承自 ContainerBase，基类中封装了容器中的重复工作，负责启动容器相关的组 件 Loader、Logger、Manager、Cluster、Pipeline，启动子容器(线程池并发启动子容器，通过 线程池 submit 多个线程，调用后返回 Future 对象，线程内部启动子容器，接着调用 Future 对象 的 get 方法来等待执行结果)。 12345678910111213List&lt;Future&lt;Void&gt;&gt; results = new ArrayList&lt;Future&lt;Void&gt;&gt;();for (int i = 0; i &lt; children.length; i++) &#123; results.add(startStopExecutor.submit(new StartChild(children[i])));&#125;boolean fail = false;for (Future&lt;Void&gt; result ： results) &#123; try &#123; result.get(); &#125; catch (Exception e) &#123; log.error(sm.getString(&quot;containerBase.threadedStartFailed&quot;)， e); fail = true; &#125;&#125;复制代码 Web 应用的部署方式注：catalina.home：安装目录;catalina.base：工作目录;默认值 user.dir Server.xml 配置 Host 元素，指定 appBase 属性，默认\\$catalina.base/webapps/ Server.xml 配置 Context 元素，指定 docBase，元素，指定 web 应用的路径 自定义配置：在\\$catalina.base/EngineName/HostName/XXX.xml 配置 Context 元素 HostConfig 监听了 StandardHost 容器的事件，在 start 方法中解析上述配置文件： 扫描 appbase 路径下的所有文件夹和 war 包，解析各个应用的 META-INF/context.xml，并 创建 StandardContext，并将 Context 加入到 Host 的子容器中。 解析$catalina.base/EngineName/HostName/下的所有 Context 配置，找到相应 web 应 用的位置，解析各个应用的 META-INF/context.xml，并创建 StandardContext，并将 Context 加入到 Host 的子容器中。 注： HostConfig 并没有实际解析 Context.xml，而是在 ContextConfig 中进行的。 HostConfig 中会定期检查 watched 资源文件(context.xml 配置文件) ContextConfig 解析 context.xml 顺序： 先解析全局的配置 config/context.xml 然后解析 Host 的默认配置 EngineName/HostName/context.xml.default 最后解析应用的 META-INF/context.xml ContextConfig 解析 web.xml 顺序： 先解析全局的配置 config/web.xml 然后解析 Host 的默认配置 EngineName/HostName/web.xml.default 接着解析应用的 MEB-INF/web.xml 扫描应用 WEB-INF/lib/下的 jar 文件，解析其中的 META-INF/web-fragment.xml 最后合并 xml 封装成 WebXml，并设置 Context 注： 扫描 web 应用和 jar 中的注解(Filter、Listener、Servlet)就是上述步骤中进行的。 容器的定期执行：backgroundProcess，由 ContainerBase 来实现的，并且只有在顶层容器 中才会开启线程。(backgroundProcessorDelay=10 标志位来控制) Servlet 生命周期 img Servlet 是用 Java 编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态 Web 内容。 请求到达 server 端，server 根据 url 映射到相应的 Servlet 判断 Servlet 实例是否存在，不存在则加载和实例化 Servlet 并调用 init 方法 Server 分别创建 Request 和 Response 对象，调用 Servlet 实例的 service 方法(service 方法 内部会根据 http 请求方法类型调用相应的 doXXX 方法) doXXX 方法内为业务逻辑实现，从 Request 对象获取请求参数，处理完毕之后将结果通过 response 对象返回给调用方 当 Server 不再需要 Servlet 时(一般当 Server 关闭时)，Server 调用 Servlet 的 destroy() 方 法。 load on startup 当值为 0 或者大于 0 时，表示容器在应用启动时就加载这个 servlet; 当是一个负数时或者没有指定时，则指示容器在该 servlet 被选择时才加载; 正数的值越小，启动该 servlet 的优先级越高; single thread model 每次访问 servlet，新建 servlet 实体对象，但并不能保证线程安全，同时 tomcat 会限制 servlet 的实例数目最佳实践：不要使用该模型，servlet 中不要有全局变量 请求处理过程  img 根据 server.xml 配置的指定的 connector 以及端口监听 http、或者 ajp 请求 请求到来时建立连接,解析请求参数,创建 Request 和 Response 对象,调用顶层容器 pipeline 的 invoke 方法 容器之间层层调用,最终调用业务 servlet 的 service 方法 Connector 将 response 流中的数据写到 socket 中 Pipeline 与 Valve  img Pipeline 可以理解为现实中的管道,Valve 为管道中的阀门,Request 和 Response 对象在管道中 经过各个阀门的处理和控制。 每个容器的管道中都有一个必不可少的 basic valve,其他的都是可选的,basic valve 在管道中最 后调用,同时负责调用子容器的第一个 valve。 Valve 中主要的三个方法:setNext、getNext、invoke;valve 之间的关系是单向链式结构,本身 invoke 方法中会调用下一个 valve 的 invoke 方法。 各层容器对应的 basic valve 分别是 StandardEngineValve、StandardHostValve、 StandardContextValve、StandardWrapperValve。 JSP引擎 img JSP 生命周期 编译阶段:servlet 容器编译 servlet 源文件,生成 servlet 类 初始化阶段:加载与 JSP 对应的 servlet 类, 创建其实例,并调用它的初始化方法 执行阶段:调用与 JSP 对应的 servlet 实例的 服务方法 销毁阶段:调用与 JSP 对应的 servlet 实例的 销毁方法,然后销毁 servlet 实例 JSP元素代码片段： &lt;% 代码片段 %&gt;JSP声明： &lt;%! declaration; [ declaration; ]+ … %&gt;JSP表达式：&lt;%= 表达式 %&gt;JSP注释： &lt;%– 注释 –%&gt;JSP指令： &lt;%@ directive attribute=“value” %&gt;JSP行为：HTML元素： html/head/body/div/p/…JSP隐式对象：request、response、out、session、application、config、pageContext、page、Exception JSP 元素说明代码片段:包含任意量的 Java 语句、变量、方法或表达式;JSP 声明:一个声明语句可以声明一个或多个变量、方法,供后面的 Java 代码使用;JSP 表达式:输出 Java 表达式的值,String 形式;JSP 注释:为代码作注释以及将某段代码注释掉JSP 指令:用来设置与整个 JSP 页面相关的属性,&lt;%@ page … %&gt;定义页面的依赖属性,比如 language、contentType、errorPage、 isErrorPage、import、isThreadSafe、session 等等&lt;%@ include … %&gt;包含其他的 JSP 文件、HTML 文件或文本文件,是该 JSP 文件的一部分,会 被同时编译执行&lt;%@ taglib … %&gt;引入标签库的定义,可以是自定义标签JSP 行为:jsp:include、jsp:useBean、jsp:setProperty、jsp:getProperty、jsp:forward Jsp 解析过程  img 代码片段:在_jspService()方法内直接输出 JSP 声明: 在 servlet 类中进行输出 JSP 表达式:在_jspService()方法内直接输出 JSP 注释:直接忽略,不输出 JSP 指令:根据不同指令进行区分,include:对引入的文件进行解析;page 相关的属性会做为 JSP 的属性,影响的是解析和请求处理时的行为 JSP 行为:不同的行为有不同的处理方式,jsp:useBean 为例,会从 pageContext 根据 scope 的 类别获取 bean 对象,如果没有会创建 bean,同时存到相应 scope 的 pageContext 中 HTML:在_jspService()方法内直接输出 JSP 隐式对象:在_jspService()方法会进行声明,只能在方法中使用; Connector img 阻塞 IO img 非阻塞 IO img IO多路复用 img 阻塞与非阻塞的区别在于进行读操作和写操作的系统调用时，如果此时内核态没有数据可读或者没有缓冲空间可写时，是否阻塞。 IO多路复用的好处在于可同时监听多个socket的可读和可写事件，这样就能使得应用可以同时监听多个socket，释放了应用线程资源。 Tomcat各类Connector对比 img JIO：用java.io编写的TCP模块，阻塞IO NIO：用java.nio编写的TCP模块，非阻塞IO，（IO多路复用） APR：全称Apache Portable Runtime，使用JNI的方式来进行读取文件以及进行网络传输 Apache Portable Runtime是一个高度可移植的库，它是Apache HTTP Server 2.x的核心。 APR具有许多用途，包括访问高级IO功能（如sendfile，epoll和OpenSSL），操作系统级功能（随机数生成，系统状态等）和本地进程处理（共享内存，NT管道和Unix套接字）。 表格中字段含义说明： Support Polling：是否支持基于IO多路复用的socket事件轮询 Polling Size：轮询的最大连接数 Wait for next Request：在等待下一个请求时，处理线程是否释放，BIO是没有释放的，所以在keep-alive=true的情况下处理的并发连接数有限 Read Request Headers：由于request header数据较少，可以由容器提前解析完毕，不需要阻塞 Read Request Body：读取request body的数据是应用业务逻辑的事情，同时Servlet的限制，是需要阻塞读取的 Write Response：跟读取request body的逻辑类似，同样需要阻塞写 NIO处理相关类 img Poller线程从EventQueue获取PollerEvent，并执行PollerEvent的run方法，调用Selector的select方法，如果有可读的Socket则创建Http11NioProcessor，放入到线程池中执行； CoyoteAdapter是Connector到Container的适配器，Http11NioProcessor调用其提供的service方法，内部创建Request和Response对象，并调用最顶层容器的Pipeline中的第一个Valve的invoke方法 Mapper主要处理http url 到servlet的映射规则的解析，对外提供map方法 NIO Connector主要参数 img CometComet是一种用于web的推送技术，能使服务器实时地将更新的信息传送到客户端，而无须客户端发出请求在WebSocket出来之前，如果不适用comet，只能通过浏览器端轮询Server来模拟实现服务器端推送。Comet支持servlet异步处理IO，当连接上数据可读时触发事件，并异步写数据(阻塞) img Tomcat要实现Comet，只需继承HttpServlet同时，实现CometProcessor接口 Begin：新的请求连接接入调用，可进行与Request和Response相关的对象初始化操作，并保存response对象，用于后续写入数据 Read：请求连接有数据可读时调用 End：当数据可用时，如果读取到文件结束或者response被关闭时则被调用 Error：在连接上发生异常时调用，数据读取异常、连接断开、处理异常、socket超时 Note： Read：在post请求有数据，但在begin事件中没有处理，则会调用read，如果read没有读取数据，在会触发Error回调，关闭socket End：当socket超时，并且response被关闭时也会调用；server被关闭时调用 Error：除了socket超时不会关闭socket，其他都会关闭socket End和Error时间触发时应关闭当前comet会话，即调用CometEvent的close方法Note：在事件触发时要做好线程安全的操作 异步Servlet img 传统流程： 首先，Servlet 接收到请求之后，request数据解析； 接着，调用业务接口的某些方法，以完成业务处理； 最后，根据处理的结果提交响应，Servlet 线程结束 img 异步处理流程： 客户端发送一个请求 Servlet容器分配一个线程来处理容器中的一个servlet servlet调用request.startAsync()，保存AsyncContext, 然后返回 任何方式存在的容器线程都将退出，但是response仍然保持开放 业务线程使用保存的AsyncContext来完成响应（线程池） 客户端收到响应 Servlet 线程将请求转交给一个异步线程来执行业务处理，线程本身返回至容器，此时 Servlet 还没有生成响应数据，异步线程处理完业务以后，可以直接生成响应数据（异步线程拥有 ServletRequest 和 ServletResponse 对象的引用） 为什么web应用中支持异步？ 推出异步，主要是针对那些比较耗时的请求：比如一次缓慢的数据库查询，一次外部REST API调用, 或者是其他一些I/O密集型操作。这种耗时的请求会很快的耗光Servlet容器的线程池，继而影响可扩展性。 Note：从客户端的角度来看，request仍然像任何其他的HTTP的request-response交互一样，只是耗费了更长的时间而已 异步事件监听 onStartAsync：Request调用startAsync方法时触发 onComplete：syncContext调用complete方法时触发 onError：处理请求的过程出现异常时触发 onTimeout：socket超时触发 Note :onError/ onTimeout触发后，会紧接着回调onCompleteonComplete 执行后，就不可再操作request和response","categories":[{"name":"server","slug":"server","permalink":"http://io.stelawliet.top/categories/server/"},{"name":"servlet","slug":"server/servlet","permalink":"http://io.stelawliet.top/categories/server/servlet/"}],"tags":[{"name":"摘抄","slug":"摘抄","permalink":"http://io.stelawliet.top/tags/摘抄/"},{"name":"掘金","slug":"掘金","permalink":"http://io.stelawliet.top/tags/掘金/"},{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"}]},{"title":"","slug":"TODOlist/2018-08-01","date":"2018-08-01T09:57:40.000Z","updated":"2018-08-01T09:59:44.000Z","comments":true,"path":"2018/08/01/TODOlist/2018-08-01/","link":"","permalink":"http://io.stelawliet.top/2018/08/01/TODOlist/2018-08-01/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Spring PropertySource","slug":"Java/spring/annotation/propertySource","date":"2018-07-31T15:02:34.000Z","updated":"2018-08-09T13:16:08.000Z","comments":true,"path":"2018/07/31/Java/spring/annotation/propertySource/","link":"","permalink":"http://io.stelawliet.top/2018/07/31/Java/spring/annotation/propertySource/","excerpt":"","text":"@PropertySource 指定外置的配置文件,支持properties和yaml @PropertySource(&quot;classpath:/test.properties&quot;) @Value 1. 基本数值 2. 可以写SpEL； #{} 3. 可以写${}；取出配置文件【properties】中的值（在运行环境变量里面的值） 123456@Value(\"张三\")private String name;@Value(\"#&#123;20-2&#125;\")private Integer age;@Value(\"$&#123;person.nickName&#125;\")private String nickName;","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"},{"name":"configuration","slug":"spring/annotation/configuration","permalink":"http://io.stelawliet.top/categories/spring/annotation/configuration/"}],"tags":[{"name":"propertySource","slug":"propertySource","permalink":"http://io.stelawliet.top/tags/propertySource/"},{"name":"value","slug":"value","permalink":"http://io.stelawliet.top/tags/value/"}]},{"title":"IOC","slug":"Java/spring/annotation/Bean Initialization","date":"2018-07-31T08:46:40.000Z","updated":"2018-08-10T14:49:23.000Z","comments":true,"path":"2018/07/31/Java/spring/annotation/Bean Initialization/","link":"","permalink":"http://io.stelawliet.top/2018/07/31/Java/spring/annotation/Bean Initialization/","excerpt":"","text":"IOC first bean EventListenerMethodProcessor ‘org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor.skipRequiredCheck’","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"IOC","slug":"java/framework/spring/IOC","permalink":"http://io.stelawliet.top/categories/java/framework/spring/IOC/"}],"tags":[{"name":"ioc","slug":"ioc","permalink":"http://io.stelawliet.top/tags/ioc/"},{"name":"postProcessor","slug":"postProcessor","permalink":"http://io.stelawliet.top/tags/postProcessor/"}]},{"title":"","slug":"Linux/server/Tomcat/SpringBoot内嵌Tomcat自定义","date":"2018-07-31T02:22:47.000Z","updated":"2018-07-31T02:24:06.000Z","comments":true,"path":"2018/07/31/Linux/server/Tomcat/SpringBoot内嵌Tomcat自定义/","link":"","permalink":"http://io.stelawliet.top/2018/07/31/Linux/server/Tomcat/SpringBoot内嵌Tomcat自定义/","excerpt":"","text":"SpringBoot 嵌入式Servlet容器接口 EmbeddedServletContainerCustomizer 自定义Context TomcatConnectorCustimizer factory.addConnectorCustomizers( conn -&gt; conn.setPort(12345); ); boot2.0实现接口WebServerFactoryCustomizer @Configuration public class TomcatConfiguration implements WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; { @Override public void customize(TomcatServletWebServerFactory factory) { Connector connector = new Connector(); connector.setPort(23333); factory.addAdditionalTomcatConnectors(connector); System.out.println(&quot;factory = &quot; + factory); }","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"server","slug":"java/server","permalink":"http://io.stelawliet.top/categories/java/server/"},{"name":"tomcat","slug":"java/server/tomcat","permalink":"http://io.stelawliet.top/categories/java/server/tomcat/"},{"name":"servlet容器","slug":"java/server/tomcat/servlet容器","permalink":"http://io.stelawliet.top/categories/java/server/tomcat/servlet容器/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"},{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/tags/spring/"}]},{"title":"","slug":"Java/group/Maven jar打包","date":"2018-07-30T13:42:54.000Z","updated":"2018-07-31T02:22:16.000Z","comments":true,"path":"2018/07/30/Java/group/Maven jar打包/","link":"","permalink":"http://io.stelawliet.top/2018/07/30/Java/group/Maven jar打包/","excerpt":"","text":"用maven-assembly-plugin打包上面的方法，我们还需要点击很多命令去打包。这次利用一个新的插件，可以打包更简单。同样，在pom.xml中加入如下代码。上文的maven-shade-plugin插件代码可以删除。最好不要写2个插件代码。 1234567891011121314151617181920212223&lt;plugin&gt; &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt; &lt;version&gt;2.4&lt;/version&gt; &lt;configuration&gt; &lt;descriptorRefs&gt; &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt; &lt;/descriptorRefs&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;Main.Main&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;make-assembly&lt;/id&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;single&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; 这里同样配置了一个manifest标签来配置Main函数的入口。然后通过如下指令来实现打包。 1mvn assembly:assembly 如果使用IDEA的话，可以通过自带的maven管理工具代替执行上面的命令。如下图所示，点击蓝色的部分。 img 然后通过执行java -jar cps-1.0-SNAPSHOT-jar-with-dependencies.jar运行。","categories":[],"tags":[]},{"title":"","slug":"Linux/server/Tomcat/Embed Tomcat ScanFilter","date":"2018-07-30T13:11:03.000Z","updated":"2018-07-30T13:12:14.000Z","comments":true,"path":"2018/07/30/Linux/server/Tomcat/Embed Tomcat ScanFilter/","link":"","permalink":"http://io.stelawliet.top/2018/07/30/Linux/server/Tomcat/Embed Tomcat ScanFilter/","excerpt":"","text":"123456789101112server: tomcat: additional-tld-skip-patterns: &quot;*.jar&quot; context: JarScanner: scanClassPath: false JarScanFilter: defaultPluggabilityScan: &quot;false&quot; util: scan: StandardJarScanFilter: jarsToSkip: &quot;*&quot;","categories":[],"tags":[]},{"title":"annotation-component @Autowired","slug":"Java/spring/annotation/@Autowired","date":"2018-07-27T14:18:50.000Z","updated":"2018-08-18T14:29:50.000Z","comments":true,"path":"2018/07/27/Java/spring/annotation/@Autowired/","link":"","permalink":"http://io.stelawliet.top/2018/07/27/Java/spring/annotation/@Autowired/","excerpt":"","text":"@Autowired 自动装配. 不管成员属性的修饰符 不管构造函数是否有参数都会把容器中的成员属性bean注入到当前对象的bean中. @Authwired 注解也可以应用在数组类型的属性上, 此时 Spring 将会把所有匹配的 Bean 进行自动装配. @Authwired 注解也可以应用在集合属性上, 此时 Spring 读取该集合的类型信息, 然后自动装配所有与之兼容的 Bean. @Authwired 注解用在 java.util.Map 上时, 若该 Map 的键值为 String, 那么 Spring 将自动装配与之 Map 值类型兼容的 Bean, 此时 Bean 的名称作为键值 1234567891011121314151617181920212223242526//默认加在ioc容器中的组件，容器启动会调用无参构造器创建对象，再进行初始化赋值等操作@Componentpublic class Boss &#123; //@Autowired private Car car; //构造器要用的组件，都是从容器中获取 //@Autowired 在构造器上ioc会调用对应的构造器创建对象. //@Autowired public Boss(Car car)&#123; this.car = car; System.out.println(\"Boss...有参构造器\"); &#125; public Car getCar() &#123; return car; &#125; //@Autowired //标注在方法，Spring容器创建当前对象，就会调用方法，完成赋值； //方法使用的参数，自定义类型的值从ioc容器中获取 public void setCar( @Autowired Car car) &#123; this.car = car; &#125;&#125; @Resource可以指定名称beanName. 如果构造函数没有改成员属性作为参数则无法完成注入. @Inject不管构造函数是否有参数都会把容器中的成员属性bean注入到当前对象的bean中.","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"}],"tags":[{"name":"Autowired","slug":"Autowired","permalink":"http://io.stelawliet.top/tags/Autowired/"}]},{"title":"前缀树","slug":"algorithm/前缀树","date":"2018-07-27T08:31:22.000Z","updated":"2018-08-07T14:41:13.000Z","comments":true,"path":"2018/07/27/algorithm/前缀树/","link":"","permalink":"http://io.stelawliet.top/2018/07/27/algorithm/前缀树/","excerpt":"","text":"字符串前缀树java实现1234567891011class TrieNode&#123; private int pass;//记录包含当前节点的个数 private int end;//记录以当前节点结尾的个数 private TrieNode[] next;//记录当前结点指向的哪些字符 public TrieNode() &#123; this.end=0; this.pass=0; this.next=new TrieNode[26];//a-z的对应next数组的0-25的下标 &#125;&#125; insert 遍历字符数组,计算下标.this.pass++ 记录成功insert的次数next下标的值代表当前节点是否有指向的值没有则新建一个结点pass++ 记录经过这个结点的个数遍历完后给当前节点的end++. 记录有以当前节点结尾的个数123456789101112131415void insert(String s)&#123; if (s==null||s.trim().equals(\"\")) return; char[] chars = s.toCharArray(); TrieNode node = this; node.pass++; for (char char0 : chars) &#123; int index = char0 - 'a'; if (node.next[index] == null) &#123; node.next[index] = new TrieNode(); &#125; node = node.next[index]; node.pass++; &#125; node.end++; &#125; search 只要在字符数组遍历中找不到下个结点的值(==null)就直接返回0(没有找到);遍历完后返回当前节点的end 123456789101112131415int search(String s)&#123; //判断输入 if (s==null||s.trim().equals(\"\"))return 0; char[] chars = s.toCharArray(); TrieNode node = this; for (char char0 : chars) &#123; //计算下标 int index = char0 - 97; if (node.next[index] == null) &#123; return 0; &#125; node = node.next[index]; &#125; return node.end; &#125; delete 先判断是否存在当前字符串.遍历字符数组,计算每个字符对应的next中的下标根据下标从next数组中找到对应字符的结点对应字符的结点的pass–如果&lt;=0则表示以后结点的指向只剩当前字符串.遍历完所有的字符后end–,更新以当前结点结尾的记录. 12345678910111213141516void delete(String s)&#123; if (search(s)&lt;0) return; char[] chars = s.toCharArray(); TrieNode node = this; this.pass--; for (char char0 : chars) &#123; int index = char0 - 'a'; int nextPass = --node.next[index].pass; if (nextPass &lt;= 0) &#123; node.next[index] = null; return; &#125; node = node.next[index]; &#125; node.end--; &#125;","categories":[{"name":"algorithme","slug":"algorithme","permalink":"http://io.stelawliet.top/categories/algorithme/"},{"name":"dataStructure","slug":"algorithme/dataStructure","permalink":"http://io.stelawliet.top/categories/algorithme/dataStructure/"},{"name":"tree","slug":"algorithme/dataStructure/tree","permalink":"http://io.stelawliet.top/categories/algorithme/dataStructure/tree/"}],"tags":[{"name":"TrieNode","slug":"TrieNode","permalink":"http://io.stelawliet.top/tags/TrieNode/"},{"name":"前缀树","slug":"前缀树","permalink":"http://io.stelawliet.top/tags/前缀树/"}]},{"title":"并查集FindUion","slug":"algorithm/并查集","date":"2018-07-27T07:24:47.000Z","updated":"2018-08-09T12:28:00.000Z","comments":true,"path":"2018/07/27/algorithm/并查集/","link":"","permalink":"http://io.stelawliet.top/2018/07/27/algorithm/并查集/","excerpt":"","text":"并查集合一些单向链表, 每个元素往上指向该集合的头结点,头结点最后指向自己 查Find查询俩个元素是否在一个集合 分别从当前节点往上遍历直到头结点 在遍历的时候记录所有往上遍历的结点 头结点相等则在一个集合. 把2记录的结点全部指向头结点 并Union合并俩个元素所在的集合 执行find操作后直接把小元素的集合的头结点指向大元素集合的头结点 java实现FartherMap&lt;K,V&gt; K是当前结点.V代表当前节点指向的(父)结点 SizeMap&lt;K,V&gt; K是一个集合的头结点,V是这个集合的结点数","categories":[{"name":"algorithme note","slug":"algorithme-note","permalink":"http://io.stelawliet.top/categories/algorithme-note/"}],"tags":[{"name":"algorithme","slug":"algorithme","permalink":"http://io.stelawliet.top/tags/algorithme/"},{"name":"uion","slug":"uion","permalink":"http://io.stelawliet.top/tags/uion/"}]},{"title":"Spring Bean LifeCycle","slug":"Java/spring/annotation/LifeCyle","date":"2018-07-26T08:42:34.000Z","updated":"2018-08-09T12:09:35.000Z","comments":true,"path":"2018/07/26/Java/spring/annotation/LifeCyle/","link":"","permalink":"http://io.stelawliet.top/2018/07/26/Java/spring/annotation/LifeCyle/","excerpt":"","text":"bean生命周期 创建 - 初始化 -销毁 spring提供自定义初始化和销毁方法,在容器bean 进行到当前生命周期时会调用我们自定义的初始化和销毁方法 Constructor @Scope: prototype：多实例的：ioc容器启动并不会去调用方法创建对象放在容器中。 每次获取的时候才会调用方法创建对象； singleton：单实例的（默认值）：ioc容器启动会调用方法创建对象放到ioc容器中。 以后每次获取就是直接从容器（map.get()）中拿， request：同一次请求创建一个实例 session：同一个session创建一个实例 1）、指定初始化和销毁方法； 通过@Bean指定 init-method和destroy-method； 2）、通过让Bean实现 InitializingBean（定义初始化逻辑）， DisposableBean（定义销毁逻辑）; 3）、可以使用JSR250； @PostConstruct：在bean创建完成并且属性赋值完成；来执行初始化方法 @PreDestroy：在容器销毁bean之前通知我们进行清理工作 4）、BeanPostProcessor【interface】：bean的后置处理器； 在bean初始化前后进行一些处理工作； postProcessBeforeInitialization:在初始化之前工作 postProcessAfterInitialization:在初始化之后工作 Spring底层对 BeanPostProcessor 的使用； bean赋值，注入其他组件，@Autowired，生命周期注解功能， @Async,xxx BeanPostProcessor; BeanPostProcessor.postProcessBeforeInitialization bean装配完成后进行的初始化 初始化: 源码分析BeanPostProcessor在Spring-Beans-5.0.5.RELEASE中的AbstractAutowireCapableBeanFactory类中123456789101112131415161718192021222324252627282930protected Object initializeBean(final String beanName, final Object bean, @Nullable RootBeanDefinition mbd) &#123; if (System.getSecurityManager() != null) &#123; AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123; invokeAwareMethods(beanName, bean); return null; &#125;, getAccessControlContext()); &#125; else &#123; invokeAwareMethods(beanName, bean); &#125; Object wrappedBean = bean; if (mbd == null || !mbd.isSynthetic()) &#123; wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName); &#125; try &#123; invokeInitMethods(beanName, wrappedBean, mbd); &#125; catch (Throwable ex) &#123; throw new BeanCreationException( (mbd != null ? mbd.getResourceDescription() : null), beanName, \"Invocation of init method failed\", ex); &#125; if (mbd == null || !mbd.isSynthetic()) &#123; wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName); &#125; return wrappedBean;&#125; 各种初始化函数的前后顺序 BeanPostProcessor接口的 postProcessBeforeInitialization `applyBeanPostProcessorsBeforeInitialization 后执行afterPropertiesSet 再invokeCustomInitMethod 123456789101112131415161718192021222324252627282930313233protected void invokeInitMethods(String beanName, final Object bean, @Nullable RootBeanDefinition mbd) throws Throwable &#123; boolean isInitializingBean = (bean instanceof InitializingBean); if (isInitializingBean &amp;&amp; (mbd == null || !mbd.isExternallyManagedInitMethod(\"afterPropertiesSet\"))) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"Invoking afterPropertiesSet() on bean with name '\" + beanName + \"'\"); &#125; if (System.getSecurityManager() != null) &#123; try &#123; AccessController.doPrivileged((PrivilegedExceptionAction&lt;Object&gt;) () -&gt; &#123; ((InitializingBean) bean).afterPropertiesSet(); return null; &#125;, getAccessControlContext()); &#125; catch (PrivilegedActionException pae) &#123; throw pae.getException(); &#125; &#125; else &#123; ((InitializingBean) bean).afterPropertiesSet(); &#125; &#125; if (mbd != null &amp;&amp; bean.getClass() != NullBean.class) &#123; String initMethodName = mbd.getInitMethodName(); if (StringUtils.hasLength(initMethodName) &amp;&amp; !(isInitializingBean &amp;&amp; \"afterPropertiesSet\".equals(initMethodName)) &amp;&amp; !mbd.isExternallyManagedInitMethod(initMethodName)) &#123; invokeCustomInitMethod(beanName, bean, mbd); &#125; &#125; &#125; SGG bean的生命周期： ​ bean创建—初始化—-销毁的过程 容器管理bean的生命周期； 我们可以自定义初始化和销毁方法； 容器在bean进行到当前生命周期的时候来调用我们自定义的初始化和销毁方法 构造（对象创建） ​ 单实例：在容器启动的时候创建对象 ​ 多实例：在每次获取的时候创建对象\\ BeanPostProcessor.postProcessBeforeInitialization 初始化： ​ 对象创建完成，并赋值好，调用初始化方法。。。 BeanPostProcessor.postProcessAfterInitialization 销毁： ​ 单实例：容器关闭的时候 ​ 多实例：容器不会管理这个bean；容器不会调用销毁方法； 遍历得到容器中所有的BeanPostProcessor； 挨个执行beforeInitialization， 一但返回null，跳出for循环， 不会执行后面的BeanPostProcessor.postProcessorsBeforeInitialization BeanPostProcessor原理 populateBean(beanName, mbd, instanceWrapper);给bean进行属性赋值 initializeBean { applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName); invokeInitMethods(beanName, wrappedBean, mbd);执行自定义初始化 applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName); } 1）、指定初始化和销毁方法； ​ 通过@Bean指定init-method和destroy-method； 2）、通过让Bean实现InitializingBean（定义初始化逻辑）， ​ DisposableBean（定义销毁逻辑）; 3）、可以使用JSR250； ​ @PostConstruct：在bean创建完成并且属性赋值完成；来执行初始化方法 ​ @PreDestroy：在容器销毁bean之前通知我们进行清理工作 4）、BeanPostProcessor【interface】：bean的后置处理器； ​ 在bean初始化前后进行一些处理工作； ​ postProcessBeforeInitialization:在初始化之前工作 ​ postProcessAfterInitialization:在初始化之后工作 Spring底层对 BeanPostProcessor 的使用； ​ bean赋值，注入其他组件，@Autowired，生命周期注解功能， @Async,xxx BeanPostProcessor;","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"},{"name":"lifecycle","slug":"spring/annotation/lifecycle","permalink":"http://io.stelawliet.top/categories/spring/annotation/lifecycle/"}],"tags":[{"name":"bean生命周期","slug":"bean生命周期","permalink":"http://io.stelawliet.top/tags/bean生命周期/"}]},{"title":"annotation-component @Bean","slug":"Java/spring/annotation/@Bean","date":"2018-07-25T14:42:31.000Z","updated":"2018-08-09T13:15:50.000Z","comments":true,"path":"2018/07/25/Java/spring/annotation/@Bean/","link":"","permalink":"http://io.stelawliet.top/2018/07/25/Java/spring/annotation/@Bean/","excerpt":"","text":"@Bean给容器中注册一个Bean;类型为返回值的类型，id默认是用方法名作为id,对应&lt;bean&gt; 1234567891011121314@Scope(\"prototype\")@Lazy@Bean(\"person\",initMethod=\"init\",destroyMethod=\"destroy\")public Person person()&#123; System.out.println(\"给容器中添加Person....\"); return new Person(\"张三\", 25);&#125;/** * ConfigurableBeanFactory#SCOPE_PROTOTYPE * @see ConfigurableBeanFactory#SCOPE_SINGLETON * @see org.springframework.web.context.WebApplicationContext#SCOPE_REQUEST request * @see org.springframework.web.context.WebApplicationContext#SCOPE_SESSION sesssion * @return\\ */ @Scope:调整作用域 prototype：多实例的：ioc容器启动并不会去调用方法创建对象放在容器中。 每次获取的时候才会调用方法创建对象； singleton：单实例的（默认值）：ioc容器启动会调用方法创建对象放到ioc容器中。 以后每次获取就是直接从容器（map.get()）中拿， request：同一次请求创建一个实例 session：同一个session创建一个实例 @Lazy懒加载： 单实例bean：默认在容器启动的时候创建对象； 懒加载：容器启动不创建对象。第一次使用(获取)Bean创建对象，并初始化； SpringFactoryBean 123456789101112131415161718192021222324252627//创建一个Spring定义的FactoryBeanpublic class ColorFactoryBean implements FactoryBean&lt;Color&gt; &#123; //返回一个Color对象，这个对象会添加到容器中 @Override public Color getObject() throws Exception &#123; // TODO Auto-generated method stub System.out.println(\"ColorFactoryBean...getObject...\"); return new Color(); &#125; @Override public Class&lt;?&gt; getObjectType() &#123; // TODO Auto-generated method stub return Color.class; &#125; //是单例？ //true：这个bean是单实例，在容器中保存一份 //false：多实例，每次获取都会创建一个新的bean； @Override public boolean isSingleton() &#123; // TODO Auto-generated method stub return false; &#125;&#125;","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"}],"tags":[{"name":"bean","slug":"bean","permalink":"http://io.stelawliet.top/tags/bean/"}]},{"title":"annotation-component @Conditional","slug":"Java/spring/annotation/@Conditional","date":"2018-07-24T14:38:22.000Z","updated":"2018-08-09T13:48:11.000Z","comments":true,"path":"2018/07/24/Java/spring/annotation/@Conditional/","link":"","permalink":"http://io.stelawliet.top/2018/07/24/Java/spring/annotation/@Conditional/","excerpt":"","text":"@Conditional在注解前添加,条件判断注解是否生效 12345678910111213141516171819202122232425@Configurationpublic class AnnotationConfiguration &#123; //MyConditional返回true才会给容器添加`@Bean(name = \"stu\")` @Conditional(MyConditional.class) @Bean(name = \"stu\") public Stu Stu() &#123; return new Stu(\"lzt\", 1); &#125; /* @Conditional(&#123;Condition&#125;) ： * 按照一定的条件进行判断，满足条件给容器中注册bean * 如果系统是windows，给容器中注册(\"bill\") * 如果是linux系统，给容器中注册(\"linus\") */ @Bean(\"bill\") public Person person01()&#123; return new Person(\"Bill Gates\",62); &#125; @Conditional(LinuxCondition.class) @Bean(\"linus\") public Person person02()&#123; return new Person(\"linus\", 48); &#125;&#125; 具体使用说明12345678910111213141516171819202122232425public class LinuxCondition implements Condition &#123; /** * ConditionContext：判断条件能使用的上下文（环境） * AnnotatedTypeMetadata：注释信息 */ @Override public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) &#123; // TODO是否linux系统 //1、能获取到ioc使用的beanfactory ConfigurableListableBeanFactory beanFactory = context.getBeanFactory(); //2、获取类加载器 ClassLoader classLoader = context.getClassLoader(); //3、获取当前环境信息 Environment environment = context.getEnvironment(); //4、获取到bean定义的注册类 BeanDefinitionRegistry registry = context.getRegistry(); String property = environment.getProperty(\"os.name\"); //可以判断容器中的bean注册情况，也可以给容器中注册bean boolean definition = registry.containsBeanDefinition(\"person\"); if(property.contains(\"linux\"))&#123; return true; &#125; return false; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"framework","slug":"java/framework","permalink":"http://io.stelawliet.top/categories/java/framework/"},{"name":"spring","slug":"java/framework/spring","permalink":"http://io.stelawliet.top/categories/java/framework/spring/"},{"name":"annotation","slug":"java/framework/spring/annotation","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/"},{"name":"conditional","slug":"java/framework/spring/annotation/conditional","permalink":"http://io.stelawliet.top/categories/java/framework/spring/annotation/conditional/"}],"tags":[{"name":"conditional","slug":"conditional","permalink":"http://io.stelawliet.top/tags/conditional/"}]},{"title":"spring-annotation xmind","slug":"Java/spring/annotation/xmind","date":"2018-07-24T06:05:43.000Z","updated":"2018-07-31T08:01:49.000Z","comments":true,"path":"2018/07/24/Java/spring/annotation/xmind/","link":"","permalink":"http://io.stelawliet.top/2018/07/24/Java/spring/annotation/xmind/","excerpt":"","text":"Spring注解驱动开发","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"}],"tags":[]},{"title":"annotation-component registration","slug":"Java/spring/annotation/@Configuration","date":"2018-07-24T06:05:43.000Z","updated":"2018-08-16T07:04:03.000Z","comments":true,"path":"2018/07/24/Java/spring/annotation/@Configuration/","link":"","permalink":"http://io.stelawliet.top/2018/07/24/Java/spring/annotation/@Configuration/","excerpt":"","text":"[TOC] @configuration12345678910111213141516171819202122@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documented@Componentpublic @interface Configuration @Configuration@ComponentScan(\"BeanConfig.LifeCycle\")@ComponentScan(\"BeanConfig.Bean\")public class Config2 &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(); String[] names = context.getBeanDefinitionNames(); for (String name : names) &#123; System.out.println(name); &#125; JsrDe0 bean = context.getBean(JsrDe0.class); System.out.println(bean); &#125;&#125; 配置类,对应spring的xml配置文件&lt;beans/&gt;该配置类的applicationContext由AnnotationConfigApplicationContext获得,传入配置类 @configuration 也是一个@Component所以会被当成组件添加到容器中 @ComponentScan扫描指定规则的注解.对应&lt;context:component-scan base-package=&quot;&quot;&gt; 12345678//可以多个ComponentScans@ComponentScans(value = &#123;@ComponentScan(value=\"com.atguigu\",includeFilters = &#123; @Filter(type=FilterType.ANNOTATION,classes=&#123;Controller.class&#125;), @Filter(type=FilterType.ASSIGNABLE_TYPE,classes=&#123;BookService.class&#125;), @Filter(type=FilterType.CUSTOM,classes=&#123;MyTypeFilter.class&#125;) &#125;,useDefaultFilters = false) &#125;) excludeFilters = Filter[] ：指定扫描的时候按照什么规则排除那些组件includeFilters = Filter[] ：指定扫描的时候只需要包含哪些组件useDefaultFilters禁用默认扫描规则Filter多个时按先后顺序逐级过滤,type指定过滤方式 FilterType.ANNOTATION：按照注解FilterType.ASSIGNABLE_TYPE：按照给定的类型；FilterType.ASPECTJ：使用ASPECTJ表达式FilterType.REGEX：使用正则指定FilterType.CUSTOM：使用自定义规则 自定义MyFilter implements TypeFilter 重写match的方法 metadataReader：读取到的当前正在扫描的类的信息metadataReaderFactory:可以获取到其他任何类信息的 1234567891011121314151617public class MyTypeFilter implements TypeFilter &#123; @Override public boolean match(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)throws IOException &#123; //获取当前类注解的信息 AnnotationMetadata annotationMetadata = metadataReader.getAnnotationMetadata(); //获取当前正在扫描的类的类信息 ClassMetadata classMetadata = metadataReader.getClassMetadata(); //获取当前类资源（类的路径） Resource resource = metadataReader.getResource(); String className = classMetadata.getClassName(); System.out.println(\"---&gt;\"+className); if(className.contains(\"er\"))&#123; return true; &#125; return false; &#125;&#125; ​ @Import123@Import(&#123;Color.class,Red.class,MyImportSelector.class, MyImportBeanDefinitionRegistrar.class&#125;)//@Import导入组件，id默认是组件的全类名 [快速给容器中导入一个组件] @Import(要导入到容器中的组件)；容器中就会自动注册这个组件，id默认是全类名 ImportSelector:返回需要导入的组件的全类名数组； ImportBeanDefinitionRegistrar:手动注册bean到容器中1234567891011121314151617181920212223242526import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.beans.factory.support.RootBeanDefinition;import org.springframework.context.annotation.ImportBeanDefinitionRegistrar;import org.springframework.core.type.AnnotationMetadata;public class MyImportBeanDefinitionRegistrar implements ImportBeanDefinitionRegistrar &#123; /** * AnnotationMetadata：当前类的注解信息 * BeanDefinitionRegistry:BeanDefinition注册类； * 把所有需要添加到容器中的bean；调用 * BeanDefinitionRegistry.registerBeanDefinition手工注册进来 */ @Override public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) &#123; boolean definition = registry.containsBeanDefinition(\"com.atguigu.bean.Red\"); boolean definition2 = registry.containsBeanDefinition(\"com.atguigu.bean.Blue\"); if(definition &amp;&amp; definition2)&#123; //指定Bean定义信息；（Bean的类型，Bean。。。） RootBeanDefinition beanDefinition = new RootBeanDefinition(RainBow.class); //注册一个Bean，指定bean名 registry.registerBeanDefinition(\"rainBow\", beanDefinition); &#125; &#125;&#125;","categories":[{"name":"spring","slug":"spring","permalink":"http://io.stelawliet.top/categories/spring/"},{"name":"annotation","slug":"spring/annotation","permalink":"http://io.stelawliet.top/categories/spring/annotation/"}],"tags":[]},{"title":"TODO List","slug":"TODOlist/todo","date":"2018-07-23T13:58:16.000Z","updated":"2018-09-16T03:28:39.000Z","comments":true,"path":"2018/07/23/TODOlist/todo/","link":"","permalink":"http://io.stelawliet.top/2018/07/23/TODOlist/todo/","excerpt":"","text":"todo embed tomcat tomcat内嵌强化 tomcat实现 tomcat内嵌封装 SNAK自动寻路算法 -&gt;DFS ? -&gt;BFS ? cglib 简单使用 分析 java collection list set map分析 ArrayList 初始化 add 扩容 map debug 面向对象初始化 内部类初始化 静态内部类 面向对象运行 reflect resource analysis method spring src analysis autowire implement spring reference index PostProcessor 初始化时机 why return null populateBean initDestroyAnnotationBeanPostProcessor aop div test aop analysis reformat @sgg note with uml ApplicationListener custom Listener @ LoggerFactory alibaba java dev reference Collection Map sql VUE VUEX test gate action muration store freemarker test generator model test ex 123456select d.dept_no, s.emp_no, max(s.salary) as salaryfrom dept_emp as d inner join salaries as son d.emp_no = s.emp_nowhere d.to_date = &apos;9999-01-01&apos;and s.to_date = &apos;9999-01-01&apos;group by d.dept_no","categories":[{"name":"todo","slug":"todo","permalink":"http://io.stelawliet.top/categories/todo/"}],"tags":[]},{"title":"CGLib 动态代理","slug":"Java/JavaSE/CgLib动态代理","date":"2018-07-23T13:54:01.000Z","updated":"2018-09-03T12:49:24.000Z","comments":true,"path":"2018/07/23/Java/JavaSE/CgLib动态代理/","link":"","permalink":"http://io.stelawliet.top/2018/07/23/Java/JavaSE/CgLib动态代理/","excerpt":"","text":"测试Cglib 类似JDKproxy的使用 123456789101112131415161718@Bean(\"proxyUserServiceCG\")public UserService getProxyUserServiceByCglib( @Qualifier(\"userService\") UserService userService)&#123; return (UserService) Enhancer .create(userService.getClass() , userService.getClass() .getInterfaces(), new MethodInterceptor() &#123; @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; System.err.println(\"cg log........\"); Object invoke = method.invoke(userService, objects); return invoke; &#125; &#125;); 对比JDk的Proxy,Cglib使用的是Enhancer的静态方法create来创建代理对象 Enhancer.create(Class class,) (“Enhance” 增强,提升) CGlib 的CallBack的使用模拟事务管理123456789101112131415161718192021222324252627282930313233/** * @program: SpringYun * @description: * @author: Zhaoziqi * @create: 2018-08-31 19:30 **/public class CgInterceptor implements MethodInterceptor &#123; private Logger logger = LoggerFactory.getLogger(this.getClass()); @Override public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) &#123; Object res = null; logger.debug(\"Transaction start\"); try &#123; res = proxy.invokeSuper(obj,args); logger.debug(\"Transaction commit\"); &#125; catch (Throwable throwable) &#123; logger.debug(\"Transaction rollback\"); &#125; return res; &#125; public static void main(String[] args) throws Exception &#123; //创建enhancer增强对象 Enhancer enhancer = new Enhancer(); //传入增强的逻辑.即拦截器 enhancer.setCallback(new CgInterceptor()); //设置增强的目标类 //cglib是基于继承的.所以这里是setSuperclass enhancer.setSuperclass(UserDao.class); //创建出代理子类.传递给父类引用 UserDao userDao = (UserDao) enhancer.create(); userDao.updateUser(true); &#125;&#125; UserDao.java 123456789public class UserDao&#123; public void updateUser(boolean error) throws Exception&#123; System.out.println(\"update user\"); //模拟数据库访问异常.事务回滚 if (error)&#123; throw new Exception(\"access Data Exception\"); &#125; &#125;&#125; 输出 123Transaction startupdate userTransaction rollback or 123Transaction startupdate userTransaction commit analysispublic Object intercept (Object obj, Method method, Object[] args, MethodProxy proxy) intercept类似jdk中的InvocationHandler,不过感觉功能上更全一些.因为MethodProxy. 从下图可以看出MethodProxy中包含了目标类(父类),生成的代理类(子类)所有的信息. 可以通过MethodProxy的invokeSuper()直接使用intercept中传入的代理子类调用原始父类的方法来避免无限递归 jdk的InvocationHandler.invoke中必须传入原始对象的引用.来发射调用invoke.CGlib中就不需要原始对象的引用.","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"http://io.stelawliet.top/categories/java/spring/"}],"tags":[{"name":"cglib动态代理","slug":"cglib动态代理","permalink":"http://io.stelawliet.top/tags/cglib动态代理/"}]},{"title":"","slug":"Linux/shell 总结","date":"2018-07-21T17:02:41.000Z","updated":"2018-07-22T02:41:27.000Z","comments":true,"path":"2018/07/22/Linux/shell 总结/","link":"","permalink":"http://io.stelawliet.top/2018/07/22/Linux/shell 总结/","excerpt":"","text":"【Linux】Shell脚本学习总结篇2017年06月11日 17:24:31 阅读数：4017 【Linux】Shell脚本学习总结篇 shell学习分为下面3个部分： shell基本命令回顾 shell基本语法学习 awk/sed 工具学习 关于shell的介绍之类的在这里不做赘述！ shell基本命令回顾 1.1 最基础的常用命令 12（注：命令选项直接 man 查看，不做说明） 12 1.1.1 查看文件和目录的命令 123456789ls : 列出目录下的清单；cat: 连接显示文件内容less/more: 分页显示文件内容，建议使用less，相比于more更方便；head: 显示文件头部，可指定行数，默认显示10行；tail: 显示文件尾部，可指定行数，默认显示10行；file: 显示文件类型；wc: 查看文件或统计信息；find: 查找文件或目录（选项比较多，前面有博客专门介绍过）123456789 部分演示： 总结.assets/image-20180722103949733.png 1.1.2 操作文件和目录 1234567touch:创建新文件（可以直接使用vim/vi/gredit等编辑器直接创建）mkdir:创建目录，可以利用 -r选项递归创建cp: 拷贝命令，拷贝目录时可以使用 -r 选项ln: 创建链接命令，分为软连接和硬链接（有专门的文章介绍）mv: 移动文件或者目录的命令，同时也是改名命令rm: 删除命令，-r 删除目录， 谨慎使用；1234567 1.1.3 管理文件或者目录的权限 12345ls -l : 可以列出文件和目录的权限信息；chmod: 修改文件和目录的权限（需要了解字母及数字权限表示）chown/chgrp: 改变属组和属主setuid/setgid：设置用户或组权限位；12345 1.1.4 文本处理命令 123456sort : 文本排序uniq : 文本去重tr : 替换命令grep : 查找字符串diff: 文件对比，找出文件差异123456 部分演示： 解释： history 命令列出用户的历史使用命令，然后通过awk 过滤出第二列，因为第一列是文件的行数标号， 接着进行一个sort排序，将所有相同的命令都放在一起方便接下来的uniq -c命令去重并且统计出每个命令出现的次数，再然后是 sort -nr -n选项的意思是按照数字的大小即uniq统计出的次数进行排序 -r 则是反向的意思，即本来是正序变为逆序；然后取其前十，即最常用的前十个命令，最后用一下 tr 命令将小写字母替换为大写字母； 对于命令的选项，我一贯的思想都是记住命令和常用的选项即可，太多的选项不需要强行去记忆，用的时候 man 一下或者 –help 看一下即可； 1.1.5 其它常用的命令 1234567hostname : 查看主机名w, who : 列出系统登录的用户uptime : 查看系统运行时间uname : 查看系统信息date : 显示和设置系统日期和时间id : 显示用户属性1234567 1.1.6 shell命令进阶 123456789101112131415paster : 合并文本dd : 备份和拷贝文件（和vim 和剪切命令一样）tar : 打包和解包文件mount, umount : 挂载和卸载存储介质df : 报告文件系统磁盘空间利用率du : 评估文件空间利用率ps : 查看系统的进程pidof : 列出进程的pidtop : 相当于 Linux 的任务管理器&amp; : 将作业后台运行jobs : 查看作业bg : 让挂起的进程在后台继续执行fg : 将后台进程放入前台fdisk: 查看系统的磁盘信息123456789101112131415 部分演示： 总结.assets/image-20180722104034136.png 前后台切换演示： 解释：** 先执行 sleep 100 &amp; 让这个进程在后台执行，然后我们先使用 ps 配合 grep 命令查看一下 sleep 进程的信息，接着 jobs 查看一下后台运行的作业， 使用 fg 命令使其继续在前台执行，我们可以看到显示了sleep 100 ， 接着我们又不想让他继续执行了，使用 ctrl + z 使其挂起，我们用jobs查看，可以看出其处于 stopped 状态，接着使用 bg 命令使其继续在后台执行，查看状态， 处于running状态； 至此，shell的基本命令回顾完毕，这些都是脚本中常用的命令； shell基本语法学习 这部分学习编写shell脚本的基本语法，估计篇幅比较长，因为要敲很多代码，所以，有瑕疵的地方请指出； 2.1 shell 语法篇 12（这是回顾与复习的过程，所以不是小白教程，起码都吃过猪肉，看过猪跑）12 2.1.1 shell 编程基础 1&gt; 上面刚说过，得吃过猪肉，看过猪跑，那么最基本的shell脚本的编写格式应该知道； 12#!/bin/bashecho &quot;hello world&quot;12 分析：还是 hello world 起步，第一行的 #！叫做 Shebang(我也不知道为什么这么叫)， 然后后面的 /bin/bash 则是指定解释器，既然shell是门解释性语言，自然需要解释器，类似的，如果是 python脚本，则是 #! /bin/python 可能还需要一些编码格式的规定（utf - 8），如果没有指定解释器，默认选择 sh ； 同时还需要给文件可执行权限，否则会报错，虽然我们一般把shell 脚本文件命名为 .sh 的文件（在Linux中文件后缀只能起到标识的作用，没有实际意义）； 2&gt; shell 中的注释，在shell中注释的符号是 “#”； 3&gt; shell 的变量 12345678910111213141516171819在shell中设置变量和平时在命令行设置变量是一样的，可以直接定义一个变量，例如： a=10 不需要声明类型，不需要分号；如果需要明确指定变量的类型的话，可以只用declare的选项指定类型；变量的作用域: 在shell 中，变量默认都具有全局属性，如果需要局部的变量则需要在变量的声明处加 local 关键字。如： local a=10变量的操作: 3.1 获取变量的值 在命令行获取变量的值是通过 echo $&#123;a&#125; 打印变量的值到终端的，那么echo的作用是打印，&apos;$&#123;&#125;&apos; 的作用不言而喻（花括号可省略，起分割的作用）。 3.2 变量的运算 let a+=1 即使用 let 命令，当然除了 let 命令还有 &apos;(())&apos; 双括号，都可以进行变量的运算； 3.3 参数变量 说到shell的参数，有两个点，一个是命令行参数，一个是函数的参数，这里先说明命令行参数，函数的参数在后面学习函数的时候补充； 首先，记住这几个特殊符号: $# $@ $* $1 $2 ... 在运行程序的时候，经常需要带一些初始的参数，那么这些命令行参数到底是怎么传递进来的呢？12345678910111213141516171819 总结.assets/image-20180722104109017.png 1234 $# : 除$0以外的参数的个数（文件名，命令除外，它们用$0查看）； $@/*: 表示所有参数的集合 $0,1,2...: 表示参数1234 注：取消变量的定义 unset 这里既然说到了变量，就顺带提一下环境变量和普通变量； 4&gt; shell环境变量和普通变量 12345678首先，明确两点，第一点即环境变量和普通变量在虚拟地址空间的存放位置，环境变量在栈顶的位置（高地址处），而普通变量是在数据段存放的；第二点，子进程会继承父进程的环境变量；普通变量的命令行声明： a=10将普通变量变为环境变量：export a如何验证？4.1 在父bash 中声明变量 a=10, 命令行敲 &apos;bash&apos; 命令相当于起了一个子bash， 在子 bash 中查找是否有 a变量；12345678 这里写图片描述 1234（set 命令查看所有变量， env 命令查看所有环境变量，exit或者ctrl + d 退出子bash）4.2 在父bash 中将变量 a 声明为环境变量 &apos;export a&apos;, 在子bash 中查看变量 a;1234 这里写图片描述 2.1.2 shell 的条件执行 12shell的条件执行其实和C差不多，具体的差异就在于语法格式的一些差别；12 1&gt; if 条件执行 12不同于C的是，bash的条件测试不单单只是可以通过if进行判断，还要结合一些特殊的符号，命令和参数；12 先列出基本的if语句的使用格式： 123456if truethen echo &quot;hello world!&quot;else echo &quot;see you world!&quot;fi 123456 ：这就是 if 语句的基本使用格式，当然，中间还可以有 ’ elif ’ 相当于 C 的 else if ; 值得注意的是开始的 then 和 最后的 fi ， 每个 if 都必须有一个fi 与之对应代表结束，因为没有了 ’ {} ‘; 前面说了，shell的条件判断需要结合一些命令，符号，选项来配合使用； 12342.1 &apos;[]&apos; 和 test&apos;[]&apos; 和 test 都被用作测试，如：1234 123456if [ -f install.log ]then echo &quot;hello&quot;fitest -f install.log; echo &quot;hello&quot;123456 ’ [ ] ’ 和 test 有很多选项，这里我就不一一演示，需要的话直接 man test; ( 注意： 使用 ‘[ ]’ 时， 需要两个空格，‘[’的后面， ‘]’的前面各一个)； 不但这些，还有比较的符号；其中又分字符串和算数的不同； 这里写图片描述 （注： $? 查看上一条命令的返回值 ） 追加一个知识点： 因为字符串的比较使用 ‘[]’ 时需要对 &gt;&lt;进行转义，所以shell提供 ’ [[ ]] ’ 符号，则不再需要转义，对于算术，shell提供 ’ (( )) ’ 则可以直接使用比较符进行比较（这在后面的例子中有体现）； 算术： 这里写图片描述 2.1.3 &amp;&amp; 和 || 123456&amp;&amp; : &amp;&amp;符号的前面的表达式为真才会执行 &amp;&amp;后面的表达式；|| : || 符号前面的表达式为假才会执行 || 后面的表达式；&apos;!&apos;: 逻辑非通常 &amp;&amp; 和 || 配合使用，如：123456 ‘’ 这里写图片描述 2.1.4 shell 的 case 语句 12shell的case语句的格式如下：12 12345678case $1 in 1) echo &quot;1&quot; ;;2) echo &quot;2&quot; ;;esac12345678 上面就是case语句的格式，这里刚好提醒一点，就是在shell中，不允许出现空语句，如果非要有空语句，则必须写上一个 冒号 ’ : ‘; 2.1.5 Bash 循环 1234shell的循环：for/while/until下面只演示前两种，until不太用到；1234 for循环 1234567891011for i in $(seq 10)do echo -n $idone#类C 的for 循环：for (( i=0; i&lt;10; ++i ))do echo -n $idone 1234567891011 注： seq 是生成连续序列的命令，而shell中执行命令的话，会用 ’ $() ‘;echo -n 选项则是取消换行，每个echo语句都会带一个换行，直接一个echo则代表换行； 这里写图片描述 while循环 12值得一提的是break和continue关键字在shell中依然有效； 12 123456789i=1while truedo if [ $i -gt 2 ];then echo $i break fi let i++done123456789 这里写图片描述 continue语句不做演示； 2.1.6 shell的函数 12首先，shell函数的定义：12 12345678910111213141516171819function fun()&#123; if [ $# -ne 2 ];then return 1 fi local a=$1 local b=$2 let c = a + b echo &quot;hello $c&quot; return 0&#125;fun 1 2if [ $? -ne 0 ];then echo &quot;arguments fault!&quot; exitelse echo &quot;used right&quot;fi12345678910111213141516171819 上面就是一个简单的脚本，起作用是调用一个fun函数，判断调用是否正确； 分析： 从这个脚本中我们可以看出shell脚本函数的使用方式，从定义到参数的获取，再到返回值；最后还有函数的调用方式其实和命令的执行方式是一样的； （注： function关键字可以省略但不建议，return 可以返回的值是 0-255） 额外知识点：在shell脚本中 双引号 和 单引号是有区别的，虽然在大部分场景中它们是一致的，但是如果含有特殊字符的话，双引号是没有对特殊字符进行转义的，所以上面的脚本中 “hello $c”可以顺利执行，但是单引号的话默认会对特殊字符转义的，例如： 这里写图片描述 （注：shell函数对于参数的处理还有 shift 和 getopts 的处理方法，后期补充） 2.1.7 shell 重定向 1234说起重定向，估计不少同学都想到了管道；但是，管道并不是重定向，重定向是将一个命令的输出结果作为下一个命令的输入，而重定向是将输出和文件相链接的；1234 重定向分为输入重定向和输出重定向，其中又有追加和覆盖的区别，总的来说就是下面四个符号： ’ &gt; ‘, ’ &gt;&gt; ‘, ’ &lt;&lt; ’ , ’ &lt; ‘； 举例来说： 这里写图片描述 当然，不仅可以这样，还可以将标准错误也重定向到文件； 1ls l 2&gt;test.sh1 输入重定向： 1234例如: tr a-z A-Z &lt;&lt;END abcdef END1234 这里写图片描述 注： 这里的END不是固定的，只是起一个标签的作用，代表下次遇到END就结束输入； 重定向的这种用法还被用到项目中的configure文件，使configure文件可以自动生成Makefile文件，例如： 这里写图片描述 2.1.8 shell 脚本从标准输入读取 12这个其实只是一个read的使用，在shell中使用read从标准输入读取数据；12 例如： 这里写图片描述 结果： 这里写图片描述 当然，read还有很多其他的使用方法，这里就不列了； shell的基本语法复习到这，写的比较粗，中间还有一些遗漏，以后会更完善！ 3.1 sed/awk 工具的简单使用 123456783.1.1 sed 工具 sed 的背景我就不在这百科了，直接上手一些sed工具的基本使用规则，和一些简单的例子即可，不管是sed和awk工具在以后的工作中都肯定是常用的工具，但是，作为大学的学生，想熟练使用这两个工具估计得下挺大功夫，毕竟不常用； 所以我也只学习了一些简单的用法； sed 是一个文本处理工具，它为我们提供了很多的方便，刚开始知道sed这个工具的时候，其实挺害怕，觉得好复杂，估计用不了，而且在尝试了几次之后发现过几天就忘了，也就不了了之，这很正常，因为这些工具的使用就是唯手熟尔；现在只要了解它就够了；学习sed和awk工具还有一个前提就是正则表达式的学习，这也是很多同学望而却步的原因，这里我就不对正则表达式进行百科了，不会就查，用的时间长了就记住了；12345678 （）sed的工作方式 1234567891011121314sed是一行一行处理文本的，还有需要知道sed有一个HOLD空间和模式空间，HOLD用来作为文档处理的暂存空间，不能有任何的操作，所有的操作只能在模式空间进行；sed常用的选项： -e: 它告诉sed将下一个参数解释为sed指令，即需要连续多个处理时使用； -f : 指定由sed指令组成的脚本的名称； -i : 直接在读取的内容进行修改，如果没有—i，不会源文件造成任何修改； -n: 静默模式，即只输出匹配的行，如果没有-n则匹配行会和源文件全部输出；现在先不做演示，等把下面的编辑命令也复习完毕，一块做演示；sed的编辑命令有24个之多，在这里只学习常用的几个：追加（a）,更改（c）,删除（d），插入（i），替换（s），打印（l），打印行号（=），转换（y）;1234567891011121314 部分演示： 这里写图片描述 这些小的编辑命令多练习一下就熟悉了，接下来练习一个模式空间和HOLD空间的切换的例子，结束sed的复习； 下面这些选项则是需要用到暂存空间时要用到的选项： 123456789+ g：[address[,address]]g 将hold space中的内容拷⻉贝到pattern space中，原来pattern space⾥里的内容清除 + G：[address[,address]]G 将hold space中的内容append到pattern space\\n后+ h：[address[,address]]h 将pattern space中的内容拷⻉贝到hold space中，原来的hold space⾥里的内容被清除+ H：[address[,address]]H 将pattern space中的内容append hold space\\n后+ d：[address[,address]]d 删除pattern中的所有⾏行，并读⼊入下⼀一新⾏行到pattern中+ D：[address[,address]]D 删除multiline pattern中的第⼀一⾏行，不读⼊入下⼀一⾏行+ N,添加下一行至pattern space内;+ x：交换保持空间和模式空间的内容123456789 求1~100的和 12两种方式：12 这里写图片描述 分析：第一个例子利用了暂存空间和模式空间的特点进行求和，其中 $ 代表最后一行； ‘^’ 代表第一行； 然后利用选项H 和 x; 其中利用sed的s编辑命令和正则表达式把换行换为加号，最后通过管道把表达式交给bc计算器，得到最终结果； 第二个例子则是利用sed的标签，没有用到暂存空间； 其中 ：a是设置了一个 a标签， ba的作用是跳转到a标签； 感觉这种工具只有自己去实践了才能领会，反正我是写的晕晕的； awk工具的简单使用 12345678910awk可是厉害了，awk严格说也是一门语言，语法很多，也很强大，在这里我只学了个皮毛，也就只负责皮毛的这块了；既然有了sed为什么还要有awk呢？ 肯定是因为awk比sed更加强大，就最明显的一点，sed只能一行一行处理数据，不能处理一列一列的数据，而awk就可以做到，而且awk还可以利用类C的语法结构，简直强大，可是我用的还是不熟；关于awk的使用，在前面复习shell语法的时候其实都用到了，就是找出你在Linux上最常用的十个命令：history | awk &apos;&#123;print $1&#125;&apos; | sort | uniq -c | sort -nr |headawk 的默认的列分割符是空格，我们也可以指定分割符，利用 -F选项;例如：12345678910 这里写图片描述 awk 还有一个特点就是它的 BEGIN 块和 END 块； BEGIN块的作用是在awk执行匹配之前先执行的语句，END自然就是awk处理完之后执行的语句； 例如： 这里写图片描述 awk和sed简单的使用就写到这了，感觉烂尾了，写的好累写不下去了，也是这俩个工具要掌握的话需要很多篇幅的，总之就这样了，下一篇，mysql数据库的学习！ 版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/bitboss/article/details/73019967","categories":[],"tags":[]},{"title":"","slug":"Linux/shell","date":"2018-07-21T16:59:55.000Z","updated":"2018-07-22T01:43:59.000Z","comments":true,"path":"2018/07/22/Linux/shell/","link":"","permalink":"http://io.stelawliet.top/2018/07/22/Linux/shell/","excerpt":"","text":"Shell脚本编程30分钟入门什么是Shell脚本示例看个例子吧： #!/bin/sh cd ~ mkdir shell_tut cd shell_tut for ((i=0; i&lt;10; i++)); do touch test_$i.txt done 示例解释 第1行：指定脚本解释器，这里是用/bin/sh做解释器的 第2行：切换到当前用户的home目录 第3行：创建一个目录shell_tut 第4行：切换到shell_tut目录 第5行：循环条件，一共循环10次 第6行：创建一个test_0…9.txt文件 第7行：循环体结束 mkdir, touch都是系统自带的程序，一般在/bin或者/usr/bin目录下。for, do, done是sh脚本语言的关键字。 shell和shell脚本的概念shell是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。Ken Thompson的sh是第一种Unix Shell，Windows Explorer是一个典型的图形界面Shell。 shell脚本（shell script），是一种为shell编写的脚本程序。业界所说的shell通常都是指shell脚本，但读者朋友要知道，shell和shell script是两个不同的概念。由于习惯的原因，简洁起见，本文出现的“shell编程”都是指shell脚本编程，不是指开发shell自身（如Windows Explorer扩展开发）。 环境shell编程跟java、php编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。 OS当前主流的操作系统都支持shell编程，本文档所述的shell编程是指Linux下的shell，讲的基本都是POSIX标准下的功能，所以，也适用于Unix及BSD（如Mac OS）。 LinuxLinux默认安装就带了shell解释器。 Mac OSMac OS不仅带了sh、bash这两个最基础的解释器，还内置了ksh、csh、zsh等不常用的解释器。 Windows上的模拟器windows出厂时没有内置shell解释器，需要自行安装，为了同时能用grep, awk, curl等工具，最好装一个cygwin或者mingw来模拟linux环境。 cygwin mingw 脚本解释器sh即Bourne shell，POSIX（Portable Operating System Interface）标准的shell解释器，它的二进制文件路径通常是/bin/sh，由Bell Labs开发。 本文讲的是sh，如果你使用其它语言用作shell编程，请自行参考相应语言的文档。 bashBash是Bourne shell的替代品，属GNU Project，二进制文件路径通常是/bin/bash。业界通常混用bash、sh、和shell，比如你会经常在招聘运维工程师的文案中见到：熟悉Linux Bash编程，精通Shell编程。 在CentOS里，/bin/sh是一个指向/bin/bash的符号链接: [root@centosraw ~]# ls -l /bin/*sh -rwxr-xr-x. 1 root root 903272 Feb 22 05:09 /bin/bash -rwxr-xr-x. 1 root root 106216 Oct 17 2012 /bin/dash lrwxrwxrwx. 1 root root 4 Mar 22 10:22 /bin/sh -&gt; bash 但在Mac OS上不是，/bin/sh和/bin/bash是两个不同的文件，尽管它们的大小只相差100字节左右: iMac:~ wuxiao$ ls -l /bin/*sh -r-xr-xr-x 1 root wheel 1371648 6 Nov 16:52 /bin/bash -rwxr-xr-x 2 root wheel 772992 6 Nov 16:52 /bin/csh -r-xr-xr-x 1 root wheel 2180736 6 Nov 16:52 /bin/ksh -r-xr-xr-x 1 root wheel 1371712 6 Nov 16:52 /bin/sh -rwxr-xr-x 2 root wheel 772992 6 Nov 16:52 /bin/tcsh -rwxr-xr-x 1 root wheel 1103984 6 Nov 16:52 /bin/zsh 高级编程语言理论上讲，只要一门语言提供了解释器（而不仅是编译器），这门语言就可以胜任脚本编程，常见的解释型语言都是可以用作脚本编程的，如：Perl、Tcl、Python、PHP、Ruby。Perl是最老牌的脚本编程语言了，Python这些年也成了一些linux发行版的预置解释器。 编译型语言，只要有解释器，也可以用作脚本编程，如C shell是内置的（/bin/csh），Java有第三方解释器Jshell，Ada有收费的解释器AdaScript。 如下是一个PHP Shell Script示例（假设文件名叫test.php）： #!/usr/bin/php &lt;?php for ($i=0; $i &lt; 10; $i++) echo $i . &quot;\\n&quot;; 执行： /usr/bin/php test.php 或者： chmod +x test.php ./test.php 如何选择shell编程语言熟悉 vs 陌生如果你已经掌握了一门编程语言（如PHP、Python、Java、JavaScript），建议你就直接使用这门语言编写脚本程序，虽然某些地方会有点啰嗦，但你能利用在这门语言领域里的经验（单元测试、单步调试、IDE、第三方类库）。 新增的学习成本很小，只要学会怎么使用shell解释器（Jshell、AdaScript）就可以了。 简单 vs 高级如果你觉得自己熟悉的语言（如Java、C）写shell脚本实在太啰嗦，你只是想做一些备份文件、安装软件、下载数据之类的事情，学着使用sh，bash会是一个好主意。 shell只定义了一个非常简单的编程语言，所以，如果你的脚本程序复杂度较高，或者要操作的数据结构比较复杂，那么还是应该使用Python、Perl这样的脚本语言，或者是你本来就已经很擅长的高级语言。因为sh和bash在这方面很弱，比如说： 它的函数只能返回字串，无法返回数组 它不支持面向对象，你无法实现一些优雅的设计模式 它是解释型的，一边解释一边执行，连PHP那种预编译都不是，如果你的脚本包含错误(例如调用了不存在的函数)，只要没执行到这一行，就不会报错 环境兼容性如果你的脚本是提供给别的用户使用，使用sh或者bash，你的脚本将具有最好的环境兼容性，perl很早就是linux标配了，python这些年也成了一些linux发行版的标配，至于mac os，它默认安装了perl、python、ruby、php、java等主流编程语言。 第一个shell脚本编写打开文本编辑器，新建一个文件，扩展名为sh（sh代表shell），扩展名并不影响脚本执行，见名知意就好，如果你用php写shell 脚本，扩展名就用php好了。 输入一些代码，第一行一般是这样： #!/bin/bash #!/usr/bin/php “#!”是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行。 运行运行Shell脚本有两种方法： 作为可执行程序chmod +x test.sh ./test.sh 注意，一定要写成./test.sh，而不是test.sh，运行其它二进制的程序也一样，直接写test.sh，linux系统会去PATH里寻找有没有叫test.sh的，而只有/bin, /sbin, /usr/bin，/usr/sbin等在PATH里，你的当前目录通常不在PATH里，所以写成test.sh是会找不到命令的，要用./test.sh告诉系统说，就在当前目录找。 通过这种方式运行bash脚本，第一行一定要写对，好让系统查找到正确的解释器。 这里的”系统”，其实就是shell这个应用程序（想象一下Windows Explorer），但我故意写成系统，是方便理解，既然这个系统就是指shell，那么一个使用/bin/sh作为解释器的脚本是不是可以省去第一行呢？是的。 作为解释器参数这种运行方式是，直接运行解释器，其参数就是shell脚本的文件名，如： /bin/sh test.sh /bin/php test.php 这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。 变量定义变量定义变量时，变量名不加美元符号（$），如： your_name=&quot;qinjx&quot; 注意，变量名和等号之间不能有空格，这可能和你熟悉的所有编程语言都不一样。 除了显式地直接赋值，还可以用语句给变量赋值，如： for file in `ls /etc` 使用变量使用一个定义过的变量，只要在变量名前面加美元符号即可，如： your_name=&quot;qinjx&quot; echo $your_name echo ${your_name} 变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界，比如下面这种情况： for skill in Ada Coffe Action Java; do echo &quot;I am good at ${skill}Script&quot; done 如果不给skill变量加花括号，写成echo “I am good at $skillScript”，解释器就会把$skillScript当成一个变量（其值为空），代码执行结果就不是我们期望的样子了。 推荐给所有变量加上花括号，这是个好的编程习惯。IntelliJ IDEA编写shell script时，IDE就会提示加花括号。 重定义变量已定义的变量，可以被重新定义，如： your_name=&quot;qinjx&quot; echo $your_name your_name=&quot;alibaba&quot; echo $your_name 这样写是合法的，但注意，第二次赋值的时候不能写$your_name=”alibaba”，使用变量的时候才加美元符。 注释以“#”开头的行就是注释，会被解释器忽略。 多行注释sh里没有多行注释，只能每一行加一个#号。就像这样： #-------------------------------------------- # 这是一个自动打ipa的脚本，基于webfrogs的ipa-build书写：https://github.com/webfrogs/xcode_shell/blob/master/ipa-build # 功能：自动为etao ios app打包，产出物为14个渠道的ipa包 # 特色：全自动打包，不需要输入任何参数 #-------------------------------------------- ##### 用户配置区 开始 ##### # # # 项目根目录，推荐将此脚本放在项目的根目录，这里就不用改了 # 应用名，确保和Xcode里Product下的target_name.app名字一致 # ##### 用户配置区 结束 ##### 如果在开发过程中，遇到大段的代码需要临时注释起来，过一会儿又取消注释，怎么办呢？每一行加个#符号太费力了，可以把这一段要注释的代码用一对花括号括起来，定义成一个函数，没有地方调用这个函数，这块代码就不会执行，达到了和注释一样的效果。 字符串字符串是shell编程中最常用最有用的数据类型（除了数字和字符串，也没啥其它类型好用了，哈哈），字符串可以用单引号，也可以用双引号，也可以不用引号。单双引号的区别跟PHP类似。 单引号str=&apos;this is a string&apos; 单引号字符串的限制： 单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的 单引号字串中不能出现单引号（对单引号使用转义符后也不行） 双引号your_name=&apos;qinjx&apos; str=&quot;Hello, I know your are \\&quot;$your_name\\&quot;! \\n&quot; 双引号里可以有变量 双引号里可以出现转义字符 字符串操作拼接字符串your_name=&quot;qinjx&quot; greeting=&quot;hello, &quot;$your_name&quot; !&quot; greeting_1=&quot;hello, ${your_name} !&quot; echo $greeting $greeting_1 获取字符串长度：string=&quot;abcd&quot; echo ${#string} #输出：4 提取子字符串string=&quot;alibaba is a great company&quot; echo ${string:1:4} #输出：liba 查找子字符串string=&quot;alibaba is a great company&quot; echo `expr index &quot;$string&quot; is`#输出：3，这个语句的意思是：找出字母i在这名话中的位置，要在linux下运行，mac下会报错 更多参见本文档末尾的参考资料中Advanced Bash-Scripting Guid Chapter 10.1 数组管道条件判断流程控制和Java、PHP等语言不一样，sh的流程控制不可为空，如： &lt;?php if (isset($_GET[&quot;q&quot;])) { search(q); } else { //do nothing } 在sh/bash里可不能这么写，如果else分支没有语句执行，就不要写这个else。 还要注意，sh里的if [ $foo -eq 0 ]，这个方括号跟Java/PHP里if后面的圆括号大不相同，它是一个可执行程序（和ls, grep一样），想不到吧？在CentOS上，它在/usr/bin目录下： ll /usr/bin/[ -rwxr-xr-x. 1 root root 33408 6月 22 2012 /usr/bin/[ 正因为方括号在这里是一个可执行程序，方括号后面必须加空格，不能写成if [$foo -eq 0] if elseifif condition then command1 command2 ... commandN fi 写成一行（适用于终端命令提示符）： if `ps -ef | grep ssh`; then echo hello; fi 末尾的fi就是if倒过来拼写，后面还会遇到类似的 if elseif condition then command1 command2 ... commandN else command fi if else-if elseif condition1 then command1 elif condition2 command2 else commandN fi for whilefor在开篇的示例里演示过了： for var in item1 item2 ... itemN do command1 command2 ... commandN done 写成一行： for var in item1 item2 ... itemN; do command1; command2… done; C风格的forfor (( EXP1; EXP2; EXP3 )) do command1 command2 command3 done whilewhile condition do command done 无限循环while : do command done 或者 while true do command done 或者 for (( ; ; )) untiluntil condition do command done casecase &quot;${opt}&quot; in &quot;Install-Puppet-Server&quot; ) install_master $1 exit ;; &quot;Install-Puppet-Client&quot; ) install_client $1 exit ;; &quot;Config-Puppet-Server&quot; ) config_puppet_master exit ;; &quot;Config-Puppet-Client&quot; ) config_puppet_client exit ;; &quot;Exit&quot; ) exit ;; * ) echo &quot;Bad option, please choose again&quot; esac case的语法和C family语言差别很大，它需要一个esac（就是case反过来）作为结束标记，每个case分支用右圆括号，用两个分号表示break 函数定义调用文件包含可以使用source和.关键字，如： source ./function.sh . ./function.sh 在bash里，source和.是等效的，他们都是读入function.sh的内容并执行其内容（类似PHP里的include），为了更好的可移植性，推荐使用第二种写法。 包含一个文件和执行一个文件一样，也要写这个文件的路径，不能光写文件名，比如上述例子中: . ./function.sh 不可以写作： . function.sh 如果function.sh是用户传入的参数，如何获得它的绝对路径呢？方法是： real_path=`readlink -f $1`#$1是用户输入的参数，如function.sh . $real_path 用户输入执行脚本时传入脚本运行中输入select菜单stdin和stdout常用的命令sh脚本结合系统命令便有了强大的威力，在字符处理领域，有grep、awk、sed三剑客，grep负责找出特定的行，awk能将行拆分成多个字段，sed则可以实现更新插入删除等写操作。 ps查看进程列表 grep排除grep自身查找与target相邻的结果awksed插入替换删除xargscurl综合案例参考资料 Advanced Bash-Scripting Guide，非常详细，非常易读，大量example，既可以当入门教材，也可以当做工具书查阅 Unix Shell Programming Linux Shell Scripting Tutorial - A Beginner’s handbook","categories":[{"name":"shell","slug":"shell","permalink":"http://io.stelawliet.top/categories/shell/"}],"tags":[]},{"title":"sql练习","slug":"sql/sql练习","date":"2018-07-20T16:55:50.000Z","updated":"2018-07-20T17:49:29.000Z","comments":true,"path":"2018/07/21/sql/sql练习/","link":"","permalink":"http://io.stelawliet.top/2018/07/21/sql/sql练习/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109USE bigdata;SELECT * FROM emp;SELECT * FROM dept;# 1 列出⾄少有4个员⼯的部门的信息。SELECT *FROM deptWHERE dept.deptno IN ( SELECT emp.deptno FROM emp GROUP BY emp.DEPTNO HAVING count(*)&gt;4 );SELECT DEPTNO ,count(emp.DEPTNO) FROM emp GROUP BY emp.DEPTNO HAVING count(*)&gt;4#2 列出薪⾦⽐“SMITH”多的所有员⼯。SELECT *FROM empWHERE SAL &gt; ( SELECT SAL FROM emp WHERE ename ='SMITH');#3 列出所有员⼯的姓名及其直接上级的姓名。SELECT emp0.ename, emp1.ename AS MnameFROM emp AS emp0 ,emp AS emp1 WHERE emp0.MGR = emp1.empno;SELECT emp0.ename, emp1.ename AS mnameFROM emp AS emp0 LEFT JOIN emp AS emp1 ON emp0.MGR = emp1.empno;# 4. 列出受雇⽇期早于其直接上级的所有员⼯。SELECT *FROM emp AS e0WHERE e0.HIREDATE &lt; ( SELECT e1.HIREDATE FROM emp e1 WHERE e1.empno = e0.MGR);SELECT e0.ename ,e0.HIREDATE ,e1.HIREDATE AS mgdate,e1.ename AS mgFROM emp e0,emp e1WHERE e0.MGR = e1.empno AND e0.HIREDATE&lt; e1.`HIREDATE`;# 5. 列出部门名称和这些部门的员⼯信息，同时列出那些没有员⼯的部门。SELECT e0.*,d.*FROM emp e0 RIGHT JOIN dept d ON e0.DEPTNO = d.deptno#6.列出所有“CLERK”（办事员）的姓名及其部门名称。SELECT e.ename,d.dname FROM emp e,dept dWHERE e.DEPTNO = d.deptno AND e.JOB ='CLERK';#7 列出最低薪⾦⼤于1500的各种⼯作。SELECT JOB, min(SAL),max(SAL) FROM emp GROUP BY JOB;SELECT JOBFROM empGROUP BY emp.JOBHAVING min(SAL) &gt; 1500;#8. 列出在部门“SALES”⼯作的员⼯的姓名，假定不知道销售部的部门编号。SELECT e.ename,e.DEPTNOFROM emp e WHERE e.DEPTNO = ( SELECT d.DEPTNO FROM dept d WHERE d.dname='SALES');#29.查询出最早⼯作的那个⼈的名字、⼊职时间和薪⽔。SELECT *FROM empWHERE HIREDATE = ( SELECT min(HIREDATE) FROM emp);# 30. 显⽰所有员⼯的名字、薪⽔、奖⾦，如果没有奖⾦，暂时显⽰100.SELECT emp.ename,emp.SAL,ifnull(emp.COMM,100) FROM emp;#33 删除10号部门薪⽔最⾼的员⼯SELECT DEPTNO, min(SAL),max(SAL) FROM emp GROUP BY DEPTNO;SELECT * FROM emp e WHERE e.SAL=( SELECT MAX(SAL) FROM emp GROUP BY DEPTNO HAVING DEPTNO=10) AND e.DEPTNO = 10;SELECT @@autocommit;SET @@autocommit = 0;# 34.将薪⽔最⾼的员⼯的薪⽔降30%SELECT ename,SAL*0.7 FROM emp AS e WHERE e.SAL = (SELECT MAX(SAL) FROM emp);#35. 查询员⼯姓名，⼯资和 ⼯资级别(⼯资&gt;=3000 为3级，⼯资&gt;2000 为2级，⼯资&lt;=2000 为1级)SELECT e0.ename,e0.SAL, CASE WHEN SAL&lt;=2000 THEN 'lv1' WHEN SAL &gt;=3000 THEN 'lv3' ELSE 'lv2' END AS levelFROM emp e0;SELECT *FROM emp;DELETE FROM emp;ROLLBACK;","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"}],"tags":[]},{"title":"SQL概念","slug":"sql/SQL分类","date":"2018-07-20T07:49:23.000Z","updated":"2018-07-20T12:13:45.000Z","comments":true,"path":"2018/07/20/sql/SQL分类/","link":"","permalink":"http://io.stelawliet.top/2018/07/20/sql/SQL分类/","excerpt":"","text":"SQLStructured Query Language DDL数据定义语言-Data Definition Language 用来定义数据库的对象,如数据表,视图,索引. 123456create table stu; drop table stu;alter table stu drop/change/modify/addtruncate DML数据处理语言-Data Manipulation Language 数据库表的CRUD update insert delete 12 DCL数据控制语言 - Data Control Language 设置用户权限和控制事务语句 grant revoke if...else while begin transaction DQL数据查询语言 -Data Query Language表记录查询SELECT","categories":[{"name":"SQL","slug":"SQL","permalink":"http://io.stelawliet.top/categories/SQL/"},{"name":"SQL Definition","slug":"SQL/SQL-Definition","permalink":"http://io.stelawliet.top/categories/SQL/SQL-Definition/"},{"name":"SQL 概念","slug":"SQL/SQL-Definition/SQL-概念","permalink":"http://io.stelawliet.top/categories/SQL/SQL-Definition/SQL-概念/"}],"tags":[]},{"title":"DML","slug":"sql/DML","date":"2018-07-19T12:54:04.000Z","updated":"2018-07-20T12:11:41.000Z","comments":true,"path":"2018/07/19/sql/DML/","link":"","permalink":"http://io.stelawliet.top/2018/07/19/sql/DML/","excerpt":"","text":"updateupdate table xxx set column = val where condition insertinsert into tableName (column,column) values(val,val ) delete from tableName where condition","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"dml","slug":"sql/dml","permalink":"http://io.stelawliet.top/categories/sql/dml/"}],"tags":[]},{"title":"","slug":"MD/idea/code 2019","date":"2018-07-19T11:58:48.000Z","updated":"2018-07-19T12:05:44.000Z","comments":true,"path":"2018/07/19/MD/idea/code 2019/","link":"","permalink":"http://io.stelawliet.top/2018/07/19/MD/idea/code 2019/","excerpt":"","text":"1K71U8DBPNE-eyJsaWNlbnNlSWQiOiJLNzFVOERCUE5FIiwibGljZW5zZWVOYW1lIjoibGFuIHl1IiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IkZvciBlZHVjYXRpb25hbCB1c2Ugb25seSIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJXUyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUkMiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJEQyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkRCIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUk0iLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJETSIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkFDIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiRFBOIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiR08iLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJQUyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkNMIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJSU1UiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifV0sImhhc2giOiI4OTA4Mjg5LzAiLCJncmFjZVBlcmlvZERheXMiOjAsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-Owt3/+LdCpedvF0eQ8635yYt0+ZLtCfIHOKzSrx5hBtbKGYRPFDrdgQAK6lJjexl2emLBcUq729K1+ukY9Js0nx1NH09l9Rw4c7k9wUksLl6RWx7Hcdcma1AHolfSp79NynSMZzQQLFohNyjD+dXfXM5GYd2OTHya0zYjTNMmAJuuRsapJMP9F1z7UTpMpLMxS/JaCWdyX6qIs+funJdPF7bjzYAQBvtbz+6SANBgN36gG1B2xHhccTn6WE8vagwwSNuM70egpahcTktoHxI7uS1JGN9gKAr6nbp+8DbFz3a2wd+XoF3nSJb/d2f/6zJR8yJF8AOyb30kwg3zf5cWw==-MIIEPjCCAiagAwIBAgIBBTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE1MTEwMjA4MjE0OFoXDTE4MTEwMTA4MjE0OFowETEPMA0GA1UEAwwGcHJvZDN5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQC9WZuYgQedSuOc5TOUSrRigMw4/+wuC5EtZBfvdl4HT/8vzMW/oUlIP4YCvA0XKyBaCJ2iX+ZCDKoPfiYXiaSiH+HxAPV6J79vvouxKrWg2XV6ShFtPLP+0gPdGq3x9R3+kJbmAm8w+FOdlWqAfJrLvpzMGNeDU14YGXiZ9bVzmIQbwrBA+c/F4tlK/DV07dsNExihqFoibnqDiVNTGombaU2dDup2gwKdL81ua8EIcGNExHe82kjF4zwfadHk3bQVvbfdAwxcDy4xBjs3L4raPLU3yenSzr/OEur1+jfOxnQSmEcMXKXgrAQ9U55gwjcOFKrgOxEdek/Sk1VfOjvS+nuM4eyEruFMfaZHzoQiuw4IqgGc45ohFH0UUyjYcuFxxDSU9lMCv8qdHKm+wnPRb0l9l5vXsCBDuhAGYD6ss+Ga+aDY6f/qXZuUCEUOH3QUNbbCUlviSz6+GiRnt1kA9N2Qachl+2yBfaqUqr8h7Z2gsx5LcIf5kYNsqJ0GavXTVyWh7PYiKX4bs354ZQLUwwa/cG++2+wNWP+HtBhVxMRNTdVhSm38AknZlD+PTAsWGu9GyLmhti2EnVwGybSD2Dxmhxk3IPCkhKAK+pl0eWYGZWG3tJ9mZ7SowcXLWDFAk0lRJnKGFMTggrWjV8GYpw5bq23VmIqqDLgkNzuoog==","categories":[],"tags":[]},{"title":"JDK Proxy分析","slug":"Java/JavaSE/JDK动态代理分析","date":"2018-07-18T08:06:56.000Z","updated":"2018-08-31T12:46:24.000Z","comments":true,"path":"2018/07/18/Java/JavaSE/JDK动态代理分析/","link":"","permalink":"http://io.stelawliet.top/2018/07/18/Java/JavaSE/JDK动态代理分析/","excerpt":"","text":"首先打印出 1Object Proxy.newProxyInstance(ClassLoader loader,Interfaces interfaces,InvocationHandler handler)方法返回的代理对象 class com.sun.proxy.$Proxy0 通常打印出的类名是当前类与包的关系,但是这里从proxy的包下也找不到$Proxy类.因为代理类是运行时代动态生成的. 所以从Proxy类的源码中找答案.分析后可知代理类的是由一个内部类 ProxyBuilder生成的 12345678910111213141516171819202122232425262728293031323334353637private static final class ProxyBuilder &#123; //....略 // prefix for all proxy class names private static final String proxyClassNamePrefix = \"$Proxy\"; // next number to use for generation of unique proxy class names private static final AtomicLong nextUniqueNumber = new AtomicLong(); //.....略 /* * Choose a name for the proxy class to generate. */ long num = nextUniqueNumber.getAndIncrement(); String proxyName = proxyPkg + proxyClassNamePrefix + num; /* * Generate the specified proxy class. */ byte[] proxyClassFile = ProxyGenerator.generateProxyClass( proxyName, interfaces, accessFlags); try &#123; return defineClass0(loader, proxyName, proxyClassFile, 0, proxyClassFile.length); &#125; catch (ClassFormatError e) &#123; /* * A ClassFormatError here means that (barring bugs in the * proxy class generation code) there was some other * invalid aspect of the arguments supplied to the proxy * class creation (such as virtual machine limitations * exceeded). */ throw new IllegalArgumentException(e.toString()); &#125; &#125; 从上面摘出的部分源码就可以看出代理类的类名由以下代码生成 String proxyName = proxyPkg + proxyClassNamePrefix + num; String proxyClassNamePrefix = &quot;$Proxy&quot;; num为一个自增的线程安全的AtomicLong类型(多线程时保证原子性唯一),记录代理类的个数序号 public static final String PROXY_PACKAGE = &quot;com.sun.proxy&quot; 前面是类名的生成规范,如何动态生成的类则是下面的代码给出答案. 1234567891011121314151617181920212223ByteArrayOutputStream bout = new ByteArrayOutputStream(); DataOutputStream dout = new DataOutputStream(bout); try &#123; /* * Write all the items of the \"ClassFile\" structure. * See JVMS section 4.1. */ // u4 magic; dout.writeInt(0xCAFEBABE); // u2 minor_version; dout.writeShort(CLASSFILE_MINOR_VERSION); // u2 major_version; dout.writeShort(CLASSFILE_MAJOR_VERSION); cp.write(dout); // (write constant pool) // u2 access_flags; dout.writeShort(accessFlags); // u2 this_class; dout.writeShort(cp.getClass(dotToSlash(className))); // u2 super_class; dout.writeShort(cp.getClass(superclassName)); 按照虚拟机的class文件规范动态生成代理类,直接通过DataOutputStream写入字节码文件相应的结构,0xCAFEBABE是虚拟机的class文件规范中规定的文件开头必须固定的内容.后面是相应的版本信息等,具体查看深入jvm的calss文件结构详解. class文件生成后,通过前面newProxyInstance()中传入的ClassLoader把生成的字节码加载到jvm的中. 然后我们通过ProxyGenerator.generateProxyClass()方法获取动态生成的代理对象的类的字节码文件. 写入文件中进行反编译. jdk1.10的ProxyGenerator.generateProxyClass()方法找不到.切换jdk1.8的才找到反编译:idea自带反编译工具,直接用idea打开class文件就可以 反编译生成的代理对象的class文件.其中部分代码如下 12345678910111213141516171819202122public final class $Proxy0 extends Proxy implements $Proxy0 public $Proxy0(InvocationHandler var1) throws &#123; super(var1); &#125;public final void update(int var1) throws &#123; try &#123; super.h.invoke(this, m3, new Object[]&#123;var1&#125;); &#125; catch (RuntimeException | Error var3) &#123; throw var3; &#125; catch (Throwable var4) &#123; throw new UndeclaredThrowableException(var4); &#125; &#125;static&#123; //.... //前后还有一些Method的初始化这里省略. m3 = Class.forName(\"com.sun.proxy.$Proxy0\") .getMethod(\"update\", Integer.TYPE); //...&#125; 从反编译后的源码中可以看出,当调用代理对象的方法时,会去调用InvocationHandler的invoke方法. 在invoke方法中传入被代理对象要执行的method和相应的参数,然后通过反射来调用.在调用前后执行我们想要的方法. 1234567(obj,method,args)-&gt; &#123; System.out.println(&quot;proxy before&quot;); //这里invoke中传入的是原始对象.而不是方法中的obj.不然会产生无限递归 Object res = method.invoke(finalUpdate, args); System.out.println(&quot;proxy after&quot;); return res;&#125; InvocationHandler就是我们在生成代理对象时传入的InvocationHandler的实现类. 总结 jdk动态代理的局限:只能针对于接口的代理. 要代理某个的方法时,必须先设计该方法的接口,然后实现该方法的接口才能使用jdk的动态代理.","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"api","slug":"java/api","permalink":"http://io.stelawliet.top/categories/java/api/"}],"tags":[{"name":"jdk动态代理","slug":"jdk动态代理","permalink":"http://io.stelawliet.top/tags/jdk动态代理/"},{"name":"api源码分析","slug":"api源码分析","permalink":"http://io.stelawliet.top/tags/api源码分析/"}]},{"title":"","slug":"MD/test.mdcopy","date":"2018-07-17T11:03:57.000Z","updated":"2018-07-17T11:12:31.000Z","comments":true,"path":"2018/07/17/MD/test.mdcopy/","link":"","permalink":"http://io.stelawliet.top/2018/07/17/MD/test.mdcopy/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"MD/哔哩哔哩/补s","date":"2018-07-17T09:03:50.000Z","updated":"2018-07-17T09:03:50.000Z","comments":true,"path":"2018/07/17/MD/哔哩哔哩/补s/","link":"","permalink":"http://io.stelawliet.top/2018/07/17/MD/哔哩哔哩/补s/","excerpt":"","text":"2017 少女终末旅行 Just Because 学员默示录 噬神者 魔弹之王与战姬 \u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000","categories":[],"tags":[]},{"title":"testo,","slug":"MD/test副本","date":"2018-07-17T08:45:32.000Z","updated":"2018-07-17T08:45:32.000Z","comments":true,"path":"2018/07/17/MD/test副本/","link":"","permalink":"http://io.stelawliet.top/2018/07/17/MD/test副本/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/reflect反射注意","date":"2018-07-17T06:50:30.000Z","updated":"2018-07-17T06:50:59.000Z","comments":true,"path":"2018/07/17/Java/JavaSE/reflect反射注意/","link":"","permalink":"http://io.stelawliet.top/2018/07/17/Java/JavaSE/reflect反射注意/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Nginx基本命令","slug":"Linux/server/nginx/Nginx基本命令","date":"2018-07-15T10:05:41.000Z","updated":"2018-10-20T10:25:19.000Z","comments":true,"path":"2018/07/15/Linux/server/nginx/Nginx基本命令/","link":"","permalink":"http://io.stelawliet.top/2018/07/15/Linux/server/nginx/Nginx基本命令/","excerpt":"","text":"➜ bin nginx -h 1234567891011121314151617181920212223nginx version: nginx/1.8.0Usage: nginx -?hvVtq -c filename [-g directives]Options: -?,-h : this help -v : show version and exit -V : show version and configure options then exit -t : test configuration and exit -q : suppress non-error messages during configuration testing -s signal : send signal to a master process: stop, quit, reopen, reload -p prefix : set prefix path (default: /usr/local/Cellar/nginx/1.8.0/) -c filename : set configuration file (default: /usr/local/etc/nginx/nginx.conf) -g directives : set global directives out of configuration file nginx启动，重启，关闭命令停止操作停止操作是通过向nginx进程发送信号（什么是信号请参阅linux文 章）来进行的步骤1：查询nginx主进程号ps -ef | grep nginx在进程列表里 面找master进程，它的编号就是主进程号了。步骤2：发送信号从容停止Nginx：kill -QUIT 主进程号快速停止Nginx：kill -TERM 主进程号强制停止Nginx：pkill -9 nginx 另外， 若在nginx.conf配置了pid文件存放路径则该文件存放的就是Nginx主进程号，如果没指定则放在nginx的logs目录下。有了pid文 件，我们就不用先查询Nginx的主进程号，而直接向Nginx发送信号了，命令如下：kill -信号类型 ‘/usr/nginx/logs/nginx.pid’ 平滑重启如果更改了配置就要重启Nginx，要先关闭Nginx再打开？不是的，可以向Nginx 发送信号，平滑重启。平滑重启命令：kill -HUP 住进称号或进程号文件路径 或者使用 /usr/nginx/sbin/nginx -s reload 注意，修改了配置文件后最好先检查一下修改过的配置文件是否正 确，以免重启后Nginx出现错误影响服务器稳定运行。判断Nginx配置是否正确命令如下：nginx -t -c /usr/nginx/conf/nginx.conf 或者 /usr/nginx/sbin/nginx -t 平滑升级如果服务器正在运行的Nginx要进行升级、添加或删除模块时，我们需 要停掉服务器并做相应修改，这样服务器就要在一段时间内停止服务，Nginx可以在不停机的情况下进行各种升级动作而不影响服务器运行。步骤1：如 果升级Nginx程序，先用新程序替换旧程序文件，编译安装的话新程序直接编译到Nginx安装目录中。步 骤2：执行命令kill -USR2 旧版程序的主进程号或进程文件名此时旧的Nginx主进程将会把自己的进程文件改名为.oldbin，然后执行新版 Nginx。新旧Nginx会同市运行，共同处理请求。这时要逐步停止旧版 Nginx，输入命令：kill -WINCH 旧版主进程号慢慢旧的工作进程就都会随着任务执行完毕而退出，新版的Nginx的工作进程会逐渐取代旧版 工作进程。 此 时，我们可以决定使用新版还是恢复到旧版。不重载配置启动新/旧工作进程kill -HUP 旧/新版主进程号从容关闭旧/新进程kill -QUIT 旧/新主进程号如果此时报错，提示还有进程没有结束就用下面命令先关闭旧/新工作进程，再关闭主进程号：kill -TERM 旧/新工作进程号 这样下来，如果要恢复到旧版本，只需要上面的几个步 骤都是操作新版主进程号，如果要用新版本就上面的几个步骤都操作旧版主进程号就行了。 上面就是Nginx的一些基本的操作，希望以后Nginx能有更好的方法来处理这些操作， 最好是Nginx的命令而不是向Nginx进程发送系统信号。","categories":[{"name":"server","slug":"server","permalink":"http://io.stelawliet.top/categories/server/"},{"name":"nginx","slug":"server/nginx","permalink":"http://io.stelawliet.top/categories/server/nginx/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"http://io.stelawliet.top/tags/nginx/"}]},{"title":"Tomcat","slug":"Linux/server/Tomcat/Tomcat Architecture","date":"2018-07-14T13:00:41.000Z","updated":"2018-07-15T14:22:10.000Z","comments":true,"path":"2018/07/14/Linux/server/Tomcat/Tomcat Architecture/","link":"","permalink":"http://io.stelawliet.top/2018/07/14/Linux/server/Tomcat/Tomcat Architecture/","excerpt":"","text":"文件结构confcatalina.policy:Tomcat 安全策略文件,控制JVM相关权限,参考java.securityPermission catalina.porperties: Tomcat Catalina行为控制配置文件,如Common ClassLoader logging.properties :Tomcat 日志配置文件,JDK logging server.xml: Tomcat Server配置文件Server Listener ….==待补充==&lt;Listener className=&quot;org.apache.catalina.startup.VersionLoggerListener&quot; /&gt; GlobalNamingResource:全局JNDI资源 Resource 下面是配置权限由后面的tomcat-users.xml提供数据12345678910&lt;GlobalNamingResources&gt; &lt;!-- Editable user database that can also be used by UserDatabaseRealm to authenticate users --&gt; &lt;Resource name=\"UserDatabase\" auth=\"Container\" type=\"org.apache.catalina.UserDatabase\" description=\"User database that can be updated and saved\" factory=\"org.apache.catalina.users.MemoryUserDatabaseFactory\" pathname=\"conf/tomcat-users.xml\" /&gt; &lt;/GlobalNamingResources&gt; Service “name=Catalina” Connecctor 配置不同协议不同端口的连接 参考文件tomcat-7.0-doc/cinfig/http.html 实现类org.apache.catalina.connector.Connector Executor 线程池的实现类 org.apache.catalina.core.StandardThreadExecutor 12345678910111213141516171819 &lt;!--http配置 --&gt; &lt;Connector port=\"8080\" protocol=\"HTTP/1.1\" connectionTimeout=\"20000\" redirectPort=\"8443\" /&gt; &lt;!--https配置 --&gt; &lt;Connector port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" maxThreads=\"150\" SSLEnabled=\"true\"&gt; &lt;SSLHostConfig&gt; &lt;Certificate certificateKeystoreFile=\"conf/localhost-rsa.jks\" type=\"RSA\" /&gt; &lt;/SSLHostConfig&gt; &lt;/Connector&gt;&lt;!--自定义线程池--&gt; &lt;Executor name=\"tomcatThreadPool\" namePrefix=\"catalina-exec-\" maxThreads=\"150\" minSpareThreads=\"4\"/&gt; --&gt; Engine&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt; realm 12345678910&lt;!-- Use the LockOutRealm to prevent attempts to guess user passwords via a brute-force attack --&gt; &lt;Realm className=\"org.apache.catalina.realm.LockOutRealm\"&gt; &lt;!-- This Realm uses the UserDatabase configured in the global JNDI resources under the key \"UserDatabase\". Any edits that are performed against this UserDatabase are immediately available for use by the Realm. --&gt; &lt;Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\" resourceName=\"UserDatabase\"/&gt; &lt;/Realm&gt; host 虚拟主机 12&lt;Host name=\"localhost\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\"&gt; Valve 阀门类似filter?tomcat默认配置的是关于日志的 123&lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\" prefix=\"localhost_access_log\" suffix=\".txt\" pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt; context.xml:全局Context配置 tomcat-user.xml:Tomcat用户权限配置文件 参考(Realm文件实现方式) web.xml:Servlet标准的web.xml配置文件,Tomcat默认实现的部分配置: org.apache.catalina.servlets.DefaultServlet (静态资源处理的默认servlet) org.apache.jsper.servlet.JapServlet(Jsp文件处理) libTomcat jar公用类库的存放 ecj-*.jar :eclipse java编译器 jasper.jar:jsp编译器 logs目录localhost.${date}.log:当Tomcat webapp无法启动时,查看错误日志 catAlina.${date}.log:控制台输出.System.out外置 webapps简易的app部署 其他方式. webapp 修改conf/server.xml添加Context元素:1&lt;Context docBase=\"$&#123;webAppAbsolutePath&#125;\" path=\"/\" reloadable=\"true\"&gt; 熟悉配置元素参考org.apache.catalina.core.StandardContext setter方法 通过conf下的文件夹配置独立的context 热部署配置&lt;context&gt;中reloadable 属性为true. 123$&#123;TOMCAT_HOME&#125;/conf/$&#123;engine.name&#125;/$&#123;host.name&#125;/$&#123;context&#125;.xml e.g:engine.name=sky host.name=stelawliet context=demo实际就在conf/sky/stelawliet/下创建demo.xml 文件如果直接根路径访问应用/,则ROOT.xml文件","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"server","slug":"java/server","permalink":"http://io.stelawliet.top/categories/java/server/"},{"name":"tomcat","slug":"java/server/tomcat","permalink":"http://io.stelawliet.top/categories/java/server/tomcat/"},{"name":"servlet容器","slug":"java/server/tomcat/servlet容器","permalink":"http://io.stelawliet.top/categories/java/server/tomcat/servlet容器/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"},{"name":"architecture","slug":"architecture","permalink":"http://io.stelawliet.top/tags/architecture/"}]},{"title":"嵌入式 Tomcat","slug":"Linux/server/Tomcat/Tomcat嵌入式","date":"2018-07-14T13:00:41.000Z","updated":"2018-09-07T14:29:12.000Z","comments":true,"path":"2018/07/14/Linux/server/Tomcat/Tomcat嵌入式/","link":"","permalink":"http://io.stelawliet.top/2018/07/14/Linux/server/Tomcat/Tomcat嵌入式/","excerpt":"","text":"todo servlet 3.0 em CLassPathXml 参考 ContextLoaderListenerservlet3.0 annotation 驱动忽略web.xml创建配置 123&lt;configuration&gt; &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;&lt;/configuration&gt; Mercy Blog jar启动 读取jarMETA-INF/MANIFEST.MF,其中属性 Main-Class就是启动main函数的类 参考jdk :java.util.jar.Manifest Tomcat Maven7插件 实现的内嵌tomcat 获取Classpath1String classPath = System.getProperty(\"user.dir\")+File.separator+\"target\"+File.separator+\"classes\"; Tomcat APIEmbedded/Tomecat Service Engine Host Connector Context 2018-07-22 Tomcat实例org.apache.catalina.startup.Tomcat maven坐标:org.apache.tomcat.embed:tomcat-embed-core:7.0.37 Tomcat tomcat = new Tomcat(); tomcat.setPort(port) 设置Host对象 123Host h = tomcat.getHost();h.setName();h.setAppBase(\"webapps\"); 设置Context上下文 123String webapp = $&#123;classpath&#125;+\"webapp\";String contextPath=\"/\";Context context = tomcat.addWebapp(contextPath,webapp); 配置默认的xml 12StandardContext c = (StandardContext)context;c.setDefaultWebXml(classPath+\"/conf/web.xml\"); 其中主要默认配置了静态文件处理的defaultServletorg.apache.catalina.servlets.DefaultServlet 和渲染jsp的jspservlet org.apache.jasper.servlet.JspServlet 1234567891011121314151617181920212223242526272829303132333435363738&lt;servlet&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;debug&lt;/param-name&gt; &lt;param-value&gt;0&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;listings&lt;/param-name&gt; &lt;param-value&gt;false&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet&gt; &lt;servlet-name&gt;jsp&lt;/servlet-name&gt; &lt;servlet-class&gt;org.apache.jasper.servlet.JspServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;fork&lt;/param-name&gt; &lt;param-value&gt;false&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;xpoweredBy&lt;/param-name&gt; &lt;param-value&gt;false&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;3&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;!-- The mapping for the default servlet --&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!-- The mappings for the JSP servlet --&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;jsp&lt;/servlet-name&gt; &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt; &lt;url-pattern&gt;*.jspx&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; conf/web.xml作为配置文件,放置在calsspath下 配置自定义Servlet 启动tomcat.start(); tomcat.getServer.await(); Tomcat8的bug包扫描异常 实例添加自定义servlet12345678910111213141516171819202122232425262728/** * @program: Embedded Tomcat * @description: * @author: Zhaoziqi * @create: 2018-07-23 16:55 **/public class MyTomcat &#123; public static String path =MyTomcat.class.getClassLoader().getResource(\"\").getPath(); public static void main(String[] args) throws ServletException &#123; System.out.println(\"path = \" + path); Tomcat tomcat = new Tomcat(); tomcat.setPort(2222); Context context = tomcat.addWebapp(\"/\", path+\"webapp\"); StandardContext c =(StandardContext) context; c.setDefaultWebXml(path+ \"conf/web.xml\"); Server server = tomcat.getServer(); File file = new File(path+ \"conf/web.xml\"); System.out.println(\"file = \" + file); try &#123; Wrapper wrapper1 = Tomcat.addServlet(c, \"ServletA\", \"sky.ServletA\"); wrapper1.addMapping(\"/hello\"); tomcat.start(); &#125; catch (LifecycleException e) &#123; e.printStackTrace(); &#125; server.await(); &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"server","slug":"java/server","permalink":"http://io.stelawliet.top/categories/java/server/"},{"name":"servlet容器","slug":"java/server/servlet容器","permalink":"http://io.stelawliet.top/categories/java/server/servlet容器/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"}]},{"title":"图","slug":"algorithm/Graph","date":"2018-07-12T07:34:53.000Z","updated":"2018-08-31T11:13:40.000Z","comments":true,"path":"2018/07/12/algorithm/Graph/","link":"","permalink":"http://io.stelawliet.top/2018/07/12/algorithm/Graph/","excerpt":"","text":"图的序列化表示 临接表法 临接矩阵 a(i,j)=1时表示俩点相连 i\\j 0 1 2 3 0 0 1 0 0 1 1 0 1 0 2 0 1 0 0 3 0 0 0 0 由于是无向图,矩阵是基于对角线对称的,所以数据有一半的可以省略,可以把矩阵优化为下三角的部分,从左到右一行一行的放入大小为(n*n+1)/2的一维数组中 123456 (i) 0 1 2 3 _ _ _ _ _(j)0| 0, 1| 1,0, 2| 0,1,0, 3| 0,0,0,0 原本a(i,j)的值为现在a[(i*i+1)/2+j]的值.(a为优化后的数组) 数组生成图(java中为了更方便的计算图的相关算法预先记录了相关冗余的属性,所以建立对象时没有采用以上的优化的一维数组来表示图,不过可以在序列化采用下三角矩阵的数组来存储图的信息) 建立图的java对象: HashMap&lt;Integer,Node&gt; NodeMap 所有结点的Map HashSet&lt;Edge&gt; edgeSet 所有边的Set 结点 Node Object value 结点的值 int in 表示有in个结点指向this int out表示有out个结点指向其他结点 List&lt;Node&gt; nextList 本结点指向的其他结点的集合 List&lt;Edge&gt; edgeList 从本结点出发的边的集合 边 Edge int weight 边的权重 Node from 这条边由form结点出发 Node to 这条边是指向 to结点 2维数组生成图的结构前面的序列化表示关注点是图的每个顶点.下面二维数组的表示是基于每一条边的. 二维数组matrix中的每个一维数组为[权值,form,to](matrix简写为arr)遍历matrix中的每个一维数组 0 -&gt; arr.length-1 arr[i][0] =&gt; 权重 arr[i][1]=&gt; int form arr[i][2]=&gt; int to if graph.nodeMap中没有form -&gt; put(form,new Node(from)) if graph.nodeMap中没有to -&gt; put(form,new Node(to)) 1234567891011121314151617181920212223242526272829303132/** * @program: exam * @description: * @author: Zhaoziqi * @create: 2018-07-16 11:10 **/public class Graph &#123; //顶点集合,这里简化Integer为顶点的值,可以通过每个顶点的值取得顶点Node对象 HashMap&lt;Integer, Node&gt; nodes = new HashMap&lt;&gt;(); //边集合 HashSet&lt;Edge&gt; edges = new HashSet&lt;&gt;(); public Graph(int[][] arr) &#123; for (int[] ints : arr) &#123; int weight = ints[0]; int from = ints[1]; int to = ints[2]; if (!nodes.containsKey(from))&#123; nodes.put(from,new Node(from)); &#125; if (!nodes.containsKey(to))&#123; nodes.put(to,new Node(to)); &#125; Node f = nodes.get(from); Node t = nodes.get(to); f.nodeList.add(t); f.out++; t.in++; edges.add(new Edge(weight,f,t)); &#125; &#125;&#125; 宽度优先遍历 BFS以距离源结点的层数来遍历,距源结点近的先输出. 1.利用队列实现2.从头结点开始依次按照相同广度添加到队列中.然后弹出,打印3.每弹出一个节点,把该节点所有没有进过队列的临接点放入队列4.直到队列变空 12345678void BFS(Vertex v)&#123; visited[V] = true; Enqueue(V,Q);//入队 while(!Enqueque.isEmpty())&#123; &#125; &#125; 12345678910111213141516171819202122232425262728293031323334353637383940//迭代void BfsForeachGraph(Node head)&#123; //避免重复遍历打印,使用打印遍历过的加入set中 HashSet&lt;Node&gt; set = new HashSet(); Queue&lt;Node&gt; queue = new LinkedList(); queue.add(head); set.add(head); while(!queue.isEmpty())&#123; Node node = queue.poll(); System.out.println(node.value); //node.nextList为当前node指向的所有结点的集合 for(Node next : node.nextList)&#123; //检查是否已经打印过 if(!set.contains(next))&#123; queue.add(next); set.add(next); &#125; &#125; &#125;&#125;//递归//待改进void BfsForeachGraph(Node head)&#123; HashSet&lt;Node&gt; set = new LinkedHashSet(); set.add(head); Queue&lt;Node&gt; queue = new LinkedList(); queue.add(head); System.out.println(node.value); BFS(head,set);&#125;void BFS(Node node,HashSet&lt;Node&gt; set)&#123; for(Node next : node.nextList)&#123; //检查是否已经打印过 if(!set.contains(next))&#123; set.add(next); System.out.println(node.value); &#125; &#125; &#125;&#125; 深度优先遍历 DFS从头结点开始一直走下去.直到所有的路走完才依次退回上一个结点.退回如果有其他分支后也一直走下去.直到所有的路走完才依次退回上一个结点.(走过的结点不走) 利用栈实现 从源结点开始把结点按照深度放入栈,然后弹出 每弹出一个结点,把该结点其中一个没有进过栈的邻接点放入栈.并打印 直到栈变空 具体实现:传入要遍历的图的头结点head Stack&lt;Node&gt; stack 准备一个存储Node的栈 HashSet&lt;Node&gt; set 准备一个存储Node的Set用来判断是否遍历打印过 添加head到set和stack中,打印头结点的val .while - stack为空 pop出stack顶 =&gt; Node cur for each cur的nextList =&gt;Node next ,判断next是否在set中添加过 true - continue; 在set中添加过说明已经在前面被遍历打印过 false : 先添加cur到栈中 然后添加next到栈中 set中添加next进行标记.然后打印next的val beak;结束遍历 123456789101112131415161718192021222324252627282930void DFS(Node head)&#123; Stack&lt;Node&gt; stack = new Stack(); Set&lt;Node&gt; set = new HashSet(); stack.add(head); set.add(head); System.out.println(head.value); while(!stack.isEmpty())&#123; Node node = stack.pop(); for(Node next : node.NextList)&#123; if(!set.contanins(next))&#123; set.add(next); System.out.println(next.value); stack.push(node); srack.push(next); break; &#125; &#125; &#125;&#125;//递归Set&lt;Node&gt; set = new LinkedHashSet();void DFS(Node head)&#123; System.out.println(head.value); set.add(head); for(Node next : node.NextList)&#123; if(!set.contanins(next))&#123; DFS(next); &#125; &#125;&#125; 拓扑排序具体实现 HashMap&lt;Node,Integer&gt; inMap 记录所有结点的入度 Queue&lt;Node&gt; zeroInQueue 记录所有0入度的结点 从zeroInQueue中弹出结点.添加到返回结果的list中 遍历弹出的结点的邻接点集合nextList 每个邻接点的入度-1,如果入度-1后为0则添加到zeroInQueue队列中. 重复1,直到zeroInQueue为空 zeroInQueue保证先进先出.所以后继-1 n次后才变为0的也会根据进入的顺序依次弹出 最小生成树kruskal算法 先从最小全值的边开始连接. 放弃产生回路的边具体实现 12 prim算法 先任意选择一个node 把该node的所有边加入到优先级队列(小根堆)中. 一直从队列中取出最小边. 如果指向的结点也没有入过set中.把该结点的所有边加入到队列中 重复2直到队列为空.","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"graph","slug":"algorithm/graph","permalink":"http://io.stelawliet.top/categories/algorithm/graph/"}],"tags":[{"name":"图的遍历","slug":"图的遍历","permalink":"http://io.stelawliet.top/tags/图的遍历/"},{"name":"prim","slug":"prim","permalink":"http://io.stelawliet.top/tags/prim/"},{"name":"kruskal","slug":"kruskal","permalink":"http://io.stelawliet.top/tags/kruskal/"},{"name":"最小生成树","slug":"最小生成树","permalink":"http://io.stelawliet.top/tags/最小生成树/"},{"name":"拓扑排序","slug":"拓扑排序","permalink":"http://io.stelawliet.top/tags/拓扑排序/"},{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/tags/algorithm/"}]},{"title":"认识UTF编码","slug":"Java/JavaSE/UTF-8&UTF-16","date":"2018-07-08T12:36:44.000Z","updated":"2018-07-08T12:39:13.000Z","comments":true,"path":"2018/07/08/Java/JavaSE/UTF-8&UTF-16/","link":"","permalink":"http://io.stelawliet.top/2018/07/08/Java/JavaSE/UTF-8&UTF-16/","excerpt":"","text":"","categories":[{"name":"exknow","slug":"exknow","permalink":"http://io.stelawliet.top/categories/exknow/"}],"tags":[{"name":"字符编码","slug":"字符编码","permalink":"http://io.stelawliet.top/tags/字符编码/"},{"name":"utf8","slug":"utf8","permalink":"http://io.stelawliet.top/tags/utf8/"}]},{"title":"","slug":"Java/JavaSE/API note/Untitled 1","date":"2018-07-08T07:47:18.000Z","updated":"2018-07-08T07:47:18.000Z","comments":true,"path":"2018/07/08/Java/JavaSE/API note/Untitled 1/","link":"","permalink":"http://io.stelawliet.top/2018/07/08/Java/JavaSE/API note/Untitled 1/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"file类与java路径注意","slug":"Java/JavaSE/API note/file类","date":"2018-07-07T10:39:23.000Z","updated":"2018-07-17T07:22:16.000Z","comments":true,"path":"2018/07/07/Java/JavaSE/API note/file类/","link":"","permalink":"http://io.stelawliet.top/2018/07/07/Java/JavaSE/API note/file类/","excerpt":"","text":"constructors public File(File parent, String child) public File(String pathname) public File(String parent,String child) public File(URI uri) 通过file:URI转化为一个抽象的路径来创建一个新的file实例 method获取 String getName(); 返回由此抽象路径名表示的文件或目录的名称。该名称是路径名名称序列中的最后一个名称。如果路径名名称序列为空，则返回空字符串。 String getParent(); 返回此抽象路径名父目录的路径名字符串；如果此路径名没有指定父目录，则返回 null。抽象路径名的父 路径名由路径名的前缀（如果有），以及路径名名称序列中最后一个名称以外的所有名称组成。如果名称序列为空，那么该路径名没有指定父目录。 创建删除boolean createNewFile(); 文件不存在时创建空文件,父目录必须存在,否则抛出异常.如果文件以及存在返回false. boolean delete(); 无法删除非空目录 boolean mkdirs(); 可以创建多级目录.mkdir()只能创建1级目录 文件移动与重命名boolean renameTo(File dest)路径相同则重命名路径不同则移动 目录遍历String list(); File[] listFiles(); 当前file为文件时返回null为空目录时返回[]空file数组 java路径new File(String path); 空字符串路径时为当前项目src根路径 Xxx.class.getResource(String path) 空字符串时为当前class文件的包路径下(编译后的) /时为当前class的classpath根路径 Xxx.class.getClassLoader().getResource(&quot;&quot;); 空字符串时为当前class的classpath根路径(编译后的)此时和Xxx.class.getResource(&quot;/&quot;)一样","categories":[],"tags":[{"name":"note","slug":"note","permalink":"http://io.stelawliet.top/tags/note/"}]},{"title":"博学谷习题","slug":"Java/JavaSE/博学谷练习/集合","date":"2018-07-07T03:46:09.000Z","updated":"2018-07-07T03:52:11.000Z","comments":true,"path":"2018/07/07/Java/JavaSE/博学谷练习/集合/","link":"","permalink":"http://io.stelawliet.top/2018/07/07/Java/JavaSE/博学谷练习/集合/","excerpt":"","text":"12345678910113、下面代码运行结果是？（）HashSet&lt;String&gt; set = new HashSet&lt;String&gt;();set.add(\"cba\");set.add(\"abc\");set.add(\"bac\"); set.add(\"cba\"); for (int i = 0; i &lt; set.size(); i++) &#123; System.out.println(set.get(i)); &#125;&#125; HashSet中没有get()方法; 1、以下哪些修饰符可以使其修饰的变量只能被同包类或者子类访问? 1234abstract可以修饰类，成员变量，成员方法static可以修饰类，成员变量，成员方法final可以修饰类，成员变量，成员方法public可以修饰类，成员变量，成员方法","categories":[{"name":"练习题","slug":"练习题","permalink":"http://io.stelawliet.top/categories/练习题/"},{"name":"错题集","slug":"练习题/错题集","permalink":"http://io.stelawliet.top/categories/练习题/错题集/"}],"tags":[]},{"title":"java.util.concurrent了解","slug":"Java/concurrent/java.util.concurrent","date":"2018-07-07T02:47:03.000Z","updated":"2018-07-11T11:35:25.000Z","comments":true,"path":"2018/07/07/Java/concurrent/java.util.concurrent/","link":"","permalink":"http://io.stelawliet.top/2018/07/07/Java/concurrent/java.util.concurrent/","excerpt":"","text":"volatile与内存可见性 多个线程共享数据时,保证内存数据可见性.相较于synchronized是一种较为轻量的同步策略.(根据 Java 虚拟机规范的规定，volatile 变量依然有共享内存的拷贝，但是由于它特殊的操作顺序性规定——从工作内 存中读写数据前，必须先将主内存中的数据同步到工作内存中，所有看起来如同直接在主内存中读写访问一 般，因此这里的描述对于 volatile 也不例外) 123456789101112131415161718192021222324252627282930313233public class Volatile &#123; public static void main(String[] args) throws InterruptedException &#123; Task task = new Task(); new Thread(task).start(); while (true) &#123;// System.out.println(\"task.flag = \" + task.flag); if (task.flag) &#123; System.out.println(\"while \" + task.flag); break; &#125; &#125; &#125;&#125;class Task implements Runnable &#123; public boolean flag = false; @Override public void run() &#123; try &#123; //睡眠,保证main线程初次进入while时flag还没有被修改 Thread.sleep(200); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; flag = true; System.out.println(\"flag = \" + flag); &#125;&#125;运行结果:flag = true...(一直没有结束,while中的语句一直没有打印) 原因: main线程的while(ture){}执行太快导致线程没有机会去主存中读取已经被其他线程修改的flag.从而导致一直在执行while(ture){}无法结束. volatile 不具备互斥性volatile 不能保证原子性.volatile 修饰后jvm不能==重排序== 原子变量-CAS算法 e.g. i++; 123int temp = i;i = i + 1;i = temp; 从上面的代码可以看出i++这个操作分3个读取,改变,赋值.没有原子性.多线程访问时不安全. 原子变量jdk1.5之后的java.util.concurrent.atomic包下的原子变量: 使用volatile保证内存可见性 CAS(compare-and-swap)算法保证数据的原子性(CAS算法是硬件对并发操作共享数据的支持) CAS 包含3个操作数:内存值V,预估值A,更新值B 当且仅当V==A时,V=B.否则做不操作. 总的分俩次同步操作. 读取V = X 读取A = X,然后判断 V==A? V = B : V = V; CAS大概理解:俩次读取相同变量.俩次值相等没有被其他线程更改的情况下做赋值操作 ConcurrentHashMap 锁分段机制 java.util.concurrent.concurrentHashMap Hashtable的问题,如果存在以下的复合操作(先判断再增删)时,由于Hashtable是全表加锁.锁的粗粒度太高.效率低1234if(!map.contains())&#123; map.put()&#125;以上代码在判断存在操作和put分别有不同的`synchronized`同步锁.可能导致判断后锁又被其他线程占用 concurrentHashMap采用的”锁分段”机制.可以做到多线程并行访问不同的分段.来提高效率 提供了复合操作的同步方法 java.util.concurrent包的其他线程安全效率较高的容器类ConcurrentHashMap -&gt; HashMap ConcurrentSkipListMap -&gt;TreeMap CopyOnWriteArrayList -&gt; ArrayList CopyOnWriteArrayList特性相对于List&lt;T&gt; Collections.synchronizedList(ArrayList list); 都是线程安全,前者迭代器不存在并发修改异常每次更新时复制新的,更新多时效率低期望读取数和遍历远远大于更新数时效率高并发迭代更新多时效率高 CountDownLatch 闭锁 CountDownLatch:闭锁,在指定的线程数运算结束后.才继续执行await()后的代码 CountDOwnLatch(int count) : count值为指定等待的线程数. void countDown(): 单个线程的运算结束时调用,使countDownLatch的等待线程数-1. void await() :在要等待的线程中count次调用countDown()时才返回await(),否则当前线程一直在await()处阻塞. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * @program: DAY_SE * @description: CountDownLatchDemo * 子线程排序完成后交给主线程计算时间并打印结果 * @author: stelawliet * @create: 2018-07-09 16:37 **/public class CountDownLatchDe &#123; public static void main(String[] args) throws InterruptedException &#123; int[] a = &#123;2,3,33,0,9,23,6&#125;; int[] a0 = &#123;121,33,4353,7660,79,67623,766&#125;; CountDownLatch latch = new CountDownLatch(2); TestLatch testLatch = new TestLatch(latch,a); TestLatch testLatch0 = new TestLatch(latch,a0); Long s = System.currentTimeMillis(); new Thread(testLatch).start(); new Thread(testLatch0).start(); latch.await(); System.out.println( (System.currentTimeMillis() - s) + \"ms\"); System.out.println(Arrays.toString(a)); System.out.println(Arrays.toString(a0)); &#125;&#125;class TestLatch implements Runnable &#123; private CountDownLatch latch; private int[] a; public TestLatch(CountDownLatch latch, int[] a) &#123; this.latch = latch; this.a = a; &#125; @Override public void run() &#123; try&#123; sort(a); &#125;finally&#123; //指定任务结束线程计数-1,要放入finally中避免死锁 latch.countDown(); &#125; &#125; private static void sort(int[] a) &#123; for (int i = 0; i &lt; a.length - 1; i++) &#123; for (int j = 0; j &lt; a.length - 1 - i; j++) &#123; if (a[j] &gt; a[j + 1]) &#123; a[j] = a[j] ^ a[j + 1]; a[j + 1] = a[j] ^ a[j + 1]; a[j] = a[j] ^ a[j + 1]; &#125; &#125; &#125; &#125;&#125; latch.countDown();一般都要放入finally中避免死锁. Callable Callable需要使用Future&lt;T&gt;来接受结果T为返回值类型的泛型. T t get(); 方法在调用时会阻塞当前线程直到callable的run返回结果.所以也可以用此实现CountDownLatch的闭锁功能 12345678910111213141516171819202122232425262728293031/** * @program: DAY_SE * @description: FutureTask&amp;Callable Demo * 等待线程计算1-100的和然后main线程输出结果 * @author: Zhaoziqi * @create: 2018-07-09 17:30 **/public class CallableDe &#123; public static void main(String[] args) throws ExecutionException, InterruptedException &#123; Call call = new Call(); FutureTask&lt;Integer&gt; futureTask = new FutureTask&lt;&gt;(call); new Thread(futureTask).start(); //get()方法会阻塞当前线程.等待线程run结束返回 Integer integer = futureTask.get(); System.out.println(\"----------------\"); System.out.println(\"integer = \" + integer); &#125;&#125;class Call implements Callable&lt;Integer&gt; &#123; @Override public Integer call() throws Exception &#123; int sum = 0; for (int i = 0; i &lt;= 100; i++) &#123; sum += i; &#125; return sum; &#125;&#125; 理解:实现Callable来执行线程类似于Javascript的异步.不过js的异步执行的结果不会阻塞而是同步代码执行结束后才返回.使用callable也可以实现类似的效果 lock Lock lock = new ReentrantLock(); lock.lock lock.unlock lock与synchronized的区别 待补充… Condition控制线程通信 Condition condition = lock.newCondition();condition.await(); -&gt; object.wait()condition.signal(); -&gt; object.notify()condition.signalAll(); -&gt; object.notifyAll() wait和notify/notify的使用已经在线程协同中说过 消费者与生产者举例12 线程八锁 线程按序交替 ReadWriteLock 读写锁 ReadWriteLock lock = new ReentrantReadWriteLock 读锁lock.readLock().lock(); lock.readLock().unlock(); 写锁lock.writeLock().lock lock.writeLock().unlock 读读 不需要互斥 写写/读写 需要互斥 线程池 线程调度 Fork/Join/Poll","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"concurrent","slug":"java/concurrent","permalink":"http://io.stelawliet.top/categories/java/concurrent/"},{"name":"并发编程","slug":"java/concurrent/并发编程","permalink":"http://io.stelawliet.top/categories/java/concurrent/并发编程/"}],"tags":[{"name":"synchronized","slug":"synchronized","permalink":"http://io.stelawliet.top/tags/synchronized/"},{"name":"volatile","slug":"volatile","permalink":"http://io.stelawliet.top/tags/volatile/"},{"name":"atomic","slug":"atomic","permalink":"http://io.stelawliet.top/tags/atomic/"}]},{"title":"并发编程note","slug":"Java/concurrent/并发编程note","date":"2018-07-07T02:47:03.000Z","updated":"2018-07-09T06:03:08.000Z","comments":true,"path":"2018/07/07/Java/concurrent/并发编程note/","link":"","permalink":"http://io.stelawliet.top/2018/07/07/Java/concurrent/并发编程note/","excerpt":"","text":"并发性volatile多个线程共享数据时,保证内存数据可见性.相较于synchronized是一种较为轻量的同步策略.(线程每次读取修改volatile修饰的变量时都会直接在主存中操作) 1234567891011121314151617181920212223242526272829303132public class Volatile &#123; public static void main(String[] args) throws InterruptedException &#123; Task task = new Task(); new Thread(task).start(); while (true) &#123;// System.out.println(\"task.flag = \" + task.flag); if (task.flag) &#123; System.out.println(\"while \" + task.flag); break; &#125; &#125; &#125;&#125;class Task implements Runnable &#123; public boolean flag = false; @Override public void run() &#123; try &#123; Thread.sleep(200); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; flag = true; System.out.println(\"flag = \" + flag); &#125;&#125;运行结果:flag = true...(一直没有结束) 原因: main线程的while(ture){}执行太快导致线程没有机会去主存中读取已经被其他线程修改的flag.从而导致一直在执行while(ture){}无法结束. volatile 不具备互斥性volatile 不能保证原子性. 原子性e.g i++; 123int temp = i;i = i + 1;i = temp; 原子变量jdk1.5之后的java.util.concurrent.atomic包下的原子变量: 使用volatile保证内存可见性 CAS(compare-and-swap)算法保证数据的原子性(CAS算法是硬件对并发操作共享数据的支持) CAS 包含3个操作数:内存值V,预估值A,更新值B当且仅当V==A时,V=B.否则做不操作.","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"concurrent","slug":"java/concurrent","permalink":"http://io.stelawliet.top/categories/java/concurrent/"},{"name":"并发编程","slug":"java/concurrent/并发编程","permalink":"http://io.stelawliet.top/categories/java/concurrent/并发编程/"}],"tags":[{"name":"synchronized","slug":"synchronized","permalink":"http://io.stelawliet.top/tags/synchronized/"}]},{"title":"","slug":"Java/faceEx/阿里面试","date":"2018-07-06T08:53:14.000Z","updated":"2018-08-26T08:06:28.000Z","comments":true,"path":"2018/07/06/Java/faceEx/阿里面试/","link":"","permalink":"http://io.stelawliet.top/2018/07/06/Java/faceEx/阿里面试/","excerpt":"","text":"1 JDK 是基于接口实现，而 CGLIB 继承代理类。。。 就是这样会一直问下去，如果聊的差不多了就开始问一些零散的问题： JMM 内存模型，如何划分的？分别存储什么内容？线程安全与否？ 类加载机制，谈到双亲委派模型后会问到哪些违反了双亲委派模型？为什么？为什么要双亲委派？好处是什么？ 平时怎么使用多线程？有哪些好处？线程池的几个核心参数的意义？ 线程间通信的方式？ HashMap 的原理？当谈到线程不安全时自然引申出 ConcurrentHashMap ，它的实现原理？ 分库分表如何设计？垂直拆分、水平拆分？ 业务 ID 的生成规则，有哪些方式？ SQL 调优？平时使用数据库有哪些注意点？ 当一个应用启动缓慢如何优化？ 2 从一个日志文件中根据关键字读取日志，记录出现的次数，最后按照次数排序打印。 3 谈谈你所理解的 HTTP 协议？ 对 TCP 的理解？三次握手？滑动窗口？ 基本算法，Base64 等。 Java 内存模型，Happen Before 的理解。","categories":[],"tags":[]},{"title":"boolean filter","slug":"algorithm/boolean过滤器","date":"2018-07-05T13:16:23.000Z","updated":"2018-07-09T11:44:25.000Z","comments":true,"path":"2018/07/05/algorithm/boolean过滤器/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/algorithm/boolean过滤器/","excerpt":"","text":"布尔过滤器可以实现存储压缩大量数据的集合结构,使用二进制0和1组成的数组上标记记录 e.g int[] arr = new int[5];以java 的int数组举例.java中每个int是4个字节.每个字节是8位.所以一个int在计算机内部由8个0或1表示.所以上面举例的arr长度为5个int.能表示8x5=40个0或1的数组 以下用简写为01数组 哈希函数映射操作 要添加的值用K个哈希函数来进行计算,每个哈希函数得到的值为01数组的索引index 在K个索引上进行1标记 2进制01数组索引记录 创建二进制的01数组; int[] int为32位 ,long为64位,以32位的int举例(K个index为上面K个哈希函数的值,也就是要标记记录的二进制01数组的位置 使用当前要标记的K个index分别去除以int的位数得到int数组的位置下标 intIndex 使用当前的index去%类型大小32得到二进制位的位置bitIndex 取得数组下标位置上的值int[intIndex]和(1&lt;&lt;bitIndex)来 或| 运算e.g[0,1,2,3,4] 举例如果要标记的其中一个index为67.那么java中计算67/32=2,67%32=3.然后要标记的索引就在arr[2]中的int值转化为32为二进制后第3个位置,具体图例如下 [0,1, ==2== ,3,4] /\\ arr[2]转为32位2进制 [ 00==1==0…000 (32位) ] 第3位标记1 1 &lt;&lt; bitIndex 先标记单个int的32位中bitindex的位置为1然后和int[intIndex]来或运算来把这个位置标记到对应int数组的上 判断存在 contains 拿要判断的值用上面的K个哈希函数来取得哈希值. 对哈希值取模.模的大小为2进制01数组的大小. 取模后得到的值为索引,在01数组中判断这个索引位置上的值是否为1; K个索引上的值全为1则存在 2进制数组大小和错误率的关系12345678910111213M = - (n*lnP)/((ln2)^2)k = ln2 * (m/n)n 为样本量p 位要设计的容错率M为01数组的大小k为调整需要的哈希函数个数当 n = 100 * 10^9 (100亿时)p 容错率 0.0001 M的大小为16G","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"}],"tags":[{"name":"boolean过滤器","slug":"boolean过滤器","permalink":"http://io.stelawliet.top/tags/boolean过滤器/"}]},{"title":"","slug":"2018-07-05","date":"2018-07-05T11:09:33.000Z","updated":"2018-07-05T11:09:33.000Z","comments":true,"path":"2018/07/05/2018-07-05/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/2018-07-05/","excerpt":"","text":"#","categories":[],"tags":[]},{"title":"IO","slug":"Java/JavaSE/API note/IO","date":"2018-07-05T10:51:24.000Z","updated":"2018-07-17T07:48:41.000Z","comments":true,"path":"2018/07/05/Java/JavaSE/API note/IO/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/Java/JavaSE/API note/IO/","excerpt":"","text":"OutputStream java.io.OutputStream抽象类是所有字节输出流的超类. void wirte(int b)写入的内容是由int b的二进制 eg. 写入b 为 97时文本内容打开为a void wirte(byte[] bytes,int off,int length)从bytes的字节数组中写入从off开始length为长度的的二进制数 文件追加写入时用OutputStream的子类FIleOutputStream(File f,boolean append),append默认为false,覆盖文件内容.true时是追加到末尾 InputStream java.io.InputStream抽象类是字节输入流的超类. int read() int返回读取的内容,使用(char)强制转换出内容 int read(byte[] bytes) int返回读取的个数,如果返回-1表示读取结束,读取的内容存入到字节数组bytes中 读取和写入e.g123456789101112131415String jpg0 = \"DAY_SE.ipr\";String jpg1 = \"copy2.ipr\";BufferedInputStream in = new BufferedInputStream(new FileInputStream(new File(jpg0)));BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(new File(jpg1))); byte[] bytes = new byte[1024]; int len; while ((len = in.read(bytes)) &gt; 0) &#123; out.write(bytes, 0, len); &#125; out.flush(); out.close(); in.close(); out.close(); Writer void write(int c): 写一个字符void write(char[] chars,int off,int len) Reader int read(): 读取一个字符返回int值 int read(char[] chars): 读取的内容放入chars中,返回的int和上面的inputStream一样. FileOutputstream和FileWriter 在对象创建时生成空文件,会覆盖以及存在的文件 char[] 与 byte[] 的转换char[] UTF-8解码为byte[]byte[] bytes = String.valueOf(chars).getBytes(&quot;UTF8&quot;);byte[] 使用UTF-8编码为char[]char[] chars = new String(bytes,&quot;UTF8&quot;).toCharArray(); 案例:复制多级文件夹 递归实现 迭代实现","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"io","slug":"java/io","permalink":"http://io.stelawliet.top/categories/java/io/"}],"tags":[{"name":"note","slug":"note","permalink":"http://io.stelawliet.top/tags/note/"}]},{"title":"","slug":"Java/JavaSE/API note/集合细节","date":"2018-07-05T09:30:36.000Z","updated":"2018-08-08T07:57:57.000Z","comments":true,"path":"2018/07/05/Java/JavaSE/API note/集合细节/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/Java/JavaSE/API note/集合细节/","excerpt":"","text":"List ArrayListvoid contains() 实现 12345678910111213141516 public boolean contains(Object o) &#123; return indexOf(o) &gt;= 0; &#125;public int indexOf(Object o) &#123; if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) if (o.equals(elementData[i])) return i; &#125; return -1; &#125; 由上面的代码可以看出判断是否存在的方法是equals() 初始化默认容量即初始化时内部对象数组的大小 1234567891011121314151617 /** * Default initial capacity. */ private static final int DEFAULT_CAPACITY = 10;... //初始化 public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException(\"Illegal Capacity: \"+ initialCapacity); &#125; &#125; 阿里巴巴开发注意","categories":[],"tags":[]},{"title":"wait&sleep - notify&notifyAll","slug":"Java/concurrent/线程协同","date":"2018-07-05T08:27:43.000Z","updated":"2018-07-09T12:08:10.000Z","comments":true,"path":"2018/07/05/Java/concurrent/线程协同/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/Java/concurrent/线程协同/","excerpt":"","text":"线程的状态 new(新建)刚创建线程对象new Thread(),还没有调用start(); runnable(可运行)可能在运行中,也可能是即将获得cpu blocked(阻塞) 执行同步代码时锁被其他线程占用则进入blocked 执行wait方法时把锁释放了-&gt;等待notify/notifyAll唤醒 被唤醒后得到锁才能进入runnable waiting(无限等待) 执行了wait后无限等待.只有被唤醒才能进入blocked timed waiting(计时等待) 提前唤醒则进入blocked或runnable 12345678910111213141516public class TimeWait &#123; public static void main(String[] args) throws Exception &#123; Object o = new Object(); new Thread(() -&gt; &#123; synchronized (o) &#123; System.out.println(\"start wait\"); try &#123; o.wait(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"wait out\"); &#125; &#125;).start(); &#125;&#125; teminated(终止) run方法执行结束 异常抛出给JVM synchronized (Object){} 同步代码块.所有线程执行到synchronized代码块时先检查是否已经有其他线程持有此对象锁 同一个对象锁.任何时候只有最多一个线程能进入synchronized中执行代码 在成员方法上时锁的对象为this 在静态方法上时锁的对象为此类的class对象 Thread.sleep() 只释放cpu资源.计时结束后继续往下执行. object.wait() 首先Object.wait()必须在synchronized{}中调用.否则会有IllegalMonitorStateException的异常. 当执行到Object.wait()时会释放当前的锁 释放锁后无限等待直到其他线程调用相同对象锁的notify/notifyAl 对于可能出现的虚假唤醒问题,一般都把wait放在where(true){}或for(;;){}中 object.notify 唤醒任意一个相同对象锁的wait线程进入runnable状态 object.notifyAll 唤醒所有对象锁的wait线程进入blocked 其中一个抢到锁的线程进入runnable","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"api","slug":"java/api","permalink":"http://io.stelawliet.top/categories/java/api/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"多线程","slug":"多线程","permalink":"http://io.stelawliet.top/tags/多线程/"}]},{"title":"bigData note","slug":"Java/JavaSE/BigDataNote","date":"2018-07-05T03:54:11.000Z","updated":"2018-07-14T01:44:37.000Z","comments":true,"path":"2018/07/05/Java/JavaSE/BigDataNote/","link":"","permalink":"http://io.stelawliet.top/2018/07/05/Java/JavaSE/BigDataNote/","excerpt":"","text":"类加载器的细节 双亲委派好处 内部类final的设计 方法区详细结构 lock和synchronized的区别 线程锁的区别 thread join 集合详细结构实现 lambda linked 1y+len*x","categories":[{"name":"note","slug":"note","permalink":"http://io.stelawliet.top/categories/note/"},{"name":"todo","slug":"note/todo","permalink":"http://io.stelawliet.top/categories/note/todo/"}],"tags":[]},{"title":"BigDataNote","slug":"Java/JavaSE/Thread&Runnable","date":"2018-07-04T12:03:06.000Z","updated":"2018-07-05T04:07:32.000Z","comments":true,"path":"2018/07/04/Java/JavaSE/Thread&Runnable/","link":"","permalink":"http://io.stelawliet.top/2018/07/04/Java/JavaSE/Thread&Runnable/","excerpt":"","text":"lambda函数式接口 多泛型 1234@FunctionalInterfaceinterface Function&lt;R,T&gt;()&#123; R r = getValue(T t);&#125;","categories":[{"name":"note","slug":"note","permalink":"http://io.stelawliet.top/categories/note/"}],"tags":[]},{"title":"栈实现树的非递归遍历","slug":"algorithm/tree/栈遍历树","date":"2018-07-04T09:19:12.000Z","updated":"2018-07-12T13:34:54.000Z","comments":true,"path":"2018/07/04/algorithm/tree/栈遍历树/","link":"","permalink":"http://io.stelawliet.top/2018/07/04/algorithm/tree/栈遍历树/","excerpt":"","text":"栈实现树的非递归遍历相对于中间根结点的位置分3种遍历 中左右 先序preOrder 左中右 中序inOrder 左右中 后序aftOrder preOrder(Node head)123 1 2 5 -&gt;3 4 6 7 if head是否为空 ，否return 结束 头结点压入栈 while循环直到栈为空 pop出head 打印head if head.right是否为空。否压入栈 然后一样的操作判断head.left 因为栈是先进后出.先序遍历是中左右.所以先判断右结点入栈后判断左结点入栈.弹出时打印的顺序就先左后右了 java具体实现 1待实现 inOrder(Node head)123 4 2 6 -&gt;1 3 5 7 判断head是否为空 ，否return 结束 while循环到栈为空或者head为空 if head非空，head压入，然后左移 else推出栈顶为head，然后head右移 inOrder(Node head)12 12","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"dataStructure","slug":"algorithm/dataStructure","permalink":"http://io.stelawliet.top/categories/algorithm/dataStructure/"},{"name":"stack","slug":"algorithm/dataStructure/stack","permalink":"http://io.stelawliet.top/categories/algorithm/dataStructure/stack/"}],"tags":[{"name":"tree","slug":"tree","permalink":"http://io.stelawliet.top/tags/tree/"},{"name":"stack","slug":"stack","permalink":"http://io.stelawliet.top/tags/stack/"}]},{"title":"牛客算法mem part II","slug":"algorithm/algorithm-mem","date":"2018-07-03T12:57:40.000Z","updated":"2018-07-04T11:14:20.000Z","comments":true,"path":"2018/07/03/algorithm/algorithm-mem/","link":"","permalink":"http://io.stelawliet.top/2018/07/03/algorithm/algorithm-mem/","excerpt":"","text":"牛客算法note7月3 双栈结构实现队列 双队列实现栈 逆序对和小和 二叉树遍历 先序遍历 中序遍历 后序遍历 二叉树非递归遍历 先序遍历 中序遍历 后序遍历 二叉树序列化 反序列化","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"}],"tags":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/tags/algorithm/"},{"name":"dataStructure","slug":"dataStructure","permalink":"http://io.stelawliet.top/tags/dataStructure/"}]},{"title":"java正则表达式","slug":"Java/JavaSE/java正则表达式","date":"2018-07-02T11:12:46.000Z","updated":"2018-07-17T06:48:19.000Z","comments":true,"path":"2018/07/02/Java/JavaSE/java正则表达式/","link":"","permalink":"http://io.stelawliet.top/2018/07/02/Java/JavaSE/java正则表达式/","excerpt":"Java Pattern的使用12345678910111213141516@Test public void testRegex() &#123; //匹配的字符串对象 String str = \"123 we are the world\"; //创建正则表达式字符串 这里的\\\\b为单词边界 String regex = \"\\\\b[a-z]&#123;3&#125;\\\\b\"; //使用Pattern对象来编译正则表达式 Pattern p = Pattern.compile(regex); //使用正则表达式对象进行字符串匹配得到匹配器对象matcher Matcher matcher = p.matcher(str); //使用匹配器对象进行查找 while (matcher.find())&#123; //获取匹配到的内容 System.out.println(matcher.group()); &#125; &#125; 预定义字符类","text":"Java Pattern的使用12345678910111213141516@Test public void testRegex() &#123; //匹配的字符串对象 String str = \"123 we are the world\"; //创建正则表达式字符串 这里的\\\\b为单词边界 String regex = \"\\\\b[a-z]&#123;3&#125;\\\\b\"; //使用Pattern对象来编译正则表达式 Pattern p = Pattern.compile(regex); //使用正则表达式对象进行字符串匹配得到匹配器对象matcher Matcher matcher = p.matcher(str); //使用匹配器对象进行查找 while (matcher.find())&#123; //获取匹配到的内容 System.out.println(matcher.group()); &#125; &#125; 预定义字符类 1234567. 任何字符（与行结束符可能匹配也可能不匹配）\\d 数字：[0-9]\\D 非数字： [^0-9]\\s 空白字符：[ \\t\\n\\x0B\\f\\r]\\S 非空白字符：[^\\s]\\w 单词字符：[a-zA-Z_0-9]\\W 非单词字符：[^\\w] 语法组合12345字面值转义 \\x单字符分组 [...]范围 a-z并集 [a-e][i-u]交集 [a-z&amp;&amp;[aeiou]] 分组匹配在表达式 ((A)(B(C))) 中，存在四个这样的组： 12341 ((A)(B(C)))2 (A)3 (B(C))4 (C) java 分组用\\n来匹配指代分组中的内容 在字符串中需要转义\\\\n 分组匹配html标签 1String html_h = \"&lt;(\\\\w+)&gt;.*&lt;/\\\\1&gt;\"; \\\\w+ 非空白字符1-x.* 任意字符0-x\\\\1 捕获分组1中的匹配的内容来进行前后一致匹配 分组捕获与分内容获取示例 $n为获取分组中匹配到的内容 如下面的$1就是(.)这个分组中匹配到的内容 123456789@Test public void test() &#123; String str = \"一一一眼眼眼眼眼万万万万万万万年年年年年年年\"; //(.)分组1号 \"\\\\1\"为匹配1号分组的内容 \"+\"为1个或多个 String regex_group = \"(.)\\\\1+\"; //\"$1\"为获取分组中匹配到的内容 str = str.replaceAll(regex_group,\"$1\"); &#125; 常用正则表达式实例","categories":[{"name":"Regex","slug":"Regex","permalink":"http://io.stelawliet.top/categories/Regex/"},{"name":"java","slug":"Regex/java","permalink":"http://io.stelawliet.top/categories/Regex/java/"},{"name":"Pattern","slug":"Regex/java/Pattern","permalink":"http://io.stelawliet.top/categories/Regex/java/Pattern/"}],"tags":[{"name":"正则表达式","slug":"正则表达式","permalink":"http://io.stelawliet.top/tags/正则表达式/"}]},{"title":"java基本类型与运算","slug":"Java/JavaSE/java基本数据与运算","date":"2018-07-02T07:42:23.000Z","updated":"2018-07-04T12:03:01.000Z","comments":true,"path":"2018/07/02/Java/JavaSE/java基本数据与运算/","link":"","permalink":"http://io.stelawliet.top/2018/07/02/Java/JavaSE/java基本数据与运算/","excerpt":"基本数据类型","text":"基本数据类型 数学类型 java类型 字节 位数 整数 byte 1 8 整数 short 2 16 整数 int 4 32 整数 long 8 64 浮点数 float 4 32 浮点数 double 8 64 字符 char 2 16 布尔 boolean 1 8 运算优先级 优先级 描述 运算符 1 括号 ()、[] 2 正负号 +、- 3 自增自减，非 ++、–、! 4 乘除，取余 *、/、% 5 加减 +、- 6 移位运算 &lt;&lt;、&gt;&gt;、&gt;&gt;&gt; 7 大小关系 &gt;、&gt;=、&lt;、&lt;= 8 相等关系 ==、!= 9 按位与 &amp; 10 按位异或 ^ 11 按位或 \\ 12 逻辑与 &amp;&amp; 13 逻辑或 \\ \\ 14 条件运算 ?: 15 赋值运算 =、+=、-=、*=、/=、%= 16 位赋值运算 &amp;=、\\ =、&lt;&lt;=、&gt;&gt;=、&gt;&gt;&gt;= 异或^运算异或运算的特点。一个数被相同的数异或俩次后值不变 举例：俩数用异或来交换 12345int a =10;int b =20; //a^b^b 后依然等于aa = a ^ b;b = a ^ b;a = a ^ b; 位运算&gt;&gt; &lt;&lt;左移一位X2 右移一位/2","categories":[{"name":"Java","slug":"Java","permalink":"http://io.stelawliet.top/categories/Java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"javase","slug":"javase","permalink":"http://io.stelawliet.top/tags/javase/"},{"name":"位运算","slug":"位运算","permalink":"http://io.stelawliet.top/tags/位运算/"}]},{"title":"","slug":"MD/Untitled","date":"2018-07-01T07:41:09.000Z","updated":"2018-07-01T07:42:27.000Z","comments":true,"path":"2018/07/01/MD/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/07/01/MD/Untitled/","excerpt":"","text":"ThisCrackLicenseId-{ “licenseId”:”ThisCrackLicenseId”, “licenseeName”:”idea”, “assigneeName”:””, “assigneeEmail”:”idea@163.com“, “licenseRestriction”:”For This Crack, Only Test! Please support genuine!!!”, “checkConcurrentUse”:false, “products”:[ {“code”:”II”,”paidUpTo”:”2099-12-31”}, {“code”:”DM”,”paidUpTo”:”2099-12-31”}, {“code”:”AC”,”paidUpTo”:”2099-12-31”}, {“code”:”RS0”,”paidUpTo”:”2099-12-31”}, {“code”:”WS”,”paidUpTo”:”2099-12-31”}, {“code”:”DPN”,”paidUpTo”:”2099-12-31”}, {“code”:”RC”,”paidUpTo”:”2099-12-31”}, {“code”:”PS”,”paidUpTo”:”2099-12-31”}, {“code”:”DC”,”paidUpTo”:”2099-12-31”}, {“code”:”RM”,”paidUpTo”:”2099-12-31”}, {“code”:”CL”,”paidUpTo”:”2099-12-31”}, {“code”:”PC”,”paidUpTo”:”2099-12-31”} ], “hash”:”2911276/0”, “gracePeriodDays”:7, “autoProlongated”:false}","categories":[],"tags":[]},{"title":"","slug":"welcome","date":"2018-06-24T16:15:52.000Z","updated":"2018-08-20T05:34:46.000Z","comments":true,"path":"2018/06/25/welcome/","link":"","permalink":"http://io.stelawliet.top/2018/06/25/welcome/","excerpt":"","text":"关于分页3个方面的改进 前端不仅内容分页.对定位页码的标签再进行逻辑分页.参考[goooooogle] 抽取分页逻辑封装成包装分页bean. 使用aop拦截web层pageQuery方法的调用.获取前端传入的分页参数.然后对dao层的查询方法进行动态代理.对sql后面进行limit和分页参数的拼接.参考[Mybatis-PageHelper] 牛客3-4期算法 咕泡java全套 尚硅谷java,javascript全套 黑马大数据3期 小马哥spring boot cloud 尚学堂大数据 简单的看了下layui和以前学的vue语法好像. javascript是单线程一行一行的解释执行.每次遇到异步代码不会立刻执行而是直接放到队列中.直到所有非异步的代码执行完,才会去队列中依次回调异步函数.所以说 速度 123456789~~~javaboolean flag = QueryXxx();if(flag)&#123; return flase;&#125;else&#123; return true;&#125;~~~return !QueryXxxx(); ServletRegistration.Dynamic spring docs tar 练习 安装练习 mv /etc/yum.repos.d/CentOS-Base.repo.backup /etc/yum.repos.d/CentOS-Base.repo propertyEditorRegistrars @Authwired 注解也可以应用在数组类型的属性上, 此时 Spring 将会把所有匹配的 Bean 进行自动装配. @Authwired 注解也可以应用在集合属性上, 此时 Spring 读取该集合的类型信息, 然后自动装配所有与之兼容的 Bean. @Authwired 注解用在 java.util.Map 上时, 若该 Map 的键值为 String, 那么 Spring 将自动装配与之 Map 值类型兼容的 Bean, 此时 Bean 的名称作为键值","categories":[],"tags":[]},{"title":"hexo写作","slug":"hexo/hexo写作","date":"2018-06-24T15:20:38.000Z","updated":"2018-10-14T02:25:34.000Z","comments":true,"path":"2018/06/24/hexo/hexo写作/","link":"","permalink":"http://io.stelawliet.top/2018/06/24/hexo/hexo写作/","excerpt":"","text":"写作你可以执行下列命令来创建一篇新文章。 1$ hexo new [layout] &lt;title&gt; &lt;more!&gt; 您可以在命令中指定文章的布局（layout），默认为 post，可以通过修改 _config.yml 中的 default_layout 参数来指定默认布局. 布局（Layout）Hexo 有三种默认布局：post、page 和 draft，它们分别对应不同的路径，而您自定义的其他布局和 post 相同，都将储存到 source/_posts 文件夹。 布局 路径 post source/_posts page source draft source/_drafts 不要处理我的文章 如果你不想你的文章被处理，你可以将 Front-Matter 中的layout: 设为 false 。 文件名称Hexo 默认以标题做为文件名称，但您可编辑 new_post_name 参数来改变默认的文件名称，举例来说，设为 :year-:month-:day-:title.md 可让您更方便的通过日期来管理文章。 变量 描述 :title 标题（小写，空格将会被替换为短杠） :year 建立的年份，比如， 2015 :month 建立的月份（有前导零），比如， 04 :i_month 建立的月份（无前导零），比如， 4 :day 建立的日期（有前导零），比如， 07 :i_day 建立的日期（无前导零），比如， 7 草稿刚刚提到了 Hexo 的一种特殊布局：draft，这种布局在建立时会被保存到 source/_drafts 文件夹，您可通过 publish 命令将草稿移动到 source/_posts 文件夹，该命令的使用方式与 new 十分类似，您也可在命令中指定 layout 来指定布局。 1$ hexo publish [layout] &lt;title&gt; 草稿默认不会显示在页面中，您可在执行时加上 --draft 参数，或是把 render_drafts 参数设为 true 来预览草稿。 模版（Scaffold）在新建文章时，Hexo 会根据 scaffolds 文件夹内相对应的文件来建立文件，例如： 1$ hexo new photo &quot;My Gallery&quot; 在执行这行指令时，Hexo 会尝试在 scaffolds 文件夹中寻找 photo.md，并根据其内容建立文章，以下是您可以在模版中使用的变量： 变量 描述 layout 布局 title 标题 date 文件建立日期","categories":[{"name":"blog","slug":"blog","permalink":"http://io.stelawliet.top/categories/blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://io.stelawliet.top/tags/hexo/"},{"name":"themes","slug":"themes","permalink":"http://io.stelawliet.top/tags/themes/"},{"name":"indigo","slug":"indigo","permalink":"http://io.stelawliet.top/tags/indigo/"}]},{"title":"hexo配置","slug":"hexo/hexo配置","date":"2018-06-24T15:20:38.000Z","updated":"2018-06-25T03:55:32.000Z","comments":true,"path":"2018/06/24/hexo/hexo配置/","link":"","permalink":"http://io.stelawliet.top/2018/06/24/hexo/hexo配置/","excerpt":"安装主题安装安装需确认你的 Hexo 版本在 3.0 以上，以及 Node 版本为 6.x 以上，在 Hexo 根目录，执行以下命令。 1git clone git@github.com:yscoder/hexo-theme-indigo.git themes/indigo","text":"安装主题安装安装需确认你的 Hexo 版本在 3.0 以上，以及 Node 版本为 6.x 以上，在 Hexo 根目录，执行以下命令。 1git clone git@github.com:yscoder/hexo-theme-indigo.git themes/indigo 切换主题执行 git branch 显示所有本地分支，如果只存在一个分支，可以执行下面的命令获取另一分支的主题。 12345# 获取远程 card 分支，并切换$ git checkout -b card origin/card# 获取远程 master 分支，并切换$ git checkout -b master origin/master 此命令只需执行一次，之后使用 git checkout [branch] 命令在两个主题之间切换。 依赖安装还是在 Hexo 根目录，如果以下插件已安装过，无需再次安装。 Less主题默认使用 less 作为 css 预处理工具。 1$ npm install hexo-renderer-less --save Feed用于生成 rss。 1$ npm install hexo-generator-feed --save Json-content用于生成静态站点数据，用作站内搜索的数据源。 1$ npm install hexo-generator-json-content --save QRCode用于生成微信分享二维码。 可选，不安装时会请求 jiathis Api 生成二维码。 1$ npm install hexo-helper-qrcode --save 开启标签页1hexo new page tags 修改 hexo/source/tags/index.md 的元数据 123layout: tagscomments: false--- 开启分类页仅 card theme 支持。 1hexo new page categories 修改 hexo/source/categories/index.md 的元数据 123layout: categoriescomments: false--- 常见问题以下问题整理自 Issues 及其他渠道的用户反馈。 如果这里没有找到你面临的问题请提 Issues、邮件等任意方式反馈，非增加功能的问题一般 24 小时解决。 样式相关的问题请说明使用环境，能使我更快的定位问题。也欢迎能力者直接发 PR，感激不尽。 如何设置文章摘要在 Markdown 中加 &lt;!-- more --&gt; 文章如何添加多个标签有两种多标签格式 1tags: [a, b, c] 或 1234tags: - a - b - c 修改 brand替换 themes\\indigo\\source\\img\\brand.jpg，保持原文件名不变。 ##如何在文章中使用图标 先到 fontawesome 找到你需要的图标名，比如：book，按以下格式使用： 1&lt;i class=&quot;icon icon-book&quot;&gt;&lt;/i&gt; 图标样式前缀均为 icon，此外还有 5 个图标大小调节类和 1 个间距类。 1234567891011121314&lt;!-- 1.3倍大小 --&gt;&lt;i class=&quot;icon icon-book icon-lg&quot;&gt;&lt;/i&gt;&lt;!-- 2倍大小 --&gt;&lt;i class=&quot;icon icon-book icon-2x&quot;&gt;&lt;/i&gt;&lt;!-- 3倍大小 --&gt;&lt;i class=&quot;icon icon-book icon-3x&quot;&gt;&lt;/i&gt;&lt;!-- 4倍大小 --&gt;&lt;i class=&quot;icon icon-book icon-4x&quot;&gt;&lt;/i&gt;&lt;!-- 5倍大小 --&gt;&lt;i class=&quot;icon icon-book icon-5x&quot;&gt;&lt;/i&gt;&lt;!-- 5px右边距 --&gt;&lt;i class=&quot;icon icon-book icon-pr&quot;&gt;&lt;/i&gt;&lt;!-- 5px左边距 --&gt;&lt;i class=&quot;icon icon-book icon-pl&quot;&gt;&lt;/i&gt; ##个别图标无法显示 如果你的浏览器安装了 ADBlock，它会屏蔽 SNS 相关的内容，比如：Github。 解决办法：可配置 ADBlock 不在你的站点运行。 ##生成站点后没有样式 安装less ##更改样式后网站没有生效 确认非缓存问题后，执行 hexo clean 再进行生成上传。 ##更改站点配色 编辑 themes\\indigo\\source\\css\\_partial\\variable.less，更改对应的颜色变量。 配色参考：Material Design Color Palette Generator 注意：使用自定义配色时需把主题配置中的 cdn 关闭，cdn: false。 ##添加404页面 在 hexo/source 目录内新建 404.html。 设置元数据信息，如果不想套用主题布局可设置 layout 为 false。 123layout: false title: &quot;My Blog Name | 404&quot;--- ##在博客中使用 Emoji 参考 Can i use emoji in mypage? ##自行修改样式线上不生效 因为主题默认引用 cdn 样式，只有主题更新时，cdn 中的样式才会变化。 如果想使用自己修改的样式，需要把修改配置中的 cdn: false。这样就不在引用 cdn 资源，使用本地资源了。 自定义页面主题 Card 分支为自定义页面提供了定制化模块支持，特此简单介绍。 创建自定义页面1hexo new page pageName 执行命令后会在你的 Hexo 根目录 source/ 目录下生成一个与你刚才输入的 pageName 一样的文件夹，里面只有一个 index.md。 页面配置123456layout: page # 必须title: pageTitle # 必须，页面名称description: 用户自定义页面功能演示 # 页面二级标题，描述性文字comments: false # 禁用评论，可选，默认开启reward: false # 禁用打赏，可选，默认开启---- 模块和内容输入自定义页面中，image、blockquote、pre 等将被赋予特殊的样式。此外，提供了 @moduleName{ ... } 格式的标记用于包裹内容，赋予样式。 演示页面 | markdown 源码 配置hexo详细文档 站点配置编辑站点配置文件，hexo/_config.yml。 启用主题1theme: indigo 基本配置为了得到更好的使用体验，以下内容请务必填写完整，因为这些内容会在主题中得到展示。 1234567title: your titlesubtitle: your subtitledescription: your descriptionkeywords: your keywordsauthor: your nameemail: your emailurl: your site url feed配置参考 hexo-generator-feed 1234feed: type: atom path: atom.xml limit: 0 jsonContent配置为了节约资源，可以对 jsonContent 插件生成的数据字段进行配置，减少数据文件大小。参考 hexo-generator-json-content 123456789101112131415161718jsonContent: meta: false pages: false posts: title: true date: true path: true text: true raw: false content: false slug: false updated: false comments: false link: false permalink: false excerpt: false categories: false tags: true 主题配置编辑主题配置文件，themes/indigo/_config.yml。 左侧菜单默认配置如下 1234567891011121314151617menu: home: text: 主页 url: / archives: url: /archives tags: url: /tags github: url: https://github.com/yscoder target: _blank weibo: url: http://www.weibo.com/ysweb target: _blank link: text: 测试 url: / 添加新菜单项时，在 menu 下增加子属性即可。属性说明如下： 12345menu: link: # fontawesome图标，省略前缀，本主题前缀为 icon-，必须 text: About # 菜单显示的文字，如果省略即默认与图标一致，首字母会转大写 url: /about # 链接，绝对或相对路径，必须 target: _blank # 是否跳出，省略则在当前页面打开 fontawesome 图标已集成到主题中，你可以到 这个页面 挑选合适的图标。 rss 6.x 后移除该配置项，使用站点配置中的 feed 作为统一配置。 1rss: /atom.xml favicon站点 logo，显示在浏览器当前标签页左上角。 1favicon: /favicon.ico 头像位于左侧菜单上方 1avatar: /img/logo.jpg email头像下方 1email: 634206017@qq.com color设置 Android L Chrome 浏览器状态栏颜色，不需要可去除此项或设为 false。 1color: &apos;#3F51B5&apos; 页面标题 (card theme)自定义归档、标签、分类页的大标题。 123tags_title: Tagsarchives_title: Archivescategories_title: Categories 文章摘要可以在 Markdown 文件中加 &lt;!--more--&gt;以分割摘要与文章正文。未设置时，按 excerpt_length 设置截取。 123456# 文章摘要渲染方式: 为 true 时将渲染为 html，否则为文本excerpt_render: false# 截断长度excerpt_length: 200# 文字正文页链接文字excerpt_link: 阅读全文... mathjax开启后，使你的站点支持公式渲染，by mathjax。 请按需开启，因为此项需要加载额外的 js 文件。 1mathjax: false 分享文章分享开关，by jiathis-api。 1share: true 文章打赏默认开启 1234reward: title: 谢谢大爷~ #显示的文字 wechat: /img/wechat.jpg #微信，关闭设为 false alipay: /img/alipay.jpg #支付宝，关闭设为 false 此外在 crad theme 中，可以通过在 markdown 头部添加 reward: false 来控制某些不想开启打赏的页面。 关闭 1reward: false 二维码请自行从微信、支付宝中下载。当两个二维码同时存在时，为保持显示效果的一致性，注意截图时的边框留白保持一致。必要时可借助PS等图片处理工具进行图片大小裁剪、压缩等。 站内搜索是否开启搜索 1search: true 布局开启后，文章页在大屏下会隐藏左侧菜单，专注阅读。 1hideMenu: true Toc开启文章内容导航。 123#toc: false #关闭toc: list_number: false # 决定导航使用的标签， true 为 ol， false 为 ul。 copyright (card theme)文章页版权声明内容，hexo中所有变量及辅助函数等均可调用，具体请查阅 hexo.io。 1copyright: 这里写留言或版权声明：&lt;a href=&quot;&lt;%- url_for(page.path) %&gt;&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;%- url %&gt;&lt;/a&gt; less设置 less 编译时的入口文件路径，hexo-renderer-less。 1234less: compress: true # 是否压缩css paths: - source/css/style.less 评论集成了 disqus、友言、gitment 和 valine，开启其一即可。 数据统计集成的有谷歌、腾讯、百度和 CNZZ，请填写你的站点标识。 1234google_analytics: keytajs: 站点idbaidu_tongji: 站点idcnzz: 站点id 谷歌站点验证 (card theme)1google_site_verification: false 规范网址 (card theme)让搜索引擎重定向你的不同域名、不同子域、同域不同目录的站点到你期望的路径。使用规范网址 1canonical: http://imys.net 版权起始年份1since_year: 2006 自定义页面关于用户页面中作者相关的描述性文字，如不需要设为 false 1about: 用户页面中作者相关的描述性文字，如不需要设为 false cdn开启后将使用 unpkg cdn 最新的主题样式，如果想让你的自定义样式生效，把此项设为 false。 1cdn: true lightbox文章图片灯箱效果。 1lightbox: true ICP 备案号1ICP_license: 京ICP备1234556号-1","categories":[{"name":"blog","slug":"blog","permalink":"http://io.stelawliet.top/categories/blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://io.stelawliet.top/tags/hexo/"},{"name":"themes","slug":"themes","permalink":"http://io.stelawliet.top/tags/themes/"},{"name":"indigo","slug":"indigo","permalink":"http://io.stelawliet.top/tags/indigo/"}]},{"title":"hexo博客坑与技巧","slug":"hexo/hexo博客搭建","date":"2018-06-24T13:59:25.000Z","updated":"2018-07-04T11:51:50.000Z","comments":true,"path":"2018/06/24/hexo/hexo博客搭建/","link":"","permalink":"http://io.stelawliet.top/2018/06/24/hexo/hexo博客搭建/","excerpt":"","text":"文章图片预览1234&lt;img src=&quot;https://your_picture_url.jpg&quot; width=&quot;auto&quot;&gt;&lt;!--more--&gt;第1行正文内容第2行正文内容 &lt;!--more--&gt; 放的位置你自己调整就行了如果没开首页的 html 渲染的话 要把主题 config_yml 的 excerpt_render 改为 true 文件生成与部署12$ hexo generate --deploy$ hexo deploy --generate 简写 上面两个命令可以简写为$ hexo g -d$ hexo d -g","categories":[{"name":"blog","slug":"blog","permalink":"http://io.stelawliet.top/categories/blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://io.stelawliet.top/tags/hexo/"},{"name":"study","slug":"study","permalink":"http://io.stelawliet.top/tags/study/"}]},{"title":"Hello World","slug":"hexo/hello-world","date":"2018-06-24T13:59:25.000Z","updated":"2018-06-24T15:23:27.000Z","comments":true,"path":"2018/06/24/hexo/hello-world/","link":"","permalink":"http://io.stelawliet.top/2018/06/24/hexo/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"blog","slug":"blog","permalink":"http://io.stelawliet.top/categories/blog/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://io.stelawliet.top/tags/hexo/"},{"name":"study","slug":"study","permalink":"http://io.stelawliet.top/tags/study/"}]},{"title":"","slug":"Snake","date":"2018-06-23T04:00:48.000Z","updated":"2018-06-23T04:02:37.000Z","comments":true,"path":"2018/06/23/Snake/","link":"","permalink":"http://io.stelawliet.top/2018/06/23/Snake/","excerpt":"","text":"java swing贪吃蛇身体定位方格对象X 1234567891011121314151617181920class Point &#123; public int x; public int y; public Point(int x, int y) &#123; this.x = x; this.y = y; &#125; public Point() &#123; &#125; @Override public String toString() &#123; final StringBuilder sb = new StringBuilder(\"&#123;\"); sb.append(\"x=\").append(x); sb.append(\", y=\").append(y); sb.append('&#125;'); return sb.toString(); &#125; &#125;","categories":[],"tags":[]},{"title":"类加载","slug":"Java/JVM/类加载0","date":"2018-06-22T00:58:59.000Z","updated":"2018-07-08T02:56:47.000Z","comments":true,"path":"2018/06/22/Java/JVM/类加载0/","link":"","permalink":"http://io.stelawliet.top/2018/06/22/Java/JVM/类加载0/","excerpt":"","text":"类的加载7个阶段加载-&gt;验证-&gt;准备-&gt;解析-&gt;初始化-&gt;使用-&gt;卸载 java的绑定 静态绑定,在编译期就确定了final,static,private和构造方法的调用绑定 动态绑定,即运行时绑定,在运行时根据具体的对象类型绑定. 加载 加载需要完成以下工作 根据类的全限定名来读取对应的class文件的二进制字节流 在方法区中根据字节流的静态结构生成相关的运行时数据结构 在堆中生成类的java.lang.class对象，通过这个对象访问方法区中的数据 加载器 启动类加载器Bootstrap ClassLoader:hotspot在jdk1.5之后用c++来实现,是虚拟机自身的一部分.负责加载jdk/jre/li下的,或被-Xbootclasspath参数指定的路径中,并且能被虚拟机识别的类库(如rt.jar,所有的java.*开头的类都被Bootstrap ClassLoader加载).启动 其他类加载器: 验证准备解析初始化 虚拟机启动时,用户需要指定一个执行的主类(main()方法的类),虚拟机会先初始化这个主类 遇到new,getstatic,putstatic,invokestatic这四条指令时,如果类没有进行过初始化就会进行初始化 new 关键字实例化对象 getstatic读取或putstatic`设置一个类的static字段,不包括final同时修饰的 invokestatic调用一个类的静态方法 当子类调用父类静态字段时,只有直接定义这个字段的类才会被初始化final修饰的常量在编译期间就会存入到方法区其类的常量池中.调用final字段时不会触发类的初始化创建对象的集合数组时也不会触发初始化 使用java.lang.reflect包的方法对类进行反射调用的时候,进行初始化 类与接口初始化 相同点:接口也有初始化过程,在接口中不能使用”static{}”块进行初始化验证,但是编译器仍然会为接口生成类的构造器,用于初始化接口中的成员变量(static final修饰的全局常量) 区别: 类初始化时必须先初始化父类,但是接口在初始化时不需要父接口全部完成初始化. 只有在使用父接口的常量时才会初始化父接口 类中调用static final常量时并不会触发此类的初始化.而接口就会","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"JVM","slug":"java/JVM","permalink":"http://io.stelawliet.top/categories/java/JVM/"}],"tags":[{"name":"类的加载","slug":"类的加载","permalink":"http://io.stelawliet.top/tags/类的加载/"},{"name":"类初始化","slug":"类初始化","permalink":"http://io.stelawliet.top/tags/类初始化/"}]},{"title":"","slug":"MD/other/报道证","date":"2018-06-21T09:49:33.000Z","updated":"2018-07-05T15:05:53.000Z","comments":true,"path":"2018/06/21/MD/other/报道证/","link":"","permalink":"http://io.stelawliet.top/2018/06/21/MD/other/报道证/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/06 【线程、同步】","date":"2018-06-20T07:44:02.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/06 【线程、同步】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/06 【线程、同步】/","excerpt":"","text":"day06 【线程、同步】主要内容 线程 同步 线程状态 教学目标 能够描述Java中多线程运行原理 能够使用继承类的方式创建多线程 能够使用实现接口的方式创建多线程 能够说出实现接口方式的好处 能够解释安全问题的出现的原因 能够使用同步代码块解决线程安全问题 能够使用同步方法解决线程安全问题 能够说出线程6个状态的名称 第一章 线程1.1 多线程原理昨天的时候我们已经写过一版多线程的代码，很多同学对原理不是很清楚，那么我们今天先画个多线程执行时序图来体现一下多线程程序的执行流程。 代码如下： 自定义线程类： 12345678910111213141516171819public class MyThread extends Thread&#123; /* * 利用继承中的特点 * 将线程名称传递 进行设置 */ public MyThread(String name)&#123; super(name); &#125; /* * 重写run方法 * 定义线程要执行的代码 */ public void run()&#123; for (int i = 0; i &lt; 20; i++) &#123; //getName()方法 来自父亲 System.out.println(getName()+i); &#125; &#125;&#125; 测试类： 12345678910public class Demo &#123; public static void main(String[] args) &#123; System.out.println(\"这里是main线程\"); MyThread mt = new MyThread(\"小强\"); mt.start();//开启了一个新的线程 for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"旺财:\"+i); &#125; &#125;&#125; 流程图： 程序启动运行main时候，java虚拟机启动一个进程，主线程main在main()调用时候被创建。随着调用mt的对象的start方法，另外一个新的线程也启动了，这样，整个应用就在多线程下运行。 通过这张图我们可以很清晰的看到多线程的执行流程，那么为什么可以完成并发执行呢？我们再来讲一讲原理。 多线程执行时，到底在内存中是如何运行的呢？以上个程序为例，进行图解说明： 多线程执行时，在栈内存中，其实每一个执行线程都有一片自己所属的栈内存空间。进行方法的压栈和弹栈。 当执行线程的任务结束了，线程自动在栈内存中释放了。但是当所有的执行线程都结束了，那么进程就结束了。 1.2 Thread类在上一天内容中我们已经可以完成最基本的线程开启，那么在我们完成操作过程中用到了java.lang.Thread类，API中该类中定义了有关线程的一些方法，具体如下： 构造方法： public Thread():分配一个新的线程对象。 public Thread(String name):分配一个指定名字的新的线程对象。 public Thread(Runnable target):分配一个带有指定目标新的线程对象。 public Thread(Runnable target,String name):分配一个带有指定目标新的线程对象并指定名字。 常用方法： public String getName():获取当前线程名称。 public void start():导致此线程开始执行; Java虚拟机调用此线程的run方法。 public void run():此线程要执行的任务在此处定义代码。 public static void sleep(long millis):使当前正在执行的线程以指定的毫秒数暂停（暂时停止执行）。 public static Thread currentThread():返回对当前正在执行的线程对象的引用。 翻阅API后得知创建线程的方式总共有两种，一种是继承Thread类方式，一种是实现Runnable接口方式，方式一我们上一天已经完成，接下来讲解方式二实现的方式。 1.3 创建线程方式二采用java.lang.Runnable也是非常常见的一种，我们只需要重写run方法即可。 步骤如下： 定义Runnable接口的实现类，并重写该接口的run()方法，该run()方法的方法体同样是该线程的线程执行体。 创建Runnable实现类的实例，并以此实例作为Thread的target来创建Thread对象，该Thread对象才是真正的线程对象。 调用线程对象的start()方法来启动线程。 代码如下： 12345678public class MyRunnable implements Runnable&#123; @Override public void run() &#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(Thread.currentThread().getName()+\" \"+i); &#125; &#125;&#125; 123456789101112public class Demo &#123; public static void main(String[] args) &#123; //创建自定义类对象 线程任务对象 MyRunnable mr = new MyRunnable(); //创建线程对象 Thread t = new Thread(mr, \"小强\"); t.start(); for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"旺财 \" + i); &#125; &#125;&#125; 通过实现Runnable接口，使得该类有了多线程类的特征。run()方法是多线程程序的一个执行目标。所有的多线程代码都在run方法里面。Thread类实际上也是实现了Runnable接口的类。 在启动的多线程的时候，需要先通过Thread类的构造方法Thread(Runnable target) 构造出对象，然后调用Thread对象的start()方法来运行多线程代码。 实际上所有的多线程代码都是通过运行Thread的start()方法来运行的。因此，不管是继承Thread类还是实现Runnable接口来实现多线程，最终还是通过Thread的对象的API来控制线程的，熟悉Thread类的API是进行多线程编程的基础。 tips:Runnable对象仅仅作为Thread对象的target，Runnable实现类里包含的run()方法仅作为线程执行体。而实际的线程对象依然是Thread实例，只是该Thread线程负责执行其target的run()方法。 1.4 Thread和Runnable的区别如果一个类继承Thread，则不适合资源共享。但是如果实现了Runable接口的话，则很容易的实现资源共享。 总结： 实现Runnable接口比继承Thread类所具有的优势： 适合多个相同的程序代码的线程去共享同一个资源。 可以避免java中的单继承的局限性。 增加程序的健壮性，实现解耦操作，代码可以被多个线程共享，代码和线程独立。 线程池只能放入实现Runable或Callable类线程，不能直接放入继承Thread的类。 扩充：在java中，每次程序运行至少启动2个线程。一个是main线程，一个是垃圾收集线程。因为每当使用java命令执行一个类的时候，实际上都会启动一个JVM，每一个JVM其实在就是在操作系统中启动了一个进程。 1.5 匿名内部类方式实现线程的创建使用线程的内匿名内部类方式，可以方便的实现每个线程执行不同的线程任务操作。 使用匿名内部类的方式实现Runnable接口，重新Runnable接口中的run方法： 1234567891011121314151617181920212223public class NoNameInnerClassThread &#123; public static void main(String[] args) &#123; // new Runnable()&#123;// public void run()&#123;// for (int i = 0; i &lt; 20; i++) &#123;// System.out.println(\"张宇:\"+i);// &#125;// &#125; // &#125;; //---这个整体 相当于new MyRunnable() Runnable r = new Runnable()&#123; public void run()&#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"张宇:\"+i); &#125; &#125; &#125;; new Thread(r).start(); for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"费玉清:\"+i); &#125; &#125;&#125; 第二章 线程安全2.1 线程安全如果有多个线程在同时运行，而这些线程可能会同时运行这段代码。程序每次运行结果和单线程运行的结果是一样的，而且其他的变量的值也和预期的是一样的，就是线程安全的。 我们通过一个案例，演示线程的安全问题： 电影院要卖票，我们模拟电影院的卖票过程。假设要播放的电影是 “葫芦娃大战奥特曼”，本次电影的座位共100个(本场电影只能卖100张票)。 我们来模拟电影院的售票窗口，实现多个窗口同时卖 “葫芦娃大战奥特曼”这场电影票(多个窗口一起卖这100张票) 需要窗口，采用线程对象来模拟；需要票，Runnable接口子类来模拟 模拟票： 1234567891011121314151617181920212223242526public class Ticket implements Runnable &#123; private int ticket = 100; /* * 执行卖票操作 */ @Override public void run() &#123; //每个窗口卖票的操作 //窗口 永远开启 while (true) &#123; if (ticket &gt; 0) &#123;//有票 可以卖 //出票操作 //使用sleep模拟一下出票时间 try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; //获取当前线程对象的名字 String name = Thread.currentThread().getName(); System.out.println(name + \"正在卖:\" + ticket--); &#125; &#125; &#125;&#125; 测试类： 123456789101112131415public class Demo &#123; public static void main(String[] args) &#123; //创建线程任务对象 Ticket ticket = new Ticket(); //创建三个窗口对象 Thread t1 = new Thread(ticket, \"窗口1\"); Thread t2 = new Thread(ticket, \"窗口2\"); Thread t3 = new Thread(ticket, \"窗口3\"); //同时卖票 t1.start(); t2.start(); t3.start(); &#125;&#125; 结果中有一部分这样现象： 发现程序出现了两个问题： 相同的票数,比如5这张票被卖了两回。 不存在的票，比如0票与-1票，是不存在的。 这种问题，几个窗口(线程)票数不同步了，这种问题称为线程不安全。 线程安全问题都是由全局变量及静态变量引起的。若每个线程中对全局变量、静态变量只有读操作，而无写操作，一般来说，这个全局变量是线程安全的；若有多个线程同时执行写操作，一般都需要考虑线程同步，否则的话就可能影响线程安全。 2.2 线程同步当我们使用多个线程访问同一资源的时候，且多个线程中对资源有写的操作，就容易出现线程安全问题。 要解决上述多线程并发访问一个资源的安全性问题:也就是解决重复票与不存在票问题，Java中提供了同步机制(synchronized)来解决。 根据案例简述： 1窗口1线程进入操作的时候，窗口2和窗口3线程只能在外等着，窗口1操作结束，窗口1和窗口2和窗口3才有机会进入代码去执行。也就是说在某个线程修改共享资源的时候，其他线程不能修改该资源，等待修改完毕同步之后，才能去抢夺CPU资源，完成对应的操作，保证了数据的同步性，解决了线程不安全的现象。 为了保证每个线程都能正常执行原子操作,Java引入了线程同步机制。 那么怎么去使用呢？有三种方式完成同步操作： 同步代码块。 同步方法。 锁机制。 2.3 同步代码块 同步代码块：synchronized关键字可以用于方法中的某个区块中，表示只对这个区块的资源实行互斥访问。 格式: 123synchronized(同步锁)&#123; 需要同步操作的代码&#125; 同步锁: 对象的同步锁只是一个概念,可以想象为在对象上标记了一个锁. 锁对象 可以是任意类型。 多个线程对象 要使用同一把锁。 注意:在任何时候,最多允许一个线程拥有同步锁,谁拿到锁就进入代码块,其他的线程只能在外等着(BLOCKED)。 使用同步代码块解决代码： 123456789101112131415161718192021222324252627282930public class Ticket implements Runnable&#123; private int ticket = 100; Object lock = new Object(); /* * 执行卖票操作 */ @Override public void run() &#123; //每个窗口卖票的操作 //窗口 永远开启 while(true)&#123; synchronized (lock) &#123; if(ticket&gt;0)&#123;//有票 可以卖 //出票操作 //使用sleep模拟一下出票时间 try &#123; Thread.sleep(50); &#125; catch (InterruptedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; //获取当前线程对象的名字 String name = Thread.currentThread().getName(); System.out.println(name+\"正在卖:\"+ticket--); &#125; &#125; &#125; &#125;&#125; 当使用了同步代码块后，上述的线程的安全问题，解决了。 2.4 同步方法 同步方法:使用synchronized修饰的方法,就叫做同步方法,保证A线程执行该方法的时候,其他线程只能在方法外等着。 格式： 123public synchronized void method()&#123; 可能会产生线程安全问题的代码&#125; 同步锁是谁? ​ 对于非static方法,同步锁就是this。 ​ 对于static方法,我们使用当前方法所在类的字节码对象(类名.class)。 使用同步方法代码如下： 1234567891011121314151617181920212223242526272829303132333435public class Ticket implements Runnable&#123; private int ticket = 100; /* * 执行卖票操作 */ @Override public void run() &#123; //每个窗口卖票的操作 //窗口 永远开启 while(true)&#123; sellTicket(); &#125; &#125; /* * 锁对象 是 谁调用这个方法 就是谁 * 隐含 锁对象 就是 this * */ public synchronized void sellTicket()&#123; if(ticket&gt;0)&#123;//有票 可以卖 //出票操作 //使用sleep模拟一下出票时间 try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; //获取当前线程对象的名字 String name = Thread.currentThread().getName(); System.out.println(name+\"正在卖:\"+ticket--); &#125; &#125;&#125; 2.5 Lock锁java.util.concurrent.locks.Lock机制提供了比synchronized代码块和synchronized方法更广泛的锁定操作,同步代码块/同步方法具有的功能Lock都有,除此之外更强大,更体现面向对象。 Lock锁也称同步锁，加锁与释放锁方法化了，如下： public void lock():加同步锁。 public void unlock():释放同步锁。 使用如下： 123456789101112131415161718192021222324252627282930public class Ticket implements Runnable&#123; private int ticket = 100; Lock lock = new ReentrantLock(); /* * 执行卖票操作 */ @Override public void run() &#123; //每个窗口卖票的操作 //窗口 永远开启 while(true)&#123; lock.lock(); if(ticket&gt;0)&#123;//有票 可以卖 //出票操作 //使用sleep模拟一下出票时间 try &#123; Thread.sleep(50); &#125; catch (InterruptedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; //获取当前线程对象的名字 String name = Thread.currentThread().getName(); System.out.println(name+\"正在卖:\"+ticket--); &#125; lock.unlock(); &#125; &#125;&#125; 第三章 线程状态3.1 线程状态概述当线程被创建并启动以后，它既不是一启动就进入了执行状态，也不是一直处于执行状态。在线程的生命周期中，有几种状态呢？在API中java.lang.Thread.State这个枚举中给出了六种线程状态： 这里先列出各个线程状态发生的条件，下面将会对每种状态进行详细解析 线程状态 导致状态发生条件 NEW(新建) 线程刚被创建，但是并未启动。还没调用start方法。 Runnable(可运行) 线程可以在java虚拟机中运行的状态，可能正在运行自己代码，也可能没有，这取决于操作系统处理器。 Blocked(锁阻塞) 当一个线程试图获取一个对象锁，而该对象锁被其他的线程持有，则该线程进入Blocked状态；当该线程持有锁时，该线程将变成Runnable状态。 Waiting(无限等待) 一个线程在等待另一个线程执行一个（唤醒）动作时，该线程进入Waiting状态。进入这个状态后是不能自动唤醒的，必须等待另一个线程调用notify或者notifyAll方法才能够唤醒。 Timed Waiting(计时等待) 同waiting状态，有几个方法有超时参数，调用他们将进入Timed Waiting状态。这一状态将一直保持到超时期满或者接收到唤醒通知。带有超时参数的常用方法有Thread.sleep 、Object.wait。 Teminated(被终止) 因为run方法正常退出而死亡，或者因为没有捕获的异常终止了run方法而死亡。 我们不需要去研究这几种状态的实现原理，我们只需知道在做线程操作中存在这样的状态。那我们怎么去理解这几个状态呢，新建与被终止还是很容易理解的，我们就研究一下线程从Runnable（可运行）状态与非运行状态之间的转换问题。 3.2 Timed Waiting（计时等待）Timed Waiting在API中的描述为：一个正在限时等待另一个线程执行一个（唤醒）动作的线程处于这一状态。单独的去理解这句话，真是玄之又玄，其实我们在之前的操作中已经接触过这个状态了，在哪里呢？ 在我们写卖票的案例中，为了减少线程执行太快，现象不明显等问题，我们在run方法中添加了sleep语句，这样就强制当前正在执行的线程休眠（暂停执行），以“减慢线程”。 其实当我们调用了sleep方法之后，当前执行的线程就进入到“休眠状态”，其实就是所谓的Timed Waiting(计时等待)，那么我们通过一个案例加深对该状态的一个理解。 实现一个计数器，计数到100，在每个数字之间暂停1秒，每隔10个数字输出一个字符串 代码： 12345678910111213141516171819public class MyThread extends Thread &#123; public void run() &#123; for (int i = 0; i &lt; 100; i++) &#123; if ((i) % 10 == 0) &#123; System.out.println(\"-------\" + i); &#125; System.out.print(i); try &#123; Thread.sleep(1000); System.out.print(\" 线程睡眠1秒！\\n\"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void main(String[] args) &#123; new MyThread().start(); &#125;&#125; 通过案例可以发现，sleep方法的使用还是很简单的。我们需要记住下面几点： 进入 TIMED_WAITING 状态的一种常见情形是调用的 sleep 方法，单独的线程也可以调用，不一定非要有协作关系。 为了让其他线程有机会执行，可以将Thread.sleep()的调用放线程run()之内。这样才能保证该线程执行过程中会睡眠 sleep与锁无关，线程睡眠到期自动苏醒，并返回到Runnable（可运行）状态。 小提示：sleep()中指定的时间是线程不会运行的最短时间。因此，sleep()方法不能保证该线程睡眠到期后就开始立刻执行。 Timed Waiting 线程状态图： 3.3 BLOCKED（锁阻塞）Blocked状态在API中的介绍为：一个正在阻塞等待一个监视器锁（锁对象）的线程处于这一状态。 我们已经学完同步机制，那么这个状态是非常好理解的了。比如，线程A与线程B代码中使用同一锁，如果线程A获取到锁，线程A进入到Runnable状态，那么线程B就进入到Blocked锁阻塞状态。 这是由Runnable状态进入Blocked状态。除此Waiting以及Time Waiting状态也会在某种情况下进入阻塞状态，而这部分内容作为扩充知识点带领大家了解一下。 Blocked 线程状态图 3.4 Waiting（无限等待）Wating状态在API中介绍为：一个正在无限期等待另一个线程执行一个特别的（唤醒）动作的线程处于这一状态。 那么我们之前遇到过这种状态吗？答案是并没有，但并不妨碍我们进行一个简单深入的了解。我们通过一段代码来学习一下： 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class WaitingTest &#123; public static Object obj = new Object(); public static void main(String[] args) &#123; // 演示waiting new Thread(new Runnable() &#123; @Override public void run() &#123; while (true)&#123; synchronized (obj)&#123; try &#123; System.out.println( Thread.currentThread().getName() +\"=== 获取到锁对象，调用wait方法，进入waiting状态，释放锁对象\"); obj.wait(); //无限等待 //obj.wait(5000); //计时等待, 5秒 时间到，自动醒来 &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println( Thread.currentThread().getName() + \"=== 从waiting状态醒来，获取到锁对象，继续执行了\"); &#125; &#125; &#125; &#125;,\"等待线程\").start(); new Thread(new Runnable() &#123; @Override public void run() &#123;// while (true)&#123; //每隔3秒 唤醒一次 try &#123; System.out.println( Thread.currentThread().getName() +\"----- 等待3秒钟\"); Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (obj)&#123; System.out.println( Thread.currentThread().getName() +\"----- 获取到锁对象,调用notify方法，释放锁对象\"); obj.notify(); &#125; &#125;// &#125; &#125;,\"唤醒线程\").start(); &#125;&#125; 通过上述案例我们会发现，一个调用了某个对象的 Object.wait 方法的线程会等待另一个线程调用此对象的 Object.notify()方法 或 Object.notifyAll()方法。 其实waiting状态并不是一个线程的操作，它体现的是多个线程间的通信，可以理解为多个线程之间的协作关系，多个线程会争取锁，同时相互之间又存在协作关系。就好比在公司里你和你的同事们，你们可能存在晋升时的竞争，但更多时候你们更多是一起合作以完成某些任务。 当多个线程协作时，比如A，B线程，如果A线程在Runnable（可运行）状态中调用了wait()方法那么A线程就进入了Waiting（无限等待）状态，同时失去了同步锁。假如这个时候B线程获取到了同步锁，在运行状态中调用了notify()方法，那么就会将无限等待的A线程唤醒。注意是唤醒，如果获取到锁对象，那么A线程唤醒后就进入Runnable（可运行）状态；如果没有获取锁对象，那么就进入到Blocked（锁阻塞状态）。 Waiting 线程状态图 3.5 补充知识点到此为止我们已经对线程状态有了基本的认识，想要有更多的了解，详情可以见下图： 一条有意思的tips: 我们在翻阅API的时候会发现Timed Waiting（计时等待） 与 Waiting（无限等待） 状态联系还是很紧密的，比如Waiting（无限等待） 状态中wait方法是空参的，而timed waiting（计时等待） 中wait方法是带参的。这种带参的方法，其实是一种倒计时操作，相当于我们生活中的小闹钟，我们设定好时间，到时通知，可是如果提前得到（唤醒）通知，那么设定好时间在通知也就显得多此一举了，那么这种设计方案其实是一举两得。如果没有得到（唤醒）通知，那么线程就处于Timed Waiting状态,直到倒计时完毕自动醒来；如果在倒计时期间得到（唤醒）通知，那么线程从Timed Waiting状态立刻唤醒。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/08【File类、递归】","date":"2018-06-20T07:44:02.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/08【File类、递归】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/08【File类、递归】/","excerpt":"","text":"day08【File类、递归】主要内容 File类 递归 教学目标 能够说出File对象的创建方式 能够说出File类获取名称的方法名称 能够说出File类获取绝对路径的方法名称 能够说出File类获取文件大小的方法名称 能够说出File类判断是否是文件的方法名称 能够说出File类判断是否是文件夹的方法名称 能够辨别相对路径和绝对路径 能够遍历文件夹 能够解释递归的含义 能够使用递归的方式计算5的阶乘 能够说出使用递归会内存溢出隐患的原因 第一章 File类1.1 概述java.io.File 类是文件和目录路径名的抽象表示，主要用于文件和目录的创建、查找和删除等操作。 1.2 构造方法 public File(String pathname) ：通过将给定的路径名字符串转换为抽象路径名来创建新的 File实例。 public File(String parent, String child) ：从父路径名字符串和子路径名字符串创建新的 File实例。 public File(File parent, String child) ：从父抽象路径名和子路径名字符串创建新的 File实例。 构造举例，代码如下： 1234567891011121314151617// 文件路径名String pathname = \"D:\\\\aaa.txt\";File file1 = new File(pathname); // 文件路径名String pathname2 = \"D:\\\\aaa\\\\bbb.txt\";File file2 = new File(pathname2); // 通过父路径和子路径字符串 String parent = \"d:\\\\aaa\"; String child = \"bbb.txt\"; File file3 = new File(parent, child);// 通过父级File对象和子路径字符串File parentDir = new File(\"d:\\\\aaa\");String child = \"bbb.txt\";File file4 = new File(parentDir, child); 小贴士： 一个File对象代表硬盘中实际存在的一个文件或者目录。 无论该路径下是否存在文件或者目录，都不影响File对象的创建。 1.3 常用方法获取功能的方法 public String getAbsolutePath() ：返回此File的绝对路径名字符串。 public String getPath() ：将此File转换为路径名字符串。 public String getName() ：返回由此File表示的文件或目录的名称。 public long length() ：返回由此File表示的文件的长度。 方法演示，代码如下： 12345678910111213141516171819202122232425public class FileGet &#123; public static void main(String[] args) &#123; File f = new File(\"d:/aaa/bbb.java\"); System.out.println(\"文件绝对路径:\"+f.getAbsolutePath()); System.out.println(\"文件构造路径:\"+f.getPath()); System.out.println(\"文件名称:\"+f.getName()); System.out.println(\"文件长度:\"+f.length()+\"字节\"); File f2 = new File(\"d:/aaa\"); System.out.println(\"目录绝对路径:\"+f2.getAbsolutePath()); System.out.println(\"目录构造路径:\"+f2.getPath()); System.out.println(\"目录名称:\"+f2.getName()); System.out.println(\"目录长度:\"+f2.length()); &#125;&#125;输出结果：文件绝对路径:d:\\aaa\\bbb.java文件构造路径:d:\\aaa\\bbb.java文件名称:bbb.java文件长度:636字节目录绝对路径:d:\\aaa目录构造路径:d:\\aaa目录名称:aaa目录长度:4096 API中说明：length()，表示文件的长度。但是File对象表示目录，则返回值未指定。 绝对路径和相对路径 绝对路径：从盘符开始的路径，这是一个完整的路径。 相对路径：相对于项目目录的路径，这是一个便捷的路径，开发中经常使用。 1234567891011121314public class FilePath &#123; public static void main(String[] args) &#123; // D盘下的bbb.java文件 File f = new File(\"D:\\\\bbb.java\"); System.out.println(f.getAbsolutePath()); // 项目下的bbb.java文件 File f2 = new File(\"bbb.java\"); System.out.println(f2.getAbsolutePath()); &#125;&#125;输出结果：D:\\bbb.javaD:\\idea_project_test4\\bbb.java 判断功能的方法 public boolean exists() ：此File表示的文件或目录是否实际存在。 public boolean isDirectory() ：此File表示的是否为目录。 public boolean isFile() ：此File表示的是否为文件。 方法演示，代码如下： 1234567891011121314151617public class FileIs &#123; public static void main(String[] args) &#123; File f = new File(\"d:\\\\aaa\\\\bbb.java\"); File f2 = new File(\"d:\\\\aaa\"); // 判断是否存在 System.out.println(\"d:\\\\aaa\\\\bbb.java 是否存在:\"+f.exists()); System.out.println(\"d:\\\\aaa 是否存在:\"+f2.exists()); // 判断是文件还是目录 System.out.println(\"d:\\\\aaa 文件?:\"+f2.isFile()); System.out.println(\"d:\\\\aaa 目录?:\"+f2.isDirectory()); &#125;&#125;输出结果：d:\\aaa\\bbb.java 是否存在:trued:\\aaa 是否存在:trued:\\aaa 文件?:falsed:\\aaa 目录?:true 创建删除功能的方法 public boolean createNewFile() ：当且仅当具有该名称的文件尚不存在时，创建一个新的空文件。 public boolean delete() ：删除由此File表示的文件或目录。 public boolean mkdir() ：创建由此File表示的目录。 public boolean mkdirs() ：创建由此File表示的目录，包括任何必需但不存在的父目录。 方法演示，代码如下： 12345678910111213141516171819202122232425262728public class FileCreateDelete &#123; public static void main(String[] args) throws IOException &#123; // 文件的创建 File f = new File(\"aaa.txt\"); System.out.println(\"是否存在:\"+f.exists()); // false System.out.println(\"是否创建:\"+f.createNewFile()); // true System.out.println(\"是否存在:\"+f.exists()); // true // 目录的创建 File f2= new File(\"newDir\"); System.out.println(\"是否存在:\"+f2.exists());// false System.out.println(\"是否创建:\"+f2.mkdir()); // true System.out.println(\"是否存在:\"+f2.exists());// true // 创建多级目录 File f3= new File(\"newDira\\\\newDirb\"); System.out.println(f3.mkdir());// false File f4= new File(\"newDira\\\\newDirb\"); System.out.println(f4.mkdirs());// true // 文件的删除 System.out.println(f.delete());// true // 目录的删除 System.out.println(f2.delete());// true System.out.println(f4.delete());// false &#125;&#125; API中说明：delete方法，如果此File表示目录，则目录必须为空才能删除。 1.4 目录的遍历 public String[] list() ：返回一个String数组，表示该File目录中的所有子文件或目录。 public File[] listFiles() ：返回一个File数组，表示该File目录中的所有的子文件或目录。 12345678910111213141516public class FileFor &#123; public static void main(String[] args) &#123; File dir = new File(\"d:\\\\java_code\"); //获取当前目录下的文件以及文件夹的名称。 String[] names = dir.list(); for(String name : names)&#123; System.out.println(name); &#125; //获取当前目录下的文件以及文件夹对象，只要拿到了文件对象，那么就可以获取更多信息 File[] files = dir.listFiles(); for (File file : files) &#123; System.out.println(file); &#125; &#125;&#125; 小贴士： 调用listFiles方法的File对象，表示的必须是实际存在的目录，否则返回null，无法进行遍历。 第二章 递归2.1 概述 递归：指在当前方法内调用自己的这种现象。 1234public static void main(String[] args) &#123; System.out.println(\"main\"); main(args);&#125; 2.2 递归累和计算1 ~ n的和分析：num的累和 = num + (num-1)的累和，所以可以把累和的操作定义成一个方法，递归调用。 实现代码： 123456789101112131415161718192021222324252627282930public class DiGuiDemo &#123; public static void main(String[] args) &#123; //计算1~num的和，使用递归完成 int num = 5; // 调用求和的方法 int sum = getSum(num); // 输出结果 System.out.println(sum); &#125; /* 通过递归算法实现. 参数列表:int 返回值类型: int */ public static int getSum(int num) &#123; /* num为1时,方法返回1, 相当于是方法的出口,num总有是1的情况 */ if(num == 1)&#123; return 1; &#125; /* num不为1时,方法返回 num +(num-1)的累和 递归调用getSum方法 */ return num + getSum(num-1); &#125;&#125; 代码执行图解 小贴士：递归一定要有条件限定，保证递归能够停止下来，次数不要太多，否则会发生栈内存溢出。 2.3 递归求阶乘 阶乘：所有小于及等于该数的正整数的积。 1n的阶乘：n! = n * (n-1) *...* 3 * 2 * 1 分析：这与累和类似,只不过换成了乘法运算，学员可以自己练习，需要注意阶乘值符合int类型的范围。 1推理得出：n! = n * (n-1)! 代码实现： 1234567891011121314151617181920212223242526public class DiGuiDemo &#123; //计算n的阶乘，使用递归完成 public static void main(String[] args) &#123; int n = 3; // 调用求阶乘的方法 int value = getValue(n); // 输出结果 System.out.println(\"阶乘为:\"+ value); &#125; /* 通过递归算法实现. 参数列表:int 返回值类型: int */ public static int getValue(int n) &#123; // 1的阶乘为1 if (n == 1) &#123; return 1; &#125; /* n不为1时,方法返回 n! = n*(n-1)! 递归调用getValue方法 */ return n * getValue(n - 1); &#125;&#125; 2.4 递归打印多级目录分析：多级目录的打印，就是当目录的嵌套。遍历之前，无从知道到底有多少级目录，所以我们还是要使用递归实现。 代码实现： 12345678910111213141516171819202122232425262728293031public class DiGuiDemo2 &#123; public static void main(String[] args) &#123; // 创建File对象 File dir = new File(\"D:\\\\aaa\"); // 调用打印目录方法 printDir(dir); &#125; public static void printDir(File dir) &#123; // 获取子文件和目录 File[] files = dir.listFiles(); // 循环打印 /* 判断: 当是文件时,打印绝对路径. 当是目录时,继续调用打印目录的方法,形成递归调用. */ for (File file : files) &#123; // 判断 if (file.isFile()) &#123; // 是文件,输出文件绝对路径 System.out.println(\"文件名:\"+ file.getAbsolutePath()); &#125; else &#123; // 是目录,输出目录绝对路径 System.out.println(\"目录:\"+file.getAbsolutePath()); // 继续遍历,调用printDir,形成递归 printDir(file); &#125; &#125; &#125;&#125; 第三章 综合案例3.1 文件搜索搜索D:\\aaa 目录中的.java 文件。 分析： 目录搜索，无法判断多少级目录，所以使用递归，遍历所有目录。 遍历目录时，获取的子文件，通过文件名称，判断是否符合条件。 代码实现： 1234567891011121314151617181920212223242526public class DiGuiDemo3 &#123; public static void main(String[] args) &#123; // 创建File对象 File dir = new File(\"D:\\\\aaa\"); // 调用打印目录方法 printDir(dir); &#125; public static void printDir(File dir) &#123; // 获取子文件和目录 File[] files = dir.listFiles(); // 循环打印 for (File file : files) &#123; if (file.isFile()) &#123; // 是文件，判断文件名并输出文件绝对路径 if (file.getName().endsWith(\".java\")) &#123; System.out.println(\"文件名:\" + file.getAbsolutePath()); &#125; &#125; else &#123; // 是目录，继续遍历,形成递归 printDir(file); &#125; &#125; &#125;&#125; 3.2 文件过滤器优化java.io.FileFilter是一个接口，是File的过滤器。 该接口的对象可以传递给File类的listFiles(FileFilter) 作为参数， 接口中只有一个方法。 boolean accept(File pathname) ：测试pathname是否应该包含在当前File目录中，符合则返回true。 分析： 接口作为参数，需要传递子类对象，重写其中方法。我们选择匿名内部类方式，比较简单。 accept方法，参数为File，表示当前File下所有的子文件和子目录。保留住则返回true，过滤掉则返回false。保留规则： 要么是.java文件。 要么是目录，用于继续遍历。 通过过滤器的作用，listFiles(FileFilter)返回的数组元素中，子文件对象都是符合条件的，可以直接打印。 代码实现： 123456789101112131415161718192021222324public class DiGuiDemo4 &#123; public static void main(String[] args) &#123; File dir = new File(\"D:\\\\aaa\"); printDir2(dir); &#125; public static void printDir2(File dir) &#123; // 匿名内部类方式,创建过滤器子类对象 File[] files = dir.listFiles(new FileFilter() &#123; @Override public boolean accept(File pathname) &#123; return pathname.getName().endsWith(\".java\")||pathname.isDirectory(); &#125; &#125;); // 循环打印 for (File file : files) &#123; if (file.isFile()) &#123; System.out.println(\"文件名:\" + file.getAbsolutePath()); &#125; else &#123; printDir2(file); &#125; &#125; &#125;&#125; 3.3 Lambda优化分析：FileFilter是只有一个方法的接口，因此可以用lambda表达式简写。 lambda格式： 1()-&gt;&#123; &#125; 代码实现： 123456789101112131415public static void printDir3(File dir) &#123; // lambda的改写 File[] files = dir.listFiles(f -&gt;&#123; return f.getName().endsWith(\".java\") || f.isDirectory(); &#125;); // 循环打印 for (File file : files) &#123; if (file.isFile()) &#123; System.out.println(\"文件名:\" + file.getAbsolutePath()); &#125; else &#123; printDir3(file); &#125; &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/04 【Map】","date":"2018-06-20T07:44:02.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/04 【Map】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/04 【Map】/","excerpt":"","text":"day04 【Map】主要内容 Map集合 教学目标 能够说出Map集合特点 使用Map集合添加方法保存数据 使用”键找值”的方式遍历Map集合 使用”键值对”的方式遍历Map集合 能够使用HashMap存储自定义键值对的数据 能够使用HashMap编写斗地主洗牌发牌案例 第一章 Map集合1.1 概述现实生活中，我们常会看到这样的一种集合：IP地址与主机名，身份证号与个人，系统用户名与系统用户对象等，这种一一对应的关系，就叫做映射。Java提供了专门的集合类用来存放这种对象关系的对象，即java.util.Map接口。 我们通过查看Map接口描述，发现Map接口下的集合与Collection接口下的集合，它们存储数据的形式不同，如下图。 Collection中的集合，元素是孤立存在的（理解为单身），向集合中存储元素采用一个个元素的方式存储。 Map中的集合，元素是成对存在的(理解为夫妻)。每个元素由键与值两部分组成，通过键可以找对所对应的值。 Collection中的集合称为单列集合，Map中的集合称为双列集合。 需要注意的是，Map中的集合不能包含重复的键，值可以重复；每个键只能对应一个值。 1.2 Map常用子类通过查看Map接口描述，看到Map有多个子类，这里我们主要讲解常用的HashMap集合、LinkedHashMap集合。 HashMap&lt;K,V&gt;：存储数据采用的哈希表结构，元素的存取顺序不能保证一致。由于要保证键的唯一、不重复，需要重写键的hashCode()方法、equals()方法。 LinkedHashMap&lt;K,V&gt;：HashMap下有个子类LinkedHashMap，存储数据采用的哈希表结构+链表结构。通过链表结构可以保证元素的存取顺序一致；通过哈希表结构可以保证的键的唯一、不重复，需要重写键的hashCode()方法、equals()方法。 tips：Map接口中的集合都有两个泛型变量&lt;K,V&gt;,在使用时，要为两个泛型变量赋予数据类型。两个泛型变量&lt;K,V&gt;的数据类型可以相同，也可以不同。 1.3 Map接口中的常用方法Map接口中定义了很多方法，常用的如下： public V put(K key, V value): 把指定的键与指定的值添加到Map集合中。 public V remove(Object key): 把指定的键 所对应的键值对元素 在Map集合中删除，返回被删除元素的值。 public V get(Object key) 根据指定的键，在Map集合中获取对应的值。 public Set&lt;K&gt; keySet(): 获取Map集合中所有的键，存储到Set集合中。 public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet(): 获取到Map集合中所有的键值对对象的集合(Set集合)。 Map接口的方法演示 1234567891011121314151617181920public class MapDemo &#123; public static void main(String[] args) &#123; //创建 map对象 HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); //添加元素到集合 map.put(\"黄晓明\", \"杨颖\"); map.put(\"文章\", \"马伊琍\"); map.put(\"邓超\", \"孙俪\"); System.out.println(map); //String remove(String key) System.out.println(map.remove(\"邓超\")); System.out.println(map); // 想要查看 黄晓明的媳妇 是谁 System.out.println(map.get(\"黄晓明\")); System.out.println(map.get(\"邓超\")); &#125;&#125; tips: 使用put方法时，若指定的键(key)在集合中没有，则没有这个键对应的值，返回null，并把指定的键值添加到集合中； 若指定的键(key)在集合中存在，则返回值为集合中键对应的值（该值为替换前的值），并把指定键所对应的值，替换成指定的新值。 1.4 Map集合遍历键找值方式键找值方式：即通过元素中的键，获取键所对应的值 分析步骤： 获取Map中所有的键，由于键是唯一的，所以返回一个Set集合存储所有的键。方法提示:keyset() 遍历键的Set集合，得到每一个键。 根据键，获取键所对应的值。方法提示:get(K key) 代码演示： 1234567891011121314151617181920public class MapDemo01 &#123; public static void main(String[] args) &#123; //创建Map集合对象 HashMap&lt;String, String&gt; map = new HashMap&lt;String,String&gt;(); //添加元素到集合 map.put(\"胡歌\", \"霍建华\"); map.put(\"郭德纲\", \"于谦\"); map.put(\"薛之谦\", \"大张伟\"); //获取所有的键 获取键集 Set&lt;String&gt; keys = map.keySet(); // 遍历键集 得到 每一个键 for (String key : keys) &#123; //key 就是键 //获取对应值 String value = map.get(key); System.out.println(key+\"的CP是：\"+value); &#125; &#125;&#125; 遍历图解： 1.5 Entry键值对对象我们已经知道，Map中存放的是两种对象，一种称为key(键)，一种称为value(值)，它们在在Map中是一一对应关系，这一对对象又称做Map中的一个Entry(项)。Entry将键值对的对应关系封装成了对象。即键值对对象，这样我们在遍历Map集合时，就可以从每一个键值对（Entry）对象中获取对应的键与对应的值。 既然Entry表示了一对键和值，那么也同样提供了获取对应键和对应值得方法： public K getKey()：获取Entry对象中的键。 public V getValue()：获取Entry对象中的值。 在Map集合中也提供了获取所有Entry对象的方法： public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet(): 获取到Map集合中所有的键值对对象的集合(Set集合)。 1.6 Map集合遍历键值对方式键值对方式：即通过集合中每个键值对(Entry)对象，获取键值对(Entry)对象中的键与值。 操作步骤与图解： 获取Map集合中，所有的键值对(Entry)对象，以Set集合形式返回。方法提示:entrySet()。 遍历包含键值对(Entry)对象的Set集合，得到每一个键值对(Entry)对象。 通过键值对(Entry)对象，获取Entry对象中的键与值。 方法提示:getkey() getValue() 123456789101112131415161718192021public class MapDemo02 &#123; public static void main(String[] args) &#123; // 创建Map集合对象 HashMap&lt;String, String&gt; map = new HashMap&lt;String,String&gt;(); // 添加元素到集合 map.put(\"胡歌\", \"霍建华\"); map.put(\"郭德纲\", \"于谦\"); map.put(\"薛之谦\", \"大张伟\"); // 获取 所有的 entry对象 entrySet Set&lt;Entry&lt;String,String&gt;&gt; entrySet = map.entrySet(); // 遍历得到每一个entry对象 for (Entry&lt;String, String&gt; entry : entrySet) &#123; // 解析 String key = entry.getKey(); String value = entry.getValue(); System.out.println(key+\"的CP是:\"+value); &#125; &#125;&#125; 遍历图解： tips：Map集合不能直接使用迭代器或者foreach进行遍历。但是转成Set之后就可以使用了。 1.7 HashMap存储自定义类型键值练习：每位学生（姓名，年龄）都有自己的家庭住址。那么，既然有对应关系，则将学生对象和家庭住址存储到map集合中。学生作为键, 家庭住址作为值。 注意，学生姓名相同并且年龄相同视为同一名学生。 编写学生类： 12345678910111213141516171819202122232425262728293031323334353637383940414243public class Student &#123; private String name; private int age; public Student() &#123; &#125; public Student(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Student student = (Student) o; return age == student.age &amp;&amp; Objects.equals(name, student.name); &#125; @Override public int hashCode() &#123; return Objects.hash(name, age); &#125;&#125; 编写测试类： 12345678910111213141516171819public class HashMapTest &#123; public static void main(String[] args) &#123; //1,创建Hashmap集合对象。 Map&lt;Student,String&gt;map = new HashMap&lt;Student,String&gt;(); //2,添加元素。 map.put(newStudent(\"lisi\",28), \"上海\"); map.put(newStudent(\"wangwu\",22), \"北京\"); map.put(newStudent(\"zhaoliu\",24), \"成都\"); map.put(newStudent(\"zhouqi\",25), \"广州\"); map.put(newStudent(\"wangwu\",22), \"南京\"); //3,取出元素。键找值方式 Set&lt;Student&gt;keySet = map.keySet(); for(Student key: keySet)&#123; Stringvalue = map.get(key); System.out.println(key.toString()+\".....\"+value); &#125; &#125;&#125; 当给HashMap中存放自定义对象时，如果自定义对象作为key存在，这时要保证对象唯一，必须复写对象的hashCode和equals方法(如果忘记，请回顾HashSet存放自定义对象)。 如果要保证map中存放的key和取出的顺序一致，可以使用java.util.LinkedHashMap集合来存放。 1.8 LinkedHashMap我们知道HashMap保证成对元素唯一，并且查询速度很快，可是成对元素存放进去是没有顺序的，那么我们要保证有序，还要速度快怎么办呢？ 在HashMap下面有一个子类LinkedHashMap，它是链表和哈希表组合的一个数据存储结构。 123456789101112public class LinkedHashMapDemo &#123; public static void main(String[] args) &#123; LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;String, String&gt;(); map.put(\"邓超\", \"孙俪\"); map.put(\"李晨\", \"范冰冰\"); map.put(\"刘德华\", \"朱丽倩\"); Set&lt;Entry&lt;String, String&gt;&gt; entrySet = map.entrySet(); for (Entry&lt;String, String&gt; entry : entrySet) &#123; System.out.println(entry.getKey() + \" \" + entry.getValue()); &#125; &#125;&#125; 结果: 123邓超 孙俪李晨 范冰冰刘德华 朱丽倩 1.9 Map集合练习需求： 计算一个字符串中每个字符出现次数。 分析： 获取一个字符串对象 创建一个Map集合，键代表字符，值代表次数。 遍历字符串得到每个字符。 判断Map中是否有该键。 如果没有，第一次出现，存储次数为1；如果有，则说明已经出现过，获取到对应的值进行++，再次存储。 打印最终结果 代码： 1234567891011121314151617181920212223242526272829public class MapTest &#123;public static void main(String[] args) &#123; //友情提示 System.out.println(\"请录入一个字符串:\"); String line = new Scanner(System.in).nextLine(); // 定义 每个字符出现次数的方法 findChar(line); &#125; private static void findChar(String line) &#123; //1:创建一个集合 存储 字符 以及其出现的次数 HashMap&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;(); //2:遍历字符串 for (int i = 0; i &lt; line.length(); i++) &#123; char c = line.charAt(i); //判断 该字符 是否在键集中 if (!map.containsKey(c)) &#123;//说明这个字符没有出现过 //那就是第一次 map.put(c, 1); &#125; else &#123; //先获取之前的次数 Integer count = map.get(c); //count++; //再次存入 更新 map.put(c, ++count); &#125; &#125; System.out.println(map); &#125;&#125; 第二章 补充知识点2.1 JDK9对集合添加的优化通常，我们在代码中创建一个集合（例如，List 或 Set ），并直接用一些元素填充它。 实例化集合，几个 add方法 调用，使得代码重复。 123456789public class Demo01 &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(\"abc\"); list.add(\"def\"); list.add(\"ghi\"); System.out.println(list); &#125;&#125; Java 9，添加了几种集合工厂方法,更方便创建少量元素的集合、map实例。新的List、Set、Map的静态工厂方法可以更方便地创建集合的不可变实例。 例子： 1234567891011public class HelloJDK9 &#123; public static void main(String[] args) &#123; Set&lt;String&gt; str1=Set.of(\"a\",\"b\",\"c\"); //str1.add(\"c\");这里编译的时候不会错，但是执行的时候会报错，因为是不可变的集合 System.out.println(str1); Map&lt;String,Integer&gt; str2=Map.of(\"a\",1,\"b\",2); System.out.println(str2); List&lt;String&gt; str3=List.of(\"a\",\"b\"); System.out.println(str3); &#125; &#125; 需要注意以下两点： 1:of()方法只是Map，List，Set这三个接口的静态方法，其父类接口和子类实现并没有这类方法，比如 HashSet，ArrayList等待； 2:返回的集合是不可变的； 2.2 Debug追踪使用IDEA的断点调试功能，查看程序的运行过程 在有效代码行，点击行号右边的空白区域，设置断点，程序执行到断点将停止，我们可以手动来运行程序 点击Debug运行模式 程序停止在断点上不再执行，而IDEA最下方打开了Debug调试窗口 Debug调试窗口介绍 快捷键F8，代码向下执行一行,第九行执行完毕，执行到第10行（第10行还未执行） 切换到控制台面板，控制台显示 请录入一个字符串： 并且等待键盘录入 快捷键F8，程序继续向后执行，执行键盘录入操作，在控制台录入数据 ababcea 回车之后效果： 调试界面效果： 此时到达findChar方法，快捷键F7，进入方法findChar 快捷键F8 接续执行，创建了map对象，变量区域显示 快捷键F8 接续执行，进入到循环中，循环变量i为 0,F8再继续执行，就获取到变量c赋值为字符‘a’ 字节值97 快捷键F8 接续执行，进入到判断语句中，因为该字符 不在Map集合键集中，再按F8执行，进入该判断中 快捷键F8 接续执行，循环结束，进入下次循环，此时map中已经添加一对儿元素 快捷键F8 接续执行，进入下次循环，再继续上面的操作，我们就可以看到代码每次是如何执行的了 如果不想继续debug,那么可以使用快捷键F9,程序正常执行到结束，程序结果在控制台显示 第三章 模拟斗地主洗牌发牌3.1 案例介绍按照斗地主的规则，完成洗牌发牌的动作。 具体规则： 组装54张扑克牌将 54张牌顺序打乱 三个玩家参与游戏，三人交替摸牌，每人17张牌，最后三张留作底牌。 查看三人各自手中的牌（按照牌的大小排序）、底牌 规则：手中扑克牌从大到小的摆放顺序：大王,小王,2,A,K,Q,J,10,9,8,7,6,5,4,3 3.2 案例需求分析 准备牌： 完成数字与纸牌的映射关系： 使用双列Map(HashMap)集合，完成一个数字与字符串纸牌的对应关系(相当于一个字典)。 洗牌： 通过数字完成洗牌发牌 发牌： 将每个人以及底牌设计为ArrayList,将最后3张牌直接存放于底牌，剩余牌通过对3取模依次发牌。 存放的过程中要求数字大小与斗地主规则的大小对应。 将代表不同纸牌的数字分配给不同的玩家与底牌。 看牌： 通过Map集合找到对应字符展示。 通过查询纸牌与数字的对应关系，由数字转成纸牌字符串再进行展示。 3.3 实现代码步骤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106public class Poker &#123; public static void main(String[] args) &#123; /* * 1组装54张扑克牌 */ // 1.1 创建Map集合存储 HashMap&lt;Integer, String&gt; pokerMap = new HashMap&lt;Integer, String&gt;(); // 1.2 创建 花色集合 与 数字集合 ArrayList&lt;String&gt; colors = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; numbers = new ArrayList&lt;String&gt;(); // 1.3 存储 花色 与数字 Collections.addAll(colors, \"♦\", \"♣\", \"♥\", \"♠\"); Collections.addAll(numbers, \"2\", \"A\", \"K\", \"Q\", \"J\", \"10\", \"9\", \"8\", \"7\", \"6\", \"5\", \"4\", \"3\"); // 设置 存储编号变量 int count = 1; pokerMap.put(count++, \"大王\"); pokerMap.put(count++, \"小王\"); // 1.4 创建牌 存储到map集合中 for (String number : numbers) &#123; for (String color : colors) &#123; String card = color + number; pokerMap.put(count++, card); &#125; &#125; /* * 2 将54张牌顺序打乱 */ // 取出编号 集合 Set&lt;Integer&gt; numberSet = pokerMap.keySet(); // 因为要将编号打乱顺序 所以 应该先进行转换到 list集合中 ArrayList&lt;Integer&gt; numberList = new ArrayList&lt;Integer&gt;(); numberList.addAll(numberSet); // 打乱顺序 Collections.shuffle(numberList); // 3 完成三个玩家交替摸牌，每人17张牌，最后三张留作底牌 // 3.1 发牌的编号 // 创建三个玩家编号集合 和一个 底牌编号集合 ArrayList&lt;Integer&gt; noP1 = new ArrayList&lt;Integer&gt;(); ArrayList&lt;Integer&gt; noP2 = new ArrayList&lt;Integer&gt;(); ArrayList&lt;Integer&gt; noP3 = new ArrayList&lt;Integer&gt;(); ArrayList&lt;Integer&gt; dipaiNo = new ArrayList&lt;Integer&gt;(); // 3.2发牌的编号 for (int i = 0; i &lt; numberList.size(); i++) &#123; // 获取该编号 Integer no = numberList.get(i); // 发牌 // 留出底牌 if (i &gt;= 51) &#123; dipaiNo.add(no); &#125; else &#123; if (i % 3 == 0) &#123; noP1.add(no); &#125; else if (i % 3 == 1) &#123; noP2.add(no); &#125; else &#123; noP3.add(no); &#125; &#125; &#125; // 4 查看三人各自手中的牌（按照牌的大小排序）、底牌 // 4.1 对手中编号进行排序 Collections.sort(noP1); Collections.sort(noP2); Collections.sort(noP3); Collections.sort(dipaiNo); // 4.2 进行牌面的转换 // 创建三个玩家牌面集合 以及底牌牌面集合 ArrayList&lt;String&gt; player1 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; player2 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; player3 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; dipai = new ArrayList&lt;String&gt;(); // 4.3转换 for (Integer i : noP1) &#123; // 4.4 根据编号找到 牌面 pokerMap String card = pokerMap.get(i); // 添加到对应的 牌面集合中 player1.add(card); &#125; for (Integer i : noP2) &#123; String card = pokerMap.get(i); player2.add(card); &#125; for (Integer i : noP3) &#123; String card = pokerMap.get(i); player3.add(card); &#125; for (Integer i : dipaiNo) &#123; String card = pokerMap.get(i); dipai.add(card); &#125; //4.5 查看 System.out.println(\"令狐冲：\"+player1); System.out.println(\"石破天：\"+player2); System.out.println(\"鸠摩智：\"+player3); System.out.println(\"底牌：\"+dipai); &#125;&#125;","categories":[],"tags":[]},{"title":"day02【继承、super、this、抽象类】","slug":"Java/JavaSE/课件/02【继承、super、this、抽象类】","date":"2018-06-20T07:44:02.000Z","updated":"2018-07-05T07:43:32.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/02【继承、super、this、抽象类】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/02【继承、super、this、抽象类】/","excerpt":"","text":"day02【继承、super、this、抽象类】今日内容 三大特性——继承 方法重写 super关键字 this关键字 抽象类 教学目标 能够解释类名作为参数和返回值类型 能够写出类的继承格式 能够说出继承的特点 能够说出子类调用父类的成员特点 能够说出方法重写的概念 能够说出super可以解决的问题 描述抽象方法的概念 写出抽象类的格式 写出抽象方法的格式 能够说出父类抽象方法的存在意义 能够完成发红包案例的代码逻辑 第一章 继承1.1 概述由来多个类中存在相同属性和行为时，将这些内容抽取到单独一个类中，那么多个类无需再定义这些属性和行为，只要继承那一个类即可。如图所示： 其中，多个类可以称为子类，单独那一个类称为父类、超类（superclass）或者基类。 继承描述的是事物之间的所属关系，这种关系是：is-a 的关系。例如，图中兔子属于食草动物，食草动物属于动物。可见，父类更通用，子类更具体。我们通过继承，可以使多种事物之间形成一种关系体系。 定义 继承：就是子类继承父类的属性和行为，使得子类对象具有与父类相同的属性、相同的行为。子类可以直接访问父类中的非私有的属性和行为。 好处 提高代码的复用性。 类与类之间产生了关系，是多态的前提。 1.2 继承的格式通过 extends 关键字，可以声明一个子类继承另外一个父类，定义格式如下： 1234567class 父类 &#123; ...&#125;class 子类 extends 父类 &#123; ...&#125; 继承演示，代码如下： 123456789101112131415161718192021222324252627282930313233343536373839/* * 定义员工类Employee，做为父类 */class Employee &#123; String name; // 定义name属性 // 定义员工的工作方法 public void work() &#123; System.out.println(\"尽心尽力地工作\"); &#125;&#125;/* * 定义讲师类Teacher 继承 员工类Employee */class Teacher extends Employee &#123; // 定义一个打印name的方法 public void printName() &#123; System.out.println(\"name=\" + name); &#125;&#125;/* * 定义测试类 */public class ExtendDemo01 &#123; public static void main(String[] args) &#123; // 创建一个讲师类对象 Teacher t = new Teacher(); // 为该员工类的name属性进行赋值 t.name = \"小明\"; // 调用该员工的printName()方法 t.printName(); // name = 小明 // 调用Teacher类继承来的work()方法 t.work(); // 尽心尽力地工作 &#125;&#125; 1.3 继承后的特点——成员变量当类之间产生了关系后，其中各类中的成员变量，又产生了哪些影响呢？ 成员变量不重名如果子类父类中出现不重名的成员变量，这时的访问是没有影响的。代码如下： 123456789101112131415161718192021222324252627class Fu &#123; // Fu中的成员变量。 int num = 5;&#125;class Zi extends Fu &#123; // Zi中的成员变量 int num2 = 6; // Zi中的成员方法 public void show() &#123; // 访问父类中的num， System.out.println(\"Fu num=\"+num); // 继承而来，所以直接访问。 // 访问子类中的num2 System.out.println(\"Zi num2=\"+num2); &#125;&#125;class ExtendDemo02 &#123; public static void main(String[] args) &#123; // 创建子类对象 Zi z = new Zi(); // 调用子类中的show方法 z.show(); &#125;&#125;演示结果：Fu num = 5Zi num2 = 6 成员变量重名如果子类父类中出现重名的成员变量，这时的访问是有影响的。代码如下： 12345678910111213141516171819202122232425class Fu &#123; // Fu中的成员变量。 int num = 5;&#125;class Zi extends Fu &#123; // Zi中的成员变量 int num = 6; public void show() &#123; // 访问父类中的num System.out.println(\"Fu num=\" + num); // 访问子类中的num System.out.println(\"Zi num=\" + num); &#125;&#125;class ExtendsDemo03 &#123; public static void main(String[] args) &#123; // 创建子类对象 Zi z = new Zi(); // 调用子类中的show方法 z.show(); &#125;&#125;演示结果：Fu num = 6Zi num = 6 子父类中出现了同名的成员变量时，在子类中需要访问父类中非私有成员变量时，需要使用super 关键字，修饰父类成员变量，类似于之前学过的 this 。 使用格式： 1super.父类成员变量名 子类方法需要修改，代码如下： 12345678910111213class Zi extends Fu &#123; // Zi中的成员变量 int num = 6; public void show() &#123; //访问父类中的num System.out.println(\"Fu num=\" + super.num); //访问子类中的num System.out.println(\"Zi num=\" + this.num); &#125;&#125;演示结果：Fu num = 5Zi num = 6 小贴士：Fu 类中的成员变量是非私有的，子类中可以直接访问。若Fu 类中的成员变量私有了，子类是不能直接访问的。通常编码时，我们遵循封装的原则，使用private修饰成员变量，那么如何访问父类的私有成员变量呢？对！可以在父类中提供公共的getXxx方法和setXxx方法。 1.4 继承后的特点——成员方法当类之间产生了关系，其中各类中的成员方法，又产生了哪些影响呢？ 成员方法不重名如果子类父类中出现不重名的成员方法，这时的调用是没有影响的。对象调用方法时，会先在子类中查找有没有对应的方法，若子类中存在就会执行子类中的方法，若子类中不存在就会执行父类中相应的方法。代码如下： 123456789101112131415161718class Fu&#123; public void show()&#123; System.out.println(\"Fu类中的show方法执行\"); &#125;&#125;class Zi extends Fu&#123; public void show2()&#123; System.out.println(\"Zi类中的show2方法执行\"); &#125;&#125;public class ExtendsDemo04&#123; public static void main(String[] args) &#123; Zi z = new Zi(); //子类中没有show方法，但是可以找到父类方法去执行 z.show(); z.show2(); &#125;&#125; 成员方法重名——重写(Override)如果子类父类中出现重名的成员方法，这时的访问是一种特殊情况，叫做方法重写 (Override)。 方法重写 ：子类中出现与父类一模一样的方法时（返回值类型，方法名和参数列表都相同），会出现覆盖效果，也称为重写或者复写。声明不变，重新实现。 代码如下： 123456789101112131415161718class Fu &#123; public void show() &#123; System.out.println(\"Fu show\"); &#125;&#125;class Zi extends Fu &#123; //子类重写了父类的show方法 public void show() &#123; System.out.println(\"Zi show\"); &#125;&#125;public class ExtendsDemo05&#123; public static void main(String[] args) &#123; Zi z = new Zi(); // 子类中有show方法，只执行重写后的show方法 z.show(); // Zi show &#125;&#125; 重写的应用子类可以根据需要，定义特定于自己的行为。既沿袭了父类的功能名称，又根据子类的需要重新实现父类方法，从而进行扩展增强。比如新的手机增加来电显示头像的功能，代码如下： 1234567891011121314151617181920212223242526272829303132333435363738class Phone &#123; public void sendMessage()&#123; System.out.println(\"发短信\"); &#125; public void call()&#123; System.out.println(\"打电话\"); &#125; public void showNum()&#123; System.out.println(\"来电显示号码\"); &#125;&#125;//智能手机类class NewPhone extends Phone &#123; //重写父类的来电显示号码功能，并增加自己的显示姓名和图片功能 public void showNum()&#123; //调用父类已经存在的功能使用super super.showNum(); //增加自己特有显示姓名和图片功能 System.out.println(\"显示来电姓名\"); System.out.println(\"显示头像\"); &#125;&#125;public class ExtendsDemo06 &#123; public static void main(String[] args) &#123; // 创建子类对象 NewPhone np = new NewPhone()； // 调用父类继承而来的方法 np.call(); // 调用子类重写的方法 np.showNum(); &#125;&#125; 小贴士：这里重写时，用到super.父类成员方法，表示调用父类的成员方法。 注意事项 子类方法覆盖父类方法，必须要保证权限大于等于父类权限。 子类方法覆盖父类方法，返回值类型、方法名和参数列表都要一模一样。 1.5 继承后的特点——构造方法当类之间产生了关系，其中各类中的构造方法，又产生了哪些影响呢？ 首先我们要回忆两个事情，构造方法的定义格式和作用。 构造方法的名字是与类名一致的。所以子类是无法继承父类构造方法的。 构造方法的作用是初始化成员变量的。所以子类的初始化过程中，必须先执行父类的初始化动作。子类的构造方法中默认有一个super() ，表示调用父类的构造方法，父类成员变量初始化后，才可以给子类使用。代码如下： 123456789101112131415161718192021class Fu &#123; private int n; Fu()&#123; System.out.println(\"Fu()\"); &#125;&#125;class Zi extends Fu &#123; Zi()&#123; // super（），调用父类构造方法 super(); System.out.println(\"Zi（）\"); &#125; &#125;public class ExtendsDemo07&#123; public static void main (String args[])&#123; Zi zi = new Zi(); &#125;&#125;输出结果：Fu（）Zi（） 1.6 super和this父类空间优先于子类对象产生在每次创建子类对象时，先初始化父类空间，再创建其子类对象本身。目的在于子类对象中包含了其对应的父类空间，便可以包含其父类的成员，如果父类成员非private修饰，则子类可以随意使用父类成员。代码体现在子类的构造方法调用时，一定先调用父类的构造方法。理解图解如下： super和this的含义 super ：代表父类的存储空间标识(可以理解为父亲的引用)。 this ：代表当前对象的引用(谁调用就代表谁)。 super和this的用法 访问成员 12345this.成员变量 -- 本类的super.成员变量 -- 父类的this.成员方法名() -- 本类的 super.成员方法名() -- 父类的 用法演示，代码如下： 1234567891011121314151617181920212223242526272829class Animal &#123; public void eat() &#123; System.out.println(\"animal : eat\"); &#125;&#125; class Cat extends Animal &#123; public void eat() &#123; System.out.println(\"cat : eat\"); &#125; public void eatTest() &#123; this.eat(); // this 调用本类的方法 super.eat(); // super 调用父类的方法 &#125;&#125; public class ExtendsDemo08 &#123; public static void main(String[] args) &#123; Animal a = new Animal(); a.eat(); Cat c = new Cat(); c.eatTest(); &#125;&#125;输出结果为：animal : eatcat : eatanimal : eat 访问构造方法 12this(...) -- 本类的构造方法super(...) -- 父类的构造方法 子类的每个构造方法中均有默认的super()，调用父类的空参构造。手动调用父类构造会覆盖默认的super()。 super() 和 this() 都必须是在构造方法的第一行，所以不能同时出现。 1.7 继承的特点 Java只支持单继承，不支持多继承。 123//一个类只能有一个父类，不可以有多个父类。class C extends A&#123;&#125; //okclass C extends A，B... //error Java支持多层继承(继承体系)。 123class A&#123;&#125;class B extends A&#123;&#125;class C extends B&#123;&#125; 顶层父类是Object类。所有的类默认继承Object，作为父类。 子类和父类是一种相对的概念。 第二章 抽象类2.1 概述由来父类中的方法，被它的子类们重写，子类各自的实现都不尽相同。那么父类的方法声明和方法主体，只有声明还有意义，而方法主体则没有存在的意义了。我们把没有方法主体的方法称为抽象方法。Java语法规定，包含抽象方法的类就是抽象类。 定义 抽象方法 ： 没有方法体的方法。 抽象类：包含抽象方法的类。 2.2 abstract使用格式抽象方法使用abstract 关键字修饰方法，该方法就成了抽象方法，抽象方法只包含一个方法名，而没有方法体。 定义格式： 1修饰符 abstract 返回值类型 方法名 (参数列表)； 代码举例： 1public abstract void run()； 抽象类如果一个类包含抽象方法，那么该类必须是抽象类。 定义格式： 123abstract class 类名字 &#123; &#125; 代码举例： 123public abstract class Animal &#123; public abstract void run()；&#125; 抽象的使用继承抽象类的子类必须重写父类所有的抽象方法。否则，该子类也必须声明为抽象类。最终，必须有子类实现该父类的抽象方法，否则，从最初的父类到最终的子类都不能创建对象，失去意义。 代码举例： 1234567891011121314151617public class Cat extends Animal &#123; public void run ()&#123; System.out.println(\"小猫在墙头走~~~\")； &#125;&#125;public class CatTest &#123; public static void main(String[] args) &#123; // 创建子类对象 Cat c = new Cat(); // 调用run方法 c.run(); &#125;&#125;输出结果：小猫在墙头走~~~ 此时的方法重写，是子类对父类抽象方法的完成实现，我们将这种方法重写的操作，也叫做实现方法。 2.3 注意事项关于抽象类的使用，以下为语法上要注意的细节，虽然条目较多，但若理解了抽象的本质，无需死记硬背。 抽象类不能创建对象，如果创建，编译无法通过而报错。只能创建其非抽象子类的对象。 理解：假设创建了抽象类的对象，调用抽象的方法，而抽象方法没有具体的方法体，没有意义。 抽象类中，可以有构造方法，是供子类创建对象时，初始化父类成员使用的。 理解：子类的构造方法中，有默认的super()，需要访问父类构造方法。 抽象类中，不一定包含抽象方法，但是有抽象方法的类必定是抽象类。 理解：未包含抽象方法的抽象类，目的就是不想让调用者创建该类对象，通常用于某些特殊的类结构设计。 抽象类的子类，必须重写抽象父类中所有的抽象方法，否则，编译无法通过而报错。除非该子类也是抽象类。 理解：假设不重写所有抽象方法，则类中可能包含抽象方法。那么创建对象后，调用抽象的方法，没有意义。 第三章 继承的综合案例3.1 综合案例：群主发普通红包群主发普通红包。某群有多名成员，群主给成员发普通红包。普通红包的规则： 群主的一笔金额，从群主余额中扣除，平均分成n等份，让成员领取。 成员领取红包后，保存到成员余额中。 请根据描述，完成案例中所有类的定义以及指定类之间的继承关系，并完成发红包的操作。 3.2 案例分析根据描述分析，得出如下继承体系： 3.3 案例实现定义用户类： 123456789101112131415161718192021222324252627282930313233public class User &#123; // 成员变量 private String username; // 用户名 private double leftMoney; // 余额 // 构造方法 public User() &#123; &#125; public User(String username, double leftMoney) &#123; this.username = username; this.leftMoney = leftMoney; &#125; // get/set方法 public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public double getLeftMoney() &#123; return leftMoney; &#125; public void setLeftMoney(double leftMoney) &#123; this.leftMoney = leftMoney; &#125; // 展示信息的方法 public void show() &#123; System.out.println(\"用户名:\"+ username +\" , 余额为:\" + leftMoney + \"元\"); &#125;&#125; 定义群主类： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public class QunZhu extends User &#123; // 添加构造方法 public QunZhu() &#123; &#125; public QunZhu(String username, double leftMoney) &#123; // 通过super 调用父类构造方法 super(username, leftMoney); &#125; /* 群主发红包，就是把一个整数的金额，分层若干等份。 1.获取群主余额,是否够发红包. 不能则返回null,并提示. 能则继续. 2.修改群主余额. 3.拆分红包. 3.1.如果能整除，那么就平均分。 3.2.如果不能整除，那么就把余数分给最后一份。 */ public ArrayList&lt;Double&gt; send(int money, int count) &#123; // 获取群主余额 double leftMoney = getLeftMoney(); if(money &gt; leftMoney) &#123; return null; &#125; // 修改群主余额的 setLeftMoney(leftMoney - money); // 创建保存各个红包金额的集合 ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); // 定义循环次数,总个数-1次 int time = count - 1; // 一次计算,生成平均金额 double m = (double) money / count; // 循环分配 for (int i = 0; i &lt; time; i++) &#123; // 添加到集合中 list.add(m); // 总金额扣除已分配金额 money -= m; &#125; // 剩余的金额,为最后一个红包 list.add((double) money); System.out.println(\"普通红包金额:\" + list); // 返回集合 return list; &#125;&#125; 定义成员类： 12345678910111213141516171819public class Member extends User &#123; public Member() &#123; &#125; public Member(String username, double leftMoney) &#123; super(username, leftMoney); &#125; // 打开红包,就是从集合中,随机取出一份,保存到自己的余额中 public void openHongBao(ArrayList&lt;Double&gt; list) &#123; // 创建Random对象 Random r = new Random(); // 随机生成一个角标 int index = r.nextInt(list.size()); // 移除一个金额 Double money = list.remove(index); // 直接调用父类方法,设置到余额 setLeftMoney(getLeftMoney() + money ); &#125;&#125; 定义测试类： 1234567891011121314151617181920212223242526272829303132333435363738public class Test &#123; public static void main(String[] args) &#123; // 创建一个群主对象 QunZhu qz = new QunZhu(\"群主\", 200); // 创建一个键盘录入 Scanner sc = new Scanner(System.in); System.out.println(\"请输入金额 : \"); int money = sc.nextInt(); System.out.println(\"请输入个数 : \"); int count = sc.nextInt(); // 发送红包 ArrayList&lt;Double&gt; sendList = qz.send(money, count); // 判断, 如果余额不足 if (sendList == null) &#123; System.out.println(\"余额不足...\"); return; &#125; // 创建三个成员 Member m1 = new Member(); Member m2 = new Member(); Member m3 = new Member(); // 打开红包 m1.openHongBao(sendList); m2.openHongBao(sendList); m3.openHongBao(sendList); // 展示信息 qz.show(); m1.show(); m2.show(); m3.show(); &#125;&#125;","categories":[],"tags":[]},{"title":"1【Object类、常用API】","slug":"Java/JavaSE/课件/1【Object类、常用API】","date":"2018-06-20T07:44:02.000Z","updated":"2018-07-05T07:43:17.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/1【Object类、常用API】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/1【Object类、常用API】/","excerpt":"","text":"1【Object类、常用API】主要内容 Object类 Date类 DateFormat类 Calendar类 System类 StringBuilder类 包装类 教学目标 能够说出Object类的特点 能够重写Object类的toString方法 能够重写Object类的equals方法 能够使用日期类输出当前日期 能够使用将日期格式化为字符串的方法 能够使用将字符串转换成日期的方法 能够使用System类的数组复制方法 能够使用System类获取当前毫秒时刻值 能够说出使用StringBuilder类可以解决的问题 能够使用StringBuilder进行字符串拼接操作 能够说出8种基本类型对应的包装类名称 能够说出自动装箱、自动拆箱的概念 能够将字符串转换为对应的基本类型 能够将基本类型转换为对应的字符串 第一章 Object类1.1 概述java.lang.Object类是Java语言中的根类，即所有类的父类。它中描述的所有方法子类都可以使用。在对象实例化的时候，最终找的父类就是Object。 如果一个类没有特别指定父类， 那么默认则继承自Object类。例如： 123public class MyClass /*extends Object*/ &#123; // ...&#125; 根据JDK源代码及Object类的API文档，Object类当中包含的方法有11个。今天我们主要学习其中的2个： public String toString()：返回该对象的字符串表示。 public boolean equals(Object obj)：指示其他某个对象是否与此对象“相等”。 1.2 toString方法方法摘要 public String toString()：返回该对象的字符串表示。 toString方法返回该对象的字符串表示，其实该字符串内容就是对象的类型+@+内存地址值。 由于toString方法返回的结果是内存地址，而在开发中，经常需要按照对象的属性得到相应的字符串表现形式，因此也需要重写它。 覆盖重写如果不希望使用toString方法的默认行为，则可以对它进行覆盖重写。例如自定义的Person类： 1234567891011public class Person &#123; private String name; private int age; @Override public String toString() &#123; return \"Person&#123;\" + \"name='\" + name + '\\'' + \", age=\" + age + '&#125;'; &#125; // 省略构造器与Getter Setter&#125; 在IntelliJ IDEA中，可以点击Code菜单中的Generate...，也可以使用快捷键alt+insert，点击toString()选项。选择需要包含的成员变量并确定。如下图所示： toString方法的自动重写 小贴士： 在我们直接使用输出语句输出对象名的时候,其实通过该对象调用了其toString()方法。 1.3 equals方法方法摘要 public boolean equals(Object obj)：指示其他某个对象是否与此对象“相等”。 调用成员方法equals并指定参数为另一个对象，则可以判断这两个对象是否是相同的。这里的“相同”有默认和自定义两种方式。 默认地址比较如果没有覆盖重写equals方法，那么Object类中默认进行==运算符的对象地址比较，只要不是同一个对象，结果必然为false。 对象内容比较如果希望进行对象的内容比较，即所有或指定的部分成员变量相同就判定两个对象相同，则可以覆盖重写equals方法。例如： 1234567891011121314151617181920import java.util.Objects;public class Person &#123; private String name; private int age; @Override public boolean equals(Object o) &#123; // 如果对象地址一样，则认为相同 if (this == o) return true; // 如果参数为空，或者类型信息不一样，则认为不同 if (o == null || getClass() != o.getClass()) return false; // 转换为当前类型 Person person = (Person) o; // 要求基本类型相等，并且将引用类型交给java.util.Objects类的equals静态方法取用结果 return age == person.age &amp;&amp; Objects.equals(name, person.name); &#125;&#125; 这段代码充分考虑了对象为空、类型一致等问题，但方法内容并不唯一。大多数IDE都可以自动生成equals方法的代码内容。在IntelliJ IDEA中，可以使用Code菜单中的Generate…选项，也可以使用快捷键alt+insert，并选择equals() and hashCode()进行自动代码生成。如下图所示： tips：Object类当中的hashCode等其他方法，今后学习。 1.4 Objects类在刚才IDEA自动重写equals代码中，使用到了java.util.Objects类，那么这个类是什么呢？ 在JDK7添加了一个Objects工具类，它提供了一些方法来操作对象，它由一些静态的实用方法组成，这些方法是null-save（空指针安全的）或null-tolerant（容忍空指针的），用于计算对象的hashcode、返回对象的字符串表示形式、比较两个对象。 在比较两个对象的时候，Object的equals方法容易抛出空指针异常，而Objects类中的equals方法就优化了这个问题。方法如下： public static boolean equals(Object a, Object b):判断两个对象是否相等。 我们可以查看一下源码，学习一下： 123public static boolean equals(Object a, Object b) &#123; return (a == b) || (a != null &amp;&amp; a.equals(b)); &#125; 第二章 日期时间类2.1 Date类概述java.util.Date类 表示特定的瞬间，精确到毫秒。 继续查阅Date类的描述，发现Date拥有多个构造函数，只是部分已经过时，但是其中有未过时的构造函数可以把毫秒值转成日期对象。 public Date()：分配Date对象并初始化此对象，以表示分配它的时间（精确到毫秒）。 public Date(long date)：分配Date对象并初始化此对象，以表示自从标准基准时间（称为“历元（epoch）”，即1970年1月1日00:00:00 GMT）以来的指定毫秒数。 tips: 由于我们处于东八区，所以我们的基准时间为1970年1月1日8时0分0秒。 简单来说：使用无参构造，可以自动设置当前系统时间的毫秒时刻；指定long类型的构造参数，可以自定义毫秒时刻。例如： 12345678910import java.util.Date;public class Demo01Date &#123; public static void main(String[] args) &#123; // 创建日期对象，把当前的时间 System.out.println(new Date()); // Tue Jan 16 14:37:35 CST 2018 // 创建日期对象，把当前的毫秒值转成日期对象 System.out.println(new Date(0L)); // Thu Jan 01 08:00:00 CST 1970 &#125;&#125; tips:在使用println方法时，会自动调用Date类中的toString方法。Date类对Object类中的toString方法进行了覆盖重写，所以结果为指定格式的字符串。 常用方法Date类中的多数方法已经过时，常用的方法有： public long getTime() 把日期对象转换成对应的时间毫秒值。 2.2 DateFormat类java.text.DateFormat 是日期/时间格式化子类的抽象类，我们通过这个类可以帮我们完成日期和文本之间的转换,也就是可以在Date对象与String对象之间进行来回转换。 格式化：按照指定的格式，从Date对象转换为String对象。 解析：按照指定的格式，从String对象转换为Date对象。 构造方法由于DateFormat为抽象类，不能直接使用，所以需要常用的子类java.text.SimpleDateFormat。这个类需要一个模式（格式）来指定格式化或解析的标准。构造方法为： public SimpleDateFormat(String pattern)：用给定的模式和默认语言环境的日期格式符号构造SimpleDateFormat。 参数pattern是一个字符串，代表日期时间的自定义格式。 格式规则常用的格式规则为： 标识字母（区分大小写） 含义 y 年 M 月 d 日 H 时 m 分 s 秒 备注：更详细的格式规则，可以参考SimpleDateFormat类的API文档。 创建SimpleDateFormat对象的代码如： 123456789import java.text.DateFormat;import java.text.SimpleDateFormat;public class Demo02SimpleDateFormat &#123; public static void main(String[] args) &#123; // 对应的日期格式如：2018-01-16 15:06:38 DateFormat format = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); &#125; &#125; 常用方法DateFormat类的常用方法有： public String format(Date date)：将Date对象格式化为字符串。 public Date parse(String source)：将字符串解析为Date对象。 format方法使用format方法的代码为： 123456789101112131415import java.text.DateFormat;import java.text.SimpleDateFormat;import java.util.Date;/* 把Date对象转换成String*/public class Demo03DateFormatMethod &#123; public static void main(String[] args) &#123; Date date = new Date(); // 创建日期格式化对象,在获取格式化对象时可以指定风格 DateFormat df = new SimpleDateFormat(\"yyyy年MM月dd日\"); String str = df.format(date); System.out.println(str); // 2008年1月23日 &#125;&#125; parse方法使用parse方法的代码为： 123456789101112131415import java.text.DateFormat;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;/* 把String转换成Date对象*/public class Demo04DateFormatMethod &#123; public static void main(String[] args) throws ParseException &#123; DateFormat df = new SimpleDateFormat(\"yyyy年MM月dd日\"); String str = \"2018年12月11日\"; Date date = df.parse(str); System.out.println(date); // Tue Dec 11 00:00:00 CST 2018 &#125;&#125; 2.3 练习请使用日期时间相关的API，计算出一个人已经出生了多少天。 思路： 1.获取当前时间对应的毫秒值 2.获取自己出生日期对应的毫秒值 3.两个时间相减（当前时间– 出生日期） 代码实现： 123456789101112131415161718192021public static void function() throws Exception &#123; System.out.println(\"请输入出生日期 格式 YYYY-MM-dd\"); // 获取出生日期,键盘输入 String birthdayString = new Scanner(System.in).next(); // 将字符串日期,转成Date对象 // 创建SimpleDateFormat对象,写日期模式 SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd\"); // 调用方法parse,字符串转成日期对象 Date birthdayDate = sdf.parse(birthdayString); // 获取今天的日期对象 Date todayDate = new Date(); // 将两个日期转成毫秒值,Date类的方法getTime long birthdaySecond = birthdayDate.getTime(); long todaySecond = todayDate.getTime(); long secone = todaySecond-birthdaySecond; if (secone &lt; 0)&#123; System.out.println(\"还没出生呢\"); &#125; else &#123; System.out.println(secone/1000/60/60/24); &#125;&#125; 2.4 Calendar类概念日历我们都见过 java.util.Calendar是日历类，在Date后出现，替换掉了许多Date的方法。该类将所有可能用到的时间信息封装为静态成员变量，方便获取。日历类就是方便获取各个时间属性的。 获取方式Calendar为抽象类，由于语言敏感性，Calendar类在创建对象时并非直接创建，而是通过静态方法创建，返回子类对象，如下： Calendar静态方法 public static Calendar getInstance()：使用默认时区和语言环境获得一个日历 例如： 1234567import java.util.Calendar;public class Demo06CalendarInit &#123; public static void main(String[] args) &#123; Calendar cal = Calendar.getInstance(); &#125; &#125; 常用方法根据Calendar类的API文档，常用方法有： public int get(int field)：返回给定日历字段的值。 public void set(int field, int value)：将给定的日历字段设置为给定值。 public abstract void add(int field, int amount)：根据日历的规则，为给定的日历字段添加或减去指定的时间量。 public Date getTime()：返回一个表示此Calendar时间值（从历元到现在的毫秒偏移量）的Date对象。 Calendar类中提供很多成员常量，代表给定的日历字段： 字段值 含义 YEAR 年 MONTH 月（从0开始，可以+1使用） DAY_OF_MONTH 月中的天（几号） HOUR 时（12小时制） HOUR_OF_DAY 时（24小时制） MINUTE 分 SECOND 秒 DAY_OF_WEEK 周中的天（周几，周日为1，可以-1使用） get/set方法get方法用来获取指定字段的值，set方法用来设置指定字段的值，代码使用演示： 123456789101112131415import java.util.Calendar;public class CalendarUtil &#123; public static void main(String[] args) &#123; // 创建Calendar对象 Calendar cal = Calendar.getInstance(); // 设置年 int year = cal.get(Calendar.YEAR); // 设置月 int month = cal.get(Calendar.MONTH) + 1; // 设置日 int dayOfMonth = cal.get(Calendar.DAY_OF_MONTH); System.out.print(year + \"年\" + month + \"月\" + dayOfMonth + \"日\"); &#125; &#125; 123456789import java.util.Calendar;public class Demo07CalendarMethod &#123; public static void main(String[] args) &#123; Calendar cal = Calendar.getInstance(); cal.set(Calendar.YEAR, 2020); System.out.print(year + \"年\" + month + \"月\" + dayOfMonth + \"日\"); // 2020年1月17日 &#125;&#125; add方法add方法可以对指定日历字段的值进行加减操作，如果第二个参数为正数则加上偏移量，如果为负数则减去偏移量。代码如： 123456789101112import java.util.Calendar;public class Demo08CalendarMethod &#123; public static void main(String[] args) &#123; Calendar cal = Calendar.getInstance(); System.out.print(year + \"年\" + month + \"月\" + dayOfMonth + \"日\"); // 2018年1月17日 // 使用add方法 cal.add(Calendar.DAY_OF_MONTH, 2); // 加2天 cal.add(Calendar.YEAR, -3); // 减3年 System.out.print(year + \"年\" + month + \"月\" + dayOfMonth + \"日\"); // 2015年1月18日; &#125;&#125; getTime方法Calendar中的getTime方法并不是获取毫秒时刻，而是拿到对应的Date对象。 12345678910import java.util.Calendar;import java.util.Date;public class Demo09CalendarMethod &#123; public static void main(String[] args) &#123; Calendar cal = Calendar.getInstance(); Date date = cal.getTime(); System.out.println(date); // Tue Jan 16 16:03:09 CST 2018 &#125;&#125; 小贴士： ​ 西方星期的开始为周日，中国为周一。 ​ 在Calendar类中，月份的表示是以0-11代表1-12月。 ​ 日期是有大小关系的，时间靠后，时间越大。 第三章 System类java.lang.System类中提供了大量的静态方法，可以获取与系统相关的信息或系统级操作，在System类的API文档中，常用的方法有： public static long currentTimeMillis()：返回以毫秒为单位的当前时间。 public static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length)：将数组中指定的数据拷贝到另一个数组中。 3.1 currentTimeMillis方法实际上，currentTimeMillis方法就是 获取当前系统时间与1970年01月01日00:00点之间的毫秒差值 12345678import java.util.Date;public class SystemDemo &#123; public static void main(String[] args) &#123; //获取当前时间毫秒值 System.out.println(System.currentTimeMillis()); // 1516090531144 &#125;&#125; 练习验证for循环打印数字1-9999所需要使用的时间（毫秒） 12345678910public class SystemTest1 &#123; public static void main(String[] args) &#123; long start = System.currentTimeMillis(); for (int i = 0; i &lt; 10000; i++) &#123; System.out.println(i); &#125; long end = System.currentTimeMillis(); System.out.println(\"共耗时毫秒：\" + (end - start)); &#125;&#125; 3.2 arraycopy方法 public static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length)：将数组中指定的数据拷贝到另一个数组中。 数组的拷贝动作是系统级的，性能很高。System.arraycopy方法具有5个参数，含义分别为： 参数序号 参数名称 参数类型 参数含义 1 src Object 源数组 2 srcPos int 源数组索引起始位置 3 dest Object 目标数组 4 destPos int 目标数组索引起始位置 5 length int 复制元素个数 练习将src数组中前3个元素，复制到dest数组的前3个位置上复制元素前：src数组元素[1,2,3,4,5]，dest数组元素[6,7,8,9,10]复制元素后：src数组元素[1,2,3,4,5]，dest数组元素[1,2,3,9,10] 12345678910111213import java.util.Arrays;public class Demo11SystemArrayCopy &#123; public static void main(String[] args) &#123; int[] src = new int[]&#123;1,2,3,4,5&#125;; int[] dest = new int[]&#123;6,7,8,9,10&#125;; System.arraycopy( src, 0, dest, 0, 3); /*代码运行后：两个数组中的元素发生了变化 src数组元素[1,2,3,4,5] dest数组元素[1,2,3,9,10] */ &#125;&#125; 第四章 StringBuilder类4.1 字符串拼接问题由于String类的对象内容不可改变，所以每当进行字符串拼接时，总是会在内存中创建一个新的对象。例如： 1234567public class StringDemo &#123; public static void main(String[] args) &#123; String s = \"Hello\"; s += \"World\"; System.out.println(s); &#125;&#125; 在API中对String类有这样的描述：字符串是常量，它们的值在创建后不能被更改。 根据这句话分析我们的代码，其实总共产生了三个字符串，即&quot;Hello&quot;、&quot;World&quot;和&quot;HelloWorld&quot;。引用变量s首先指向Hello对象，最终指向拼接出来的新字符串对象，即HelloWorld 。 由此可知，如果对字符串进行拼接操作，每次拼接，都会构建一个新的String对象，既耗时，又浪费空间。为了解决这一问题，可以使用java.lang.StringBuilder类。 4.2 StringBuilder概述查阅java.lang.StringBuilder的API，StringBuilder又称为可变字符序列，它是一个类似于 String 的字符串缓冲区，通过某些方法调用可以改变该序列的长度和内容。 原来StringBuilder是个字符串的缓冲区，即它是一个容器，容器中可以装很多字符串。并且能够对其中的字符串进行各种操作。 它的内部拥有一个数组用来存放字符串内容，进行字符串拼接时，直接在数组中加入新内容。StringBuilder会自动维护数组的扩容。原理如下图所示：(默认16字符空间，超过自动扩充) 06-StringBuilder的原理 4.3 构造方法根据StringBuilder的API文档，常用构造方法有2个： public StringBuilder()：构造一个空的StringBuilder容器。 public StringBuilder(String str)：构造一个StringBuilder容器，并将字符串添加进去。 123456789public class StringBuilderDemo &#123; public static void main(String[] args) &#123; StringBuilder sb1 = new StringBuilder(); System.out.println(sb1); // (空白) // 使用带参构造 StringBuilder sb2 = new StringBuilder(\"itcast\"); System.out.println(sb2); // itcast &#125;&#125; 4.4 常用方法StringBuilder常用的方法有2个： public StringBuilder append(...)：添加任意类型数据的字符串形式，并返回当前对象自身。 public String toString()：将当前StringBuilder对象转换为String对象。 append方法append方法具有多种重载形式，可以接收任意类型的参数。任何数据作为参数都会将对应的字符串内容添加到StringBuilder中。例如： 12345678910111213141516171819202122public class Demo02StringBuilder &#123; public static void main(String[] args) &#123; //创建对象 StringBuilder builder = new StringBuilder(); //public StringBuilder append(任意类型) StringBuilder builder2 = builder.append(\"hello\"); //对比一下 System.out.println(\"builder:\"+builder); System.out.println(\"builder2:\"+builder2); System.out.println(builder == builder2); //true // 可以添加 任何类型 builder.append(\"hello\"); builder.append(\"world\"); builder.append(true); builder.append(100); // 在我们开发中，会遇到调用一个方法后，返回一个对象的情况。然后使用返回的对象继续调用方法。 // 这种时候，我们就可以把代码现在一起，如append方法一样，代码如下 //链式编程 builder.append(\"hello\").append(\"world\").append(true).append(100); System.out.println(\"builder:\"+builder); &#125;&#125; 备注：StringBuilder已经覆盖重写了Object当中的toString方法。 toString方法通过toString方法，StringBuilder对象将会转换为不可变的String对象。如： 123456789public class Demo16StringBuilder &#123; public static void main(String[] args) &#123; // 链式创建 StringBuilder sb = new StringBuilder(\"Hello\").append(\"World\").append(\"Java\"); // 调用方法 String str = sb.toString(); System.out.println(str); // HelloWorldJava &#125;&#125; 第五章 包装类5.1 概述Java提供了两个类型系统，基本类型与引用类型，使用基本类型在于效率，然而很多情况，会创建对象使用，因为对象可以做更多的功能，如果想要我们的基本类型像对象一样操作，就可以使用基本类型对应的包装类，如下： 基本类型 对应的包装类（位于java.lang包中） byte Byte short Short int Integer long Long float Float double Double char Character boolean Boolean 5.2 装箱与拆箱基本类型与对应的包装类对象之间，来回转换的过程称为”装箱“与”拆箱“： 装箱：从基本类型转换为对应的包装类对象。 拆箱：从包装类对象转换为对应的基本类型。 用Integer与 int为例：（看懂代码即可） 基本数值—-&gt;包装对象 12Integer i = new Integer(4);//使用构造函数函数Integer iii = Integer.valueOf(4);//使用包装类中的valueOf方法 包装对象—-&gt;基本数值 1int num = i.intValue(); 5.3自动装箱与自动拆箱由于我们经常要做基本类型与包装类之间的转换，从Java 5（JDK 1.5）开始，基本类型与包装类的装箱、拆箱动作可以自动完成。例如： 123Integer i = 4;//自动装箱。相当于Integer i = Integer.valueOf(4);i = i + 5;//等号右边：将i对象转成基本数值(自动拆箱) i.intValue() + 5;//加法运算完成后，再次装箱，把基本数值转成对象。 5.3 基本类型与字符串之间的转换基本类型转换为String 基本类型转换String总共有三种方式，查看课后资料可以得知，这里只讲最简单的一种方式： 1基本类型直接与””相连接即可；如：34+&quot;&quot; String转换成对应的基本类型 除了Character类之外，其他所有包装类都具有parseXxx静态方法可以将字符串参数转换为对应的基本类型： public static byte parseByte(String s)：将字符串参数转换为对应的byte基本类型。 public static short parseShort(String s)：将字符串参数转换为对应的short基本类型。 public static int parseInt(String s)：将字符串参数转换为对应的int基本类型。 public static long parseLong(String s)：将字符串参数转换为对应的long基本类型。 public static float parseFloat(String s)：将字符串参数转换为对应的float基本类型。 public static double parseDouble(String s)：将字符串参数转换为对应的double基本类型。 public static boolean parseBoolean(String s)：将字符串参数转换为对应的boolean基本类型。 代码使用（仅以Integer类的静态方法parseXxx为例）如： 12345public class Demo18WrapperParse &#123; public static void main(String[] args) &#123; int num = Integer.parseInt(\"100\"); &#125;&#125; 注意:如果字符串参数的内容无法正确转换为对应的基本类型，则会抛出java.lang.NumberFormatException异常。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/05 【异常、线程】","date":"2018-06-20T07:44:02.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/05 【异常、线程】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/05 【异常、线程】/","excerpt":"","text":"day05 【异常、线程】主要内容 异常、线程 教学目标 能够辨别程序中异常和错误的区别 说出异常的分类 说出虚拟机处理异常的方式 列举出常见的三个运行期异常 能够使用try…catch关键字处理异常 能够使用throws关键字处理异常 能够自定义异常类 能够处理自定义异常类 说出进程的概念 说出线程的概念 能够理解并发与并行的区别 能够开启新线程 第一章 异常1.1 异常概念异常，就是不正常的意思。在生活中:医生说,你的身体某个部位有异常,该部位和正常相比有点不同,该部位的功能将受影响.在程序中的意思就是： 异常 ：指的是程序在执行过程中，出现的非正常的情况，最终会导致JVM的非正常停止。 在Java等面向对象的编程语言中，异常本身是一个类，产生异常就是创建异常对象并抛出了一个异常对象。Java处理异常的方式是中断处理。 异常指的并不是语法错误,语法错了,编译不通过,不会产生字节码文件,根本不能运行. 1.2 异常体系异常机制其实是帮助我们找到程序中的问题，异常的根类是java.lang.Throwable，其下有两个子类：java.lang.Error与java.lang.Exception，平常所说的异常指java.lang.Exception。 Throwable体系： Error:严重错误Error，无法通过处理的错误，只能事先避免，好比绝症。 Exception:表示异常，异常产生后程序员可以通过代码的方式纠正，使程序继续运行，是必须要处理的。好比感冒、阑尾炎。 Throwable中的常用方法： public void printStackTrace():打印异常的详细信息。 包含了异常的类型,异常的原因,还包括异常出现的位置,在开发和调试阶段,都得使用printStackTrace。 public String getMessage():获取发生异常的原因。 提示给用户的时候,就提示错误原因。 public String toString():获取异常的类型和异常描述信息(不用)。 出现异常,不要紧张,把异常的简单类名,拷贝到API中去查。 1.3 异常分类我们平常说的异常就是指Exception，因为这类异常一旦出现，我们就要对代码进行更正，修复程序。 异常(Exception)的分类:根据在编译时期还是运行时期去检查异常? 编译时期异常:checked异常。在编译时期,就会检查,如果没有处理异常,则编译失败。(如日期格式化异常) 运行时期异常:runtime异常。在运行时期,检查异常.在编译时期,运行异常不会被编译器检测(不报错)。(如数学异常) ​ 1.4 异常的产生过程解析先运行下面的程序，程序会产生一个数组索引越界异常ArrayIndexOfBoundsException。我们通过图解来解析下异常产生的过程。 工具类 1234567public class ArrayTools &#123; // 对给定的数组通过给定的角标获取元素。 public static int getElement(int[] arr, int index) &#123; int element = arr[index]; return element; &#125;&#125; 测试类 12345678public class ExceptionDemo &#123; public static void main(String[] args) &#123; int[] arr = &#123; 34, 12, 67 &#125;; intnum = ArrayTools.getElement(arr, 4) System.out.println(\"num=\" + num); System.out.println(\"over\"); &#125;&#125; 上述程序执行过程图解： 第二章 异常的处理Java异常处理的五个关键字：try、catch、finally、throw、throws 2.1 抛出异常throw在编写程序时，我们必须要考虑程序出现问题的情况。比如，在定义方法时，方法需要接受参数。那么，当调用方法使用接受到的参数时，首先需要先对参数数据进行合法的判断，数据若不合法，就应该告诉调用者，传递合法的数据进来。这时需要使用抛出异常的方式来告诉调用者。 在java中，提供了一个throw关键字，它用来抛出一个指定的异常对象。那么，抛出一个异常具体如何操作呢？ 创建一个异常对象。封装一些提示信息(信息可以自己编写)。 需要将这个异常对象告知给调用者。怎么告知呢？怎么将这个异常对象传递到调用者处呢？通过关键字throw就可以完成。throw 异常对象。 throw用在方法内，用来抛出一个异常对象，将这个异常对象传递到调用者处，并结束当前方法的执行。 使用格式： 1throw new 异常类名(参数); 例如： 123throw new NullPointerException(\"要访问的arr数组不存在\");throw new ArrayIndexOutOfBoundsException(\"该索引在数组中不存在，已超出范围\"); 学习完抛出异常的格式后，我们通过下面程序演示下throw的使用。 123456789101112131415161718192021222324252627public class ThrowDemo &#123; public static void main(String[] args) &#123; //创建一个数组 int[] arr = &#123;2,4,52,2&#125;; //根据索引找对应的元素 int index = 4; int element = getElement(arr, index); System.out.println(element); System.out.println(\"over\"); &#125; /* * 根据 索引找到数组中对应的元素 */ public static int getElement(int[] arr,int index)&#123; //判断 索引是否越界 if(index&lt;0 || index&gt;arr.length-1)&#123; /* 判断条件如果满足，当执行完throw抛出异常对象后，方法已经无法继续运算。 这时就会结束当前方法的执行，并将异常告知给调用者。这时就需要通过异常来解决。 */ throw new ArrayIndexOutOfBoundsException(\"哥们，角标越界了~~~\"); &#125; int element = arr[index]; return element; &#125;&#125; 注意：如果产生了问题，我们就会throw将问题描述类即异常进行抛出，也就是将问题返回给该方法的调用者。 那么对于调用者来说，该怎么处理呢？一种是进行捕获处理，另一种就是继续讲问题声明出去，使用throws声明处理。 2.2 Objects非空判断还记得我们学习过一个类Objects吗，曾经提到过它由一些静态的实用方法组成，这些方法是null-save（空指针安全的）或null-tolerant（容忍空指针的），那么在它的源码中，对对象为null的值进行了抛出异常操作。 public static &lt;T&gt; T requireNonNull(T obj):查看指定引用对象不是null。 查看源码发现这里对为null的进行了抛出异常操作： 12345public static &lt;T&gt; T requireNonNull(T obj) &#123; if (obj == null) throw new NullPointerException(); return obj;&#125; 2.3 声明异常throws声明异常：将问题标识出来，报告给调用者。如果方法内通过throw抛出了编译时异常，而没有捕获处理（稍后讲解该方式），那么必须通过throws进行声明，让调用者去处理。 关键字throws运用于方法声明之上,用于表示当前方法不处理异常,而是提醒该方法的调用者来处理异常(抛出异常). 声明异常格式： 1修饰符 返回值类型 方法名(参数) throws 异常类名1,异常类名2…&#123; &#125; 声明异常的代码演示： 12345678910111213public class ThrowsDemo &#123; public static void main(String[] args) throws FileNotFoundException &#123; read(\"a.txt\"); &#125; // 如果定义功能时有问题发生需要报告给调用者。可以通过在方法上使用throws关键字进行声明 public static void read(String path) throws FileNotFoundException &#123; if (!path.equals(\"a.txt\")) &#123;//如果不是 a.txt这个文件 // 我假设 如果不是 a.txt 认为 该文件不存在 是一个错误 也就是异常 throw throw new FileNotFoundException(\"文件不存在\"); &#125; &#125;&#125; throws用于进行异常类的声明，若该方法可能有多种异常情况产生，那么在throws后面可以写多个异常类，用逗号隔开。 123456789101112131415public class ThrowsDemo2 &#123; public static void main(String[] args) throws IOException &#123; read(\"a.txt\"); &#125; public static void read(String path)throws FileNotFoundException, IOException &#123; if (!path.equals(\"a.txt\")) &#123;//如果不是 a.txt这个文件 // 我假设 如果不是 a.txt 认为 该文件不存在 是一个错误 也就是异常 throw throw new FileNotFoundException(\"文件不存在\"); &#125; if (!path.equals(\"b.txt\")) &#123; throw new IOException(); &#125; &#125;&#125; 2.4 捕获异常try…catch如果异常出现的话,会立刻终止程序,所以我们得处理异常: 该方法不处理,而是声明抛出,由该方法的调用者来处理(throws)。 在方法中使用try-catch的语句块来处理异常。 try-catch的方式就是捕获异常。 捕获异常：Java中对异常有针对性的语句进行捕获，可以对出现的异常进行指定方式的处理。 捕获异常语法如下： 123456try&#123; 编写可能会出现异常的代码&#125;catch(异常类型 e)&#123; 处理异常的代码 //记录日志/打印异常信息/继续抛出异常&#125; try：该代码块中编写可能产生异常的代码。 catch：用来进行某种异常的捕获，实现对捕获到的异常进行处理。 注意:try和catch都不能单独使用,必须连用。 演示如下： 123456789101112131415161718192021public class TryCatchDemo &#123; public static void main(String[] args) &#123; try &#123;// 当产生异常时，必须有处理方式。要么捕获，要么声明。 read(\"b.txt\"); &#125; catch (FileNotFoundException e) &#123;// 括号中需要定义什么呢？ //try中抛出的是什么异常，在括号中就定义什么异常类型 System.out.println(e); &#125; System.out.println(\"over\"); &#125; /* * * 我们 当前的这个方法中 有异常 有编译期异常 */ public static void read(String path) throws FileNotFoundException &#123; if (!path.equals(\"a.txt\")) &#123;//如果不是 a.txt这个文件 // 我假设 如果不是 a.txt 认为 该文件不存在 是一个错误 也就是异常 throw throw new FileNotFoundException(\"文件不存在\"); &#125; &#125;&#125; 如何获取异常信息： Throwable类中定义了一些查看方法: public String getMessage():获取异常的描述信息,原因(提示给用户的时候,就提示错误原因。 public String toString():获取异常的类型和异常描述信息(不用)。 public void printStackTrace():打印异常的跟踪栈信息并输出到控制台。 ​ 包含了异常的类型,异常的原因,还包括异常出现的位置,在开发和调试阶段,都得使用printStackTrace。 在开发中呢也可以在catch将编译期异常转换成运行期异常处理。 多个异常使用捕获又该如何处理呢？ 多个异常分别处理。 多个异常一次捕获，多次处理。 多个异常一次捕获一次处理。 一般我们是使用一次捕获多次处理方式，格式如下： 123456789try&#123; 编写可能会出现异常的代码&#125;catch(异常类型A e)&#123; 当try中出现A类型异常,就用该catch来捕获. 处理异常的代码 //记录日志/打印异常信息/继续抛出异常&#125;catch(异常类型B e)&#123; 当try中出现B类型异常,就用该catch来捕获. 处理异常的代码 //记录日志/打印异常信息/继续抛出异常&#125; 注意:这种异常处理方式，要求多个catch中的异常不能相同，并且若catch中的多个异常之间有子父类异常的关系，那么子类异常要求在上面的catch处理，父类异常在下面的catch处理。 2.4 finally 代码块finally：有一些特定的代码无论异常是否发生，都需要执行。另外，因为异常会引发程序跳转，导致有些语句执行不到。而finally就是解决这个问题的，在finally代码块中存放的代码都是一定会被执行的。 什么时候的代码必须最终执行？ 当我们在try语句块中打开了一些物理资源(磁盘文件/网络连接/数据库连接等),我们都得在使用完之后,最终关闭打开的资源。 finally的语法: try…catch….finally:自身需要处理异常,最终还得关闭资源。 注意:finally不能单独使用。 比如在我们之后学习的IO流中，当打开了一个关联文件的资源，最后程序不管结果如何，都需要把这个资源关闭掉。 finally代码参考如下： 1234567891011121314151617181920212223public class TryCatchDemo4 &#123; public static void main(String[] args) &#123; try &#123; read(\"a.txt\"); &#125; catch (FileNotFoundException e) &#123; //抓取到的是编译期异常 抛出去的是运行期 throw new RuntimeException(e); &#125; finally &#123; System.out.println(\"不管程序怎样，这里都将会被执行。\"); &#125; System.out.println(\"over\"); &#125; /* * * 我们 当前的这个方法中 有异常 有编译期异常 */ public static void read(String path) throws FileNotFoundException &#123; if (!path.equals(\"a.txt\")) &#123;//如果不是 a.txt这个文件 // 我假设 如果不是 a.txt 认为 该文件不存在 是一个错误 也就是异常 throw throw new FileNotFoundException(\"文件不存在\"); &#125; &#125;&#125; 当只有在try或者catch中调用退出JVM的相关方法,此时finally才不会执行,否则finally永远会执行。 2.5 异常注意事项 运行时异常被抛出可以不处理。即不捕获也不声明抛出。 如果父类抛出了多个异常,子类覆盖父类方法时,只能抛出相同的异常或者是他的子集。 父类方法没有抛出异常，子类覆盖父类该方法时也不可抛出异常。此时子类产生该异常，只能捕获处理，不能声明抛出 当多异常处理时，捕获处理，前边的类不能是后边类的父类 在try/catch后可以追加finally代码块，其中的代码一定会被执行，通常用于资源回收。 如果finally有return语句,永远返回finally中的结果,避免该情况. 第三章 自定义异常3.1 概述为什么需要自定义异常类: 我们说了Java中不同的异常类,分别表示着某一种具体的异常情况,那么在开发中总是有些异常情况是SUN没有定义好的,此时我们根据自己业务的异常情况来定义异常类。,例如年龄负数问题,考试成绩负数问题。 在上述代码中，发现这些异常都是JDK内部定义好的，但是实际开发中也会出现很多异常,这些异常很可能在JDK中没有定义过,例如年龄负数问题,考试成绩负数问题.那么能不能自己定义异常呢？ 什么是自定义异常类: 在开发中根据自己业务的异常情况来定义异常类. 自定义一个业务逻辑异常: LoginException。一个登陆异常类。 异常类如何定义: 自定义一个编译期异常: 自定义类 并继承于java.lang.Exception。 自定义一个运行时期的异常类:自定义类 并继承于java.lang.RuntimeException。 3.2 自定义异常的练习要求：我们模拟登陆操作，如果用户名已存在，则抛出异常并提示：亲，该用户名已经被注册。 首先定义一个登陆异常类LoginException： 12345678910111213141516// 业务逻辑异常public class LoginException extends Exception &#123; /** * 空参构造 */ public LoginException() &#123; &#125; /** * * @param message 表示异常提示 */ public LoginException(String message) &#123; super(message); &#125;&#125; 模拟登陆操作，使用数组模拟数据库中存储的数据，并提供当前注册账号是否存在方法用于判断。 123456789101112131415161718192021222324252627public class Demo &#123; // 模拟数据库中已存在账号 private static String[] names = &#123;\"bill\",\"hill\",\"jill\"&#125;; public static void main(String[] args) &#123; //调用方法 try&#123; // 可能出现异常的代码 checkUsername(\"nill\"); System.out.println(\"注册成功\");//如果没有异常就是注册成功 &#125;catch(LoginException e)&#123; //处理异常 e.printStackTrace(); &#125; &#125; //判断当前注册账号是否存在 //因为是编译期异常，又想调用者去处理 所以声明该异常 public static boolean checkUsername(String uname) throws LoginException&#123; for (String name : names) &#123; if(name.equals(uname))&#123;//如果名字在这里面 就抛出登陆异常 throw new LoginException(\"亲\"+name+\"已经被注册了！\"); &#125; &#125; return true; &#125;&#125; 第四章 多线程我们在之前，学习的程序在没有跳转语句的前提下，都是由上至下依次执行，那现在想要设计一个程序，边打游戏边听歌，怎么设计？ 要解决上述问题,咱们得使用多进程或者多线程来解决. 4.1 并发与并行 并行：指两个或多个事件在同一时刻发生（同时发生）。 并发：指两个或多个事件在同一个时间段内发生。 在操作系统中，安装了多个程序，并发指的是在一段时间内宏观上有多个程序同时运行，这在单 CPU 系统中，每一时刻只能有一道程序执行，即微观上这些程序是分时的交替运行，只不过是给人的感觉是同时运行，那是因为分时交替运行的时间是非常短的。 而在多个 CPU 系统中，则这些可以并发执行的程序便可以分配到多个处理器上（CPU），实现多任务并行执行，即利用每个处理器来处理一个可以并发执行的程序，这样多个程序便可以同时执行。目前电脑市场上说的多核 CPU，便是多核处理器，核 越多，并行处理的程序越多，能大大的提高电脑运行的效率。 注意：单核处理器的计算机肯定是不能并行的处理多个任务的，只能是多个任务在单个CPU上并发运行。同理,线程也是一样的，从宏观角度上理解线程是并行运行的，但是从微观角度上分析却是串行运行的，即一个线程一个线程的去运行，当系统只有一个CPU时，线程会以某种顺序执行多个线程，我们把这种情况称之为线程调度。 4.2 线程与进程 进程：是指一个内存中运行的应用程序，每个进程都有一个独立的内存空间，一个应用程序可以同时运行多个进程；进程也是程序的一次执行过程，是系统运行程序的基本单位；系统运行一个程序即是一个进程从创建、运行到消亡的过程。 线程：进程内部的一个独立执行单元；一个进程可以同时并发的运行多个线程，可以理解为一个进程便相当于一个单 CPU 操作系统，而线程便是这个系统中运行的多个任务。 我们可以再电脑底部任务栏，右键—–&gt;打开任务管理器,可以查看当前任务的进程和线程： 进程 线程 进程与线程的区别 进程：有独立的内存空间，进程中的数据存放空间（堆空间和栈空间）是独立的，至少有一个线程。 线程：堆空间是共享的，栈空间是独立的，线程消耗的资源比进程小的多。 注意： 因为一个进程中的多个线程是并发运行的，那么从微观角度看也是有先后顺序的，哪个线程执行完全取决于 CPU 的调度，程序员是干涉不了的。而这也就造成的多线程的随机性。 Java 程序的进程里面至少包含两个线程，主进程也就是 main()方法线程，另外一个是垃圾回收机制线程。每当使用 java 命令执行一个类时，实际上都会启动一个 JVM，每一个 JVM 实际上就是在操作系统中启动了一个线程，java 本身具备了垃圾的收集机制，所以在 Java 运行时至少会启动两个线程。 由于创建一个线程的开销比创建一个进程的开销小的多，那么我们在开发多任务运行的时候，通常考虑创建多线程，而不是创建多进程。 线程调度: 计算机通常只有一个CPU时,在任意时刻只能执行一条计算机指令,每一个进程只有获得CPU的使用权才能执行指令。所谓多进程并发运行,从宏观上看,其实是各个进程轮流获得CPU的使用权,分别执行各自的任务。那么,在可运行池中,会有多个线程处于就绪状态等到CPU,JVM就负责了线程的调度。JVM采用的是抢占式调度,没有采用分时调度,因此可以能造成多线程执行结果的的随机性。 4.3 创建线程类Java使用java.lang.Thread类代表线程，所有的线程对象都必须是Thread类或其子类的实例。每个线程的作用是完成一定的任务，实际上就是执行一段程序流即一段顺序执行的代码。Java使用线程执行体来代表这段程序流。Java中通过继承Thread类来创建并启动多线程的步骤如下： 定义Thread类的子类，并重写该类的run()方法，该run()方法的方法体就代表了线程需要完成的任务,因此把run()方法称为线程执行体。 创建Thread子类的实例，即创建了线程对象 调用线程对象的start()方法来启动该线程 代码如下： 测试类： 123456789101112public class Demo01 &#123; public static void main(String[] args) &#123; //创建自定义线程对象 MyThread mt = new MyThread(\"新的线程！\"); //开启新线程 mt.start(); //在主方法中执行for循环 for (int i = 0; i &lt; 10; i++) &#123; System.out.println(\"main线程！\"+i); &#125; &#125;&#125; 自定义线程类： 12345678910111213141516public class MyThread extends Thread &#123; //定义指定线程名称的构造方法 public MyThread(String name) &#123; //调用父类的String参数的构造方法，指定线程的名称 super(name); &#125; /** * 重写run方法，完成该线程执行的逻辑 */ @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.println(getName()+\"：正在执行！\"+i); &#125; &#125;&#125; OK 相信我们都看到多线程的现象了，那么接下来几天我们就进入多线程的世界！ 那么现在有个小问题，请问植物大战僵尸游戏中，是用了多进程设计程序呢，还是多线程？","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/03【接口、多态】","date":"2018-06-20T07:44:02.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/03【接口、多态】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/03【接口、多态】/","excerpt":"","text":"day03【接口、多态】今日内容 接口 三大特征——多态 引用类型转换 教学目标 写出定义接口的格式 写出实现接口的格式 说出接口中成员的特点 能够说出使用多态的前提条件 理解多态的向上转型 理解多态的向下转型 能够完成笔记本电脑案例（方法参数为接口） 第一章 接口1.1 概述接口，是Java语言中一种引用类型，是方法的集合，如果说类的内部封装了成员变量、构造方法和成员方法，那么接口的内部主要就是封装了方法，包含抽象方法（JDK 7及以前），默认方法和静态方法（JDK 8），私有方法（JDK 9）。 接口的定义，它与定义类方式相似，但是使用 interface 关键字。它也会被编译成.class文件，但一定要明确它并不是类，而是另外一种引用数据类型。 引用数据类型：数组，类，接口。 接口的使用，它不能创建对象，但是可以被实现（implements ，类似于被继承）。一个实现接口的类（可以看做是接口的子类），需要实现接口中所有的抽象方法，创建该类对象，就可以调用方法了，否则它必须是一个抽象类。 1.2 定义格式123456public interface 接口名称 &#123; // 抽象方法 // 默认方法 // 静态方法 // 私有方法&#125; 含有抽象方法抽象方法：使用abstract 关键字修饰，可以省略，没有方法体。该方法供子类实现使用。 代码如下： 123public interface InterFaceName &#123; public abstract void method();&#125; 含有默认方法和静态方法默认方法：使用 default 修饰，不可省略，供子类调用或者子类重写。 静态方法：使用 static 修饰，供接口直接调用。 代码如下： 12345678public interface InterFaceName &#123; public default void method() &#123; // 执行语句 &#125; public static void method2() &#123; // 执行语句 &#125;&#125; 含有私有方法和私有静态方法私有方法：使用 private 修饰，供接口中的默认方法或者静态方法调用。 代码如下： 12345public interface InterFaceName &#123; private void method() &#123; // 执行语句 &#125;&#125; 1.3 基本的实现实现的概述类与接口的关系为实现关系，即类实现接口，该类可以称为接口的实现类，也可以称为接口的子类。实现的动作类似继承，格式相仿，只是关键字不同，实现使用 implements关键字。 非抽象子类实现接口： 必须重写接口中所有抽象方法。 继承了接口的默认方法，即可以直接调用，也可以重写。 实现格式： 1234class 类名 implements 接口名 &#123; // 重写接口中抽象方法【必须】 // 重写接口中默认方法【可选】&#125; 抽象方法的使用必须全部实现，代码如下： 定义接口： 12345public interface LiveAble &#123; // 定义抽象方法 public abstract void eat(); public abstract void sleep();&#125; 定义实现类： 1234567891011public class Animal implements LiveAble &#123; @Override public void eat() &#123; System.out.println(\"吃东西\"); &#125; @Override public void sleep() &#123; System.out.println(\"晚上睡\"); &#125;&#125; 定义测试类： 123456789101112public class InterfaceDemo &#123; public static void main(String[] args) &#123; // 创建子类对象 Animal a = new Animal(); // 调用实现后的方法 a.eat(); a.sleep(); &#125;&#125;输出结果：吃东西晚上睡 默认方法的使用可以继承，可以重写，二选一，但是只能通过实现类的对象来调用。 继承默认方法，代码如下： 定义接口： 12345public interface LiveAble &#123; public default void fly()&#123; System.out.println(\"天上飞\"); &#125;&#125; 定义实现类： 123public class Animal implements LiveAble &#123; // 继承，什么都不用写，直接调用&#125; 定义测试类： 12345678910public class InterfaceDemo &#123; public static void main(String[] args) &#123; // 创建子类对象 Animal a = new Animal(); // 调用默认方法 a.fly(); &#125;&#125;输出结果：天上飞 重写默认方法，代码如下： 定义接口： 12345public interface LiveAble &#123; public default void fly()&#123; System.out.println(\"天上飞\"); &#125;&#125; 定义实现类： 123456public class Animal implements LiveAble &#123; @Override public void fly() &#123; System.out.println(\"自由自在的飞\"); &#125;&#125; 定义测试类： 12345678910public class InterfaceDemo &#123; public static void main(String[] args) &#123; // 创建子类对象 Animal a = new Animal(); // 调用重写方法 a.fly(); &#125;&#125;输出结果：自由自在的飞 静态方法的使用静态与.class 文件相关，只能使用接口名调用，不可以通过实现类的类名或者实现类的对象调用，代码如下： 定义接口： 12345public interface LiveAble &#123; public static void run()&#123; System.out.println(\"跑起来~~~\"); &#125;&#125; 定义实现类： 123public class Animal implements LiveAble &#123; // 无法重写静态方法&#125; 定义测试类： 12345678public class InterfaceDemo &#123; public static void main(String[] args) &#123; // Animal.run(); // 【错误】无法继承方法,也无法调用 LiveAble.run(); // &#125;&#125;输出结果：跑起来~~~ 私有方法的使用 私有方法：只有默认方法可以调用。 私有静态方法：默认方法和静态方法可以调用。 如果一个接口中有多个默认方法，并且方法中有重复的内容，那么可以抽取出来，封装到私有方法中，供默认方法去调用。从设计的角度讲，私有的方法是对默认方法和静态方法的辅助。同学们在已学技术的基础上，可以自行测试。 定义接口： 1234567891011121314public interface LiveAble &#123; default void func()&#123; func1(); func2(); &#125; private void func1()&#123; System.out.println(\"跑起来~~~\"); &#125; private void func2()&#123; System.out.println(\"跑起来~~~\"); &#125;&#125; 1.4 接口的多实现之前学过，在继承体系中，一个类只能继承一个父类。而对于接口而言，一个类是可以实现多个接口的，这叫做接口的多实现。并且，一个类能继承一个父类，同时实现多个接口。 实现格式： 1234class 类名 [extends 父类名] implements 接口名1,接口名2,接口名3... &#123; // 重写接口中抽象方法【必须】 // 重写接口中默认方法【不重名时可选】&#125; [ ]： 表示可选操作。 抽象方法接口中，有多个抽象方法时，实现类必须重写所有抽象方法。如果抽象方法有重名的，只需要重写一次。代码如下： 定义多个接口： 123456789interface A &#123; public abstract void showA(); public abstract void show();&#125;interface B &#123; public abstract void showB(); public abstract void show();&#125; 定义实现类： 12345678910111213141516public class C implements A,B&#123; @Override public void showA() &#123; System.out.println(\"showA\"); &#125; @Override public void showB() &#123; System.out.println(\"showB\"); &#125; @Override public void show() &#123; System.out.println(\"show\"); &#125;&#125; 默认方法接口中，有多个默认方法时，实现类都可继承使用。如果默认方法有重名的，必须重写一次。代码如下： 定义多个接口： 123456789interface A &#123; public default void methodA()&#123;&#125; public default void method()&#123;&#125;&#125;interface B &#123; public default void methodB()&#123;&#125; public default void method()&#123;&#125;&#125; 定义实现类： 123456public class C implements A,B&#123; @Override public void method() &#123; System.out.println(\"method\"); &#125;&#125; 静态方法接口中，存在同名的静态方法并不会冲突，原因是只能通过各自接口名访问静态方法。 优先级的问题当一个类，既继承一个父类，又实现若干个接口时，父类中的成员方法与接口中的默认方法重名，子类就近选择执行父类的成员方法。代码如下： 定义接口： 12345interface A &#123; public default void methodA()&#123; System.out.println(\"AAAAAAAAAAAA\"); &#125;&#125; 定义父类： 12345class D &#123; public void methodA()&#123; System.out.println(\"DDDDDDDDDDDD\"); &#125;&#125; 定义子类： 123class C extends D implements A &#123; // 未重写methodA方法&#125; 定义测试类： 12345678public class Test &#123; public static void main(String[] args) &#123; C c = new C(); c.methodA(); &#125;&#125;输出结果:DDDDDDDDDDDD 1.5 接口的多继承【了解】一个接口能继承另一个或者多个接口，这和类之间的继承比较相似。接口的继承使用 extends 关键字，子接口继承父接口的方法。如果父接口中的默认方法有重名的，那么子接口需要重写一次。代码如下： 定义父接口： 1234567891011interface A &#123; public default void method()&#123; System.out.println(\"AAAAAAAAAAAAAAAAAAA\"); &#125;&#125;interface B &#123; public default void method()&#123; System.out.println(\"BBBBBBBBBBBBBBBBBBB\"); &#125;&#125; 定义子接口： 123456interface D extends A,B&#123; @Override public default void method() &#123; System.out.println(\"DDDDDDDDDDDDDD\"); &#125;&#125; 小贴士： 子接口重写默认方法时，default关键字可以保留。 子类重写默认方法时，default关键字不可以保留。 1.6 其他成员特点 接口中，无法定义成员变量，但是可以定义常量，其值不可以改变，默认使用public static final修饰。 接口中，没有构造方法，不能创建对象。 接口中，没有静态代码块。 第二章 多态2.1 概述引入多态是继封装、继承之后，面向对象的第三大特性。 生活中，比如跑的动作，小猫、小狗和大象，跑起来是不一样的。再比如飞的动作，昆虫、鸟类和飞机，飞起来也是不一样的。可见，同一行为，通过不同的事物，可以体现出来的不同的形态。多态，描述的就是这样的状态。 定义 多态： 是指同一行为，具有多个不同表现形式。 前提【重点】 继承或者实现【二选一】 方法的重写【意义体现：不重写，无意义】 父类引用指向子类对象【格式体现】 2.2 多态的体现多态体现的格式： 12父类类型 变量名 = new 子类对象；变量名.方法名(); 父类类型：指子类对象继承的父类类型，或者实现的父接口类型。 代码如下： 12Fu f = new Zi();f.method(); 当使用多态方式调用方法时，首先检查父类中是否有该方法，如果没有，则编译错误；如果有，执行的是子类重写后方法。 代码如下： 定义父类： 123public abstract class Animal &#123; public abstract void eat(); &#125; 定义子类： 1234567891011class Cat extends Animal &#123; public void eat() &#123; System.out.println(\"吃鱼\"); &#125; &#125; class Dog extends Animal &#123; public void eat() &#123; System.out.println(\"吃骨头\"); &#125; &#125; 定义测试类： 12345678910111213public class Test &#123; public static void main(String[] args) &#123; // 多态形式，创建对象 Animal a1 = new Cat(); // 调用的是 Cat 的 eat a1.eat(); // 多态形式，创建对象 Animal a2 = new Dog(); // 调用的是 Dog 的 eat a2.eat(); &#125; &#125; 2.3 多态的好处实际开发的过程中，父类类型作为方法形式参数，传递子类对象给方法，进行方法的调用，更能体现出多态的扩展性与便利。代码如下： 定义父类： 123public abstract class Animal &#123; public abstract void eat(); &#125; 定义子类： 1234567891011class Cat extends Animal &#123; public void eat() &#123; System.out.println(\"吃鱼\"); &#125; &#125; class Dog extends Animal &#123; public void eat() &#123; System.out.println(\"吃骨头\"); &#125; &#125; 定义测试类： 1234567891011121314151617181920212223242526272829303132public class Test &#123; public static void main(String[] args) &#123; // 多态形式，创建对象 Cat c = new Cat(); Dog d = new Dog(); // 调用showCatEat showCatEat(c); // 调用showDogEat showDogEat(d); /* 以上两个方法, 均可以被showAnimalEat(Animal a)方法所替代 而执行效果一致 */ showAnimalEat(c); showAnimalEat(d); &#125; public static void showCatEat (Cat c)&#123; c.eat(); &#125; public static void showDogEat (Dog d)&#123; d.eat(); &#125; public static void showAnimalEat (Animal a)&#123; a.eat(); &#125;&#125; 由于多态特性的支持，showAnimalEat方法的Animal类型，是Cat和Dog的父类类型，父类类型接收子类对象，当然可以把Cat对象和Dog对象，传递给方法。 当eat方法执行时，多态规定，执行的是子类重写的方法，那么效果自然与showCatEat、showDogEat方法一致，所以showAnimalEat完全可以替代以上两方法。 不仅仅是替代，在扩展性方面，无论之后再多的子类出现，我们都不需要编写showXxxEat方法了，直接使用showAnimalEat都可以完成。 所以，多态的好处，体现在，可以使程序编写的更简单，并有良好的扩展。 2.4 引用类型转换多态的转型分为向上转型与向下转型两种： 向上转型 向上转型：多态本身是子类类型向父类类型向上转换的过程，这个过程是默认的。 当父类引用指向一个子类对象时，便是向上转型。 使用格式： 12父类类型 变量名 = new 子类类型();如：Animal a = new Cat(); 向下转型 向下转型：父类类型向子类类型向下转换的过程，这个过程是强制的。 一个已经向上转型的子类对象，将父类引用转为子类引用，可以使用强制类型转换的格式，便是向下转型。 使用格式： 12子类类型 变量名 = (子类类型) 父类变量名;如:Cat c =(Cat) a; 为什么要转型当使用多态方式调用方法时，首先检查父类中是否有该方法，如果没有，则编译错误。也就是说，不能调用子类拥有，而父类没有的方法。编译都错误，更别说运行了。这也是多态给我们带来的一点”小麻烦”。所以，想要调用子类特有的方法，必须做向下转型。 转型演示，代码如下： 定义类： 123456789101112131415161718192021abstract class Animal &#123; abstract void eat(); &#125; class Cat extends Animal &#123; public void eat() &#123; System.out.println(\"吃鱼\"); &#125; public void catchMouse() &#123; System.out.println(\"抓老鼠\"); &#125; &#125; class Dog extends Animal &#123; public void eat() &#123; System.out.println(\"吃骨头\"); &#125; public void watchHouse() &#123; System.out.println(\"看家\"); &#125; &#125; 定义测试类： 1234567891011public class Test &#123; public static void main(String[] args) &#123; // 向上转型 Animal a = new Cat(); a.eat(); // 调用的是 Cat 的 eat // 向下转型 Cat c = (Cat)a; c.catchMouse(); // 调用的是 Cat 的 catchMouse &#125; &#125; 转型的异常转型的过程中，一不小心就会遇到这样的问题，请看如下代码： 1234567891011public class Test &#123; public static void main(String[] args) &#123; // 向上转型 Animal a = new Cat(); a.eat(); // 调用的是 Cat 的 eat // 向下转型 Dog d = (Dog)a; d.watchHouse(); // 调用的是 Dog 的 watchHouse 【运行报错】 &#125; &#125; 这段代码可以通过编译，但是运行时，却报出了 ClassCastException ，类型转换异常！这是因为，明明创建了Cat类型对象，运行时，当然不能转换成Dog对象的。这两个类型并没有任何继承关系，不符合类型转换的定义。 为了避免ClassCastException的发生，Java提供了 instanceof 关键字，给引用变量做类型的校验，格式如下： 123变量名 instanceof 数据类型 如果变量属于该数据类型，返回true。如果变量不属于该数据类型，返回false。 所以，转换前，我们最好先做一个判断，代码如下： 12345678910111213141516public class Test &#123; public static void main(String[] args) &#123; // 向上转型 Animal a = new Cat(); a.eat(); // 调用的是 Cat 的 eat // 向下转型 if (a instanceof Cat)&#123; Cat c = (Cat)a; c.catchMouse(); // 调用的是 Cat 的 catchMouse &#125; else if (a instanceof Dog)&#123; Dog d = (Dog)a; d.watchHouse(); // 调用的是 Dog 的 watchHouse &#125; &#125; &#125; 第三章 接口多态的综合案例3.1 笔记本电脑笔记本电脑（laptop）通常具备使用USB设备的功能。在生产时，笔记本都预留了可以插入USB设备的USB接口，但具体是什么USB设备，笔记本厂商并不关心，只要符合USB规格的设备都可以。 定义USB接口，具备最基本的开启功能和关闭功能。鼠标和键盘要想能在电脑上使用，那么鼠标和键盘也必须遵守USB规范，实现USB接口，否则鼠标和键盘的生产出来也无法使用。 3.2 案例分析进行描述笔记本类，实现笔记本使用USB鼠标、USB键盘 USB接口，包含开启功能、关闭功能 笔记本类，包含运行功能、关机功能、使用USB设备功能 鼠标类，要实现USB接口，并具备点击的方法 键盘类，要实现USB接口，具备敲击的方法 3.3 案例实现定义USB接口： 1234interface USB &#123; void open();// 开启功能 void close();// 关闭功能&#125; 定义鼠标类： 1234567891011class Mouse implements USB &#123; public void open() &#123; System.out.println(\"鼠标开启，红灯闪一闪\"); &#125; public void close() &#123; System.out.println(\"鼠标关闭，红灯熄灭\"); &#125; public void click()&#123; System.out.println(\"鼠标单击\"); &#125;&#125; 定义键盘类： 1234567891011class KeyBoard implements USB &#123; public void open() &#123; System.out.println(\"键盘开启，绿灯闪一闪\"); &#125; public void close() &#123; System.out.println(\"键盘关闭，绿灯熄灭\"); &#125; public void type()&#123; System.out.println(\"键盘打字\"); &#125;&#125; 定义笔记本类： 123456789101112131415161718192021222324252627class Laptop &#123; // 笔记本开启运行功能 public void run() &#123; System.out.println(\"笔记本运行\"); &#125; // 笔记本使用usb设备，这时当笔记本对象调用这个功能时，必须给其传递一个符合USB规则的USB设备 public void useUSB(USB usb) &#123; // 判断是否有USB设备 if (usb != null) &#123; usb.open(); // 类型转换,调用特有方法 if(usb instanceof Mouse)&#123; Mouse m = （Mouse）usb； m.click(); &#125;else if (usb instanceof KeyBoard)&#123; KeyBoard kb = (KeyBoard)usb; kb.type(); &#125; usb.close(); &#125; &#125; public void shutDown() &#123; System.out.println(\"笔记本关闭\"); &#125;&#125; 测试类，代码如下： 123456789101112131415161718192021public class Test &#123; public static void main(String[] args) &#123; // 创建笔记本实体对象 Laptop lt = new Laptop(); // 笔记本开启 lt.run(); // 创建鼠标实体对象 Usb u = new Mouse(); // 笔记本使用鼠标 lt.useUSB(u); // 创建键盘实体对象 KeyBoard kb = new KeyBoard(); // 笔记本使用键盘 lt.useUSB(kb); // 笔记本关闭 lt.shutDown(); &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/02【Collection、泛型】","date":"2018-06-20T07:44:02.000Z","updated":"2018-07-17T08:35:09.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/02【Collection、泛型】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/02【Collection、泛型】/","excerpt":"","text":"\u0000*—title: 02【Collection、泛型】—��容 Collection集合 迭代器 增强for 泛型 教学目标 能够说出集合与数组的区别 说出Collection集合的常用功能 能够使用迭代器对集合进行取元素 能够说出集合的使用细节 能够使用集合存储自定义类型 能够使用foreach循环遍历集合 能够使用泛型定义集合对象 能够理解泛型上下限 能够阐述泛型通配符的作用 第一章 Collection集合1.1 集合概述在前面基础班我们已经学习过并使用过集合ArrayList ,那么集合到底是什么呢? 集合：集合是java中提供的一种容器，可以用来存储多个数据。 集合和数组既然都是容器，它们有啥区别呢？ 数组的长度是固定的。集合的长度是可变的。 数组中存储的是同一类型的元素，可以存储基本数据类型值。集合存储的都是对象。而且对象的类型可以不一致。在开发中一般当对象多的时候，使用集合进行存储。 1.2 集合框架JAVASE提供了满足各种需求的API，在使用这些API前，先了解其继承与接口操作架构，才能了解何时采用哪个类，以及类之间如何彼此合作，从而达到灵活应用。 集合按照其存储结构可以分为两大类，分别是单列集合java.util.Collection和双列集合java.util.Map，今天我们主要学习Collection集合，在day04时讲解Map集合。 Collection：单列集合类的根接口，用于存储一系列符合某种规则的元素，它有两个重要的子接口，分别是java.util.List和java.util.Set。其中，List的特点是元素有序、元素可重复。Set的特点是元素无序，而且不可重复。List接口的主要实现类有java.util.ArrayList和java.util.LinkedList，Set接口的主要实现类有java.util.HashSet和java.util.TreeSet。 从上面的描述可以看出JDK中提供了丰富的集合类库，为了便于初学者进行系统地学习，接下来通过一张图来描述整个集合类的继承体系。 其中，橙色框里填写的都是接口类型，而蓝色框里填写的都是具体的实现类。这几天将针对图中所列举的集合类进行逐一地讲解。 集合本身是一个工具，它存放在java.util包中。在Collection接口定义着单列集合框架中最最共性的内容。 1.3 Collection 常用功能Collection是所有单列集合的父接口，因此在Collection中定义了单列集合(List和Set)通用的一些方法，这些方法可用于操作所有的单列集合。方法如下： public boolean add(E e)： 把给定的对象添加到当前集合中 。 public void clear() :清空集合中所有的元素。 public boolean remove(E e): 把给定的对象在当前集合中删除。 public boolean contains(E e): 判断当前集合中是否包含给定的对象。 public boolean isEmpty(): 判断当前集合是否为空。 public int size(): 返回集合中元素的个数。 public Object[] toArray(): 把集合中的元素，存储到数组中。 方法演示： 123456789101112131415161718192021222324252627282930313233343536373839import java.util.ArrayList;import java.util.Collection;public class Demo1Collection &#123; public static void main(String[] args) &#123; // 创建集合对象 // 使用多态形式 Collection&lt;String&gt; coll = new ArrayList&lt;String&gt;(); // 使用方法 // 添加功能 boolean add(String s) coll.add(\"小李广\"); coll.add(\"扫地僧\"); coll.add(\"石破天\"); System.out.println(coll); // boolean contains(E e) 判断o是否在集合中存在 System.out.println(\"判断 扫地僧 是否在集合中\"+coll.contains(\"扫地僧\")); //boolean remove(E e) 删除在集合中的o元素 System.out.println(\"删除石破天：\"+coll.remove(\"石破天\")); System.out.println(\"操作之后集合中元素:\"+coll); // size() 集合中有几个元素 System.out.println(\"集合中有\"+coll.size()+\"个元素\"); // Object[] toArray()转换成一个Object数组 Object[] objects = coll.toArray(); // 遍历数组 for (int i = 0; i &lt; objects.length; i++) &#123; System.out.println(objects[i]); &#125; // void clear() 清空集合 coll.clear(); System.out.println(\"集合中内容为：\"+coll); // boolean isEmpty() 判断是否为空 System.out.println(coll.isEmpty()); &#125;&#125; tips: 有关Collection中的方法可不止上面这些，其他方法可以自行查看API学习。 第二章 Iterator迭代器2.1 Iterator接口在程序开发中，经常需要遍历集合中的所有元素。针对这种需求，JDK专门提供了一个接口java.util.Iterator。Iterator接口也是Java集合中的一员，但它与Collection、Map接口有所不同，Collection接口与Map接口主要用于存储元素，而Iterator主要用于迭代访问（即遍历）Collection中的元素，因此Iterator对象也被称为迭代器。 想要遍历Collection集合，那么就要获取该集合迭代器完成迭代操作，下面介绍一下获取迭代器的方法： public Iterator iterator(): 获取集合对应的迭代器，用来遍历集合中的元素的。 下面介绍一下迭代的概念： 迭代：即Collection集合元素的通用获取方式。在取元素之前先要判断集合中有没有元素，如果有，就把这个元素取出来，继续在判断，如果还有就再取出出来。一直把集合中的所有元素全部取出。这种取出方式专业术语称为迭代。 Iterator接口的常用方法如下： public E next():返回迭代的下一个元素。 public boolean hasNext():如果仍有元素可以迭代，则返回 true。 接下来我们通过案例学习如何使用Iterator迭代集合中元素： 12345678910111213141516171819public class IteratorDemo &#123; public static void main(String[] args) &#123; // 使用多态方式 创建对象 Collection&lt;String&gt; coll = new ArrayList&lt;String&gt;(); // 添加元素到集合 coll.add(\"串串星人\"); coll.add(\"吐槽星人\"); coll.add(\"汪星人\"); //遍历 //使用迭代器 遍历 每个集合对象都有自己的迭代器 Iterator&lt;String&gt; it = coll.iterator(); // 泛型指的是 迭代出 元素的数据类型 while(it.hasNext())&#123; //判断是否有迭代元素 String s = it.next();//获取迭代出的元素 System.out.println(s); &#125; &#125;&#125; tips:：在进行集合元素取出时，如果集合中已经没有元素了，还继续使用迭代器的next方法，将会发生java.util.NoSuchElementException没有集合元素的错误。 2.2 迭代器的实现原理我们在之前案例已经完成了Iterator遍历集合的整个过程。当遍历集合时，首先通过调用t集合的iterator()方法获得迭代器对象，然后使用hashNext()方法判断集合中是否存在下一个元素，如果存在，则调用next()方法将元素取出，否则说明已到达了集合末尾，停止遍历元素。 Iterator迭代器对象在遍历集合时，内部采用指针的方式来跟踪集合中的元素，为了让初学者能更好地理解迭代器的工作原理，接下来通过一个图例来演示Iterator对象迭代元素的过程： 在调用Iterator的next方法之前，迭代器的索引位于第一个元素之前，不指向任何元素，当第一次调用迭代器的next方法后，迭代器的索引会向后移动一位，指向第一个元素并将该元素返回，当再次调用next方法时，迭代器的索引会指向第二个元素并将该元素返回，依此类推，直到hasNext方法返回false，表示到达了集合的末尾，终止对元素的遍历。 2.3 增强for增强for循环(也称for each循环)是JDK1.5以后出来的一个高级for循环，专门用来遍历数组和集合的。它的内部原理其实是个Iterator迭代器，所以在遍历的过程中，不能对集合中的元素进行增删操作。 格式： 123for(元素的数据类型 变量 : Collection集合or数组)&#123; //写操作代码&#125; 它用于遍历Collection和数组。通常只进行遍历元素，不要在遍历的过程中对集合元素进行增删操作。 练习1：遍历数组123456789101112131415161718public class NBForDemo1 &#123; public static void main(String[] args) &#123; int[] arr = &#123;3,5,6,87&#125;; //使用增强for遍历数组 for(int a : arr)&#123;//a代表数组中的每个元素 System.out.println(a); &#125; Collection&lt;String&gt; coll = new ArrayList&lt;String&gt;(); coll.add(\"小河神\"); coll.add(\"老河神\"); coll.add(\"神婆\"); for(String s :coll)&#123; System.out.println(s); &#125; &#125;&#125; 练习2:遍历集合123456789101112public class NBFor &#123; public static void main(String[] args) &#123; Collection&lt;String&gt; coll = new ArrayList&lt;String&gt;(); coll.add(\"小河神\"); coll.add(\"老河神\"); coll.add(\"神婆\"); //使用增强for遍历 for(String s :coll)&#123;//接收变量s代表 代表被遍历到的集合元素 System.out.println(s); &#125; &#125;&#125; tips: 新for循环必须有被遍历的目标。目标只能是Collection或者是数组。新式for仅仅作为遍历操作出现。 第三章 泛型3.1 泛型概述在前面学习集合时，我们都知道集合中是可以存放任意对象的，只要把对象存储集合后，那么这时他们都会被提升成Object类型。当我们在取出每一个对象，并且进行相应的操作，这时必须采用类型转换。 大家观察下面代码： 1234567891011121314public class GenericDemo &#123; public static void main(String[] args) &#123; Collection coll = new ArrayList(); coll.add(\"abc\"); coll.add(\"itcast\"); coll.add(5);//由于集合没有做任何限定，任何类型都可以给其中存放 Iterator it = coll.iterator(); while(it.hasNext())&#123; //需要打印每个字符串的长度,就要把迭代出来的对象转成String类型 String str = (String) it.next(); System.out.println(str.length()); &#125; &#125;&#125; 程序在运行时发生了问题java.lang.ClassCastException。 为什么会发生类型转换异常呢？ 我们来分析下：由于集合中什么类型的元素都可以存储。导致取出时强转引发运行时 ClassCastException。 怎么来解决这个问题呢？ Collection虽然可以存储各种对象，但实际上通常Collection只存储同一类型对象。例如都是存储字符串对象。因此在JDK5之后，新增了泛型(Generic)语法，让你在设计API时可以指定类或方法支持泛型，这样我们使用API的时候也变得更为简洁，并得到了编译时期的语法检查。 泛型：可以在类或方法中预支地使用未知的类型。 tips:一般在创建对象时，将未知的类型确定具体的类型。当没有指定泛型时，默认类型为Object类型。 3.2 使用泛型的好处上一节只是讲解了泛型的引入，那么泛型带来了哪些好处呢？ 将运行时期的ClassCastException，转移到了编译时期变成了编译失败。 避免了类型强转的麻烦。 通过我们如下代码体验一下： 123456789101112131415public class GenericDemo2 &#123; public static void main(String[] args) &#123; Collection&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(\"abc\"); list.add(\"itcast\"); // list.add(5);//当集合明确类型后，存放类型不一致就会编译报错 // 集合已经明确具体存放的元素类型，那么在使用迭代器的时候，迭代器也同样会知道具体遍历元素类型 Iterator&lt;String&gt; it = list.iterator(); while(it.hasNext())&#123; String str = it.next(); //当使用Iterator&lt;String&gt;控制元素类型后，就不需要强转了。获取到的元素直接就是String类型 System.out.println(str.length()); &#125; &#125;&#125; tips:泛型是数据类型的一部分，我们将类名与泛型合并一起看做数据类型。 3.3 泛型的定义与使用我们在集合中会大量使用到泛型，这里来完整地学习泛型知识。 泛型，用来灵活地将数据类型应用到不同的类、方法、接口当中。将数据类型作为参数进行传递。 定义和使用含有泛型的类定义格式： 1修饰符 class 类名&lt;代表泛型的变量&gt; &#123; &#125; 例如，API中的ArrayList集合： 123456class ArrayList&lt;E&gt;&#123; public boolean add(E e)&#123; &#125; public E get(int index)&#123; &#125; ....&#125; 使用泛型： 即什么时候确定泛型。 在创建对象的时候确定泛型 例如，ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); 此时，变量E的值就是String类型,那么我们的类型就可以理解为： 123456class ArrayList&lt;String&gt;&#123; public boolean add(String e)&#123; &#125; public String get(int index)&#123; &#125; ...&#125; 再例如，ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(); 此时，变量E的值就是Integer类型,那么我们的类型就可以理解为： 123456class ArrayList&lt;Integer&gt; &#123; public boolean add(Integer e) &#123; &#125; public Integer get(int index) &#123; &#125; ...&#125; 举例自定义泛型类 123456789101112public class MyGenericClass&lt;MVP&gt; &#123; //没有MVP类型，在这里代表 未知的一种数据类型 未来传递什么就是什么类型 private MVP mvp; public void setMVP(MVP mvp) &#123; this.mvp = mvp; &#125; public MVP getMVP() &#123; return mvp; &#125;&#125; 使用: 123456789101112131415public class GenericClassDemo &#123; public static void main(String[] args) &#123; // 创建一个泛型为String的类 MyGenericClass&lt;String&gt; my = new MyGenericClass&lt;String&gt;(); // 调用setMVP my.setMVP(\"大胡子登登\"); // 调用getMVP String mvp = my.getMVP(); System.out.println(mvp); //创建一个泛型为Integer的类 MyGenericClass&lt;Integer&gt; my2 = new MyGenericClass&lt;Integer&gt;(); my2.setMVP(123); Integer mvp2 = my2.getMVP(); &#125;&#125; 含有泛型的方法定义格式： 1修饰符 &lt;代表泛型的变量&gt; 返回值类型 方法名(参数)&#123; &#125; 例如， 123456789public class MyGenericMethod &#123; public &lt;MVP&gt; void show(MVP mvp) &#123; System.out.println(mvp.getClass()); &#125; public &lt;MVP&gt; MVP show2(MVP mvp) &#123; return mvp; &#125;&#125; 使用格式：调用方法时，确定泛型的类型 12345678910public class GenericMethodDemo &#123; public static void main(String[] args) &#123; // 创建对象 MyGenericMethod mm = new MyGenericMethod(); // 演示看方法提示 mm.show(\"aaa\"); mm.show(123); mm.show(12.45); &#125;&#125; 含有泛型的接口定义格式： 1修饰符 interface接口名&lt;代表泛型的变量&gt; &#123; &#125; 例如， 12345public interface MyGenericInterface&lt;E&gt;&#123; public abstract void add(E e); public abstract E getE(); &#125; 使用格式： 1、定义类时确定泛型的类型 例如 1234567891011public class MyImp1 implements MyGenericInterface&lt;String&gt; &#123; @Override public void add(String e) &#123; // 省略... &#125; @Override public String getE() &#123; return null; &#125;&#125; 此时，泛型E的值就是String类型。 2、始终不确定泛型的类型，直到创建对象时，确定泛型的类型 例如 1234567891011public class MyImp2&lt;E&gt; implements MyGenericInterface&lt;E&gt; &#123; @Override public void add(E e) &#123; // 省略... &#125; @Override public E getE() &#123; return null; &#125;&#125; 确定泛型： 123456789/* * 使用 */public class GenericInterface &#123; public static void main(String[] args) &#123; MyImp2&lt;String&gt; my = new MyImp2&lt;String&gt;(); my.add(\"aa\"); &#125;&#125; 3.4 泛型通配符当使用泛型类或者接口时，传递的数据中，泛型类型不确定，可以通过通配符&lt;?&gt;表示。但是一旦使用泛型的通配符后，只能使用Object类中的共性方法，集合中元素自身方法无法使用。 通配符基本使用泛型的通配符:不知道使用什么类型来接收的时候,此时可以使用?,?表示未知通配符。 此时只能接受数据,不能往该集合中存储数据。 举个例子大家理解使用即可： 12345678public static void main(String[] args) &#123; Collection&lt;Intger&gt; list1 = new ArrayList&lt;Integer&gt;(); getElement(list1); Collection&lt;String&gt; list2 = new ArrayList&lt;String&gt;(); getElement(list2);&#125;public static void getElement(Collection&lt;?&gt; coll)&#123;&#125;//？代表可以接收任意类型 tips:泛型不存在继承关系 Collection list = new ArrayList();这种是错误的。 通配符高级使用—-受限泛型之前设置泛型的时候，实际上是可以任意设置的，只要是类就可以设置。但是在JAVA的泛型中可以指定一个泛型的上限和下限。 泛型的上限： 格式： 类型名称 &lt;? extends 类 &gt; 对象名称 意义： 只能接收该类型及其子类 泛型的下限： 格式： 类型名称 &lt;? super 类 &gt; 对象名称 意义： 只能接收该类型及其父类型 比如：现已知Object类，String 类，Number类，Integer类，其中Number是Integer的父类 123456789101112131415161718192021public static void main(String[] args) &#123; Collection&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt;(); Collection&lt;String&gt; list2 = new ArrayList&lt;String&gt;(); Collection&lt;Number&gt; list3 = new ArrayList&lt;Number&gt;(); Collection&lt;Object&gt; list4 = new ArrayList&lt;Object&gt;(); getElement(list1); getElement(list2);//报错 getElement(list3); getElement(list4);//报错 getElement2(list1);//报错 getElement2(list2);//报错 getElement2(list3); getElement2(list4); &#125;// 泛型的上限：此时的泛型?，必须是Number类型或者Number类型的子类public static void getElement1(Collection&lt;? extends Number&gt; coll)&#123;&#125;// 泛型的下限：此时的泛型?，必须是Number类型或者Number类型的父类public static void getElement2(Collection&lt;? super Number&gt; coll)&#123;&#125; 第四章 集合综合案例4.1 案例介绍按照斗地主的规则，完成洗牌发牌的动作。具体规则： 使用54张牌打乱顺序,三个玩家参与游戏，三人交替摸牌，每人17张牌，最后三张留作底牌。 4.2 案例分析 准备牌： 牌可以设计为一个ArrayList,每个字符串为一张牌。每张牌由花色数字两部分组成，我们可以使用花色集合与数字集合嵌套迭代完成每张牌的组装。牌由Collections类的shuffle方法进行随机排序。 发牌 将每个人以及底牌设计为ArrayList,将最后3张牌直接存放于底牌，剩余牌通过对3取模依次发牌。 看牌 直接打印每个集合。 4.3 代码实现1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586import java.util.ArrayList;import java.util.Collections;public class Poker &#123; public static void main(String[] args) &#123; /* * 1: 准备牌操作 */ //1.1 创建牌盒 将来存储牌面的 ArrayList&lt;String&gt; pokerBox = new ArrayList&lt;String&gt;(); //1.2 创建花色集合 ArrayList&lt;String&gt; colors = new ArrayList&lt;String&gt;(); //1.3 创建数字集合 ArrayList&lt;String&gt; numbers = new ArrayList&lt;String&gt;(); //1.4 分别给花色 以及 数字集合添加元素 colors.add(\"♥\"); colors.add(\"♦\"); colors.add(\"♠\"); colors.add(\"♣\"); for(int i = 2;i&lt;=10;i++)&#123; numbers.add(i+\"\"); &#125; numbers.add(\"J\"); numbers.add(\"Q\"); numbers.add(\"K\"); numbers.add(\"A\"); //1.5 创造牌 拼接牌操作 // 拿出每一个花色 然后跟每一个数字 进行结合 存储到牌盒中 for (String color : colors) &#123; //color每一个花色 //遍历数字集合 for(String number : numbers)&#123; //结合 String card = color+number; //存储到牌盒中 pokerBox.add(card); &#125; &#125; //1.6大王小王 pokerBox.add(\"小☺\"); pokerBox.add(\"大☠\"); // System.out.println(pokerBox); //洗牌 是不是就是将 牌盒中 牌的索引打乱 // Collections类 工具类 都是 静态方法 // shuffer方法 /* * static void shuffle(List&lt;?&gt; list) * 使用默认随机源对指定列表进行置换。 */ //2:洗牌 Collections.shuffle(pokerBox); //3 发牌 //3.1 创建 三个 玩家集合 创建一个底牌集合 ArrayList&lt;String&gt; player1 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; player2 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; player3 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; dipai = new ArrayList&lt;String&gt;(); //遍历 牌盒 必须知道索引 for(int i = 0;i&lt;pokerBox.size();i++)&#123; //获取 牌面 String card = pokerBox.get(i); //留出三张底牌 存到 底牌集合中 if(i&gt;=51)&#123;//存到底牌集合中 dipai.add(card); &#125; else &#123; //玩家1 %3 ==0 if(i%3==0)&#123; player1.add(card); &#125;else if(i%3==1)&#123;//玩家2 player2.add(card); &#125;else&#123;//玩家3 player3.add(card); &#125; &#125; &#125; //看看 System.out.println(\"令狐冲：\"+player1); System.out.println(\"田伯光：\"+player2); System.out.println(\"绿竹翁：\"+player3); System.out.println(\"底牌：\"+dipai); &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/09【字节流、字符流】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/09【字节流、字符流】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/09【字节流、字符流】/","excerpt":"","text":"day09【字节流、字符流】主要内容 IO流 字节流 字符流 异常处理 Properties 教学目标 能够说出IO流的分类和功能 能够使用字节输出流写出数据到文件 能够使用字节输入流读取数据到程序 能够理解读取数据read(byte[])方法的原理 能够使用字节流完成文件的复制 能够使用FileWirter写数据到文件 能够说出FileWriter中关闭和刷新方法的区别 能够使用FileWriter写数据的5个方法 能够使用FileWriter写数据实现换行和追加写 能够使用FileReader读数据 能够使用FileReader读数据一次一个字符数组 能够使用Properties的load方法加载文件中配置信息 第一章 IO概述1.1 什么是IO生活中，你肯定经历过这样的场景。当你编辑一个文本文件，忘记了ctrl+s ，可能文件就白白编辑了。当你电脑上插入一个U盘，可以把一个视频，拷贝到你的电脑硬盘里。那么数据都是在哪些设备上的呢？键盘、内存、硬盘、外接设备等等。 我们把这种数据的传输，可以看做是一种数据的流动，按照流动的方向，以内存为基准，分为输入input 和输出output ，即流向内存是输入流，流出内存的输出流。 Java中I/O操作主要是指使用java.io包下的内容，进行输入、输出操作。输入也叫做读取数据，输出也叫做作写出数据。 1.2 IO的分类根据数据的流向分为：输入流和输出流。 输入流 ：把数据从其他设备上读取到内存中的流。 输出流 ：把数据从内存 中写出到其他设备上的流。 格局数据的类型分为：字节流和字符流。 字节流 ：以字节为单位，读写数据的流。 字符流 ：以字符为单位，读写数据的流。 1.3 IO的流向说明图解 1.4 顶级父类们 输入流 输出流 字节流 字节输入流InputStream 字节输出流OutputStream 字符流 字符输入流Reader 字符输出流Writer 第二章 字节流2.1 一切皆为字节一切文件数据(文本、图片、视频等)在存储时，都是以二进制数字的形式保存，都一个一个的字节，那么传输时一样如此。所以，字节流可以传输任意文件数据。在操作流的时候，我们要时刻明确，无论使用什么样的流对象，底层传输的始终为二进制数据。 2.2 字节输出流【OutputStream】java.io.OutputStream抽象类是表示字节输出流的所有类的超类，将指定的字节信息写出到目的地。它定义了字节输出流的基本共性功能方法。 public void close() ：关闭此输出流并释放与此流相关联的任何系统资源。 public void flush() ：刷新此输出流并强制任何缓冲的输出字节被写出。 public void write(byte[] b)：将 b.length字节从指定的字节数组写入此输出流。 public void write(byte[] b, int off, int len) ：从指定的字节数组写入 len字节，从偏移量 off开始输出到此输出流。 public abstract void write(int b) ：将指定的字节输出流。 小贴士： close方法，当完成流的操作时，必须调用此方法，释放系统资源。 2.3 FileOutputStream类OutputStream有很多子类，我们从最简单的一个子类开始。 java.io.FileOutputStream类是文件输出流，用于将数据写出到文件。 构造方法 public FileOutputStream(File file)：创建文件输出流以写入由指定的 File对象表示的文件。 public FileOutputStream(String name)： 创建文件输出流以指定的名称写入文件。 当你创建一个流对象时，必须传入一个文件路径。该路径下，如果没有这个文件，会创建该文件。如果有这个文件，会清空这个文件的数据。 构造举例，代码如下： 12345678910public class FileOutputStreamConstructor throws IOException &#123; public static void main(String[] args) &#123; // 使用File对象创建流对象 File file = new File(\"a.txt\"); FileOutputStream fos = new FileOutputStream(file); // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"b.txt\"); &#125;&#125; 写出字节数据 写出字节：write(int b) 方法，每次可以写出一个字节数据，代码使用演示： 1234567891011121314public class FOSWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"fos.txt\"); // 写出数据 fos.write(97); // 写出第1个字节 fos.write(98); // 写出第2个字节 fos.write(99); // 写出第3个字节 // 关闭资源 fos.close(); &#125;&#125;输出结果：abc 小贴士： 虽然参数为int类型四个字节，但是只会保留一个字节的信息写出。 流操作完毕后，必须释放系统资源，调用close方法，千万记得。 写出字节数组：write(byte[] b)，每次可以写出数组中的数据，代码使用演示： 1234567891011121314public class FOSWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"fos.txt\"); // 字符串转换为字节数组 byte[] b = \"黑马程序员\".getBytes(); // 写出字节数组数据 fos.write(b); // 关闭资源 fos.close(); &#125;&#125;输出结果：黑马程序员 写出指定长度字节数组：write(byte[] b, int off, int len) ,每次写出从off索引开始，len个字节，代码使用演示： 1234567891011121314public class FOSWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"fos.txt\"); // 字符串转换为字节数组 byte[] b = \"abcde\".getBytes(); // 写出从索引2开始，2个字节。索引2是c，两个字节，也就是cd。 fos.write(b,2,2); // 关闭资源 fos.close(); &#125;&#125;输出结果：cd 数据追加续写经过以上的演示，每次程序运行，创建输出流对象，都会清空目标文件中的数据。如何保留目标文件中数据，还能继续添加新数据呢？ public FileOutputStream(File file, boolean append)： 创建文件输出流以写入由指定的 File对象表示的文件。 public FileOutputStream(String name, boolean append)： 创建文件输出流以指定的名称写入文件。 这两个构造方法，参数中都需要传入一个boolean类型的值，true 表示追加数据，false 表示清空原有数据。这样创建的输出流对象，就可以指定是否追加续写了，代码使用演示： 1234567891011121314public class FOSWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"fos.txt\"，true); // 字符串转换为字节数组 byte[] b = \"abcde\".getBytes(); // 写出从索引2开始，2个字节。索引2是c，两个字节，也就是cd。 fos.write(b); // 关闭资源 fos.close(); &#125;&#125;文件操作前：cd文件操作后：cdabcde 写出换行Windows系统里，换行符号是\\r\\n 。把 以指定是否追加续写了，代码使用演示： 123456789101112131415161718192021222324public class FOSWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileOutputStream fos = new FileOutputStream(\"fos.txt\"); // 定义字节数组 byte[] words = &#123;97,98,99,100,101&#125;; // 遍历数组 for (int i = 0; i &lt; words.length; i++) &#123; // 写出一个字节 fos.write(words[i]); // 写出一个换行, 换行符号转成数组写出 fos.write(\"\\r\\n\".getBytes()); &#125; // 关闭资源 fos.close(); &#125;&#125;输出结果：abcde 回车符\\r和换行符\\n ： 回车符：回到一行的开头（return）。 换行符：下一行（newline）。 系统中的换行： Windows系统里，每行结尾是 回车+换行 ，即\\r\\n； Unix系统里，每行结尾只有 换行 ，即\\n； Mac系统里，每行结尾是 回车 ，即\\r。从 Mac OS X开始与Linux统一。 2.4 字节输入流【InputStream】java.io.InputStream抽象类是表示字节输入流的所有类的超类，可以读取字节信息到内存中。它定义了字节输入流的基本共性功能方法。 public void close() ：关闭此输入流并释放与此流相关联的任何系统资源。 public abstract int read()： 从输入流读取数据的下一个字节。 public int read(byte[] b)： 从输入流中读取一些字节数，并将它们存储到字节数组 b中 。 小贴士： close方法，当完成流的操作时，必须调用此方法，释放系统资源。 2.5 FileInputStream类java.io.FileInputStream类是文件输入流，从文件中读取字节。 构造方法 FileInputStream(File file)： 通过打开与实际文件的连接来创建一个 FileInputStream ，该文件由文件系统中的 File对象 file命名。 FileInputStream(String name)： 通过打开与实际文件的连接来创建一个 FileInputStream ，该文件由文件系统中的路径名 name命名。 当你创建一个流对象时，必须传入一个文件路径。该路径下，如果没有该文件,会抛出FileNotFoundException 。 构造举例，代码如下： 12345678910public class FileInputStreamConstructor throws IOException&#123; public static void main(String[] args) &#123; // 使用File对象创建流对象 File file = new File(\"a.txt\"); FileInputStream fos = new FileInputStream(file); // 使用文件名称创建流对象 FileInputStream fos = new FileInputStream(\"b.txt\"); &#125;&#125; 读取字节数据 读取字节：read方法，每次可以读取一个字节的数据，提升为int类型，读取到文件末尾，返回-1，代码使用演示： 1234567891011121314151617181920212223242526272829public class FISRead &#123; public static void main(String[] args) throws IOException&#123; // 使用文件名称创建流对象 FileInputStream fis = new FileInputStream(\"read.txt\"); // 读取数据，返回一个字节 int read = fis.read(); System.out.println((char) read); read = fis.read(); System.out.println((char) read); read = fis.read(); System.out.println((char) read); read = fis.read(); System.out.println((char) read); read = fis.read(); System.out.println((char) read); // 读取到末尾,返回-1 read = fis.read(); System.out.println( read); // 关闭资源 fis.close(); &#125;&#125;输出结果：abcde-1 循环改进读取方式，代码使用演示： 1234567891011121314151617181920public class FISRead &#123; public static void main(String[] args) throws IOException&#123; // 使用文件名称创建流对象 FileInputStream fis = new FileInputStream(\"read.txt\"); // 定义变量，保存数据 int b ； // 循环读取 while ((b = fis.read())!=-1) &#123; System.out.println((char)b); &#125; // 关闭资源 fis.close(); &#125;&#125;输出结果：abcde 小贴士： 虽然读取了一个字节，但是会自动提升为int类型。 流操作完毕后，必须释放系统资源，调用close方法，千万记得。 使用字节数组读取：read(byte[] b)，每次读取b的长度个字节到数组中，返回读取到的有效字节个数，读取到末尾时，返回-1 ，代码使用演示： 12345678910111213141516171819202122public class FISRead &#123; public static void main(String[] args) throws IOException&#123; // 使用文件名称创建流对象. FileInputStream fis = new FileInputStream(\"read.txt\"); // 文件中为abcde // 定义变量，作为有效个数 int len ； // 定义字节数组，作为装字节数据的容器 byte[] b = new byte[2]; // 循环读取 while (( len= fis.read(b))!=-1) &#123; // 每次读取后,把数组变成字符串打印 System.out.println(new String(b)); &#125; // 关闭资源 fis.close(); &#125;&#125;输出结果：abcded 错误数据d，是由于最后一次读取时，只读取一个字节e，数组中，上次读取的数据没有被完全替换，所以要通过len ，获取有效的字节，代码使用演示： 12345678910111213141516171819202122public class FISRead &#123; public static void main(String[] args) throws IOException&#123; // 使用文件名称创建流对象. FileInputStream fis = new FileInputStream(\"read.txt\"); // 文件中为abcde // 定义变量，作为有效个数 int len ； // 定义字节数组，作为装字节数据的容器 byte[] b = new byte[2]; // 循环读取 while (( len= fis.read(b))!=-1) &#123; // 每次读取后,把数组的有效字节部分，变成字符串打印 System.out.println(new String(b，0，len));// len 每次读取的有效字节个数 &#125; // 关闭资源 fis.close(); &#125;&#125;输出结果：abcde 小贴士： 使用数组读取，每次读取多个字节，减少了系统间的IO操作次数，从而提高了读写的效率，建议开发中使用。 2.6 字节流练习：图片复制复制原理图解 案例实现复制图片文件，代码使用演示： 123456789101112131415161718192021222324public class Copy &#123; public static void main(String[] args) throws IOException &#123; // 1.创建流对象 // 1.1 指定数据源 FileInputStream fis = new FileInputStream(\"D:\\\\test.jpg\"); // 1.2 指定目的地 FileOutputStream fos = new FileOutputStream(\"test_copy.jpg\"); // 2.读写数据 // 2.1 定义数组 byte[] b = new byte[1024]; // 2.2 定义长度 int len; // 2.3 循环读取 while ((len = fis.read(b))!=-1) &#123; // 2.4 写出数据 fos.write(b, 0 , len); &#125; // 3.关闭资源 fos.close(); fis.close(); &#125;&#125; 小贴士： 流的关闭原则：先开后关，后开先关。 第三章 字符流当使用字节流读取文本文件时，可能会有一个小问题。就是遇到中文字符时，可能不会显示完整的字符，那是因为一个中文字符可能占用多个字节存储。所以Java提供一些字符流类，以字符为单位读写数据，专门用于处理文本文件。 3.1 字符输入流【Reader】java.io.Reader抽象类是表示用于读取字符流的所有类的超类，可以读取字节信息到内存中。它定义了字节输入流的基本共性功能方法。 public void close() ：关闭此流并释放与此流相关联的任何系统资源。 public int read()： 从输入流读取一个字符。 public int read(char[] cbuf)： 从输入流中读取一些字符，并将它们存储到字符数组 cbuf中 。 3.2 FileReader类java.io.FileReader类是读取字符文件的便利类。构造时使用系统默认的字符编码和默认字节缓冲区。 小贴士： 字符编码：字节与字符的对应规则。Windows系统的中文编码默认是GBK编码表。 idea中UTF-8 字节缓冲区：一个字节数组，用来临时存储字节数据。 构造方法 FileReader(File file)： 创建一个新的 FileReader ，给定要读取的File对象。 FileReader(String fileName)： 创建一个新的 FileReader ，给定要读取的文件的名称。 当你创建一个流对象时，必须传入一个文件路径。类似于FileInputStream 。 构造举例，代码如下： 12345678910public class FileReaderConstructor throws IOException&#123; public static void main(String[] args) &#123; // 使用File对象创建流对象 File file = new File(\"a.txt\"); FileReader fr = new FileReader(file); // 使用文件名称创建流对象 FileReader fr = new FileReader(\"b.txt\"); &#125;&#125; 读取字符数据 读取字符：read方法，每次可以读取一个字符的数据，提升为int类型，读取到文件末尾，返回-1，循环读取，代码使用演示： 1234567891011121314151617181920public class FRRead &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileReader fr = new FileReader(\"read.txt\"); // 定义变量，保存数据 int b ； // 循环读取 while ((b = fr.read())!=-1) &#123; System.out.println((char)b); &#125; // 关闭资源 fr.close(); &#125;&#125;输出结果：黑马程序员 小贴士：虽然读取了一个字符，但是会自动提升为int类型。 使用字符数组读取：read(char[] cbuf)，每次读取b的长度个字符到数组中，返回读取到的有效字符个数，读取到末尾时，返回-1 ，代码使用演示： 1234567891011121314151617181920public class FRRead &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileReader fr = new FileReader(\"read.txt\"); // 定义变量，保存有效字符个数 int len ； // 定义字符数组，作为装字符数据的容器 char[] cbuf = new char[2]; // 循环读取 while ((len = fr.read(cbuf))!=-1) &#123; System.out.println(new String(cbuf)); &#125; // 关闭资源 fr.close(); &#125;&#125;输出结果：黑马程序员序 获取有效的字符改进，代码使用演示： 123456789101112131415161718192021public class FISRead &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileReader fr = new FileReader(\"read.txt\"); // 定义变量，保存有效字符个数 int len ； // 定义字符数组，作为装字符数据的容器 char[] cbuf = new char[2]; // 循环读取 while ((len = fr.read(cbuf))!=-1) &#123; System.out.println(new String(cbuf,0,len)); &#125; // 关闭资源 fr.close(); &#125;&#125;输出结果：黑马程序员 3.3 字符输出流【Writer】java.io.Writer抽象类是表示用于写出字符流的所有类的超类，将指定的字符信息写出到目的地。它定义了字节输出流的基本共性功能方法。 public abstract void close() ：关闭此输出流并释放与此流相关联的任何系统资源。 public abstract void flush() ：刷新此输出流并强制任何缓冲的输出字符被写出。 public void write(int c) ：写出一个字符。 public void write(char[] cbuf)：将 b.length字符从指定的字符数组写出此输出流。 public abstract void write(char[] b, int off, int len) ：从指定的字符数组写出 len字符，从偏移量 off开始输出到此输出流。 public void write(String str) ：写出一个字符串。 3.4 FileWriter类java.io.FileWriter类是写出字符到文件的便利类。构造时使用系统默认的字符编码和默认字节缓冲区。 构造方法 FileWriter(File file)： 创建一个新的 FileWriter，给定要读取的File对象。 FileWriter(String fileName)： 创建一个新的 FileWriter，给定要读取的文件的名称。 当你创建一个流对象时，必须传入一个文件路径，类似于FileOutputStream。 构造举例，代码如下： 12345678910public class FileWriterConstructor &#123; public static void main(String[] args) throws IOException &#123; // 使用File对象创建流对象 File file = new File(\"a.txt\"); FileWriter fw = new FileWriter(file); // 使用文件名称创建流对象 FileWriter fw = new FileWriter(\"b.txt\"); &#125;&#125; 基本写出数据写出字符：write(int b) 方法，每次可以写出一个字符数据，代码使用演示： 12345678910111213141516171819public class FWWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileWriter fw = new FileWriter(\"fw.txt\"); // 写出数据 fw.write(97); // 写出第1个字符 fw.write('b'); // 写出第2个字符 fw.write('C'); // 写出第3个字符 fw.write(30000); // 写出第4个字符，中文编码表中30000对应一个汉字。 /* 【注意】关闭资源时,与FileOutputStream不同。 如果不关闭,数据只是保存到缓冲区，并未保存到文件。 */ // fw.close(); &#125;&#125;输出结果：abC田 小贴士： 虽然参数为int类型四个字节，但是只会保留一个字符的信息写出。 未调用close方法，数据只是保存到了缓冲区，并未写出到文件中。 关闭和刷新因为内置缓冲区的原因，如果不关闭输出流，无法写出字符到文件中。但是关闭的流对象，是无法继续写出数据的。如果我们既想写出数据，又想继续使用流，就需要flush 方法了。 flush ：刷新缓冲区，流对象可以继续使用。 close ：关闭流，释放系统资源。关闭前会刷新缓冲区。 代码使用演示： 1234567891011121314151617public class FWWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileWriter fw = new FileWriter(\"fw.txt\"); // 写出数据，通过flush fw.write('刷'); // 写出第1个字符 fw.flush(); fw.write('新'); // 继续写出第2个字符，写出成功 fw.flush(); // 写出数据，通过close fw.write('关'); // 写出第1个字符 fw.close(); fw.write('闭'); // 继续写出第2个字符,【报错】java.io.IOException: Stream closed fw.close(); &#125;&#125; 小贴士：即便是flush方法写出了数据，操作的最后还是要调用close方法，释放系统资源。 写出其他数据 写出字符数组 ：write(char[] cbuf) 和 write(char[] cbuf, int off, int len) ，每次可以写出字符数组中的数据，用法类似FileOutputStream，代码使用演示： 1234567891011121314151617public class FWWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileWriter fw = new FileWriter(\"fw.txt\"); // 字符串转换为字节数组 char[] chars = \"黑马程序员\".toCharArray(); // 写出字符数组 fw.write(chars); // 黑马程序员 // 写出从索引2开始，2个字节。索引2是'程'，两个字节，也就是'程序'。 fw.write(b,2,2); // 程序 // 关闭资源 fos.close(); &#125;&#125; 写出字符串：write(String str) 和 write(String str, int off, int len) ，每次可以写出字符串中的数据，更为方便，代码使用演示： 1234567891011121314151617public class FWWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象 FileWriter fw = new FileWriter(\"fw.txt\"); // 字符串 String msg = \"黑马程序员\"; // 写出字符数组 fw.write(msg); //黑马程序员 // 写出从索引2开始，2个字节。索引2是'程'，两个字节，也就是'程序'。 fw.write(msg,2,2); // 程序 // 关闭资源 fos.close(); &#125;&#125; 续写和换行：操作类似于FileOutputStream。 1234567891011121314151617public class FWWrite &#123; public static void main(String[] args) throws IOException &#123; // 使用文件名称创建流对象，可以续写数据 FileWriter fw = new FileWriter(\"fw.txt\"，true); // 写出字符串 fw.write(\"黑马\"); // 写出换行 fw.write(\"\\r\\n\"); // 写出字符串 fw.write(\"程序员\"); // 关闭资源 fw.close(); &#125;&#125;输出结果:黑马程序员 小贴士：字符流，只能操作文本文件，不能操作图片，视频等非文本文件。 第四章 IO异常的处理JDK7前处理之前的入门练习，我们一直把异常抛出，而实际开发中并不能这样处理，建议使用try...catch...finally 代码块，处理异常部分，代码使用演示： 12345678910111213141516171819202122public class HandleException1 &#123; public static void main(String[] args) &#123; // 声明变量 FileWriter fw = null; try &#123; //创建流对象 fw = new FileWriter(\"fw.txt\"); // 写出数据 fw.write(\"黑马程序员\"); //黑马程序员 &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (fw != null) &#123; fw.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; JDK7的处理还可以使用JDK7优化后的try-with-resource 语句，该语句确保了每个资源在语句结束时关闭。所谓的资源（resource）是指在程序完成后，必须关闭的对象。 格式： 12345try (创建流对象语句，如果多个,使用';'隔开) &#123; // 读写数据&#125; catch (IOException e) &#123; e.printStackTrace();&#125; 代码使用演示： 1234567891011public class HandleException2 &#123; public static void main(String[] args) &#123; // 创建流对象 try ( FileWriter fw = new FileWriter(\"fw.txt\"); ) &#123; // 写出数据 fw.write(\"黑马程序员\"); //黑马程序员 &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; JDK9的改进(了解内容)JDK9中try-with-resource 的改进，对于引入对象的方式，支持的更加简洁。被引入的对象，同样可以自动关闭，无需手动close，我们来了解一下格式。 改进前格式： 123456789// 被final修饰的对象final Resource resource1 = new Resource(\"resource1\");// 普通对象Resource resource2 = new Resource(\"resource2\");// 引入方式：创建新的变量保存try (Resource r1 = resource1; Resource r2 = resource2) &#123; // 使用对象&#125; 改进后格式： 123456789// 被final修饰的对象final Resource resource1 = new Resource(\"resource1\");// 普通对象Resource resource2 = new Resource(\"resource2\");// 引入方式：直接引入try (resource1; resource2) &#123; // 使用对象&#125; 改进后，代码使用演示： 12345678910111213141516171819public class TryDemo &#123; public static void main(String[] args) throws IOException &#123; // 创建流对象 final FileReader fr = new FileReader(\"in.txt\"); FileWriter fw = new FileWriter(\"out.txt\"); // 引入到try中 try (fr; fw) &#123; // 定义变量 int b; // 读取数据 while ((b = fr.read())!=-1) &#123; // 写出数据 fw.write(b); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 第五章 属性集5.1 概述java.util.Properties 继承于Hashtable ，来表示一个持久的属性集。它使用键值结构存储数据，每个键及其对应值都是一个字符串。该类也被许多Java类使用，比如获取系统属性时，System.getProperties 方法就是返回一个Properties对象。 5.2 Properties类构造方法 public Properties() :创建一个空的属性列表。 基本的存储方法 public Object setProperty(String key, String value) ： 保存一对属性。 public String getProperty(String key) ：使用此属性列表中指定的键搜索属性值。 public Set&lt;String&gt; stringPropertyNames() ：所有键的名称的集合。 12345678910111213141516171819202122232425262728293031public class ProDemo &#123; public static void main(String[] args) throws FileNotFoundException &#123; // 创建属性集对象 Properties properties = new Properties(); // 添加键值对元素 properties.setProperty(\"filename\", \"a.txt\"); properties.setProperty(\"length\", \"209385038\"); properties.setProperty(\"location\", \"D:\\\\a.txt\"); // 打印属性集对象 System.out.println(properties); // 通过键,获取属性值 System.out.println(properties.getProperty(\"filename\")); System.out.println(properties.getProperty(\"length\")); System.out.println(properties.getProperty(\"location\")); // 遍历属性集,获取所有键的集合 Set&lt;String&gt; strings = properties.stringPropertyNames(); // 打印键值对 for (String key : strings ) &#123; System.out.println(key+\" -- \"+properties.getProperty(key)); &#125; &#125;&#125;输出结果：&#123;filename=a.txt, length=209385038, location=D:\\a.txt&#125;a.txt209385038D:\\a.txtfilename -- a.txtlength -- 209385038location -- D:\\a.txt 与流相关的方法 public void load(InputStream inStream)： 从字节输入流中读取键值对。 参数中使用了字节输入流，通过流对象，可以关联到某文件上，这样就能够加载文本中的数据了。文本数据格式: 123filename=a.txtlength=209385038location=D:\\a.txt 加载代码演示： 1234567891011121314151617public class ProDemo2 &#123; public static void main(String[] args) throws FileNotFoundException &#123; // 创建属性集对象 Properties pro = new Properties(); // 加载文本中信息到属性集 pro.load(new FileInputStream(\"read.txt\")); // 遍历集合并打印 Set&lt;String&gt; strings = pro.stringPropertyNames(); for (String key : strings ) &#123; System.out.println(key+\" -- \"+pro.getProperty(key)); &#125; &#125;&#125;输出结果：filename -- a.txtlength -- 209385038location -- D:\\a.txt 小贴士：文本中的数据，必须是键值对形式，可以使用空格、等号、冒号等符号分隔。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/03【List、Set】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-29T02:17:03.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/03【List、Set】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/03【List、Set】/","excerpt":"","text":"day03 【List、Set、数据结构、Collections】主要内容 List集合 Set集合 数据结构 教学目标 能够说出List集合特点 能够说出常见的数据结构 L能够说出数组结构特点 能够说出栈结构特点 能够说出队列结构特点 能够说出单向链表结构特点 能够说出Set集合的特点 能够说出哈希表的特点 使用HashSet集合存储自定义元素 能够说出可变参数的格式 能够使用集合工具类 能够使用Comparator比较器进行排序 第一章 List集合我们掌握了Collection接口的使用后，再来看看Collection接口中的子类，他们都具备那些特性呢？ 接下来，我们一起学习Collection中的常用几个子类（java.util.List集合、java.util.Set集合）。 1.1 List接口介绍java.util.List接口继承自Collection接口，是单列集合的一个重要分支，习惯性地会将实现了List接口的对象称为List集合。在List集合中允许出现重复的元素，所有的元素是以一种线性方式进行存储的，在程序中可以通过索引来访问集合中的指定元素。另外，List集合还有一个特点就是元素有序，即元素的存入顺序和取出顺序一致。 看完API，我们总结一下： List接口特点： 它是一个元素存取有序的集合。例如，存元素的顺序是11、22、33。那么集合中，元素的存储就是按照11、22、33的顺序完成的）。 它是一个带有索引的集合，通过索引就可以精确的操作集合中的元素（与数组的索引是一个道理）。 集合中可以有重复的元素，通过元素的equals方法，来比较是否为重复的元素。 tips:我们在基础班的时候已经学习过List接口的子类java.util.ArrayList类，该类中的方法都是来自List中定义。 1.2 List接口中常用方法List作为Collection集合的子接口，不但继承了Collection接口中的全部方法，而且还增加了一些根据元素索引来操作集合的特有方法，如下： public void add(int index, E element): 将指定的元素，添加到该集合中的指定位置上。 public E get(int index):返回集合中指定位置的元素。 public E remove(int index): 移除列表中指定位置的元素, 返回的是被移除的元素。 public E set(int index, E element):用指定元素替换集合中指定位置的元素,返回值的更新前的元素。 List集合特有的方法都是跟索引相关，我们在基础班都学习过，那么我们再来复习一遍吧： 12345678910111213141516171819202122232425262728293031323334353637383940public class ListDemo &#123; public static void main(String[] args) &#123; // 创建List集合对象 List&lt;String&gt; list = new ArrayList&lt;String&gt;(); // 往 尾部添加 指定元素 list.add(\"图图\"); list.add(\"小美\"); list.add(\"不高兴\"); System.out.println(list); // add(int index,String s) 往指定位置添加 list.add(1,\"没头脑\"); System.out.println(list); // String remove(int index) 删除指定位置元素 返回被删除元素 // 删除索引位置为2的元素 System.out.println(\"删除索引位置为2的元素\"); System.out.println(list.remove(2)); System.out.println(list); // String set(int index,String s) // 在指定位置 进行 元素替代（改） // 修改指定位置元素 list.set(0, \"三毛\"); System.out.println(list); // String get(int index) 获取指定位置元素 // 跟size() 方法一起用 来 遍历的 for(int i = 0;i&lt;list.size();i++)&#123; System.out.println(list.get(i)); &#125; //还可以使用增强for for (String string : list) &#123; System.out.println(string); &#125; &#125;&#125; tips:我们之前学习Colletion体系的时候，发现List集合下有很多集合，它们的存储结构不同，这样就导致了这些集合它们有各自的特点，供我们在不同的环境下使用，那么常见的数据结构有哪些呢？在下一章我们来介绍： 第二章 数据结构2.1 数据结构有什么用？当你用着java里面的容器类很爽的时候，你有没有想过，怎么ArrayList就像一个无限扩充的数组，也好像链表之类的。好用吗？好用，这就是数据结构的用处，只不过你在不知不觉中使用了。 现实世界的存储，我们使用的工具和建模。每种数据结构有自己的优点和缺点，想想如果Google的数据用的是数组的存储，我们还能方便地查询到所需要的数据吗？而算法，在这么多的数据中如何做到最快的插入，查找，删除，也是在追求更快。 我们java是面向对象的语言，就好似自动档轿车，C语言好似手动档吉普。数据结构呢？是变速箱的工作原理。你完全可以不知道变速箱怎样工作，就把自动档的车子从 A点 开到 B点，而且未必就比懂得的人慢。写程序这件事，和开车一样，经验可以起到很大作用，但如果你不知道底层是怎么工作的，就永远只能开车，既不会修车，也不能造车。当然了，数据结构内容比较多，细细的学起来也是相对费功夫的，不可能达到一蹴而就。我们将常见的数据结构：堆栈、队列、数组、链表和红黑树 这几种给大家介绍一下，作为数据结构的入门，了解一下它们的特点即可。 2.2 常见的数据结构数据存储的常用结构有：栈、队列、数组、链表和红黑树。我们分别来了解一下： 栈 栈：stack,又称堆栈，它是运算受限的线性表，其限制是仅允许在标的一端进行插入和删除操作，不允许在其他任何位置进行添加、查找、删除等操作。 简单的说：采用该结构的集合，对元素的存取有如下的特点 先进后出（即，存进去的元素，要在后它后面的元素依次取出后，才能取出该元素）。例如，子弹压进弹夹，先压进去的子弹在下面，后压进去的子弹在上面，当开枪时，先弹出上面的子弹，然后才能弹出下面的子弹。 栈的入口、出口的都是栈的顶端位置。 这里两个名词需要注意： 压栈：就是存元素。即，把元素存储到栈的顶端位置，栈中已有元素依次向栈底方向移动一个位置。 弹栈：就是取元素。即，把栈的顶端位置元素取出，栈中已有元素依次向栈顶方向移动一个位置。 队列 队列：queue,简称队，它同堆栈一样，也是一种运算受限的线性表，其限制是仅允许在表的一端进行插入，而在表的另一端进行删除。 简单的说，采用该结构的集合，对元素的存取有如下的特点： 先进先出（即，存进去的元素，要在后它前面的元素依次取出后，才能取出该元素）。例如，小火车过山洞，车头先进去，车尾后进去；车头先出来，车尾后出来。 队列的入口、出口各占一侧。例如，下图中的左侧为入口，右侧为出口。 数组 数组:Array,是有序的元素序列，数组是在内存中开辟一段连续的空间，并在此空间存放元素。就像是一排出租屋，有100个房间，从001到100每个房间都有固定编号，通过编号就可以快速找到租房子的人。 简单的说,采用该结构的集合，对元素的存取有如下的特点： 查找元素快：通过索引，可以快速访问指定位置的元素 增删元素慢 指定索引位置增加元素：需要创建一个新数组，将指定新元素存储在指定索引位置，再把原数组元素根据索引，复制到新数组对应索引的位置。如下图 指定索引位置删除元素：需要创建一个新数组，把原数组元素根据索引，复制到新数组对应索引的位置，原数组中指定索引位置元素不复制到新数组中。如下图 链表 链表:linked list,由一系列节点node（链表中每一个元素称为节点）组成，节点可以在运行时i动态生成。每个节点包括两个部分：一个是存储数据元素的数据域，另一个是存储下一个结点地址的指针域。我们常说的链表结构有单向链表与双向链表，那么这里给大家介绍的是单向链表。 简单的说，采用该结构的集合，对元素的存取有如下的特点： 多个结点之间，通过地址进行连接。例如，多个人手拉手，每个人使用自己的右手拉住下个人的左手，依次类推，这样多个人就连在一起了。 查找元素慢：想查找某个元素，需要通过连接的节点，依次向后查找指定元素 增删元素快： 增加元素：只需要修改连接下个元素的地址即可。 删除元素：只需要修改连接下个元素的地址即可。 红黑树 二叉树：binary tree ,是每个结点不超过2的有序树（tree） 。 简单的理解，就是一种类似于我们生活中树的结构，只不过每个结点上都最多只能有两个子结点。 二叉树是每个节点最多有两个子树的树结构。顶上的叫根结点，两边被称作“左子树”和“右子树”。 如图： 我们要说的是二叉树的一种比较有意思的叫做红黑树，红黑树本身就是一颗二叉查找树，将节点插入后，该树仍然是一颗二叉查找树。也就意味着，树的键值仍然是有序的。 第三章 List的子类3.1 ArrayList集合java.util.ArrayList集合数据存储的结构是数组结构。元素增删慢，查找快，由于日常开发中使用最多的功能为查询数据、遍历数据，所以ArrayList是最常用的集合。 许多程序员开发时非常随意地使用ArrayList完成任何需求，并不严谨，这种用法是不提倡的。 3.2 LinkedList集合java.util.LinkedList集合数据存储的结构是链表结构。方便元素添加、删除的集合。 LinkedList是一个双向链表，那么双向链表是什么样子的呢，我们用个图了解下 实际开发中对一个集合元素的添加与删除经常涉及到首尾操作，而LinkedList提供了大量首尾操作的方法。这些方法我们作为了解即可： public void addFirst(E e):将指定元素插入此列表的开头。 public void addLast(E e):将指定元素添加到此列表的结尾。 public E getFirst():返回此列表的第一个元素。 public E getLast():返回此列表的最后一个元素。 public E removeFirst():移除并返回此列表的第一个元素。 public E removeLast():移除并返回此列表的最后一个元素。 public E pop():从此列表所表示的堆栈处弹出一个元素。 public void push(E e):将元素推入此列表所表示的堆栈。 public boolean isEmpty()：如果列表不包含元素，则返回true。 LinkedList是List的子类，List中的方法LinkedList都是可以使用，这里就不做详细介绍，我们只需要了解LinkedList的特有方法即可。在开发时，LinkedList集合也可以作为堆栈，队列的结构使用。（了解即可） 方法演示： 12345678910111213141516171819202122public class LinkedListDemo &#123; public static void main(String[] args) &#123; LinkedList&lt;String&gt; link = new LinkedList&lt;String&gt;(); //添加元素 link.addFirst(\"abc1\"); link.addFirst(\"abc2\"); link.addFirst(\"abc3\"); System.out.println(link); // 获取元素 System.out.println(link.getFirst()); System.out.println(link.getLast()); // 删除元素 System.out.println(link.removeFirst()); System.out.println(link.removeLast()); while (!link.isEmpty()) &#123; //判断集合是否为空 System.out.println(link.pop()); //弹出集合中的栈顶元素 &#125; System.out.println(link); &#125;&#125; 第三章 Set接口java.util.Set接口和java.util.List接口一样，同样继承自Collection接口，它与Collection接口中的方法基本一致，并没有对Collection接口进行功能上的扩充，只是比Collection接口更加严格了。与List接口不同的是，Set接口中元素无序，并且都会以某种规则保证存入的元素不出现重复。 Set集合有多个子类，这里我们介绍其中的java.util.HashSet、java.util.LinkedHashSet这两个集合。 tips:Set集合取出元素的方式可以采用：迭代器、增强for。 3.1 HashSet集合介绍java.util.HashSet是Set接口的一个实现类，它所存储的元素是不可重复的，并且元素都是无序的(即存取顺序不一致)。java.util.HashSet底层的实现其实是一个java.util.HashMap支持，由于我们暂时还未学习，先做了解。 HashSet是根据对象的哈希值来确定元素在集合中的存储位置，因此具有良好的存取和查找性能。保证元素唯一性的方式依赖于：hashCode与equals方法。 我们先来使用一下Set集合存储，看下现象，再进行原理的讲解: 12345678910111213141516public class HashSetDemo &#123; public static void main(String[] args) &#123; //创建 Set集合 HashSet&lt;String&gt; set = new HashSet&lt;String&gt;(); //添加元素 set.add(new String(\"cba\")); set.add(\"abc\"); set.add(\"bac\"); set.add(\"cba\"); //遍历 for (String name : set) &#123; System.out.println(name); &#125; &#125;&#125; 输出结果如下，说明集合中不能存储重复元素： 123cbaabcbac tips:根据结果我们发现字符串”cba”只存储了一个，也就是说重复的元素set集合不存储。 2.2 HashSet集合存储数据的结构（哈希表）什么是哈希表呢？ 在JDK1.8之前，哈希表底层采用数组+链表实现，即使用链表处理冲突，同一hash值的链表都存储在一个链表里。但是当位于一个桶中的元素较多，即hash值相等的元素较多时，通过key值依次查找的效率较低。而JDK1.8中，哈希表存储采用数组+链表+红黑树实现，当链表长度超过阈值（8）时，将链表转换为红黑树，这样大大减少了查找时间。 简单的来说，哈希表是由数组+链表+红黑树（JDK1.8增加了红黑树部分）实现的，如下图所示。 看到这张图就有人要问了，这个是怎么存储的呢？ 为了方便大家的理解我们结合一个存储流程图来说明一下： 总而言之，JDK1.8引入红黑树大程度优化了HashMap的性能，那么对于我们来讲保证HashSet集合元素的唯一，其实就是根据对象的hashCode和equals方法来决定的。如果我们往集合中存放自定义的对象，那么保证其唯一，就必须复写hashCode和equals方法建立属于当前对象的比较方式。 2.3 HashSet存储自定义类型元素给HashSet中存放自定义类型元素时，需要重写对象中的hashCode和equals方法，建立自己的比较方式，才能保证HashSet集合中的对象唯一 创建自定义Student类 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class Student &#123; private String name; private int age; public Student() &#123; &#125; public Student(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Student student = (Student) o; return age == student.age &amp;&amp; Objects.equals(name, student.name); &#125; @Override public int hashCode() &#123; return Objects.hash(name, age); &#125;&#125; 123456789101112131415161718192021public class HashSetDemo2 &#123; public static void main(String[] args) &#123; //创建集合对象 该集合中存储 Student类型对象 HashSet&lt;Student&gt; stuSet = new HashSet&lt;Student&gt;(); //存储 Student stu = new Student(\"于谦\", 43); stuSet.add(stu); stuSet.add(new Student(\"郭德纲\", 44)); stuSet.add(new Student(\"于谦\", 43)); stuSet.add(new Student(\"郭麒麟\", 23)); stuSet.add(stu); for (Student stu2 : stuSet) &#123; System.out.println(stu2); &#125; &#125;&#125;执行结果：Student [name=郭德纲, age=44]Student [name=于谦, age=43]Student [name=郭麒麟, age=23] 2.3 LinkedHashSet我们知道HashSet保证元素唯一，可是元素存放进去是没有顺序的，那么我们要保证有序，怎么办呢？ 在HashSet下面有一个子类java.util.LinkedHashSet，它是链表和哈希表组合的一个数据存储结构。 演示代码如下: 123456789101112131415161718public class LinkedHashSetDemo &#123; public static void main(String[] args) &#123; Set&lt;String&gt; set = new LinkedHashSet&lt;String&gt;(); set.add(\"bbb\"); set.add(\"aaa\"); set.add(\"abc\"); set.add(\"bbc\"); Iterator&lt;String&gt; it = set.iterator(); while (it.hasNext()) &#123; System.out.println(it.next()); &#125; &#125;&#125;结果： bbb aaa abc bbc 1.9 可变参数在JDK1.5之后，如果我们定义一个方法需要接受多个参数，并且多个参数类型一致，我们可以对其简化成如下格式： 1修饰符 返回值类型 方法名(参数类型... 形参名)&#123; &#125; 其实这个书写完全等价与 1修饰符 返回值类型 方法名(参数类型[] 形参名)&#123; &#125; 只是后面这种定义，在调用时必须传递数组，而前者可以直接传递数据即可。 JDK1.5以后。出现了简化操作。… 用在参数上，称之为可变参数。 同样是代表数组，但是在调用这个带有可变参数的方法时，不用创建数组(这就是简单之处)，直接将数组中的元素作为实际参数进行传递，其实编译成的class文件，将这些元素先封装到一个数组中，在进行传递。这些动作都在编译.class文件时，自动完成了。 代码演示： 1234567891011121314151617181920212223242526272829303132public class ChangeArgs &#123; public static void main(String[] args) &#123; int[] arr = &#123; 1, 4, 62, 431, 2 &#125;; int sum = getSum(arr); System.out.println(sum); // 6 7 2 12 2121 // 求 这几个元素和 6 7 2 12 2121 int sum2 = getSum(6, 7, 2, 12, 2121); System.out.println(sum2); &#125; /* * 完成数组 所有元素的求和 原始写法 public static int getSum(int[] arr)&#123; int sum = 0; for(int a : arr)&#123; sum += a; &#125; return sum; &#125; */ //可变参数写法 public static int getSum(int... arr) &#123; int sum = 0; for (int a : arr) &#123; sum += a; &#125; return sum; &#125;&#125; tips: 上述add方法在同一个类中，只能存在一个。因为会发生调用的不确定性 注意：如果在方法书写时，这个方法拥有多参数，参数中包含可变参数，可变参数一定要写在参数列表的末尾位置。 第二章 Collections2.1 常用功能 java.utils.Collections是集合工具类，用来对集合进行操作。部分方法如下： public static &lt;T&gt; boolean addAll(Collection&lt;T&gt; c, T... elements):往集合中添加一些元素。 public static void shuffle(List&lt;?&gt; list) 打乱顺序:打乱集合顺序。 public static &lt;T&gt; void sort(List&lt;T&gt; list):将集合中元素按照默认规则排序。 public static &lt;T&gt; void sort(List&lt;T&gt; list，Comparator&lt;? super T&gt; ):将集合中元素按照指定规则排序。 代码演示： 12345678910111213141516171819public class CollectionsDemo &#123; public static void main(String[] args) &#123; ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(); //原来写法 //list.add(12); //list.add(14); //list.add(15); //list.add(1000); //采用工具类 完成 往集合中添加元素 Collections.addAll(list, 5, 222, 1，2); System.out.println(list); //排序方法 Collections.sort(list); System.out.println(list); &#125;&#125;结果：[5, 222, 1, 2][1, 2, 5, 222] 代码演示之后 ，发现我们的集合按照顺序进行了排列，可是这样的顺序是采用默认的顺序，如果想要指定顺序那该怎么办呢？ 我们发现还有个方法没有讲，public static &lt;T&gt; void sort(List&lt;T&gt; list，Comparator&lt;? super T&gt; ):将集合中元素按照指定规则排序。接下来讲解一下指定规则的排列。 2.2 Comparator比较器我们还是先研究这个方法 public static &lt;T&gt; void sort(List&lt;T&gt; list):将集合中元素按照默认规则排序。 不过这次存储的是字符串类型。 123456789101112public class CollectionsDemo2 &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(\"cba\"); list.add(\"aba\"); list.add(\"sba\"); list.add(\"nba\"); //排序方法 Collections.sort(list); System.out.println(list); &#125;&#125; 结果： 1[aba, cba, nba, sba] 我们使用的是默认的规则完成字符串的排序，那么默认规则是怎么定义出来的呢？ 说到排序了，简单的说就是两个对象之间比较大小，那么在JAVA中提供了两种比较实现的方式，一种是比较死板的采用java.lang.Comparable接口去实现，一种是灵活的当我需要做排序的时候在去选择的java.util.Comparator接口完成。 那么我们采用的public static &lt;T&gt; void sort(List&lt;T&gt; list)这个方法完成的排序，实际上要求了被排序的类型需要实现Comparable接口完成比较的功能，在String类型上如下： 1public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123; String类实现了这个接口，并完成了比较规则的定义，但是这样就把这种规则写死了，那比如我想要字符串按照第一个字符降序排列，那么这样就要修改String的源代码，这是不可能的了，那么这个时候我们可以使用 public static &lt;T&gt; void sort(List&lt;T&gt; list，Comparator&lt;? super T&gt; )方法灵活的完成，这个里面就涉及到了Comparator这个接口，位于位于java.util包下，排序是comparator能实现的功能之一,该接口代表一个比较器，比较器具有可比性！顾名思义就是做排序的，通俗地讲需要比较两个对象谁排在前谁排在后，那么比较的方法就是： public int compare(String o1, String o2)：比较其两个参数的顺序。 两个对象比较的结果有三种：大于，等于，小于。 如果要按照升序排序，则o1 小于o2，返回（负数），相等返回0，01大于02返回（正数）如果要按照降序排序则o1 小于o2，返回（正数），相等返回0，01大于02返回（负数） 操作如下: 1234567891011121314151617public class CollectionsDemo3 &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(); list.add(\"cba\"); list.add(\"aba\"); list.add(\"sba\"); list.add(\"nba\"); //排序方法 按照第一个单词的降序 Collections.sort(list, new Comparator&lt;String&gt;() &#123; @Override public int compare(String o1, String o2) &#123; return o2.charAt(0) - o1.charAt(0); &#125; &#125;); System.out.println(list); &#125;&#125; 结果如下： 1[sba, nba, cba, aba] 2.3 简述Comparable和Comparator两个接口的区别。Comparable：强行对实现它的每个类的对象进行整体排序。这种排序被称为类的自然排序，类的compareTo方法被称为它的自然比较方法。只能在类中实现compareTo()一次，不能经常修改类的代码实现自己想要的排序。实现此接口的对象列表（和数组）可以通过Collections.sort（和Arrays.sort）进行自动排序，对象可以用作有序映射中的键或有序集合中的元素，无需指定比较器。 Comparator强行对某个对象进行整体排序。可以将Comparator 传递给sort方法（如Collections.sort或 Arrays.sort），从而允许在排序顺序上实现精确控制。还可以使用Comparator来控制某些数据结构（如有序set或有序映射）的顺序，或者为那些没有自然顺序的对象collection提供排序。 2.4 练习创建一个学生类，存储到ArrayList集合中完成指定排序操作。 Student 初始类 123456789101112131415161718192021222324252627282930313233343536public class Student&#123; private String name; private int age; public Student() &#123; &#125; public Student(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public String toString() &#123; return \"Student&#123;\" + \"name='\" + name + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; 测试类： 1234567891011121314151617181920212223242526public class Demo &#123; public static void main(String[] args) &#123; // 创建四个学生对象 存储到集合中 ArrayList&lt;Student&gt; list = new ArrayList&lt;Student&gt;(); list.add(new Student(\"rose\",18)); list.add(new Student(\"jack\",16)); list.add(new Student(\"abc\",16)); list.add(new Student(\"ace\",17)); list.add(new Student(\"mark\",16)); /* 让学生 按照年龄排序 升序 */// Collections.sort(list);//要求 该list中元素类型 必须实现比较器Comparable接口 for (Student student : list) &#123; System.out.println(student); &#125; &#125;&#125; 发现，当我们调用Collections.sort()方法的时候 程序报错了。 原因：如果想要集合中的元素完成排序，那么必须要实现比较器Comparable接口。 于是我们就完成了Student类的一个实现，如下： 1234567public class Student implements Comparable&lt;Student&gt;&#123; .... @Override public int compareTo(Student o) &#123; return this.age-o.age;//升序 &#125;&#125; 再次测试，代码就OK 了效果如下： 12345Student&#123;name='jack', age=16&#125;Student&#123;name='abc', age=16&#125;Student&#123;name='mark', age=16&#125;Student&#123;name='ace', age=17&#125;Student&#123;name='rose', age=18&#125; 2.5 扩展如果在使用的时候，想要独立的定义规则去使用 可以采用Collections.sort(List list,Comparetor c)方式，自己定义规则： 123456Collections.sort(list, new Comparator&lt;Student&gt;() &#123; @Override public int compare(Student o1, Student o2) &#123; return o2.getAge()-o1.getAge();//以学生的年龄降序 &#125;&#125;); 效果： 12345Student&#123;name=&apos;rose&apos;, age=18&#125;Student&#123;name=&apos;ace&apos;, age=17&#125;Student&#123;name=&apos;jack&apos;, age=16&#125;Student&#123;name=&apos;abc&apos;, age=16&#125;Student&#123;name=&apos;mark&apos;, age=16&#125; 如果想要规则更多一些，可以参考下面代码： 12345678910111213Collections.sort(list, new Comparator&lt;Student&gt;() &#123; @Override public int compare(Student o1, Student o2) &#123; // 年龄降序 int result = o2.getAge()-o1.getAge();//年龄降序 if(result==0)&#123;//第一个规则判断完了 下一个规则 姓名的首字母 升序 result = o1.getName().charAt(0)-o2.getName().charAt(0); &#125; return result; &#125; &#125;); 效果如下： 12345Student&#123;name=&apos;rose&apos;, age=18&#125;Student&#123;name=&apos;ace&apos;, age=17&#125;Student&#123;name=&apos;abc&apos;, age=16&#125;Student&#123;name=&apos;jack&apos;, age=16&#125;Student&#123;name=&apos;mark&apos;, age=16&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/13【Stream流】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/13【Stream流】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/13【Stream流】/","excerpt":"","text":"day14【Stream流】主要内容 常用函数式接口 Stream流 教学目标 能够使用Function&lt;T, R&gt;函数式接口 能够使用Predicate函数式接口 能够理解流与集合相比的优点 能够理解流的延迟执行特点 能够通过集合、映射或数组获取流 能够掌握常用的流操作 能够使用流进行并发操作 能够将流中的内容收集到集合中 能够将流中的内容收集到数组中 第一章 常用函数式接口1.1 Predicate接口有时候我们需要对某种类型的数据进行判断，从而得到一个boolean值结果。这时可以使用java.util.function.Predicate&lt;T&gt;接口。 抽象方法：testPredicate接口中包含一个抽象方法：boolean test(T t)。用于条件判断的场景： 123456789101112import java.util.function.Predicate;public class Demo15PredicateTest &#123; private static void method(Predicate&lt;String&gt; predicate) &#123; boolean veryLong = predicate.test(\"HelloWorld\"); System.out.println(\"字符串很长吗：\" + veryLong); &#125; public static void main(String[] args) &#123; method(s -&gt; s.length() &gt; 5); &#125;&#125; 条件判断的标准是传入的Lambda表达式逻辑，只要字符串长度大于5则认为很长。 默认方法：and既然是条件判断，就会存在与、或、非三种常见的逻辑关系。其中将两个Predicate条件使用“与”逻辑连接起来实现“并且”的效果时，可以使用default方法and。其JDK源码为： 1234default Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) &#123; Objects.requireNonNull(other); return (t) -&gt; test(t) &amp;&amp; other.test(t);&#125; 如果要判断一个字符串既要包含大写“H”，又要包含大写“W”，那么： 123456789101112import java.util.function.Predicate;public class Demo16PredicateAnd &#123; private static void method(Predicate&lt;String&gt; one, Predicate&lt;String&gt; two) &#123; boolean isValid = one.and(two).test(\"Helloworld\"); System.out.println(\"字符串符合要求吗：\" + isValid); &#125; public static void main(String[] args) &#123; method(s -&gt; s.contains(\"H\"), s -&gt; s.contains(\"W\")); &#125;&#125; 默认方法：or与and的“与”类似，默认方法or实现逻辑关系中的“或”。JDK源码为： 1234default Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) &#123; Objects.requireNonNull(other); return (t) -&gt; test(t) || other.test(t);&#125; 如果希望实现逻辑“字符串包含大写H或者包含大写W”，那么代码只需要将“and”修改为“or”名称即可，其他都不变： 123456789101112import java.util.function.Predicate;public class Demo16PredicateAnd &#123; private static void method(Predicate&lt;String&gt; one, Predicate&lt;String&gt; two) &#123; boolean isValid = one.or(two).test(\"Helloworld\"); System.out.println(\"字符串符合要求吗：\" + isValid); &#125; public static void main(String[] args) &#123; method(s -&gt; s.contains(\"H\"), s -&gt; s.contains(\"W\")); &#125;&#125; 默认方法：negate“与”、“或”已经了解了，剩下的“非”（取反）也会简单。默认方法negate的JDK源代码为： 123default Predicate&lt;T&gt; negate() &#123; return (t) -&gt; !test(t);&#125; 从实现中很容易看出，它是执行了test方法之后，对结果boolean值进行“!”取反而已。一定要在test方法调用之前调用negate方法，正如and和or方法一样： 123456789101112import java.util.function.Predicate;public class Demo17PredicateNegate &#123; private static void method(Predicate&lt;String&gt; predicate) &#123; boolean veryLong = predicate.negate().test(\"HelloWorld\"); System.out.println(\"字符串很长吗：\" + veryLong); &#125; public static void main(String[] args) &#123; method(s -&gt; s.length() &lt; 5); &#125;&#125; 1.2 练习：集合信息筛选题目数组当中有多条“姓名+性别”的信息如下，请通过Predicate接口的拼装将符合要求的字符串筛选到集合ArrayList中，需要同时满足两个条件： 必须为女生； 姓名为4个字。 12345public class DemoPredicate &#123; public static void main(String[] args) &#123; String[] array = &#123; \"迪丽热巴,女\", \"古力娜扎,女\", \"马尔扎哈,男\", \"赵丽颖,女\" &#125;; &#125;&#125; 解答123456789101112131415161718192021222324import java.util.ArrayList;import java.util.List;import java.util.function.Predicate;public class DemoPredicate &#123; public static void main(String[] args) &#123; String[] array = &#123; \"迪丽热巴,女\", \"古力娜扎,女\", \"马尔扎哈,男\", \"赵丽颖,女\" &#125;; List&lt;String&gt; list = filter(array, s -&gt; \"女\".equals(s.split(\",\")[1]), s -&gt; s.split(\",\")[0].length() == 3); System.out.println(list); &#125; private static List&lt;String&gt; filter(String[] array, Predicate&lt;String&gt; one, Predicate&lt;String&gt; two) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); for (String info : array) &#123; if (one.and(two).test(info)) &#123; list.add(info); &#125; &#125; return list; &#125;&#125; 1.3 Function接口java.util.function.Function&lt;T,R&gt;接口用来根据一个类型的数据得到另一个类型的数据，前者称为前置条件，后者称为后置条件。有进有出，所以称为“函数Function”。 抽象方法：applyFunction接口中最主要的抽象方法为：R apply(T t)，根据类型T的参数获取类型R的结果。使用的场景例如：将String类型转换为Integer类型。 12345678910111213import java.util.function.Function;public class Demo11FunctionApply &#123; private static void method(Function&lt;String, Integer&gt; function) &#123; int num = function.apply(\"10\"); System.out.println(num + 20); &#125; public static void main(String[] args) &#123; method(s -&gt; Integer.parseInt(s)); method(Integer::parseInt); &#125;&#125; 当然，最好是通过方法引用的写法。 默认方法：andThenFunction接口中有一个默认的andThen方法，用来进行组合操作。JDK源代码如： 1234default &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) &#123; Objects.requireNonNull(after); return (T t) -&gt; after.apply(apply(t));&#125; 该方法同样用于“先做什么，再做什么”的场景，和Consumer中的andThen差不多： 123456789101112import java.util.function.Function;public class Demo12FunctionAndThen &#123; private static void method(Function&lt;String, Integer&gt; one, Function&lt;Integer, Integer&gt; two) &#123; int num = one.andThen(two).apply(\"10\"); System.out.println(num + 20); &#125; public static void main(String[] args) &#123; method(Integer::parseInt, i -&gt; i *= 10); &#125;&#125; 第一个操作是将字符串解析成为int数字，第二个操作是乘以10。两个操作通过andThen按照前后顺序组合到了一起。 请注意，Function的前置条件泛型和后置条件泛型可以相同。 1.4 练习：自定义函数模型拼接题目请使用Function进行函数模型的拼接，按照顺序需要执行的多个函数操作为： 将字符串截取数字年龄部分，得到字符串； 将上一步的字符串转换成为int类型的数字； 将上一步的int数字累加100，得到结果int数字。 解答1234567891011121314151617import java.util.function.Function;public class DemoFunction &#123; public static void main(String[] args) &#123; String str = \"赵丽颖,20\"; int age = getAgeNum(str, s -&gt; s.split(\",\")[1], Integer::parseInt, n -&gt; n += 100); System.out.println(age); &#125; private static int getAgeNum(String str, Function&lt;String, String&gt; one, Function&lt;String, Integer&gt; two, Function&lt;Integer, Integer&gt; three) &#123; return one.andThen(two).andThen(three).apply(str); &#125;&#125; 1.5 总结：延迟方法与终结方法在上述学习到的多个常用函数式接口当中，方法可以分成两种： 延迟方法：只是在拼接Lambda函数模型的方法，并不立即执行得到结果。 终结方法：根据拼好的Lambda函数模型，立即执行得到结果值的方法。 通常情况下，这些常用的函数式接口中唯一的抽象方法为终结方法，而默认方法为延迟方法。但这并不是绝对的。下面的表格中进行了方法分类的整理： 接口名称 方法名称 抽象/默认 延迟/终结 Supplier get 抽象 终结 Consumer accept 抽象 终结 andThen 默认 延迟 Predicate test 抽象 终结 and 默认 延迟 or 默认 延迟 negate 默认 延迟 Function apply 抽象 终结 andThen 默认 延迟 备注：JDK中更多内置的常用函数式接口，请参考java.util.function包的API文档。 第二章 Stream流说到Stream便容易想到I/O Stream，而实际上，谁规定“流”就一定是“IO流”呢？在Java 8中，得益于Lambda所带来的函数式编程，引入了一个全新的Stream概念，用于解决已有集合类库既有的弊端。 2.1 引言传统集合的多步遍历代码几乎所有的集合（如Collection接口或Map接口等）都支持直接或间接的遍历操作。而当我们需要对集合中的元素进行操作的时候，除了必需的添加、删除、获取外，最典型的就是集合遍历。例如： 12345678910111213141516import java.util.ArrayList;import java.util.List;public class Demo01ForEach &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(\"张无忌\"); list.add(\"周芷若\"); list.add(\"赵敏\"); list.add(\"张强\"); list.add(\"张三丰\"); for (String name : list) &#123; System.out.println(name); &#125; &#125; &#125; 这是一段非常简单的集合遍历操作：对集合中的每一个字符串都进行打印输出操作。 循环遍历的弊端Java 8的Lambda让我们可以更加专注于做什么（What），而不是怎么做（How），这点此前已经结合内部类进行了对比说明。现在，我们仔细体会一下上例代码，可以发现： for循环的语法就是“怎么做” for循环的循环体才是“做什么” 为什么使用循环？因为要进行遍历。但循环是遍历的唯一方式吗？遍历是指每一个元素逐一进行处理，而并不是从第一个到最后一个顺次处理的循环。前者是目的，后者是方式。 试想一下，如果希望对集合中的元素进行筛选过滤： 将集合A根据条件一过滤为子集B； 然后再根据条件二过滤为子集C。 那怎么办？在Java 8之前的做法可能为： 12345678910111213141516171819202122232425262728293031import java.util.ArrayList;import java.util.List;public class Demo02NormalFilter &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(\"张无忌\"); list.add(\"周芷若\"); list.add(\"赵敏\"); list.add(\"张强\"); list.add(\"张三丰\"); List&lt;String&gt; zhangList = new ArrayList&lt;&gt;(); for (String name : list) &#123; if (name.startsWith(\"张\")) &#123; zhangList.add(name); &#125; &#125; List&lt;String&gt; shortList = new ArrayList&lt;&gt;(); for (String name : zhangList) &#123; if (name.length() == 3) &#123; shortList.add(name); &#125; &#125; for (String name : shortList) &#123; System.out.println(name); &#125; &#125;&#125; 这段代码中含有三个循环，每一个作用不同： 首先筛选所有姓张的人； 然后筛选名字有三个字的人； 最后进行对结果进行打印输出。 每当我们需要对集合中的元素进行操作的时候，总是需要进行循环、循环、再循环。这是理所当然的么？不是。循环是做事情的方式，而不是目的。另一方面，使用线性循环就意味着只能遍历一次。如果希望再次遍历，只能再使用另一个循环从头开始。 那，Lambda的衍生物Stream能给我们带来怎样更加优雅的写法呢？ Stream的更优写法下面来看一下借助Java 8的Stream API，什么才叫优雅： 123456789101112131415161718import java.util.ArrayList;import java.util.List;public class Demo03StreamFilter &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(\"张无忌\"); list.add(\"周芷若\"); list.add(\"赵敏\"); list.add(\"张强\"); list.add(\"张三丰\"); list.stream() .filter(s -&gt; s.startsWith(\"张\")) .filter(s -&gt; s.length() == 3) .forEach(System.out::println); &#125;&#125; 直接阅读代码的字面意思即可完美展示无关逻辑方式的语义：获取流、过滤姓张、过滤长度为3、逐一打印。代码中并没有体现使用线性循环或是其他任何算法进行遍历，我们真正要做的事情内容被更好地体现在代码中。 2.2 流式思想概述注意：请暂时忘记对传统IO流的固有印象！ 整体来看，流式思想类似于工厂车间的“生产流水线”。 当需要对多个元素进行操作（特别是多步操作）的时候，考虑到性能及便利性，我们应该首先拼好一个“模型”步骤方案，然后再按照方案去执行它。 这张图中展示了过滤、映射、跳过、计数等多步操作，这是一种集合元素的处理方案，而方案就是一种“函数模型”。图中的每一个方框都是一个“流”，调用指定的方法，可以从一个流模型转换为另一个流模型。而最右侧的数字3是最终结果。 这里的filter、map、skip都是在对函数模型进行操作，集合元素并没有真正被处理。只有当终结方法count执行的时候，整个模型才会按照指定策略执行操作。而这得益于Lambda的延迟执行特性。 备注：“Stream流”其实是一个集合元素的函数模型，它并不是集合，也不是数据结构，其本身并不存储任何元素（或其地址值）。 2.3 获取流java.util.stream.Stream&lt;T&gt;是Java 8新加入的最常用的流接口。（这并不是一个函数式接口。） 获取一个流非常简单，有以下几种常用的方式： 所有的Collection集合都可以通过stream默认方法获取流； Stream接口的静态方法of可以获取数组对应的流。 根据Collection获取流首先，java.util.Collection接口中加入了default方法stream用来获取流，所以其所有实现类均可获取流。 123456789101112131415161718import java.util.*;import java.util.stream.Stream;public class Demo04GetStream &#123; public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); // ... Stream&lt;String&gt; stream1 = list.stream(); Set&lt;String&gt; set = new HashSet&lt;&gt;(); // ... Stream&lt;String&gt; stream2 = set.stream(); Vector&lt;String&gt; vector = new Vector&lt;&gt;(); // ... Stream&lt;String&gt; stream3 = vector.stream(); &#125;&#125; 根据Map获取流java.util.Map接口不是Collection的子接口，且其K-V数据结构不符合流元素的单一特征，所以获取对应的流需要分key、value或entry等情况： 12345678910111213import java.util.HashMap;import java.util.Map;import java.util.stream.Stream;public class Demo05GetStream &#123; public static void main(String[] args) &#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); // ... Stream&lt;String&gt; keyStream = map.keySet().stream(); Stream&lt;String&gt; valueStream = map.values().stream(); Stream&lt;Map.Entry&lt;String, String&gt;&gt; entryStream = map.entrySet().stream(); &#125;&#125; 根据数组获取流如果使用的不是集合或映射而是数组，由于数组对象不可能添加默认方法，所以Stream接口中提供了静态方法of，使用很简单： 12345678import java.util.stream.Stream;public class Demo06GetStream &#123; public static void main(String[] args) &#123; String[] array = &#123; \"张无忌\", \"张翠山\", \"张三丰\", \"张一元\" &#125;; Stream&lt;String&gt; stream = Stream.of(array); &#125;&#125; 备注：of方法的参数其实是一个可变参数，所以支持数组。 2.4 常用方法流模型的操作很丰富，这里介绍一些常用的API。这些方法可以被分成两种： 终结方法：返回值类型不再是Stream接口自身类型的方法，因此不再支持类似StringBuilder那样的链式调用。本小节中，终结方法包括count和forEach方法。 非终结方法：返回值类型仍然是Stream接口自身类型的方法，因此支持链式调用。（除了终结方法外，其余方法均为非终结方法。） 备注：本小节之外的更多方法，请自行参考API文档。 过滤：filter可以通过filter方法将一个流转换成另一个子集流。方法签名： 1Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate); 该接口接收一个Predicate函数式接口参数（可以是一个Lambda或方法引用）作为筛选条件。 复习Predicate接口此前我们已经学习过java.util.stream.Predicate函数式接口，其中唯一的抽象方法为： 1boolean test(T t); 该方法将会产生一个boolean值结果，代表指定的条件是否满足。如果结果为true，那么Stream流的filter方法将会留用元素；如果结果为false，那么filter方法将会舍弃元素。 基本使用Stream流中的filter方法基本使用的代码如： 12345678import java.util.stream.Stream;public class Demo07StreamFilter &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; original = Stream.of(\"张无忌\", \"张三丰\", \"周芷若\"); Stream&lt;String&gt; result = original.filter(s -&gt; s.startsWith(\"张\")); &#125;&#125; 在这里通过Lambda表达式来指定了筛选的条件：必须姓张。 统计个数：count正如旧集合Collection当中的size方法一样，流提供count方法来数一数其中的元素个数： 1long count(); 该方法返回一个long值代表元素个数（不再像旧集合那样是int值）。基本使用： 123456789import java.util.stream.Stream;public class Demo09StreamCount &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; original = Stream.of(\"张无忌\", \"张三丰\", \"周芷若\"); Stream&lt;String&gt; result = original.filter(s -&gt; s.startsWith(\"张\")); System.out.println(result.count()); // 2 &#125;&#125; 取用前几个：limitlimit方法可以对流进行截取，只取用前n个。方法签名： 1Stream&lt;T&gt; limit(long maxSize); 参数是一个long型，如果集合当前长度大于参数则进行截取；否则不进行操作。基本使用： 123456789import java.util.stream.Stream;public class Demo10StreamLimit &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; original = Stream.of(\"张无忌\", \"张三丰\", \"周芷若\"); Stream&lt;String&gt; result = original.limit(2); System.out.println(result.count()); // 2 &#125;&#125; 跳过前几个：skip如果希望跳过前几个元素，可以使用skip方法获取一个截取之后的新流： 1Stream&lt;T&gt; skip(long n); 如果流的当前长度大于n，则跳过前n个；否则将会得到一个长度为0的空流。基本使用： 123456789import java.util.stream.Stream;public class Demo11StreamSkip &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; original = Stream.of(\"张无忌\", \"张三丰\", \"周芷若\"); Stream&lt;String&gt; result = original.skip(2); System.out.println(result.count()); // 1 &#125;&#125; 映射：map如果需要将流中的元素映射到另一个流中，可以使用map方法。方法签名： 1&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper); 该接口需要一个Function函数式接口参数，可以将当前流中的T类型数据转换为另一种R类型的流。 复习Function接口此前我们已经学习过java.util.stream.Function函数式接口，其中唯一的抽象方法为： 1R apply(T t); 这可以将一种T类型转换成为R类型，而这种转换的动作，就称为“映射”。 基本使用Stream流中的map方法基本使用的代码如： 12345678import java.util.stream.Stream;public class Demo08StreamMap &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; original = Stream.of(\"10\", \"12\", \"18\"); Stream&lt;Integer&gt; result = original.map(Integer::parseInt); &#125;&#125; 这段代码中，map方法的参数通过方法引用，将字符串类型转换成为了int类型（并自动装箱为Integer类对象）。 组合：concat如果有两个流，希望合并成为一个流，那么可以使用Stream接口的静态方法concat： 1static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; a, Stream&lt;? extends T&gt; b) 备注：这是一个静态方法，与java.lang.String当中的concat方法是不同的。 该方法的基本使用代码如： 123456789import java.util.stream.Stream;public class Demo12StreamConcat &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; streamA = Stream.of(\"张无忌\"); Stream&lt;String&gt; streamB = Stream.of(\"张翠山\"); Stream&lt;String&gt; result = Stream.concat(streamA, streamB); &#125;&#125; 逐一处理：forEach虽然方法名字叫forEach，但是与for循环中的“for-each”昵称不同，该方法并不保证元素的逐一消费动作在流中是被有序执行的。 1void forEach(Consumer&lt;? super T&gt; action); 该方法接收一个Consumer接口函数，会将每一个流元素交给该函数进行处理。例如： 12345678import java.util.stream.Stream;public class Demo12StreamForEach &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; stream = Stream.of(\"张无忌\", \"张三丰\", \"周芷若\"); stream.forEach(System.out::println); &#125;&#125; 在这里，方法引用System.out::println就是一个Consumer函数式接口的示例。 2.5 练习：集合元素处理（传统方式）题目现在有两个ArrayList集合存储队伍当中的多个成员姓名，要求使用传统的for循环（或增强for循环）依次进行以下若干操作步骤： 第一个队伍只要名字为3个字的成员姓名； 第一个队伍筛选之后只要前3个人； 第二个队伍只要姓张的成员姓名； 第二个队伍筛选之后不要前2个人； 将两个队伍合并为一个队伍； 根据姓名创建Person对象； 打印整个队伍的Person对象信息。 两个队伍（集合）的代码如下： 12345678910111213141516171819202122232425import java.util.ArrayList;import java.util.List;public class DemoArrayListNames &#123; public static void main(String[] args) &#123; List&lt;String&gt; one = new ArrayList&lt;&gt;(); one.add(\"迪丽热巴\"); one.add(\"宋远桥\"); one.add(\"苏星河\"); one.add(\"老子\"); one.add(\"庄子\"); one.add(\"孙子\"); one.add(\"洪七公\"); List&lt;String&gt; two = new ArrayList&lt;&gt;(); two.add(\"古力娜扎\"); two.add(\"张无忌\"); two.add(\"张三丰\"); two.add(\"赵丽颖\"); two.add(\"张二狗\"); two.add(\"张天爱\"); two.add(\"张三\"); // .... &#125;&#125; 而Person类的代码为： 1234567891011121314151617181920212223public class Person &#123; private String name; public Person() &#123;&#125; public Person(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return \"Person&#123;name='\" + name + \"'&#125;\"; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; 解答既然使用传统的for循环写法，那么： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class DemoArrayListNames &#123; public static void main(String[] args) &#123; List&lt;String&gt; one = new ArrayList&lt;&gt;(); // ... List&lt;String&gt; two = new ArrayList&lt;&gt;(); // ... // 第一个队伍只要名字为3个字的成员姓名； List&lt;String&gt; oneA = new ArrayList&lt;&gt;(); for (String name : one) &#123; if (name.length() == 3) &#123; oneA.add(name); &#125; &#125; // 第一个队伍筛选之后只要前3个人； List&lt;String&gt; oneB = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 3; i++) &#123; oneB.add(oneA.get(i)); &#125; // 第二个队伍只要姓张的成员姓名； List&lt;String&gt; twoA = new ArrayList&lt;&gt;(); for (String name : two) &#123; if (name.startsWith(\"张\")) &#123; twoA.add(name); &#125; &#125; // 第二个队伍筛选之后不要前2个人； List&lt;String&gt; twoB = new ArrayList&lt;&gt;(); for (int i = 2; i &lt; twoA.size(); i++) &#123; twoB.add(twoA.get(i)); &#125; // 将两个队伍合并为一个队伍； List&lt;String&gt; totalNames = new ArrayList&lt;&gt;(); totalNames.addAll(oneB); totalNames.addAll(twoB); // 根据姓名创建Person对象； List&lt;Person&gt; totalPersonList = new ArrayList&lt;&gt;(); for (String name : totalNames) &#123; totalPersonList.add(new Person(name)); &#125; // 打印整个队伍的Person对象信息。 for (Person person : totalPersonList) &#123; System.out.println(person); &#125; &#125;&#125; 运行结果为： 123456Person&#123;name=&apos;宋远桥&apos;&#125;Person&#123;name=&apos;苏星河&apos;&#125;Person&#123;name=&apos;洪七公&apos;&#125;Person&#123;name=&apos;张二狗&apos;&#125;Person&#123;name=&apos;张天爱&apos;&#125;Person&#123;name=&apos;张三&apos;&#125; 2.6 练习：集合元素处理（Stream方式）题目将上一题当中的传统for循环写法更换为Stream流式处理方式。两个集合的初始内容不变，Person类的定义也不变。 解答等效的Stream流式处理代码为： 1234567891011121314151617181920212223242526import java.util.ArrayList;import java.util.List;import java.util.stream.Stream;public class DemoStreamNames &#123; public static void main(String[] args) &#123; List&lt;String&gt; one = new ArrayList&lt;&gt;(); // ... List&lt;String&gt; two = new ArrayList&lt;&gt;(); // ... // 第一个队伍只要名字为3个字的成员姓名； // 第一个队伍筛选之后只要前3个人； Stream&lt;String&gt; streamOne = one.stream().filter(s -&gt; s.length() == 3).limit(3); // 第二个队伍只要姓张的成员姓名； // 第二个队伍筛选之后不要前2个人； Stream&lt;String&gt; streamTwo = two.stream().filter(s -&gt; s.startsWith(\"张\")).skip(2); // 将两个队伍合并为一个队伍； // 根据姓名创建Person对象； // 打印整个队伍的Person对象信息。 Stream.concat(streamOne, streamTwo).map(Person::new).forEach(System.out::println); &#125;&#125; 运行效果完全一样： 123456Person&#123;name=&apos;宋远桥&apos;&#125;Person&#123;name=&apos;苏星河&apos;&#125;Person&#123;name=&apos;洪七公&apos;&#125;Person&#123;name=&apos;张二狗&apos;&#125;Person&#123;name=&apos;张天爱&apos;&#125;Person&#123;name=&apos;张三&apos;&#125; 2.7 总结：函数拼接与终结方法在上述介绍的各种方法中，凡是返回值仍然为Stream接口的为函数拼接方法，它们支持链式调用；而返回值不再为Stream接口的为终结方法，不再支持链式调用。如下表所示： 方法名 方法作用 方法种类 是否支持链式调用 count 统计个数 终结 否 forEach 逐一处理 终结 否 filter 过滤 函数拼接 是 limit 取用前几个 函数拼接 是 skip 跳过前几个 函数拼接 是 map 映射 函数拼接 是 concat 组合 函数拼接 是 2.8 并发流当需要对存在于集合或数组中的若干元素进行并发操作时，简直就是噩梦！我们需要仔细考虑多线程环境下的原子性、竞争甚至锁问题，即便是java.util.concurrent.ConcurrentMap&lt;K, V&gt;接口也必须谨慎地正确使用。 而对于Stream流来说，这很简单。 转换为并发流Stream的父接口java.util.stream.BaseStream中定义了一个parallel方法： 1S parallel(); 只需要在流上调用一下无参数的parallel方法，那么当前流即可变身成为支持并发操作的流，返回值仍然为Stream类型。例如： 1234567import java.util.stream.Stream;public class Demo13StreamParallel &#123; public static void main(String[] args) &#123; Stream&lt;Integer&gt; stream = Stream.of(10, 20, 30, 40, 50).parallel(); &#125;&#125; 直接获取并发流在通过集合获取流时，也可以直接调用parallelStream方法来直接获取支持并发操作的流。方法定义为： 1default Stream&lt;E&gt; parallelStream() &#123;...&#125; 应用代码为： 12345678910import java.util.ArrayList;import java.util.Collection;import java.util.stream.Stream;public class Demo13StreamParallel &#123; public static void main(String[] args) &#123; Collection&lt;String&gt; coll = new ArrayList&lt;&gt;(); Stream&lt;String&gt; stream = coll.parallelStream(); &#125;&#125; 使用并发流多次执行下面这段代码，结果的顺序在很大概率上是不一定的： 123456789import java.util.stream.Stream;public class Demo13StreamParallel &#123; public static void main(String[] args) &#123; Stream.of(10, 20, 30, 40, 50, 60, 70, 80, 90, 100) .parallel() .forEach(System.out::println); &#125;&#125; 2.9 收集Stream结果对流操作完成之后，如果需要将其结果进行收集，例如获取对应的集合、数组等，如何操作？ 收集到集合中Stream流提供collect方法，其参数需要一个java.util.stream.Collector&lt;T,A, R&gt;接口对象来指定收集到哪种集合中。幸运的是，java.util.stream.Collectors类提供一些方法，可以作为Collector接口的实例： public static &lt;T&gt; Collector&lt;T, ?, List&lt;T&gt;&gt; toList()：转换为List集合。 public static &lt;T&gt; Collector&lt;T, ?, Set&lt;T&gt;&gt; toSet()：转换为Set集合。 下面是这两个方法的基本使用代码： 123456789101112import java.util.List;import java.util.Set;import java.util.stream.Collectors;import java.util.stream.Stream;public class Demo15StreamCollect &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; stream = Stream.of(\"10\", \"20\", \"30\", \"40\", \"50\"); List&lt;String&gt; list = stream.collect(Collectors.toList()); Set&lt;String&gt; set = stream.collect(Collectors.toSet()); &#125;&#125; 收集到数组中Stream提供toArray方法来将结果放到一个数组中，由于泛型擦除的原因，返回值类型是Object[]的： 1Object[] toArray(); 其使用场景如： 12345678import java.util.stream.Stream;public class Demo16StreamArray &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; stream = Stream.of(\"10\", \"20\", \"30\", \"40\", \"50\"); Object[] objArray = stream.toArray(); &#125;&#125; 扩展：解决泛型数组问题有了Lambda和方法引用之后，可以使用toArray方法的另一种重载形式传递一个IntFunction&lt;A[]&gt;的函数，继而从外面指定泛型参数。方法签名： 1&lt;A&gt; A[] toArray(IntFunction&lt;A[]&gt; generator); 有了它，上例代码中不再局限于Object[]结果，而可以得到String[]结果： 12345678import java.util.stream.Stream;public class Demo17StreamArray &#123; public static void main(String[] args) &#123; Stream&lt;String&gt; stream = Stream.of(\"10\", \"20\", \"30\", \"40\", \"50\"); String[] strArray = stream.toArray(String[]::new); &#125;&#125; 既然数组也是有构造器的，那么传递一个数组的构造器引用即可。 备注：Java仍然没有泛型数组，原因同样是泛型擦除。 2.10 练习：将数组元素加到集合中题目请通过Stream流的方式，将下面数组当中的元素添加（收集）到List集合当中： 12345public class DemoCollect &#123; public static void main(String[] args) &#123; int[] array = &#123; 10, 20, 30, 40, 50 &#125;; &#125;&#125; 解答首先需要将数组转换成为流，然后再通过collect方法收集到List集合中： 12345678910import java.util.List;import java.util.stream.Collectors;import java.util.stream.Stream;public class DemoCollect &#123; public static void main(String[] args) &#123; String[] array = &#123; \"Java\", \"Groovy\", \"Scala\", \"Kotlin\" &#125;; List&lt;String&gt; list = Stream.of(array).collect(Collectors.toList()); &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/07【线程池、Lambda表达式】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/07【线程池、Lambda表达式】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/07【线程池、Lambda表达式】/","excerpt":"","text":"day07【线程池、Lambda表达式】主要内容 线程池 Lambda表达式 教学目标 能够理解线程通信概念 能够理解等待唤醒机制 能够描述Java中线程池运行原理 能够理解函数式编程相对于面向对象的优点 能够掌握Lambda表达式的标准格式 能够使用Lambda标准格式使用Runnable与Comparator接口 能够掌握Lambda表达式的省略格式与规则 能够使用Lambda省略格式使用Runnable与Comparator接口 能够通过Lambda的标准格式使用自定义的接口（有且仅有一个抽象方法） 能够通过Lambda的省略格式使用自定义的接口（有且仅有一个抽象方法） 能够明确Lambda的两项使用前提 第一章 等待唤醒机制1.1 线程间通信概念：多个线程在处理同一个资源，但是处理的动作（线程的任务）却不相同。 比如：线程A用来生成包子的，线程B用来吃包子的，包子可以理解为同一资源，线程A与线程B处理的动作，一个是生产，一个是消费，那么线程A与线程B之间就存在线程通信问题。 为什么要处理线程间通信： 多个线程并发执行时, 在默认情况下CPU是随机切换线程的，当我们需要多个线程来共同完成一件任务，并且我们希望他们有规律的执行, 那么多线程之间需要一些协调通信，以此来帮我们达到多线程共同操作一份数据。 如何保证线程间通信有效利用资源： 多个线程在处理同一个资源，并且任务不同时，需要线程通信来帮助解决线程之间对同一个变量的使用或操作。 就是多个线程在操作同一份数据时， 避免对同一共享变量的争夺。也就是我们需要通过一定的手段使各个线程能有效的利用资源。而这种手段即—— 等待唤醒机制。 1.2 等待唤醒机制什么是等待唤醒机制 这是多个线程间的一种协作机制。谈到线程我们经常想到的是线程间的竞争（race），比如去争夺锁，但这并不是故事的全部，线程间也会有协作机制。就好比在公司里你和你的同事们，你们可能存在在晋升时的竞争，但更多时候你们更多是一起合作以完成某些任务。 就是在一个线程进行了规定操作后，就进入等待状态（wait()）， 等待其他线程执行完他们的指定代码过后 再将其唤醒（notify()）;在有多个线程进行等待时， 如果需要，可以使用 notifyAll()来唤醒所有的等待线程。 wait/notify 就是线程间的一种协作机制。 等待唤醒中的方法 等待唤醒机制就是用于解决线程间通信的问题的，使用到的3个方法的含义如下： wait：线程不再活动，不再参与调度，进入 wait set 中，因此不会浪费 CPU 资源，也不会去竞争锁了，这时的线程状态即是 WAITING。它还要执行一个特别的动作，也即是“通知（notify）”在这个对象上等待的线程从wait set 中释放出来，重新进入到调度队列（ready queue）中 notify：则选取所通知对象的 wait set 中的一个线程释放；例如，餐馆有空位置后，等候就餐最久的顾客最先入座。 notifyAll：则释放所通知对象的 wait set 上的全部线程。 注意： 哪怕只通知了一个等待的线程，被通知线程也不能立即恢复执行，因为它当初中断的地方是在同步块内，而此刻它已经不持有锁，所以她需要再次尝试去获取锁（很可能面临其它线程的竞争），成功后才能在当初调用 wait 方法之后的地方恢复执行。 总结如下： 如果能获取锁，线程就从 WAITING 状态变成 RUNNABLE 状态； 否则，从 wait set 出来，又进入 entry set，线程就从 WAITING 状态又变成 BLOCKED 状态 调用wait和notify方法需要注意的细节 wait方法与notify方法必须要由同一个锁对象调用。因为：对应的锁对象可以通过notify唤醒使用同一个锁对象调用的wait方法后的线程。 wait方法与notify方法是属于Object类的方法的。因为：锁对象可以是任意对象，而任意对象的所属类都是继承了Object类的。 wait方法与notify方法必须要在同步代码块或者是同步函数中使用。因为：必须要通过锁对象调用这2个方法。 1.3 生产者与消费者问题等待唤醒机制其实就是经典的“生产者与消费者”的问题。 就拿生产包子消费包子来说等待唤醒机制如何有效利用资源： 1包子铺线程生产包子，吃货线程消费包子。当包子没有时（包子状态为false），吃货线程等待，包子铺线程生产包子（即包子状态为true），并通知吃货线程（解除吃货的等待状态）,因为已经有包子了，那么包子铺线程进入等待状态。接下来，吃货线程能否进一步执行则取决于锁的获取情况。如果吃货获取到锁，那么就执行吃包子动作，包子吃完（包子状态为false），并通知包子铺线程（解除包子铺的等待状态）,吃货线程进入等待。包子铺线程能否进一步执行则取决于锁的获取情况。 代码演示： 包子资源类： 12345public class BaoZi &#123; String pier ; String xianer ; boolean flag = false ;//包子资源 是否存在 包子资源状态&#125; 吃货线程类： 12345678910111213141516171819202122232425public class ChiHuo extends Thread&#123; private BaoZi bz; public ChiHuo(String name,BaoZi bz)&#123; super(name); this.bz = bz; &#125; @Override public void run() &#123; while(true)&#123; synchronized (bz)&#123; if(bz.flag == false)&#123;//没包子 try &#123; bz.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(\"吃货正在吃\"+bz.pier+bz.xianer+\"包子\"); bz.flag = false; bz.notify(); &#125; &#125; &#125;&#125; 包子铺线程类： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public class BaoZiPu extends Thread &#123; private BaoZi bz; public BaoZiPu(String name,BaoZi bz)&#123; super(name); this.bz = bz; &#125; @Override public void run() &#123; int count = 0; //造包子 while(true)&#123; //同步 synchronized (bz)&#123; if(bz.flag == true)&#123;//包子资源 存在 try &#123; bz.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; // 没有包子 造包子 System.out.println(\"包子铺开始做包子\"); if(count%2 == 0)&#123; // 冰皮 五仁 bz.pier = \"冰皮\"; bz.xianer = \"五仁\"; &#125;else&#123; // 薄皮 牛肉大葱 bz.pier = \"薄皮\"; bz.xianer = \"牛肉大葱\"; &#125; count++; bz.flag=true; System.out.println(\"包子造好了：\"+bz.pier+bz.xianer); System.out.println(\"吃货来吃吧\"); //唤醒等待线程 （吃货） bz.notify(); &#125; &#125; &#125;&#125; 测试类： 123456789101112public class Demo &#123; public static void main(String[] args) &#123; //等待唤醒案例 BaoZi bz = new BaoZi(); ChiHuo ch = new ChiHuo(\"吃货\",bz); BaoZiPu bzp = new BaoZiPu(\"包子铺\",bz); ch.start(); bzp.start(); &#125;&#125; 执行效果： 123456789101112包子铺开始做包子包子造好了：冰皮五仁吃货来吃吧吃货正在吃冰皮五仁包子包子铺开始做包子包子造好了：薄皮牛肉大葱吃货来吃吧吃货正在吃薄皮牛肉大葱包子包子铺开始做包子包子造好了：冰皮五仁吃货来吃吧吃货正在吃冰皮五仁包子 第二章 线程池2.1 线程池思想概述 我们使用线程的时候就去创建一个线程，这样实现起来非常简便，但是就会有一个问题： 如果并发的线程数量很多，并且每个线程都是执行一个时间很短的任务就结束了，这样频繁创建线程就会大大降低系统的效率，因为频繁创建线程和销毁线程需要时间。 那么有没有一种办法使得线程可以复用，就是执行完一个任务，并不被销毁，而是可以继续执行其他的任务？ 在Java中可以通过线程池来达到这样的效果。今天我们就来详细讲解一下Java的线程池。 2.2 线程池概念 线程池：其实就是一个容纳多个线程的容器，其中的线程可以反复使用，省去了频繁创建线程对象的操作，无需反复创建线程而消耗过多资源。 由于线程池中有很多操作都是与优化资源相关的，我们在这里就不多赘述。我们通过一张图来了解线程池的工作原理： 合理利用线程池能够带来三个好处： 降低资源消耗。减少了创建和销毁线程的次数，每个工作线程都可以被重复利用，可执行多个任务。 提高响应速度。当任务到达时，任务可以不需要的等到线程创建就能立即执行。 提高线程的可管理性。可以根据系统的承受能力，调整线程池中工作线线程的数目，防止因为消耗过多的内存，而把服务器累趴下(每个线程需要大约1MB内存，线程开的越多，消耗的内存也就越大，最后死机)。 2.3 线程池的使用Java里面线程池的顶级接口是java.util.concurrent.Executor，但是严格意义上讲Executor并不是一个线程池，而只是一个执行线程的工具。真正的线程池接口是java.util.concurrent.ExecutorService。 要配置一个线程池是比较复杂的，尤其是对于线程池的原理不是很清楚的情况下，很有可能配置的线程池不是较优的，因此在java.util.concurrent.Executors线程工厂类里面提供了一些静态工厂，生成一些常用的线程池。官方建议使用Executors工程类来创建线程池对象。 Executors类中有个创建线程池的方法如下： public static ExecutorService newFixedThreadPool(int nThreads)：返回线程池对象。(创建的是有界线程池,也就是池中的线程个数可以指定最大数量) 获取到了一个线程池ExecutorService 对象，那么怎么使用呢，在这里定义了一个使用线程池对象的方法如下： public Future&lt;?&gt; submit(Runnable task):获取线程池中的某一个线程对象，并执行 Future接口：用来记录线程任务执行完毕后产生的结果。线程池创建与使用。 使用线程池中线程对象的步骤： 创建线程池对象。 创建Runnable接口子类对象。(task) 提交Runnable接口子类对象。(take task) 关闭线程池(一般不做)。 Runnable实现类代码： 12345678910111213public class MyRunnable implements Runnable &#123; @Override public void run() &#123; System.out.println(\"我要一个教练\"); try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"教练来了： \" + Thread.currentThread().getName()); System.out.println(\"教我游泳,交完后，教练回到了游泳池\"); &#125;&#125; 线程池测试类： 12345678910111213141516171819202122public class ThreadPoolDemo &#123; public static void main(String[] args) &#123; // 创建线程池对象 ExecutorService service = Executors.newFixedThreadPool(2);//包含2个线程对象 // 创建Runnable实例对象 MyRunnable r = new MyRunnable(); //自己创建线程对象的方式 // Thread t = new Thread(r); // t.start(); ---&gt; 调用MyRunnable中的run() // 从线程池中获取线程对象,然后调用MyRunnable中的run() service.submit(r); // 再获取个线程对象，调用MyRunnable中的run() service.submit(r); service.submit(r); // 注意：submit方法调用结束后，程序并不终止，是因为线程池控制了线程的关闭。 // 将使用完的线程又归还到了线程池中 // 关闭线程池 //service.shutdown(); &#125;&#125; 第三章 Lambda表达式3.1 函数式编程思想概述 在数学中，函数就是有输入量、输出量的一套计算方案，也就是“拿什么东西做什么事情”。相对而言，面向对象过分强调“必须通过对象的形式来做事情”，而函数式思想则尽量忽略面向对象的复杂语法——强调做什么，而不是以什么形式做。 3.2 冗余的Runnable代码传统写法当需要启动一个线程去完成任务时，通常会通过java.lang.Runnable接口来定义任务内容，并使用java.lang.Thread类来启动该线程。代码如下： 123456789101112public class Demo01Runnable &#123; public static void main(String[] args) &#123; // 匿名内部类 Runnable task = new Runnable() &#123; @Override public void run() &#123; // 覆盖重写抽象方法 System.out.println(\"多线程任务执行！\"); &#125; &#125;; new Thread(task).start(); // 启动线程 &#125;&#125; 本着“一切皆对象”的思想，这种做法是无可厚非的：首先创建一个Runnable接口的匿名内部类对象来指定任务内容，再将其交给一个线程来启动。 代码分析对于Runnable的匿名内部类用法，可以分析出几点内容： Thread类需要Runnable接口作为参数，其中的抽象run方法是用来指定线程任务内容的核心； 为了指定run的方法体，不得不需要Runnable接口的实现类； 为了省去定义一个RunnableImpl实现类的麻烦，不得不使用匿名内部类； 必须覆盖重写抽象run方法，所以方法名称、方法参数、方法返回值不得不再写一遍，且不能写错； 而实际上，似乎只有方法体才是关键所在。 3.3 编程思想转换做什么，而不是怎么做我们真的希望创建一个匿名内部类对象吗？不。我们只是为了做这件事情而不得不创建一个对象。我们真正希望做的事情是：将run方法体内的代码传递给Thread类知晓。 传递一段代码——这才是我们真正的目的。而创建对象只是受限于面向对象语法而不得不采取的一种手段方式。那，有没有更加简单的办法？如果我们将关注点从“怎么做”回归到“做什么”的本质上，就会发现只要能够更好地达到目的，过程与形式其实并不重要。 生活举例 当我们需要从北京到上海时，可以选择高铁、汽车、骑行或是徒步。我们的真正目的是到达上海，而如何才能到达上海的形式并不重要，所以我们一直在探索有没有比高铁更好的方式——搭乘飞机。 而现在这种飞机（甚至是飞船）已经诞生：2014年3月Oracle所发布的Java 8（JDK 1.8）中，加入了Lambda表达式的重量级新特性，为我们打开了新世界的大门。 3.4 体验Lambda的更优写法借助Java 8的全新语法，上述Runnable接口的匿名内部类写法可以通过更简单的Lambda表达式达到等效： 12345public class Demo02LambdaRunnable &#123; public static void main(String[] args) &#123; new Thread(() -&gt; System.out.println(\"多线程任务执行！\")).start(); // 启动线程 &#125;&#125; 这段代码和刚才的执行效果是完全一样的，可以在1.8或更高的编译级别下通过。从代码的语义中可以看出：我们启动了一个线程，而线程任务的内容以一种更加简洁的形式被指定。 不再有“不得不创建接口对象”的束缚，不再有“抽象方法覆盖重写”的负担，就是这么简单！ 3.5 回顾匿名内部类Lambda是怎样击败面向对象的？在上例中，核心代码其实只是如下所示的内容： 1() -&gt; System.out.println(\"多线程任务执行！\") 为了理解Lambda的语义，我们需要从传统的代码起步。 使用实现类要启动一个线程，需要创建一个Thread类的对象并调用start方法。而为了指定线程执行的内容，需要调用Thread类的构造方法： public Thread(Runnable target) 为了获取Runnable接口的实现对象，可以为该接口定义一个实现类RunnableImpl： 123456public class RunnableImpl implements Runnable &#123; @Override public void run() &#123; System.out.println(\"多线程任务执行！\"); &#125;&#125; 然后创建该实现类的对象作为Thread类的构造参数： 123456public class Demo03ThreadInitParam &#123; public static void main(String[] args) &#123; Runnable task = new RunnableImpl(); new Thread(task).start(); &#125;&#125; 使用匿名内部类这个RunnableImpl类只是为了实现Runnable接口而存在的，而且仅被使用了唯一一次，所以使用匿名内部类的语法即可省去该类的单独定义，即匿名内部类： 12345678910public class Demo04ThreadNameless &#123; public static void main(String[] args) &#123; new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(\"多线程任务执行！\"); &#125; &#125;).start(); &#125;&#125; 匿名内部类的好处与弊端一方面，匿名内部类可以帮我们省去实现类的定义；另一方面，匿名内部类的语法——确实太复杂了！ 语义分析仔细分析该代码中的语义，Runnable接口只有一个run方法的定义： public abstract void run(); 即制定了一种做事情的方案（其实就是一个函数）： 无参数：不需要任何条件即可执行该方案。 无返回值：该方案不产生任何结果。 代码块（方法体）：该方案的具体执行步骤。 同样的语义体现在Lambda语法中，要更加简单： 1() -&gt; System.out.println(\"多线程任务执行！\") 前面的一对小括号即run方法的参数（无），代表不需要任何条件； 中间的一个箭头代表将前面的参数传递给后面的代码； 后面的输出语句即业务逻辑代码。 3.6 Lambda标准格式Lambda省去面向对象的条条框框，格式由3个部分组成： 一些参数 一个箭头 一段代码 Lambda表达式的标准格式为： 1(参数类型 参数名称) -&gt; &#123; 代码语句 &#125; 格式说明： 小括号内的语法与传统方法参数列表一致：无参数则留空；多个参数则用逗号分隔。 -&gt;是新引入的语法格式，代表指向动作。 大括号内的语法与传统方法体要求基本一致。 3.7 练习：使用Lambda标准格式（无参无返回）题目给定一个厨子Cook接口，内含唯一的抽象方法makeFood，且无参数、无返回值。如下： 123public interface Cook &#123; void makeFood();&#125; 在下面的代码中，请使用Lambda的标准格式调用invokeCook方法，打印输出“吃饭啦！”字样： 123456789public class Demo05InvokeCook &#123; public static void main(String[] args) &#123; // TODO 请在此使用Lambda【标准格式】调用invokeCook方法 &#125; private static void invokeCook(Cook cook) &#123; cook.makeFood(); &#125;&#125; 解答12345public static void main(String[] args) &#123; invokeCook(() -&gt; &#123; System.out.println(\"吃饭啦！\"); &#125;);&#125; 备注：小括号代表Cook接口makeFood抽象方法的参数为空，大括号代表makeFood的方法体。 3.8 Lambda的参数和返回值下面举例演示java.util.Comparator&lt;T&gt;接口的使用场景代码，其中的抽象方法定义为： public abstract int compare(T o1, T o2); 当需要对一个对象数组进行排序时，Arrays.sort方法需要一个Comparator接口实例来指定排序的规则。假设有一个Person类，含有String name和int age两个成员变量： 123456public class Person &#123; private String name; private int age; // 省略构造器、toString方法与Getter Setter &#125; 传统写法如果使用传统的代码对Person[]数组进行排序，写法如下： 12345678910111213141516171819202122232425import java.util.Arrays;import java.util.Comparator;public class Demo06Comparator &#123; public static void main(String[] args) &#123; // 本来年龄乱序的对象数组 Person[] array = &#123; new Person(\"古力娜扎\", 19), new Person(\"迪丽热巴\", 18), new Person(\"马尔扎哈\", 20) &#125;; // 匿名内部类 Comparator&lt;Person&gt; comp = new Comparator&lt;Person&gt;() &#123; @Override public int compare(Person o1, Person o2) &#123; return o1.getAge() - o2.getAge(); &#125; &#125;; Arrays.sort(array, comp); // 第二个参数为排序规则，即Comparator接口实例 for (Person person : array) &#123; System.out.println(person); &#125; &#125;&#125; 这种做法在面向对象的思想中，似乎也是“理所当然”的。其中Comparator接口的实例（使用了匿名内部类）代表了“按照年龄从小到大”的排序规则。 代码分析下面我们来搞清楚上述代码真正要做什么事情。 为了排序，Arrays.sort方法需要排序规则，即Comparator接口的实例，抽象方法compare是关键； 为了指定compare的方法体，不得不需要Comparator接口的实现类； 为了省去定义一个ComparatorImpl实现类的麻烦，不得不使用匿名内部类； 必须覆盖重写抽象compare方法，所以方法名称、方法参数、方法返回值不得不再写一遍，且不能写错； 实际上，只有参数和方法体才是关键。 Lambda写法123456789101112131415161718import java.util.Arrays;public class Demo07ComparatorLambda &#123; public static void main(String[] args) &#123; Person[] array = &#123; new Person(\"古力娜扎\", 19), new Person(\"迪丽热巴\", 18), new Person(\"马尔扎哈\", 20) &#125;; Arrays.sort(array, (Person a, Person b) -&gt; &#123; return a.getAge() - b.getAge(); &#125;); for (Person person : array) &#123; System.out.println(person); &#125; &#125;&#125; 3.9 练习：使用Lambda标准格式（有参有返回）题目给定一个计算器Calculator接口，内含抽象方法calc可以将两个int数字相加得到和值： 123public interface Calculator &#123; int calc(int a, int b);&#125; 在下面的代码中，请使用Lambda的标准格式调用invokeCalc方法，完成120和130的相加计算： 12345678910public class Demo08InvokeCalc &#123; public static void main(String[] args) &#123; // TODO 请在此使用Lambda【标准格式】调用invokeCalc方法来计算120+130的结果ß &#125; private static void invokeCalc(int a, int b, Calculator calculator) &#123; int result = calculator.calc(a, b); System.out.println(\"结果是：\" + result); &#125;&#125; 解答12345public static void main(String[] args) &#123; invokeCalc(120, 130, (int a, int b) -&gt; &#123; return a + b; &#125;);&#125; 备注：小括号代表Calculator接口calc抽象方法的参数，大括号代表calc的方法体。 3.10 Lambda省略格式可推导即可省略Lambda强调的是“做什么”而不是“怎么做”，所以凡是可以根据上下文推导得知的信息，都可以省略。例如上例还可以使用Lambda的省略写法： 123public static void main(String[] args) &#123; invokeCalc(120, 130, (a, b) -&gt; a + b);&#125; 省略规则在Lambda标准格式的基础上，使用省略写法的规则为： 小括号内参数的类型可以省略； 如果小括号内有且仅有一个参，则小括号可以省略； 如果大括号内有且仅有一个语句，则无论是否有返回值，都可以省略大括号、return关键字及语句分号。 备注：掌握这些省略规则后，请对应地回顾本章开头的多线程案例。 3.11 练习：使用Lambda省略格式题目仍然使用前文含有唯一makeFood抽象方法的厨子Cook接口，在下面的代码中，请使用Lambda的省略格式调用invokeCook方法，打印输出“吃饭啦！”字样： 123456789public class Demo09InvokeCook &#123; public static void main(String[] args) &#123; // TODO 请在此使用Lambda【省略格式】调用invokeCook方法 &#125; private static void invokeCook(Cook cook) &#123; cook.makeFood(); &#125;&#125; 解答123public static void main(String[] args) &#123; invokeCook(() -&gt; System.out.println(\"吃饭啦！\"));&#125; 3.12 Lambda的使用前提Lambda的语法非常简洁，完全没有面向对象复杂的束缚。但是使用时有几个问题需要特别注意： 使用Lambda必须具有接口，且要求接口中有且仅有一个抽象方法。无论是JDK内置的Runnable、Comparator接口还是自定义的接口，只有当接口中的抽象方法存在且唯一时，才可以使用Lambda。 使用Lambda必须具有上下文推断。也就是方法的参数或局部变量类型必须为Lambda对应的接口类型，才能使用Lambda作为该接口的实例。 备注：有且仅有一个抽象方法的接口，称为“函数式接口”。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/12【函数式接口、方法引用】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/12【函数式接口、方法引用】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/12【函数式接口、方法引用】/","excerpt":"","text":"day12【函数式接口、方法引用】主要内容 常用函数式接口 方法引用 教学目标 能够使用@FunctionalInterface注解 能够自定义无参无返回函数式接口 能够自定义有参有返回函数式接口 能够理解Lambda延迟执行的特点 能够使用Lambda作为方法的参数 能够使用Lambda作为方法的返回值 能够使用输出语句的方法引用 能够通过4种方式使用方法引用 能够使用类和数组的构造器引用 能够使用Supplier函数式接口 能够使用Consumer函数式接口 第一章 函数式接口 1.1 概念函数式接口在Java中是指：有且仅有一个抽象方法的接口。 函数式接口，即适用于函数式编程场景的接口。而Java中的函数式编程体现就是Lambda，所以函数式接口就是可以适用于Lambda使用的接口。只有确保接口中有且仅有一个抽象方法，Java中的Lambda才能顺利地进行推导。 备注：“语法糖”是指使用更加方便，但是原理不变的代码语法。例如在遍历集合时使用的for-each语法，其实底层的实现原理仍然是迭代器，这便是“语法糖”。从应用层面来讲，Java中的Lambda可以被当做是匿名内部类的“语法糖”，但是二者在原理上是不同的。 1.2 格式只要确保接口中有且仅有一个抽象方法即可： 1234修饰符 interface 接口名称 &#123; public abstract 返回值类型 方法名称(可选参数信息); // 其他非抽象方法内容&#125; 由于接口当中抽象方法的public abstract是可以省略的，所以定义一个函数式接口很简单： 123public interface MyFunctionalInterface &#123; void myMethod();&#125; 1.3 @FunctionalInterface注解 与@Override注解的作用类似，Java 8中专门为函数式接口引入了一个新的注解：@FunctionalInterface。该注解可用于一个接口的定义上： 1234@FunctionalInterfacepublic interface MyFunctionalInterface &#123; void myMethod();&#125; 一旦使用该注解来定义接口，编译器将会强制检查该接口是否确实有且仅有一个抽象方法，否则将会报错。需要注意的是，即使不使用该注解，只要满足函数式接口的定义，这仍然是一个函数式接口，使用起来都一样。 1.4 自定义函数式接口对于刚刚定义好的MyFunctionalInterface函数式接口，典型使用场景就是作为方法的参数： 1234567891011public class Demo09FunctionalInterface &#123; // 使用自定义的函数式接口作为方法参数 private static void doSomething(MyFunctionalInterface inter) &#123; inter.myMethod(); // 调用自定义的函数式接口方法 &#125; public static void main(String[] args) &#123; // 调用使用函数式接口的方法 doSomething(() -&gt; System.out.println(\"Lambda执行啦！\")); &#125;&#125; 1.5 练习：自定义函数式接口（无参无返回）题目请定义一个函数式接口Eatable，内含抽象eat方法，没有参数或返回值。使用该接口作为方法的参数，并进而通过Lambda来使用它。 解答函数式接口的定义： 1234@FunctionalInterfacepublic interface Eatable &#123; void eat();&#125; 应用场景代码： 123456789public class DemoLambdaEatable &#123; private static void keepAlive(Eatable human) &#123; human.eat(); &#125; public static void main(String[] args) &#123; keepAlive(() -&gt; System.out.println(\"吃饭饭！\")); &#125;&#125; 1.6 练习：自定义函数式接口（有参有返回）题目请定义一个函数式接口Sumable，内含抽象sum方法，可以将两个int数字相加返回int结果。使用该接口作为方法的参数，并进而通过Lambda来使用它。 解答函数式接口的定义： 1234@FunctionalInterfacepublic interface Sumable &#123; int sum(int a, int b);&#125; 应用场景代码： 123456789public class DemoLambdaSumable &#123; private static void showSum(int x, int y, Sumable sumCalculator) &#123; System.out.println(sumCalculator.sum(x, y)); &#125; public static void main(String[] args) &#123; showSum(10, 20, (m, n) -&gt; m + n); &#125;&#125; 第二章 函数式编程 在兼顾面向对象特性的基础上，Java语言通过Lambda表达式与方法引用等，为开发者打开了函数式编程的大门。下面我们做一个初探。 2.1 Lambda的延迟执行 有些场景的代码执行后，结果不一定会被使用，从而造成性能浪费。而Lambda表达式是延迟执行的，这正好可以作为解决方案，提升性能。 性能浪费的日志案例一种典型的场景就是对参数进行有条件使用，例如对日志消息进行拼接后，在满足条件的情况下进行打印输出： 123456789101112131415public class Demo01Logger &#123; private static void log(int level, String msg) &#123; if (level == 1) &#123; System.out.println(msg); &#125; &#125; public static void main(String[] args) &#123; String msgA = \"Hello\"; String msgB = \"World\"; String msgC = \"Java\"; log(1, msgA + msgB + msgC); &#125;&#125; 这段代码存在问题：无论级别是否满足要求，作为log方法的第二个参数，三个字符串一定会首先被拼接并传入方法内，然后才会进行级别判断。如果级别不符合要求，那么字符串的拼接操作就白做了，存在性能浪费。 备注：SLF4J是应用非常广泛的日志框架，它在记录日志时为了解决这种性能浪费的问题，并不推荐首先进行字符串的拼接，而是将字符串的若干部分作为可变参数传入方法中，仅在日志级别满足要求的情况下才会进行字符串拼接。例如：LOGGER.debug(&quot;变量{}的取值为{}。&quot;, &quot;os&quot;, &quot;macOS&quot;)，其中的大括号{}为占位符。如果满足日志级别要求，则会将“os”和“macOS”两个字符串依次拼接到大括号的位置；否则不会进行字符串拼接。这也是一种可行解决方案，但Lambda可以做到更好。 体验Lambda的更优写法使用Lambda必然需要一个函数式接口： 1234@FunctionalInterfacepublic interface MessageBuilder &#123; String buildMessage();&#125; 然后对log方法进行改造： 123456789101112131415public class Demo02LoggerLambda &#123; private static void log(int level, MessageBuilder builder) &#123; if (level == 1) &#123; System.out.println(builder.buildMessage()); &#125; &#125; public static void main(String[] args) &#123; String msgA = \"Hello\"; String msgB = \"World\"; String msgC = \"Java\"; log(1, () -&gt; msgA + msgB + msgC ); &#125;&#125; 这样一来，只有当级别满足要求的时候，才会进行三个字符串的拼接；否则三个字符串将不会进行拼接。 证明Lambda的延迟下面的代码可以通过结果进行验证： 123456789101112131415161718public class Demo03LoggerDelay &#123; private static void log(int level, MessageBuilder builder) &#123; if (level == 1) &#123; System.out.println(builder.buildMessage()); &#125; &#125; public static void main(String[] args) &#123; String msgA = \"Hello\"; String msgB = \"World\"; String msgC = \"Java\"; log(2, () -&gt; &#123; System.out.println(\"Lambda执行！\"); return msgA + msgB + msgC; &#125;); &#125;&#125; 从结果中可以看出，在不符合级别要求的情况下，Lambda将不会执行。从而达到节省性能的效果。 扩展：实际上使用内部类也可以达到同样的效果，只是将代码操作延迟到了另外一个对象当中通过调用方法来完成。而是否调用其所在方法是在条件判断之后才执行的。 2.2 使用Lambda作为参数和返回值如果抛开实现原理不说，Java中的Lambda表达式可以被当作是匿名内部类的替代品。如果方法的参数是一个函数式接口类型，那么就可以使用Lambda表达式进行替代。使用Lambda表达式作为方法参数，其实就是使用函数式接口作为方法参数。 例如java.lang.Runnable接口就是一个函数式接口，假设有一个startThread方法使用该接口作为参数，那么就可以使用Lambda进行传参。这种情况其实和Thread类的构造方法参数为Runnable没有本质区别。 123456789public class Demo04Runnable &#123; private static void startThread(Runnable task) &#123; new Thread(task).start(); &#125; public static void main(String[] args) &#123; startThread(() -&gt; System.out.println(\"线程任务执行！\")); &#125;&#125; 类似地，如果一个方法的返回值类型是一个函数式接口，那么就可以直接返回一个Lambda表达式。当需要通过一个方法来获取一个java.util.Comparator接口类型的对象作为排序器时： 123456789101112131415import java.util.Arrays;import java.util.Comparator;public class Demo06Comparator &#123; private static Comparator&lt;String&gt; newComparator() &#123; return (a, b) -&gt; b.length() - a.length(); &#125; public static void main(String[] args) &#123; String[] array = &#123; \"abc\", \"ab\", \"abcd\" &#125;; System.out.println(Arrays.toString(array)); Arrays.sort(array, newComparator()); System.out.println(Arrays.toString(array)); &#125;&#125; 其中直接return一个Lambda表达式即可。 2.3 练习：自定义Lambda参数和返回值题目请自定义一个函数式接口MySupplier，含有无参数的抽象方法get得到Object类型的返回值。并使用该函数式接口分别作为方法的参数和返回值。 解答函数式接口MySupplier如： 1234@FunctionalInterfacepublic interface MySupplier &#123; Object get();&#125; 使用该接口作为方法的参数，并且在传递参数时将实际参数写成Lambda： 123456789public class Demo05MySupplier &#123; private static void printParam(MySupplier supplier) &#123; System.out.println(supplier.get()); &#125; public static void main(String[] args) &#123; printParam(() -&gt; \"Hello\"); &#125;&#125; 使用该接口作为方法的参数，也很简单： 12345678910111213public class Demo07MySupplier &#123; private static MySupplier getData() &#123; return () -&gt; \"Hello\"; &#125; private static void printData(MySupplier supplier) &#123; System.out.println(supplier.get()); &#125; public static void main(String[] args) &#123; printData(getData()); &#125;&#125; 其中main方法不再自己指定Lambda表达式，而是通过调用一个getData方法来获取Lambda的内容。 第三章 方法引用 在使用Lambda表达式的时候，我们实际上传递进去的代码就是一种解决方案：拿什么参数做什么操作。那么考虑一种情况：如果我们在Lambda中所指定的操作方案，已经有地方存在相同方案，那是否还有必要再写重复逻辑？ 3.1 冗余的Lambda场景来看一个简单的函数式接口以应用Lambda表达式： 1234@FunctionalInterfacepublic interface Printable &#123; void print(String str);&#125; 在Printable接口当中唯一的抽象方法print接收一个字符串参数，目的就是为了打印显示它。那么通过Lambda来使用它的代码很简单： 123456789public class Demo01PrintSimple &#123; private static void printString(Printable data) &#123; data.print(\"Hello, World!\"); &#125; public static void main(String[] args) &#123; printString(s -&gt; System.out.println(s)); &#125;&#125; 其中printString方法只管调用Printable接口的print方法，而并不管print方法的具体实现逻辑会将字符串打印到什么地方去。而main方法通过Lambda表达式指定了函数式接口Printable的具体操作方案为：拿到String（类型可推导，所以可省略）数据后，在控制台中输出它。 3.2 问题分析这段代码的问题在于，对字符串进行控制台打印输出的操作方案，明明已经有了现成的实现，那就是System.out对象中的println(String)方法。既然Lambda希望做的事情就是调用println(String)方法，那何必自己手动调用呢？ 3.3 用方法引用改进代码能否省去Lambda的语法格式（尽管它已经相当简洁）呢？只要“引用”过去就好了： 123456789public class Demo02PrintRef &#123; private static void printString(Printable data) &#123; data.print(\"Hello, World!\"); &#125; public static void main(String[] args) &#123; printString(System.out::println); &#125;&#125; 请注意其中的双冒号::写法，这被称为“方法引用”，而双冒号是一种新的语法。 3.4 方法引用符双冒号::为引用运算符，而它所在的表达式被称为方法引用。如果Lambda要表达的函数方案已经存在于某个方法的实现中，那么则可以通过双冒号来引用该方法作为Lambda的替代者。 语义分析例如上例中，System.out对象中有一个重载的println(String)方法恰好就是我们所需要的。那么对于printString方法的函数式接口参数，对比下面两种写法，完全等效： Lambda表达式写法：s -&gt; System.out.println(s); 方法引用写法：System.out::println 第一种语义是指：拿到参数之后经Lambda之手，继而传递给System.out.println方法去处理。 第二种等效写法的语义是指：直接让System.out中的println方法来取代Lambda。两种写法的执行效果完全一样，而第二种方法引用的写法复用了已有方案，更加简洁。 推导与省略如果使用Lambda，那么根据“可推导就是可省略”的原则，无需指定参数类型，也无需指定的重载形式——它们都将被自动推导。而如果使用方法引用，也是同样可以根据上下文进行推导。 函数式接口是Lambda的基础，而方法引用是Lambda的孪生兄弟。 下面这段代码将会调用println方法的不同重载形式，将函数式接口改为int类型的参数： 1234@FunctionalInterfacepublic interface PrintableInteger &#123; void print(int str);&#125; 由于上下文变了之后可以自动推导出唯一对应的匹配重载，所以方法引用没有任何变化： 123456789public class Demo03PrintOverload &#123; private static void printInteger(PrintableInteger data) &#123; data.print(1024); &#125; public static void main(String[] args) &#123; printInteger(System.out::println); &#125;&#125; 这次方法引用将会自动匹配到println(int)的重载形式。 3.5 通过对象名引用成员方法这是最常见的一种用法，与上例相同。如果一个类中已经存在了一个成员方法： 12345public class MethodRefObject &#123; public void printUpperCase(String str) &#123; System.out.println(str.toUpperCase()); &#125;&#125; 函数式接口仍然定义为： 1234@FunctionalInterfacepublic interface Printable &#123; void print(String str);&#125; 那么当需要使用这个printUpperCase成员方法来替代Printable接口的Lambda的时候，已经具有了MethodRefObject类的对象实例，则可以通过对象名引用成员方法，代码为： 12345678910public class Demo04MethodRef &#123; private static void printString(Printable lambda) &#123; lambda.print(\"Hello\"); &#125; public static void main(String[] args) &#123; MethodRefObject obj = new MethodRefObject(); printString(obj::printUpperCase); &#125;&#125; 3.6 练习：对象名引用成员方法题目假设有一个助理类Assistant，其中含有成员方法dealFile如下： 12345public class Assistant &#123; public void dealFile(String file) &#123; System.out.println(\"帮忙处理文件：\" + file); &#125; &#125; 请自定义一个函数式接口WorkHelper，其中的抽象方法help的预期行为与dealFile方法一致，并定义一个方法使用该函数式接口作为参数。通过方法引用的形式，将助理对象中的help方法作为Lambda的实现。 解答函数式接口可以定义为： 1234@FunctionalInterfacepublic interface WorkHelper &#123; void help(String file); &#125; 通过对象名引用成员方法的使用场景代码为： 12345678910public class DemoAssistant &#123; private static void work(WorkHelper helper) &#123; helper.help(\"机密文件\"); &#125; public static void main(String[] args) &#123; Assistant assistant = new Assistant(); work(assistant::dealFile); &#125;&#125; 3.7 通过类名称引用静态方法由于在java.lang.Math类中已经存在了静态方法abs，所以当我们需要通过Lambda来调用该方法时，有两种写法。首先是函数式接口： 1234@FunctionalInterfacepublic interface Calcable &#123; int calc(int num);&#125; 第一种写法是使用Lambda表达式： 123456789public class Demo05Lambda &#123; private static void method(int num, Calcable lambda) &#123; System.out.println(lambda.calc(num)); &#125; public static void main(String[] args) &#123; method(-10, n -&gt; Math.abs(n)); &#125;&#125; 但是使用方法引用的更好写法是： 123456789public class Demo06MethodRef &#123; private static void method(int num, Calcable lambda) &#123; System.out.println(lambda.calc(num)); &#125; public static void main(String[] args) &#123; method(-10, Math::abs); &#125;&#125; 在这个例子中，下面两种写法是等效的： Lambda表达式：n -&gt; Math.abs(n) 方法引用：Math::abs 3.8 练习：类名称引用静态方法题目假设有一个StringUtils字符串工具类，其中含有静态方法isBlank如下： 12345public final class StringUtils &#123; public static boolean isBlank(String str) &#123; return str == null || \"\".equals(str.trim()); &#125;&#125; 请自定义一个函数式接口StringChecker，其中的抽象方法checkBlank的预期行为与isBlank一致，并定义一个方法使用该函数式接口作为参数。通过方法引用的形式，将StringUtils工具类中的isBlank方法作为Lambda的实现。 解答函数式接口的定义可以为： 1234@FunctionalInterfacepublic interface StringChecker &#123; boolean checkString(String str); &#125; 应用场景代码为： 123456789public class DemoStringChecker &#123; private static void methodCheck(StringChecker checker) &#123; System.out.println(checker.checkString(\" \")); &#125; public static void main(String[] args) &#123; methodCheck(StringUtils::isBlank); &#125;&#125; 3.9 通过super引用成员方法如果存在继承关系，当Lambda中需要出现super调用时，也可以使用方法引用进行替代。首先是函数式接口： 1234@FunctionalInterfacepublic interface Greetable &#123; void greet();&#125; 然后是父类Human的内容： 12345public class Human &#123; public void sayHello() &#123; System.out.println(\"Hello!\"); &#125;&#125; 最后是子类Man的内容，其中使用了Lambda的写法： 1234567891011public class Man extends Human &#123; @Override public void sayHello() &#123; method(() -&gt; super.sayHello()); &#125; private void method(Greetable lambda) &#123; lambda.greet(); System.out.println(\"I'm a man!\"); &#125;&#125; 但是如果使用方法引用来调用父类中的sayHello方法会更好，例如另一个子类Woman： 1234567891011public class Woman extends Human &#123; @Override public void sayHello() &#123; method(super::sayHello); &#125; private void method(Greetable lambda) &#123; lambda.greet(); System.out.println(\"I'm a woman!\"); &#125;&#125; 在这个例子中，下面两种写法是等效的： Lambda表达式：() -&gt; super.sayHello() 方法引用：super::sayHello 3.10 通过this引用成员方法this代表当前对象，如果需要引用的方法就是当前类中的成员方法，那么可以使用“this::成员方法”的格式来使用方法引用。首先是简单的函数式接口： 1234@FunctionalInterfacepublic interface Richable &#123; void buy();&#125; 下面是一个丈夫Husband类： 123456789public class Husband &#123; private void marry(Richable lambda) &#123; lambda.buy(); &#125; public void beHappy() &#123; marry(() -&gt; System.out.println(\"买套房子\")); &#125;&#125; 开心方法beHappy调用了结婚方法marry，后者的参数为函数式接口Richable，所以需要一个Lambda表达式。但是如果这个Lambda表达式的内容已经在本类当中存在了，则可以对Husband丈夫类进行修改： 12345678910111213public class Husband &#123; private void buyHouse() &#123; System.out.println(\"买套房子\"); &#125; private void marry(Richable lambda) &#123; lambda.buy(); &#125; public void beHappy() &#123; marry(() -&gt; this.buyHouse()); &#125;&#125; 如果希望取消掉Lambda表达式，用方法引用进行替换，则更好的写法为： 12345678910111213public class Husband &#123; private void buyHouse() &#123; System.out.println(\"买套房子\"); &#125; private void marry(Richable lambda) &#123; lambda.buy(); &#125; public void beHappy() &#123; marry(this::buyHouse); &#125;&#125; 在这个例子中，下面两种写法是等效的： Lambda表达式：() -&gt; this.buyHouse() 方法引用：this::buyHouse 3.11 类的构造器引用由于构造器的名称与类名完全一样，并不固定。所以构造器引用使用类名称::new的格式表示。首先是一个简单的Person类： 1234567891011public class Person &#123; private String name; public Person(String name) &#123; this.name = name; &#125; public String getName() &#123; return name; &#125;&#125; 然后是用来创建Person对象的函数式接口： 123public interface PersonBuilder &#123; Person buildPerson(String name);&#125; 要使用这个函数式接口，可以通过Lambda表达式： 123456789public class Demo09Lambda &#123; public static void printName(String name, PersonBuilder builder) &#123; System.out.println(builder.buildPerson(name).getName()); &#125; public static void main(String[] args) &#123; printName(\"赵丽颖\", name -&gt; new Person(name)); &#125;&#125; 但是通过构造器引用，有更好的写法： 123456789public class Demo10ConstructorRef &#123; public static void printName(String name, PersonBuilder builder) &#123; System.out.println(builder.buildPerson(name).getName()); &#125; public static void main(String[] args) &#123; printName(\"赵丽颖\", Person::new); &#125;&#125; 在这个例子中，下面两种写法是等效的： Lambda表达式：name -&gt; new Person(name) 方法引用：Person::new 3.12 数组的构造器引用数组也是Object的子类对象，所以同样具有构造器，只是语法稍有不同。如果对应到Lambda的使用场景中时，需要一个函数式接口： 1234@FunctionalInterfacepublic interface ArrayBuilder &#123; int[] buildArray(int length);&#125; 在应用该接口的时候，可以通过Lambda表达式： 123456789public class Demo11ArrayInitRef &#123; private static int[] initArray(int length, ArrayBuilder builder) &#123; return builder.buildArray(length); &#125; public static void main(String[] args) &#123; int[] array = initArray(10, length -&gt; new int[length]); &#125;&#125; 但是更好的写法是使用数组的构造器引用： 123456789public class Demo12ArrayInitRef &#123; private static int[] initArray(int length, ArrayBuilder builder) &#123; return builder.buildArray(length); &#125; public static void main(String[] args) &#123; int[] array = initArray(10, int[]::new); &#125;&#125; 在这个例子中，下面两种写法是等效的： Lambda表达式：length -&gt; new int[length] 方法引用：int[]::new 备注：数组的构造器引用，可以和Java 8的Stream API结合，在一定程度上“解决”集合中toArray方法的泛型擦除问题。 第四章 常用函数式接口 JDK提供了大量常用的函数式接口以丰富Lambda的典型使用场景，它们主要在java.util.function包中被提供。前文的MySupplier接口就是在模拟一个函数式接口：java.util.function.Supplier&lt;T&gt;。其实还有很多，下面是最简单的几个接口及使用示例。 4.1 Supplier接口java.util.function.Supplier&lt;T&gt;接口仅包含一个无参的方法：T get()。用来获取一个泛型参数指定类型的对象数据。由于这是一个函数式接口，这也就意味着对应的Lambda表达式需要“对外提供”一个符合泛型类型的对象数据。 12345678910111213import java.util.function.Supplier;public class Demo08Supplier &#123; private static String getString(Supplier&lt;String&gt; function) &#123; return function.get(); &#125; public static void main(String[] args) &#123; String msgA = \"Hello\"; String msgB = \"World\"; System.out.println(getString(() -&gt; msgA + msgB)); &#125;&#125; 备注：其实这个接口在前面的练习中已经模拟过了。 4.2 练习：求数组元素最大值题目使用Supplier接口作为方法参数类型，通过Lambda表达式求出int数组中的最大值。提示：接口的泛型请使用java.lang.Integer类。 解答123456789101112131415161718192021import java.util.function.Supplier;public class DemoIntArray &#123; public static void main(String[] args) &#123; int[] array = &#123; 10, 20, 100, 30, 40, 50 &#125;; printMax(() -&gt; &#123; int max = array[0]; for (int i = 1; i &lt; array.length; i++) &#123; if (array[i] &gt; max) &#123; max = array[i]; &#125; &#125; return max; &#125;); &#125; private static void printMax(Supplier&lt;Integer&gt; supplier) &#123; int max = supplier.get(); System.out.println(max); &#125;&#125; 4.3 Consumer接口java.util.function.Consumer&lt;T&gt;接口则正好相反，它不是生产一个数据，而是消费一个数据，其数据类型由泛型参数决定。 抽象方法：acceptConsumer接口中包含抽象方法void accept(T t)，意为消费一个指定泛型的数据。基本使用如： 123456789101112import java.util.function.Consumer;public class Demo09Consumer &#123; private static void consumeString(Consumer&lt;String&gt; function) &#123; function.accept(\"Hello\"); &#125; public static void main(String[] args) &#123; consumeString(s -&gt; System.out.println(s)); consumeString(System.out::println); &#125;&#125; 当然，更好的写法是使用方法引用。 默认方法：andThen如果一个方法的参数和返回值全都是Consumer类型，那么就可以实现效果：消费一个数据的时候，首先做一个操作，然后再做一个操作，实现组合。而这个方法就是Consumer接口中的default方法andThen。下面是JDK的源代码： 1234default Consumer&lt;T&gt; andThen(Consumer&lt;? super T&gt; after) &#123; Objects.requireNonNull(after); return (T t) -&gt; &#123; accept(t); after.accept(t); &#125;;&#125; 备注：java.util.Objects的requireNonNull静态方法将会在参数为null时主动抛出NullPointerException异常。这省去了重复编写if语句和抛出空指针异常的麻烦。 要想实现组合，需要两个或多个Lambda表达式即可，而andThen的语义正是“一步接一步”操作。例如两个步骤组合的情况： 12345678910111213import java.util.function.Consumer;public class Demo10ConsumerAndThen &#123; private static void consumeString(Consumer&lt;String&gt; one, Consumer&lt;String&gt; two) &#123; one.andThen(two).accept(\"Hello\"); &#125; public static void main(String[] args) &#123; consumeString( s -&gt; System.out.println(s.toUpperCase()), s -&gt; System.out.println(s.toLowerCase())); &#125;&#125; 运行结果将会首先打印完全大写的HELLO，然后打印完全小写的hello。当然，通过链式写法可以实现更多步骤的组合。 4.4 练习：格式化打印信息题目下面的字符串数组当中存有多条信息，请按照格式“姓名：XX。性别：XX。”的格式将信息打印出来。要求将打印姓名的动作作为第一个Consumer接口的Lambda实例，将打印性别的动作作为第二个Consumer接口的Lambda实例，将两个Consumer接口按照顺序“拼接”到一起。 123public static void main(String[] args) &#123; String[] array = &#123; \"迪丽热巴,女\", \"古力娜扎,女\", \"马尔扎哈,男\" &#125;;&#125; 解答12345678910111213141516import java.util.function.Consumer;public class DemoConsumer &#123; public static void main(String[] args) &#123; String[] array = &#123; \"迪丽热巴,女\", \"古力娜扎,女\", \"马尔扎哈,男\" &#125;; printInfo(s -&gt; System.out.print(\"姓名：\" + s.split(\",\")[0]), s -&gt; System.out.println(\"。性别：\" + s.split(\",\")[1] + \"。\"), array); &#125; private static void printInfo(Consumer&lt;String&gt; one, Consumer&lt;String&gt; two, String[] array) &#123; for (String info : array) &#123; one.andThen(two).accept(info); // 姓名：迪丽热巴。性别：女。 &#125; &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/10【缓冲流、转换流、序列化流、Files】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/10【缓冲流、转换流、序列化流、Files】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/10【缓冲流、转换流、序列化流、Files】/","excerpt":"","text":"day10【缓冲流、转换流、序列化流】主要内容 转换流 缓冲流 序列化流 打印流 教学目标 能够使用字节缓冲流读取数据到程序 能够使用字节缓冲流写出数据到文件 能够明确字符缓冲流的作用和基本用法 能够使用缓冲流的特殊功能 能够阐述编码表的意义 能够使用转换流读取指定编码的文本文件 能够使用转换流写入指定编码的文本文件 能够说出打印流的特点 能够使用序列化流写出对象到文件 能够使用反序列化流读取文件到程序中 第一章 缓冲流昨天学习了基本的一些流，作为IO流的入门，今天我们要见识一些更强大的流。比如能够高效读写的缓冲流，能够转换编码的转换流，能够持久化存储对象的序列化流等等。这些功能更为强大的流，都是在基本的流对象基础之上创建而来的，就像穿上铠甲的武士一样，相当于是对基本流对象的一种增强。 1.1 概述缓冲流,也叫高效流，是对4个基本的FileXxx 流的增强，所以也是4个流，按照数据类型分类： 字节缓冲流：BufferedInputStream，BufferedOutputStream 字符缓冲流：BufferedReader，BufferedWriter 缓冲流的基本原理，是在创建流对象时，会创建一个内置的默认大小的缓冲区数组，通过缓冲区读写，减少系统IO次数，从而提高读写的效率。 1.2 字节缓冲流构造方法 public BufferedInputStream(InputStream in) ：创建一个 新的缓冲输入流。 public BufferedOutputStream(OutputStream out)： 创建一个新的缓冲输出流。 构造举例，代码如下： 1234// 创建字节缓冲输入流BufferedInputStream bis = new BufferedInputStream(new FileInputStream(\"bis.txt\"));// 创建字节缓冲输出流BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(\"bos.txt\")); 效率测试查询API，缓冲流读写方法与基本的流是一致的，我们通过复制大文件（375MB），测试它的效率。 基本流，代码如下： 123456789101112131415161718192021222324public class BufferedDemo &#123; public static void main(String[] args) throws FileNotFoundException &#123; // 记录开始时间 long start = System.currentTimeMillis(); // 创建流对象 try ( FileInputStream fis = new FileInputStream(\"jdk9.exe\"); FileOutputStream fos = new FileOutputStream(\"copy.exe\") )&#123; // 读写数据 int b; while ((b = fis.read()) != -1) &#123; fos.write(b); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; // 记录结束时间 long end = System.currentTimeMillis(); System.out.println(\"普通流复制时间:\"+(end - start)+\" 毫秒\"); &#125;&#125;十几分钟过去了... 缓冲流，代码如下： 123456789101112131415161718192021222324public class BufferedDemo &#123; public static void main(String[] args) throws FileNotFoundException &#123; // 记录开始时间 long start = System.currentTimeMillis(); // 创建流对象 try ( BufferedInputStream bis = new BufferedInputStream(new FileInputStream(\"jdk9.exe\")); BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(\"copy.exe\")); )&#123; // 读写数据 int b; while ((b = bis.read()) != -1) &#123; bos.write(b); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; // 记录结束时间 long end = System.currentTimeMillis(); System.out.println(\"缓冲流复制时间:\"+(end - start)+\" 毫秒\"); &#125;&#125;缓冲流复制时间:8016 毫秒 如何更快呢？ 使用数组的方式，代码如下： 123456789101112131415161718192021222324public class BufferedDemo &#123; public static void main(String[] args) throws FileNotFoundException &#123; // 记录开始时间 long start = System.currentTimeMillis(); // 创建流对象 try ( BufferedInputStream bis = new BufferedInputStream(new FileInputStream(\"jdk9.exe\")); BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(\"copy.exe\")); )&#123; // 读写数据 int len; byte[] bytes = new byte[8*1024]; while ((len = bis.read(bytes)) != -1) &#123; bos.write(bytes, 0 , len); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; // 记录结束时间 long end = System.currentTimeMillis(); System.out.println(\"缓冲流使用数组复制时间:\"+(end - start)+\" 毫秒\"); &#125;&#125;缓冲流使用数组复制时间:666 毫秒 1.3 字符缓冲流构造方法 public BufferedReader(Reader in) ：创建一个 新的缓冲输入流。 public BufferedWriter(Writer out)： 创建一个新的缓冲输出流。 构造举例，代码如下： 1234// 创建字节缓冲输入流BufferedReader br = new BufferedReader(new FileReader(\"br.txt\"));// 创建字节缓冲输出流BufferedWriter bw = new BufferedWriter(new FileWriter(\"bw.txt\")); 特有方法字符缓冲流的基本方法与普通字符流调用方式一致，不再阐述，我们来看它们具备的特有方法。 BufferedReader：public String readLine(): 读一行文字。 BufferedWriter：public void newLine(): 写一行行分隔符,由系统属性定义符号。 readLine方法演示，代码如下： 123456789101112131415public class BufferedReaderDemo &#123; public static void main(String[] args) throws IOException &#123; // 创建流对象 BufferedReader br = new BufferedReader(new FileReader(\"in.txt\")); // 定义字符串,保存读取的一行文字 String line = null; // 循环读取,读取到最后返回null while ((line = br.readLine())!=null) &#123; System.out.print(line); System.out.println(\"------\"); &#125; // 释放资源 br.close(); &#125;&#125; newLine方法演示，代码如下： 1234567891011121314151617181920public class BufferedWriterDemo throws IOException &#123; public static void main(String[] args) throws IOException &#123; // 创建流对象 BufferedWriter bw = new BufferedWriter(new FileWriter(\"out.txt\")); // 写出数据 bw.write(\"黑马\"); // 写出换行 bw.newLine(); bw.write(\"程序\"); bw.newLine(); bw.write(\"员\"); bw.newLine(); // 释放资源 bw.close(); &#125;&#125;输出效果:黑马程序员 1.4 练习:文本排序请将文本信息恢复顺序。 1234567893.侍中、侍郎郭攸之、费祎、董允等，此皆良实，志虑忠纯，是以先帝简拔以遗陛下。愚以为宫中之事，事无大小，悉以咨之，然后施行，必得裨补阙漏，有所广益。8.愿陛下托臣以讨贼兴复之效，不效，则治臣之罪，以告先帝之灵。若无兴德之言，则责攸之、祎、允等之慢，以彰其咎；陛下亦宜自谋，以咨诹善道，察纳雅言，深追先帝遗诏，臣不胜受恩感激。4.将军向宠，性行淑均，晓畅军事，试用之于昔日，先帝称之曰能，是以众议举宠为督。愚以为营中之事，悉以咨之，必能使行阵和睦，优劣得所。2.宫中府中，俱为一体，陟罚臧否，不宜异同。若有作奸犯科及为忠善者，宜付有司论其刑赏，以昭陛下平明之理，不宜偏私，使内外异法也。1.先帝创业未半而中道崩殂，今天下三分，益州疲弊，此诚危急存亡之秋也。然侍卫之臣不懈于内，忠志之士忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气，不宜妄自菲薄，引喻失义，以塞忠谏之路也。9.今当远离，临表涕零，不知所言。6.臣本布衣，躬耕于南阳，苟全性命于乱世，不求闻达于诸侯。先帝不以臣卑鄙，猥自枉屈，三顾臣于草庐之中，咨臣以当世之事，由是感激，遂许先帝以驱驰。后值倾覆，受任于败军之际，奉命于危难之间，尔来二十有一年矣。7.先帝知臣谨慎，故临崩寄臣以大事也。受命以来，夙夜忧叹，恐付托不效，以伤先帝之明，故五月渡泸，深入不毛。今南方已定，兵甲已足，当奖率三军，北定中原，庶竭驽钝，攘除奸凶，兴复汉室，还于旧都。此臣所以报先帝而忠陛下之职分也。至于斟酌损益，进尽忠言，则攸之、祎、允之任也。5.亲贤臣，远小人，此先汉所以兴隆也；亲小人，远贤臣，此后汉所以倾颓也。先帝在时，每与臣论此事，未尝不叹息痛恨于桓、灵也。侍中、尚书、长史、参军，此悉贞良死节之臣，愿陛下亲之信之，则汉室之隆，可计日而待也。 案例分析 逐行读取文本信息。 解析文本信息到集合中。 遍历集合，按顺序，写出文本信息。 案例实现12345678910111213141516171819202122232425262728293031323334public class BufferedTest &#123; public static void main(String[] args) throws IOException &#123; // 创建map集合,保存文本数据,键为序号,值为文字 HashMap&lt;String, String&gt; lineMap = new HashMap&lt;&gt;(); // 创建流对象 BufferedReader br = new BufferedReader(new FileReader(\"in.txt\")); BufferedWriter bw = new BufferedWriter(new FileWriter(\"out.txt\")); // 读取数据 String line = null; while ((line = br.readLine())!=null) &#123; // 解析文本 String[] split = line.split(\"\\\\.\"); // 保存到集合 lineMap.put(split[0],split[1]); &#125; // 释放资源 br.close(); // 遍历map集合 for (int i = 1; i &lt;= lineMap.size(); i++) &#123; String key = String.valueOf(i); // 获取map中文本 String value = lineMap.get(key); // 写出拼接文本 bw.write(key+\".\"+value); // 写出换行 bw.newLine(); &#125; // 释放资源 bw.close(); &#125;&#125; 第二章 转换流2.1 字符编码和字符集字符编码计算机中储存的信息都是用二进制数表示的，而我们在屏幕上看到的数字、英文、标点符号、汉字等字符是二进制数转换之后的结果。按照某种规则，将字符存储到计算机中，称为编码 。反之，将存储在计算机中的二进制数按照某种规则解析显示出来，称为解码 。比如说，按照A规则存储，同样按照A规则解析，那么就能显示正确的文本f符号。反之，按照A规则存储，再按照B规则解析，就会导致乱码现象。 字符编码Character Encoding : 就是一套自然语言的字符与二进制数之间的对应规则。 字符集 字符集 Charset：是一个系统支持的所有字符的集合，包括各国家文字、标点符号、图形符号、数字等。 计算机要准确的存储和识别各种字符集符号，需要进行字符编码，一套字符集必然至少有一套字符编码。常见字符集有ASCII字符集、GBK字符集、Unicode字符集等。 可见，当指定了编码，它所对应的字符集自然就指定了，所以编码才是我们最终要关心的。 ASCII字符集 ： ASCII（American Standard Code for Information Interchange，美国信息交换标准代码）是基于拉丁字母的一套电脑编码系统，用于显示现代英语，主要包括控制字符（回车键、退格、换行键等）和可显示字符（英文大小写字符、阿拉伯数字和西文符号）。 基本的ASCII字符集，使用7位（bits）表示一个字符，共128字符。ASCII的扩展字符集使用8位（bits）表示一个字符，共256字符，方便支持欧洲常用字符。 ISO-8859-1字符集： 拉丁码表，别名Latin-1，用于显示欧洲使用的语言，包括荷兰、丹麦、德语、意大利语、西班牙语等。 ISO-5559-1使用单字节编码，兼容ASCII编码。 GBxxx字符集： GB就是国标的意思，是为了显示中文而设计的一套字符集。 GB2312：简体中文码表。一个小于127的字符的意义与原来相同。但两个大于127的字符连在一起时，就表示一个汉字，这样大约可以组合了包含7000多个简体汉字，此外数学符号、罗马希腊的字母、日文的假名们都编进去了，连在ASCII里本来就有的数字、标点、字母都统统重新编了两个字节长的编码，这就是常说的”全角”字符，而原来在127号以下的那些就叫”半角”字符了。 GBK：最常用的中文码表。是在GB2312标准基础上的扩展规范，使用了双字节编码方案，共收录了21003个汉字，完全兼容GB2312标准，同时支持繁体汉字以及日韩汉字等。 GB18030：最新的中文码表。收录汉字70244个，采用多字节编码，每个字可以由1个、2个或4个字节组成。支持中国国内少数民族的文字，同时支持繁体汉字以及日韩汉字等。 Unicode字符集 ： Unicode编码系统为表达任意语言的任意字符而设计，是业界的一种标准，也称为统一码、标准万国码。 它最多使用4个字节的数字来表达每个字母、符号，或者文字。有三种编码方案，UTF-8、UTF-16和UTF-32。最为常用的UTF-8编码。 UTF-8编码，可以用来表示Unicode标准中任何字符，它是电子邮件、网页及其他存储或传送文字的应用中，优先采用的编码。互联网工程工作小组（IETF）要求所有互联网协议都必须支持UTF-8编码。所以，我们开发Web应用，也要使用UTF-8编码。它使用一至四个字节为每个字符编码，编码规则： 128个US-ASCII字符，只需一个字节编码。 拉丁文等字符，需要二个字节编码。 大部分常用字（含中文），使用三个字节编码。 其他极少使用的Unicode辅助字符，使用四字节编码。 2.2 编码引出的问题在IDEA中，使用FileReader 读取项目中的文本文件。由于IDEA的设置，都是默认的UTF-8编码，所以没有任何问题。但是，当读取Windows系统中创建的文本文件时，由于Windows系统的默认是GBK编码，就会出现乱码。 123456789101112public class ReaderDemo &#123; public static void main(String[] args) throws IOException &#123; FileReader fileReader = new FileReader(\"E:\\\\File_GBK.txt\"); int read; while ((read = fileReader.read()) != -1) &#123; System.out.print((char)read); &#125; fileReader.close(); &#125;&#125;输出结果：��� 那么如何读取GBK编码的文件呢？ 2.3 InputStreamReader类转换流java.io.InputStreamReader，是Reader的子类，是从字节流到字符流的桥梁。它读取字节，并使用指定的字符集将其解码为字符。它的字符集可以由名称指定，也可以接受平台的默认字符集。 构造方法 InputStreamReader(InputStream in): 创建一个使用默认字符集的字符流。 InputStreamReader(InputStream in, String charsetName): 创建一个指定字符集的字符流。 构造举例，代码如下： 12InputStreamReader isr = new InputStreamReader(new FileInputStream(\"in.txt\"));InputStreamReader isr2 = new InputStreamReader(new FileInputStream(\"in.txt\") , \"GBK\"); 指定编码读取1234567891011121314151617181920212223public class ReaderDemo2 &#123; public static void main(String[] args) throws IOException &#123; // 定义文件路径,文件为gbk编码 String FileName = \"E:\\\\file_gbk.txt\"; // 创建流对象,默认UTF8编码 InputStreamReader isr = new InputStreamReader(new FileInputStream(FileName)); // 创建流对象,指定GBK编码 InputStreamReader isr2 = new InputStreamReader(new FileInputStream(FileName) , \"GBK\"); // 定义变量,保存字符 int read; // 使用默认编码字符流读取,乱码 while ((read = isr.read()) != -1) &#123; System.out.print((char)read); // ��Һ� &#125; isr.close(); // 使用指定编码字符流读取,正常解析 while ((read = isr2.read()) != -1) &#123; System.out.print((char)read);// 大家好 &#125; isr2.close(); &#125;&#125; 2.4 OutputStreamWriter类转换流java.io.OutputStreamWriter ，是Writer的子类，是从字符流到字节流的桥梁。使用指定的字符集讲字符编码为字节。它的字符集可以由名称指定，也可以接受平台的默认字符集。 构造方法 OutputStreamWriter(OutputStream in): 创建一个使用默认字符集的字符流。 OutputStreamWriter(OutputStream in, String charsetName): 创建一个指定字符集的字符流。 构造举例，代码如下： 12OutputStreamWriter isr = new OutputStreamWriter(new FileOutputStream(\"out.txt\"));OutputStreamWriter isr2 = new OutputStreamWriter(new FileOutputStream(\"out.txt\") , \"GBK\"); 指定编码写出12345678910111213141516171819public class OutputDemo &#123; public static void main(String[] args) throws IOException &#123; // 定义文件路径 String FileName = \"E:\\\\out.txt\"; // 创建流对象,默认UTF8编码 OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(FileName)); // 写出数据 osw.write(\"你好\"); // 保存为6个字节 osw.close(); // 定义文件路径 String FileName2 = \"E:\\\\out2.txt\"; // 创建流对象,指定GBK编码 OutputStreamWriter osw2 = new OutputStreamWriter(new FileOutputStream(FileName2),\"GBK\"); // 写出数据 osw2.write(\"你好\");// 保存为4个字节 osw2.close(); &#125;&#125; 转换流理解图解转换流是字节与字符间的桥梁！ 2.5 练习：转换文件编码将GBK编码的文本文件，转换为UTF-8编码的文本文件。 案例分析 指定GBK编码的转换流，读取文本文件。 使用UTF-8编码的转换流，写出文本文件。 案例实现12345678910111213141516171819202122232425public class TransDemo &#123; public static void main(String[] args) &#123; // 1.定义文件路径 String srcFile = \"file_gbk.txt\"; String destFile = \"file_utf8.txt\"; // 2.创建流对象 // 2.1 转换输入流,指定GBK编码 InputStreamReader isr = new InputStreamReader(new FileInputStream(srcFile) , \"GBK\"); // 2.2 转换输出流,默认utf8编码 OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(destFile)); // 3.读写数据 // 3.1 定义数组 char[] cbuf = new char[1024]; // 3.2 定义长度 int len; // 3.3 循环读取 while ((len = isr.read(cbuf))!=-1) &#123; // 循环写出 osw.write(cbuf,0,len); &#125; // 4.释放资源 osw.close(); isr.close(); &#125;&#125; 第三章 序列化3.1 概述Java 提供了一种对象序列化的机制。用一个字节序列可以表示一个对象，该字节序列包含该对象的数据、对象的类型和对象中存储的数据等信息。字节序列写出到文件之后，相当于文件中持久保存了一个对象的信息。 反之，该字节序列还可以从文件中读取回来，重构对象，对它进行反序列化。对象的数据、对象的类型和对象中存储的数据信息，都可以用来在内存中创建对象。看图理解序列化： 3.2 ObjectOutputStream类java.io.ObjectOutputStream 类，将Java对象的原始数据类型写出到文件,实现对象的持久存储。 构造方法 public ObjectOutputStream(OutputStream out)： 创建一个指定OutputStream的ObjectOutputStream。 构造举例，代码如下： 12FileOutputStream fileOut = new FileOutputStream(\"employee.txt\");ObjectOutputStream out = new ObjectOutputStream(fileOut); 序列化操作 一个对象要想序列化，必须满足两个条件: 该类必须实现java.io.Serializable 接口，Serializable 是一个标记接口，不实现此接口的类将不会使任何状态序列化或反序列化，会抛出NotSerializableException 。 该类的所有属性必须是可序列化的。如果有一个属性不需要可序列化的，则该属性必须注明是瞬态的，使用transient 关键字修饰。 12345678public class Employee implements java.io.Serializable &#123; public String name; public String address; public transient int age; // transient瞬态修饰成员,不会被序列化 public void addressCheck() &#123; System.out.println(\"Address check : \" + name + \" -- \" + address); &#125;&#125; 2.写出对象方法 public final void writeObject (Object obj) : 将指定的对象写出。 12345678910111213141516171819202122public class SerializeDemo&#123; public static void main(String [] args) &#123; Employee e = new Employee(); e.name = \"zhangsan\"; e.address = \"beiqinglu\"; e.age = 20; try &#123; // 创建序列化流对象 ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(\"employee.txt\")); // 写出对象 out.writeObject(e); // 释放资源 out.close(); fileOut.close(); System.out.println(\"Serialized data is saved\"); // 姓名，地址被序列化，年龄没有被序列化。 &#125; catch(IOException i) &#123; i.printStackTrace(); &#125; &#125;&#125;输出结果：Serialized data is saved 3.3 ObjectInputStream类ObjectInputStream反序列化流，将之前使用ObjectOutputStream序列化的原始数据恢复为对象。 构造方法 public ObjectInputStream(InputStream in)： 创建一个指定InputStream的ObjectInputStream。 反序列化操作1如果能找到一个对象的class文件，我们可以进行反序列化操作，调用ObjectInputStream读取对象的方法： public final Object readObject () : 读取一个对象。 12345678910111213141516171819202122232425262728public class DeserializeDemo &#123; public static void main(String [] args) &#123; Employee e = null; try &#123; // 创建反序列化流 FileInputStream fileIn = new FileInputStream(\"employee.txt\"); ObjectInputStream in = new ObjectInputStream(fileIn); // 读取一个对象 e = (Employee) in.readObject(); // 释放资源 in.close(); fileIn.close(); &#125;catch(IOException i) &#123; // 捕获其他异常 i.printStackTrace(); return; &#125;catch(ClassNotFoundException c) &#123; // 捕获类找不到异常 System.out.println(\"Employee class not found\"); c.printStackTrace(); return; &#125; // 无异常,直接打印输出 System.out.println(\"Name: \" + e.name); // zhangsan System.out.println(\"Address: \" + e.address); // beiqinglu System.out.println(\"age: \" + e.age); // 0 &#125;&#125; 对于JVM可以反序列化对象，它必须是能够找到class文件的类。如果找不到该类的class文件，则抛出一个 ClassNotFoundException 异常。 反序列化操作2另外，当JVM反序列化对象时，能找到class文件，但是class文件在序列化对象之后发生了修改，那么反序列化操作也会失败，抛出一个InvalidClassException异常。发生这个异常的原因如下： 该类的序列版本号与从流中读取的类描述符的版本号不匹配 该类包含未知数据类型 该类没有可访问的无参数构造方法 Serializable 接口给需要序列化的类，提供了一个序列版本号。serialVersionUID 该版本号的目的在于验证序列化的对象和对应类是否版本匹配。 123456789101112public class Employee implements java.io.Serializable &#123; // 加入序列版本号 private static final long serialVersionUID = 1L; public String name; public String address; // 添加新的属性 ,重新编译, 可以反序列化,该属性赋为默认值. public int eid; public void addressCheck() &#123; System.out.println(\"Address check : \" + name + \" -- \" + address); &#125;&#125; 3.4 练习：序列化集合 将存有多个自定义对象的集合序列化操作，保存到list.txt文件中。 反序列化list.txt ，并遍历集合，打印对象信息。 案例分析 把若干学习对象 ，保存到集合中。 把集合序列化。 反序列化读取时，只需要读取一次，转换为集合类型。 遍历集合，可以打印所有的学生信息 案例实现12345678910111213141516171819202122232425262728293031323334public class SerTest &#123; public static void main(String[] args) throws Exception &#123; // 创建 学生对象 Student student = new Student(\"老王\", \"laow\"); Student student2 = new Student(\"老张\", \"laoz\"); Student student3 = new Student(\"老李\", \"laol\"); ArrayList&lt;Student&gt; arrayList = new ArrayList&lt;&gt;(); arrayList.add(student); arrayList.add(student2); arrayList.add(student3); // 序列化操作 // serializ(arrayList); // 反序列化 ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"list.txt\")); // 读取对象,强转为ArrayList类型 ArrayList&lt;Student&gt; list = (ArrayList&lt;Student&gt;)ois.readObject(); for (int i = 0; i &lt; list.size(); i++ )&#123; Student s = list.get(i); System.out.println(s.getName()+\"--\"+ s.getPwd()); &#125; &#125; private static void serializ(ArrayList&lt;Student&gt; arrayList) throws Exception &#123; // 创建 序列化流 ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"list.txt\")); // 写出对象 oos.writeObject(arrayList); // 释放资源 oos.close(); &#125;&#125; 第四章 打印流4.1 概述平时我们在控制台打印输出，是调用print方法和println方法完成的，这两个方法都来自于java.io.PrintStream类，该类能够方便地打印各种数据类型的值，是一种便捷的输出方式。 4.2 PrintStream类构造方法 public PrintStream(String fileName)： 使用指定的文件名创建一个新的打印流。 构造举例，代码如下： 1PrintStream ps = new PrintStream(\"ps.txt\")； 改变打印流向System.out就是PrintStream类型的，只不过它的流向是系统规定的，打印在控制台上。不过，既然是流对象，我们就可以玩一个”小把戏”，改变它的流向。 1234567891011121314public class PrintDemo &#123; public static void main(String[] args) throws IOException &#123; // 调用系统的打印流,控制台直接输出97 System.out.println(97); // 创建打印流,指定文件的名称 PrintStream ps = new PrintStream(\"ps.txt\"); // 设置系统的打印流流向,输出到ps.txt System.setOut(ps); // 调用系统的打印流,ps.txt中输出97 System.out.println(97); &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/11【网络编程】","date":"2018-06-20T07:43:35.000Z","updated":"2018-06-20T07:43:35.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/11【网络编程】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/11【网络编程】/","excerpt":"","text":"day11【网络编程】主要内容 软件架构CS／BS 网络通信三要素 TCP通信 Socket套接字 ServerSocket 教学目标 能够辨别UDP和TCP协议特点 能够说出TCP协议下两个常用类名称 能够编写UDP协议下字符串数据传输程序 能够编写TCP协议下字符串数据传输程序 能够理解TCP协议下文件上传案例 能够理解TCP协议下BS案例 第一章 网络编程入门1.1软件结构 C/S结构 ：全称为Client/Server结构，是指客户端和服务器结构。常见程序有ＱＱ、迅雷等软件。 B/S结构 ：全称为Browser/Server结构，是指浏览器和服务器结构。常见浏览器有谷歌、火狐等。 两种架构各有优势，但是无论哪种架构，都离不开网络的支持。网络编程，就是在一定的协议下，实现两台计算机的通信的程序。 1.2 网络通信协议 网络通信协议：通信协议是对计算机必须遵守的规则，只有遵守这些规则，计算机之间才能进行通信。这就好比在道路中行驶的汽车一定要遵守交通规则一样，协议中对数据的传输格式、传输速率、传输步骤等做了统一规定，通信双方必须同时遵守，最终完成数据交换。 TCP/IP协议： 传输控制协议/因特网互联协议( Transmission Control Protocol/Internet Protocol)，是Internet最基本、最广泛的协议。它定义了计算机如何连入因特网，以及数据如何在它们之间传输的标准。它的内部包含一系列的用于处理数据通信的协议，并采用了4层的分层模型，每一层都呼叫它的下一层所提供的协议来完成自己的需求。 1.3 协议分类通信的协议还是比较复杂的，java.net 包中包含的类和接口，它们提供低层次的通信细节。我们可以直接使用这些类和接口，来专注于网络程序开发，而不用考虑通信的细节。 java.net 包中提供了两种常见的网络协议的支持： TCP：传输控制协议 (Transmission Control Protocol)。TCP协议是面向连接的通信协议，即传输数据之前，在发送端和接收端建立逻辑连接，然后再传输数据，它提供了两台计算机之间可靠无差错的数据传输。 三次握手：TCP协议中，在发送数据的准备阶段，客户端与服务器之间的三次交互，以保证连接的可靠。 第一次握手，客户端向服务器端发出连接请求，等待服务器确认。 第二次握手，服务器端向客户端回送一个响应，通知客户端收到了连接请求。 第三次握手，客户端再次向服务器端发送确认信息，确认连接。整个交互过程如下图所示。 ​ 完成三次握手，连接建立后，客户端和服务器就可以开始进行数据传输了。由于这种面向连接的特性，TCP协议可以保证传输数据的安全，所以应用十分广泛，例如下载文件、浏览网页等。 UDP：用户数据报协议(User Datagram Protocol)。UDP协议是一个面向无连接的协议。传输数据时，不需要建立连接，不管对方端服务是否启动，直接将数据、数据源和目的地都封装在数据包中，直接发送。每个数据包的大小限制在64k以内。它是不可靠协议，因为无连接，所以传输速度快，但是容易丢失数据。日常应用中,例如视频会议、QQ聊天等。 1.4 网络编程三要素协议 协议：计算机网络通信必须遵守的规则，已经介绍过了，不再赘述。 IP地址 IP地址：指互联网协议地址（Internet Protocol Address），俗称IP。IP地址用来给一个网络中的计算机设备做唯一的编号。假如我们把“个人电脑”比作“一台电话”的话，那么“IP地址”就相当于“电话号码”。 IP地址分类 IPv4：是一个32位的二进制数，通常被分为4个字节，表示成a.b.c.d 的形式，例如192.168.65.100 。其中a、b、c、d都是0~255之间的十进制整数，那么最多可以表示42亿个。 IPv6：由于互联网的蓬勃发展，IP地址的需求量愈来愈大，但是网络地址资源有限，使得IP的分配越发紧张。有资料显示，全球IPv4地址在2011年2月分配完毕。 为了扩大地址空间，拟通过IPv6重新定义地址空间，采用128位地址长度，每16个字节一组，分成8组十六进制数，表示成ABCD:EF01:2345:6789:ABCD:EF01:2345:6789，号称可以为全世界的每一粒沙子编上一个网址，这样就解决了网络地址资源数量不够的问题。 常用命令 查看本机IP地址，在控制台输入： 1ipconfig 检查网络是否连通，在控制台输入： 12ping 空格 IP地址ping 220.181.57.216 特殊的IP地址 本机IP地址：127.0.0.1、localhost 。 端口号网络的通信，本质上是两个进程（应用程序）的通信。每台计算机都有很多的进程，那么在网络通信时，如何区分这些进程呢？ 如果说IP地址可以唯一标识网络中的设备，那么端口号就可以唯一标识设备中的进程（应用程序）了。 端口号：用两个字节表示的整数，它的取值范围是0~65535。其中，0~1023之间的端口号用于一些知名的网络服务和应用，普通的应用程序需要使用1024以上的端口号。如果端口号被另外一个服务或应用所占用，会导致当前程序启动失败。 利用协议+IP地址+端口号 三元组合，就可以标识网络中的进程了，那么进程间的通信就可以利用这个标识与其它进程进行交互。 第二章 TCP通信程序2.1 概述TCP通信能实现两台计算机之间的数据交互，通信的两端，要严格区分为客户端（Client）与服务端（Server）。 两端通信时步骤： 服务端程序，需要事先启动，等待客户端的连接。 客户端主动连接服务器端，连接成功才能通信。服务端不可以主动连接客户端。 在Java中，提供了两个类用于实现TCP通信程序： 客户端：java.net.Socket 类表示。创建Socket对象，向服务端发出连接请求，服务端响应请求，两者建立连接开始通信。 服务端：java.net.ServerSocket 类表示。创建ServerSocket对象，相当于开启一个服务，并等待客户端的连接。 2.2 Socket类Socket 类：该类实现客户端套接字，套接字指的是两台设备之间通讯的端点。 构造方法 public Socket(String host, int port) :创建套接字对象并将其连接到指定主机上的指定端口号。如果指定的host是null ，则相当于指定地址为回送地址。 小贴士：回送地址(127.x.x.x) 是本机回送地址（Loopback Address），主要用于网络软件测试以及本地机进程间通信，无论什么程序，一旦使用回送地址发送数据，立即返回，不进行任何网络传输。 构造举例，代码如下： 1Socket client = new Socket(\"127.0.0.1\", 6666); 成员方法 public InputStream getInputStream() ： 返回此套接字的输入流。 如果此Scoket具有相关联的通道，则生成的InputStream 的所有操作也关联该通道。 关闭生成的InputStream也将关闭相关的Socket。 public OutputStream getOutputStream() ： 返回此套接字的输出流。 如果此Scoket具有相关联的通道，则生成的OutputStream 的所有操作也关联该通道。 关闭生成的OutputStream也将关闭相关的Socket。 public void close() ：关闭此套接字。 一旦一个socket被关闭，它不可再使用。 关闭此socket也将关闭相关的InputStream和OutputStream 。 public void shutdownOutput() ： 禁用此套接字的输出流。 任何先前写出的数据将被发送，随后终止输出流。 2.3 ServerSocket类 ServerSocket类：这个类实现了服务器套接字，该对象等待通过网络的请求。 构造方法 public ServerSocket(int port) ：使用该构造方法在创建ServerSocket对象时，就可以将其绑定到一个指定的端口号上，参数port就是端口号。 构造举例，代码如下： 1ServerSocket server = new ServerSocket(6666); 成员方法 public Socket accept() ：侦听并接受连接，返回一个新的Socket对象，用于和客户端实现通信。该方法会一直阻塞直到建立连接。 2.4 简单的TCP网络程序TCP通信分析图解 【服务端】启动,创建ServerSocket对象，等待连接。 【客户端】启动,创建Socket对象，请求连接。 【服务端】接收连接,调用accept方法，并返回一个Socket对象。 【客户端】Socket对象，获取OutputStream，向服务端写出数据。 【服务端】Scoket对象，获取InputStream，读取客户端发送的数据。 到此，客户端向服务端发送数据成功。 自此，服务端向客户端回写数据。 【服务端】Socket对象，获取OutputStream，向客户端回写数据。 【客户端】Scoket对象，获取InputStream，解析回写数据。 【客户端】释放资源，断开连接。 客户端向服务器发送数据服务端实现： 12345678910111213141516171819202122public class ServerTCP &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务端启动 , 等待连接 .... \"); // 1.创建 ServerSocket对象，绑定端口，开始等待连接 ServerSocket ss = new ServerSocket(6666); // 2.接收连接 accept 方法, 返回 socket 对象. Socket server = ss.accept(); // 3.通过socket 获取输入流 InputStream is = server.getInputStream(); // 4.一次性读取数据 // 4.1 创建字节数组 byte[] b = new byte[1024]; // 4.2 据读取到字节数组中. int len = is.read(b)； // 4.3 解析数组,打印字符串信息 String msg = new String(b, 0, len); System.out.println(msg); //5.关闭资源. is.close(); server.close(); &#125;&#125; 客户端实现： 1234567891011121314public class ClientTCP &#123; public static void main(String[] args) throws Exception &#123; System.out.println(\"客户端 发送数据\"); // 1.创建 Socket ( ip , port ) , 确定连接到哪里. Socket client = new Socket(\"localhost\", 6666); // 2.获取流对象 . 输出流 OutputStream os = client.getOutputStream(); // 3.写出数据. os.write(\"你好么? tcp ,我来了\".getBytes()); // 4. 关闭资源 . os.close(); client.close(); &#125;&#125; 服务器向客户端回写数据服务端实现： 12345678910111213141516171819202122232425262728public class ServerTCP &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务端启动 , 等待连接 .... \"); // 1.创建 ServerSocket对象，绑定端口，开始等待连接 ServerSocket ss = new ServerSocket(6666); // 2.接收连接 accept 方法, 返回 socket 对象. Socket server = ss.accept(); // 3.通过socket 获取输入流 InputStream is = server.getInputStream(); // 4.一次性读取数据 // 4.1 创建字节数组 byte[] b = new byte[1024]; // 4.2 据读取到字节数组中. int len = is.read(b)； // 4.3 解析数组,打印字符串信息 String msg = new String(b, 0, len); System.out.println(msg); // =================回写数据======================= // 5. 通过 socket 获取输出流 OutputStream out = server.getOutputStream(); // 6. 回写数据 out.write(\"我很好,谢谢你\".getBytes()); // 7.关闭资源. out.close(); is.close(); server.close(); &#125;&#125; 客户端实现： 12345678910111213141516171819202122public class ClientTCP &#123; public static void main(String[] args) throws Exception &#123; System.out.println(\"客户端 发送数据\"); // 1.创建 Socket ( ip , port ) , 确定连接到哪里. Socket client = new Socket(\"localhost\", 6666); // 2.通过Scoket,获取输出流对象 OutputStream os = client.getOutputStream(); // 3.写出数据. os.write(\"你好么? tcp ,我来了\".getBytes()); // ==============解析回写========================= // 4. 通过Scoket,获取 输入流对象 InputStream in = client.getInputStream(); // 5. 读取数据数据 byte[] b = new byte[100]; int len = in.read(b); System.out.println(new String(b, 0, len)); // 6. 关闭资源 . in.close(); os.close(); client.close(); &#125;&#125; 第三章 综合案例3.1 文件上传案例文件上传分析图解 【客户端】输入流，从硬盘读取文件数据到程序中。 【客户端】输出流，写出文件数据到服务端。 【服务端】输入流，读取文件数据到服务端程序。 【服务端】输出流，写出文件数据到服务器硬盘中。 基本实现服务端实现： 12345678910111213141516171819202122232425public class FileUpload_Server &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务器 启动..... \"); // 1. 创建服务端ServerSocket ServerSocket serverSocket = new ServerSocket(6666); // 2. 建立连接 Socket accept = serverSocket.accept(); // 3. 创建流对象 // 3.1 获取输入流,读取文件数据 BufferedInputStream bis = new BufferedInputStream(accept.getInputStream()); // 3.2 创建输出流,保存到本地 . BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(\"copy.jpg\")); // 4. 读写数据 byte[] b = new byte[1024 * 8]; int len; while ((len = bis.read(b)) != -1) &#123; bos.write(b, 0, len); &#125; //5. 关闭 资源 bos.close(); bis.close(); accept.close(); System.out.println(\"文件上传已保存\"); &#125;&#125; 客户端实现： 12345678910111213141516171819202122232425public class FileUPload_Client &#123; public static void main(String[] args) throws IOException &#123; // 1.创建流对象 // 1.1 创建输入流,读取本地文件 BufferedInputStream bis = new BufferedInputStream(new FileInputStream(\"test.jpg\")); // 1.2 创建输出流,写到服务端 Socket socket = new Socket(\"localhost\", 6666); BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream()); //2.写出数据. byte[] b = new byte[1024 * 8 ]; int len ; while (( len = bis.read(b))!=-1) &#123; bos.write(b, 0, len); bos.flush(); &#125; System.out.println(\"文件发送完毕\"); // 3.释放资源 bos.close(); socket.close(); bis.close(); System.out.println(\"文件上传完毕 \"); &#125;&#125; 文件上传优化分析 文件名称写死的问题 服务端，保存文件的名称如果写死，那么最终导致服务器硬盘，只会保留一个文件，建议使用系统时间优化，保证文件名称唯一，代码如下： 12FileOutputStream fis = new FileOutputStream(System.currentTimeMillis()+\".jpg\") // 文件名称BufferedOutputStream bos = new BufferedOutputStream(fis); 循环接收的问题 服务端，指保存一个文件就关闭了，之后的用户无法再上传，这是不符合实际的，使用循环改进，可以不断的接收不同用户的文件，代码如下： 12345// 每次接收新的连接,创建一个Socketwhile（true）&#123; Socket accept = serverSocket.accept(); ......&#125; 效率问题 服务端，在接收大文件时，可能耗费几秒钟的时间，此时不能接收其他用户上传，所以，使用多线程技术优化，代码如下： 123456789while（true）&#123; Socket accept = serverSocket.accept(); // accept 交给子线程处理. new Thread(() -&gt; &#123; ...... InputStream bis = accept.getInputStream(); ...... &#125;).start();&#125; 优化实现12345678910111213141516171819202122232425262728293031323334353637public class FileUpload_Server &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务器 启动..... \"); // 1. 创建服务端ServerSocket ServerSocket serverSocket = new ServerSocket(6666); // 2. 循环接收,建立连接 while (true) &#123; Socket accept = serverSocket.accept(); /* 3. socket对象交给子线程处理,进行读写操作 Runnable接口中,只有一个run方法,使用lambda表达式简化格式 */ new Thread(() -&gt; &#123; try ( //3.1 获取输入流对象 BufferedInputStream bis = new BufferedInputStream(accept.getInputStream()); //3.2 创建输出流对象, 保存到本地 . FileOutputStream fis = new FileOutputStream(System.currentTimeMillis() + \".jpg\"); BufferedOutputStream bos = new BufferedOutputStream(fis);) &#123; // 3.3 读写数据 byte[] b = new byte[1024 * 8]; int len; while ((len = bis.read(b)) != -1) &#123; bos.write(b, 0, len); &#125; //4. 关闭 资源 bos.close(); bis.close(); accept.close(); System.out.println(\"文件上传已保存\"); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;).start(); &#125; &#125;&#125; 信息回写分析图解前四步与基本文件上传一致. 【服务端】获取输出流，回写数据。 【客户端】获取输入流，解析回写数据。 回写实现12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class FileUpload_Server &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务器 启动..... \"); // 1. 创建服务端ServerSocket ServerSocket serverSocket = new ServerSocket(6666); // 2. 循环接收,建立连接 while (true) &#123; Socket accept = serverSocket.accept(); /* 3. socket对象交给子线程处理,进行读写操作 Runnable接口中,只有一个run方法,使用lambda表达式简化格式 */ new Thread(() -&gt; &#123; try ( //3.1 获取输入流对象 BufferedInputStream bis = new BufferedInputStream(accept.getInputStream()); //3.2 创建输出流对象, 保存到本地 . FileOutputStream fis = new FileOutputStream(System.currentTimeMillis() + \".jpg\"); BufferedOutputStream bos = new BufferedOutputStream(fis); ) &#123; // 3.3 读写数据 byte[] b = new byte[1024 * 8]; int len; while ((len = bis.read(b)) != -1) &#123; bos.write(b, 0, len); &#125; // 4.=======信息回写=========================== System.out.println(\"back ........\"); OutputStream out = accept.getOutputStream(); out.write(\"上传成功\".getBytes()); out.close(); //================================ //5. 关闭 资源 bos.close(); bis.close(); accept.close(); System.out.println(\"文件上传已保存\"); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;).start(); &#125; &#125;&#125; 客户端实现： 12345678910111213141516171819202122232425262728293031public class FileUpload_Client &#123; public static void main(String[] args) throws IOException &#123; // 1.创建流对象 // 1.1 创建输入流,读取本地文件 BufferedInputStream bis = new BufferedInputStream(new FileInputStream(\"test.jpg\")); // 1.2 创建输出流,写到服务端 Socket socket = new Socket(\"localhost\", 6666); BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream()); //2.写出数据. byte[] b = new byte[1024 * 8 ]; int len ; while (( len = bis.read(b))!=-1) &#123; bos.write(b, 0, len); &#125; // 关闭输出流,通知服务端,写出数据完毕 socket.shutdownOutput(); System.out.println(\"文件发送完毕\"); // 3. =====解析回写============ InputStream in = socket.getInputStream(); byte[] back = new byte[20]; in.read(back); System.out.println(new String(back)); in.close(); // ============================ // 4.释放资源 socket.close(); bis.close(); &#125;&#125; 3.2 模拟服务器模拟网站服务器，使用浏览器访问自己编写的服务端程序，查看网页效果。 案例分析 准备页面数据，web文件夹。 复制到我们Module中，比如复制到day08中 我们模拟服务器端，ServerSocket类监听端口，使用浏览器访问 12345678910public static void main(String[] args) throws IOException &#123; ServerSocket server = new ServerSocket(8000); Socket socket = server.accept(); InputStream in = socket.getInputStream(); byte[] bytes = new byte[1024]; int len = in.read(bytes); System.out.println(new String(bytes,0,len)); socket.close(); server.close();&#125; 服务器程序中字节输入流可以读取到浏览器发来的请求信息 GET/web/index.html HTTP/1.1是浏览器的请求消息。/web/index.html为浏览器想要请求的服务器端的资源,使用字符串切割方式获取到请求的资源。 12345678//转换流,读取浏览器请求第一行BufferedReader readWb = new BufferedReader(new InputStreamReader(socket.getInputStream()));String requst = readWb.readLine();//取出请求资源的路径String[] strArr = requst.split(\" \");//去掉web前面的/String path = strArr[1].substring(1);System.out.println(path); 案例实现服务端实现： 1234567891011121314151617181920212223242526272829303132333435public class SerDemo &#123; public static void main(String[] args) throws IOException &#123; System.out.println(\"服务端 启动 , 等待连接 .... \"); // 创建ServerSocket 对象 ServerSocket server = new ServerSocket(8888); Socket socket = server.accept(); // 转换流读取浏览器的请求消息 BufferedReader readWb = new BufferedReader(new InputStreamReader(socket.getInputStream())); String requst = readWb.readLine(); // 取出请求资源的路径 String[] strArr = requst.split(\" \"); // 去掉web前面的/ String path = strArr[1].substring(1); // 读取客户端请求的资源文件 FileInputStream fis = new FileInputStream(path); byte[] bytes= new byte[1024]; int len = 0 ; // 字节输出流,将文件写会客户端 OutputStream out = socket.getOutputStream(); // 写入HTTP协议响应头,固定写法 out.write(\"HTTP/1.1 200 OK\\r\\n\".getBytes()); out.write(\"Content-Type:text/html\\r\\n\".getBytes()); // 必须要写入空行,否则浏览器不解析 out.write(\"\\r\\n\".getBytes()); while((len = fis.read(bytes))!=-1)&#123; out.write(bytes,0,len); &#125; fis.close(); out.close(); readWb.close(); socket.close(); server.close(); &#125;&#125; 访问效果 火狐 小贴士：不同的浏览器，内核不一样，解析效果有可能不一样。 发现浏览器中出现很多的叉子,说明浏览器没有读取到图片信息导致。 浏览器工作原理是遇到图片会开启一个线程进行单独的访问,因此在服务器端加入线程技术。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class ServerDemo &#123; public static void main(String[] args) throws IOException &#123; ServerSocket server = new ServerSocket(8888); while(true)&#123; Socket socket = server.accept(); new Thread(new Web(socket)).start(); &#125; &#125; static class Web implements Runnable&#123; private Socket socket; public Web(Socket socket)&#123; this.socket=socket; &#125; public void run() &#123; try&#123; //转换流,读取浏览器请求第一行 BufferedReader readWb = new BufferedReader(new InputStreamReader(socket.getInputStream())); String requst = readWb.readLine(); //取出请求资源的路径 String[] strArr = requst.split(\" \"); System.out.println(Arrays.toString(strArr)); String path = strArr[1].substring(1); System.out.println(path); FileInputStream fis = new FileInputStream(path); System.out.println(fis); byte[] bytes= new byte[1024]; int len = 0 ; //向浏览器 回写数据 OutputStream out = socket.getOutputStream(); out.write(\"HTTP/1.1 200 OK\\r\\n\".getBytes()); out.write(\"Content-Type:text/html\\r\\n\".getBytes()); out.write(\"\\r\\n\".getBytes()); while((len = fis.read(bytes))!=-1)&#123; out.write(bytes,0,len); &#125; fis.close(); out.close(); readWb.close(); socket.close(); &#125;catch(Exception ex)&#123; &#125; &#125; &#125;&#125; 访问效果： 图解：","categories":[],"tags":[]},{"title":"","slug":"Java/JavaSE/课件/04【final、权限、内部类】","date":"2018-06-20T07:43:33.000Z","updated":"2018-06-20T07:44:02.000Z","comments":true,"path":"2018/06/20/Java/JavaSE/课件/04【final、权限、内部类】/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/Java/JavaSE/课件/04【final、权限、内部类】/","excerpt":"","text":"day04【final、权限、内部类、引用类型】今日内容 final关键字 权限 内部类 引用类型 教学目标 描述final修饰的类的特点 描述final修饰的方法的特点 能够说出权限修饰符作用范围 说出内部类的概念 能够理解引用类型作为成员变量 能够理解引用类型作为方法参数 能够理解引用类型作为方法返回值类型 第一章 final关键字1.1 概述学习了继承后，我们知道，子类可以在父类的基础上改写父类内容，比如，方法重写。那么我们能不能随意的继承API中提供的类，改写其内容呢？显然这是不合适的。为了避免这种随意改写的情况，Java提供了final 关键字，用于修饰不可改变内容。 final： 不可改变。可以用于修饰类、方法和变量。 类：被修饰的类，不能被继承。 方法：被修饰的方法，不能被重写。 变量：被修饰的变量，不能被重新赋值。 1.2 使用方式修饰类格式如下： 123final class 类名 &#123; &#125; 查询API发现像 public final class String 、public final class Math 、public final class Scanner 等，很多我们学习过的类，都是被final修饰的，目的就是供我们使用，而不让我们所以改变其内容。 修饰方法格式如下： 123修饰符 final 返回值类型 方法名(参数列表)&#123; //方法体&#125; 重写被 final修饰的方法，编译时就会报错。 修饰变量 局部变量——基本类型 基本类型的局部变量，被final修饰后，只能赋值一次，不能再更改。代码如下： 12345678910111213141516public class FinalDemo1 &#123; public static void main(String[] args) &#123; // 声明变量，使用final修饰 final int a; // 第一次赋值 a = 10; // 第二次赋值 a = 20; // 报错,不可重新赋值 // 声明变量，直接赋值，使用final修饰 final int b = 10; // 第二次赋值 b = 20; // 报错,不可重新赋值 &#125;&#125; 思考，如下两种写法，哪种可以通过编译？ 写法1： 12345final int c = 0;for (int i = 0; i &lt; 10; i++) &#123; c = i; System.out.println(c);&#125; 写法2： 1234for (int i = 0; i &lt; 10; i++) &#123; final int c = i; System.out.println(c);&#125; 根据 final 的定义，写法1报错！写法2，为什么通过编译呢？因为每次循环，都是一次新的变量c。这也是大家需要注意的地方。 局部变量——引用类型 引用类型的局部变量，被final修饰后，只能指向一个对象，地址不能再更改。但是不影响对象内部的成员变量值的修改，代码如下： 1234567891011public class FinalDemo2 &#123; public static void main(String[] args) &#123; // 创建 User 对象 final User u = new User(); // 创建 另一个 User对象 u = new User(); // 报错，指向了新的对象，地址值改变。 // 调用setName方法 u.setName(\"张三\"); // 可以修改 &#125;&#125; 成员变量 成员变量涉及到初始化的问题，初始化方式有两种，只能二选一： 显示初始化； 1234public class User &#123; final String USERNAME = \"张三\"; private int age;&#125; 构造方法初始化。 12345678public class User &#123; final String USERNAME ; private int age; public User(String username, int age) &#123; this.USERNAME = username; this.age = age; &#125;&#125; 被final修饰的常量名称，一般都有书写规范，所有字母都大写。 第二章 权限修饰符2.1 概述在Java中提供了四种访问权限，使用不同的访问权限修饰符修饰时，被修饰的内容会有不同的访问权限， public：公共的。 protected：受保护的 default：默认的 private：私有的 2.2 不同权限的访问能力 public protected default（空的） private 同一类中 √ √ √ √ 同一包中(子类与无关类) √ √ √ 不同包的子类 √ √ 不同包中的无关类 √ 可见，public具有最大权限。private则是最小权限。 编写代码时，如果没有特殊的考虑，建议这样使用权限： 成员变量使用private ，隐藏细节。 构造方法使用public ，方便创建对象。 成员方法使用public ，方便调用方法。 小贴士：不加权限修饰符，其访问能力与default修饰符相同 第三章 内部类1.1 概述什么是内部类将一个类A定义在另一个类B里面，里面的那个类A就称为内部类，B则称为外部类。 成员内部类 成员内部类 ：定义在类中方法外的类。 定义格式： 12345class 外部类 &#123; class 内部类&#123; &#125;&#125; 在描述事物时，若一个事物内部还包含其他事物，就可以使用内部类这种结构。比如，汽车类Car 中包含发动机类Engine ，这时，Engine就可以使用内部类来描述，定义在成员位置。 代码举例： 12345class Car &#123; //外部类 class Engine &#123; //内部类 &#125;&#125; 访问特点 内部类可以直接访问外部类的成员，包括私有成员。 外部类要访问内部类的成员，必须要建立内部类的对象。 创建内部类对象格式： 1外部类名.内部类名 对象名 = new 外部类型().new 内部类型()； 访问演示，代码如下： 定义类： 12345678910111213141516171819202122public class Person &#123; private boolean live = true; class Heart &#123; public void jump() &#123; // 直接访问外部类成员 if (live) &#123; System.out.println(\"心脏在跳动\"); &#125; else &#123; System.out.println(\"心脏不跳了\"); &#125; &#125; &#125; public boolean isLive() &#123; return live; &#125; public void setLive(boolean live) &#123; this.live = live; &#125;&#125; 定义测试类： 123456789101112131415161718public class InnerDemo &#123; public static void main(String[] args) &#123; // 创建外部类对象 Person p = new Person(); // 创建内部类对象 Heart heart = p.new Heart(); // 调用内部类方法 heart.jump(); // 调用外部类方法 p.setLive(false); // 调用内部类方法 heart.jump(); &#125;&#125;输出结果:心脏在跳动心脏不跳了 内部类仍然是一个独立的类，在编译之后会内部类会被编译成独立的.class文件，但是前面冠以外部类的类名和$符号 。 比如，Person$Heart.class 1.2 匿名内部类【重点】 匿名内部类 ：是内部类的简化写法。它的本质是一个带具体实现的 父类或者父接口的 匿名的 子类对象。 开发中，最常用到的内部类就是匿名内部类了。以接口举例，当你使用一个接口时，似乎得做如下几步操作， 定义子类 重写接口中的方法 创建子类对象 调用重写后的方法 我们的目的，最终只是为了调用方法，那么能不能简化一下，把以上四步合成一步呢？匿名内部类就是做这样的快捷方式。 前提匿名内部类必须继承一个父类或者实现一个父接口。 格式1234567new 父类名或者接口名()&#123; // 方法重写 @Override public void method() &#123; // 执行语句 &#125;&#125;; 使用方式以接口为例，匿名内部类的使用，代码如下： 定义接口： 123public abstract class FlyAble&#123; public abstract void fly();&#125; 创建匿名内部类，并调用： 12345678910111213141516public class InnerDemo &#123; public static void main(String[] args) &#123; /* 1.等号右边:是匿名内部类，定义并创建该接口的子类对象 2.等号左边:是多态赋值,接口类型引用指向子类对象 */ FlyAble f = new FlyAble()&#123; public void fly() &#123; System.out.println(\"我飞了~~~\"); &#125; &#125;; //调用 fly方法,执行重写后的方法 f.fly(); &#125;&#125; 通常在方法的形式参数是接口或者抽象类时，也可以将匿名内部类作为参数传递。代码如下： 123456789101112131415161718public class InnerDemo2 &#123; public static void main(String[] args) &#123; /* 1.等号右边:定义并创建该接口的子类对象 2.等号左边:是多态,接口类型引用指向子类对象 */ FlyAble f = new FlyAble()&#123; public void fly() &#123; System.out.println(\"我飞了~~~\"); &#125; &#125;; // 将f传递给showFly方法中 showFly(f); &#125; public static void showFly(FlyAble f) &#123; f.fly(); &#125;&#125; 以上两步，也可以简化为一步，代码如下： 12345678910111213141516public class InnerDemo3 &#123; public static void main(String[] args) &#123; /* 创建匿名内部类,直接传递给showFly(FlyAble f) */ showFly( new FlyAble()&#123; public void fly() &#123; System.out.println(\"我飞了~~~\"); &#125; &#125;); &#125; public static void showFly(FlyAble f) &#123; f.fly(); &#125;&#125; 第四章 引用类型用法总结实际的开发中，引用类型的使用非常重要，也是非常普遍的。我们可以在理解基本类型的使用方式基础上，进一步去掌握引用类型的使用方式。基本类型可以作为成员变量、作为方法的参数、作为方法的返回值，那么当然引用类型也是可以的。 4.1 class作为成员变量在定义一个类Role（游戏角色）时，代码如下： 12345class Role &#123; int id; // 角色id int blood; // 生命值 String name; // 角色名称&#125; 使用int 类型表示 角色id和生命值，使用String 类型表示姓名。此时，String本身就是引用类型，由于使用的方式类似常量，所以往往忽略了它是引用类型的存在。如果我们继续丰富这个类的定义，给Role 增加武器，穿戴装备等属性，我们将如何编写呢？ 定义武器类，将增加攻击能力： 1234class Weapon &#123; String name； // 武器名称 int hurt； // 伤害值 &#125; 定义穿戴盔甲类，将增加防御能力，也就是提升生命值： 1234class Armour &#123; String name；// 装备名称 int protect；// 防御值 &#125; 定义角色类： 1234567891011121314151617181920212223242526272829303132333435class Role &#123; int id； int blood； String name； // 添加武器属性 Weapon wp； // 添加盔甲属性 Armour ar； // 提供get/set方法 public Weapon getWp() &#123; return wp; &#125; public void setWeapon(Weapon wp) &#123; this.wp = wp; &#125; public Armour getArmour() &#123; return ar; &#125; public void setArmour(Armour ar) &#123; this.ar = ar; &#125; // 攻击方法 public void attack()&#123; System.out.println(\"使用\"+ wp.getName() +\", 造成\"+wp.getHurt()+\"点伤害\"); &#125; // 穿戴盔甲 public void wear()&#123; // 增加防御,就是增加blood值 this.blood += ar.getProtect(); System.out.println(\"穿上\"+ar.getName()+\", 生命值增加\"+ar.getProtect()); &#125; &#125; 测试类： 1234567891011121314151617181920212223public class Test &#123; public static void main(String[] args) &#123; // 创建Weapon 对象 Weapon wp = new Weapon(\"屠龙刀\" , 999999); // 创建Armour 对象 Armour ar = new Armour(\"麒麟甲\",10000); // 创建Role 对象 Role r = new Role(); // 设置武器属性 r.setWeapon(wp); // 设置盔甲属性 r.setArmour(ar); // 攻击 r.attack(); // 穿戴盔甲 r.wear(); &#125;&#125;输出结果:使用屠龙刀,造成999999点伤害穿上麒麟甲 ,生命值增加10000 类作为成员变量时，对它进行赋值的操作，实际上，是赋给它该类的一个对象。 4.2 interface作为成员变量接口是对方法的封装，对应游戏当中，可以看作是扩展游戏角色的技能。所以，如果想扩展更强大技能，我们在Role中，可以增加接口作为成员变量，来设置不同的技能。 定义接口： 1234// 法术攻击public interface FaShuSkill &#123; public abstract void faShuAttack();&#125; 定义角色类： 12345678910111213public class Role &#123; FaShuSkill fs; public void setFaShuSkill(FaShuSkill fs) &#123; this.fs = fs; &#125; // 法术攻击 public void faShuSkillAttack()&#123; System.out.print(\"发动法术攻击:\"); fs.faShuAttack(); System.out.println(\"攻击完毕\"); &#125;&#125; 定义测试类： 1234567891011121314151617181920212223242526272829303132public class Test &#123; public static void main(String[] args) &#123; // 创建游戏角色 Role role = new Role(); // 设置角色法术技能 role.setFaShuSkill(new FaShuSkill() &#123; @Override public void faShuAttack() &#123; System.out.println(\"纵横天下\"); &#125; &#125;); // 发动法术攻击 role.faShuSkillAttack(); // 更换技能 role.setFaShuSkill(new FaShuSkill() &#123; @Override public void faShuAttack() &#123; System.out.println(\"逆转乾坤\"); &#125; &#125;); // 发动法术攻击 role.faShuSkillAttack(); &#125;&#125;输出结果:发动法术攻击:纵横天下攻击完毕发动法术攻击:逆转乾坤攻击完毕 我们使用一个接口，作为成员变量，以便随时更换技能，这样的设计更为灵活，增强了程序的扩展性。 接口作为成员变量时，对它进行赋值的操作，实际上，是赋给它该接口的一个子类对象。 4.3 interface作为方法参数和返回值类型当接口作为方法的参数时,需要传递什么呢？当接口作为方法的返回值类型时，需要返回什么呢？对，其实都是它的子类对象。ArrayList类我们并不陌生，查看API我们发现，实际上，它是 java.util.List 接口的实现类。所以，当我们看见List 接口作为参数或者返回值类型时，当然可以将ArrayList的对象进行传递或返回。 请观察如下方法：获取某集合中所有的偶数。 定义方法： 1234567891011121314151617public static List&lt;Integer&gt; getEvenNum(List&lt;Integer&gt; list) &#123; // 创建保存偶数的集合 ArrayList&lt;Integer&gt; evenList = new ArrayList&lt;&gt;(); // 遍历集合list,判断元素为偶数,就添加到evenList中 for (int i = 0; i &lt; list.size(); i++) &#123; Integer integer = list.get(i); if (integer % 2 == 0) &#123; evenList.add(integer); &#125; &#125; /* 返回偶数集合 因为getEvenNum方法的返回值类型是List,而ArrayList是List的子类, 所以evenList可以返回 */ return evenList;&#125; 调用方法： 1234567891011121314151617public class Test &#123; public static void main(String[] args) &#123; // 创建ArrayList集合,并添加数字 ArrayList&lt;Integer&gt; srcList = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; srcList.add(i); &#125; /* 获取偶数集合 因为getEvenNum方法的参数是List,而ArrayList是List的子类, 所以srcList可以传递 */ List list = getEvenNum(srcList); System.out.println(list); &#125;&#125; 接口作为参数时，传递它的子类对象。 接口作为返回值类型时，返回它的子类对象。 第五章 综合案例——发红包【界面版】红包文化源远流长。从古时的红色纸包，到手机App中的手气红包，红包作为一种独特的中华文化传承至今。之前的课程中，我们也编写过程序，模拟发普通红包。那么今天，我们将整合基础班课程中所有的技术和知识，编写一个带界面版的 发红包 案例。 目前，我们尚未学习过任何与界面相关的类。所以，界面相关代码，已经给出。请运用所学技术分析并使用。 案例需求分析并使用已给出的类，编写程序，设置红包类型。 小贴士 红包类型： 普通红包：金额均分。不能整除的，余额添加到最后一份红包中。 手气红包：金额随机。各个红包金额累和与总金额相等。 红包场景： ​ 此案例是模拟群主给群成员发红包，群主自己打开最后一个红包的场景。 案例分析已知的类： RedPacketFrame ：一个抽象类，包含了一些属性，是红包案例的页面。 1234567891011121314151617181920212223public abstract class RedPacketFrame extends JFrame &#123; /* ownerName : 群主名称 */ public String ownerName = \"谁谁谁谁\"; /* openMode : 红包的类型 [普通红包/手气红包] */ public OpenMode openMode = null; /** * 构造方法:生成红包界面. * @param title 页面的标题. */ public RedPacketFrame(String title) &#123; super(title); init();// 页面相关的初始化操作 &#125; /* set方法 */ public void setOwnerName(String ownerName) &#123; this.ownerName = ownerName; &#125; public void setOpenMode(OpenMode openMode) &#123; this.openMode = openMode; &#125;&#125; OpenMode ：一个接口，包含一个分配方法，用来指定红包类型。 12345678910public interface OpenMode &#123; /** * @param totalMoney 总金额,单位是\"分\"。总金额为方便计算,已经转换为整数,单位为分。 * @param count 红包个数 * @return ArrayList&lt;Integer&gt; 元素为各个红包的金额值,所有元素的值累和等于总金额. * * 请将totalMoney,分成count分,保存到ArrayList&lt;Integer&gt;中,返回即可. */ public abstract ArrayList&lt;Integer&gt; divide(int totalMoney, int count);&#125; 案例实现环境搭建： 创建项目：名称自定义，建议为RedPacketDemo 。 导入图片：将pic目录，导入项目中，与src 目录平级。 导入已知类：在src下创建一个包，名字自定义，建议为known ，将类 RedPacketFrame、接口OpenMode 拷入。 代码实现： 定义RedPacket 类，继承RedPacketFrame ，代码如下： 12345public class RedPacket extends RedPacketFrame &#123; public RedPacket(String title) &#123; super(title); &#125;&#125; 定义测试类，创建RedPacket 对象，代码如下： 12345public class RedPacketTest &#123; public static void main(String[] args) &#123; RedPacket rp = new RedPacket(\"大红包\"); &#125;&#125; 运行代码，打开一个发红包的页面。可以输入总金额，红包个数，留言信息。 点击塞钱进红包按钮，跳转到下一页面。 点击谁谁谁谁和開，两个区域，发现可以设置两项内容： 谁谁谁谁：表示群主在发红包，可设置群主名称。通过此方法，熟悉类结构，直接调用父类的方法。 開 ：表示打开红包，跳转到下一页面。但是开启之前，必须先设置红包的类型，否则无法开启。 RedPacket 对象，设置群主名称。 setOwnerName（String ownerName） ，是字符串作为参数。我们只需要传递一个字符串即可。 12345678public class RedPacketTest &#123; public static void main(String[] args) &#123; // 创建红包对象 RedPacket rp = new RedPacket(\"大红包\"); // 设置群主名称 rp.setOwnerName(\"我是群大大\"); &#125;&#125; RedPacket 对象，设置红包类型。 setOpenMode(OpenMode openMode) ，是接口作为参数。我们必须定义接口的实现类，重写接口中方法，并传递实现类对象到setOpenMode方法中，方可设置完成。再观察接口： 12345678910public interface OpenMode &#123; /** * @param totalMoney 总金额,单位是\"分\"。总金额为方便计算,已经转换为整数,单位为分。 * @param count 红包个数 * @return ArrayList&lt;Integer&gt; 元素为各个红包的金额值,所有元素的值累和等于总金额. * * 请将totalMoney,分成count分,保存到ArrayList&lt;Integer&gt;中,返回即可. */ public abstract ArrayList&lt;Integer&gt; divide(int totalMoney, int count);&#125; 普通红包，打开方式Common，代码如下： 1234567891011121314151617181920212223public class Common implements OpenMode &#123; @Override public ArrayList&lt;Integer&gt; divide(int totalMoney, int count) &#123; // 创建保存各个红包金额的集合 ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); // 定义循环次数,总个数-1次 int time = count - 1; // 一次计算,生成平均金额 int money = totalMoney / count; // 循环分配 for (int i = 0; i &lt; time; i++) &#123; // 添加到集合中 list.add(money); // 总金额扣除已分配金额 totalMoney -= money; &#125; // 剩余的金额,为最后一个红包 list.add(totalMoney); System.out.println(\"普通红包金额:\" + list); // 返回集合 return list; &#125;&#125; 发普通红包，代码如下： 12345678910public class RedPacketTest &#123; public static void main(String[] args) &#123; // 创建红包对象 RedPacket rp = new RedPacket(\"大红包\"); // 设置群主名称 rp.setOwnerName(\"我是群大大\"); // 设置红包类型 rp.setOpenMode(new Common()); // 普通红包 &#125;&#125; 手气红包【重点】 本质上，手气红包就是把总金额totalMoney 随机分成指定的count份，所以必须规定每一份金额的取值范围。如果范围太小，可能导致后分配红包金额特别大。反之范围太大，可能导致后分配红包金额为0，不够分。可见，取值范围的定义规则，是手气红包的关键所在。 我们规定：每一份随机金额范围（除最后一份），最小值为1，最大值为当前剩余平均金额的2倍 ，单位为”分”。 计算公式： 1当前剩余平均金额 = 剩余总金额 / 剩余红包个数 举例：总额为50元，发5个红包。 当前剩余平均金额（取整数） 红包范围 随机金额（假设） 第一个红包 50 / 5 = 10 0.01~20 5 第二个红包 45 / 4 = 11 0.01~22 20 第三个红包 25 / 3. = 8 0.01~16 10 第四个红包 15 / 2 = 7 0.01~14 12 第五个红包（最后一个） 无需计算 剩余金额 3 小贴士：为方便表格中进行运算，此处，单位为”元”。程序中，建议换算为”分”进行运算。 手气红包，打开方式Lucky ，代码如下： 1234567891011121314151617181920212223242526272829public class Lucky implements OpenMode &#123; @Override public ArrayList&lt;Integer&gt; divide(int totalMoney, int count) &#123; // 创建保存各个红包金额的集合 ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); // 定义循环次数,总个数-1次 int time = count - 1; // 创建随机数对象 Random random = new Random(); // 循环分配 for (int i = 0; i &lt; time; i++) &#123; /* * 每次重新计算,生成随机金额 * 随机范围: totalMoney / count * 2,totalMoney不断的减少, * count也不断的减少,所以这是一个可变化的范围. */ int money = random.nextInt(totalMoney / count * 2) + 1; // 金额添加到集合 list.add(money); // 总金额扣除已分配金额 totalMoney -= money; // 红包个数-1 count--; &#125; // 剩余的金额,为最后一个红包 list.add(totalMoney); return list; &#125;&#125; 发手气红包，代码如下： 1234567891011public class RedPacketTest &#123; public static void main(String[] args) &#123; // 创建红包对象 RedPacket rp = new RedPacket(\"大红包\"); // 设置群主名称 rp.setOwnerName(\"我是群大大\"); // 设置红包类型,二选一 // rp.setOpenMode(new Common()); // 普通红包 rp.setOpenMode(new Lucky()); // 手气红包 &#125;&#125; 案例总结通过发红包 案例，你都学到了什么呢？请你思考如下问题： 基础语法，你是否清晰？ 一些基本的类的方法，你是否能够调用？ 案例中哪里体现了继承，继承的作用是什么？ 接口作为参数，如何使用？ 接口作为成员变量，如何使用？ 如何简化接口的使用方式？","categories":[],"tags":[]},{"title":"","slug":"MD/idea/active code","date":"2018-06-20T01:41:10.000Z","updated":"2018-06-20T03:08:04.000Z","comments":true,"path":"2018/06/20/MD/idea/active code/","link":"","permalink":"http://io.stelawliet.top/2018/06/20/MD/idea/active code/","excerpt":"","text":"/Applications/IntelliJ IDEA.app/Contents/ 1K71U8DBPNE-eyJsaWNlbnNlSWQiOiJLNzFVOERCUE5FIiwibGljZW5zZWVOYW1lIjoibGFuIHl1IiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IkZvciBlZHVjYXRpb25hbCB1c2Ugb25seSIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJXUyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUkMiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJEQyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkRCIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUk0iLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJETSIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkFDIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiRFBOIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiR08iLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJQUyIsInBhaWRVcFRvIjoiMjAxOS0wNS0wNCJ9LHsiY29kZSI6IkNMIiwicGFpZFVwVG8iOiIyMDE5LTA1LTA0In0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifSx7ImNvZGUiOiJSU1UiLCJwYWlkVXBUbyI6IjIwMTktMDUtMDQifV0sImhhc2giOiI4OTA4Mjg5LzAiLCJncmFjZVBlcmlvZERheXMiOjAsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-Owt3/+LdCpedvF0eQ8635yYt0+ZLtCfIHOKzSrx5hBtbKGYRPFDrdgQAK6lJjexl2emLBcUq729K1+ukY9Js0nx1NH09l9Rw4c7k9wUksLl6RWx7Hcdcma1AHolfSp79NynSMZzQQLFohNyjD+dXfXM5GYd2OTHya0zYjTNMmAJuuRsapJMP9F1z7UTpMpLMxS/JaCWdyX6qIs+funJdPF7bjzYAQBvtbz+6SANBgN36gG1B2xHhccTn6WE8vagwwSNuM70egpahcTktoHxI7uS1JGN9gKAr6nbp+8DbFz3a2wd+XoF3nSJb/d2f/6zJR8yJF8AOyb30kwg3zf5cWw==-MIIEPjCCAiagAwIBAgIBBTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE1MTEwMjA4MjE0OFoXDTE4MTEwMTA4MjE0OFowETEPMA0GA1UEAwwGcHJvZDN5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQC9WZuYgQedSuOc5TOUSrRigMw4/+wuC5EtZBfvdl4HT/8vzMW/oUlIP4YCvA0XKyBaCJ2iX+ZCDKoPfiYXiaSiH+HxAPV6J79vvouxKrWg2XV6ShFtPLP+0gPdGq3x9R3+kJbmAm8w+FOdlWqAfJrLvpzMGNeDU14YGXiZ9bVzmIQbwrBA+c/F4tlK/DV07dsNExihqFoibnqDiVNTGombaU2dDup2gwKdL81ua8EIcGNExHe82kjF4zwfadHk3bQVvbfdAwxcDy4xBjs3L4raPLU3yenSzr/OEur1+jfOxnQSmEcMXKXgrAQ9U55gwjcOFKrgOxEdek/Sk1VfOjvS+nuM4eyEruFMfaZHzoQiuw4IqgGc45ohFH0UUyjYcuFxxDSU9lMCv8qdHKm+wnPRb0l9l5vXsCBDuhAGYD6ss+Ga+aDY6f/qXZuUCEUOH3QUNbbCUlviSz6+GiRnt1kA9N2Qachl+2yBfaqUqr8h7Z2gsx5LcIf5kYNsqJ0GavXTVyWh7PYiKX4bs354ZQLUwwa/cG++2+wNWP+HtBhVxMRNTdVhSm38AknZlD+PTAsWGu9GyLmhti2EnVwGybSD2Dxmhxk3IPCkhKAK+pl0eWYGZWG3tJ9mZ7SowcXLWDFAk0lRJnKGFMTggrWjV8GYpw5bq23VmIqqDLgkNzuoog==","categories":[],"tags":[]},{"title":"","slug":"Java/Internet/分层结构","date":"2018-06-17T11:26:48.000Z","updated":"2018-06-17T11:27:55.000Z","comments":true,"path":"2018/06/17/Java/Internet/分层结构/","link":"","permalink":"http://io.stelawliet.top/2018/06/17/Java/Internet/分层结构/","excerpt":"","text":"应用层 传输层 网络层 数据链路层","categories":[],"tags":[]},{"title":"JVM类加载过程","slug":"Java/JVM/类加载","date":"2018-06-14T12:47:51.000Z","updated":"2018-07-25T06:40:40.000Z","comments":true,"path":"2018/06/14/Java/JVM/类加载/","link":"","permalink":"http://io.stelawliet.top/2018/06/14/Java/JVM/类加载/","excerpt":"","text":"类加载过程类从被加载到虚拟机内存中开始，到卸载出内存为止，它的整个生命周期包括：加载、验证、准备、解析、初始化、使用和卸载七个阶段。它们开始的顺序如下图所示： 其中类加载的过程包括了加载、验证、准备、解析、初始化五个阶段。在这五个阶段中，加载、验证、准备和初始化这四个阶段发生的顺序是确定的，而解析阶段则不一定，它在某些情况下可以在初始化阶段之后开始，这是为了支持 Java 语言的运行时绑定（也成为动态绑定或晚期绑定）。 加载加载时类加载过程的第一个阶段，在加载阶段，虚拟机需要完成以下三件事情： 通过一个类的全限定名来获取其定义的二进制字节流。将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。在 Java 堆中生成一个代表这个类的 java.lang.Class 对象，作为对方法区中这些数据的访问入口。注意，这里第 1 条中的二进制字节流并不只是单纯地从 Class 文件中获取，比如它还可以从 Jar 包中获取、从网络中获取（最典型的应用便是 Applet）、由其他文件生成（JSP 应用）等。 相对于类加载的其他阶段而言，加载阶段（准确地说，是加载阶段获取类的二进制字节流的动作）是可控性最强的阶段，因为开发人员既可以使用系统提供的类加载器来完成加载，也可以自定义自己的类加载器来完成加载。 加载阶段完成后，虚拟机外部的 二进制字节流就按照虚拟机所需的格式存储在方法区之中，而且在 Java 堆中也创建一个 java.lang.Class 类的对象，这样便可以通过该对象访问方法区中的这些数据。” 类加载过程 类从被加载到虚拟机内存中开始，到卸载出内存为止，它的整个生命周期包括：加载、验证、准备、解析、初始 化、使用和卸载七个阶段。它们开始的顺序如下图所示： 其中类加载的过程包括了加载、验证、准备、解析、初始化五个阶段。在这五个阶段中，加载、验证、准备和初 始化这四个阶段发生的顺序是确定的，而解析阶段则不一定，它在某些情况下可以在初始化阶段之后开始，这是 为了支持 Java 语言的运行时绑定（也成为动态绑定或晚期绑定）。另外注意这里的几个阶段是按顺序开始，而 不是按顺序进行或完成，因为这些阶段通常都是互相交叉地混合进行的，通常在一个阶段执行的过程中调用或激 活另一个阶段。 这里简要说明下 Java 中的绑定：绑定指的是把一个方法的调用与方法所在的类(方法主体)关联起来，对 Java 来 说，绑定分为静态绑定和动态绑定： • 静态绑定：即前期绑定。在程序执行前方法已经被绑定，此时由编译器或其它连接程序实现。针对 Java，简 单的可以理解为程序编译期的绑定。Java 当中的方法只有 final，static，private 和构造方法是前期绑定 的。 • 动态绑定：即晚期绑定，也叫运行时绑定。在运行时根据具体对象的类型进行绑定。在 Java 中，几乎所有 的方法都是后期绑定的。 下面详细讲述类加载过程中每个阶段所做的工作。 加载 加载 加载时类加载过程的第一个阶段，在加载阶段，虚拟机需要完成以下三件事情： • 通过一个类的全限定名来获取其定义的二进制字节流。 • 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。 • 在 Java 堆中生成一个代表这个类的 java.lang.Class 对象，作为对方法区中这些数据的访问入口。 第 6 章 类加载机制 | 39 注意，这里第 1 条中的二进制字节流并不只是单纯地从 Class 文件中获取，比如它还可以从 Jar 包中获取、从网 络中获取（最典型的应用便是 Applet）、由其他文件生成（JSP 应用）等。 相对于类加载的其他阶段而言，加载阶段（准确地说，是加载阶段获取类的二进制字节流的动作）是可控性最强 的阶段，因为开发人员既可以使用系统提供的类加载器来完成加载，也可以自定义自己的类加载器来完成加载。 加载阶段完成后，虚拟机外部的 二进制字节流就按照虚拟机所需的格式存储在方法区之中，而且在 Java 堆中也 创建一个 java.lang.Class 类的对象，这样便可以通过该对象访问方法区中的这些数据。 说到加载，不得不提到类加载器，下面就具体讲述下类加载器。 类加载器虽然只用于实现类的加载动作，但它在 Java 程序中起到的作用却远远不限于类的加载阶段。对于任意 一个类，都需要由它的类加载器和这个类本身一同确定其在就 Java 虚拟机中的唯一性，也就是说，即使两个类 来源于同一个 Class 文件，只要加载它们的类加载器不同，那这两个类就必定不相等。这里的“相等”包括了代 表类的 Class 对象的 equals（）、isAssignableFrom（）、isInstance（）等方法的返回结果，也包括了使 用 instanceof 关键字对对象所属关系的判定结果。 站在 Java 虚拟机的角度来讲，只存在两种不同的类加载器： • 启动类加载器：它使用 C++ 实现（这里仅限于 Hotspot，也就是 JDK1.5 之后默认的虚拟机，有很多其他 的虚拟机是用 Java 语言实现的），是虚拟机自身的一部分。 • 所有其他的类加载器：这些类加载器都由 Java 语言实现，独立于虚拟机之外，并且全部继承自抽象类 java.l ang.ClassLoader，这些类加载器需要由启动类加载器加载到内存中之后才能去加载其他的类。 站在 Java 开发人员的角度来看，类加载器可以大致划分为以下三类： • 启动类加载器：Bootstrap ClassLoader，跟上面相同。它负责加载存放在 JDK\\jre\\li (JDK 代表 JDK 的安 装目录，下同)下，或被 -Xbootclasspath 参数指定的路径中的，并且能被虚拟机识别的类库（如 rt.jar，所 有的 java.* 开头的类均被 Bootstrap ClassLoader 加载）。启动类加载器是无法被 Java 程序直接引用 的。 • 扩展类加载器：Extension ClassLoader，该加载器由 sun.misc.Launcher$ExtClassLoader 实现，它负 责加载 JDK\\jre\\lib\\ext 目录中，或者由 java.ext.dirs 系统变量指定的路径中的所有类库（如 javax.* 开头的 类），开发者可以直接使用扩展类加载器。 • 应用程序类加载器：Application ClassLoader，该类加载器由 sun.misc.Launcher$AppClassLoader 来实现，它负责加载用户类路径（ClassPath）所指定的类，开发者可以直接使用该类加载器，如果应用程 序中没有自定义过自己的类加载器，一般情况下这个就是程序中默认的类加载器。 第 6 章 类加载机制 | 40 应用程序都是由这三种类加载器互相配合进行加载的，如果有必要，我们还可以加入自定义的类加载器。因为 JV M 自带的 ClassLoader 只是懂得从本地文件系统加载标准的 java class 文件，因此如果编写了自己的 ClassL oader，便可以做到如下几点： • 在执行非置信代码之前，自动验证数字签名。 • 动态地创建符合用户特定需要的定制化构建类。 • 从特定的场所取得 java class，例如数据库中和网络中。 事实上当使用 Applet 的时候，就用到了特定的 ClassLoader，因为这时需要从网络上加载 java class，并且要 检查相关的安全信息，应用服务器也大都使用了自定义的 ClassLoader 技术。 这几种类加载器的层次关系如下图所示： 这种层次关系称为类加载器的双亲委派模型。我们把每一层上面的类加载器叫做当前层类加载器的父加载器，当 然，它们之间的父子关系并不是通过继承关系来实现的，而是使用组合关系来复用父加载器中的代码。该模型在 JDK1.2 期间被引入并广泛应用于之后几乎所有的 Java 程序中，但它并不是一个强制性的约束模型，而是 Java 设计者们推荐给开发者的一种类的加载器实现方式。 第 6 章 类加载机制 | 41 双亲委派模型的工作流程是：如果一个类加载器收到了类加载的请求，它首先不会自己去尝试加载这个类，而是 把请求委托给父加载器去完成，依次向上，因此，所有的类加载请求最终都应该被传递到顶层的启动类加载器 中，只有当父加载器在它的搜索范围中没有找到所需的类时，即无法完成该加载，子加载器才会尝试自己去加载 该类。 使用双亲委派模型来组织类加载器之间的关系，有一个很明显的好处，就是 Java 类随着它的类加载器（说白 了，就是它所在的目录）一起具备了一种带有优先级的层次关系，这对于保证 Java 程序的稳定运作很重要。例 如，类java.lang.Object 类存放在 JDK\\jre\\lib 下的 rt.jar 之中，因此无论是哪个类加载器要加载此类，最终都会 委派给启动类加载器进行加载，这边保证了 Object 类在程序中的各种类加载器中都是同一个类。 验证 验证 验证的目的是为了确保 Class 文件中的字节流包含的信息符合当前虚拟机的要求，而且不会危害虚拟机自身的安 全。不同的虚拟机对类验证的实现可能会有所不同，但大致都会完成以下四个阶段的验证：文件格式的验证、元 数据的验证、字节码验证和符号引用验证。 • 文件格式的验证：验证字节流是否符合 Class 文件格式的规范，并且能被当前版本的虚拟机处理，该验证的 主要目的是保证输入的字节流能正确地解析并存储于方法区之内。经过该阶段的验证后，字节流才会进入内 存的方法区中进行存储，后面的三个验证都是基于方法区的存储结构进行的。 • 元数据验证：对类的元数据信息进行语义校验（其实就是对类中的各数据类型进行语法校验），保证不存在 不符合 Java 语法规范的元数据信息。 • 字节码验证：该阶段验证的主要工作是进行数据流和控制流分析，对类的方法体进行校验分析，以保证被校 验的类的方法在运行时不会做出危害虚拟机安全的行为。 • 符号引用验证：这是最后一个阶段的验证，它发生在虚拟机将符号引用转化为直接引用的时候（解析阶段中 发生该转化，后面会有讲解），主要是对类自身以外的信息（常量池中的各种符号引用）进行匹配性的校 验。 准备 准备 准备阶段是正式为类变量分配内存并设置类变量初始值的阶段，这些内存都将在方法区中分配。对于该阶段有以 下几点需要注意： • 这时候进行内存分配的仅包括类变量（static），而不包括实例变量，实例变量会在对象实例化时随着对象一 块分配在 Java 堆中。 • 这里所设置的初始值通常情况下是数据类型默认的零值（如 0、0L、null、false 等），而不是被在 Java 代 码中被显式地赋予的值。 第 6 章 类加载机制 | 42 假设一个类变量的定义为： public static int value = 3； 那么变量 value 在准备阶段过后的初始值为 0，而不是 3，因为这时候尚未开始执行任何 Java 方法，而把 valu e 赋值为 3 的 putstatic 指令是在程序编译后，存放于类构造器 （）方法之中的，所以把 value 赋值为 3 的动作 将在初始化阶段才会执行。 下表列出了 Java 中所有基本数据类型以及 reference 类型的默认零值： 这里还需要注意如下几点： • 对基本数据类型来说，对于类变量（static）和全局变量，如果不显式地对其赋值而直接使用，则系统会为其 赋予默认的零值，而对于局部变量来说，在使用前必须显式地为其赋值，否则编译时不通过。 • 对于同时被 static 和 final 修饰的常量，必须在声明的时候就为其显式地赋值，否则编译时不通过；而只被 fi nal 修饰的常量则既可以在声明时显式地为其赋值，也可以在类初始化时显式地为其赋值，总之，在使用前必 须为其显式地赋值，系统不会为其赋予默认零值。 • 对于引用数据类型 reference 来说，如数组引用、对象引用等，如果没有对其进行显式地赋值而直接使 用，系统都会为其赋予默认的零值，即null。 第 6 章 类加载机制 | 43 • 如果在数组初始化时没有对数组中的各元素赋值，那么其中的元素将根据对应的数据类型而被赋予默认的零 值。 如果类字段的字段属性表中存在 ConstantValue 属性，即同时被 final 和 static 修饰，那么在准备阶段变量 val ue 就会被初始化为 ConstValue 属性所指定的值。 假设上面的类变量 value 被定义为： public static final int value = 3； 编译时 Javac 将会为 value 生成 ConstantValue 属性，在准备阶段虚拟机就会根据 ConstantValue 的设置将 value 赋值为 3。回忆上一篇博文中对象被动引用的第 2 个例子，便是这种情况。我们可以理解为 static final 常 量在编译期就将其结果放入了调用它的类的常量池中。 解析 解析 解析阶段是虚拟机将常量池中的符号引用转化为直接引用的过程。在 Class 类文件结构一文中已经比较过了符号 引用和直接引用的区别和关联，这里不再赘述。前面说解析阶段可能开始于初始化之前，也可能在初始化之后开 始，虚拟机会根据需要来判断，到底是在类被加载器加载时就对常量池中的符号引用进行解析（初始化之 前），还是等到一个符号引用将要被使用前才去解析它（初始化之后）。 对同一个符号引用进行多次解析请求时很常见的事情，虚拟机实现可能会对第一次解析的结果进行缓存（在运行 时常量池中记录直接引用，并把常量标示为已解析状态），从而避免解析动作重复进行。 解析动作主要针对类或接口、字段、类方法、接口方法四类符号引用进行，分别对应于常量池中的 CONSTAN T_Class_info、CONSTANT_Fieldref_info、CONSTANT_Methodref_info、CONSTANT_InterfaceMet hodref_info 四种常量类型。 1、类或接口的解析：判断所要转化成的直接引用是对数组类型，还是普通的对象类型的引用，从而进行不同的解 析。 2、字段解析：对字段进行解析时，会先在本类中查找是否包含有简单名称和字段描述符都与目标相匹配的字 段，如果有，则查找结束；如果没有，则会按照继承关系从上往下递归搜索该类所实现的各个接口和它们的父接 口，还没有，则按照继承关系从上往下递归搜索其父类，直至查找结束，查找流程如下图所示： 第 6 章 类加载机制 | 44 从下面一段代码的执行结果中很容易看出来字段解析的搜索顺序： class Super{ public static int m = 11; static{ System.out.println(“执行了super类静态语句块”); } } class Father extends Super{ public static int m = 33; static{ System.out.println(“执行了父类静态语句块”); } } class Child extends Father{ static{ System.out.println(“执行了子类静态语句块”); } } public class StaticTest{ public static void main(String[] args){ System.out.println(Child.m); } } 执行结果如下： 执行了super类静态语句块 执行了父类静态语句块 33 如果注释掉 Father 类中对 m 定义的那一行，则输出结果如下： 第 6 章 类加载机制 | 45 执行了super类静态语句块 11 另外，很明显这就是上篇博文中的第 1 个例子的情况，这里我们便可以分析如下：static 变量发生在静态解析阶 段，也即是初始化之前，此时已经将字段的符号引用转化为了内存引用，也便将它与对应的类关联在了一起，由 于在子类中没有查找到与 m 相匹配的字段，那么 m 便不会与子类关联在一起，因此并不会触发子类的初始化。 最后需要注意：理论上是按照上述顺序进行搜索解析，但在实际应用中，虚拟机的编译器实现可能要比上述规范 要求的更严格一些。如果有一个同名字段同时出现在该类的接口和父类中，或同时在自己或父类的接口中出 现，编译器可能会拒绝编译。如果对上面的代码做些修改，将 Super 改为接口，并将 Child 类继承 Father 类且 实现 Super 接口，那么在编译时会报出如下错误： StaticTest.java:24: 对 m 的引用不明确，Father 中的 变量 m 和 Super 中的 变量 m 都匹配 System.out.println(Child.m); ^ 1 错误 3、类方法解析：对类方法的解析与对字段解析的搜索步骤差不多，只是多了判断该方法所处的是类还是接口的步 骤，而且对类方法的匹配搜索，是先搜索父类，再搜索接口。 4、接口方法解析：与类方法解析步骤类似，知识接口不会有父类，因此，只递归向上搜索父接口就行了。 初始化 初始化 初始化是类加载过程的最后一步，到了此阶段，才真正开始执行类中定义的 Java 程序代码。在准备阶段，类变 量已经被赋过一次系统要求的初始值，而在初始化阶段，则是根据程序员通过程序指定的主观计划去初始化类变 量和其他资源，或者可以从另一个角度来表达：初始化阶段是执行类构造器()方法的过程。 这里简单说明下()方法的执行规则: 这里简单说明下()方法的执行规则: 1、()方法是由编译器自动收集类中的所有类变量的赋值动作和静态语句块中的语句合并产生的，编译器收集的顺 序是由语句在源文件中出现的顺序所决定的，静态语句块中只能访问到定义在静态语句块之前的变量，定义在它 之后的变量，在前面的静态语句中可以赋值，但是不能访问。 2、（）方法与实例构造器()方法（类的构造函数）不同，它不需要显式地调用父类构造器，虚拟机会保证在子类 的()方法执行之前，父类的()方法已经执行完毕。因此，在虚拟机中第一个被执行的()方法的类肯定是java.lan g.Object。 3、()方法对于类或接口来说并不是必须的，如果一个类中没有静态语句块，也没有对类变量的赋值操作，那么编 译器可以不为这个类生成()方法。 第 6 章 类加载机制 | 46 4、接口中不能使用静态语句块，但仍然有类变量（final static）初始化的赋值操作，因此接口与类一样会生 成()方法。但是接口鱼类不同的是：执行接口的()方法不需要先执行父接口的()方法，只有当父接口中定义的变量 被使用时，父接口才会被初始化。另外，接口的实现类在初始化时也一样不会执行接口的()方法。 5、虚拟机会保证一个类的()方法在多线程环境中被正确地加锁和同步，如果多个线程同时去初始化一个类，那么 只会有一个线程去执行这个类的()方法，其他线程都需要阻塞等待，直到活动线程执行()方法完毕。如果在一个类 的()方法中有耗时很长的操作，那就可能造成多个线程阻塞，在实际应用中这种阻塞往往是很隐蔽的。 下面给出一个简单的例子，以便更清晰地说明如上规则： class Father{ public static int a = 1; static{ a = 2; } } class Child extends Father{ public static int b = a; } public class ClinitTest{ public static void main(String[] args){ System.out.println(Child.b); } } 执行上面的代码，会打印出 2，也就是说 b 的值被赋为了 2。 我们来看得到该结果的步骤。首先在准备阶段为类变量分配内存并设置类变量初始值，这样 A 和 B 均被赋值为默 认值 0，而后再在调用()方法时给他们赋予程序中指定的值。当我们调用 Child.b 时，触发 Child 的()方法，根据 规则 2，在此之前，要先执行完其父类Father的()方法，又根据规则1，在执行()方法时，需要按 static 语句或 st atic 变量赋值操作等在代码中出现的顺序来执行相关的 static 语句，因此当触发执行 Fathe r的()方法时，会先将 a 赋值为 1，再执行 static 语句块中语句，将 a 赋值为 2，而后再执行 Child 类的()方法，这样便会将 b 的赋值 为 2。 如果我们颠倒一下 Father 类中“public static int a = 1;”语句和“static语句块”的顺序，程序执行后，则会打 印出1。很明显是根据规则 1，执行 Father 的()方法时，根据顺序先执行了 static 语句块中的内容，后执行了“p ublic static int a = 1;”语句。 另外，在颠倒二者的顺序之后，如果在 static 语句块中对 a 进行访问（比如将 a 赋给某个变量），在编译时将会 报错，因为根据规则 1，它只能对 a 进行赋值，而不能访问。 第 6 章 类加载机制 | 47 总结 总结 整个类加载过程中，除了在加载阶段用户应用程序可以自定义类加载器参与之外，其余所有的动作完全由虚拟机 主导和控制。到了初始化才开始执行类中定义的 Java 程序代码（亦及字节码），但这里的执行代码只是个开 端，它仅限于()方法。类加载过程中主要是将 Class 文件（准确地讲，应该是类的二进制字节流）加载到虚拟机 内存中，真正执行字节码的操作，在加载完成后才真正开始。","categories":[{"name":"Java","slug":"Java","permalink":"http://io.stelawliet.top/categories/Java/"},{"name":"JVM","slug":"Java/JVM","permalink":"http://io.stelawliet.top/categories/Java/JVM/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"jvm","slug":"jvm","permalink":"http://io.stelawliet.top/tags/jvm/"}]},{"title":"quickSort","slug":"algorithm/sort/QuickSort","date":"2018-06-13T14:00:48.000Z","updated":"2018-10-14T01:47:13.000Z","comments":true,"path":"2018/06/13/algorithm/sort/QuickSort/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/sort/QuickSort/","excerpt":"","text":"普通快排时间复杂度平均O(nlogn) a 随机3路快排时间复杂度平均O(nlogn)，额外空间复杂度O(logn) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import org.junit.Test;import java.util.Arrays;import java.util.Random;import static sort.TestArray.copyArray;import static sort.TestArray.getRandom;import static sort.TestArray.isEquals;import static sort.TestArray.print;/** * @program: exam * @description: QuickSort * @author: Zhaoziqi * @create: 2018-06-15 13:58 **/public class QuickSort &#123; public static void quickSort(int[] a) &#123; if (a == null || a.length &lt; 2) &#123;// throw new Exception(\"array is null or length less 2\"); return; &#125; quickSort(a, 0, a.length - 1); &#125; private static void quickSort(int[] a, int l, int r) &#123; if (l &lt; r) &#123; int[] p = divide(a, l, r); quickSort(a, l, p[0] - 1); quickSort(a, p[1] + 1, r); &#125; &#125; private static int[] divide(int[] a, int l, int r) &#123; int less = l - 1; int more = r; swap(a, new Random().nextInt(r - l + 1) + l, r); while (l &lt; more) &#123; if (a[l] &lt; a[r]) swap(a, l++, ++less); else if (a[l] &gt; a[r]) swap(a, l, --more); else l++; &#125; swap(a, r, more); return new int[]&#123;++less, more&#125;; &#125; private static void swap(int[] a, int i, int j) &#123; int t = a[i]; a[i] = a[j]; a[j] = t; &#125; @Test public void fun0() &#123; int[] a0 = getRandom(30, 100); int[] a1 = copyArray(a0); System.out.println(\"-------------sys\"); Arrays.sort(a0); print(a0); System.out.println(\"-------------quick\"); quickSort(a1); print(a1); System.out.println(isEquals(a0, a1)); &#125;&#125;","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"}],"tags":[]},{"title":"","slug":"algorithm/tree/tree","date":"2018-06-13T13:52:35.000Z","updated":"2018-07-17T03:24:15.000Z","comments":true,"path":"2018/06/13/algorithm/tree/tree/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/tree/tree/","excerpt":"","text":"二叉树本文撇开一些非常苦涩、难以理解的概念来讲讲二叉树，仅入门观看(或复习)…. 首先，我们来讲讲什么是树： 树是一种非线性的数据结构，相对于线性的数据结构(链表、数组)而言，树的平均运行时间更短(往往与树相关的排序时间复杂度都不会高) 在现实生活中，我们一般的树长这个样子的： img 但是在编程的世界中，我们一般把树“倒”过来看，这样容易我们分析： img 一般的树是有很多很多个分支的，分支下又有很多很多个分支，如果在程序中研究这个会非常麻烦。因为本来树就是非线性的，而我们计算机的内存是线性存储的，太过复杂的话我们无法设计出来的。 因此，我们先来研究简单又经常用的—&gt; 二叉树 1.1树的一些概念我就拿上面的图来进行画来讲解了： img 二叉树的意思就是说：每个节点不能多于有两个儿子，上面的图就是一颗二叉树。 一棵树至少会有一个节点(根节点) 树由节点组成，每个节点的数据结构是这样的： 因此，我们定义树的时候往往是-&gt;定义节点-&gt;节点连接起来就成了树，而节点的定义就是：一个数据、两个指针(如果有节点就指向节点、没有节点就指向null) 1.2静态创建二叉树上面说了，树是由若干个节点组成，节点连接起来就成了树，而节点由一个数据、两个指针组成 因此，创建树实际上就是创建节点，然后连接节点 首先，使用Java类定义节点： 12345678910111213public class TreeNode &#123; // 左节点(儿子) private TreeNode lefTreeNode; // 右节点(儿子) private TreeNode rightNode; // 数据 private int value;&#125; 下面我们就拿这个二叉树为例来构建吧： img 为了方便构建，我就给了它一个带参数的构造方法和set、get方法了： 1234public TreeNode(int value) &#123; this.value = value;&#125; 那么我们现在就创建了5个节点： 123456789101112131415161718public static void main(String[] args) &#123; //根节点--&gt;10 TreeNode treeNode1 = new TreeNode(10); //左孩子--&gt;9 TreeNode treeNode2 = new TreeNode(9); //右孩子--&gt;20 TreeNode treeNode3 = new TreeNode(20); //20的左孩子--&gt;15 TreeNode treeNode4 = new TreeNode(15); //20的右孩子--&gt;35 TreeNode treeNode5 = new TreeNode(35) &#125; 它们目前的状态是这样子的： img 于是下面我们去把它连起来： 1234567//根节点的左右孩子treeNode1.setLefTreeNode(treeNode2);treeNode1.setRightNode(treeNode3);//20节点的左右孩子treeNode3.setLefTreeNode(treeNode4);treeNode3.setRightNode(treeNode5); 连接完之后，那么我们的树就创建完成了。 img 1.3遍历二叉树上面说我们的树创建完成了，那怎么证明呢？？我们如果可以像数组一样遍历它(看它的数据)，那就说明它创建完成了～ 值得说明的是：二叉树遍历有三种方式 中序遍历 先访问根节点，然后访问左节点，最后访问右节点(根-&gt;左-&gt;右) 先序遍历 先访问左节点，然后访问根节点，最后访问右节点(左-&gt;根-&gt;右) 后序遍历 先访问左节点，然后访问右节点，最后访问根节点(左-&gt;右-&gt;根) 以上面的二叉树为例： 如果是中序遍历：10-&gt;9-&gt;20-&gt;15-&gt;35 如果是先序遍历：9-&gt;10-&gt;15-&gt;20-&gt;35 可能需要解释地方：访问完10节点过后，去找的是20节点，但20下还有子节点，因此先访问的是20的左儿子15节点。由于15节点没有儿子了。所以就返回20节点，访问20节点。最后访问35节点 如果是后序遍历：9-&gt;15-&gt;35-&gt;20-&gt;10 可能需要解释地方：先访问9节点，随后应该访问的是20节点，但20下还有子节点，因此先访问的是20的左儿子15节点。由于15节点没有儿子了。所以就去访问35节点，由于35节点也没有儿子了，所以返回20节点，最终返回10节点 一句话总结：中序(根-&gt;左-&gt;右)，先序(左-&gt;根-&gt;右)，后序(左-&gt;右-&gt;根)。如果访问有孩子的节点，先处理孩子的，随后返回 无论先中后遍历，每个节点的遍历如果访问有孩子的节点，先处理孩子的(逻辑是一样的) 因此我们很容易想到递归 递归的出口就是：当没有子节点了，就返回 因此，我们可以写出这样的中序遍历代码： 123456789101112131415161718/** * 中序遍历 * @param rootTreeNode 根节点 */public static void inTraverseBTree(TreeNode rootTreeNode) &#123; if (rootTreeNode != null) &#123; //访问根节点 System.out.println(rootTreeNode.getValue()); //访问左节点 preTraverseBTree(rootTreeNode.getLefTreeNode()); //访问右节点 preTraverseBTree(rootTreeNode.getRightNode()); &#125;&#125; 结果跟我们刚才说的是一样的： img 我们再用先序遍历调用一遍吧： 123456789101112131415161718/** * 中序遍历 * @param rootTreeNode 根节点 */public static void preTraverseBTree(TreeNode rootTreeNode) &#123; if (rootTreeNode != null) &#123; //访问左节点 preTraverseBTree(rootTreeNode.getLefTreeNode()); //访问根节点 System.out.println(rootTreeNode.getValue()); //访问右节点 preTraverseBTree(rootTreeNode.getRightNode()); &#125;&#125; 结果跟我们刚才说的是一样的： img 有意思的是：通过先序和中序或者中序和后序我们可以还原出原始的二叉树，但是通过先序和后续是无法还原出原始的二叉树的 也就是说：通过中序和先序或者中序和后序我们就可以确定一颗二叉树了！ 二、动态创建二叉树上面我们是手动创建二叉树的，一般地：都是给出一个数组给你，让你将数组变成一个二叉树，此时就需要我们动态创建二叉树了。 二叉树中还有一种特殊的二叉树：二叉查找树(binary search tree) 定义：当前根节点的左边全部比根节点小，当前根节点的右边全部比根节点大。 明眼人可以看出，这对我们来找一个数是非常方便快捷的 往往我们动态创建二叉树都是创建二叉查找树 img 2.1动态创建二叉树体验假设我们有一个数组：int[] arrays = {3, 2, 1, 4, 5}; 那么创建二叉树的步骤是这样的： 首先将3作为根节点 img 随后2进来了，我们跟3做比较，比3小，那么放在3的左边 img 随后1进来了，我们跟3做比较，比3小，那么放在3的左边，此时3的左边有2了，因此跟2比，比2小，放在2的左边 img 随后4进来了，我们跟3做比较，比3大，那么放在3的右边 img 随后5进来了，我们跟3做比较，比3大，那么放在3的右边，此时3的右边有4了，因此跟4比，比4大，放在4的右边 img 那么我们的二叉查找树就建立成功了，无论任何一颗子树，左边都比根要小，右边比根要大 img 2.2代码实现我们的代码实现也很简单，如果比当前根节点要小，那么放到当前根节点左边，如果比当前根节点要大，那么放到当前根节点右边。 因为是动态创建的，因此我们得用一个类来表示根节点 123456789101112public class TreeRoot &#123; private TreeNode treeRoot; public TreeNode getTreeRoot() &#123; return treeRoot; &#125; public void setTreeRoot(TreeNode treeRoot) &#123; this.treeRoot = treeRoot; &#125;&#125; 比较与根谁大，大的往右边，小的往左边： 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * 动态创建二叉查找树 * * @param treeRoot 根节点 * @param value 节点的值 */ public static void createTree(TreeRoot treeRoot, int value) &#123; //如果树根为空(第一次访问)，将第一个值作为根节点 if (treeRoot.getTreeRoot() == null) &#123; TreeNode treeNode = new TreeNode(value); treeRoot.setTreeRoot(treeNode); &#125; else &#123; //当前树根 TreeNode tempRoot = treeRoot.getTreeRoot(); while (tempRoot != null) &#123; //当前值大于根值，往右边走 if (value &gt; tempRoot.getValue()) &#123; //右边没有树根，那就直接插入 if (tempRoot.getRightNode() == null) &#123; tempRoot.setRightNode(new TreeNode(value)); return ; &#125; else &#123; //如果右边有树根，到右边的树根去 tempRoot = tempRoot.getRightNode(); &#125; &#125; else &#123; //左没有树根，那就直接插入 if (tempRoot.getLefTreeNode() == null) &#123; tempRoot.setLefTreeNode(new TreeNode(value)); return; &#125; else &#123; //如果左有树根，到左边的树根去 tempRoot = tempRoot.getLefTreeNode(); &#125; &#125; &#125; &#125; &#125; 测试代码： 12345678910111213141516int[] arrays = &#123;2, 3, 1, 4, 5&#125;;//动态创建树TreeRoot root = new TreeRoot();for (int value : arrays) &#123; createTree(root, value);&#125;//先序遍历树preTraverseBTree(root.getTreeRoot());System.out.println(&quot;---------------公众号：Java3y&quot;);//中序遍历树inTraverseBTree(root.getTreeRoot());System.out.println(&quot;---------------公众号：Java3y&quot;); img 三、查询二叉查找树相关3.1查询树的深度查询树的深度我们可以这样想：左边的子树和右边的字数比，谁大就返回谁，那么再接上根节点+1就可以了 img 123456789101112131415161718192021public static int getHeight(TreeNode treeNode) &#123; if (treeNode == null) &#123; return 0; &#125; else &#123; //左边的子树深度 int left = getHeight(treeNode.getLefTreeNode()); //右边的子树深度 int right = getHeight(treeNode.getRightNode()); int max = left; if (right &gt; max) &#123; max = right; &#125; return max + 1; &#125;&#125; 3.1查询树的最大值从上面先序遍历二叉查找树的时候，细心的同学可能会发现：先序遍历二叉查找树得到的结果是排好顺序的～ 那么，如果我们的二叉树不是二叉查找树，我们要怎么查询他的最大值呢？ 可以这样： img 左边找最大值-&gt;递归 右边找最大值-&gt;递归 1234567891011121314151617181920212223242526272829303132333435/** * 找出树的最大值 * * @param rootTreeNode */public static int getMax(TreeNode rootTreeNode) &#123; if (rootTreeNode == null) &#123; return -1; &#125; else &#123; //找出左边的最大值 int left = getMax(rootTreeNode.getLefTreeNode()); //找出右边的最大值 int right = getMax(rootTreeNode.getRightNode()); //与当前根节点比较 int currentRootValue = rootTreeNode.getValue(); //假设左边的最大 int max = left; if (right &gt; max) &#123; max = right; &#125; if (currentRootValue &gt; max) &#123; max = currentRootValue; &#125; return max ; &#125;&#125; 四、最后无论是在遍历树、查找深度、查找最大值都用到了递归，递归在非线性的数据结构中是用得非常多的… 树的应用也非常广泛，此篇简单地说明了树的数据结构，高级的东西我也没弄懂，可能以后用到的时候会继续深入…","categories":[],"tags":[]},{"title":"java 随机取值","slug":"algorithm/Java随机Math和Random","date":"2018-06-13T12:26:06.000Z","updated":"2018-07-04T11:11:26.000Z","comments":true,"path":"2018/06/13/algorithm/Java随机Math和Random/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/Java随机Math和Random/","excerpt":"","text":"Math.random()返回long类型。[0,1)的16位 Random r= new Random(); r.netInt(n); 返回[0,n)的int","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"Api","slug":"java/Api","permalink":"http://io.stelawliet.top/categories/java/Api/"}],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"},{"name":"random","slug":"random","permalink":"http://io.stelawliet.top/tags/random/"}]},{"title":"sort-mem","slug":"algorithm/sort-mem","date":"2018-06-13T12:18:07.000Z","updated":"2018-08-29T07:42:51.000Z","comments":true,"path":"2018/06/13/algorithm/sort-mem/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/sort-mem/","excerpt":"牛课网算法学习day1-2 mem for 循环分析 记为 for i -&gt; n-1 i++ 先写好分析过程再代码 Math.random方法和Random类的使用","text":"牛课网算法学习day1-2 mem for 循环分析 记为 for i -&gt; n-1 i++ 先写好分析过程再代码 Math.random方法和Random类的使用 Math.random方法生成double [0,1)的0后16位小数 Random类的nextInt(a)可以生成[0,a)的整数 几个要点 数组复制时的赋值 a[i] = help[i]; for循环中的前后边界 for循环中的for循环前后边界与外层循环的关系 for i -&gt; n-1 j++ day3 堆结构 从数组建立大根堆heapInsert()，[0,heapSize] 堆顶弹出时重新维护大根堆heapify() //2i+1 left//2i+2 right//(i-1)/2 parent 快速排序 经典快排 中间量没选好 复杂度为O(n^2) 一般为O(nlogn); 随机快排 随机选取中间量 双路遍历 排序选择 样本小于60一般采用插入排序 排本小 常数项小基本数据类型采用快速排序多数据对象采用归并排序 保证稳定性 day4 堆排序 数组的栈实现 index 记录下次放入的位置 push pop 队列的栈实现 start end size 双队列实现栈的结构","categories":[{"name":"algorithme","slug":"algorithme","permalink":"http://io.stelawliet.top/categories/algorithme/"},{"name":"note","slug":"algorithme/note","permalink":"http://io.stelawliet.top/categories/algorithme/note/"}],"tags":[{"name":"algorithme","slug":"algorithme","permalink":"http://io.stelawliet.top/tags/algorithme/"},{"name":"todo","slug":"todo","permalink":"http://io.stelawliet.top/tags/todo/"}]},{"title":"归并排序MergeSort","slug":"algorithm/sort/mergeSort","date":"2018-06-13T08:35:36.000Z","updated":"2018-10-14T01:43:39.000Z","comments":true,"path":"2018/06/13/algorithm/sort/mergeSort/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/sort/mergeSort/","excerpt":"时间复杂度O(nlogn),额外空间复杂度O(n); 分治,中间分开mid=(l+r)/2 递归调用结束条件if（l==r) return; 分别处理递归 l -&gt; mid和mid+1 -&gt; r","text":"时间复杂度O(nlogn),额外空间复杂度O(n); 分治,中间分开mid=(l+r)/2 递归调用结束条件if（l==r) return; 分别处理递归 l -&gt; mid和mid+1 -&gt; r 123456789public static void mergeSort(int[] arr, int l, int r) &#123; if (l == r) &#123; return; &#125; int mid = l + ((r - l) &gt;&gt; 1); mergeSort(arr, l, mid); mergeSort(arr, mid + 1, r); merge(arr, l, mid, r); &#125; 合并递归结束的 l -&gt;mid和mid+1 -&gt; r 创建辅助数组help[]，长度为r-l+1; 使用外排的方式把 l -&gt; mid和mid+1 -&gt; r中小的数放进help[]中; 把排序好的help[]复制进要排序的数组中l -&gt; r; 12345678910111213141516171819public static void merge(int[] arr, int l, int m, int r) &#123; int[] help = new int[r - l + 1]; int i = 0; int p1 = l; int p2 = m + 1; while (p1 &lt;= m &amp;&amp; p2 &lt;= r) &#123; help[i++] = arr[p1] &lt; arr[p2] ? arr[p1++] : arr[p2++]; &#125; while (p1 &lt;= m) &#123; help[i++] = arr[p1++]; &#125; while (p2 &lt;= r) &#123; help[i++] = arr[p2++]; &#125; //可以改进使用System.arraycopy for (i = 0; i &lt; help.length; i++) &#123; arr[l + i] = help[i]; &#125; &#125;","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"sort","slug":"algorithm/sort","permalink":"http://io.stelawliet.top/categories/algorithm/sort/"}],"tags":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/tags/algorithm/"},{"name":"排序","slug":"排序","permalink":"http://io.stelawliet.top/tags/排序/"}]},{"title":"O(n2)的排序","slug":"algorithm/sort/insertSort","date":"2018-06-13T05:40:11.000Z","updated":"2018-08-29T07:50:20.000Z","comments":true,"path":"2018/06/13/algorithm/sort/insertSort/","link":"","permalink":"http://io.stelawliet.top/2018/06/13/algorithm/sort/insertSort/","excerpt":"","text":"O(n2)的排序 插入排序 1234(n = size)for 1 -&gt; n-1 i++ for i -&gt; 1 j-- if [j-1] &lt; [j] swap() 冒泡排序 123for 0 -&gt; n-2 i++ for 0 -&gt; n-1-1-i j++ if [j]&gt;[j+1] swap() 123for n-1 -&gt; 1 end-- for 0 -&gt; end-1 i++ if [i]&gt;[i+1] swap() 选择排序 123for 0 -&gt; n-2 i++ //选择最小的值放到i for i -&gt; n-1 j++ //遍历选出最小值 if [i] &gt; [j] swap() 123for 0 -&gt; n-2 i++ for i -&gt; n-2 j++ [i] = [i] &lt; [j+1] ? [i] : [j+1]","categories":[{"name":"algorithm","slug":"algorithm","permalink":"http://io.stelawliet.top/categories/algorithm/"},{"name":"sort","slug":"algorithm/sort","permalink":"http://io.stelawliet.top/categories/algorithm/sort/"}],"tags":[{"name":"sort","slug":"sort","permalink":"http://io.stelawliet.top/tags/sort/"}]},{"title":"","slug":"Java/JVM/对象访问定义","date":"2018-06-11T10:15:43.000Z","updated":"2018-06-11T10:40:30.000Z","comments":true,"path":"2018/06/11/Java/JVM/对象访问定义/","link":"","permalink":"http://io.stelawliet.top/2018/06/11/Java/JVM/对象访问定义/","excerpt":"","text":"对象的访问定位句柄定位我们的Java程序需要通过栈上的Reference数据来操作堆上的具体对象。Reference访问对象的方式目前主流的有两种：句柄和直接指针。 如果直接使用句柄访问，java堆中将会划分出一块内存来作为句柄池，reference中存储的是对象的句柄地址，而句柄中包含了对象数据与类型数据各自的具体地址信息，如下图所示。 句柄定位 指针定位“如果使用直接指针访问，那么java堆对象的布局中就必须考虑如何放置访问类型数据的相关信息，而reference中存储的直接就是对象地址” 摘录来自: Gavin Zhang. “深入理解java虚拟机”。 iBooks.","categories":[],"tags":[]},{"title":"GC垃圾判定算法","slug":"Java/JVM/GC算法","date":"2018-06-11T10:11:09.000Z","updated":"2018-08-13T08:33:49.000Z","comments":true,"path":"2018/06/11/Java/JVM/GC算法/","link":"","permalink":"http://io.stelawliet.top/2018/06/11/Java/JVM/GC算法/","excerpt":"","text":"可达性分析算法Java中使用可达性分析（Reachability Analysis）来判定对象是否存活的。 通过一系列的称为“GC Roots”的对象作为起始点，从这些节点开始向下搜索，搜索所走过的路径称为引用链（Reference Chain）,当一个对象到GC Roots没有任何引用链相连时，则证明此对象是不可用的。” 在Java语言中，可作为GC Roots的对象包括下面几种： 虚拟机栈（栈帧中的本地变量表）中引用的对象。 方法区中类静态属性引用的对象。 方法区中常量引用的对象。 本地方法栈中JNI（即一般说的Native方法）引用的对象。 local variable reference method area static method final native method stack","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"JVM","slug":"java/JVM","permalink":"http://io.stelawliet.top/categories/java/JVM/"},{"name":"gc roots","slug":"java/JVM/gc-roots","permalink":"http://io.stelawliet.top/categories/java/JVM/gc-roots/"}],"tags":[{"name":"jvm","slug":"jvm","permalink":"http://io.stelawliet.top/tags/jvm/"},{"name":"gc","slug":"gc","permalink":"http://io.stelawliet.top/tags/gc/"}]},{"title":"[object Object]","slug":"hexo/post","date":"2018-05-26T07:33:13.000Z","updated":"2018-06-25T01:29:07.000Z","comments":true,"path":"2018/05/26/hexo/post/","link":"","permalink":"http://io.stelawliet.top/2018/05/26/hexo/post/","excerpt":"","text":"&lt;more!&gt;","categories":[],"tags":[]},{"title":"vscode shell","slug":"MD/Mac/vscode shell中打开配置","date":"2018-05-26T06:51:48.000Z","updated":"2018-06-29T13:37:01.000Z","comments":true,"path":"2018/05/26/MD/Mac/vscode shell中打开配置/","link":"","permalink":"http://io.stelawliet.top/2018/05/26/MD/Mac/vscode shell中打开配置/","excerpt":"","text":"在登录脚本中添加代码~/.zshrc~/.bash_profile 12code () &#123; VSCODE_CWD=\"$PWD\" open -n -b \"com.microsoft.VSCode\" --args $* ;&#125; 然后通过 code . 就可以打开当前目录通过VSCODE","categories":[],"tags":[{"name":"shell","slug":"shell","permalink":"http://io.stelawliet.top/tags/shell/"},{"name":"vscode","slug":"vscode","permalink":"http://io.stelawliet.top/tags/vscode/"},{"name":"zshrc","slug":"zshrc","permalink":"http://io.stelawliet.top/tags/zshrc/"}]},{"title":"Vue Timer","slug":"Vue/project/定时器","date":"2018-05-21T15:46:31.000Z","updated":"2018-07-26T03:56:58.000Z","comments":true,"path":"2018/05/21/Vue/project/定时器/","link":"","permalink":"http://io.stelawliet.top/2018/05/21/Vue/project/定时器/","excerpt":"","text":"Timer.vueUI使用Element的组件。 导入UI123import ElementUI from 'element-ui';import 'element-ui/lib/theme-chalk/index.css';Vue.use(ElementUI); Template123456789&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;计时&lt;/h1&gt; &lt;h1&gt;&#123;&#123; nowTime &#125;&#125;&lt;/h1&gt; &lt;el-input-number v-model=&quot;selMin&quot; placeholder=&quot;&quot;&gt;&lt;/el-input-number&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;starttimer&quot;&gt;Start&lt;/el-button&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;endtimer&quot;&gt;End&lt;/el-button&gt; &lt;/div&gt;&lt;/template&gt; Script12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;script&gt; export default &#123; data() &#123; return &#123; clear: 0, falg: false, //选择的计时时间 selMin: 0, selTime: 0, nowTime: &apos;00 : 00&apos;, endTime: 0, &#125; &#125;, created() &#123;&#125;, computed: &#123;&#125;, methods: &#123; //选择n分钟 //计算n分钟的结束时间 end+new date() //end-nowTime //转化格式输出endTime/1000/60 m : endTime/1000*60) starttimer() &#123; this.$message.success(&quot;start&quot;); //选择的计时分钟+开始时间，计算出计时结束时的毫秒数 this.endTime = this.selMin * 60 * 1000 + new Date().getTime(); const my = this; //0.5秒调用一次，来更新，记录定时器ID this.clear = window.setInterval( () =&gt; &#123; my.getTime() &#125;, 500); &#125;, //清除定时任务 endtimer() &#123; window.clearInterval(this.clear); &#125;, getTime() &#123; //结束毫秒数-当前毫秒数得剩余毫秒数 const end0 = this.endTime - new Date().getTime(); //剩余毫秒数格式化输出 this.nowTime = &quot; &quot; + this.formatTime(parseInt(end0 / 1000 / 60)) + &quot; : &quot; + this.formatTime(parseInt(end0 / 1000 % 60)); //剩余&lt;=0时计时完成 if (end0 &lt;= 0) &#123; //通过ID结束计时 window.clearInterval(this.clear); this.$message.success(&quot;time now!!&quot;) &#125; &#125;, //位数格式化小于1位时补0 formatTime(time) &#123; return time / 10 &gt;= 1 ? time :`0$&#123;time&#125;`; &#125; &#125; &#125;&lt;/script&gt;","categories":[{"name":"vue","slug":"vue","permalink":"http://io.stelawliet.top/categories/vue/"},{"name":"todo","slug":"vue/todo","permalink":"http://io.stelawliet.top/categories/vue/todo/"}],"tags":[]},{"title":"","slug":"TODOlist/2018-5-29","date":"2018-05-19T15:16:34.000Z","updated":"2018-05-19T15:16:47.000Z","comments":true,"path":"2018/05/19/TODOlist/2018-5-29/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/TODOlist/2018-5-29/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"todo vue 概要","slug":"TODOlist/todo vue","date":"2018-05-19T15:13:33.000Z","updated":"2018-06-29T13:35:38.000Z","comments":true,"path":"2018/05/19/TODOlist/todo vue/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/TODOlist/todo vue/","excerpt":"","text":"从日历出发 每天的todolist 在todo中加番茄时间 番茄时间中25分计时一次。间隔5-9分钟 统计总的番茄，统计todo","categories":[{"name":"TODO","slug":"TODO","permalink":"http://io.stelawliet.top/categories/TODO/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://io.stelawliet.top/tags/vue/"},{"name":"javascropt","slug":"javascropt","permalink":"http://io.stelawliet.top/tags/javascropt/"},{"name":"plan","slug":"plan","permalink":"http://io.stelawliet.top/tags/plan/"}]},{"title":"","slug":"TODOlist/2018-5-20","date":"2018-05-19T14:45:44.000Z","updated":"2018-05-20T18:29:33.000Z","comments":true,"path":"2018/05/19/TODOlist/2018-5-20/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/TODOlist/2018-5-20/","excerpt":"","text":"MySQL 触发器 整理快速排序代码 博客SQL练习 博客mysql 学习http://www.cnblogs.com/geaozhang/p/7347950.html chrome canary tab clean 独立评论模块学习","categories":[],"tags":[]},{"title":"","slug":"MD/mac强化","date":"2018-05-19T14:14:52.000Z","updated":"2018-05-19T14:24:35.000Z","comments":true,"path":"2018/05/19/MD/mac强化/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/MD/mac强化/","excerpt":"","text":"高效MacBook工作环境配置2015年08月03日 19:53:48 阅读数：2568 转自：http://www.xialeizhou.com/?p=71 本文记录整个配置过程，供新入手MacBook和觉得MacBook比较难用的同学参考。 硬件提升 笔记本电脑的特点是携带方便，缺点是屏幕太小，因此你首先需要再申请领用一个外接显示器，多一个屏幕会大大减少你切换应用程序的次数，显著提升你的工作效率，别忘了同时申请一个Mini DP转VGA的转接头用于连接显示器。为了配合多显示器，后面会推荐一个软件来管理多显示器窗口。 如果你资金宽裕，可以买个机械键盘和无线鼠标，进一步提升工作效率。 系统设置 2.1 将功能键(F1-F12)设置为标准的功能键MacBook键盘最上面一排的功能键(F1-F12)默认是系统亮度和声音之类的快捷设置，当MacBook作为你的娱乐电脑时，这样的默认设置是非常方便的，但是对于将MacBook作为工作电脑而且需要频繁使用功能键(F1-F12)的人，最好将功能键(F1-F12)的行为设置为标准的功能键。 首先打开System Preferences，点击Keyboard图标，勾选上Use all F1, F2, etc. keys as standard function keys。以后如果你要调节音量，就按住键盘左下角的fn键再按F11或者F12。 [ 211](picture/046129e254a9d24fa83b87c45019cc65c758e418.png) 图2.1-1 2.2 设置Trackpad（触摸板）轻触为单击当你首次使用MacBook，是否会觉得触摸板一点都不顺滑？那是因为你需要做如下设置。打开System Preferences，点击Trackpad图标，勾选Tap to click选项，现在手指轻轻一碰触摸板，就达到鼠标单击的顺滑效果。 2.3 将Dock停靠在屏幕左边为什么要将Dock停靠在屏幕左边？MacBook的屏幕是一个长方形，如果你将Dock放在下面，那么屏幕的可用宽度就会减少，另外人眼阅读时的顺序是从左往右，因此Dock放在左边更适合将MacBook作为工作电脑的人。 打开System Preferences，点击Dock图标， 将图标的Size调到合适大小 关闭Magnification特效（即鼠标放到Dock上图标放大的效果，此效果干扰注意力） 在Position on screen一栏，选择Left 勾选Minimize window into application icon [ 231](http://img4.tbcdn.cn/L1/461/1/613945b61050a6fbbef7145784ca728e3a4b3c69) 图2.3-1 2.4 全键盘控制模式全键盘控制模式是什么？ 举一个例子，如下图所示，我正在写一个文档，此文档还没有保存，也没有文件名，如果不不小心点了关闭按钮，将会弹出一个对话框： [ 241](http://img4.tbcdn.cn/L1/461/1/d390b46f0e56030ee7731af9231d52b8a997c4ee) 图2.4-1 当前，[Save]按钮处于默认激活状态，按回车将会弹出保存对话框。但是如果我不想保存呢？ 只能通过鼠标或者触摸板来移动光标后点击[Don&#39;t Save]来取消保存。那我能不能通过键盘控制光标激活[Don&#39;t Save]按钮呢？ 答案是肯定的，做一个简单设置就好。 如图，首先打开System Preferences，点击Keyboard图标，选择Shortcuts这个Tab, 选中All controls [ 242](http://img3.tbcdn.cn/L1/461/1/b4743db32d0f97b9bfcd076b293793046c410cb4) 图2.4-2 现在当我再次试图关闭一个未保存的文件时，新弹出的对话框如下，有了些许变化，在[Don&#39;t Save]按钮上多了一个蓝色的外框，当你按键盘上的tab键的时候，蓝色的外框会在3个按钮间切换。 假设现在蓝色的外框在[Don&#39;t Save]按钮上，你按下回车，却发现系统依然进入了保存文件对话框，为什么蓝色的外框不起作用呢？那是因为蓝色的外框选中的按钮是由空格键触发的，当你按下空格键，系统就会不保存文件直接退出。 这样当你不方便使用鼠标和触摸板的时候，可以更快速的和你的MacBook交互。 [ 243](http://img1.tbcdn.cn/L1/461/1/3abe8997fe7e3180655e05505d532fca0a37e640) 图2.4-3 2.5 快速锁定屏幕如果你长时间离开电脑，最好锁定你的屏幕，以防止数据泄露。 那如何快速的锁定你的MacBook呢？ 答案是只需要一摸触摸板或者一甩鼠标就可以了。 打开System Preferences，点击Desktop &amp; Screen Saver图标，选择Screen Saver这个Tab，再点击Hot Corners...，在弹出的如下界面里面，右下角选择Put Display to Sleep，点击OK确定。[ 251](http://img2.tbcdn.cn/L1/461/1/1accf3c0f885fdac290bca59f2ba158896ac7082) 图2.5-1 再打开System Preferences，点击Security &amp; Privacy图标，在GeneralTab内，勾选Require password[immediately] after sleep or screen save begins。 [ 252](http://img4.tbcdn.cn/L1/461/1/860acb1af1045d34664b96061c7e414f6e4ab9d6) 图2.5-2 现在当你离开电脑前时，记得一摸触摸板或者一甩鼠标将光标快速的移到屏幕的右下角，MacBook将立刻进入Screen Saver模式并且需要密码才能进入桌面。 系统常用快捷键 请点击这个文档，学习系统快捷键，适当使用快捷键将会提升你的工作效率。 日常软件推荐 4.1 中文输入法系统自带的输入法不是很好用，推荐安装搜狗输入法或者RIME输入法。安装完成后，打开System Preferences，选择Keyboard，切换到Shortcuts这个Tab下，勾选Select the previous input source，并点击上述文字后面的空白处，设置快捷键为Ctrl+Space(即如图所示的^Space)。 [ 411](http://img3.tbcdn.cn/L1/461/1/924d005e0c8b910bea9110803ac9920b2450f635) 图4.1-1 4.2 窗口管理软件 - SizeUp 你是否经常想让某个Word文档占满屏幕的左半部分，旺旺聊天占满屏幕的右半部分，从而一边对着文档一边和小伙伴聊需求？ 终于搞好了外接显示器，你是否经常将某个窗口在笔记本和外接显示器屏幕之间直接来回拖动？ SizeUp快速解决这样的需求，该软件可以永久免费试用，下载安装后打开SizeUp，再打开旺旺，快捷键按下control+option+command + M，则旺旺就会立即进入全屏模式。 然而大部分情况下，你会看到如下这个提示，这是因为SizeUp需要你的授权才能控制窗口。 [ 421](http://img4.tbcdn.cn/L1/461/1/999f26354ec892e3d7a578a423071c5b96b52cfd) 图4.2-1 直接点击Open System Preferences或者打开System Preferences，点击Security &amp; Privacy图标，在PrivacyTab内，点击Accessibility，然后将SizeUp加到右边的列表里面。（提示：你可能需要先点击右下角的黄色锁，输入密码后才能编辑右边的列表。） [ 422](http://img1.tbcdn.cn/L1/461/1/1e1da9b2f90668f13adf273429e6d6e738ddea9d) 图4.2-2 如果你此时接上了外接显示器，快捷键按下control+option + 方向键右键，则当前左边显示器激活的最前端窗口将被立即发送到右边的显示器。 下面列举一些SizeUp常用的快捷键，更多的快捷键和使用方式请查询其官方网站。 control+option+command + M ： 使当前窗口全屏 control+option+command + 方向键上键 ： 使当前窗口占用当前屏幕上半部分 control+option+command + 方向键下键 ： 使当前窗口占用当前屏幕下半部分 control+option+command + 方向键左键 ： 使当前窗口占用当前屏幕左半部分 control+option+command + 方向键右键 ： 使当前窗口占用当前屏幕右半部分 control+option + 方向键左键 ： 将当前窗口发送到左边显示器屏幕 control+option + 方向键右键 ： 将当前窗口发送到右边显示器屏幕 4.3 查找文件和应用程序以及无限想象力 - Alfred如果你曾经使用过MacBook，你应该接触过Spotlight，就是屏幕中间弹出一个长条输入框，你输入文件名或者应用程序名，Spotlight将模糊查找到对应的候选项，按回车快速的打开你需要的文件或程序。 Alfred的能力远远超过了Spotlight, 你可以直接下载免费版安装使用，Alfred另外还提供了更强大的工作流(Workflows)和剪切板(Clipboard)管理等高级功能，需要购买Powerpack。对于日常的操作，免费版已经足够使用了。 因为Alfred可以完全取代Spotlight，下面先删除Spotlight占用的快捷键command + 空格，以供Alfred将来使用。 打开System Preferences，选择Keyboard，切换到Shortcuts这个Tab下，点击Spotlight，取消对应的2个快捷键设置。 [ 431](http://img2.tbcdn.cn/L1/461/1/62f3d89b8c2f42cbc28df7e4fd0e1055c4a15105) 图4.3-1 打开Alfred，在菜单栏点击Alfred图标，打开Preferences... [ 432](http://img3.tbcdn.cn/L1/461/1/dbb0d56ee24de047dc0b279bc38b547ca610e621) 图4.3-2 如下图所示，设置Alfred的快捷键为command + 空格 [ 433](http://img4.tbcdn.cn/L1/461/1/b84bccd1ff0ae8e93bc54d4c1c5da7a43f1e0630) 图4.3-3 现在按下快捷键command + 空格，输入ali，则Alfred不区分大小写的将所有包含ali的应用程序，文档以及历史网址都列出来了，如下图所示，回车打开淘云盘，command+2打开本地一个xmind文件，你还可以移动键盘上下键或者光标来选择目标。 [ 434](http://img1.tbcdn.cn/L1/461/1/9dc7c00720205a3de3ea4bc2ba3f33999490b997) 图4.3-4 更多关于Alfred的使用方式和无限想象力，请参考官方网站或者网上现有的大量的教程。 下面简单演示一下剪切板管理和厂内查人工作流的使用。如下图所示，我使用快捷键打开剪切板管理器，列出来我最近复制过的文本片段，我可以快速的选取这些文本片段或者输入部分字符来查找 [ 435](http://img3.tbcdn.cn/L1/461/1/72f3e06475119fb924c0535a4f45016bd4a0292e) 图4.3-5 当你安装了由@文通开发的厂内查人workflow后，激活Alfred，输入r+空格，再输入某人的花名，就可以看到对方的简单信息。 按回车打开阿里内外对方信息页面 按ctrl+回车，直接打开对方旺旺进入聊天模式 [ 436](http://img2.tbcdn.cn/L1/461/1/5e78176ac9a22ea36cdbaeb478fc8f6f4812dcd9) 图4.3-6 4.4 聪明又美丽的日历 – Fantastical 2打开Fantastical 2的网站，你一定会被她漂亮的外表所吸引，最可贵的是Fantastical还很聪明，当你在日历里面新建一个提醒的时候，输入如下内容“HTML training at 7:30pm tomorrow alert 5 min”, 则Fantastical会自动将日期设置为明天，然后将开始时间设置为晚上7点半，并且提前5分钟提醒，是不是很聪明？ [ 441](http://img1.tbcdn.cn/L1/461/1/d611de3740f64721e11e869ede0a6a0131da81d0) 图4.4-1 4.5 来杯免费咖啡 – Caffeine今天下午给大老板和重要客户演示PPT，你仿佛看到了升职加薪走上人生巅峰，当你打开MacBook接上投影仪，口若悬河的讲解，突然MacBook进入休眠模式了，画面太美了，我不敢想了。 你应该立刻安装这款免费的良心软件—Caffeine，设置开机启动，点一下状态栏的咖啡杯图标，当咖啡是满的时候，MacBook将不会进入休眠模式，再点一下咖啡杯空了就正常休眠，我默认设置开机启动，咖啡杯保持满满的状态。 4.6 快速切换和打开应用程序 – ManicoMacBook系统默认设置了一个快捷键来显示当前运行中的应用程序，同时按下tab + command，将看到如下图的样式： [ 461](http://img4.tbcdn.cn/L1/461/1/216e6046485410605dc1883952ae22f8a685e3c5) 图4.6-1 如果你想要却换到Firefox，需要再按一下tab，如果要切换到日历，需要按两下‘tab’，如果一次性打开10几个应用程序，你经常需要按十几下tab才能却换到想要的程序。 Manico专为这个场景而设计，安装好后打开，默认快捷键是按住option，如图所示，此时按下数字7就能快速打开编号为7的地图。 [ 462](http://img4.tbcdn.cn/L1/461/1/bd61382e4d329f7932dff65e7bf426a3bf6dc8cf) 图4.6-2 另外，推荐设置Manico使用左手边的字母加数字做索引，方便仅仅用左手就能快速切换应用程序。在菜单栏点击Manico图标，打开Preferences...， 在AppearanceTab里面，选择Uses left hand area和Use numeric and alphabet。 [ 463](http://img1.tbcdn.cn/L1/461/1/3fc434c7ed3fb8ab3d80fc726996d173d60dc5e3) 图4.6-3 4.7 随心所欲的复制粘贴以及无限想象 – PopClip 日常工作中，你有多少次是从一个应用程序复制一段文本然后粘贴到另外一个地方？ 有多少次是复制一个网址然后打开浏览器粘贴到地址栏然后回车打开？ 有多少次是复制一个名词，然后打开浏览器找到搜索引擎来搜索？ 这些重复的操作模式都是可以简化的，你唯一需要的就是PopClip，当你选中一段文字（如下图，选中“当日收益”），PopClip就会弹出来一个快捷操作栏，你可以复制，剪切或者粘贴，更为强大的是，PopClip提供了很多免费的插件，例如使用指定的搜索引擎搜索选中的文字，或者选中英文单词做大小写转换等等。 [ 471](http://img4.tbcdn.cn/L1/461/1/43e10d3e2589595b9b371620817878ffa49bf8f2) 图4.7-1 需要注意的是，PopClip需要你的授权才能弹出快捷状态栏，直接点击Open System Preferences或者打开System Preferences，点击Security &amp; Privacy图标，在PrivacyTab内，点击Accessibility，然后将PopClip加到右边的列表里面并且勾选前面的checkbook。（提示：你可能需要先点击右下角的黄色锁，输入密码后才能编辑右边的列表。） 4.8 增强资源管理器 – XtraFinderMacBook自带的资源管理器(Finder)已经可以满足一般的需要，但是当你有大量文件维护操作后，你就需要一个更强大的Finder。XtraFinder完全集成到Finder里面，你根本感觉不出它是一个第三方的应用程序，同时还提供很多增强特性，比如： 像浏览器那样的标签页(Tab) 支持双操作面板(Panel) 增强的全局快捷键，例如新建文件(New File)等 多彩的侧边栏图标 快速在当前文件夹打开终端 快速在当前文件夹新建文件 [ 481](http://img2.tbcdn.cn/L1/461/1/a9d636d1331d528d71ab9d720c7f64987b1b1350) 图4.8-1 4.9 随心所欲的全键盘控制 - Shortcat在系统设置里面，我介绍了全键盘控制模式，但是此模式只能做简单的按钮控制，无法达到随心所欲的控制。下面介绍一款比较geek的软件，Shortcat帮助你完全使用键盘来控制系统，供有键盘强迫症的同学使用。 [ 491](http://img3.tbcdn.cn/L1/461/1/5920267ce10a6f28b669919720f4d8b196b78ff9) 图4.9-1 4.10 来杯鸡尾酒 – Bartender如果你看到这里，相信你已经被我推(hu)荐(you)的安装了一排软件，你的系统状态栏已经人满为患，有时候会因为当前激活的应用程序的菜单比较多挡住你要点击的状态栏图标，这个时候你需要一个酒保来帮你调理一下状态栏，Bartender将是我推荐的最后一个日常使用的App，你可以自定义隐藏某些不常用的状态栏图标，特别适合处女座强迫症。 [ 4101](http://img4.tbcdn.cn/L1/461/1/ed09772f6172235bd4b9de1a10c182703e298a35) 图4.10-1 开发环境配置 终于到了开发环境配置阶段，在配置开发环境前，建议先将OS X系统升级到最新版，同时去Mac App Store下载最新版的Xcode，然后使用下面的命令安装Xcode command line tools，这将为你安装很多终端下面常用的命令，将来很可能会使用到： 1xcode-select --install 5.1 命令行终端Terminal在用户界面没有发明前，终端Terminal曾经是计算机的唯一交互方式，就算到了今天，很多服务器仍然只提供终端登陆来操作，作为开发测试运维相关人员，在日常工作中合理使用终端将大大提高工作效率。 5.1.1 替换系统默认Shell – Oh My ZSH!Bash作为大多数系统默认安装的Shell，大家都多少有所接触，Zsh和Bash类似都是一个Shell，但是Zsh更注重用户体验和与人的交互，OS X默认也安装好了Zsh，然而你想自己从头开始配置一个顺手的Zsh是比较浪费时间的，有人已经帮我们配置好了，这个流行的Zsh配置叫—Oh My ZSH!，直观的效果如下图所示，代码开源在github。 [ 5111](http://img2.tbcdn.cn/L1/461/1/e63853028eb8119689986663bf0c794263f27be4) 图5.1.1-1 切换默认Shell到Zsh Mac OS X默认已经安装好了Zsh，你可以打开终端，输入zsh --version来确认，如果没有安装，请参考这个文档。 打开终端输入下面的命令，切换默认Shell为Zsh： 1chsh -s /bin/zsh 关闭终端重新打开后，你将默认使用zsh作为终端Shell。然而你会发现，终端并没有变得多酷炫，接着往下走，安装Oh My ZSH! 安装Oh My ZSH! 打开终端输入下面的命令： 1sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; 耐心等待一会儿，然后你就会发现你的终端变成了彩色的了。 [ 5112](http://img3.tbcdn.cn/L1/461/1/379712ed6ac5b61c40224f663ccd4ce4c4ab0180) 图5.1.1-2 你可以修改终端的Profile，选择深色背景profile，这样就比较炫酷了。如果你对默认的Oh My ZSH的配色不满意，请参考这里找到你喜欢的配色。 5.1.2 替换系统默认终端 – iTerm 2如果你经常使用终端，那么推荐你使用iTerm 2来替代系统自带的终端。关于iTerm 2的特性，请看这里。 这里我只介绍一个小技巧，我想设置一个快捷键假设为F12，在任意场合，我按一下快捷键F12就弹出终端，输入一些命令执行后，再按一下F12终端就自动隐藏，这对经常使用终端的人，例如经常ssh连接服务器的人来说实在太方便了。 设置过程如下： 系统已经默认将F12分配给Show Dashboard，需要先取消这个设置。 打开System Preferences，选择Keyboard，切换到Shortcuts这个Tab下，点击Mission Control，取消对应F12的快捷键。[ 5121](http://img4.tbcdn.cn/L1/461/1/41c698397b3249cdb30157c108a9e918bcb5de19) 图5.1.2-1 打开iTerm的Preferences...， 在ProfilesTab里面，点击下面的[+]添加一个新的profile，为什么要新建一个profile？答案是为了定制将来弹出的终端样式和大小等等参数。新的profile假设命名为guake，(注：guake这个名称是为了向Linux下的Guake终端致敬)，你可以自己任意起个名称，下面会用到。 [ 5122](http://img2.tbcdn.cn/L1/461/1/628bb16fba1881c3afd612b0e0480f5a36401550) 图5.1.2-2 再切换到WindowTab下，将Style，Screen和Space这3个值设置和下图一样。 [ 5123](http://img1.tbcdn.cn/L1/461/1/b24f89513f3965239bbeca6e4db3f325112ea5af) 图5.1.2-3 再切换到KeysTab下，设置如下图所示的HotkeyF12。 [ 5124](http://img2.tbcdn.cn/L1/461/1/3748ce750bddc07aa13e22cc8ebbc03f2f396446) 图5.1.2-4 现在你按下F12，就立即得到一个占满全屏的黑色命令行终端，再按一下F12隐藏终端，非常的方便。 5.2 终端下的命令管理 – HomebrewMac App Store你一定非常熟悉了，它可以帮你下载和安装大部分常见的软件。 在终端下，我们也需要一个App Store一样的管理程序，当你需要安装某个终端下的新命令的时候，这个程序可以帮助我们自动下载该命令以及相关的依赖，甚至在下载以后做必要的编译和环境设置。 Homebrew就是这样一款终端下的命令程序包管理器，安装非常简单，复制如下命令在终端下运行，按回车并输入密码后等待安装成功： 1ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 下面是安装截图： [ 521](http://img4.tbcdn.cn/L1/461/1/d97a24018bf9c6a95000f66b46800f7c3d9ff208) 图5.2-1 curl和wget是命令行下面常用的命令，其中curl已经默认安装在OS X中了，但是wget没有默认安装，下面演示如何使用Homebrew来安装wget。 1brew install wget 下面是运行截图：[ 522](http://img4.tbcdn.cn/L1/461/1/c821f88dc7fa44040ea4261a57f6906fcc41a822) 图5.2-2 5.3 终端下管理非终端软件 – Homebrew Cask因为Apple不允许第三方的浏览器进入Mac App Store，如果你想要安装Google Chrome，只能去Google网站下载后运行安装文件。这一类App Store没有的非终端下的软件能不能享受Homebrew一样的命令行安装的便捷性呢？ Homebrew Cask就是这样一款终端下的程序管理器，它扩展了Homebrew，作为Mac App Store的有益补充，方便你快速维护日常软件的安装升级和卸载，复制如下命令在终端下运行，按回车后等待安装成功： 1brew install caskroom/cask/brew-cask 下面是运行截图： [ 531](http://img2.tbcdn.cn/L1/461/1/fcc161f5926170d0d2bb3ecaf9be280b563b1726) 图5.3-1 那如何使用Homebrew Cask来安装Google Chrome呢？ 首先使用chrome作为关键字查找一下： 1&gt; brew cask search chrome ==&gt; Partial matches chrome-devtools chrome-remote-desktop-host chromecast google-chrome 上面的命令运行后列出了4个候选项，很明显最后一个google-chrome就是我们要安装的，继续输入 1&gt; brew cask install google-chrome 下面只需要稍微等一会儿，最新版的Google Chrome就乖乖的安装在你的MacBook里面了。 5.4 Java开发环境搭建5.4.1 安装Java和Maven现在OS X没有默认安装JDK，如果你在终端输入java，系统会引导你到Oracle网站去下载，然后自己点击下载文件来安装，这个过程一点都不酷，而且不能自动化。现在你有了Homebrew Cask，只要输入如下命令，Java就可以自动安装好啦。 1brew cask install java 现在最近版本的JDK是1.8，Homebrew默认安装最新版软件，如果你要安装非最新版的JDK，那么去Oracle网站下载吧，Homebrew的多版本支持不是很好用。 同样的，输入如下命令来安装Maven最新版。 1brew install maven 在开发中，你很可能会碰到这个错误java.security.InvalidKeyException: Illegal key size or default parameters，那是因为美国对出口软件加密算法长度的限制，你需要去如下链接下载补丁包： JCE Unlimited Policy for JDK 6 JCE Unlimited Policy for JDK 7 JCE Unlimited Policy for JDK 8 补丁替换路径为${java.home}/jre/lib/security/，大约如下所示： 1/Library/Java/JavaVirtualMachines/jdk1.8.0_51.jdk/Contents/Home/jre/lib/security 5.4.2 安装版本控制软件 – SmartGit &amp; SmartSVN如果代码就是生命，版本控制系统就是时光机。Git和Subversion分别是现在最流行的2个版本控制系统，SmartGit和SmartSVN分别是他们的一个第三方客户端，当然他们有很多第三方客户端，我觉得SmartGit和SmartSVN是最好用的。 5.4.3 安装和配置IDE – IntelliJ IDEAIntelliJ IDEA作为最智能的Java IDE，推荐所有Java开发人员使用，你可以在这里下载安装文件，或者使用如下的Homebrew Cask命令来下载安装： 1brew cask install intellij-idea 打开IDEA，推荐选择Darcula主题，快捷键映射选择I&#39;ve never used IDEA, 一路确认下去进入主界面。 推荐使用版本控制客户端(SmartGit &amp; SmartSVN)下载好源代码后，再使用IDEA导入源代码，原因是如果用IDEA来checkout源代码，一边checkout一边分析代码，对于有多个模块的Maven项目，IDEA动态检测Spring框架的配置文件可能会得不到及时而完整的依赖分析。 [ 5421](http://img2.tbcdn.cn/L1/461/1/872703cfd2eb192076b0e3598938cfed57d96653) 图5.4.2-1 我们假设项目是基于Maven的，如下图，选择Maven：[ 5422](http://img2.tbcdn.cn/L1/461/1/e872d8bc7b908ec4dbf4362608cac90cbd4838ce) 图5.4.2-2 一路点击[Next]进入主界面，IDEA会帮我们自动检测到依赖的框架，如图IDEA发现我们使用了OSGI和Spring框架，点击[Configure]，然后去除OSGI依赖，因为SOFA项目不是完全实现OSGI规范的，勾选Spring配置文件。 [ 5423](http://img1.tbcdn.cn/L1/461/1/c5ab9029cd05ae5ee196ba94588e64b4957ec712) 图5.4.2-3 IDEA会在你首次导入一个项目的时候建立索引，耐心等待索引建立完成，之后的查找就会非常快速。 工具的意义 工欲善其事，必先利其器，工具永远都是用来解决问题的，没必要为了工具而工具，一切工具都是为了能快速准确的完成工作和学习任务而服务。","categories":[],"tags":[]},{"title":"mysql variables","slug":"sql/MySQL变量","date":"2018-05-19T13:21:38.000Z","updated":"2018-07-18T06:25:10.000Z","comments":true,"path":"2018/05/19/sql/MySQL变量/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/sql/MySQL变量/","excerpt":"","text":"mysql变量MySQL中的变量以定义者分类分为用户变量与系统变量。 以作用域分类为全局变量，会话变量。 用户变量：以”@”开始，形式为”@变量名”。用户变量跟mysql客户端是绑定的，设置的变量，只对当前用户使用的客户端生效 系统变量：定义时，以如下两种形式出现，set GLOBAL 变量名 或者 set @@global.变量名，对所有客户端生效。只有具有super权限才可以设置全局变量 会话变量：只对连接的客户端有效。 局部变量：作用范围在begin到end语句块之间。在该语句块里设置的变量。declare语句专门用于定义局部变量。set语句是设置不同类型的变量，包括会话变量和全局变量 通俗理解术语之间的区别： 用户定义的变量就叫用户变量。这样理解的话，会话变量和全局变量都可以是用户定义的变量。只是他们是对当前客户端生效还是对所有客户端生效的区别了。所以，用户变量包括了会话变量和全局变量 局部变量与用户变量的区分在于两点:1.用户变量是以”@”开头的。局部变量没有这个符号。2.定义变量不同。用户变量使用set语句，局部变量使用declare语句定义 3.作用范围。局部变量只在begin-end语句块之间有效。在begin-end语句块运行完之后，局部变量就消失了。 所以，最后它们之间的层次关系是：变量包括局部变量和用户变量。用户变量包括会话变量和全局变量。 mysql declare定义变量mysql declare用于定义变量，在存储过程和函数中通过declare定义变量在BEGIN…END中，且在语句之前。并且可以通过重复定义多个变量 declare变量的作用范围同编程里面类似，在这里一般是在对应的begin和end之间。在end之后这个变量就没有作用了，不能使用了。这个同编程一样。 注意：declare定义的变量名不能带‘@’符号，mysql在这点做的确实不够直观，往往变量名会被错成参数或者字段名。 mysql存储过程中使用declare定义变量，实例如下： 12345678910111213DROP PROCEDURE IF EXISTS insert_ten_rows $$CREATE PROCEDURE insert_ten_rows () BEGIN DECLARE crs INT DEFAULT 0; WHILE crs &lt; 10 DO INSERT INTO `continent`(`name`) VALUES (&apos;cont&apos;+crs); SET crs = crs + 1; END WHILE; END $$DELIMITER ;12345678910111213 mysql SET定义变量mysql set也可以用来定于变量，定义变量的形式是以”@”开始，如：”@变量名”。 mysql SET定义变量实例： 123456789101112131415161718192021222324mysql&gt; SET @t1=0, @t2=1, @t3=2;mysql&gt; select @t1;+------+| @t1 |+------+| 0 |+------+mysql&gt; select @t2;+------+| @t2 |+------+| 1 |+------+mysql&gt; select @t3;+------+| @t3 |+------+| 2 |+------+mysql&gt; 复杂一点的实例： 12345678910mysql&gt; SET @t1=0, @t2=1, @t3=2;mysql&gt; SELECT @t1:=(@t2:=1)+@t3:=4,@t1,@t2,@t3;+----------------------+------+------+------+| @t1:=(@t2:=1)+@t3:=4 | @t1 | @t2 | @t3 |+----------------------+------+------+------+| 5 | 5 | 1 | 4 |+----------------------+------+------+------+12345678910 mysql declare和set定义变量的区别mysql declare和set定义变量，除了一个不加@和一个加@这个区别之外，还有以下区别： declare用来定义局部变量 @用来定义会话变量 declare变量的作用范围同编程里面类似，在这里一般是在对应的begin和end之间。在end之后这个变量就没有作用了，不能使用了。这个同编程一样。 另外有种变量叫做会话变量(session variable)，也叫做用户定义的变量(user defined variable)。这种变量要在变量名称前面加上“@”符号，叫做会话变量，代表整个会话过程他都是有作用的，这个有点类似于全局变量一样。这种变量用途比较广，因为只要在一个会话内(就是某个应用的一个连接过程中)，这个变量可以在被调用的存储过程或者代码之间共享数据。 MySQL的用户变量和系统变量MySQL中的变量分为用户变量与系统变量。 一、用户变量用户变量是指与数据库的一次连接中声明的变量，在连接断开后就会消失。1、变量命名变量名必须以@开头，例如@name 2、声明及赋值声明与赋值的方法两种，一种是使用set语句，一种是使用select语句。 12345/*使用set语句声明变量并赋值（注：声明的时候必须赋初值）*/set @name=&apos;zhangsan&apos;;/*使用select语句声明并赋值*/select @age:=23; 3、查看用户变量查看变量使用select语句 1select @name; 二、系统变量系统变量又分为全局变量与会话变量。 全局变量在MySQL启动的时候由服务器自动将它们初始化为默认值，这些默认值可以通过更改my.ini这个文件来更改。 会话变量在每次建立一个新的连接的时候，由MySQL来初始化，MySQL会将当前所有全局变量的值复制一份，作为会话变量。也就是说，如果在建立会话以后，没有手动更改过会话变量与全局变量的值，那所有这些变量的值都是一样的。 全局变量与会话变量的区别就在于，对全局变量的修改会影响到整个服务器，但是对会话变量的修改，只会影响到当前的会话（也就是当前的数据库连接）。 1、查看系统变量查看全局变量可以使用show global variables语句，查看会话变量可以使用show session variables或者show variables语句。这些语句会列出所有的变量，如果需要查看某个变量，可以在后面加like进行模糊查询，例如：show variables like ‘%sql_mode%’。 另外，还可以使用select语句来查看系统变量。会话变量：select @@ session/local.varname;全局变量：select @@global.varname; 1234567891011121314/*查询所有的全局变量*/show global variables;/*查询所有的会话变量*/show variables;/*查询名字中含有sql_mode的全局变量*/show global variables like &apos;%sql_mode%&apos;;select @@global.varname;/*查询名字中含有sql_mode的会话变量*/show variables like &apos;%sql_mode%&apos;;select @@session.varname;select @@local.varname; 2、修改系统变量跟修改用户变量相同，修改系统变量使用的也是set语句。当需要修改会话变量时，可以使用 1set session varname=value //或者 set @@session.varname=value 当需要修改系统变量时，可以使用 12set global varname=value //或者set @@ global.varname=value","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"mysql","slug":"sql/mysql","permalink":"http://io.stelawliet.top/categories/sql/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://io.stelawliet.top/tags/mysql/"},{"name":"variables","slug":"variables","permalink":"http://io.stelawliet.top/tags/variables/"}]},{"title":"","slug":"Linux/security/fail2ban ssh security","date":"2018-05-19T06:54:10.000Z","updated":"2018-05-19T07:46:42.000Z","comments":true,"path":"2018/05/19/Linux/security/fail2ban ssh security/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/Linux/security/fail2ban ssh security/","excerpt":"","text":"CentOS下fail2ban安装与配置教程介绍fail2ban用于监视系统日志，通过正则表达式匹配错误错误信息，设置一定的条件触发相应的屏蔽动作。在笔者的vps里，主要是用于ssh的保护，ssh登录错误的时候会记录到 /var/log/secure，fail2ban通过 gamin检测到新增日志，10min内同一ip连续登陆5次就会封禁30min。当然，一个足够的强密码也是必须的！ 官方主页：http://www.fail2ban.org/wiki/index.php/Main_Page github：https://github.com/fail2ban/fail2ban 安装这里有两种安装方式，使用yum安装或者通过rpm安装。笔者的系统版本是CentOS-6.7 yum安装 12345#首先安装epel源，如果已经安装可以跳过此步yum install -y epel-release#然后安装fail2ban：yum install -y fail2ban rpm安装 fail2ban依赖下面四个安装包：ed： Linux 操作系统下最简单的文本编辑器，以行为单位对文件进行编辑gamin-python： python调用gamin的一个模块，gamin实现了一套监控文件变化的机制ipset： 管理 ip地址/端口/mac地址 的模块，一般用于辅助提高iptables的性能python-inotify： python的一个模块，实现了文件变化通知机制 1234567891011#其中前三个都可以使用yum安装：yum -y install ed gamin-python ipset python-inotify#然后根据系统架构不同，使用不同的rpm包安装：#i386rpm -Uvh ftp://rpmfind.net/linux/atrpms/el6-i386/atrpms/stable/python-inotify-0.9.1-1.1.el6.noarch.rpmrpm -Uvh ftp://rpmfind.net/linux/epel/testing/6/i386/fail2ban-0.9.3-1.el6.noarch.rpm#x86-64rpm -Uvh ftp://rpmfind.net/linux/atrpms/el6-x86_64/atrpms/stable/python-inotify-0.9.1-1.1.el6.noarch.rpmrpm -Uvh ftp://rpmfind.net/linux/epel/testing/6/x86_64/fail2ban-0.9.3-1.el6.noarch.rpm 配置目前的最新版本是0.9.3 12345678配置文件位于：/etc/fail2ban/action.d/ //采取相对应措施的目录/etc/fail2ban/fail2ban.conf //fail2ban的配置文件/etc/fail2ban/fail2ban.d/ //fail2ban的配置文件目录/etc/fail2ban/filter.d/ //具体过滤规则文件目录/etc/fail2ban/jail.conf //阻挡设定文件/etc/fail2ban/jail.d/ //阻挡设定文件的目录/etc/fail2ban/paths-*.conf //不同linux发行版下路径的相关设置，在jail.conf的[INCLUDES]里指定 fail2ban.conf 是针对fail2ban程序运行本身的一些设置。jail.conf 是fail2ban的业务功能设置，里面设置了需要监控那些服务以及如何保护等，里边已经针对常用的服务提供了监控方案，比如sshd、apache、3proxy等，笔者只启用了sshd的保护。 jail.conf里的注释十分丰富，简单介绍一些基本的设置： 123456789101112131415#所有监控项的默认设置[DEFAULT]#忽略的ip，这里表示本机ip将永不被封禁ignoreip = 127.0.0.1/8#封禁时间，单位为秒bantime = 600#监控周期，表示在600s内，失败次数达到maxretry的主机将会被封禁findtime = 600#最大重试次数，表示在findtime内，失败次数达到5次的主机将会被封禁maxretry = 5#默认关闭对所有服务的保护enabled = false 启用sshd的保护很简单，在jail.conf的[sshd]中加上一行enabled = true就可以： 12345678# SSH servers#[sshd]port = sshlogpath = %(sshd_log)senabled = true 最后就是设置服务自启动了 12chkconfig fail2ban onservice fail2ban start CentOS7的补充说明在CentOS7下可能会出现类似错误 1234567891011122017-04-19 10:19:30,335 fail2ban.action [526]: ERROR ipset create fail2ban-sshd hash:ip timeout 600firewall-cmd --direct --add-rule ipv4 filter INPUT 0 -p tcp -m multiport --dports ssh -m set --match-set fail2ban-sshd src -j REJECT --reject-with icmp-port-unreachable -- stdout: &apos;&apos;2017-04-19 10:19:30,335 fail2ban.action [526]: ERROR ipset create fail2ban-sshd hash:ip timeout 600firewall-cmd --direct --add-rule ipv4 filter INPUT 0 -p tcp -m multiport --dports ssh -m set --match-set fail2ban-sshd src -j REJECT --reject-with icmp-port-unreachable -- stderr: &apos;ipset v6.19: Cannot open session to kernel.\\n\\x1b[91mFirewallD is not running\\x1b[00m\\n&apos;2017-04-19 10:19:30,336 fail2ban.action [526]: ERROR ipset create fail2ban-sshd hash:ip timeout 600firewall-cmd --direct --add-rule ipv4 filter INPUT 0 -p tcp -m multiport --dports ssh -m set --match-set fail2ban-sshd src -j REJECT --reject-with icmp-port-unreachable -- killed with signal 124 (return code: 252)2017-04-19 10:19:30,336 fail2ban.actions [526]: ERROR Failed to start jail &apos;sshd&apos; action &apos;firewallcmd-ipset&apos;: Error starting action……2017-04-19 10:19:41,529 fail2ban.action [526]: ERROR ipset add fail2ban-sshd 116.31.116.14 timeout 600 -exist -- stdout: &apos;&apos;2017-04-19 10:19:41,530 fail2ban.action [526]: ERROR ipset add fail2ban-sshd 116.31.116.14 timeout 600 -exist -- stderr: &apos;ipset v6.19: Cannot open session to kernel.\\n&apos;2017-04-19 10:19:41,530 fail2ban.action [526]: ERROR ipset add fail2ban-sshd 116.31.116.14 timeout 600 -exist -- returned 12017-04-19 10:19:41,531 fail2ban.actions [526]: ERROR Failed to execute ban jail &apos;sshd&apos; action &apos;firewallcmd-ipset&apos; info &apos;CallingMap(&#123;&apos;ipjailmatches&apos;: &lt;function &lt;lambda&gt; at 0xb08578&gt;, &apos;matches&apos;: &apos;[……]&apos;, &apos;ip&apos;: &apos;116.31.116.14&apos;, &apos;ipmatches&apos;: &lt;function &lt;lambda&gt; at 0xb08410&gt;, &apos;ipfailures&apos;: &lt;function &lt;lambda&gt; at 0xb086e0&gt;, &apos;time&apos;: 1492568381.402617, &apos;failures&apos;: 40, &apos;ipjailfailures&apos;: &lt;function &lt;lambda&gt; at 0xb08500&gt;&#125;)&apos;: Error banning 116.31.116.14 CentOS7使用了firewall作为默认防火墙，而fail2ban默认使用firewallcmd-ipset作为封禁动作，但是在基于openvz的vps平台上是不能调用ipset的，所以需要做一些更改。更改/etc/fail2ban/jail.d/00-firewalld.conf文件，将其更改为使用firewallcmd-new 123[DEFAULT]#banaction = firewallcmd-ipsetbanaction = firewallcmd-new FAQQ：日志中出现Error starting action错误 123456fail2ban.server[2228]: INFO Jail sshd is not a JournalFilter instancefail2ban.jail[2228]: INFO Jail &apos;sshd&apos; startedfail2ban.action[2228]: ERROR iptables -w -N f2b-sshd#012iptables -w -A f2b-sshd -j RETURN#012iptables -w -I INPUT -p tcp -m multiport --dports ssh -j f2b-sshd -- stdout: &apos;&apos;fail2ban.action[2228]: ERROR iptables -w -N f2b-sshd#012iptables -w -A f2b-sshd -j RETURN#012iptables -w -I INPUT -p tcp -m multiport --dports ssh -j f2b-sshd -- stderr: &apos;&apos;fail2ban.action[2228]: ERROR iptables -w -N f2b-sshd#012iptables -w -A f2b-sshd -j RETURN#012iptables -w -I INPUT -p tcp -m multiport --dports ssh -j f2b-sshd -- returned 2fail2ban.actions[2228]: ERROR Failed to start jail &apos;sshd&apos; action &apos;iptables-multiport&apos;: Error starting action A：fail2ban-0.9.3在执行iptable命令时，加上了-w参数用于防止冲突，但是iptables-1.4.20才有这个参数，而CentOS6.7下的是iptables-1.4.7,因此导致iptable的命令执行失败，Github有这个问题：https://github.com/fail2ban/fail2ban/issues/1122 一个折中方案是，修改/etc/fail2ban/action.d/iptables-common.conf文件，去掉，也就是-w参数： 12345# Option: iptables# Notes.: Actual command to be executed, including common to all calls options# Values: STRING#iptables = iptables &lt;lockingopt&gt;iptables = iptables Q：日志中出现ERROR findFailure failed to parse timeText错误： 1234Sep 21 09:57:51 12345 fail2ban.filter[1588]: ERROR findFailure failed to parse timeText: Sep 21 09:57:26 1234#在fail2ban-0.9.2 是这样的错误Sep 21 10:05:37 12345 fail2ban.filterpyinotify[1305]: ERROR Error in FilterPyinotify callback: mktime argument out of range A：这个错误源于一个不算bug的bug，当用户的hostname前面为数字的时候就会触发 12[root@12345 ~]# hostname12345.domain.com 在日志中，12345.domain.com前面的12345被当作是年份被解析了，笔者的vps很不幸，hostname就是数字开头的，而且当时的版本还是fail2ban-0.9.2，排错过程十分辛苦。解决的方法有很多，比如最直接的修改hostname 1vi /etc/sysconfig/network 而笔者采用的方案是修改 rsyslog 的日志格式： 123456vi /etc/rsyslog.conf# Use default timestamp format#$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat$template FileFormat,&quot;%TIMESTAMP:::date-rfc3339% %HOSTNAME% %syslogtag%%msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%\\n&quot;$ActionFileDefaultTemplate FileFormat 重启 rsyslog 服务 1service rsyslog restart 关于rsyslog日志格式的说明：http://www.rsyslog.com/doc/v8-stable/configuration/templates.html#reserved-template-names","categories":[],"tags":[]},{"title":"","slug":"Linux/postfix mail","date":"2018-05-19T06:12:38.000Z","updated":"2018-05-19T06:13:50.000Z","comments":true,"path":"2018/05/19/Linux/postfix mail/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/Linux/postfix mail/","excerpt":"","text":"Centos 7安装Postfix用于发送提醒邮件发布时间：2015-03-19 更新时间：2015-03-26 作者：boxwang 本文仅介绍Centos 7安装Postfix用于发送提醒邮件，并非搭建完整邮件服务器教程。 1. 卸载sendmail，没有安装sendmail的跳过 1yum remove sendmail 2. 安装 Postfix 1yum install postfix 3. 更改默认MTA为Postfix 1/usr/sbin/alternatives --set mta /usr/sbin/sendmail.postfix 4. 检查是否将MTA改为Postfix 1alternatives --display mta 5. 配置Postfix，修改main.cf 1vi /etc/postfix/main.cf 查找以下各项，去掉最前面的#，参考说明修改 1234567myhostname = www.ifshow.commydomain = ifshow.commyorigin = $mydomaininet_interfaces = allmydestination = $myhostname, localhost.$mydomain, localhost, $mydomainrelay_domains =home_mailbox = Maildir/ myhostname是服务器的主机名，mydomain是域名，myorigin定义邮箱后缀，inet_interfaces是指定使用的网络接口，relay_domains是转发域留空，home_mailbox是指定邮箱格式。 6. 启动Postfix并设为开机自启 12systemctl start postfix.servicesystemctl enable postfix.service 到此完成配置，其它服务已经能够通过postfix发送提醒邮件。由于只发邮件，所以防火墙不必开启POP3、SMTP等服务端口。","categories":[],"tags":[]},{"title":"","slug":"Linux/security/firewall-cmd","date":"2018-05-19T05:01:57.000Z","updated":"2018-05-19T05:03:16.000Z","comments":true,"path":"2018/05/19/Linux/security/firewall-cmd/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/Linux/security/firewall-cmd/","excerpt":"","text":"Fail2ban防御暴力破解密码fail2ban可以监视你的系统日志，然后匹配日志的错误信息（正则表达式匹配）执行相应的屏蔽动作（一般情况下是调用防火墙屏蔽）。比如有人在试探你的SSH、SMTP、FTP密码，只要达到你预设的次数，fail2ban就会调用防火墙屏蔽这个IP，而且可以发送e-mail通知系统管理员。 安装EPEL源 1yum -y install epel-release.noarch 安装支持firewalld的fail2ban 1yum -y install fail2ban-firewalld fail2ban-systemd 安装相关软件，让fail2ban可以通过postfix发送提醒邮件（可选） 安装配置postfix用于发送提醒邮件请点这里 123yum -y install postfix whois fail2ban-sendmailsystemctl enable postfixsystemctl start postfix 设定fail2ban 新建配置文件jail.local 1vi /etc/fail2ban/jail.local 输入以下内容后保存退出 12345678910111213[DEFAULT]bantime = 86400findtime = 300maxretry = 3sender = fail2ban@ifshow.comdestemail = admin@ifshow.comaction = %(action_mwl)s[sshd]enabled = trueport = 2345[sshd-ddos]enabled = trueport = 2345 bantime是被封IP禁止访问的时间，设定值为24小时，单位是秒。findtime是检测时间，在此时间内超过规定的次数会激活fail2ban，单位是秒。maxretry是允许错误登录的最大次数，和findtime配合使用。sender为邮件发送者，destemail为接收通知邮箱。action是触发fail2ban采取的动作，action_mwl为禁IP+发通知邮件+写入日志。sshd区块的enabled = true开启对SSH服务的防护，port为SSH的自定义端口。sshd-ddos区块的enabled = true开启SSH-DDOS防护，port为SSH的自定义端口。 如果装有vsftpd，在配置文件最后加上以下内容（port为vsftpd的登录和数据端口） 123[vsftpd]enabled = trueport = 2121,2122 启用fail2ban并设为开机自启 12systemctl enable fail2bansystemctl start fail2ban fail2ban常用命令 查看SSH服务监护状态，能看到当前被禁IP。 1fail2ban-client status sshd 在SSH监护服务忽略IP列表（白名单）中添加IP 192.168.111.111 1fail2ban-client set sshd addignoreip 192.168.111.111 在SSH监护服务忽略IP列表（白名单）中删除IP 192.168.111.111 1fail2ban-client set sshd delignoreip 192.168.111.111 查看fail2ban日志 1tail /var/log/fail2ban.log","categories":[],"tags":[]},{"title":"","slug":"Linux/firewall","date":"2018-05-19T03:52:09.000Z","updated":"2018-05-19T03:59:11.000Z","comments":true,"path":"2018/05/19/Linux/firewall/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/Linux/firewall/","excerpt":"","text":"firewall-cmd –permanent –zone=public –add-rich-rule=”rule family=”ipv4” source address=”180.151.83.30/24” service name=”ssh” reject” 123firewall-cmd --permanent --zone=public --add-rich-rule=&quot;rule family=&apos;ipv4&apos; source address=&apos;180.151.83.30/24&apos; port port=80 protocol=tcp reject&quot;firewall-cmd --reload `##重新加载防火墙配置，不然firewall-cmd –list-all-zones不会显示刚加上的规则`","categories":[],"tags":[]},{"title":"","slug":"TODOlist/2018-5-19","date":"2018-05-18T17:47:14.000Z","updated":"2018-08-09T11:49:34.000Z","comments":true,"path":"2018/05/19/TODOlist/2018-5-19/","link":"","permalink":"http://io.stelawliet.top/2018/05/19/TODOlist/2018-5-19/","excerpt":"","text":"MySQL procedure out inout MySQL variables MySQL 触发器 整理快速排序代码","categories":[],"tags":[]},{"title":"","slug":"MD/哔哩哔哩/补","date":"2018-05-18T14:14:08.000Z","updated":"2018-05-19T17:54:25.000Z","comments":true,"path":"2018/05/18/MD/哔哩哔哩/补/","link":"","permalink":"http://io.stelawliet.top/2018/05/18/MD/哔哩哔哩/补/","excerpt":"","text":"2017 少女终末旅行 Just Because 学员默示录 噬神者 魔弹之王与战姬","categories":[],"tags":[]},{"title":"补副本","slug":"MD/哔哩哔哩/补副本","date":"2018-05-18T14:14:08.000Z","updated":"2018-07-17T08:53:56.000Z","comments":true,"path":"2018/05/18/MD/哔哩哔哩/补副本/","link":"","permalink":"http://io.stelawliet.top/2018/05/18/MD/哔哩哔哩/补副本/","excerpt":"","text":"�� Just Because 学员默示录 噬神者 魔弹之王与战姬","categories":[],"tags":[]},{"title":"mysql procedure存储过程","slug":"sql/MySQL procedure 存储过程","date":"2018-05-18T13:25:20.000Z","updated":"2018-07-19T01:28:15.000Z","comments":true,"path":"2018/05/18/sql/MySQL procedure 存储过程/","link":"","permalink":"http://io.stelawliet.top/2018/05/18/sql/MySQL procedure 存储过程/","excerpt":"","text":"[TOC] procedure 存储过程create 语法年龄判断实例 12345678delimiter /create procedure fun1(in i int)begin select i;if i&gt;=18 then select &quot;adult&quot;;else select &quot;minor&quot;;end if;end / 调用语法12345678910111213141516171819202122232425262728293031323334call fun1(12);mysql&gt; CALL FUN1(12)/+------+| i |+------+| 12 |+------+1 row in set (0.01 sec)+-------+| minor |+-------+| minor |+-------+1 row in set (0.01 sec)Query OK, 0 rows affected (0.01 sec)mysql&gt; CALL FUN1(18)/+------+| i |+------+| 18 |+------+1 row in set (0.00 sec)+-------+| adult |+-------+| adult |+-------+1 row in set (0.00 sec)Query OK, 0 rows affected (0.00 sec) 传入参数in procedure内部可以接受括号里传递的变量或者直接的值 内部传入的变量修改后，外部的变量不改变。类似java函数基本数据类型的行参 12345678910111213141516171819202122232425262728293031323334353637mysql&gt; create procedure funin(in i int) -&gt; begin -&gt; select i; -&gt; set i =2; -&gt; select i; -&gt; end/Query OK, 0 rows affected (0.01 sec)mysql&gt; set @p_in =100; -&gt; call funin(@p_in);/Query OK, 0 rows affected (0.00 sec)+------+| i |+------+| 100 |+------+1 row in set (0.02 sec)+------+| i |+------+| 2 |+------+1 row in set (0.02 sec)Query OK, 0 rows affected (0.02 sec)mysql&gt; select @p_in/+-------+| @p_in |+-------+| 100 |+-------+1 row in set (0.00 sec)mysql&gt; out创建实例procedure testout 1234567mysql&gt; create procedure testout(out i int) -&gt; begin -&gt; select i; -&gt; set i =2; -&gt; select i; -&gt; end//Query OK, 0 rows affected (0.01 sec) procedure参数为out时，括号中传入的变量在过程内部为null。 1234567891011121314151617mysql&gt; set @out=99//Query OK, 0 rows affected (0.00 sec)mysql&gt; call testout(@out)//+------+| i |+------+| NULL |+------+1 row in set (0.01 sec)+------+| i |+------+| 2 |+------+1 row in set (0.01 sec)Query OK, 0 rows affected (0.01 sec) 对变量set后会改变外部传入的变量值 这里原本set @out=99 然后执行call testout(@out)后 1234567mysql&gt; select @out/+------+| @out |+------+| 2 |+------+1 row in set (0.00 sec) inout in 和out的结合 外部传入的参数可以得到 内部set后外部的值也改变 1234567891011121314151617181920212223242526272829303132333435mysql&gt; create procedure funinout(inout i int) &gt;begin &gt;select i; &gt;set i =2; &gt;select i; &gt;end/Query OK, 0 rows affected (0.01 sec)mysql&gt; set @p_inout=200; call funinout(@p_inout)/Query OK, 0 rows affected (0.00 sec)+------+| i |+------+| 200 |+------+1 row in set (0.02 sec)+------+| i |+------+| 2 |+------+1 row in set (0.02 sec)Query OK, 0 rows affected (0.02 sec)mysql&gt; select @p_inout/+----------+| @p_inout |+----------+| 2 |+----------+1 row in set (0.00 sec)mysql&gt; 声明变量在stored procedure存储过程中使用declare 关键字声明变量: DECLARE variable_name datatype(size) DEFAULT default_value; Let’s examine the statement above in more detail: First, you specify the variable name after the DECLARE keyword. The variable name must follow the naming rules of MySQL table column names. Second, you specify the data type of the variable and its size. A variable can have any MySQL data types such as INT, VARCHAR , and DATETIME. Third, when you declare a variable, its initial value is NULL. You can assign the variable a default value using the DEFAULTkeyword. For example, we can declare a variable named total_sale with the data type INT and default value 0 as follows: DECLARE total_sale INT DEFAULT 0; MySQL allows you to declare two or more variables that share the same data type using a single DECLARE statement as following: DECLARE x, y INT DEFAULT 0; We declared two integer variables x and y, and set their default values to zero. 分配值给变量Once you declared a variable, you can start using it. To assign a variable another value, you use the SET statement, for example: DECLARE total_count INT DEFAULT 0;SET total_count = 10; The value of the total_count variable is 10 after the assignment. Besides the SET statement, you can use the SELECT INTO statement to assign the result of a query, which returns a scalar value, to a variable. See the following example: DECLARE total_products INT DEFAULT 0 SELECT COUNT(*) INTO total_products FROM products In the example above: First, we declare a variable named total_products and initialize its value to 0. Then, we used the SELECT INTO statement to assign the total_products variable the number of products that we selected from the products table in the sample database. 123456789101112131415161718mysql&gt; select count(*) from tableFileUpload/+----------+| count(*) |+----------+| 17 |+----------+1 row in set (0.03 sec)mysql&gt; select count(*) into @p_no from tableFileUpload/Query OK, 1 row affected (0.01 sec)mysql&gt; select @p_no/+-------+| @p_no |+-------+| 17 |+-------+1 row in set (0.00 sec)","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"mysql","slug":"sql/mysql","permalink":"http://io.stelawliet.top/categories/sql/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://io.stelawliet.top/tags/mysql/"},{"name":"procedure","slug":"procedure","permalink":"http://io.stelawliet.top/tags/procedure/"},{"name":"存储过程","slug":"存储过程","permalink":"http://io.stelawliet.top/tags/存储过程/"}]},{"title":"mysql backup&export in shell","slug":"sql/mysql导入导出","date":"2018-05-18T02:58:08.000Z","updated":"2018-07-18T06:28:27.000Z","comments":true,"path":"2018/05/18/sql/mysql导入导出/","link":"","permalink":"http://io.stelawliet.top/2018/05/18/sql/mysql导入导出/","excerpt":"","text":"backup mysql databases in shelldumpmysqldump -h${IP} -u${username} -p ${password} ${db_name}&gt;${.sql_dir} db_name 多个时用空格分开 1➜ workspace mysqldump -hwww.stelawliet.top -uroot -p society_manage_db&gt; ~/workspace/society_manage_db.sql inputmysql -h${IP} -u${username} -p ${password} ${db_name}&lt;${.sql_dir} 1➜ workspace mysql -hca.stelawliet.top -uroot -p db_test&lt;society_manage_db.sql","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"mysql","slug":"sql/mysql","permalink":"http://io.stelawliet.top/categories/sql/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://io.stelawliet.top/tags/mysql/"},{"name":"backup","slug":"backup","permalink":"http://io.stelawliet.top/tags/backup/"},{"name":"export","slug":"export","permalink":"http://io.stelawliet.top/tags/export/"}]},{"title":"数据类型大小","slug":"Java/JavaSE/jdk1.8新特性/接口","date":"2018-05-16T10:07:59.000Z","updated":"2018-06-29T13:28:18.000Z","comments":true,"path":"2018/05/16/Java/JavaSE/jdk1.8新特性/接口/","link":"","permalink":"http://io.stelawliet.top/2018/05/16/Java/JavaSE/jdk1.8新特性/接口/","excerpt":"","text":"数据类型 类型 字节x8位 byte 1 short 2 int 4 long 8 float 4 double 8 char 2 boolean 1 面向对象 封装 private 私有只有本对象才能访问 对象的初始化 new 的过程 继承 多态","categories":[],"tags":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/tags/java/"}]},{"title":"","slug":"Vue/Untitled","date":"2018-05-15T16:32:31.000Z","updated":"2018-05-15T16:32:31.000Z","comments":true,"path":"2018/05/16/Vue/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/05/16/Vue/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"sql/mysql笔记","date":"2018-05-12T15:57:37.000Z","updated":"2018-05-12T15:57:51.000Z","comments":true,"path":"2018/05/12/sql/mysql笔记/","link":"","permalink":"http://io.stelawliet.top/2018/05/12/sql/mysql笔记/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"Linux/server/nginx/nginx负载均衡","date":"2018-05-12T14:33:57.000Z","updated":"2018-05-13T15:42:38.000Z","comments":true,"path":"2018/05/12/Linux/server/nginx/nginx负载均衡/","link":"","permalink":"http://io.stelawliet.top/2018/05/12/Linux/server/nginx/nginx负载均衡/","excerpt":"","text":"1234567891011upstream springboot &#123; server 127.0.0.1:7071 weight=1 max_fails=2 fail_timeout=30s; server 127.0.0.1:7072 weight=1 max_fails=2 fail_timeout=30s;&#125; server&#123; listen 7070; access_log /data/wwwlogs/7070_nginx.log combined; location / &#123; proxy_pass http://springboot; &#125; &#125;","categories":[],"tags":[]},{"title":"","slug":"sql/查询错误","date":"2018-05-12T14:33:36.000Z","updated":"2018-05-19T05:01:15.000Z","comments":true,"path":"2018/05/12/sql/查询错误/","link":"","permalink":"http://io.stelawliet.top/2018/05/12/sql/查询错误/","excerpt":"","text":"mysql语句过长PacketTooBigExceptioncom.mysql.jdbc.PacketTooBigException: Packet for query is too large (3158064） shell进入mysql set global max_allowed_packet = 2*1024*1024*10｀ 然后关闭连接 重新进入运行 show VARIABLES like &#39;%max_allowed_packet%&#39;; 查看下max_allowed_packet是否编辑成功 123456789101112131415mysql&gt; show VARIABLES like &apos;%max_allowed_packet%&apos;;+--------------------------+------------+| Variable_name | Value |+--------------------------+------------+| max_allowed_packet | 20971520 || slave_max_allowed_packet | 1073741824 |+--------------------------+------------+2 rows in set (0.17 sec)","categories":[],"tags":[]},{"title":"","slug":"Vue/Web Storage","date":"2018-05-12T07:19:28.000Z","updated":"2018-05-12T07:19:28.000Z","comments":true,"path":"2018/05/12/Vue/Web Storage/","link":"","permalink":"http://io.stelawliet.top/2018/05/12/Vue/Web Storage/","excerpt":"","text":"Web Storage：浏览器端数据储存机制来自《JavaScript 标准参考教程（alpha）》，by 阮一峰 目录 概述 操作方法 存入/读取数据 清除数据 遍历操作 storage事件 参考链接 概述这个API的作用是，使得网页可以在浏览器端储存数据。它分成两类：sessionStorage和localStorage。 sessionStorage保存的数据用于浏览器的一次会话，当会话结束（通常是该窗口关闭），数据被清空；localStorage保存的数据长期存在，下一次访问该网站的时候，网页可以直接读取以前保存的数据。除了保存期限的长短不同，这两个对象的属性和方法完全一样。 它们很像cookie机制的强化版，能够动用大得多的存储空间。目前，每个域名的存储上限视浏览器而定，Chrome是2.5MB，Firefox和Opera是5MB，IE是10MB。其中，Firefox的存储空间由一级域名决定，而其他浏览器没有这个限制。也就是说，在Firefox中，a.example.com和b.example.com共享5MB的存储空间。另外，与Cookie一样，它们也受同域限制。某个网页存入的数据，只有同域下的网页才能读取。 通过检查window对象是否包含sessionStorage和localStorage属性，可以确定浏览器是否支持这两个对象。 12345678910111213141516function checkStorageSupport() &#123; // sessionStorage if (window.sessionStorage) &#123; return true; &#125; else &#123; return false; &#125; // localStorage if (window.localStorage) &#123; return true; &#125; else &#123; return false; &#125;&#125; 操作方法存入/读取数据sessionStorage和localStorage保存的数据，都以“键值对”的形式存在。也就是说，每一项数据都有一个键名和对应的值。所有的数据都是以文本格式保存。 存入数据使用setItem方法。它接受两个参数，第一个是键名，第二个是保存的数据。 123sessionStorage.setItem(&quot;key&quot;,&quot;value&quot;);localStorage.setItem(&quot;key&quot;,&quot;value&quot;); 读取数据使用getItem方法。它只有一个参数，就是键名。 123var valueSession = sessionStorage.getItem(&quot;key&quot;);var valueLocal = localStorage.getItem(&quot;key&quot;); 清除数据removeItem方法用于清除某个键名对应的数据。 123sessionStorage.removeItem(&apos;key&apos;);localStorage.removeItem(&apos;key&apos;); clear方法用于清除所有保存的数据。 123sessionStorage.clear();localStorage.clear(); 遍历操作利用length属性和key方法，可以遍历所有的键。 123for(var i = 0; i &lt; localStorage.length; i++)&#123; console.log(localStorage.key(i));&#125; 其中的key方法，根据位置（从0开始）获得键值。 1localStorage.key(1); storage事件当储存的数据发生变化时，会触发storage事件。我们可以指定这个事件的回调函数。 1window.addEventListener(&quot;storage&quot;,onStorageChange); 回调函数接受一个event对象作为参数。这个event对象的key属性，保存发生变化的键名。 123function onStorageChange(e) &#123; console.log(e.key);&#125; 除了key属性，event对象的属性还有三个： oldValue：更新前的值。如果该键为新增加，则这个属性为null。 newValue：更新后的值。如果该键被删除，则这个属性为null。 url：原始触发storage事件的那个网页的网址。 值得特别注意的是，该事件不在导致数据变化的当前页面触发。如果浏览器同时打开一个域名下面的多个页面，当其中的一个页面改变 localStorage 的数据时，其他所有页面的storage事件会被触发，而原始页面并不触发storage事件。可以通过这种机制，实现多个窗口之间的通信。所有浏览器之中，只有 IE 浏览器除外，它会在所有页面触发storage事件。 参考链接 Ryan Stewart，Introducing the HTML5 storage APIs Getting Started with LocalStorage Feross Aboukhadijeh, Introducing the HTML5 Hard Disk Filler™ API Ben Summers, Inter-window messaging using localStorage Stack Overflow, Why does Internet Explorer fire the window “storage” event on the window that stored the data?","categories":[],"tags":[]},{"title":"","slug":"Vue/storage","date":"2018-05-12T07:18:50.000Z","updated":"2018-05-12T07:19:04.000Z","comments":true,"path":"2018/05/12/Vue/storage/","link":"","permalink":"http://io.stelawliet.top/2018/05/12/Vue/storage/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"MD/论文/springboot","date":"2018-05-06T16:50:22.000Z","updated":"2018-05-06T16:50:40.000Z","comments":true,"path":"2018/05/07/MD/论文/springboot/","link":"","permalink":"http://io.stelawliet.top/2018/05/07/MD/论文/springboot/","excerpt":"","text":"Spring Framework 是一个开源的Java／Java EE全功能栈（full-stack）的应用程序框架，以Apache License 2.0开源许可协议的形式发布，也有.NET平台上的移植版本。该框架基于 Expert One-on-One Java EE Design and Development（ISBN 0-7645-4385-7）一书中的代码，最初由Rod Johnson和Juergen Hoeller等开发。Spring Framework提供了一个简易的开发方式，这种开发方式，将避免那些可能致使底层代码变得繁杂混乱的大量的属性文件和帮助类。 Spring框架是一个开源的Java/ Java EE全栈应用程序框架，作为Apache License 2.0开源许可证分发，以及.NET平台的可移植版本。 该框架基于专业一对一Java EE设计和开发代码书（0-7645-4385-7 ISBN），最初由Rod Johnson，Juergen Hoeller开发。 Spring框架提供了一种简单的开发方法。这种开发将避免大量的属性文件和助手类，这可能会导致底层代码变得令人困惑。 Spring中包含的关键特性 强大的基于JavaBeans的采用控制反转（Inversion of Control，IoC）原则的配置管理，使得应用程序的组建更加快捷简易。一个可用于Java EE等运行环境的核心Bean工厂。数据库事务的一般化抽象层，允许声明式（Declarative）事务管理器，简化事务的划分使之与底层无关。内建的针对JTA和单个JDBC数据源的一般化策略，使Spring的事务支持不要求Java EE环境，这与一般的JTA或者EJBCMT相反。JDBC 抽象层提供了有针对性的异常等级（不再从SQL异常中提取原始代码），简化了错误处理，大大减少了程序员的编码量。再次利用JDBC时，你无需再写出另一个’终止’（finally）模块。并且面向JDBC的异常与Spring通用数据访问对象（Data Access Object）异常等级相一致。以资源容器，DAO实现和事务策略等形式与Hibernate，JDO和MyBatis、SQL Maps集成。利用众多的翻转控制方便特性来全面支持，解决了许多典型的Hibernate集成问题。所有这些全部遵从 Spring 通用事务处理和通用数据访问对象异常等级规范。灵活的基于核心 Spring 功能的MVC网页应用程序框架。开发者通过策略接口将拥有对该框架的高度控制，因而该框架将适应于多种呈现（View）技术，例如JSP、FreeMarker、Velocity、Thymeleaf 等。值得注意的是，Spring 中间层可以轻易地结合于任何基于MVC框架的网页层，例如Struts、WebWork或Tapestry。提供诸如事务管理等服务的AOP框架。在设计应用程序 Model 时，MVC模式（例如Struts）通常难于给出一个简洁明了的框架结构。Spring 却具有能够让这部分工作变得简单的能力。程序开发员们可以使用Spring的JDBC抽象层重新设计那些复杂的框架结构。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/api","date":"2018-05-06T15:29:15.000Z","updated":"2018-05-06T15:57:54.000Z","comments":true,"path":"2018/05/06/MD/论文/api/","link":"","permalink":"http://io.stelawliet.top/2018/05/06/MD/论文/api/","excerpt":"","text":"[/society/activity],methods=[POST] [/society/activity],methods=[PUT] [/society/activity/{id}],methods=[DELETE] [/society/activity],methods=[GET] [/society/activity/{id}],methods=[GET] [/society/user/register],methods=[POST] [/society/user/login],methods=[POST] Mapped “{[/society/activity],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyActivityController.add(com.company.project.model.SocietyActivity)2018-05-06 23:28:20.478 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/activity],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyActivityController.update(com.company.project.model.SocietyActivity)2018-05-06 23:28:20.479 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/activity/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyActivityController.delete(java.lang.Integer)2018-05-06 23:28:20.479 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/activity],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyActivityController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.480 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/activity/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyActivityController.detail(java.lang.Integer)2018-05-06 23:28:20.483 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/category],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyCategoryController.add(com.company.project.model.SocietyCategory)2018-05-06 23:28:20.483 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/category],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyCategoryController.update(com.company.project.model.SocietyCategory)2018-05-06 23:28:20.483 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/category/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyCategoryController.delete(java.lang.Integer)2018-05-06 23:28:20.484 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/category],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyCategoryController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.484 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/category/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyCategoryController.detail(java.lang.Integer)2018-05-06 23:28:20.486 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/comment],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyCommentController.add(com.company.project.model.SocietyComment)2018-05-06 23:28:20.487 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/comment],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyCommentController.update(com.company.project.model.SocietyComment)2018-05-06 23:28:20.487 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/comment/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyCommentController.delete(java.lang.Integer)2018-05-06 23:28:20.487 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/comment],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyCommentController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.488 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/comment/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyCommentController.detail(java.lang.Integer)2018-05-06 23:28:20.490 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/societyex/list],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyExController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.491 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/societyex/list/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyExController.list(java.lang.Integer)2018-05-06 23:28:20.491 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/societyex/user/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyExController.users(java.lang.Integer)2018-05-06 23:28:20.492 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/societyex/user],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyExController.users(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.495 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/info],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyInfoController.add(com.company.project.model.SocietyInfo)2018-05-06 23:28:20.495 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/info],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyInfoController.update(com.company.project.model.SocietyInfo)2018-05-06 23:28:20.495 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/info/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyInfoController.delete(java.lang.Integer)2018-05-06 23:28:20.496 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/info],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyInfoController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.496 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/info/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyInfoController.detail(java.lang.Integer)2018-05-06 23:28:20.500 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/member],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyMemberController.add(com.company.project.model.SocietyMember)2018-05-06 23:28:20.517 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/member],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyMemberController.update(com.company.project.model.SocietyMember)2018-05-06 23:28:20.518 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/member/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyMemberController.delete(java.lang.Integer)2018-05-06 23:28:20.518 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/member],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyMemberController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.519 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/member/{id}],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyMemberController.detail(java.lang.Integer)2018-05-06 23:28:20.529 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyUserController.add(com.company.project.model.SocietyUser)2018-05-06 23:28:20.529 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user/register],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.SocietyUserController.register(com.company.project.model.SocietyUser)2018-05-06 23:28:20.530 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user],methods=[PUT]}” onto public com.company.project.core.Result com.company.project.web.SocietyUserController.update(com.company.project.model.SocietyUser)2018-05-06 23:28:20.530 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user/{id}],methods=[DELETE]}” onto public com.company.project.core.Result com.company.project.web.SocietyUserController.delete(java.lang.Integer)2018-05-06 23:28:20.531 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user],methods=[GET]}” onto public com.company.project.core.Result com.company.project.web.SocietyUserController.list(java.lang.Integer,java.lang.Integer)2018-05-06 23:28:20.532 INFO 35837 — [ main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/society/user/login],methods=[POST]}” onto public com.company.project.core.Result com.company.project.web.So","categories":[],"tags":[]},{"title":"","slug":"MD/论文/ＥＳ６","date":"2018-05-06T09:25:15.000Z","updated":"2018-05-06T09:32:39.000Z","comments":true,"path":"2018/05/06/MD/论文/ＥＳ６/","link":"","permalink":"http://io.stelawliet.top/2018/05/06/MD/论文/ＥＳ６/","excerpt":"","text":"ECMAScript 的历史ECMAScript 1.0 是 1997 年发布的，接下来的两年，连续发布了 ECMAScript 2.0（1998 年 6 月）和 ECMAScript 3.0（1999 年 12 月）。3.0 版是一个巨大的成功，在业界得到广泛支持，成为通行标准，奠定了 JavaScript 语言的基本语法，以后的版本完全继承。直到今天，初学者一开始学习 JavaScript，其实就是在学 3.0 版的语法。 2000 年，ECMAScript 4.0 开始酝酿。这个版本最后没有通过，但是它的大部分内容被 ES6 继承了。因此，ES6 制定的起点其实是 2000 年。 为什么 ES4 没有通过呢？因为这个版本太激进了，对 ES3 做了彻底升级，导致标准委员会的一些成员不愿意接受。ECMA 的第 39 号技术专家委员会（Technical Committee 39，简称 TC39）负责制订 ECMAScript 标准，成员包括 Microsoft、Mozilla、Google 等大公司。 2007 年 10 月，ECMAScript 4.0 版草案发布，本来预计次年 8 月发布正式版本。但是，各方对于是否通过这个标准，发生了严重分歧。以 Yahoo、Microsoft、Google 为首的大公司，反对 JavaScript 的大幅升级，主张小幅改动；以 JavaScript 创造者 Brendan Eich 为首的 Mozilla 公司，则坚持当前的草案。 2008 年 7 月，由于对于下一个版本应该包括哪些功能，各方分歧太大，争论过于激烈，ECMA 开会决定，中止 ECMAScript 4.0 的开发，将其中涉及现有功能改善的一小部分，发布为 ECMAScript 3.1，而将其他激进的设想扩大范围，放入以后的版本，由于会议的气氛，该版本的项目代号起名为 Harmony（和谐）。会后不久，ECMAScript 3.1 就改名为 ECMAScript 5。 2009 年 12 月，ECMAScript 5.0 版正式发布。Harmony 项目则一分为二，一些较为可行的设想定名为 JavaScript.next 继续开发，后来演变成 ECMAScript 6；一些不是很成熟的设想，则被视为 JavaScript.next.next，在更远的将来再考虑推出。TC39 委员会的总体考虑是，ES5 与 ES3 基本保持兼容，较大的语法修正和新功能加入，将由 JavaScript.next 完成。当时，JavaScript.next 指的是 ES6，第六版发布以后，就指 ES7。TC39 的判断是，ES5 会在 2013 年的年中成为 JavaScript 开发的主流标准，并在此后五年中一直保持这个位置。 2011 年 6 月，ECMAscript 5.1 版发布，并且成为 ISO 国际标准（ISO/IEC 16262:2011）。 2013 年 3 月，ECMAScript 6 草案冻结，不再添加新功能。新的功能设想将被放到 ECMAScript 7。 2013 年 12 月，ECMAScript 6 草案发布。然后是 12 个月的讨论期，听取各方反馈。 2015 年 6 月，ECMAScript 6 正式通过，成为国际标准。从 2000 年算起，这时已经过去了 15 年。 async函数返回一个 Promise 对象，可以使用then方法添加回调函数。当函数执行的时候，一旦遇到await就会先返回，等到异步操作完成，再接着执行函数体内后面的语句。 异步所谓”异步”，简单说就是一个任务分成两段，先执行第一段，然后转而执行其他任务，等做好了准备，再回过头执行第二段。 比如，有一个任务是读取文件进行处理，任务的第一段是向操作系统发出请求，要求读取文件。然后，程序执行其他任务，等到操作系统返回文件，再接着执行任务的第二段（处理文件）。这种不连续的执行，就叫做异步。 相应地，连续的执行就叫做同步。由于是连续执行，不能插入其他任务，所以操作系统从硬盘读取文件的这段时间，程序只能干等着。 （1）内置执行器。Generator函数的执行必须靠执行器，所以才有了co模块，而async函数自带执行器。也就是说，async函数的执行，与普通函数一模一样，只要一行。 1var result = asyncReadFile(); 上面的代码调用了asyncReadFile函数，然后它就会自动执行，输出最后结果。这完全不像Generator函数，需要调用next方法，或者用co模块，才能得到真正执行，得到最后结果。 （2）更好的语义。async和await，比起星号和yield，语义更清楚了。async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。 （3）更广的适用性。 co模块约定，yield命令后面只能是Thunk函数或Promise对象，而async函数的await命令后面，可以是Promise对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）。 （4）返回值是Promise。async函数的返回值是Promise对象，这比Generator函数的返回值是Iterator对象方便多了。你可以用then方法指定下一步的操作。 进一步说，async函数完全可以看作多个异步操作，包装成的一个Promise对象，而await命令就是内部then命令的语法糖。 Promise 在 JavaScript 上发布之初就在互联网上流行了起来 — 它们帮开发人员摆脱了回调地狱，解决了在很多地方困扰 JavaScript 开发者的异步问题。但 Promises 也远非完美。它们一直请求回调，在一些复杂的问题上仍会有些杂乱和一些难以置信的冗余。 随着 ES6 的到来（现在被称作 ES2015），除了引入 Promise 的规范，不需要请求那些数不尽的库之外，我们还有了生成器。生成器可在函数内部停止执行，这意味着可把它们封装在一个多用途的函数中，我们可在代码移动到下一行之前等待异步操作完成。突然你的异步代码可能就开始看起来同步了。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/mybatis","date":"2018-05-05T15:03:27.000Z","updated":"2018-05-05T15:06:54.000Z","comments":true,"path":"2018/05/05/MD/论文/mybatis/","link":"","permalink":"http://io.stelawliet.top/2018/05/05/MD/论文/mybatis/","excerpt":"","text":"MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML 或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Old Java Objects,普通的 Java对象)映射成数据库中的记录。 每个基于 MyBatis 的应用都是以一个 SqlSessionFactory 的实例为中心的。SqlSessionFactory 的实例可以通过 SqlSessionFactoryBuilder 获得。而 SqlSessionFactoryBuilder 则可以从 XML 配置文件或一个预先定制的 Configuration 的实例构建出 SqlSessionFactory 的实例。 既然有了 SqlSessionFactory ，顾名思义，我们就可以从中获得 SqlSession 的实例了。SqlSession 完全包含了面向数据库执行 SQL 命令所需的所有方法。你可以通过 SqlSession 实例来直接执行已映射的 SQL 语句。 与其他的对象关系映射框架不同，MyBatis并没有将Java对象)与数据库表关联起来，而是将Java方法与SQL语句关联。MyBatis允许用户充分利用数据库的各种功能，例如存储过程、视图、各种复杂的查询以及某数据库的专有特性。如果要对遗留数据库、不规范的数据库进行操作，或者要完全控制SQL的执行，MyBatis是一个不错的选择。 与JDBC相比，MyBatis简化了相关代码：SQL语句在一行代码中就能执行。MyBatis提供了一个映射引擎，声明式的把SQL语句执行结果与对象树映射起来。通过使用一种内建的类XML表达式语言，或者使用Apache Velocity集成的插件，SQL语句可以被动态的生成。 MyBatis与Spring Framework和Google Guice集成，这使开发者免于依赖性问题。 MyBatis支持声明式数据缓存（declarative data caching）。当一条SQL语句被标记为“可缓存”后，首次执行它时从数据库获取的所有数据会被存储在一段高速缓存中，今后执行这条语句时就会从高速缓存中读取结果，而不是再次命中数据库。MyBatis提供了基于 Java HashMap 的默认缓存实现，以及用于与OSCache、Ehcache、Hazelcast和Memcached连接的默认连接器。MyBatis还提供API供其他缓存实现使用。 https://zh.wikipedia.org/wiki/MyBatis MyBatis[编辑]维基百科，自由的百科全书 原理详解： ​ MyBatis应用程序根据XML配置文件创建SqlSessionFactory，SqlSessionFactory在根据配置，配置来源于两个地方，一处是配置文件，一处是Java代码的注解，获取一个SqlSession。SqlSession包含了执行sql所需要的所有方法，可以通过SqlSession实例直接运行映射的sql语句，完成对数据的增删改查和事务提交等，用完之后关闭SqlSession。 MyBatis的优缺点优点：1、简单易学 ​ mybatis本身就很小且简单。没有任何第三方依赖，最简单安装只要两个jar文件+配置几个sql映射文件易于学习，易于使用，通过文档和源代码，可以比较完全的掌握它的设计思路和实现。 2、灵活 ​ mybatis不会对应用程序或者数据库的现有设计强加任何影响。 sql写在xml里，便于统一管理和优化。通过sql基本上可以实现我们不使用数据访问框架可以实现的所有功能，或许更多。 3、解除sql与程序代码的耦合 ​ 通过提供DAL层，将业务逻辑和数据访问逻辑分离，使系统的设计更清晰，更易维护，更易单元测试。sql和代码的分离，提高了可维护性。 4、提供映射标签，支持对象与数据库的orm字段关系映射 5、提供对象关系映射标签，支持对象关系组建维护 6、提供xml标签，支持编写动态sql。 缺点：1、编写SQL语句时工作量很大，尤其是字段多、关联表多时，更是如此。 2、SQL语句依赖于数据库，导致数据库移植性差，不能更换数据库。 3、框架还是比较简陋，功能尚有缺失，虽然简化了数据绑定代码，但是整个底层数据库查询实际还是要自己写的，工作量也比较大，而且不太容易适应快速数据库修改。 4、二级缓存机制不佳","categories":[],"tags":[]},{"title":"","slug":"MD/论文/springmvc","date":"2018-05-05T15:02:31.000Z","updated":"2018-05-05T15:03:35.000Z","comments":true,"path":"2018/05/05/MD/论文/springmvc/","link":"","permalink":"http://io.stelawliet.top/2018/05/05/MD/论文/springmvc/","excerpt":"","text":"SpringMVC就是通过DispatcherServlet将一堆组件串联起来的Web框架。 Spring MVC属于SpringFrameWork的后续产品，已经融合在Spring Web Flow里面。 Spring 框架提供了构建 Web 应用程序的全功能 MVC 模块。使用 Spring 可插入的 MVC 架构，可以选择是使用内置的 Spring Web 框架还是 Struts 这样的 Web 框架。通过策略接口，Spring 框架是高度可配置的，而且包含多种视图技术，例如 JavaServer Pages（JSP）技术、Velocity、Tiles、iText 和 POI。Spring MVC 框架并不知道使用的视图，所以不会强迫您只使用 JSP 技术。Spring MVC 分离了控制器、模型对象、分派器以及处理程序对象的角色，这种分离让它们更容易进行定制 Spring的MVC框架主要由DispatcherServlet、处理器映射、处理器(控制器)、视图解析器、视图组成。 SpringMVC原理图[ img](http://7xqch5.com1.z0.glb.clouddn.com/springmvc2_1.jpg) SpringMVC接口解释DispatcherServlet接口：Spring提供的前端控制器，所有的请求都有经过它来统一分发。在DispatcherServlet将请求分发给Spring Controller之前，需要借助于Spring提供的HandlerMapping定位到具体的Controller。 HandlerMapping接口：能够完成客户请求到Controller映射。 Controller接口：需要为并发用户处理上述请求，因此实现Controller接口时，必须保证线程安全并且可重用。 Controller将处理用户请求，这和Struts Action扮演的角色是一致的。一旦Controller处理完用户请求，则返回ModelAndView对象给DispatcherServlet前端控制器，ModelAndView中包含了模型（Model）和视图（View）。 从宏观角度考虑，DispatcherServlet是整个Web应用的控制器；从微观考虑，Controller是单个Http请求处理过程中的控制器，而ModelAndView是Http请求过程中返回的模型（Model）和视图（View）。 ViewResolver接口：Spring提供的视图解析器（ViewResolver）在Web应用中查找View对象，从而将相应结果渲染给客户。 SpringMVC运行原理 客户端请求提交到DispatcherServlet 由DispatcherServlet控制器查询一个或多个HandlerMapping，找到处理请求的Controller DispatcherServlet将请求提交到Controller Controller调用业务逻辑处理后，返回ModelAndView DispatcherServlet查询一个或多个ViewResoler视图解析器，找到ModelAndView指定的视图 视图负责将结果显示到客户端 DispatcherServlet是整个Spring MVC的核心。它负责接收HTTP请求组织协调Spring MVC的各个组成部分。其主要工作有以下三项： 截获符合特定格式的URL请求。 初始化DispatcherServlet上下文对应的WebApplicationContext，并将其与业务层、持久化层的WebApplicationContext建立关联。 初始化Spring MVC的各个组成组件，并装配到DispatcherServlet中。","categories":[],"tags":[]},{"title":"","slug":"Linux/ssh/mosh","date":"2018-05-05T13:29:40.000Z","updated":"2018-05-05T13:29:40.000Z","comments":true,"path":"2018/05/05/Linux/ssh/mosh/","link":"","permalink":"http://io.stelawliet.top/2018/05/05/Linux/ssh/mosh/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"MD/论文/前后分离","date":"2018-05-04T15:50:08.000Z","updated":"2018-05-04T15:52:19.000Z","comments":true,"path":"2018/05/04/MD/论文/前后分离/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/前后分离/","excerpt":"","text":"实现前后端分离的心得对目前的web来说，前后端分离已经变得越来越流行了，越来越多的企业/网站都开始往这个方向靠拢。那么，为什么要选择前后端分离呢？前后端分离对实际开发有什么好处呢? 为什么选择前后端分离 在以前传统的网站开发中，前端一般扮演的只是切图的工作，只是简单地将UI设计师提供的原型图实现成静态的HTML页面，而具体的页面交互逻辑，比如与后台的数据交互工作等，可能都是由后台的开发人员来实现的，或者是前端是紧紧的耦合后台。比如，以前淘宝的Web基本上都是基于MVC框架webx，架构决定了前端只能依赖后端。所以他们的开发模式依然是，前端写好静态demo，后端翻译成VM模版，这种模式的问题就不说了，被吐槽了很久。 而且更有可能后台人员直接兼顾前端的工作，一边实现API接口，一边开发页面，两者互相切换着做，而且根据不同的url动态拼接页面，这也导致后台的开发压力大大增加。前后端工作分配不均。不仅仅开发效率慢，而且代码难以维护。而前后端分离的话，则可以很好的解决前后端分工不均的问题，将更多的交互逻辑分配给前端来处理，而后端则可以专注于其本职工作，比如提供API接口，进行权限控制以及进行运算工作。而前端开发人员则可以利用nodejs来搭建自己的本地服务器，直接在本地开发，然后通过一些插件来将api请求转发到后台，这样就可以完全模拟线上的场景，并且与后台解耦。前端可以独立完成与用户交互的整一个过程，两者都可以同时开工，不互相依赖，开发效率更快，而且分工比较均衡。 如何做到前后端分离(以下的内容都是基于我们的电影购票网站来讨论的)前端的技术框架是: vue全家桶+nodejs+express(实现的是单页面(SPA)应用)首先，先分清楚前后端的工作 前端的工作：实现整一个前端页面以及交互逻辑，以及利用ajax与nodejs服务器（中间层)交互 后端的工作：提供API接口，利用redis来管理session,与数据库交互 SPA是什么？ 全称是单页面应用。 一个SPA就是一个WEB应用，它所需的资源(HTML CSS JS等)，在一次请求中就加载完成，也就是不需刷新地动态加载。 用术语“单页”就是因为页面在初始化加载后就永远不会重新加载刷新。 优点 减轻服务器端的压力。 因为服务器先将一份包含了静态资源、JavsScript和模板的静荷数据(payload)发送到了客户端，之后客户端只需要获取渲染页面或视图所需要的数据即可。payload就是起关键作用的资源 提高了页面的渲染效果。 由于移动设备的流行，可以开发提供JSON格式数据的网络服务，然后可以提供不同的客户端使用。 SPA的使用，我们可以使用一个HTTP API，一个HTTP API相比在服务端渲染一个HTML页面有诸多好处，这样就可以很方便的进行单元测试等操作，还可以被其他很多客户端程序所用。 SPA最大的好处就是大量的工作都在浏览器中完成，服务端承担更少的工作，这样就可以处理更多的请求。同时SPA需要额外的请求模版开销，我们可以通过预编译模版、缓存机制和将多个模板拼接成一个大的模板来减少请求数量。 缺点 首屏加载时间会很长。 SEO不友好。 主要是因为SPA利用了hash片段实现路由，而利用hash片段不会作为HTTP请求中的一部分发送给服务器。 而SPA使用hash片段的目的是：当片段的内容发送变化时，浏览器不会像URI发送变化时那样发起新的网络请求。这样就可以只请求页面或视图渲染所需要的数据，而不是为每一个页面获取并解析整份文档。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/vue1","date":"2018-05-04T15:44:12.000Z","updated":"2018-05-04T15:44:56.000Z","comments":true,"path":"2018/05/04/MD/论文/vue1/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/vue1/","excerpt":"","text":"从javascript发展说到vue 收藏;) goodman_fz 发表于 10个月前 阅读 812 收藏 41 点赞 4 评论 3 Vue是基于javascript的一套MVVC前端框架，在介绍vue之前有必要先大体介绍下javascript产生背景及发展的历史痕迹、前端MVVC模式等，以便于大家更好的理解为什么会有vue/react等框架的出现。 1.1 javascript发展概要及MVVC模式 【Web刚起步阶段】 那会，只有可怜的HTML（超文本标记语言（HyerText Markup Language）），浏览器请求某个URL时，web服务器就把对应的html文件返回给浏览器，浏览器做解析后展示给用户。随着时间推移，为了给能不同用户展示不同的页面信息，就慢慢发展出来基于服务器的可动态生成html的语言，比如asp、php、jsp等。 但是，当浏览器接收到一个html后，如果要更新页面的内容，就只能重新向服务器请求获取一份新的html文件，即刷新页面。在那古老的2G的流量珍贵的年代，这种体验是很容易让人奔溃的，而且还浪费流量。 【进入javascript阶段】 还好，聪明的前辈们在1995年底，在浏览器中引入了javascript。Javascript是一种脚本语言，浏览器中带有javascript引擎，用于解析并执行javascript代码，然后就可以在客户端操作到html页面中的DOM，这样就解决了不刷新页面情况，动态的改变用户html页面的内容。再后来，大家发现编写原生的javascript代码太繁琐了，还需要记住各种晦涩难懂的API，最重要还需要考虑各种浏览器的兼容性，其实是因为“懒”，就出现了一个救世主jQuery，并很快的占领了javascript世界，几乎成为前端开发标配。 例如 获取某个元素节点内容 原生写法：document.getElementById(‘name’).innerHTML(); jQuery写法：$(‘name’).html(); 【学习后端MVC模式】 事间万物往往都很难抵抗时间的洗礼，javascript也不例外，她也渐渐显现出各种不和谐：组织代码混乱、业务与操作DOM杂合，所以为她引入并改造了后端的MVC模式。 javascript前端MVC模式，需要服务器端配合，JavaScript可以在前端修改服务器渲染后的数据，简单来说即提交一次反馈一次。 例如：提交表单 填写内容 → 点击提交 →业务逻辑处理 →存入数据库 → 刷新页面→服务器取数据库数据→渲染到客户端页面→ 展示上一次你提交的内容。 MVC概念释疑： 视图（View）：用户界面。控制器（Controller）：业务逻辑模型（Model）：数据保存 View 传送指令到 Controller；Controller 完成业务逻辑后，要求 Model 改变状态；Model 将新的数据发送到 View，用户得到反馈。数据流，如图： img 但可惜，他并不没想象那么美，那么这种模式有哪些缺点？（注：以下缺点网上总结的，说的挺对，引用） 缺点一： ​ 它必须等待服务器端的指示，而且如果是异步模式的话，所有html节点、数据、页面结构都是后端请求过来。 浏览器只作为一个解析显示容器，Model 作用几乎是废x，Model 层面做的很少几乎前端无法控制，你前端几乎是切图仔和做轮播图的工作 缺点二： ​ 因为你前端渲染的页面结构，几乎是后端服务器包扎一堆数据一起发送过来，前端的你只需要用拼接字符串 或者字符串拼接引擎 比如Mustache、Jade、artTemplate、tmpl、kissyTemplate、ejs等来做事，说白了纯苦力和重复工作居多，这也导致了，如果很多人认为前端并不重要，只负责美工 和 动作体验就好了。 缺点三： ​ 一发而动全身。数据、显示不分离！为什么这么说，因为如果业务逻辑要变，比如很简单的需求，你用jsp或者php 拼接出来的ajax数据页面，年龄这个字段我不需要了，把性别字段 区分开，男的单独显示，女的单独显示，以前是一起显示到一个表的 【MVVC阶段】 没错，说那么多缺点，就为了最后的MVVC模式，为何MVVC模式？ MVVC模式是基于数据驱动，她把Model用纯javascript对象来表示，View负责显示，达到两者分离： 1、它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然,model数据的变动，也自动展示给页面显示2、把Model和View关联起来的就是ViewModel。ViewModel负责把Model的数据同步到View显示出来，还负责把View的修改同步回Model。 数据流向变为，如图： img 与之前MVC的主要差别点在于，MVC你需要操作DOM及javascript对象来改变前端数据，MVVC你只需操作javascript对象即可改变前端数据。这也是MVVM的核心思想：关注Model的变化，让MVVM框架利用自己的机制去自动更新DOM，从而把开发者从操作DOM的繁琐中解脱出来！也就是数据-视图分离，数据驱动视图，视图不影响数据。 当今世上常见的MVVC框架有：vuejs、Angularjs、reactjs等等（想了解更多，见教程后面的对比分析） 【那么vue来了】 好了，大家应该对javascript发展及MVVM模式有一个大体的了解，现在转到vue，说下vue是一个什么东西？ ​ 官方文档介绍：是一套构建用户界面的渐进式框架**，**Vue 采用自底向上增量开发的设计，Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。 ​ 个人实践后对vue的理解：vue是一套构建前端的MVVM框架，它集合了众多优秀主流框架设计及思想，轻量、数据驱动（默认单向数据绑定，但也提供支持双向数据绑定）、学习成本低，且可与webpack/gulp构建工具结合实现web组件化开发、构建部署等；很庆幸，我们生在开源遍地的时代，vue本身就拥有一套较为成熟的生态系统：vue+vue-router+vuex+webpack+sass/less，不仅满足小的前端项目开发，也完全胜任开发大型的前端应用，包括单页面应用和多页面应用等，它可实现前端页面前后端业务分离、快速开发（因为很多组件供调用）、单元测试、构建优化（结合webpack自动打包构建、优化）、部署等。瞬间提升前端开发人员的逼格，当后端开发再鄙视前端简单时，你就可以让他来试试了。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/json","date":"2018-05-04T15:38:09.000Z","updated":"2018-05-05T15:02:36.000Z","comments":true,"path":"2018/05/04/MD/论文/json/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/json/","excerpt":"","text":"JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。 JSON建构于两种结构： “名称/值”对的集合（A collection of name/value pairs）。不同的语言中，它被理解为对象（object），纪录（record），结构（struct），字典（dictionary），哈希表（hash table），有键列表（keyed list），或者关联数组 （associative array）。 值的有序列表（An ordered list of values）。在大部分语言中，它被理解为数组（array）。 这些都是常见的数据结构。事实上大部分现代计算机语言都以某种形式支持它们。这使得一种数据格式在同样基于这些结构的编程语言之间交换成为可能。 JSON具有以下这些形式： 对象是一个无序的“‘名称/值’对”集合。一个对象以“{”（左括号）开始，“}”（右括号）结束。每个“名称”后跟一个“:”（冒号）；“‘名称/值’ 对”之间使用“,”（逗号）分隔。 Spring Framework 是一个开源的Java／Java EE全功能栈（full-stack）的应用程序框架，以Apache License 2.0开源许可协议的形式发布，也有.NET平台上的移植版本。该框架基于 Expert One-on-One Java EE Design and Development（ISBN 0-7645-4385-7）一书中的代码，最初由Rod Johnson和Juergen Hoeller等开发。Spring Framework提供了一个简易的开发方式，这种开发方式，将避免那些可能致使底层代码变得繁杂混乱的大量的属性文件和帮助类。 Spring中包含的关键特性 强大的基于JavaBeans的采用控制反转（Inversion of Control，IoC）原则的配置管理，使得应用程序的组建更加快捷简易。一个可用于Java EE等运行环境的核心Bean工厂。数据库事务的一般化抽象层，允许声明式（Declarative）事务管理器，简化事务的划分使之与底层无关。内建的针对JTA和单个JDBC数据源的一般化策略，使Spring的事务支持不要求Java EE环境，这与一般的JTA或者EJB CMT相反。JDBC 抽象层提供了有针对性的异常等级（不再从SQL异常中提取原始代码），简化了错误处理，大大减少了程序员的编码量。再次利用JDBC时，你无需再写出另一个’终止’（finally）模块。并且面向JDBC的异常与Spring通用数据访问对象（Data Access Object）异常等级相一致。以资源容器，DAO实现和事务策略等形式与Hibernate，JDO和MyBatis、SQL Maps集成。利用众多的翻转控制方便特性来全面支持，解决了许多典型的Hibernate集成问题。所有这些全部遵从 Spring 通用事务处理和通用数据访问对象异常等级规范。灵活的基于核心 Spring 功能的MVC网页应用程序框架。开发者通过策略接口将拥有对该框架的高度控制，因而该框架将适应于多种呈现（View）技术，例如JSP、FreeMarker、Velocity、Thymeleaf 等。值得注意的是，Spring 中间层可以轻易地结合于任何基于MVC框架的网页层，例如Struts、WebWork或Tapestry。提供诸如事务管理等服务的AOP框架。在设计应用程序 Model 时，MVC模式（例如Struts）通常难于给出一个简洁明了的框架结构。Spring 却具有能够让这部分工作变得简单的能力。程序开发员们可以使用Spring的JDBC抽象层重新设计那些复杂的框架结构。 boot 没有比较就没有伤害，让我们先看看传统Spring MVC开发一个简单的Hello World Web应用程序，你应该做什么，我能想到一些基本的需求。 一个项目结构，其中有一个包含必要依赖的Maven或者Gradle构建文件，最起码要有Spring MVC和Servlet API这些依赖。 一个web.xml文件（或者一个WebApplicationInitializer实现），其中声明了Spring的DispatcherServlet。 一个启动了Spring MVC的Spring配置 一控制器类，以“hello World”相应HTTP请求。 一个用于部署应用程序的Web应用服务器，比如Tomcat。 Spring一直是很火的一个开源框架，在过去的一段时间里，Spring Boot在社区中热度一直很高，所以决定花时间来了解和学习，为自己做技术储备。 正文首先声明，Spring Boot不是一门新技术，所以不用紧张。从本质上来说，Spring Boot就是Spring,它做了那些没有它你也会去做的Spring Bean配置。它使用“习惯优于配置”（项目中存在大量的配置，此外还内置了一个习惯性的配置，让你无需手动进行配置）的理念让你的项目快速运行起来。使用Spring Boot很容易创建一个独立运行（运行jar,内嵌Servlet容器）、准生产级别的基于Spring框架的项目，使用Spring Boot你可以不用或者只需要很少的Spring配置。 Spring Boot精要Spring将很多魔法带入了Spring应用程序的开发之中，其中最重要的是以下四个核心。 自动配置：针对很多Spring应用程序常见的应用功能，Spring Boot能自动提供相关配置 起步依赖：告诉Spring Boot需要什么功能，它就能引入需要的库。 命令行界面：这是Spring Boot的可选特性，借此你只需写代码就能完成完整的应用程序，无需传统项目构建。 Actuator：让你能够深入运行中的Spring Boot应用程序，一探究竟。 详细的我们就不展开，等你爱上后自然会去深入的了解，后续章节我们会一一展开介绍。接下来让我们开搞吧。我已经迫不及待的要尝尝Spring Boot的味道了。 IoC 不是一种技术，只是一种思想，一个重要的面向对象编程的法则，它能指导我们如何设计出松耦合、更优良的程序。传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试；有了IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是 松散耦合，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。 其实IoC对编程带来的最大改变不是从代码上，而是从思想上，发生了“主从换位”的变化。应用程序原本是老大，要获取什么资源都是主动出击，但是在IoC/DI思想中，应用程序就变成被动的了，被动的等待IoC容器来创建并注入它所需要的资源了。 IoC很好的体现了面向对象设计法则之一—— 好莱坞法则：“别找我们，我们找你”；即由IoC容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。 IoC和DIDI—Dependency Injection，即“依赖注入”：组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中。依赖注入的目的并非为软件系统带来更多功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/mysql","date":"2018-05-04T15:36:28.000Z","updated":"2018-05-04T18:46:59.000Z","comments":true,"path":"2018/05/04/MD/论文/mysql/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/mysql/","excerpt":"","text":"[ MySQL.svg](https://upload.wikimedia.org/wikipedia/zh/thumb/6/62/MySQL.svg/180px-MySQL.svg.png) 开发者 甲骨文公司 稳定版本 8.0.11 （2018年4月19日，13天前 ） 预览版本 8.0.4 （2018年1月23日，3个月前 ） 操作系统 跨平台 类型 关系数据库 许可协议 GPL或Commercial License 网站 www.mysql.com 源代码库) https://github.com/mysql/mysql-server、git://anongit.gentoo.org/proj/mysql-extras.git img LAMP Squid MySQL（官方发音为/maɪ ˌɛskjuːˈɛl/“My S-Q-L”[1]，但也经常读作/maɪ ˈsiːkwəl/“My Sequel”）原本是一个开放源代码的关系数据库管理系统，原开发者为瑞典的MySQL AB公司，该公司于2008年被昇阳微系统（Sun Microsystems）收购。2009年，甲骨文公司（Oracle）收购昇阳微系统公司，MySQL成为Oracle旗下产品。 MySQL在过去由于性能高、成本低、可靠性好，已经成为最流行的开源数据库，因此被广泛地应用在Internet上的中小型网站中。随着MySQL的不断成熟，它也逐渐用于更多大规模网站和应用，比如维基百科、Google和Facebook等网站。 与其他的大型数据库例如Oracle、IBM DB2、MS SQL等相比，MySQL自有它的不足之处，如规模小、功能有限等，但是这丝毫也没有减少它受欢迎的程度。对于一般的个人用户和中小型企业来说，MySQL提供的功能已经绰绰有余，而且由于MySQL是开放源代码软件，因此可以大大降低总体拥有成本。 2010年以前Internet上流行的网站构架方式是LAMP（Linux Apache MySQL PHP），即是用Linux作为操作系统，Apache作为Web服务器，MySQL作为数据库，PHP（部分网站也使用Perl或Python）作为服务器端脚本解释器。由于这四个软件都是开放源代码软件，因此使用这种方式可以以较低的成本创建起一个稳定、免费的网站系统。MySQL加PHP的配对在互联网上的应用相比LAMP来说更为常见，并获得了“动态配对”（Dynamic Duo）的雅号，大部分Blog网站基于的WordPress系统主要运用MySQL加PHP的配对。除了LAMP之外，用于Solaris、Windows和Mac上的网站构架也分别被称为SAMP、WAMP和MAMP。 维基百科所使用的Mediawiki维基引擎采用PHP语言写成，并以MySQL作为其支持的其中一种数据库管理系统。 MySQL（官方发音为/maɪ ˌɛskjuːˈɛl/“My S-Q-L”[1]，但也经常读作/maɪ ˈsiːkwəl/“My Sequel”）原本是一个开放源代码的关系数据库管理系统，原开发者为瑞典的MySQL AB公司，该公司于2008年被昇阳微系统（Sun Microsystems）收购。2009年，甲骨文公司（Oracle）收购昇阳微系统公司，MySQL成为Oracle旗下产品。 MySQL在过去由于性能高、成本低、可靠性好，已经成为最流行的开源数据库，因此被广泛地应用在Internet上的中小型网站中。随着MySQL的不断成熟，它也逐渐用于更多大规模网站和应用，比如维基百科、Google和Facebook等网站。 与其他的大型数据库例如Oracle、IBM DB2、MS SQL等相比，MySQL自有它的不足之处，如规模小、功能有限等，但是这丝毫也没有减少它受欢迎的程度。对于一般的个人用户和中小型企业来说，MySQL提供的功能已经绰绰有余，而且由于MySQL是开放源代码软件，因此可以大大降低总体拥有成本。 2010年以前Internet上流行的网站构架方式是LAMP（Linux Apache MySQL PHP），即是用Linux作为操作系统，Apache作为Web服务器，MySQL作为数据库，PHP（部分网站也使用Perl或Python）作为服务器端脚本解释器。由于这四个软件都是开放源代码软件，因此使用这种方式可以以较低的成本创建起一个稳定、免费的网站系统。MySQL加PHP的配对在互联网上的应用相比LAMP来说更为常见，并获得了“动态配对”（Dynamic Duo）的雅号，大部分Blog网站基于的WordPress系统主要运用MySQL加PHP的配对。除了LAMP之外，用于Solaris、Windows和Mac上的网站构架也分别被称为SAMP、WAMP和MAMP。 维基百科所使用的Mediawiki维基引擎采用PHP语言写成，并以MySQL作为其支持的其中一种数据库管理系统。 https://zh.wikipedia.org/wiki/MySQL 维基百科，自由的百科全书","categories":[],"tags":[]},{"title":"","slug":"MD/论文/tomcat","date":"2018-05-04T15:32:18.000Z","updated":"2018-05-04T15:35:00.000Z","comments":true,"path":"2018/05/04/MD/论文/tomcat/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/tomcat/","excerpt":"","text":"1234567Tomcat是一个免费的开源的Selvet容器，它是Apache基金会的Jakata项目中的一个核心项目，由Apache，Sun和其它一些公司及个人共同开发而成。由于有了Sun的参与和支持，最新的Sevlet和Jsp规范总能在Tomcat中得到体现。在Tomcat服务器运行的过程中，它占用的系统资源小，并且扩展性能好。与此同时，Tomcat服务器还支持负载平衡与邮件服务等开发应用系统常用的功能。Tomcat服务器使用Tomcat系统，所具有的优点也很鲜明，首先它具有免费的开源代码，其次是Tomcat系统技术先进并且性能也是相当的稳定，最后Tomcat服务器具有良好的扩展性和安全性，很适合一些中小企业使用。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/nginx","date":"2018-05-04T15:30:27.000Z","updated":"2018-05-06T17:38:08.000Z","comments":true,"path":"2018/05/04/MD/论文/nginx/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/nginx/","excerpt":"","text":"Nginx是一个高性能的HTTP和反向代理服务器，也是一个 IMAP/POP3/SMTP代理服务器。Nginx的影响力可以同Apache匹敌是有它的实力的：超强的稳定性、丰富的功能集、示例配置文件和低系统资源消耗是让它远近闻名的最大特点。因为它的稳定性、丰富的功能集、示例配置文件和低系统资源的消耗而闻名。选择Nginx做静态资源服务器的几点原因： 1) 更快，请求会得到更快的响应，并发数以万计的请求，Nginx也可以比其他服务器更快地作出响应。2) 高延展性，Nginx的设计极具扩展性，它的设计是由多个不同功能、不同层次、不同类型且耦合度极低的模块组成。这种低耦合度的优秀设计，造就了Nginx庞大的第三方模块，当然，公开的第三方模块也如官方发布的模块一样容易使用。3) 高可靠性：用于反向代理，宕机的概率微乎其微，高可靠性是我们选择Nginx的最基本条件。4) 低内存消耗一般情况下，10 000个非活跃的HTTP Keep-Alive连接在Nginx中仅消耗2.5MB的内存，这是Nginx支持高并发连接的基础。5) 单机支持10万以上的并发连接这是一个非常重要的性能指标。6) 最自由的BSD许可协议，这是Nginx可以快速发展的强大动力。BSD许可协议下用户不仅可以免费的使用Nginx，用户还可以在自己的项目中根据自己的需求来修改Nginx源码，达到不同场景的需求，这许可协议使许多开发者协同开发为Nginx开源项目贡献自己的代码，不断完善Nginx。","categories":[],"tags":[]},{"title":"","slug":"MD/论文/webpack","date":"2018-05-04T15:28:17.000Z","updated":"2018-05-04T15:30:36.000Z","comments":true,"path":"2018/05/04/MD/论文/webpack/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/webpack/","excerpt":"","text":"webpack已经是大部分前端项目打包工具的首选，grunt、glup、browserify等逐渐沦为辅助甚至完全被替代。在grunt、glup、browserify等已经相当火了之后，webpack长江后浪推前浪，把前辈们拍死在沙滩上，实力惊人。 根据GitHub上的迭代发展看来，通过Issues、Release、Commit等看，webpack发展相当不错，已经有2.0的beta版本，最大的更新应该是支持ES6 Modules，根据ES6的特性来做一些Code Splitting等。 wait… 有同学说还有rollup，鉴于他还是小弟，可能还有大部分人都没听说过，官方介绍：A next-generation ES6 module bundler，也是看好他的。 还有brunch，Broccoli等，这里就不列举所有了。 Hot Module Replacement（以下简称 HMR）是 webpack 发展至今引入的最令人兴奋的特性之一 ，当你对代码进行修改并保存后，webpack 将对代码重新打包，并将新的模块发送到浏览器端，浏览器通过新的模块替换老的模块，这样在不刷新浏览器的前提下就能够对应用进行更新。例如，在开发 Web 页面过程中，当你点击按钮，出现一个弹窗的时候，发现弹窗标题没有对齐，这时候你修改 CSS 样式，然后保存，在浏览器没有刷新的前提下，标题样式发生了改变。感觉就像在 Chrome 的开发者工具中直接修改元素样式一样。 近年来，前端技术蓬勃发展，我们想在js更方便的实现html , 社区就出现了jsx,我们觉得原生的css不够好用，社区就提出了scss,less，针对前端项目越来越强的模块化开发需求，社区出现了AMD,CommonJS,ES2015 import等等方案。遗憾的是，这些方案大多并不直接被浏览器支持，往往伴随这些方案而生的还有另外一些，让这些新技术应用于浏览器的方案，我们用babel来转换下一代的js，转换jsx;我们用各种工具转换scss,less为css；我们发现项目越来越复杂，代码体积越来越大，又要开始寻找各种优化，压缩，分割方案。前端工程化这个过程，真是让我们大费精力。我们也大多是在寻找前端模块化解决方案的过程中知晓了webpack。 的确，webpack的流行得益于野性生长的前端，其本质是一种前端模块化打包解决方案，但是更重要的是它又是一个可以融合运用各种前端新技术的平台，明白webpack的使用哲学后，只需要简单的配置,我们就可以随心所欲的在webpack项目中使用jsx/ts,使用babel/postcss等平台提供的众多其它功能，只需通过一条命令由源码构建最终可用文件。可以不夸张的说webpack为前端的工程化开发提供了一套相对容易和完整的解决方案。一些知名的脚手架工具，也大多基于webpack(比如create-react-app)。","categories":[],"tags":[]},{"title":"ssh scp","slug":"Linux/ssh/ssh scp","date":"2018-05-04T13:17:39.000Z","updated":"2018-08-09T11:33:26.000Z","comments":true,"path":"2018/05/04/Linux/ssh/ssh scp/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/Linux/ssh/ssh scp/","excerpt":"","text":"在linux下一般用scp这个命令来通过ssh传输文件。 从服务器上下载文件 12# 把192.168.0.101上的/var/www/test.txt 的文件下载到/var/www/local_dir（本地目录）scp root@192.168.0.101:/var/www/test.txt /var/www/local_dir 上传本地文件到服务器 12# 把本机/var/www/目录下的test.php文件上传到192.168.0.101这台服务器上的/var/wwwscp /var/www/test.php root@192.168.0.101:/var/www/ 从服务器下载整个目录 1scp -r root@192.168.0.101:/var/www/test /var/www/ 上传目录到服务器 1scp -r local_dir username@servername:remote_dir 注： 目标服务器要开启写入权限。","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"},{"name":"command","slug":"linux/command","permalink":"http://io.stelawliet.top/categories/linux/command/"}],"tags":[{"name":"scp","slug":"scp","permalink":"http://io.stelawliet.top/tags/scp/"}]},{"title":"","slug":"MD/论文/Untitled","date":"2018-05-04T13:17:23.000Z","updated":"2018-05-04T13:17:23.000Z","comments":true,"path":"2018/05/04/MD/论文/Untitled/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/Untitled/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"MD/论文/tables","date":"2018-05-04T08:36:23.000Z","updated":"2018-05-05T18:40:29.000Z","comments":true,"path":"2018/05/04/MD/论文/tables/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/tables/","excerpt":"","text":"society_activity 名称 a_no int(15) a_society_id int(15) a_name varchar(20) a_address varchar(30) a_status int(10) a_details text a_grade varchar(20) society_category P 名称 category_id int(5) category_name char(20) category_des varchar(20) society_comment P 名称 c_no int(20) c_activity_id int(15) c_user_id int(20) c_date varchar(20) c_desc text c_status int(1) c_uname char(20) society_info 名称 s_id int(15) s_name char(15) s_chairman int(10) s_grade varchar(20) s_desc text s_pic text s_status int(1) society_member 名称 m_no int(20) m_society_id int(15) m_user_id int(20) m_date date m_grade char(2) m_position varchar(20) m_desc text m_status int(1) society_user P u_id int(20) u_name varchar(20) u_password varchar(20) u_role int(1) u_gender char(10) u_academy varchar(20) u_class varchar(10) u_desc text u_email varchar(20) u_birthday date u_phone int(15) 说明部分用户编号，用户名，密码，角色权限值，性别，专业，班级，描述，邮箱，生日，电话号 社团编号，主键ID，社团名，会长编号，分类，描述介绍，社团头像，审核状态 成员编号，社团编号，用户编号，加入日期，分类，职位，加入验证 活动编号，社团编号，活动名，活动地址，审核状态，活动详细，活动分类","categories":[],"tags":[]},{"title":"","slug":"MD/论文/table","date":"2018-05-04T08:35:28.000Z","updated":"2018-05-04T08:36:12.000Z","comments":true,"path":"2018/05/04/MD/论文/table/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/论文/table/","excerpt":"","text":"u_id int(20) u_name varchar(20) u_password varchar(20) u_role int(1) u_gender char(10) u_academy varchar(20) u_class varchar(10) u_desc textu_email varchar(20) u_birthday dateu_phone int(15)","categories":[],"tags":[]},{"title":"mac path backup","slug":"MD/mac path","date":"2018-05-04T08:35:21.000Z","updated":"2018-07-04T11:59:05.000Z","comments":true,"path":"2018/05/04/MD/mac path/","link":"","permalink":"http://io.stelawliet.top/2018/05/04/MD/mac path/","excerpt":"","text":"mac path backup 12345678910111213141516171819PATH=$PATH:/usr/local/mysql/binJAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_111.jdk/Contents/HomePATH=$JAVA_HOME/bin:$PATH:CLASSPATH=$JAVA_HOME/lib:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.export JAVA_HOMEexport PATHexport CLASSPATHexport PATH=$PATH:/Users/zhaoziqi/Library/tomcat8/binexport CATALINA_HOME=/Users/zhaoziqi/Library/tomcat8export MAVEN_HOME=/Users/zhaoziqi/Library/apache-maven-3.5.2export PATH=$PATH:$MAVEN_HOME/binexport JETTY_HOME=/Users/zhaoziqi/Library/jetty-9.4.7alias ll='ls -alF'alias la='ls -A'alias l='ls -CF'export PATH=\"$HOME/.cargo/bin:$PATH\" source ~/.bash_profile","categories":[{"name":"note","slug":"note","permalink":"http://io.stelawliet.top/categories/note/"},{"name":"mac config","slug":"note/mac-config","permalink":"http://io.stelawliet.top/categories/note/mac-config/"}],"tags":[{"name":"mac","slug":"mac","permalink":"http://io.stelawliet.top/tags/mac/"},{"name":"bash_profile","slug":"bash-profile","permalink":"http://io.stelawliet.top/tags/bash-profile/"},{"name":"path","slug":"path","permalink":"http://io.stelawliet.top/tags/path/"}]},{"title":"","slug":"MD/论文/素格式","date":"2018-05-02T06:14:35.000Z","updated":"2018-05-02T06:15:37.000Z","comments":true,"path":"2018/05/02/MD/论文/素格式/","link":"","permalink":"http://io.stelawliet.top/2018/05/02/MD/论文/素格式/","excerpt":"","text":"国务院.国务院关于基础教育改革与发展的决定[Z]. 2001-05-29. 首先这个属于其他里面，用Z，其次格式】[序号]颁布单位.条例名称.发布日期 【举例】[15]中华人民共和国科学技术委员会.科学技术期刊管理办法[Z].1991—06—05","categories":[],"tags":[]},{"title":"","slug":"Vue/表格Excel","date":"2018-05-02T04:59:20.000Z","updated":"2018-05-02T05:08:50.000Z","comments":true,"path":"2018/05/02/Vue/表格Excel/","link":"","permalink":"http://io.stelawliet.top/2018/05/02/Vue/表格Excel/","excerpt":"","text":"vue2.0 + element UI 中 el-table 数据导出Excel阅读 424 收藏 81 2018-04-28 原文链接：blog.csdn.net 腾讯课堂前端工程师 NEXT 学位限定席位报名中！立即报名！ke.qq.com vue2.0 + element UI 中 el-table 数据导出Excel1、 安装相关依赖 主要是两个依赖 1npm install --save xlsx file-saver 如果想详细看着两个插件使用，请移步github。 github.com/SheetJS/js-…github.com/eligrey/Fil… 2、组件里头引入 12import FileSaver from &apos;file-saver&apos;import XLSX from &apos;xlsx&apos; 3、组件methods里写一个方法 12345678910exportExcel () &#123; /* generate workbook object from table */ var wb = XLSX.utils.table_to_book(document.querySelector(&apos;#out-table&apos;)) /* get binary string as output */ var wbout = XLSX.write(wb, &#123; bookType: &apos;xlsx&apos;, bookSST: true, type: &apos;array&apos; &#125;) try &#123; FileSaver.saveAs(new Blob([wbout], &#123; type: &apos;application/octet-stream&apos; &#125;), &apos;sheetjs.xlsx&apos;) &#125; catch (e) &#123; if (typeof console !== &apos;undefined&apos;) console.log(e, wbout) &#125; return wbout&#125;, 注意：XLSX.uitls.table_to_book( 放入的是table 的DOM 节点 ) ，sheetjs.xlsx 即为导出表格的名字，可修改！ 4、点击导出按钮执行 exportExcel 的方法即可 。 组件里头代码截图： img 实现效果图如下：导出如下表格的数据到excel。 img 导出到excel 表格，结果如下： img 相关链接：该工具的其他使用场景( 如react 、jQ、angular ) sheetjs.com/","categories":[],"tags":[]},{"title":"","slug":"MD/论文/论文","date":"2018-05-02T04:58:26.000Z","updated":"2018-05-03T14:41:58.000Z","comments":true,"path":"2018/05/02/MD/论文/论文/","link":"","permalink":"http://io.stelawliet.top/2018/05/02/MD/论文/论文/","excerpt":"","text":"高校学生社团作为文化生活的重要载体，是大学教育不可缺少的重要组成部分。，学生社团的发展目前存在人员管理困难、社团财务不清、社团活动难以开展等问题。 中共中央，国务院在《关于进一步加强和改进大学生思想政治教育的意见》说到，“加强对大学生社团的领导和管理，帮助大学生社团选聘指导老师，支持和引导大学生社团自主开展活动” 要加强对大学生社团的领导和管理，帮助大学生社团选聘指导教师，支持和引导大学生社团自主开展活动。 摘要近几年来，随着国家政府相关政策的推出，高等教育的逐渐普及高校的逐年扩招，给高校的教学管理、学生信息管理等方面都带来不少的挑战。本文主要介绍了高校学生社团管理系统的设计与实现方案，社团管理系统面对学校社团成员信息的特征以及管理中的需要而设计，达到有效地学生社团成员管理的数字化，网络化，减轻相关的社团管理人员的管理负担。 近几年来，国家政府相关政策的推出，随着高等教育的逐渐普及高校的逐年扩招，给高校的教学管理、学生信息管理等方面都带来不少的挑战。其包含的数据量大，涉及的人员面广，而且需要及时更新，故较为复杂，难以单纯地依赖人工管理，而且传统的人工管理方式既不易于规范化，管理效率也不高，目前我国各类高等院校中还有相当一部分学生档案管理还停留在纸介质的基础上，尤其是中、小学对学生档案的管理更是落后，这样的管理机制已经不能适应时代发展的要求，其管理方法将浪费许多人力和物力。随着科学技术的不断提高，计算机科学与技术日渐成熟，计算机应用的普及已进入人类社会生活的各个领域，并发挥着越来越重要的作用。这种传统的手工管理模式必然被以计算机为物质基础的信息管理方法所取代。 作为计算机应用的一部分，使用计算机对学生档案进行管理，有着手工管理所无法比拟的优点，如：检索迅速、查找方便、可靠性高、存储量大、保密性好、寿命长、成本低等。这些优点能够极大地提高学生档案管理的效率，也是学校向科学化、正规化管理发展的必要条件，更是各个高等院校与世界接轨的重要条件。 社团管理系统面对学校社团成员信息的特征以及管理中的需要而设计，达到有效地学生社团成员管理的信息化，数字化，网络化，减轻相关的社团管理人员的管理负担，高效率、数字化地管理学生社团成员信息，并一定程度上避免人为操作的错误或者不规范行为。 Vue 数据驱动视图 总结一下吧(以下依赖收集器实为Dep)： vue将data初始化为一个Observer并对对象中的每个值，重写了其中的get、set，data中的每个key，都有一个独立的依赖收集器。 在get中，向依赖收集器添加了监听 在mount时，实例了一个Watcher，将收集器的目标指向了当前Watcher 在data值发生变更时，触发set，触发了依赖收集器中的所有监听的更新，来触发Watcher.update","categories":[],"tags":[]},{"title":"","slug":"Linux/TCP连接断开详细","date":"2018-04-24T14:02:54.000Z","updated":"2018-04-24T14:02:56.000Z","comments":true,"path":"2018/04/24/Linux/TCP连接断开详细/","link":"","permalink":"http://io.stelawliet.top/2018/04/24/Linux/TCP连接断开详细/","excerpt":"","text":"TCP的三次握手和四次挥手一，TCP建立连接(Connection Establishment)由以下三个过程： 1）Client给Server发送发送TCP segment：SYN=1，ACK=0，SEQ=x。（这些字段的作用是这样的：通过SYN=1，ACK=0告诉server这是连接请求Connection Requet。SEQ=x表明后面传送数据时的第一个数据字节的序号是x+1） 2）Server给Client发送的TCP segment：SYN=1，ACK=1, SEQ = y, ACK(ackonwlege number)=x+1.(server通过SYN=1，ACK=1告诉client，这是接受请求Connection Accepted。确认你是要从x+1传起了。server也通知client，我要传给你的是从y+1传起的哦！） 3) Client给Server发送发送TCP segment: ACK=1, SEQ=x+1, ACk(acknowledeg number)=y+1(client告诉server，OK，我是要建立连接，你可以建立了） 说明：1）为什么需要第三个步骤呢？Internet是不可靠的，有时候由于网络延迟，Client可能会“重传”第一个请求连接的报文。如果Server每次收到Connetion Request（也就是SYN=1，ACK=0）的报文就建立连接，那Server就亏大了（浪费资源）。所以需要Client再确认一下，免得 Server吃亏。 ​ 2) 在第一个步骤，如果Server拒绝连接，就可以设置RST=1，并回复Client。 ​ 3）如果Client在第一个步骤发送的数据报的时候，源IP随便填写（这并不影响路由过程），这样，Server收到连接请求（SYN=1，ACK= 0），并不会马上为这个连接请求Client建立连接，而是为连接请求建立会话，并放到等待队列中，向源IP主机发送确认数据包，并等待回复。由于 Server收不到第三个步骤的回复确认（当然了，源IP是假的），会一直等待直到超时，当有大量这样的连接时，Server就无法接受新的连接请求了，这就是“DOS（denial of Service）攻击”的原理. 二，TCP连接断开 连接的双方分别为host A和host B. TCP连接是全双工的，当我们可以把它看成两个半双工的，可以分别关闭，过程如下： 1）A =&gt; B: FIN, SEQ=x 2) B =&gt; A: ACK, SEQ=y, ACK=x+1 3) B =&gt; A: FIN, ACK, SEQ = y, ACK = x+1 4) A =&gt; B: ACK, SEQ = x + 1, ACK = x + 1. 说明：2）3）步骤可以合为一个TCP segment。","categories":[],"tags":[]},{"title":"","slug":"JavaScript/bootstrap3/components","date":"2018-04-11T14:50:28.000Z","updated":"2018-04-11T14:51:32.000Z","comments":true,"path":"2018/04/11/JavaScript/bootstrap3/components/","link":"","permalink":"http://io.stelawliet.top/2018/04/11/JavaScript/bootstrap3/components/","excerpt":"","text":"组件无数可复用的组件，包括字体图标、下拉菜单、导航、警告框、弹出框等更多功能。 Glyphicons 字体图标所有可用的图标包括250多个来自 Glyphicon Halflings 的字体图标。Glyphicons Halflings 一般是收费的，但是他们的作者允许 Bootstrap 免费使用。为了表示感谢，希望你在使用时尽量为 Glyphicons 添加一个友情链接。 ​ 如何使用出于性能的考虑，所有图标都需要一个基类和对应每个图标的类。把下面的代码放在任何地方都可以正常使用。注意，为了设置正确的内补（padding），务必在图标和文本之间添加一个空格。 不要和其他组件混合使用图标类不能和其它组件直接联合使用。它们不能在同一个元素上与其他类共同存在。应该创建一个嵌套的 &lt;span&gt; 标签，并将图标类应用到这个 &lt;span&gt; 标签上。 只对内容为空的元素起作用图标类只能应用在不包含任何文本内容或子元素的元素上。 改变图标字体文件的位置Bootstrap 假定所有的图标字体文件全部位于 ../fonts/ 目录内，相对于预编译版 CSS 文件的目录。如果你修改了图标字体文件的位置，那么，你需要通过下面列出的任何一种方式来更新 CSS 文件： 在 Less 源码文件中修改 @icon-font-path 和/或 @icon-font-name 变量。 利用 Less 编译器提供的 相对 URL 地址选项。 修改预编译 CSS 文件中的 url() 地址。 根据你自身的情况选择一种方式即可。 图标的可访问性现代的辅助技术能够识别并朗读由 CSS 生成的内容和特定的 Unicode 字符。为了避免 屏幕识读设备抓取非故意的和可能产生混淆的输出内容（尤其是当图标纯粹作为装饰用途时），我们为这些图标设置了 aria-hidden=&quot;true&quot; 属性。 如果你使用图标是为了表达某些含义（不仅仅是为了装饰用），请确保你所要表达的意思能够通过被辅助设备识别，例如，包含额外的内容并通过 .sr-only 类让其在视觉上表现出隐藏的效果。 如果你所创建的组件不包含任何文本内容（例如， &lt;button&gt; 内只包含了一个图标），你应当提供其他的内容来表示这个控件的意图，这样就能让使用辅助设备的用户知道其作用了。这种情况下，你可以为控件添加 aria-label 属性。 1&lt;span class=&quot;glyphicon glyphicon-search&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; 实例可以把它们应用到按钮、工具条中的按钮组、导航或输入框等地方。 Star Star Star Star 1234567&lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; aria-label=&quot;Left Align&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-align-left&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-lg&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-star&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; Star&lt;/button&gt; alert 组件中所包含的图标是用来表示这是一条错误消息的，通过添加额外的 .sr-only 文本就可以让辅助设备知道这条提示所要表达的意思了。 Error:Enter a valid email address 12345&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-exclamation-sign&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span class=&quot;sr-only&quot;&gt;Error:&lt;/span&gt; Enter a valid email address&lt;/div&gt; 下拉菜单用于显示链接列表的可切换、有上下文的菜单。下拉菜单的 JavaScript 插件让它具有了交互性。 实例将下拉菜单触发器和下拉菜单都包裹在 .dropdown 里，或者另一个声明了 position: relative; 的元素。然后加入组成菜单的 HTML 代码。 Action Another action Something else here 12345678910111213&lt;div class=&quot;dropdown&quot;&gt; &lt;button class=&quot;btn btn-default dropdown-toggle&quot; type=&quot;button&quot; id=&quot;dropdownMenu1&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;true&quot;&gt; Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;dropdownMenu1&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 通过为下拉菜单的父元素设置 .dropup 类，可以让菜单向上弹出（默认是向下弹出的）。 Dropup 12345678910111213&lt;div class=&quot;dropup&quot;&gt; &lt;button class=&quot;btn btn-default dropdown-toggle&quot; type=&quot;button&quot; id=&quot;dropdownMenu2&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Dropup &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;dropdownMenu2&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 对齐B默认情况下，下拉菜单自动沿着父元素的上沿和左侧被定位为 100% 宽度。 为 .dropdown-menu 添加 .dropdown-menu-right 类可以让菜单右对齐。 可能需要额外的定位May require additional positioning在正常的文档流中，通过 CSS 为下拉菜单进行定位。这就意味着下拉菜单可能会由于设置了 overflow 属性的父元素而被部分遮挡或超出视口（viewport）的显示范围。如果出现这种问题，请自行解决。 不建议使用 .pull-right从 v3.1.0 版本开始，我们不再建议对下拉菜单使用 .pull-right 类。如需将菜单右对齐，请使用 .dropdown-menu-right类。导航条中如需添加右对齐的导航（nav）组件，请使用 .pull-right 的 mixin 版本，可以自动对齐菜单。如需左对齐，请使用 .dropdown-menu-left 类。 123&lt;ul class=&quot;dropdown-menu dropdown-menu-right&quot; aria-labelledby=&quot;dLabel&quot;&gt; ...&lt;/ul&gt; 标题在任何下拉菜单中均可通过添加标题来标明一组动作。 Dropdown header Action Another action Something else here Dropdown header Separated link 12345&lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;dropdownMenu3&quot;&gt; ... &lt;li class=&quot;dropdown-header&quot;&gt;Dropdown header&lt;/li&gt; ...&lt;/ul&gt; 分割线为下拉菜单添加一条分割线，用于将多个链接分组。 Action Another action Something else here ​ Separated link 12345&lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;dropdownMenuDivider&quot;&gt; ... &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; ...&lt;/ul&gt; 禁用的菜单项为下拉菜单中的 &lt;li&gt; 元素添加 .disabled 类，从而禁用相应的菜单项。 Regular link Disabled link Another link 12345&lt;ul class=&quot;dropdown-menu&quot; aria-labelledby=&quot;dropdownMenu4&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Regular link&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;disabled&quot;&gt;&lt;a href=&quot;#&quot;&gt;Disabled link&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another link&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; 按钮组通过按钮组容器把一组按钮放在同一行里。通过与按钮插件联合使用，可以设置为单选框或多选框的样式和行为。 按钮组中的工具提示和弹出框需要特别的设置当为 .btn-group 中的元素应用工具提示或弹出框时，必须指定 container: &#39;body&#39; 选项，这样可以避免不必要的副作用（例如工具提示或弹出框触发时，会让页面元素变宽和/或失去圆角）。 确保设置正确的 role 属性并提供一个 label 标签为了向使用辅助技术 - 如屏幕阅读器 - 的用户正确传达一正确的按钮分组，需要提供一个合适的 role 属性。对于按钮组合，应该是 role=&quot;group&quot;，对于toolbar（工具栏）应该是 role=&quot;toolbar&quot;。 一个例外是按钮组合只包含一个单一的控制元素或一个下拉菜单（比如实际情况，&lt;button&gt; 元素组成的两端对齐排列的按钮组）或下拉菜单。 此外，按钮组和工具栏应给定一个明确的label标签，尽管设置了正确的 role 属性，但是大多数辅助技术将不会正确的识读他们。在这里提供的实例中，我们使用 aria-label，但是， aria-labelledby 也可以使用。 基本实例Wrap a series of buttons with .btn in .btn-group. LeftMiddleRight 12345&lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Left&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Middle&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Right&lt;/button&gt;&lt;/div&gt; 按钮工具栏把一组 &lt;div class=&quot;btn-group&quot;&gt; 组合进一个 &lt;div class=&quot;btn-toolbar&quot;&gt; 中就可以做成更复杂的组件。 1234 567 8 12345&lt;div class=&quot;btn-toolbar&quot; role=&quot;toolbar&quot; aria-label=&quot;...&quot;&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt;&lt;/div&gt; 尺寸只要给 .btn-group 加上 .btn-group-* 类，就省去为按钮组中的每个按钮都赋予尺寸类了，如果包含了多个按钮组时也适用。 LeftMiddleRight LeftMiddleRight LeftMiddleRight LeftMiddleRight 1234&lt;div class=&quot;btn-group btn-group-lg&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;btn-group btn-group-sm&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;btn-group btn-group-xs&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt;...&lt;/div&gt; 嵌套想要把下拉菜单混合到一系列按钮中，只须把 .btn-group 放入另一个 .btn-group 中。 Dropdown 123456789101112131415&lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;1&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;2&lt;/button&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Dropdown link&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Dropdown link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt; 垂直排列让一组按钮垂直堆叠排列显示而不是水平排列。分列式按钮下拉菜单不支持这种方式。 Dropdown Dropdown Dropdown Dropdown 123&lt;div class=&quot;btn-group-vertical&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt; ...&lt;/div&gt; 两端对齐排列的按钮组让一组按钮拉长为相同的尺寸，填满父元素的宽度。对于按钮组中的按钮式下拉菜单也同样适用。 关于边框的处理由于对两端对齐的按钮组使用了特定的 HTML 和 CSS （即 display: table-cell），两个按钮之间的边框叠加在了一起。在普通的按钮组中，margin-left: -1px 用于将边框重叠，而没有删除任何一个按钮的边框。然而，margin 属性不支持 display: table-cell。因此，根据你对 Bootstrap 的定制，你可以删除或重新为按钮的边框设置颜色。 IE8 和边框Internet Explorer 8 不支持在两端对齐的按钮组中绘制边框，无论是 &lt;a&gt; 或 &lt;button&gt; 元素。为了照顾 IE8，把每个按钮放入另一个 .btn-group 中即可。 参见 #12476 获取详细信息。 关于 &lt;a&gt; 元素只须将一系列 .btn 元素包裹到 .btn-group.btn-group-justified 中即可。 LeftMiddleRight Left Middle Dropdown 123&lt;div class=&quot;btn-group btn-group-justified&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt; ...&lt;/div&gt; Links acting as buttonsIf the &lt;a&gt; elements are used to act as buttons – triggering in-page functionality, rather than navigating to another document or section within the current page – they should also be given an appropriate role=&quot;button&quot;. 关于 &lt;button&gt; 元素为了将 &lt;button&gt; 元素用于两端对齐的按钮组中，必须将每个按钮包裹进一个按钮组中you must wrap each button in a button group。大部分的浏览器不能将我们的 CSS 应用到对齐的 &lt;button&gt; 元素上，但是，由于我们支持按钮式下拉菜单，我们可以解决这个问题。 Left Middle Right 1234567891011&lt;div class=&quot;btn-group btn-group-justified&quot; role=&quot;group&quot; aria-label=&quot;...&quot;&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Left&lt;/button&gt; &lt;/div&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Middle&lt;/button&gt; &lt;/div&gt; &lt;div class=&quot;btn-group&quot; role=&quot;group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Right&lt;/button&gt; &lt;/div&gt;&lt;/div&gt; 按钮式下拉菜单把任意一个按钮放入 .btn-group 中，然后加入适当的菜单标签，就可以让按钮作为菜单的触发器了。 插件依赖按钮式下拉菜单依赖下拉菜单插件 ，因此需要将此插件包含在你所使用的 Bootstrap 版本中。 单按钮下拉菜单只要改变一些基本的标记，就能把按钮变成下拉菜单的开关。 Default Primary Success Info Warning Danger 12345678910111213&lt;!-- Single button --&gt;&lt;div class=&quot;btn-group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Action &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 分裂式按钮下拉菜单相似地，分裂式按钮下拉菜单也需要同样的改变一些标记，但只是多一个分开的按钮。 DefaultToggle Dropdown PrimaryToggle Dropdown SuccessToggle Dropdown InfoToggle Dropdown WarningToggle Dropdown DangerToggle Dropdown 123456789101112131415&lt;!-- Split button --&gt;&lt;div class=&quot;btn-group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-danger&quot;&gt;Action&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-danger dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;span class=&quot;sr-only&quot;&gt;Toggle Dropdown&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 尺寸按钮式下拉菜单适用所有尺寸的按钮。 Large button Small button Extra small button 1234567891011121314151617181920212223242526272829&lt;!-- Large button group --&gt;&lt;div class=&quot;btn-group&quot;&gt; &lt;button class=&quot;btn btn-default btn-lg dropdown-toggle&quot; type=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Large button &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; ... &lt;/ul&gt;&lt;/div&gt;&lt;!-- Small button group --&gt;&lt;div class=&quot;btn-group&quot;&gt; &lt;button class=&quot;btn btn-default btn-sm dropdown-toggle&quot; type=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Small button &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; ... &lt;/ul&gt;&lt;/div&gt;&lt;!-- Extra small button group --&gt;&lt;div class=&quot;btn-group&quot;&gt; &lt;button class=&quot;btn btn-default btn-xs dropdown-toggle&quot; type=&quot;button&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Extra small button &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; ... &lt;/ul&gt;&lt;/div&gt; 向上弹出式菜单给父元素添加 .dropup 类就能使触发的下拉菜单朝上方打开。 DropupToggle Dropdown Right dropupToggle Dropdown 12345678910&lt;div class=&quot;btn-group dropup&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Dropup&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;span class=&quot;sr-only&quot;&gt;Toggle Dropdown&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;!-- Dropdown menu links --&gt; &lt;/ul&gt;&lt;/div&gt; 输入框组通过在文本输入框 &lt;input&gt; 前面、后面或是两边加上文字或按钮，可以实现对表单控件的扩展。为 .input-group 赋予 .input-group-addon 或 .input-group-btn 类，可以给 .form-control 的前面或后面添加额外的元素。 只支持文本输入框 &lt;input&gt;这里请避免使用 &lt;select&gt; 元素，因为 WebKit 浏览器不能完全绘制它的样式。 避免使用 &lt;textarea&gt; 元素，由于它们的 rows 属性在某些情况下不被支持。 输入框组中的工具提示和弹出框需要特别的设置为 .input-group 中所包含的元素应用工具提示（tooltip）或popover（弹出框）时，必须设置 container: &#39;body&#39; 参数，为的是避免意外的副作用（例如，工具提示或弹出框被激活后，可能会让当前元素变得更宽或/和变得失去其圆角）。 不要和其他组件混用不要将表单组或栅格列（column）类直接和输入框组混合使用。而是将输入框组嵌套到表单组或栅格相关元素的内部。 Always add labelsScreen readers will have trouble with your forms if you don’t include a label for every input. For these input groups, ensure that any additional label or functionality is conveyed to assistive technologies. The exact technique to be used (visible &lt;label&gt; elements, &lt;label&gt; elements hidden using the .sr-only class, or use of the aria-label, aria-labelledby, aria-describedby, title or placeholder attribute) and what additional information will need to be conveyed will vary depending on the exact type of interface widget you’re implementing. The examples in this section provide a few suggested, case-specific approaches. 基本实例在输入框的任意一侧添加额外元素或按钮。你还可以在输入框的两侧同时添加额外元素。 我们不支持在输入框的单独一侧添加多个额外元素（.input-group-addon 或 .input-group-btn）。 我们不支持在单个输入框组中添加多个表单控件。 @@example.com$.00Your vanity URLhttps://example.com/users/ 123456789101112131415161718192021&lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;basic-addon1&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; aria-describedby=&quot;basic-addon1&quot;&gt;&lt;/div&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Recipient&apos;s username&quot; aria-describedby=&quot;basic-addon2&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;basic-addon2&quot;&gt;@example.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;$&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;Amount (to the nearest dollar)&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;.00&lt;/span&gt;&lt;/div&gt;&lt;label for=&quot;basic-url&quot;&gt;Your vanity URL&lt;/label&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;basic-addon3&quot;&gt;https://example.com/users/&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;basic-url&quot; aria-describedby=&quot;basic-addon3&quot;&gt;&lt;/div&gt; 尺寸为 .input-group 添加相应的尺寸类，其内部包含的元素将自动调整自身的尺寸。不需要为输入框组中的每个元素重复地添加控制尺寸的类。 @@@ 1234567891011121314&lt;div class=&quot;input-group input-group-lg&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;sizing-addon1&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; aria-describedby=&quot;sizing-addon1&quot;&gt;&lt;/div&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;sizing-addon2&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; aria-describedby=&quot;sizing-addon2&quot;&gt;&lt;/div&gt;&lt;div class=&quot;input-group input-group-sm&quot;&gt; &lt;span class=&quot;input-group-addon&quot; id=&quot;sizing-addon3&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Username&quot; aria-describedby=&quot;sizing-addon3&quot;&gt;&lt;/div&gt; 作为额外元素的多选框和单选框可以将多选框或单选框作为额外元素添加到输入框组中。 123456789101112131415161718&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt; &lt;input type=&quot;checkbox&quot; aria-label=&quot;...&quot;&gt; &lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt; &lt;input type=&quot;radio&quot; aria-label=&quot;...&quot;&gt; &lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt;&lt;/div&gt;&lt;!-- /.row --&gt; 作为额外元素的按钮为输入框组添加按钮需要额外添加一层嵌套，不是 .input-group-addon，而是添加 .input-group-btn 来包裹按钮元素。由于不同浏览器的默认样式无法被统一的重新赋值，所以才需要这样做。 Go!Go! 123456789101112131415161718&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-btn&quot;&gt; &lt;button class=&quot;btn btn-default&quot; type=&quot;button&quot;&gt;Go!&lt;/button&gt; &lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search for...&quot;&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search for...&quot;&gt; &lt;span class=&quot;input-group-btn&quot;&gt; &lt;button class=&quot;btn btn-default&quot; type=&quot;button&quot;&gt;Go!&lt;/button&gt; &lt;/span&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt;&lt;/div&gt;&lt;!-- /.row --&gt; 作为额外元素的按钮式下拉菜单Action Action 1234567891011121314151617181920212223242526272829303132&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Action &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;!-- /btn-group --&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt; &lt;div class=&quot;col-lg-6&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Action &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=&quot;dropdown-menu dropdown-menu-right&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;!-- /btn-group --&gt; &lt;/div&gt;&lt;!-- /input-group --&gt; &lt;/div&gt;&lt;!-- /.col-lg-6 --&gt;&lt;/div&gt;&lt;!-- /.row --&gt; 作为额外元素的分裂式按钮下拉菜单Action Toggle DropdownAction Toggle Dropdown 12345678910111213&lt;div class=&quot;input-group&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;!-- Button and dropdown menu --&gt; &lt;/div&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt;&lt;/div&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;!-- Button and dropdown menu --&gt; &lt;/div&gt;&lt;/div&gt; Multiple buttonsWhile you can only have one add-on per side, you can have multiple buttons inside a single .input-group-btn. Action 12345678910111213&lt;div class=&quot;input-group&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;!-- Buttons --&gt; &lt;/div&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt;&lt;/div&gt;&lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; aria-label=&quot;...&quot;&gt; &lt;div class=&quot;input-group-btn&quot;&gt; &lt;!-- Buttons --&gt; &lt;/div&gt;&lt;/div&gt; 导航Bootstrap 中的导航组件都依赖同一个 .nav 类，状态类也是共用的。改变修饰类可以改变样式。 在标签页上使用导航需要依赖 JavaScript 标签页插件由于标签页需要控制内容区的展示，因此，你必须使用 标签页组件的 JavaScript 插件。另外还要添加 role 和 ARIA 属性 – 详细信息请参考该插件的 实例。 确保导航组件的可访问性如果你在使用导航组件实现导航条功能，务必在 &lt;ul&gt; 的最外侧的逻辑父元素上添加 role=&quot;navigation&quot; 属性，或者用一个 &lt;nav&gt; 元素包裹整个导航组件。不要将 role 属性添加到 &lt;ul&gt; 上，因为这样可以被辅助设备（残疾人用的）上被识别为一个真正的列表。 标签页注意 .nav-tabs 类依赖 .nav 基类。 Home Profile Messages 12345&lt;ul class=&quot;nav nav-tabs&quot;&gt; &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Home&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Messages&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; 胶囊式标签页HTML 标记相同，但使用 .nav-pills 类： Home Profile Messages 12345&lt;ul class=&quot;nav nav-pills&quot;&gt; &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Home&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Messages&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; 胶囊是标签页也是可以垂直方向堆叠排列的。只需添加 .nav-stacked 类。 Home Profile Messages 123&lt;ul class=&quot;nav nav-pills nav-stacked&quot;&gt; ...&lt;/ul&gt; 两端对齐的标签页在大于 768px 的屏幕上，通过 .nav-justified 类可以很容易的让标签页或胶囊式标签呈现出同等宽度。在小屏幕上，导航链接呈现堆叠样式。 两端对齐的导航条导航链接已经被弃用了。 Safari 和响应式两端对齐导航从 v9.1.2 版本开始，Safari 有一个bug：对于两端对齐的导航，水平改变浏览器大小将引起绘制错误。此bug可以在两端对齐的导航实例中得到重现。 Home Profile Messages Home Profile Messages 123456&lt;ul class=&quot;nav nav-tabs nav-justified&quot;&gt; ...&lt;/ul&gt;&lt;ul class=&quot;nav nav-pills nav-justified&quot;&gt; ...&lt;/ul&gt; 禁用的链接对任何导航组件（标签页、胶囊式标签页），都可以添加 .disabled 类，从而实现链接为灰色且没有鼠标悬停效果。 链接功能不受到影响这个类只改变 &lt;a&gt; 的外观，不改变功能。可以自己写 JavaScript 禁用这里的链接。 Clickable link Clickable link Disabled link 12345&lt;ul class=&quot;nav nav-pills&quot;&gt; ... &lt;li role=&quot;presentation&quot; class=&quot;disabled&quot;&gt;&lt;a href=&quot;#&quot;&gt;Disabled link&lt;/a&gt;&lt;/li&gt; ...&lt;/ul&gt; 添加下拉菜单用一点点额外 HTML 代码并加入下拉菜单插件的 JavaScript 插件即可。 带下拉菜单的标签页 Home Help Dropdown 123456789101112&lt;ul class=&quot;nav nav-tabs&quot;&gt; ... &lt;li role=&quot;presentation&quot; class=&quot;dropdown&quot;&gt; &lt;a class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; href=&quot;#&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/a&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; ... &lt;/ul&gt; &lt;/li&gt; ...&lt;/ul&gt; 带下拉菜单的胶囊式标签页 Home Help Dropdown 123456789101112&lt;ul class=&quot;nav nav-pills&quot;&gt; ... &lt;li role=&quot;presentation&quot; class=&quot;dropdown&quot;&gt; &lt;a class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; href=&quot;#&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt; Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/a&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; ... &lt;/ul&gt; &lt;/li&gt; ...&lt;/ul&gt; 导航条默认样式的导航条导航条是在您的应用或网站中作为导航页头的响应式基础组件。它们在移动设备上可以折叠（并且可开可关），且在视口（viewport）宽度增加时逐渐变为水平展开模式。 两端对齐的导航条导航链接已经被弃用了。 导航条内所包含元素溢出由于 Bootstrap 并不知道你在导航条内放置的元素需要占据多宽的空间，你可能会遇到导航条中的内容折行的情况（也就是导航条占据两行）。解决办法如下： 减少导航条内所有元素所占据的宽度。 在某些尺寸的屏幕上（利用 响应式工具类）隐藏导航条内的一些元素。 修改导航条在水平排列和折叠排列互相转化时，触发这个转化的最小屏幕宽度值。可以通过修改 @grid-float-breakpoint 变量实现，或者自己重写相关的媒体查询代码，覆盖 Bootstrap 的默认值。 依赖 JavaScript 插件如果 JavaScript 被禁用，并且视口（viewport）足够窄，致使导航条折叠起来，导航条将不能被打开，.navbar-collapse 内所包含的内容也将不可见。 响应式导航条依赖 collapse 插件，定制 Bootstrap 的话时候必将其包含。 修改视口的阈值，从而影响导航条的排列模式当浏览器视口（viewport）的宽度小于 @grid-float-breakpoint 值时，导航条内部的元素变为折叠排列，也就是变现为移动设备展现模式；当浏览器视口（viewport）的宽度大于 @grid-float-breakpoint 值时，导航条内部的元素变为水平排列，也就是变现为非移动设备展现模式。通过调整源码中的这个值，就可以控制导航条何时堆叠排列，何时水平排列。默认值是 768px （小屏幕 – 或者说是平板 –的最小值，或者说是平板）。 导航条的可访问性务必使用 &lt;nav&gt; 元素，或者，如果使用的是通用的 &lt;div&gt; 元素的话，务必为导航条设置 role=&quot;navigation&quot; 属性，这样能够让使用辅助设备的用户明确知道这是一个导航区域。 BrandLink(current)LinkDropdown SubmitLinkDropdown 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;nav class=&quot;navbar navbar-default&quot;&gt; &lt;div class=&quot;container-fluid&quot;&gt; &lt;!-- Brand and toggle get grouped for better mobile display --&gt; &lt;div class=&quot;navbar-header&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#bs-example-navbar-collapse-1&quot; aria-expanded=&quot;false&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Brand&lt;/a&gt; &lt;/div&gt; &lt;!-- Collect the nav links, forms, and other content for toggling --&gt; &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;bs-example-navbar-collapse-1&quot;&gt; &lt;ul class=&quot;nav navbar-nav&quot;&gt; &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Link &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;dropdown&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;One more separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;form class=&quot;navbar-form navbar-left&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt; &lt;/form&gt; &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Link&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;dropdown&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; role=&quot;button&quot; aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;Dropdown &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt; &lt;/div&gt;&lt;!-- /.container-fluid --&gt;&lt;/nav&gt; 品牌图标将导航条内放置品牌标志的地方替换为 &lt;img&gt; 元素即可展示自己的品牌图标。由于 .navbar-brand 已经被设置了内补（padding）和高度（height），你需要根据自己的情况添加一些 CSS 代码从而覆盖默认设置。 [ Brand](../../../../../../../data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAB+0lEQVR4AcyYg5LkUBhG+1X2PdZGaW3btm3btm3bHttWrPomd1r/2Jn/VJ02TpxcH4CQ/dsuazWgzbIdrm9dZVd4pBz4zx2igTaFHrhvjneVXNHCSqIlFEjiwMyyyOBilRgGSqLNF1jnwNQdIvAt48C3IlBmHCiLQHC2zoHDu6zG1iXn6+y62ScxY9AODO6w0pvAqf23oSE4joOfH6OxfMoRnoGUm+de8wykbFt6wZtA07QwtNOqKh3ZbS3Wzz2F+1c/QJY0UCJ/J3kXWJfv7VhxCRRV1jGw7XI+gcO7rEFFRvdYxydwcPsVsC0bQdKScngt4iUTD4Fy/8p7PoHzRu1DclwmgmiqgUXjD3oTKHbAt869qdJ7l98jNTEblPTkXMwetpvnftA0LLHb4X8kiY9Kx6Q+W7wJtG0HR7fdrtYz+x7iya0vkEtUULIzCjC21wY+W/GYXusRH5kGytWTLxgEEhePPwhKYb7EK3BQuxWwTBuUkd3X8goUn6fMHLyTT+DCsQdAEXNzSMeVPAJHdF2DmH8poCREp3uwm7HsGq9J9q69iuunX6EgrwQVObjpBt8z6rdPfvE8kiiyhsvHnomrQx6BxYUyYiNS8f75H1w4/ISepDZLoDhNJ9cdNUquhRsv+6EP9oNH7Iff2A9g8h8CLt1gH0Qf9NMQAFnO60BJFQe0AAAAAElFTkSuQmCC) 123456789&lt;nav class=&quot;navbar navbar-default&quot;&gt; &lt;div class=&quot;container-fluid&quot;&gt; &lt;div class=&quot;navbar-header&quot;&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt; &lt;img alt=&quot;Brand&quot; src=&quot;...&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;/div&gt;&lt;/nav&gt; 表单将表单放置于 .navbar-form 之内可以呈现很好的垂直对齐，并在较窄的视口（viewport）中呈现折叠状态。 使用对齐选项可以规定其在导航条上出现的位置。 注意，.navbar-form 和 .form-inline 的大部分代码都一样，内部实现使用了 mixin。 某些表单组件，例如输入框组，可能需要设置一个固定宽度，从而在导航条内有合适的展现。 Brand Submit 123456&lt;form class=&quot;navbar-form navbar-left&quot; role=&quot;search&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;&lt;/form&gt; 移动设备上的注意事项在移动设备上，对于在 fixed 定位的元素内使用表单控件的情况有一些注意事项。请参考我们提供的浏览器支持情况相关的文档 。 为输入框添加 label 标签如果你没有为输入框添加 label 标签，屏幕阅读器将会遇到问题。对于导航条内的表单，可以通过添加 .sr-only 类隐藏 label 标签。 按钮对于不包含在 &lt;form&gt; 中的 &lt;button&gt; 元素，加上 .navbar-btn 后，可以让它在导航条里垂直居中。有一些对于为辅助设备提供可识别标签的方法，例如， aria-label、aria-labelledby 或者 title 属性。如果这些方法都没有，屏幕阅读器将使用 placeholder属性（如果这个属性存在的话），但是请注意，使用 placeholder 代替其他识别标签的方式是不推荐的。 BrandSign in 1&lt;button type=&quot;button&quot; class=&quot;btn btn-default navbar-btn&quot;&gt;Sign in&lt;/button&gt; 基于情境的用法就像标准的 按钮类 一样，.navbar-btn 可以被用在 &lt;a&gt; 和 &lt;input&gt; 元素上。然而，在 .navbar-nav 内，.navbar-btn 和标准的按钮类都不应该被用在 &lt;a&gt; 元素上。 文本把文本包裹在 .navbar-text中时，为了有正确的行距和颜色，通常使用 &lt;p&gt; 标签。 BrandSigned in as Mark Otto 1&lt;p class=&quot;navbar-text&quot;&gt;Signed in as Mark Otto&lt;/p&gt; 非导航的链接或许你希望在标准的导航组件之外添加标准链接，那么，使用 .navbar-link 类可以让链接有正确的默认颜色和反色设置。 BrandSigned in as Mark Otto 1&lt;p class=&quot;navbar-text navbar-right&quot;&gt;Signed in as &lt;a href=&quot;#&quot; class=&quot;navbar-link&quot;&gt;Mark Otto&lt;/a&gt;&lt;/p&gt; 组件排列通过添加 .navbar-left 和 .navbar-right 工具类让导航链接、表单、按钮或文本对齐。两个类都会通过 CSS 设置特定方向的浮动样式。例如，要对齐导航链接，就要把它们放在个分开的、应用了工具类的 &lt;ul&gt; 标签里。 这些类是 .pull-left 和 .pull-right 的 mixin 版本，但是他们被限定在了媒体查询（media query）中，这样可以更容易的在各种尺寸的屏幕上处理导航条组件。 向右侧对齐多个组件导航条目前不支持多个 .navbar-right 类。为了让内容之间有合适的空隙，我们为最后一个 .navbar-right 元素使用负边距（margin）。如果有多个元素使用这个类，它们的边距（margin）将不能按照你的预期正常展现。 我们将在 v4 版本中重写这个组件时重新审视这个功能。 固定在顶部添加 .navbar-fixed-top 类可以让导航条固定在顶部，还可包含一个 .container 或 .container-fluid 容器，从而让导航条居中，并在两侧添加内补（padding）。 BrandHomeLinkLink 12345&lt;nav class=&quot;navbar navbar-default navbar-fixed-top&quot;&gt; &lt;div class=&quot;container&quot;&gt; ... &lt;/div&gt;&lt;/nav&gt; 需要为 body 元素设置内补（padding）这个固定的导航条会遮住页面上的其它内容，除非你给 &lt;body&gt; 元素底部设置了 padding。用你自己的值，或用下面给出的代码都可以。提示：导航条的默认高度是 50px。 1body &#123; padding-top: 70px; &#125; Make sure to include this after the core Bootstrap CSS. 固定在底部添加 .navbar-fixed-bottom 类可以让导航条固定在底部，并且还可以包含一个 .container 或 .container-fluid 容器，从而让导航条居中，并在两侧添加内补（padding）。 BrandHomeLinkLink 12345&lt;nav class=&quot;navbar navbar-default navbar-fixed-bottom&quot;&gt; &lt;div class=&quot;container&quot;&gt; ... &lt;/div&gt;&lt;/nav&gt; 需要为 body 元素设置内补（padding）这个固定的导航条会遮住页面上的其它内容，除非你给 &lt;body&gt; 元素底部设置了 padding。用你自己的值，或用下面给出的代码都可以。提示：导航条的默认高度是 50px。 1body &#123; padding-bottom: 70px; &#125; Make sure to include this after the core Bootstrap CSS. 静止在顶部通过添加 .navbar-static-top 类即可创建一个与页面等宽度的导航条，它会随着页面向下滚动而消失。还可以包含一个 .container或 .container-fluid 容器，用于将导航条居中对齐并在两侧添加内补（padding）。 与 .navbar-fixed-* 类不同的是，你不用给 body 添加任何内补（padding）。 BrandHomeLinkLink 12345&lt;nav class=&quot;navbar navbar-default navbar-static-top&quot;&gt; &lt;div class=&quot;container&quot;&gt; ... &lt;/div&gt;&lt;/nav&gt; 反色的导航条通过添加 .navbar-inverse 类可以改变导航条的外观。 BrandHomeLinkLink 123&lt;nav class=&quot;navbar navbar-inverse&quot;&gt; ...&lt;/nav&gt; 路径导航在一个带有层次的导航结构中标明当前页面的位置。 各路径间的分隔符已经自动通过 CSS 的 :before 和 content 属性添加了。 Home Home Library Home Library Data 12345&lt;ol class=&quot;breadcrumb&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Home&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Library&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;active&quot;&gt;Data&lt;/li&gt;&lt;/ol&gt; 分页为您的网站或应用提供带有展示页码的分页组件，或者可以使用简单的翻页组件。 默认分页受 Rdio 的启发，我们提供了这个简单的分页组件，用在应用或搜索结果中超级棒。组件中的每个部分都很大，优点是容易点击、易缩放、点击区域大。 «12345» 12345678910111213141516171819&lt;nav aria-label=&quot;Page navigation&quot;&gt; &lt;ul class=&quot;pagination&quot;&gt; &lt;li&gt; &lt;a href=&quot;#&quot; aria-label=&quot;Previous&quot;&gt; &lt;span aria-hidden=&quot;true&quot;&gt;&amp;laquo;&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;1&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;3&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;4&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;5&lt;/a&gt;&lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot; aria-label=&quot;Next&quot;&gt; &lt;span aria-hidden=&quot;true&quot;&gt;&amp;raquo;&lt;/span&gt; &lt;/a&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/nav&gt; Labelling the pagination componentThe pagination component should be wrapped in a &lt;nav&gt; element to identify it as a navigation section to screen readers and other assistive technologies. In addition, as a page is likely to have more than one such navigation section already (such as the primary navigation in the header, or a sidebar navigation), it is advisable to provide a descriptive aria-label for the &lt;nav&gt; which reflects its purpose. For example, if the pagination component is used to navigate between a set of search results, an appropriate label could be aria-label=&quot;Search results pages&quot;. 禁用和激活状态链接在不同情况下可以定制。你可以给不能点击的链接添加 .disabled 类、给当前页添加 .active 类。 «1(current)2345» 1234567&lt;nav aria-label=&quot;...&quot;&gt; &lt;ul class=&quot;pagination&quot;&gt; &lt;li class=&quot;disabled&quot;&gt;&lt;a href=&quot;#&quot; aria-label=&quot;Previous&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;laquo;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;1 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; ... &lt;/ul&gt;&lt;/nav&gt; 我们建议将 active 或 disabled 状态的链接（即 &lt;a&gt; 标签）替换为 &lt;span&gt; 标签，或者在向前/向后的箭头处省略&lt;a&gt; 标签，这样就可以让其保持需要的样式而不能被点击。 12345678910111213&lt;nav aria-label=&quot;...&quot;&gt; &lt;ul class=&quot;pagination&quot;&gt; &lt;li class=&quot;disabled&quot;&gt; &lt;span&gt; &lt;span aria-hidden=&quot;true&quot;&gt;&amp;laquo;&lt;/span&gt; &lt;/span&gt; &lt;/li&gt; &lt;li class=&quot;active&quot;&gt; &lt;span&gt;1 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/span&gt; &lt;/li&gt; ... &lt;/ul&gt;&lt;/nav&gt; 尺寸想要更小或更大的分页？.pagination-lg 或 .pagination-sm 类提供了额外可供选择的尺寸。 «12345»«12345»«12345» 123&lt;nav aria-label=&quot;...&quot;&gt;&lt;ul class=&quot;pagination pagination-lg&quot;&gt;...&lt;/ul&gt;&lt;/nav&gt;&lt;nav aria-label=&quot;...&quot;&gt;&lt;ul class=&quot;pagination&quot;&gt;...&lt;/ul&gt;&lt;/nav&gt;&lt;nav aria-label=&quot;...&quot;&gt;&lt;ul class=&quot;pagination pagination-sm&quot;&gt;...&lt;/ul&gt;&lt;/nav&gt; 翻页用简单的标记和样式，就能做个上一页和下一页的简单翻页。用在像博客和杂志这样的简单站点上棒极了。 默认实例在默认的翻页中，链接居中对齐。 Previous Next 123456&lt;nav aria-label=&quot;...&quot;&gt; &lt;ul class=&quot;pager&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Previous&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Next&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/nav&gt; 对齐链接你还可以把链接向两端对齐： ← OlderNewer → 123456&lt;nav aria-label=&quot;...&quot;&gt; &lt;ul class=&quot;pager&quot;&gt; &lt;li class=&quot;previous&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;larr;&lt;/span&gt; Older&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;next&quot;&gt;&lt;a href=&quot;#&quot;&gt;Newer &lt;span aria-hidden=&quot;true&quot;&gt;&amp;rarr;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/nav&gt; 可选的禁用状态.disabled 类也可用于翻页中的链接。 ← OlderNewer → 123456&lt;nav aria-label=&quot;...&quot;&gt; &lt;ul class=&quot;pager&quot;&gt; &lt;li class=&quot;previous disabled&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;larr;&lt;/span&gt; Older&lt;/a&gt;&lt;/li&gt; &lt;li class=&quot;next&quot;&gt;&lt;a href=&quot;#&quot;&gt;Newer &lt;span aria-hidden=&quot;true&quot;&gt;&amp;rarr;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/nav&gt; 标签实例Example heading NewExample heading NewExample heading NewExample heading NewExample heading NewExample heading New1&lt;h3&gt;Example heading &lt;span class=&quot;label label-default&quot;&gt;New&lt;/span&gt;&lt;/h3&gt; 可用的变体用下面的任何一个类即可改变标签的外观。 Default Primary Success Info Warning Danger 123456&lt;span class=&quot;label label-default&quot;&gt;Default&lt;/span&gt;&lt;span class=&quot;label label-primary&quot;&gt;Primary&lt;/span&gt;&lt;span class=&quot;label label-success&quot;&gt;Success&lt;/span&gt;&lt;span class=&quot;label label-info&quot;&gt;Info&lt;/span&gt;&lt;span class=&quot;label label-warning&quot;&gt;Warning&lt;/span&gt;&lt;span class=&quot;label label-danger&quot;&gt;Danger&lt;/span&gt; 如果标签数量很多怎么办？如果你有大量的设置为 inline 属性的标签全部放在一个较窄的容器元素内，在页面上展示这些标签就会出现问题，每个标签就会有自己的一个 inline-block 元素（就像图标一样）。解决的办法是为每个标签都设置为 display: inline-block; 属性。关于这个问题以及实例，请参考 #13219 。 徽章给链接、导航等元素嵌套 &lt;span class=&quot;badge&quot;&gt; 元素，可以很醒目的展示新的或未读的信息条目。 Inbox 42Messages 4 12345&lt;a href=&quot;#&quot;&gt;Inbox &lt;span class=&quot;badge&quot;&gt;42&lt;/span&gt;&lt;/a&gt;&lt;button class=&quot;btn btn-primary&quot; type=&quot;button&quot;&gt; Messages &lt;span class=&quot;badge&quot;&gt;4&lt;/span&gt;&lt;/button&gt; Self collapsing如果没有新的或未读的信息条目，也就是说不包含任何内容，徽章组件能够自动隐藏（通过CSS的 :empty 选择符实现) 。 跨浏览器兼容性徽章组件在 Internet Explorer 8 浏览器中不会自动消失，因为 IE8 不支持 :empty 选择符。 适配导航元素的激活状态Bootstrap 提供了内置的样式，让胶囊式导航内处于激活状态的元素所包含的徽章展示相匹配的样式。 Home 42 Profile Messages 3 12345&lt;ul class=&quot;nav nav-pills&quot; role=&quot;tablist&quot;&gt; &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Home &lt;span class=&quot;badge&quot;&gt;42&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt; &lt;li role=&quot;presentation&quot;&gt;&lt;a href=&quot;#&quot;&gt;Messages &lt;span class=&quot;badge&quot;&gt;3&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; 巨幕这是一个轻量、灵活的组件，它能延伸至整个浏览器视口来展示网站上的关键内容。 Hello, world!This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information. Learn more 12345&lt;div class=&quot;jumbotron&quot;&gt; &lt;h1&gt;Hello, world!&lt;/h1&gt; &lt;p&gt;...&lt;/p&gt; &lt;p&gt;&lt;a class=&quot;btn btn-primary btn-lg&quot; href=&quot;#&quot; role=&quot;button&quot;&gt;Learn more&lt;/a&gt;&lt;/p&gt;&lt;/div&gt; 如果需要让巨幕组件的宽度与浏览器宽度一致并且没有圆角，请把此组件放在所有 .container 元素的外面，并在组件内部添加一个 .container 元素。 12345&lt;div class=&quot;jumbotron&quot;&gt; &lt;div class=&quot;container&quot;&gt; ... &lt;/div&gt;&lt;/div&gt; 页头页头组件能够为 h1 标签增加适当的空间，并且与页面的其他部分形成一定的分隔。它支持 h1 标签内内嵌 small 元素的默认效果，还支持大部分其他组件（需要增加一些额外的样式）。 Example page header Subtext for header123&lt;div class=&quot;page-header&quot;&gt; &lt;h1&gt;Example page header &lt;small&gt;Subtext for header&lt;/small&gt;&lt;/h1&gt;&lt;/div&gt; 缩略图通过缩略图组件扩展 Bootstrap 的 栅格系统，可以很容易地展示栅格样式的图像、视频、文本等内容。 如果你想实现一个类似 Pinterest 的页面效果（不同高度和/宽度的缩略图顺序排列）的话，你需要使用一个第三方插件，比如 Masonry、Isotope 或 Salvattore。 默认样式的实例Boostrap 缩略图的默认设计仅需最少的标签就能展示带链接的图片。 [ 100%x180](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTYyYjUyZjU0NGUgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNjJiNTJmNTQ0ZSI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+) [ 100%x180](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTYyYjUyZmEzZjIgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNjJiNTJmYTNmMiI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+) [ 100%x180](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTYyYjUyZjhjMTYgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNjJiNTJmOGMxNiI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+) [ 100%x180](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTYyYjUyZmFjZGEgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNjJiNTJmYWNkYSI+PHJlY3Qgd2lkdGg9IjE3MSIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI1OS41NTQ2ODc1IiB5PSI5NC41Ij4xNzF4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+) 12345678&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6 col-md-3&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;...&quot; alt=&quot;...&quot;&gt; &lt;/a&gt; &lt;/div&gt; ...&lt;/div&gt; 自定义内容添加一点点额外的标签，就可以把任何类型的 HTML 内容，例如标题、段落或按钮，加入缩略图组件内。 Thumbnail labelCras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit. Button Button Thumbnail labelCras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit. Button Button Thumbnail labelCras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit. Button Button 123456789101112&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-6 col-md-4&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;...&quot; alt=&quot;...&quot;&gt; &lt;div class=&quot;caption&quot;&gt; &lt;h3&gt;Thumbnail label&lt;/h3&gt; &lt;p&gt;...&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot; role=&quot;button&quot;&gt;Button&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-default&quot; role=&quot;button&quot;&gt;Button&lt;/a&gt;&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 警告框警告框组件通过提供一些灵活的预定义消息，为常见的用户动作提供反馈消息。 实例将任意文本和一个可选的关闭按钮组合在一起就能组成一个警告框，.alert 类是必须要设置的，另外我们还提供了有特殊意义的4个类（例如，.alert-success），代表不同的警告信息。 没有默认类警告框没有默认类，只有基类和修饰类。默认的灰色警告框并没有多少意义。所以您要使用一种有意义的警告类。目前提供了成功、消息、警告或危险。 Well done! You successfully read this important alert message. Heads up! This alert needs your attention, but it’s not super important. Warning! Better check yourself, you’re not looking too good. Oh snap! Change a few things up and try submitting again. 1234&lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;alert alert-info&quot; role=&quot;alert&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;alert alert-warning&quot; role=&quot;alert&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;...&lt;/div&gt; 可关闭的警告框为警告框添加一个可选的 .alert-dismissible 类和一个关闭按钮。 依赖警告框 JavaScript 插件如果需要为警告框组件提供关闭功能，请使用 jQuery 警告框插件。 ×Warning! Better check yourself, you’re not looking too good. 1234&lt;div class=&quot;alert alert-warning alert-dismissible&quot; role=&quot;alert&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt; &lt;strong&gt;Warning!&lt;/strong&gt; Better check yourself, you&apos;re not looking too good.&lt;/div&gt; 确保在所有设备上的正确行为务必给 &lt;button&gt; 元素添加 data-dismiss=&quot;alert&quot; 属性。 警告框中的链接用 .alert-link 工具类，可以为链接设置与当前警告框相符的颜色。 Well done! You successfully read this important alert message. Heads up! This alert needs your attention, but it’s not super important. Warning! Better check yourself, you’re not looking too good. Oh snap! Change a few things up and try submitting again. 123456789101112&lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;alert-link&quot;&gt;...&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;alert alert-info&quot; role=&quot;alert&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;alert-link&quot;&gt;...&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;alert alert-warning&quot; role=&quot;alert&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;alert-link&quot;&gt;...&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;alert-link&quot;&gt;...&lt;/a&gt;&lt;/div&gt; 进度条通过这些简单、灵活的进度条，为当前工作流程或动作提供实时反馈。 跨浏览器兼容性进度条组件使用了 CSS3 的 transition 和 animation 属性来完成一些特效。这些特性在 Internet Explorer 9 或以下版本中、Firefox 的老版本中没有被支持。Opera 12 不支持 animation 属性。 Content Security Policy (CSP) compatibilityIf your website has a Content Security Policy (CSP) which doesn’t allow style-src &#39;unsafe-inline&#39;, then you won’t be able to use inline style attributes to set progress bar widths as shown in our examples below. Alternative methods for setting the widths that are compatible with strict CSPs include using a little custom JavaScript (that sets element.style.width) or using custom CSS classes. 基本实例默认样式的进度条 60% Complete 12345&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;60&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 60%;&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;60% Complete&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; 带有提示标签的进度条将设置了 .sr-only 类的 &lt;span&gt; 标签从进度条组件中移除 类，从而让当前进度显示出来。 60% 12345&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;60&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 60%;&quot;&gt; 60% &lt;/div&gt;&lt;/div&gt; 在展示很低的百分比时，如果需要让文本提示能够清晰可见，可以为进度条设置 min-width 属性。 0% 2% 12345678910&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;0&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;min-width: 2em;&quot;&gt; 0% &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;2&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;min-width: 2em; width: 2%;&quot;&gt; 2% &lt;/div&gt;&lt;/div&gt; 根据情境变化效果进度条组件使用与按钮和警告框相同的类，根据不同情境展现相应的效果。 40% Complete (success) 20% Complete 60% Complete (warning) 80% Complete (danger) 1234567891011121314151617181920&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-success&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;40&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 40%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;40% Complete (success)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-info&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;20&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 20%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;20% Complete&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-warning&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;60&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 60%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;60% Complete (warning)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-danger&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;80&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 80%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;80% Complete (danger)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; 条纹效果通过渐变可以为进度条创建条纹效果，IE9 及更低版本不支持。 40% Complete (success) 20% Complete 60% Complete (warning) 80% Complete (danger) 1234567891011121314151617181920&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-success progress-bar-striped&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;40&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 40%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;40% Complete (success)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-info progress-bar-striped&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;20&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 20%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;20% Complete&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-warning progress-bar-striped&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;60&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 60%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;60% Complete (warning)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-danger progress-bar-striped&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;80&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 80%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;80% Complete (danger)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; 动画效果为 .progress-bar-striped 添加 .active 类，使其呈现出由右向左运动的动画效果。IE9 及更低版本的浏览器不支持。 45% Complete 12345&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-striped active&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;45&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width: 45%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;45% Complete&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; 堆叠效果把多个进度条放入同一个 .progress 中，使它们呈现堆叠的效果。 35% Complete (success) 20% Complete (warning) 10% Complete (danger) 1234567891011&lt;div class=&quot;progress&quot;&gt; &lt;div class=&quot;progress-bar progress-bar-success&quot; style=&quot;width: 35%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;35% Complete (success)&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;progress-bar progress-bar-warning progress-bar-striped&quot; style=&quot;width: 20%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;20% Complete (warning)&lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;progress-bar progress-bar-danger&quot; style=&quot;width: 10%&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;10% Complete (danger)&lt;/span&gt; &lt;/div&gt;&lt;/div&gt; 媒体对象这是一个抽象的样式，用以构建不同类型的组件，这些组件都具有在文本内容的左或右侧对齐的图片（就像博客评论或 Twitter 消息等）。 默认样式默认样式的媒体对象组件允许在一个内容块的左边或右边展示一个多媒体内容（图像、视频、音频）。 [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmYTdkOSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmZhN2Q5Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Media heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNTRmNCB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY1NGY0Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Media heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmN2Q3ZSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY3ZDdlIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Nested media headingMedia heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNGJlYyB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY0YmVjIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNDBiYyB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY0MGJjIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Media heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNDkzMSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY0OTMxIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) 1234567891011&lt;div class=&quot;media&quot;&gt; &lt;div class=&quot;media-left&quot;&gt; &lt;a href=&quot;#&quot;&gt; &lt;img class=&quot;media-object&quot; src=&quot;...&quot; alt=&quot;...&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h4 class=&quot;media-heading&quot;&gt;Media heading&lt;/h4&gt; ... &lt;/div&gt;&lt;/div&gt; .pull-left 和 .pull-right 这两个类以前也曾经被用在了媒体组件上，但是，从 v3.3.0 版本开始，他们就不再被建议使用了。.media-left 和 .media-right 替代了他们，不同之处是，在 html 结构中， .media-right 应当放在 .media-body 的后面。 对齐图片或其他媒体类型可以顶部、中部或底部对齐。默认是顶部对齐。 [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmOGY0YSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY4ZjRhIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Top aligned mediaCras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. Donec sed odio dui. Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmOGU0OSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY4ZTQ5Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Middle aligned mediaCras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. Donec sed odio dui. Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmODYxOSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY4NjE5Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Bottom aligned mediaCras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus. Donec sed odio dui. Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. 1234567891011&lt;div class=&quot;media&quot;&gt; &lt;div class=&quot;media-left media-middle&quot;&gt; &lt;a href=&quot;#&quot;&gt; &lt;img class=&quot;media-object&quot; src=&quot;...&quot; alt=&quot;...&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h4 class=&quot;media-heading&quot;&gt;Middle aligned media&lt;/h4&gt; ... &lt;/div&gt;&lt;/div&gt; 媒体对象列表用一点点额外的标记，就能在列表内使用媒体对象组件（对评论或文章列表很有用）。 [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNDgzYSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY0ODNhIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Media headingCras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. [ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNzA2YiB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY3MDZiIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Nested media heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmNTQ3NCB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmY1NDc0Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Nested media heading[ 64x64](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJmYWNlMiB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmZhY2UyIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) Nested media heading 12345678910111213&lt;ul class=&quot;media-list&quot;&gt; &lt;li class=&quot;media&quot;&gt; &lt;div class=&quot;media-left&quot;&gt; &lt;a href=&quot;#&quot;&gt; &lt;img class=&quot;media-object&quot; src=&quot;...&quot; alt=&quot;...&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;media-body&quot;&gt; &lt;h4 class=&quot;media-heading&quot;&gt;Media heading&lt;/h4&gt; ... &lt;/div&gt; &lt;/li&gt;&lt;/ul&gt; 列表组列表组是灵活又强大的组件，不仅能用于显示一组简单的元素，还能用于复杂的定制的内容。 基本实例最简单的列表组仅仅是一个带有多个列表条目的无序列表，另外还需要设置适当的类。我们提供了一些预定义的样式，你可以根据自身的需求通过 CSS 自己定制。 Cras justo odio Dapibus ac facilisis in Morbi leo risus Porta ac consectetur ac Vestibulum at eros 1234567&lt;ul class=&quot;list-group&quot;&gt; &lt;li class=&quot;list-group-item&quot;&gt;Cras justo odio&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Dapibus ac facilisis in&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Morbi leo risus&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Porta ac consectetur ac&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Vestibulum at eros&lt;/li&gt;&lt;/ul&gt; 徽章给列表组加入徽章组件，它会自动被放在右边。 14Cras justo odio 2Dapibus ac facilisis in 1Morbi leo risus 123456&lt;ul class=&quot;list-group&quot;&gt; &lt;li class=&quot;list-group-item&quot;&gt; &lt;span class=&quot;badge&quot;&gt;14&lt;/span&gt; Cras justo odio &lt;/li&gt;&lt;/ul&gt; 链接用 &lt;a&gt; 标签代替 &lt;li&gt; 标签可以组成一个全部是链接的列表组（还要注意的是，我们需要将 &lt;ul&gt; 标签替换为 &lt;div&gt; 标签）。没必要给列表组中的每个元素都加一个父元素。 Cras justo odioDapibus ac facilisis inMorbi leo risusPorta ac consectetur acVestibulum at eros 123456789&lt;div class=&quot;list-group&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item active&quot;&gt; Cras justo odio &lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Dapibus ac facilisis in&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Morbi leo risus&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Porta ac consectetur ac&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Vestibulum at eros&lt;/a&gt;&lt;/div&gt; 按钮列表组中的元素也可以直接就是按钮（也同时意味着父元素必须是 &lt;div&gt; 而不能用 &lt;ul&gt; 了），并且无需为每个按钮单独包裹一个父元素。注意不要使用标准的 .btn 类！ Cras justo odioDapibus ac facilisis inMorbi leo risusPorta ac consectetur acVestibulum at eros 1234567&lt;div class=&quot;list-group&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;list-group-item&quot;&gt;Cras justo odio&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;list-group-item&quot;&gt;Dapibus ac facilisis in&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;list-group-item&quot;&gt;Morbi leo risus&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;list-group-item&quot;&gt;Porta ac consectetur ac&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;list-group-item&quot;&gt;Vestibulum at eros&lt;/button&gt;&lt;/div&gt; 被禁用的条目为 .list-group-item 添加 .disabled 类可以让单个条目显示为灰色，表现出被禁用的效果。 Cras justo odioDapibus ac facilisis inMorbi leo risusPorta ac consectetur acVestibulum at eros 123456789&lt;div class=&quot;list-group&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item disabled&quot;&gt; Cras justo odio &lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Dapibus ac facilisis in&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Morbi leo risus&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Porta ac consectetur ac&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item&quot;&gt;Vestibulum at eros&lt;/a&gt;&lt;/div&gt; 情境类为列表中的条目添加情境类，默认样式或链接列表都可以。还可以为列表中的条目设置 .active 状态。 Dapibus ac facilisis in Cras sit amet nibh libero Porta ac consectetur ac Vestibulum at eros Dapibus ac facilisis inCras sit amet nibh liberoPorta ac consectetur acVestibulum at eros 123456789101112&lt;ul class=&quot;list-group&quot;&gt; &lt;li class=&quot;list-group-item list-group-item-success&quot;&gt;Dapibus ac facilisis in&lt;/li&gt; &lt;li class=&quot;list-group-item list-group-item-info&quot;&gt;Cras sit amet nibh libero&lt;/li&gt; &lt;li class=&quot;list-group-item list-group-item-warning&quot;&gt;Porta ac consectetur ac&lt;/li&gt; &lt;li class=&quot;list-group-item list-group-item-danger&quot;&gt;Vestibulum at eros&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;list-group&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item list-group-item-success&quot;&gt;Dapibus ac facilisis in&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item list-group-item-info&quot;&gt;Cras sit amet nibh libero&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item list-group-item-warning&quot;&gt;Porta ac consectetur ac&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item list-group-item-danger&quot;&gt;Vestibulum at eros&lt;/a&gt;&lt;/div&gt; 定制内容列表组中的每个元素都可以是任何 HTML 内容，甚至是像下面的带链接的列表组。 List group item headingDonec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.List group item headingDonec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.List group item headingDonec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit. 123456&lt;div class=&quot;list-group&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;list-group-item active&quot;&gt; &lt;h4 class=&quot;list-group-item-heading&quot;&gt;List group item heading&lt;/h4&gt; &lt;p class=&quot;list-group-item-text&quot;&gt;...&lt;/p&gt; &lt;/a&gt;&lt;/div&gt; 面版虽然不总是必须，但是某些时候你可能需要将某些 DOM 内容放到一个盒子里。对于这种情况，可以试试面板组件。 基本实例默认的 .panel 组件所做的只是设置基本的边框（border）和内补（padding）来包含内容。 Basic panel example 12345&lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-body&quot;&gt; Basic panel example &lt;/div&gt;&lt;/div&gt; 带标题的面版通过 .panel-heading 可以很简单地为面板加入一个标题容器。你也可以通过添加设置了 .panel-title 类的 &lt;h1&gt;-&lt;h6&gt; 标签，添加一个预定义样式的标题。不过，&lt;h1&gt;-&lt;h6&gt; 标签的字体大小将被 .panel-heading 的样式所覆盖。 为了给链接设置合适的颜色，务必将链接放到带有 .panel-title 类的标题标签内。 Panel heading without title Panel content Panel titlePanel content 123456789101112131415&lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-heading&quot;&gt;Panel heading without title&lt;/div&gt; &lt;div class=&quot;panel-body&quot;&gt; Panel content &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-heading&quot;&gt; &lt;h3 class=&quot;panel-title&quot;&gt;Panel title&lt;/h3&gt; &lt;/div&gt; &lt;div class=&quot;panel-body&quot;&gt; Panel content &lt;/div&gt;&lt;/div&gt; 带脚注的面版把按钮或次要的文本放入 .panel-footer 容器内。注意面版的脚注不会从情境效果中继承颜色，因为他们并不是主要内容。 Panel content Panel footer 123456&lt;div class=&quot;panel panel-default&quot;&gt; &lt;div class=&quot;panel-body&quot;&gt; Panel content &lt;/div&gt; &lt;div class=&quot;panel-footer&quot;&gt;Panel footer&lt;/div&gt;&lt;/div&gt; 情境效果像其他组件一样，可以简单地通过加入有情境效果的状态类，给特定的内容使用更针对特定情境的面版。 Panel titlePanel content Panel titlePanel content Panel titlePanel content Panel titlePanel content Panel titlePanel content 12345&lt;div class=&quot;panel panel-primary&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;panel panel-success&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;panel panel-info&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;panel panel-warning&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;panel panel-danger&quot;&gt;...&lt;/div&gt; 带表格的面版为面板中不需要边框的表格添加 .table 类，是整个面板看上去更像是一个整体设计。如果是带有 .panel-body 的面板，我们为表格的上方添加一个边框，看上去有分隔效果。 Panel heading Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit. # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123456789101112&lt;div class=&quot;panel panel-default&quot;&gt; &lt;!-- Default panel contents --&gt; &lt;div class=&quot;panel-heading&quot;&gt;Panel heading&lt;/div&gt; &lt;div class=&quot;panel-body&quot;&gt; &lt;p&gt;...&lt;/p&gt; &lt;/div&gt; &lt;!-- Table --&gt; &lt;table class=&quot;table&quot;&gt; ... &lt;/table&gt;&lt;/div&gt; 如果没有 .panel-body ，面版标题会和表格连接起来，没有空隙。 Panel heading # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123456789&lt;div class=&quot;panel panel-default&quot;&gt; &lt;!-- Default panel contents --&gt; &lt;div class=&quot;panel-heading&quot;&gt;Panel heading&lt;/div&gt; &lt;!-- Table --&gt; &lt;table class=&quot;table&quot;&gt; ... &lt;/table&gt;&lt;/div&gt; 带列表组的面版可以简单地在任何面版中加入具有最大宽度的列表组。 Panel heading Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit. Cras justo odio Dapibus ac facilisis in Morbi leo risus Porta ac consectetur ac Vestibulum at eros 12345678910111213141516&lt;div class=&quot;panel panel-default&quot;&gt; &lt;!-- Default panel contents --&gt; &lt;div class=&quot;panel-heading&quot;&gt;Panel heading&lt;/div&gt; &lt;div class=&quot;panel-body&quot;&gt; &lt;p&gt;...&lt;/p&gt; &lt;/div&gt; &lt;!-- List group --&gt; &lt;ul class=&quot;list-group&quot;&gt; &lt;li class=&quot;list-group-item&quot;&gt;Cras justo odio&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Dapibus ac facilisis in&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Morbi leo risus&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Porta ac consectetur ac&lt;/li&gt; &lt;li class=&quot;list-group-item&quot;&gt;Vestibulum at eros&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 具有响应式特性的嵌入内容根据被嵌入内容的外部容器的宽度，自动创建一个固定的比例，从而让浏览器自动确定视频或 slideshow 的尺寸，能够在各种设备上缩放。 这些规则被直接应用在 &lt;iframe&gt;、&lt;embed&gt;、&lt;video&gt; 和 &lt;object&gt; 元素上。如果你希望让最终样式与其他属性相匹配，还可以明确地使用一个派生出来的 .embed-responsive-item 类。 超级提示： 不需要为 &lt;iframe&gt; 元素设置 frameborder=&quot;0&quot; 属性，因为我们已经替你这样做了！ 123456789&lt;!-- 16:9 aspect ratio --&gt;&lt;div class=&quot;embed-responsive embed-responsive-16by9&quot;&gt; &lt;iframe class=&quot;embed-responsive-item&quot; src=&quot;...&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;!-- 4:3 aspect ratio --&gt;&lt;div class=&quot;embed-responsive embed-responsive-4by3&quot;&gt; &lt;iframe class=&quot;embed-responsive-item&quot; src=&quot;...&quot;&gt;&lt;/iframe&gt;&lt;/div&gt; Well默认效果把 Well 用在元素上，就能有嵌入（inset）的简单效果。 Look, I’m in a well! 1&lt;div class=&quot;well&quot;&gt;...&lt;/div&gt; 可选类/样式通过这两种可选修饰类，可以控制此组件的内补（padding）和圆角的设置。 Look, I’m in a large well! 1&lt;div class=&quot;well well-lg&quot;&gt;...&lt;/div&gt; Look, I’m in a small well! 1&lt;div class=&quot;well well-sm&quot;&gt;...&lt;/div&gt;","categories":[],"tags":[]},{"title":"","slug":"JavaScript/bootstrap3/全局样式","date":"2018-04-11T14:48:05.000Z","updated":"2018-04-11T14:48:59.000Z","comments":true,"path":"2018/04/11/JavaScript/bootstrap3/全局样式/","link":"","permalink":"http://io.stelawliet.top/2018/04/11/JavaScript/bootstrap3/全局样式/","excerpt":"","text":"全局 CSS 样式设置全局 CSS 样式；基本的 HTML 元素均可以通过 class 设置样式并得到增强效果；还有先进的栅格系统。 概览深入了解 Bootstrap 底层结构的关键部分，包括我们让 web 开发变得更好、更快、更强壮的最佳实践。 HTML5 文档类型Bootstrap 使用到的某些 HTML 元素和 CSS 属性需要将页面设置为 HTML5 文档类型。在你项目中的每个页面都要参照下面的格式进行设置。 1234&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh-CN&quot;&gt; ...&lt;/html&gt; 移动设备优先在 Bootstrap 2 中，我们对框架中的某些关键部分增加了对移动设备友好的样式。而在 Bootstrap 3 中，我们重写了整个框架，使其一开始就是对移动设备友好的。这次不是简单的增加一些可选的针对移动设备的样式，而是直接融合进了框架的内核中。也就是说，Bootstrap 是移动设备优先的。针对移动设备的样式融合进了框架的每个角落，而不是增加一个额外的文件。 为了确保适当的绘制和触屏缩放，需要在 &lt;head&gt; 之中添加 viewport 元数据标签。 1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; 在移动设备浏览器上，通过为视口（viewport）设置 meta 属性为 user-scalable=no 可以禁用其缩放（zooming）功能。这样禁用缩放功能后，用户只能滚动屏幕，就能让你的网站看上去更像原生应用的感觉。注意，这种方式我们并不推荐所有网站使用，还是要看你自己的情况而定！ 1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt; 排版与链接Bootstrap 排版、链接样式设置了基本的全局样式。分别是： 为 body 元素设置 background-color: #fff; 使用 @font-family-base、@font-size-base 和 @line-height-base 变量作为排版的基本参数 为所有链接设置了基本颜色 @link-color ，并且当链接处于 :hover 状态时才添加下划线 这些样式都能在 scaffolding.less 文件中找到对应的源码。 Normalize.css为了增强跨浏览器表现的一致性，我们使用了 Normalize.css，这是由 Nicolas Gallagher 和 Jonathan Neal 维护的一个CSS 重置样式库。 布局容器Bootstrap 需要为页面内容和栅格系统包裹一个 .container 容器。我们提供了两个作此用处的类。注意，由于 padding 等属性的原因，这两种 容器类不能互相嵌套。 .container 类用于固定宽度并支持响应式布局的容器。 123&lt;div class=&quot;container&quot;&gt; ...&lt;/div&gt; .container-fluid 类用于 100% 宽度，占据全部视口（viewport）的容器。 123&lt;div class=&quot;container-fluid&quot;&gt; ...&lt;/div&gt; 栅格系统Bootstrap 提供了一套响应式、移动设备优先的流式栅格系统，随着屏幕或视口（viewport）尺寸的增加，系统会自动分为最多12列。它包含了易于使用的预定义类，还有强大的mixin 用于生成更具语义的布局。 简介栅格系统用于通过一系列的行（row）与列（column）的组合来创建页面布局，你的内容就可以放入这些创建好的布局中。下面就介绍一下 Bootstrap 栅格系统的工作原理： “行（row）”必须包含在 .container （固定宽度）或 .container-fluid （100% 宽度）中，以便为其赋予合适的排列（aligment）和内补（padding）。 通过“行（row）”在水平方向创建一组“列（column）”。 你的内容应当放置于“列（column）”内，并且，只有“列（column）”可以作为行（row）”的直接子元素。 类似 .row 和 .col-xs-4 这种预定义的类，可以用来快速创建栅格布局。Bootstrap 源码中定义的 mixin 也可以用来创建语义化的布局。 通过为“列（column）”设置 padding 属性，从而创建列与列之间的间隔（gutter）。通过为 .row 元素设置负值 margin 从而抵消掉为 .container 元素设置的 padding，也就间接为“行（row）”所包含的“列（column）”抵消掉了padding。 负值的 margin就是下面的示例为什么是向外突出的原因。在栅格列中的内容排成一行。 栅格系统中的列是通过指定1到12的值来表示其跨越的范围。例如，三个等宽的列可以使用三个 .col-xs-4 来创建。 如果一“行（row）”中包含了的“列（column）”大于 12，多余的“列（column）”所在的元素将被作为一个整体另起一行排列。 栅格类适用于与屏幕宽度大于或等于分界点大小的设备 ， 并且针对小屏幕设备覆盖栅格类。 因此，在元素上应用任何 .col-md-*栅格类适用于与屏幕宽度大于或等于分界点大小的设备 ， 并且针对小屏幕设备覆盖栅格类。 因此，在元素上应用任何 .col-lg-*不存在， 也影响大屏幕设备。 通过研究后面的实例，可以将这些原理应用到你的代码中。 媒体查询在栅格系统中，我们在 Less 文件中使用以下媒体查询（media query）来创建关键的分界点阈值。 1234567891011/* 超小屏幕（手机，小于 768px） *//* 没有任何媒体查询相关的代码，因为这在 Bootstrap 中是默认的（还记得 Bootstrap 是移动设备优先的吗？） *//* 小屏幕（平板，大于等于 768px） */@media (min-width: @screen-sm-min) &#123; ... &#125;/* 中等屏幕（桌面显示器，大于等于 992px） */@media (min-width: @screen-md-min) &#123; ... &#125;/* 大屏幕（大桌面显示器，大于等于 1200px） */@media (min-width: @screen-lg-min) &#123; ... &#125; 我们偶尔也会在媒体查询代码中包含 max-width 从而将 CSS 的影响限制在更小范围的屏幕大小之内。 1234@media (max-width: @screen-xs-max) &#123; ... &#125;@media (min-width: @screen-sm-min) and (max-width: @screen-sm-max) &#123; ... &#125;@media (min-width: @screen-md-min) and (max-width: @screen-md-max) &#123; ... &#125;@media (min-width: @screen-lg-min) &#123; ... &#125; 栅格参数通过下表可以详细查看 Bootstrap 的栅格系统是如何在多种屏幕设备上工作的。 超小屏幕 手机 (&lt;768px) 小屏幕 平板 (≥768px) 中等屏幕 桌面显示器 (≥992px) 大屏幕 大桌面显示器 (≥1200px) 栅格系统行为 总是水平排列 开始是堆叠在一起的，当大于这些阈值时将变为水平排列C .container 最大宽度 None （自动） 750px 970px 1170px 类前缀 .col-xs- .col-sm- .col-md- .col-lg- 列（column）数 12 最大列（column）宽 自动 ~62px ~81px ~97px 槽（gutter）宽 30px （每列左右均有 15px） 可嵌套 是 偏移（Offsets） 是 列排序 是 实例：从堆叠到水平排列使用单一的一组 .col-md-* 栅格类，就可以创建一个基本的栅格系统，在手机和平板设备上一开始是堆叠在一起的（超小屏幕到小屏幕这一范围），在桌面（中等）屏幕设备上变为水平排列。所有“列（column）必须放在 ” .row 内。 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-1 .col-md-8 .col-md-4 .col-md-4 .col-md-4 .col-md-4 .col-md-6 .col-md-6 123456789101112131415161718192021222324252627&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt; &lt;div class=&quot;col-md-1&quot;&gt;.col-md-1&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-8&quot;&gt;.col-md-8&lt;/div&gt; &lt;div class=&quot;col-md-4&quot;&gt;.col-md-4&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-4&quot;&gt;.col-md-4&lt;/div&gt; &lt;div class=&quot;col-md-4&quot;&gt;.col-md-4&lt;/div&gt; &lt;div class=&quot;col-md-4&quot;&gt;.col-md-4&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-6&quot;&gt;.col-md-6&lt;/div&gt; &lt;div class=&quot;col-md-6&quot;&gt;.col-md-6&lt;/div&gt;&lt;/div&gt; 实例：流式布局容器将最外面的布局元素 .container 修改为 .container-fluid，就可以将固定宽度的栅格布局转换为 100% 宽度的布局。 12345&lt;div class=&quot;container-fluid&quot;&gt; &lt;div class=&quot;row&quot;&gt; ... &lt;/div&gt;&lt;/div&gt; 实例：移动设备和桌面屏幕是否不希望在小屏幕设备上所有列都堆叠在一起？那就使用针对超小屏幕和中等屏幕设备所定义的类吧，即 .col-xs-* 和 .col-md-*。请看下面的实例，研究一下这些是如何工作的。 .col-xs-12 .col-md-8 .col-xs-6 .col-md-4 .col-xs-6 .col-md-4 .col-xs-6 .col-md-4 .col-xs-6 .col-md-4 .col-xs-6 .col-xs-6 123456789101112131415161718&lt;!-- Stack the columns on mobile by making one full-width and the other half-width --&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-12 col-md-8&quot;&gt;.col-xs-12 .col-md-8&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-md-4&quot;&gt;.col-xs-6 .col-md-4&lt;/div&gt;&lt;/div&gt;&lt;!-- Columns start at 50% wide on mobile and bump up to 33.3% wide on desktop --&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6 col-md-4&quot;&gt;.col-xs-6 .col-md-4&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-md-4&quot;&gt;.col-xs-6 .col-md-4&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-md-4&quot;&gt;.col-xs-6 .col-md-4&lt;/div&gt;&lt;/div&gt;&lt;!-- Columns are always 50% wide, on mobile and desktop --&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6&quot;&gt;.col-xs-6&lt;/div&gt; &lt;div class=&quot;col-xs-6&quot;&gt;.col-xs-6&lt;/div&gt;&lt;/div&gt; 实例：手机、平板、桌面在上面案例的基础上，通过使用针对平板设备的 .col-sm-* 类，我们来创建更加动态和强大的布局吧。 .col-xs-12 .col-sm-6 .col-md-8 .col-xs-6 .col-md-4 .col-xs-6 .col-sm-4 .col-xs-6 .col-sm-4 .col-xs-6 .col-sm-4 1234567891011&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-12 col-sm-6 col-md-8&quot;&gt;.col-xs-12 .col-sm-6 .col-md-8&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-md-4&quot;&gt;.col-xs-6 .col-md-4&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6 col-sm-4&quot;&gt;.col-xs-6 .col-sm-4&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-4&quot;&gt;.col-xs-6 .col-sm-4&lt;/div&gt; &lt;!-- Optional: clear the XS cols if their content doesn&apos;t match in height --&gt; &lt;div class=&quot;clearfix visible-xs-block&quot;&gt;&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-4&quot;&gt;.col-xs-6 .col-sm-4&lt;/div&gt;&lt;/div&gt; 实例：多余的列（column）将另起一行排列如果在一个 .row 内包含的列（column）大于12个，包含多余列（column）的元素将作为一个整体单元被另起一行排列。 .col-xs-9 .col-xs-4Since 9 + 4 = 13 &gt; 12, this 4-column-wide div gets wrapped onto a new line as one contiguous unit. .col-xs-6Subsequent columns continue along the new line. 12345&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-9&quot;&gt;.col-xs-9&lt;/div&gt; &lt;div class=&quot;col-xs-4&quot;&gt;.col-xs-4&lt;br&gt;Since 9 + 4 = 13 &amp;gt; 12, this 4-column-wide div gets wrapped onto a new line as one contiguous unit.&lt;/div&gt; &lt;div class=&quot;col-xs-6&quot;&gt;.col-xs-6&lt;br&gt;Subsequent columns continue along the new line.&lt;/div&gt;&lt;/div&gt; 响应式列重置即便有上面给出的四组栅格class，你也不免会碰到一些问题，例如，在某些阈值时，某些列可能会出现比别的列高的情况。为了克服这一问题，建议联合使用 .clearfix 和 响应式工具类。 .col-xs-6 .col-sm-3Resize your viewport or check it out on your phone for an example. .col-xs-6 .col-sm-3 .col-xs-6 .col-sm-3 .col-xs-6 .col-sm-3 12345678910&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6 col-sm-3&quot;&gt;.col-xs-6 .col-sm-3&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-3&quot;&gt;.col-xs-6 .col-sm-3&lt;/div&gt; &lt;!-- Add the extra clearfix for only the required viewport --&gt; &lt;div class=&quot;clearfix visible-xs-block&quot;&gt;&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-3&quot;&gt;.col-xs-6 .col-sm-3&lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-3&quot;&gt;.col-xs-6 .col-sm-3&lt;/div&gt;&lt;/div&gt; 除了列在分界点清除响应， 您可能需要 重置偏移, 后推或前拉某个列。请看此栅格实例。 123456789&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-5 col-md-6&quot;&gt;.col-sm-5 .col-md-6&lt;/div&gt; &lt;div class=&quot;col-sm-5 col-sm-offset-2 col-md-6 col-md-offset-0&quot;&gt;.col-sm-5 .col-sm-offset-2 .col-md-6 .col-md-offset-0&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-6 col-md-5 col-lg-6&quot;&gt;.col-sm-6 .col-md-5 .col-lg-6&lt;/div&gt; &lt;div class=&quot;col-sm-6 col-md-5 col-md-offset-2 col-lg-6 col-lg-offset-0&quot;&gt;.col-sm-6 .col-md-5 .col-md-offset-2 .col-lg-6 .col-lg-offset-0&lt;/div&gt;&lt;/div&gt; 列偏移使用 .col-md-offset-* 类可以将列向右侧偏移。这些类实际是通过使用 * 选择器为当前元素增加了左侧的边距（margin）。例如，.col-md-offset-4 类将 .col-md-4 元素向右侧偏移了4个列（column）的宽度。 .col-md-4 .col-md-4 .col-md-offset-4 .col-md-3 .col-md-offset-3 .col-md-3 .col-md-offset-3 .col-md-6 .col-md-offset-3 1234567891011&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-4&quot;&gt;.col-md-4&lt;/div&gt; &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;.col-md-4 .col-md-offset-4&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-3 col-md-offset-3&quot;&gt;.col-md-3 .col-md-offset-3&lt;/div&gt; &lt;div class=&quot;col-md-3 col-md-offset-3&quot;&gt;.col-md-3 .col-md-offset-3&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-6 col-md-offset-3&quot;&gt;.col-md-6 .col-md-offset-3&lt;/div&gt;&lt;/div&gt; You can also override offsets from lower grid tiers with .col-*-offset-0 classes. 12345678&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-6 col-sm-4&quot;&gt; &lt;/div&gt; &lt;div class=&quot;col-xs-6 col-sm-4&quot;&gt; &lt;/div&gt; &lt;div class=&quot;col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-0&quot;&gt; &lt;/div&gt;&lt;/div&gt; 嵌套列为了使用内置的栅格系统将内容再次嵌套，可以通过添加一个新的 .row 元素和一系列 .col-sm-* 元素到已经存在的 .col-sm-* 元素内。被嵌套的行（row）所包含的列（column）的个数不能超过12（其实，没有要求你必须占满12列）。 Level 2: .col-xs-8 .col-sm-6 Level 2: .col-xs-4 .col-sm-6 12345678910111213&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-sm-9&quot;&gt; Level 1: .col-sm-9 &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-8 col-sm-6&quot;&gt; Level 2: .col-xs-8 .col-sm-6 &lt;/div&gt; &lt;div class=&quot;col-xs-4 col-sm-6&quot;&gt; Level 2: .col-xs-4 .col-sm-6 &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 列排序通过使用 .col-md-push-* 和 .col-md-pull-* 类就可以很容易的改变列（column）的顺序。 .col-md-9 .col-md-push-3 .col-md-3 .col-md-pull-9 1234&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-9 col-md-push-3&quot;&gt;.col-md-9 .col-md-push-3&lt;/div&gt; &lt;div class=&quot;col-md-3 col-md-pull-9&quot;&gt;.col-md-3 .col-md-pull-9&lt;/div&gt;&lt;/div&gt; Less mixin 和变量除了用于快速布局的预定义栅格类，Bootstrap 还包含了一组 Less 变量和 mixin 用于帮你生成简单、语义化的布局。 变量通过变量来定义列数、槽（gutter）宽、媒体查询阈值（用于确定合适让列浮动）。我们使用这些变量生成预定义的栅格类，如上所示，还有如下所示的定制 mixin。 123@grid-columns: 12;@grid-gutter-width: 30px;@grid-float-breakpoint: 768px; mixinmixin 用来和栅格变量一同使用，为每个列（column）生成语义化的 CSS 代码。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131// Creates a wrapper for a series of columns.make-row(@gutter: @grid-gutter-width) &#123; // Then clear the floated columns .clearfix(); @media (min-width: @screen-sm-min) &#123; margin-left: (@gutter / -2); margin-right: (@gutter / -2); &#125; // Negative margin nested rows out to align the content of columns .row &#123; margin-left: (@gutter / -2); margin-right: (@gutter / -2); &#125;&#125;// Generate the extra small columns.make-xs-column(@columns; @gutter: @grid-gutter-width) &#123; position: relative; // Prevent columns from collapsing when empty min-height: 1px; // Inner gutter via padding padding-left: (@gutter / 2); padding-right: (@gutter / 2); // Calculate width based on number of columns available @media (min-width: @grid-float-breakpoint) &#123; float: left; width: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the small columns.make-sm-column(@columns; @gutter: @grid-gutter-width) &#123; position: relative; // Prevent columns from collapsing when empty min-height: 1px; // Inner gutter via padding padding-left: (@gutter / 2); padding-right: (@gutter / 2); // Calculate width based on number of columns available @media (min-width: @screen-sm-min) &#123; float: left; width: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the small column offsets.make-sm-column-offset(@columns) &#123; @media (min-width: @screen-sm-min) &#123; margin-left: percentage((@columns / @grid-columns)); &#125;&#125;.make-sm-column-push(@columns) &#123; @media (min-width: @screen-sm-min) &#123; left: percentage((@columns / @grid-columns)); &#125;&#125;.make-sm-column-pull(@columns) &#123; @media (min-width: @screen-sm-min) &#123; right: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the medium columns.make-md-column(@columns; @gutter: @grid-gutter-width) &#123; position: relative; // Prevent columns from collapsing when empty min-height: 1px; // Inner gutter via padding padding-left: (@gutter / 2); padding-right: (@gutter / 2); // Calculate width based on number of columns available @media (min-width: @screen-md-min) &#123; float: left; width: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the medium column offsets.make-md-column-offset(@columns) &#123; @media (min-width: @screen-md-min) &#123; margin-left: percentage((@columns / @grid-columns)); &#125;&#125;.make-md-column-push(@columns) &#123; @media (min-width: @screen-md-min) &#123; left: percentage((@columns / @grid-columns)); &#125;&#125;.make-md-column-pull(@columns) &#123; @media (min-width: @screen-md-min) &#123; right: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the large columns.make-lg-column(@columns; @gutter: @grid-gutter-width) &#123; position: relative; // Prevent columns from collapsing when empty min-height: 1px; // Inner gutter via padding padding-left: (@gutter / 2); padding-right: (@gutter / 2); // Calculate width based on number of columns available @media (min-width: @screen-lg-min) &#123; float: left; width: percentage((@columns / @grid-columns)); &#125;&#125;// Generate the large column offsets.make-lg-column-offset(@columns) &#123; @media (min-width: @screen-lg-min) &#123; margin-left: percentage((@columns / @grid-columns)); &#125;&#125;.make-lg-column-push(@columns) &#123; @media (min-width: @screen-lg-min) &#123; left: percentage((@columns / @grid-columns)); &#125;&#125;.make-lg-column-pull(@columns) &#123; @media (min-width: @screen-lg-min) &#123; right: percentage((@columns / @grid-columns)); &#125;&#125; 实例展示你可以重新修改这些变量的值，或者用默认值调用这些 mixin。下面就是一个利用默认设置生成两列布局（列之间有间隔）的案例。 12345678910.wrapper &#123; .make-row();&#125;.content-main &#123; .make-lg-column(8);&#125;.content-secondary &#123; .make-lg-column(3); .make-lg-column-offset(1);&#125; 1234&lt;div class=&quot;wrapper&quot;&gt; &lt;div class=&quot;content-main&quot;&gt;...&lt;/div&gt; &lt;div class=&quot;content-secondary&quot;&gt;...&lt;/div&gt;&lt;/div&gt; 排版标题HTML 中的所有标题标签，&lt;h1&gt; 到 &lt;h6&gt; 均可使用。另外，还提供了 .h1 到 .h6 类，为的是给内联（inline）属性的文本赋予标题的样式。 h1. Bootstrap heading Semibold 36px h2. Bootstrap heading Semibold 30px h3. Bootstrap heading Semibold 24px h4. Bootstrap heading Semibold 18px h5. Bootstrap heading Semibold 14px h6. Bootstrap heading Semibold 12px 123456&lt;h1&gt;h1. Bootstrap heading&lt;/h1&gt;&lt;h2&gt;h2. Bootstrap heading&lt;/h2&gt;&lt;h3&gt;h3. Bootstrap heading&lt;/h3&gt;&lt;h4&gt;h4. Bootstrap heading&lt;/h4&gt;&lt;h5&gt;h5. Bootstrap heading&lt;/h5&gt;&lt;h6&gt;h6. Bootstrap heading&lt;/h6&gt; 在标题内还可以包含 &lt;small&gt; 标签或赋予 .small 类的元素，可以用来标记副标题。 h1. Bootstrap heading Secondary text h2. Bootstrap heading Secondary text h3. Bootstrap heading Secondary text h4. Bootstrap heading Secondary text h5. Bootstrap heading Secondary text h6. Bootstrap heading Secondary text 123456&lt;h1&gt;h1. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h1&gt;&lt;h2&gt;h2. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h2&gt;&lt;h3&gt;h3. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h3&gt;&lt;h4&gt;h4. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h4&gt;&lt;h5&gt;h5. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h5&gt;&lt;h6&gt;h6. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h6&gt; 页面主体Bootstrap 将全局 font-size 设置为 14px，line-height 设置为 1.428。这些属性直接赋予 &lt;body&gt; 元素和所有段落元素。另外，&lt;p&gt; （段落）元素还被设置了等于 1/2 行高（即 10px）的底部外边距（margin）。 Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Donec ullamcorper nulla non metus auctor fringilla. Maecenas sed diam eget risus varius blandit sit amet non magna. Donec id elit non mi porta gravida at eget metus. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. 1&lt;p&gt;...&lt;/p&gt; 中心内容通过添加 .lead 类可以让段落突出显示。 Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Duis mollis, est non commodo luctus. 1&lt;p class=&quot;lead&quot;&gt;...&lt;/p&gt; 使用 Less 工具构建variables.less 文件中定义的两个 Less 变量决定了排版尺寸：@font-size-base 和 @line-height-base。第一个变量定义了全局 font-size 基准，第二个变量是 line-height 基准。我们使用这些变量和一些简单的公式计算出其它所有页面元素的 margin、 padding 和 line-height。自定义这些变量即可改变 Bootstrap 的默认样式。 内联文本元素Marked textFor highlighting a run of text due to its relevance in another context, use the &lt;mark&gt; tag. You can use the mark tag to highlight text. 1You can use the mark tag to &lt;mark&gt;highlight&lt;/mark&gt; text. 被删除的文本对于被删除的文本使用 &lt;del&gt; 标签。 This line of text is meant to be treated as deleted text. 1&lt;del&gt;This line of text is meant to be treated as deleted text.&lt;/del&gt; 无用文本对于没用的文本使用 &lt;s&gt; 标签。 This line of text is meant to be treated as no longer accurate. 1&lt;s&gt;This line of text is meant to be treated as no longer accurate.&lt;/s&gt; 插入文本额外插入的文本使用 &lt;ins&gt; 标签。 This line of text is meant to be treated as an addition to the document. 1&lt;ins&gt;This line of text is meant to be treated as an addition to the document.&lt;/ins&gt; 带下划线的文本为文本添加下划线，使用 &lt;u&gt; 标签。 This line of text will render as underlined 1&lt;u&gt;This line of text will render as underlined&lt;/u&gt; 利用 HTML 自带的表示强调意味的标签来为文本增添少量样式。 小号文本对于不需要强调的inline或block类型的文本，使用 &lt;small&gt; 标签包裹，其内的文本将被设置为父容器字体大小的 85%。标题元素中嵌套的 &lt;small&gt; 元素被设置不同的 font-size 。 你还可以为行内元素赋予 .small 类以代替任何 &lt;small&gt; 元素。 This line of text is meant to be treated as fine print. 1&lt;small&gt;This line of text is meant to be treated as fine print.&lt;/small&gt; 着重通过增加 font-weight 值强调一段文本。 The following snippet of text is rendered as bold text. 1&lt;strong&gt;rendered as bold text&lt;/strong&gt; 斜体用斜体强调一段文本。 The following snippet of text is rendered as italicized text. 1&lt;em&gt;rendered as italicized text&lt;/em&gt; Alternate elements在 HTML5 中可以放心使用 &lt;b&gt; 和 &lt;i&gt; 标签。&lt;b&gt; 用于高亮单词或短语，不带有任何着重的意味；而 &lt;i&gt; 标签主要用于发言、技术词汇等。 对齐通过文本对齐类，可以简单方便的将文字重新对齐。 Left aligned text. Center aligned text. Right aligned text. Justified text. No wrap text. 12345&lt;p class=&quot;text-left&quot;&gt;Left aligned text.&lt;/p&gt;&lt;p class=&quot;text-center&quot;&gt;Center aligned text.&lt;/p&gt;&lt;p class=&quot;text-right&quot;&gt;Right aligned text.&lt;/p&gt;&lt;p class=&quot;text-justify&quot;&gt;Justified text.&lt;/p&gt;&lt;p class=&quot;text-nowrap&quot;&gt;No wrap text.&lt;/p&gt; 改变大小写通过这几个类可以改变文本的大小写。 lowercased text. UPPERCASED TEXT. Capitalized Text. 123&lt;p class=&quot;text-lowercase&quot;&gt;Lowercased text.&lt;/p&gt;&lt;p class=&quot;text-uppercase&quot;&gt;Uppercased text.&lt;/p&gt;&lt;p class=&quot;text-capitalize&quot;&gt;Capitalized text.&lt;/p&gt; 缩略语当鼠标悬停在缩写和缩写词上时就会显示完整内容，Bootstrap 实现了对 HTML 的 &lt;abbr&gt; 元素的增强样式。缩略语元素带有 title 属性，外观表现为带有较浅的虚线框，鼠标移至上面时会变成带有“问号”的指针。如想看完整的内容可把鼠标悬停在缩略语上（对使用辅助技术的用户也可见）, 但需要包含 title 属性。 基本缩略语An abbreviation of the word attribute is attr. 1&lt;abbr title=&quot;attribute&quot;&gt;attr&lt;/abbr&gt; 首字母缩略语为缩略语添加 .initialism 类，可以让 font-size 变得稍微小些。 HTML is the best thing since sliced bread. 1&lt;abbr title=&quot;HyperText Markup Language&quot; class=&quot;initialism&quot;&gt;HTML&lt;/abbr&gt; 地址让联系信息以最接近日常使用的格式呈现。在每行结尾添加 &lt;br&gt; 可以保留需要的样式。 Twitter, Inc.1355 Market Street, Suite 900San Francisco, CA 94103P: (123) 456-7890Full Namefirst.last@example.com 1234567891011&lt;address&gt; &lt;strong&gt;Twitter, Inc.&lt;/strong&gt;&lt;br&gt; 1355 Market Street, Suite 900&lt;br&gt; San Francisco, CA 94103&lt;br&gt; &lt;abbr title=&quot;Phone&quot;&gt;P:&lt;/abbr&gt; (123) 456-7890&lt;/address&gt;&lt;address&gt; &lt;strong&gt;Full Name&lt;/strong&gt;&lt;br&gt; &lt;a href=&quot;mailto:#&quot;&gt;first.last@example.com&lt;/a&gt;&lt;/address&gt; 引用在你的文档中引用其他来源的内容。 默认样式的引用将任何 HTML 元素包裹在 &lt;blockquote&gt; 中即可表现为引用样式。对于直接引用，我们建议用 &lt;p&gt; 标签。 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante. 123&lt;blockquote&gt; &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.&lt;/p&gt;&lt;/blockquote&gt; 多种引用样式对于标准样式的 &lt;blockquote&gt;，可以通过几个简单的变体就能改变风格和内容。 命名来源添加 &lt;footer&gt; 用于标明引用来源。来源的名称可以包裹进 &lt;cite&gt;标签中。 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante. Someone famous in Source Title 1234&lt;blockquote&gt; &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.&lt;/p&gt; &lt;footer&gt;Someone famous in &lt;cite title=&quot;Source Title&quot;&gt;Source Title&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt; 另一种展示风格通过赋予 .blockquote-reverse 类可以让引用呈现内容右对齐的效果。 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante. Someone famous in Source Title 123&lt;blockquote class=&quot;blockquote-reverse&quot;&gt; ...&lt;/blockquote&gt; 列表无序列表排列顺序无关紧要的一列元素。 Lorem ipsum dolor sit amet Consectetur adipiscing elit Integer molestie lorem at massa Facilisis in pretium nisl aliquet Nulla volutpat aliquam velit Phasellus iaculis neque Purus sodales ultricies Vestibulum laoreet porttitor sem Ac tristique libero volutpat at Faucibus porta lacus fringilla vel Aenean sit amet erat nunc Eget porttitor lorem 123&lt;ul&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ul&gt; 有序列表顺序至关重要的一组元素。 Lorem ipsum dolor sit amet Consectetur adipiscing elit Integer molestie lorem at massa Facilisis in pretium nisl aliquet Nulla volutpat aliquam velit Faucibus porta lacus fringilla vel Aenean sit amet erat nunc Eget porttitor lorem 123&lt;ol&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ol&gt; 无样式列表移除了默认的 list-style 样式和左侧外边距的一组元素（只针对直接子元素）。这是针对直接子元素的，也就是说，你需要对所有嵌套的列表都添加这个类才能具有同样的样式。 Lorem ipsum dolor sit amet Consectetur adipiscing elit Integer molestie lorem at massa Facilisis in pretium nisl aliquet Nulla volutpat aliquam velit Phasellus iaculis neque Purus sodales ultricies Vestibulum laoreet porttitor sem Ac tristique libero volutpat at Faucibus porta lacus fringilla vel Aenean sit amet erat nunc Eget porttitor lorem 123&lt;ul class=&quot;list-unstyled&quot;&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ul&gt; 内联列表通过设置 display: inline-block; 并添加少量的内补（padding），将所有元素放置于同一行。 Lorem ipsum Phasellus iaculis Nulla volutpat 123&lt;ul class=&quot;list-inline&quot;&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ul&gt; 描述带有描述的短语列表。 Description lists A description list is perfect for defining terms. Euismod Vestibulum id ligula porta felis euismod semper eget lacinia odio sem nec elit. Donec id elit non mi porta gravida at eget metus. Malesuada porta Etiam porta sem malesuada magna mollis euismod. 1234&lt;dl&gt; &lt;dt&gt;...&lt;/dt&gt; &lt;dd&gt;...&lt;/dd&gt;&lt;/dl&gt; 水平排列的描述.dl-horizontal 可以让 &lt;dl&gt; 内的短语及其描述排在一行。开始是像 &lt;dl&gt; 的默认样式堆叠在一起，随着导航条逐渐展开而排列在一行。 Description lists A description list is perfect for defining terms. Euismod Vestibulum id ligula porta felis euismod semper eget lacinia odio sem nec elit. Donec id elit non mi porta gravida at eget metus. Malesuada porta Etiam porta sem malesuada magna mollis euismod. Felis euismod semper eget lacinia Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. 1234&lt;dl class=&quot;dl-horizontal&quot;&gt; &lt;dt&gt;...&lt;/dt&gt; &lt;dd&gt;...&lt;/dd&gt;&lt;/dl&gt; 自动截断通过 text-overflow 属性，水平排列的描述列表将会截断左侧太长的短语。在较窄的视口（viewport）内，列表将变为默认堆叠排列的布局方式。 代码内联代码通过 &lt;code&gt; 标签包裹内联样式的代码片段。 For example, &lt;section&gt; should be wrapped as inline. 1For example, &lt;code&gt;&amp;lt;section&amp;gt;&lt;/code&gt; should be wrapped as inline. 用户输入通过 &lt;kbd&gt; 标签标记用户通过键盘输入的内容。 To switch directories, type cd followed by the name of the directory.To edit settings, press ctrl + , 12To switch directories, type &lt;kbd&gt;cd&lt;/kbd&gt; followed by the name of the directory.&lt;br&gt;To edit settings, press &lt;kbd&gt;&lt;kbd&gt;ctrl&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt;&lt;/kbd&gt; 代码块多行代码可以使用 &lt;pre&gt; 标签。为了正确的展示代码，注意将尖括号做转义处理。 1&lt;p&gt;Sample text here...&lt;/p&gt; 1&lt;pre&gt;&amp;lt;p&amp;gt;Sample text here...&amp;lt;/p&amp;gt;&lt;/pre&gt; 还可以使用 .pre-scrollable 类，其作用是设置 max-height 为 350px ，并在垂直方向展示滚动条。 变量通过 &lt;var&gt; 标签标记变量。 y = mx + b 1&lt;var&gt;y&lt;/var&gt; = &lt;var&gt;m&lt;/var&gt;&lt;var&gt;x&lt;/var&gt; + &lt;var&gt;b&lt;/var&gt; 程序输出通过 &lt;samp&gt; 标签来标记程序输出的内容。 This text is meant to be treated as sample output from a computer program. 1&lt;samp&gt;This text is meant to be treated as sample output from a computer program.&lt;/samp&gt; 表格基本实例为任意 &lt;table&gt; 标签添加 .table 类可以为其赋予基本的样式 — 少量的内补（padding）和水平方向的分隔线。这种方式看起来很多余！？但是我们觉得，表格元素使用的很广泛，如果我们为其赋予默认样式可能会影响例如日历和日期选择之类的插件，所以我们选择将此样式独立出来。 # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123&lt;table class=&quot;table&quot;&gt; ...&lt;/table&gt; 条纹状表格通过 .table-striped 类可以给 &lt;tbody&gt; 之内的每一行增加斑马条纹样式。 跨浏览器兼容性条纹状表格是依赖 :nth-child CSS 选择器实现的，而这一功能不被 Internet Explorer 8 支持。 # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123&lt;table class=&quot;table table-striped&quot;&gt; ...&lt;/table&gt; 带边框的表格添加 .table-bordered 类为表格和其中的每个单元格增加边框。 # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123&lt;table class=&quot;table table-bordered&quot;&gt; ...&lt;/table&gt; 鼠标悬停通过添加 .table-hover 类可以让 &lt;tbody&gt; 中的每一行对鼠标悬停状态作出响应。 # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123&lt;table class=&quot;table table-hover&quot;&gt; ...&lt;/table&gt; 紧缩表格通过添加 .table-condensed 类可以让表格更加紧凑，单元格中的内补（padding）均会减半。 # First Name Last Name Username 1 Mark Otto @mdo 2 Jacob Thornton @fat 3 Larry the Bird @twitter 123&lt;table class=&quot;table table-condensed&quot;&gt; ...&lt;/table&gt; 状态类通过这些状态类可以为行或单元格设置颜色。 Class 描述 .active 鼠标悬停在行或单元格上时所设置的颜色 .success 标识成功或积极的动作 .info 标识普通的提示信息或动作 .warning 标识警告或需要用户注意 .danger 标识危险或潜在的带来负面影响的动作 # Column heading Column heading Column heading 1 Column content Column content Column content 2 Column content Column content Column content 3 Column content Column content Column content 4 Column content Column content Column content 5 Column content Column content Column content 6 Column content Column content Column content 7 Column content Column content Column content 8 Column content Column content Column content 9 Column content Column content Column content 123456789101112131415&lt;!-- On rows --&gt;&lt;tr class=&quot;active&quot;&gt;...&lt;/tr&gt;&lt;tr class=&quot;success&quot;&gt;...&lt;/tr&gt;&lt;tr class=&quot;warning&quot;&gt;...&lt;/tr&gt;&lt;tr class=&quot;danger&quot;&gt;...&lt;/tr&gt;&lt;tr class=&quot;info&quot;&gt;...&lt;/tr&gt;&lt;!-- On cells (`td` or `th`) --&gt;&lt;tr&gt; &lt;td class=&quot;active&quot;&gt;...&lt;/td&gt; &lt;td class=&quot;success&quot;&gt;...&lt;/td&gt; &lt;td class=&quot;warning&quot;&gt;...&lt;/td&gt; &lt;td class=&quot;danger&quot;&gt;...&lt;/td&gt; &lt;td class=&quot;info&quot;&gt;...&lt;/td&gt;&lt;/tr&gt; 向使用辅助技术的用户传达用意通过为表格中的一行或一个单元格添加颜色而赋予不同的意义只是提供了一种视觉上的表现，并不能为使用辅助技术 – 例如屏幕阅读器 – 浏览网页的用户提供更多信息。因此，请确保通过颜色而赋予的不同意义可以通过内容本身来表达（即在相应行或单元格中的可见的文本内容）；或者通过包含额外的方式 – 例如应用了 .sr-only 类而隐藏的文本 – 来表达出来。 响应式表格将任何 .table 元素包裹在 .table-responsive 元素内，即可创建响应式表格，其会在小屏幕设备上（小于768px）水平滚动。当屏幕大于 768px 宽度时，水平滚动条消失。 垂直方向的内容截断响应式表格使用了 overflow-y: hidden 属性，这样就能将超出表格底部和顶部的内容截断。特别是，也可以截断下拉菜单和其他第三方组件。 Firefox 和 fieldset 元素Firefox 浏览器对 fieldset 元素设置了一些影响 width 属性的样式，导致响应式表格出现问题。可以使用下面提供的针对 Firefox 的 hack 代码解决，但是以下代码并未集成在 Bootstrap 中： 123@-moz-document url-prefix() &#123; fieldset &#123; display: table-cell; &#125;&#125; 更多信息请参考 this Stack Overflow answer. # Table heading Table heading Table heading Table heading Table heading Table heading 1 Table cell Table cell Table cell Table cell Table cell Table cell 2 Table cell Table cell Table cell Table cell Table cell Table cell 3 Table cell Table cell Table cell Table cell Table cell Table cell # Table heading Table heading Table heading Table heading Table heading Table heading 1 Table cell Table cell Table cell Table cell Table cell Table cell 2 Table cell Table cell Table cell Table cell Table cell Table cell 3 Table cell Table cell Table cell Table cell Table cell Table cell 12345&lt;div class=&quot;table-responsive&quot;&gt; &lt;table class=&quot;table&quot;&gt; ... &lt;/table&gt;&lt;/div&gt; 表单基本实例单独的表单控件会被自动赋予一些全局样式。所有设置了 .form-control 类的 &lt;input&gt;、&lt;textarea&gt; 和 &lt;select&gt; 元素都将被默认设置宽度属性为 width: 100%;。 将 label 元素和前面提到的控件包裹在 .form-group 中可以获得最好的排列。 Email addressPasswordFile inputExample block-level help text here.Check me outSubmit 123456789101112131415161718192021&lt;form&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;exampleInputEmail1&quot;&gt;Email address&lt;/label&gt; &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;exampleInputEmail1&quot; placeholder=&quot;Email&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;exampleInputPassword1&quot;&gt;Password&lt;/label&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;exampleInputPassword1&quot; placeholder=&quot;Password&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;exampleInputFile&quot;&gt;File input&lt;/label&gt; &lt;input type=&quot;file&quot; id=&quot;exampleInputFile&quot;&gt; &lt;p class=&quot;help-block&quot;&gt;Example block-level help text here.&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; Check me out &lt;/label&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;&lt;/form&gt; 不要将表单组和输入框组混合使用不要将表单组直接和输入框组混合使用。建议将输入框组嵌套到表单组中使用。 内联表单为 &lt;form&gt; 元素添加 .form-inline 类可使其内容左对齐并且表现为 inline-block 级别的控件。只适用于视口（viewport）至少在 768px 宽度时（视口宽度再小的话就会使表单折叠）。 可能需要手动设置宽度在 Bootstrap 中，输入框和单选/多选框控件默认被设置为 width: 100%; 宽度。在内联表单，我们将这些元素的宽度设置为 width: auto;，因此，多个控件可以排列在同一行。根据你的布局需求，可能需要一些额外的定制化组件。 一定要添加 label 标签如果你没有为每个输入控件设置 label 标签，屏幕阅读器将无法正确识别。对于这些内联表单，你可以通过为 label 设置 .sr-only 类将其隐藏。还有一些辅助技术提供label标签的替代方案，比如 aria-label、aria-labelledby 或 title 属性。如果这些都不存在，屏幕阅读器可能会采取使用 placeholder 属性，如果存在的话，使用占位符来替代其他的标记，但要注意，这种方法是不妥当的。 Name Email Send invitation 1234567891011&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;exampleInputName2&quot;&gt;Name&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;exampleInputName2&quot; placeholder=&quot;Jane Doe&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;exampleInputEmail2&quot;&gt;Email&lt;/label&gt; &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;exampleInputEmail2&quot; placeholder=&quot;jane.doe@example.com&quot;&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Send invitation&lt;/button&gt;&lt;/form&gt; Email address Password Remember me Sign in 12345678910111213141516&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;sr-only&quot; for=&quot;exampleInputEmail3&quot;&gt;Email address&lt;/label&gt; &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;exampleInputEmail3&quot; placeholder=&quot;Email&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;sr-only&quot; for=&quot;exampleInputPassword3&quot;&gt;Password&lt;/label&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;exampleInputPassword3&quot; placeholder=&quot;Password&quot;&gt; &lt;/div&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; Remember me &lt;/label&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Sign in&lt;/button&gt;&lt;/form&gt; Amount (in dollars)$.00 Transfer cash 1234567891011&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;sr-only&quot; for=&quot;exampleInputAmount&quot;&gt;Amount (in dollars)&lt;/label&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;div class=&quot;input-group-addon&quot;&gt;$&lt;/div&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;exampleInputAmount&quot; placeholder=&quot;Amount&quot;&gt; &lt;div class=&quot;input-group-addon&quot;&gt;.00&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Transfer cash&lt;/button&gt;&lt;/form&gt; 水平排列的表单通过为表单添加 .form-horizontal 类，并联合使用 Bootstrap 预置的栅格类，可以将 label 标签和控件组水平并排布局。这样做将改变 .form-group 的行为，使其表现为栅格系统中的行（row），因此就无需再额外添加 .row 了。 EmailPasswordRemember meSign in 12345678910111213141516171819202122232425262728&lt;form class=&quot;form-horizontal&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;inputEmail3&quot; class=&quot;col-sm-2 control-label&quot;&gt;Email&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;inputEmail3&quot; placeholder=&quot;Email&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;inputPassword3&quot; class=&quot;col-sm-2 control-label&quot;&gt;Password&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;inputPassword3&quot; placeholder=&quot;Password&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;div class=&quot;col-sm-offset-2 col-sm-10&quot;&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; Remember me &lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;div class=&quot;col-sm-offset-2 col-sm-10&quot;&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Sign in&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; 被支持的控件表单布局实例中展示了其所支持的标准表单控件。 输入框包括大部分表单控件、文本输入域控件，还支持所有 HTML5 类型的输入控件： text、password、datetime、datetime-local、date、month、time、week、number、email、url、search、tel 和 color。 必须添加类型声明只有正确设置了 type 属性的输入控件才能被赋予正确的样式。 1&lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Text input&quot;&gt; 输入控件组如需在文本输入域 &lt;input&gt; 前面或后面添加文本内容或按钮控件，请参考输入控件组。 文本域支持多行文本的表单控件。可根据需要改变 rows 属性。 1&lt;textarea class=&quot;form-control&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt; 多选和单选框多选框（checkbox）用于选择列表中的一个或多个选项，而单选框（radio）用于从多个选项中只选择一个。 Disabled checkboxes and radios are supported, but to provide a “not-allowed” cursor on hover of the parent &lt;label&gt;, you’ll need to add the .disabled class to the parent .radio, .radio-inline, .checkbox, or .checkbox-inline. 默认外观（堆叠在一起）Option one is this and that—be sure to include why it’s greatOption two is disabledOption one is this and that—be sure to include why it’s greatOption two can be something else and selecting it will deselect option oneOption three is disabled 12345678910111213141516171819202122232425262728293031&lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;&quot;&gt; Option one is this and that&amp;mdash;be sure to include why it&apos;s great &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;checkbox disabled&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;&quot; disabled&gt; Option two is disabled &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;radio&quot;&gt; &lt;label&gt; &lt;input type=&quot;radio&quot; name=&quot;optionsRadios&quot; id=&quot;optionsRadios1&quot; value=&quot;option1&quot; checked&gt; Option one is this and that&amp;mdash;be sure to include why it&apos;s great &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;radio&quot;&gt; &lt;label&gt; &lt;input type=&quot;radio&quot; name=&quot;optionsRadios&quot; id=&quot;optionsRadios2&quot; value=&quot;option2&quot;&gt; Option two can be something else and selecting it will deselect option one &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;radio disabled&quot;&gt; &lt;label&gt; &lt;input type=&quot;radio&quot; name=&quot;optionsRadios&quot; id=&quot;optionsRadios3&quot; value=&quot;option3&quot; disabled&gt; Option three is disabled &lt;/label&gt;&lt;/div&gt; 内联单选和多选框通过将 .checkbox-inline 或 .radio-inline 类应用到一系列的多选框（checkbox）或单选框（radio）控件上，可以使这些控件排列在一行。 1 2 31 2 3 12345678910111213141516171819&lt;label class=&quot;checkbox-inline&quot;&gt; &lt;input type=&quot;checkbox&quot; id=&quot;inlineCheckbox1&quot; value=&quot;option1&quot;&gt; 1&lt;/label&gt;&lt;label class=&quot;checkbox-inline&quot;&gt; &lt;input type=&quot;checkbox&quot; id=&quot;inlineCheckbox2&quot; value=&quot;option2&quot;&gt; 2&lt;/label&gt;&lt;label class=&quot;checkbox-inline&quot;&gt; &lt;input type=&quot;checkbox&quot; id=&quot;inlineCheckbox3&quot; value=&quot;option3&quot;&gt; 3&lt;/label&gt;&lt;label class=&quot;radio-inline&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;inlineRadioOptions&quot; id=&quot;inlineRadio1&quot; value=&quot;option1&quot;&gt; 1&lt;/label&gt;&lt;label class=&quot;radio-inline&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;inlineRadioOptions&quot; id=&quot;inlineRadio2&quot; value=&quot;option2&quot;&gt; 2&lt;/label&gt;&lt;label class=&quot;radio-inline&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;inlineRadioOptions&quot; id=&quot;inlineRadio3&quot; value=&quot;option3&quot;&gt; 3&lt;/label&gt; 不带label文本的Checkbox 和 radio如果需要 &lt;label&gt; 内没有文字，输入框（input）正是你所期望的。 目前只适用于非内联的 checkbox 和 radio。 请记住，仍然需要为使用辅助技术的用户提供某种形式的 label（例如，使用 aria-label）。 12345678910&lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;blankCheckbox&quot; value=&quot;option1&quot; aria-label=&quot;...&quot;&gt; &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;radio&quot;&gt; &lt;label&gt; &lt;input type=&quot;radio&quot; name=&quot;blankRadio&quot; id=&quot;blankRadio1&quot; value=&quot;option1&quot; aria-label=&quot;...&quot;&gt; &lt;/label&gt;&lt;/div&gt; 下拉列表（select）注意，很多原生选择菜单 - 即在 Safari 和 Chrome 中 - 的圆角是无法通过修改 border-radius 属性来改变的。 ​ 1 2 3 4 5 1234567&lt;select class=&quot;form-control&quot;&gt; &lt;option&gt;1&lt;/option&gt; &lt;option&gt;2&lt;/option&gt; &lt;option&gt;3&lt;/option&gt; &lt;option&gt;4&lt;/option&gt; &lt;option&gt;5&lt;/option&gt;&lt;/select&gt; 对于标记了 multiple 属性的 &lt;select&gt; 控件来说，默认显示多选项。 ​ 1 2 3 4 5 1234567&lt;select multiple class=&quot;form-control&quot;&gt; &lt;option&gt;1&lt;/option&gt; &lt;option&gt;2&lt;/option&gt; &lt;option&gt;3&lt;/option&gt; &lt;option&gt;4&lt;/option&gt; &lt;option&gt;5&lt;/option&gt;&lt;/select&gt; 静态控件如果需要在表单中将一行纯文本和 label 元素放置于同一行，为 &lt;p&gt; 元素添加 .form-control-static 类即可。 Emailemail@example.comPassword 1234567891011121314&lt;form class=&quot;form-horizontal&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;col-sm-2 control-label&quot;&gt;Email&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;p class=&quot;form-control-static&quot;&gt;email@example.com&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;inputPassword&quot; class=&quot;col-sm-2 control-label&quot;&gt;Password&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;inputPassword&quot; placeholder=&quot;Password&quot;&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; Emailemail@example.com Password Confirm identity 1234567891011&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;sr-only&quot;&gt;Email&lt;/label&gt; &lt;p class=&quot;form-control-static&quot;&gt;email@example.com&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;inputPassword2&quot; class=&quot;sr-only&quot;&gt;Password&lt;/label&gt; &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;inputPassword2&quot; placeholder=&quot;Password&quot;&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Confirm identity&lt;/button&gt;&lt;/form&gt; 焦点状态我们将某些表单控件的默认 outline 样式移除，然后对 :focus 状态赋予 box-shadow 属性。 演示:focus 状态在本文档中，我们为上面实例中的输入框赋予了自定义的样式，用于演示 .form-control 元素的 :focus 状态。 禁用状态为输入框设置 disabled 属性可以禁止其与用户有任何交互（焦点、输入等）。被禁用的输入框颜色更浅，并且还添加了 not-allowed鼠标状态。 1&lt;input class=&quot;form-control&quot; id=&quot;disabledInput&quot; type=&quot;text&quot; placeholder=&quot;Disabled input here...&quot; disabled&gt; 被禁用的 fieldset为&lt;fieldset&gt; 设置 disabled 属性,可以禁用 &lt;fieldset&gt; 中包含的所有控件。 &lt;a&gt; 标签的链接功能不受影响默认情况下，浏览器会将 &lt;fieldset disabled&gt; 内所有的原生的表单控件（&lt;input&gt;、&lt;select&gt; 和 &lt;button&gt; 元素）设置为禁用状态，防止键盘和鼠标与他们交互。然而，如果表单中还包含 &lt;a ... class=&quot;btn btn-*&quot;&gt; 元素，这些元素将只被赋予 pointer-events: none 属性。正如在关于 禁用状态的按钮 章节中（尤其是关于锚点元素的子章节中）所描述的那样，该 CSS 属性尚不规范，并且在 Opera 18 及更低版本的浏览器或 Internet Explorer 11 总没有得到全面支持，并且不会阻止键盘用户能够获取焦点或激活这些链接。所以为了安全起见，建议使用自定义 JavaScript 来禁用这些链接。 跨浏览器兼容性虽然 Bootstrap 会将这些样式应用到所有浏览器上，Internet Explorer 11 及以下浏览器中的 &lt;fieldset&gt; 元素并不完全支持 disabled 属性。因此建议在这些浏览器上通过 JavaScript 代码来禁用 &lt;fieldset&gt;。 Disabled inputDisabled select menu Disabled select Can’t check thisSubmit 1234567891011121314151617181920&lt;form&gt; &lt;fieldset disabled&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;disabledTextInput&quot;&gt;Disabled input&lt;/label&gt; &lt;input type=&quot;text&quot; id=&quot;disabledTextInput&quot; class=&quot;form-control&quot; placeholder=&quot;Disabled input&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;disabledSelect&quot;&gt;Disabled select menu&lt;/label&gt; &lt;select id=&quot;disabledSelect&quot; class=&quot;form-control&quot;&gt; &lt;option&gt;Disabled select&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; Can&apos;t check this &lt;/label&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt; &lt;/fieldset&gt;&lt;/form&gt; 只读状态为输入框设置 readonly 属性可以禁止用户修改输入框中的内容。处于只读状态的输入框颜色更浅（就像被禁用的输入框一样），但是仍然保留标准的鼠标状态。 1&lt;input class=&quot;form-control&quot; type=&quot;text&quot; placeholder=&quot;Readonly input here…&quot; readonly&gt; Help textBlock level help text for form controls. Associating help text with form controlsHelp text should be explicitly associated with the form control it relates to using the aria-describedby attribute. This will ensure that assistive technologies – such as screen readers – will announce this help text when the user focuses or enters the control. Input with help textA block of help text that breaks onto a new line and may extend beyond one line. 1234&lt;label class=&quot;sr-only&quot; for=&quot;inputHelpBlock&quot;&gt;Input with help text&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;inputHelpBlock&quot; class=&quot;form-control&quot; aria-describedby=&quot;helpBlock&quot;&gt;...&lt;span id=&quot;helpBlock&quot; class=&quot;help-block&quot;&gt;A block of help text that breaks onto a new line and may extend beyond one line.&lt;/span&gt; 校验状态Bootstrap 对表单控件的校验状态，如 error、warning 和 success 状态，都定义了样式。使用时，添加 .has-warning、.has-error或 .has-success 类到这些控件的父元素即可。任何包含在此元素之内的 .control-label、.form-control 和 .help-block 元素都将接受这些校验状态的样式。 将验证状态传达给辅助设备和盲人用户使用这些校验样式只是为表单控件提供一个可视的、基于色彩的提示，但是并不能将这种提示信息传达给使用辅助设备的用户 - 例如屏幕阅读器 - 或者色盲用户。 为了确保所有用户都能获取正确信息，Bootstrap 还提供了另一种提示方式。例如，你可以在表单控件的 &lt;label&gt; 标签上以文本的形式显示提示信息（就像下面代码中所展示的）；包含一个 Glyphicon 字体图标 （还有赋予 .sr-only 类的文本信息 - 参考Glyphicon 字体图标实例）；或者提供一个额外的 辅助信息 块。另外，对于使用辅助设备的用户，无效的表单控件还可以赋予一个 aria-invalid=&quot;true&quot; 属性。 Input with successA block of help text that breaks onto a new line and may extend beyond one line.Input with warningInput with errorCheckbox with successCheckbox with warningCheckbox with error 12345678910111213141516171819202122232425262728293031323334353637&lt;div class=&quot;form-group has-success&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputSuccess1&quot;&gt;Input with success&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputSuccess1&quot; aria-describedby=&quot;helpBlock2&quot;&gt; &lt;span id=&quot;helpBlock2&quot; class=&quot;help-block&quot;&gt;A block of help text that breaks onto a new line and may extend beyond one line.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-warning&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputWarning1&quot;&gt;Input with warning&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputWarning1&quot;&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-error&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputError1&quot;&gt;Input with error&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputError1&quot;&gt;&lt;/div&gt;&lt;div class=&quot;has-success&quot;&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;checkboxSuccess&quot; value=&quot;option1&quot;&gt; Checkbox with success &lt;/label&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;has-warning&quot;&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;checkboxWarning&quot; value=&quot;option1&quot;&gt; Checkbox with warning &lt;/label&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;has-error&quot;&gt; &lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;checkboxError&quot; value=&quot;option1&quot;&gt; Checkbox with error &lt;/label&gt; &lt;/div&gt;&lt;/div&gt; 添加额外的图标你还可以针对校验状态为输入框添加额外的图标。只需设置相应的 .has-feedback 类并添加正确的图标即可。 反馈图标（feedback icon）只能使用在文本输入框 元素上。 图标、label 和输入控件组对于不带有 label 标签的输入框以及右侧带有附加组件的输入框组，需要手动为其图标定位。为了让所有用户都能访问你的网站，我们强烈建议为所有输入框添加 label 标签。如果你不希望将 label 标签展示出来，可以通过添加 .sr-only 类来实现。如果的确不能添加 label 标签，请调整图标的 top 值。对于输入框组，请根据你的实际情况调整 right 值。 向辅助技术设备传递图标的含义为了确保辅助技术- 如屏幕阅读器 - 正确传达一个图标的含义，额外的隐藏的文本应包含在 .sr-only 类中，并明确关联使用了 aria-describedby 的表单控件。或者，以某些其他形式（例如，文本输入字段有一个特定的警告信息）传达含义，例如改变与表单控件实际相关联的 &lt;label&gt; 的文本。 虽然下面的例子已经提到各自表单控件本身的 &lt;label&gt; 文本的验证状态，上述技术（使用 .sr-only 文本 和 aria-describedby) ）已经包括了需要说明的目的。 Input with success(success)Input with warning(warning)Input with error(error)Input group with success@(success) 123456789101112131415161718192021222324252627&lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputSuccess2&quot;&gt;Input with success&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputSuccess2&quot; aria-describedby=&quot;inputSuccess2Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputSuccess2Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-warning has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputWarning2&quot;&gt;Input with warning&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputWarning2&quot; aria-describedby=&quot;inputWarning2Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-warning-sign form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputWarning2Status&quot; class=&quot;sr-only&quot;&gt;(warning)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-error has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputError2&quot;&gt;Input with error&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputError2&quot; aria-describedby=&quot;inputError2Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-remove form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputError2Status&quot; class=&quot;sr-only&quot;&gt;(error)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputGroupSuccess1&quot;&gt;Input group with success&lt;/label&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputGroupSuccess1&quot; aria-describedby=&quot;inputGroupSuccess1Status&quot;&gt; &lt;/div&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputGroupSuccess1Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt;&lt;/div&gt; 为水平排列的表单和内联表单设置可选的图标Input with success(success)Input group with success@(success) 123456789101112131415161718192021&lt;form class=&quot;form-horizontal&quot;&gt; &lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label col-sm-3&quot; for=&quot;inputSuccess3&quot;&gt;Input with success&lt;/label&gt; &lt;div class=&quot;col-sm-9&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputSuccess3&quot; aria-describedby=&quot;inputSuccess3Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputSuccess3Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label col-sm-3&quot; for=&quot;inputGroupSuccess2&quot;&gt;Input group with success&lt;/label&gt; &lt;div class=&quot;col-sm-9&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputGroupSuccess2&quot; aria-describedby=&quot;inputGroupSuccess2Status&quot;&gt; &lt;/div&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputGroupSuccess2Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; Input with success (success)Input group with success @(success) 12345678910111213141516171819&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputSuccess4&quot;&gt;Input with success&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputSuccess4&quot; aria-describedby=&quot;inputSuccess4Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputSuccess4Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt; &lt;/div&gt;&lt;/form&gt;&lt;form class=&quot;form-inline&quot;&gt; &lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label&quot; for=&quot;inputGroupSuccess3&quot;&gt;Input group with success&lt;/label&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputGroupSuccess3&quot; aria-describedby=&quot;inputGroupSuccess3Status&quot;&gt; &lt;/div&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputGroupSuccess3Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt; &lt;/div&gt;&lt;/form&gt; 可选的图标与设置 .sr-only 类的 label如果你使用 .sr-only 类来隐藏表单控件的 &lt;label&gt; （而不是使用其它标签选项，如 aria-label 属性）， 一旦它被添加，Bootstrap 会自动调整图标的位置。 Hidden label(success) Input group with success @ (success) 123456789101112131415&lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label sr-only&quot; for=&quot;inputSuccess5&quot;&gt;Hidden label&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputSuccess5&quot; aria-describedby=&quot;inputSuccess5Status&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputSuccess5Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;form-group has-success has-feedback&quot;&gt; &lt;label class=&quot;control-label sr-only&quot; for=&quot;inputGroupSuccess4&quot;&gt;Input group with success&lt;/label&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;span class=&quot;input-group-addon&quot;&gt;@&lt;/span&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;inputGroupSuccess4&quot; aria-describedby=&quot;inputGroupSuccess4Status&quot;&gt; &lt;/div&gt; &lt;span class=&quot;glyphicon glyphicon-ok form-control-feedback&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span id=&quot;inputGroupSuccess4Status&quot; class=&quot;sr-only&quot;&gt;(success)&lt;/span&gt;&lt;/div&gt; 控件尺寸通过 .input-lg 类似的类可以为控件设置高度，通过 .col-lg-* 类似的类可以为控件设置宽度。 高度尺寸创建大一些或小一些的表单控件以匹配按钮尺寸。 ​ .input-lg Default select .input-sm 1234567&lt;input class=&quot;form-control input-lg&quot; type=&quot;text&quot; placeholder=&quot;.input-lg&quot;&gt;&lt;input class=&quot;form-control&quot; type=&quot;text&quot; placeholder=&quot;Default input&quot;&gt;&lt;input class=&quot;form-control input-sm&quot; type=&quot;text&quot; placeholder=&quot;.input-sm&quot;&gt;&lt;select class=&quot;form-control input-lg&quot;&gt;...&lt;/select&gt;&lt;select class=&quot;form-control&quot;&gt;...&lt;/select&gt;&lt;select class=&quot;form-control input-sm&quot;&gt;...&lt;/select&gt; 水平排列的表单组的尺寸通过添加 .form-group-lg 或 .form-group-sm 类，为 .form-horizontal 包裹的 label 元素和表单控件快速设置尺寸。 Large labelSmall label 1234567891011121314&lt;form class=&quot;form-horizontal&quot;&gt; &lt;div class=&quot;form-group form-group-lg&quot;&gt; &lt;label class=&quot;col-sm-2 control-label&quot; for=&quot;formGroupInputLarge&quot;&gt;Large label&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;input class=&quot;form-control&quot; type=&quot;text&quot; id=&quot;formGroupInputLarge&quot; placeholder=&quot;Large input&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;form-group form-group-sm&quot;&gt; &lt;label class=&quot;col-sm-2 control-label&quot; for=&quot;formGroupInputSmall&quot;&gt;Small label&lt;/label&gt; &lt;div class=&quot;col-sm-10&quot;&gt; &lt;input class=&quot;form-control&quot; type=&quot;text&quot; id=&quot;formGroupInputSmall&quot; placeholder=&quot;Small input&quot;&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; 调整列（column）尺寸用栅格系统中的列（column）包裹输入框或其任何父元素，都可很容易的为其设置宽度。 1234567891011&lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xs-2&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;.col-xs-2&quot;&gt; &lt;/div&gt; &lt;div class=&quot;col-xs-3&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;.col-xs-3&quot;&gt; &lt;/div&gt; &lt;div class=&quot;col-xs-4&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;.col-xs-4&quot;&gt; &lt;/div&gt;&lt;/div&gt; 按钮可作为按钮使用的标签或元素为 &lt;a&gt;、&lt;button&gt; 或 &lt;input&gt; 元素添加按钮类（button class）即可使用 Bootstrap 提供的样式。 Link Button 1234&lt;a class=&quot;btn btn-default&quot; href=&quot;#&quot; role=&quot;button&quot;&gt;Link&lt;/a&gt;&lt;button class=&quot;btn btn-default&quot; type=&quot;submit&quot;&gt;Button&lt;/button&gt;&lt;input class=&quot;btn btn-default&quot; type=&quot;button&quot; value=&quot;Input&quot;&gt;&lt;input class=&quot;btn btn-default&quot; type=&quot;submit&quot; value=&quot;Submit&quot;&gt; 针对组件的注意事项虽然按钮类可以应用到 &lt;a&gt; 和 &lt;button&gt; 元素上，但是，导航和导航条组件只支持 &lt;button&gt; 元素。 链接被作为按钮使用时的注意事项如果 &lt;a&gt; 元素被作为按钮使用 – 并用于在当前页面触发某些功能 – 而不是用于链接其他页面或链接当前页面中的其他部分，那么，务必为其设置 role=&quot;button&quot; 属性。 跨浏览器展现我们总结的最佳实践是：强烈建议尽可能使用 元素来获得在各个浏览器上获得相匹配的绘制效果。 另外，我们还发现了 Firefox &lt;30 版本的浏览器上出现的一个 bug，其表现是：阻止我们为基于 &lt;input&gt; 元素所创建的按钮设置 line-height 属性，这就导致在 Firefox 浏览器上不能完全和其他按钮保持一致的高度。 预定义样式使用下面列出的类可以快速创建一个带有预定义样式的按钮。 （默认样式）Default （首选项）Primary （成功）Success （一般信息）Info （警告）Warning（危险）Danger （链接）Link 1234567891011121314151617181920&lt;!-- Standard button --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;（默认样式）Default&lt;/button&gt;&lt;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;（首选项）Primary&lt;/button&gt;&lt;!-- Indicates a successful or positive action --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot;&gt;（成功）Success&lt;/button&gt;&lt;!-- Contextual button for informational alert messages --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-info&quot;&gt;（一般信息）Info&lt;/button&gt;&lt;!-- Indicates caution should be taken with this action --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-warning&quot;&gt;（警告）Warning&lt;/button&gt;&lt;!-- Indicates a dangerous or potentially negative action --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-danger&quot;&gt;（危险）Danger&lt;/button&gt;&lt;!-- Deemphasize a button by making it look like a link while maintaining button behavior --&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-link&quot;&gt;（链接）Link&lt;/button&gt; Conveying meaning to assistive technologies为按钮添加不同的颜色只是一种视觉上的信息表达方式，但是，对于使用辅助技术 – 例如屏幕阅读器 – 的用户来说，颜色是不可见的。建议，确保通过颜色表达的信息或者通过内容自身表达出来（按钮上的文字），或者通过其他方式 – 例如通过 .sr-only类隐藏的额外文本 – 表达出来。 尺寸需要让按钮具有不同尺寸吗？使用 .btn-lg、.btn-sm 或 .btn-xs 就可以获得不同尺寸的按钮。 （大按钮）Large button （大按钮）Large button （默认尺寸）Default button （默认尺寸）Default button （小按钮）Small button （小按钮）Small button （超小尺寸）Extra small button （超小尺寸）Extra small button 12345678910111213141516&lt;p&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-lg&quot;&gt;（大按钮）Large button&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-lg&quot;&gt;（大按钮）Large button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;（默认尺寸）Default button&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;（默认尺寸）Default button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-sm&quot;&gt;（小按钮）Small button&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-sm&quot;&gt;（小按钮）Small button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-xs&quot;&gt;（超小尺寸）Extra small button&lt;/button&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-xs&quot;&gt;（超小尺寸）Extra small button&lt;/button&gt;&lt;/p&gt; 通过给按钮添加 .btn-block 类可以将其拉伸至父元素100%的宽度，而且按钮也变为了块级（block）元素。 （块级元素）Block level button（块级元素）Block level button 12&lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-lg btn-block&quot;&gt;（块级元素）Block level button&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-lg btn-block&quot;&gt;（块级元素）Block level button&lt;/button&gt; 激活状态当按钮处于激活状态时，其表现为被按压下去（底色更深、边框夜色更深、向内投射阴影）。对于 &lt;button&gt; 元素，是通过 :active 状态实现的。对于 &lt;a&gt; 元素，是通过 .active 类实现的。然而，你还可以将 .active 应用到 &lt;button&gt; 上（包含 aria-pressed=&quot;true&quot; 属性)），并通过编程的方式使其处于激活状态。 button 元素由于 :active 是伪状态，因此无需额外添加，但是在需要让其表现出同样外观的时候可以添加 .active 类。 Primary button Button 12&lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-lg active&quot;&gt;Primary button&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-lg active&quot;&gt;Button&lt;/button&gt; 链接（&lt;a&gt;）元素可以为基于 &lt;a&gt; 元素创建的按钮添加 .active 类。 Primary link Link 12&lt;a href=&quot;#&quot; class=&quot;btn btn-primary btn-lg active&quot; role=&quot;button&quot;&gt;Primary link&lt;/a&gt;&lt;a href=&quot;#&quot; class=&quot;btn btn-default btn-lg active&quot; role=&quot;button&quot;&gt;Link&lt;/a&gt; 禁用状态通过为按钮的背景设置 opacity 属性就可以呈现出无法点击的效果。 button 元素为 &lt;button&gt; 元素添加 disabled 属性，使其表现出禁用状态。 Primary button Button 12&lt;button type=&quot;button&quot; class=&quot;btn btn-lg btn-primary&quot; disabled=&quot;disabled&quot;&gt;Primary button&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-lg&quot; disabled=&quot;disabled&quot;&gt;Button&lt;/button&gt; 跨浏览器兼容性如果为 &lt;button&gt; 元素添加 disabled 属性，Internet Explorer 9 及更低版本的浏览器将会把按钮中的文本绘制为灰色，并带有恶心的阴影，目前我们还没有解决办法。 链接（&lt;a&gt;）元素为基于 &lt;a&gt; 元素创建的按钮添加 .disabled 类。 Primary link Link 12&lt;a href=&quot;#&quot; class=&quot;btn btn-primary btn-lg disabled&quot; role=&quot;button&quot;&gt;Primary link&lt;/a&gt;&lt;a href=&quot;#&quot; class=&quot;btn btn-default btn-lg disabled&quot; role=&quot;button&quot;&gt;Link&lt;/a&gt; 我们把 .disabled 作为工具类使用，就像 .active 类一样，因此不需要增加前缀。 链接的原始功能不受影响上面提到的类只是通过设置 pointer-events: none 来禁止 &lt;a&gt; 元素作为链接的原始功能，但是，这一 CSS 属性并没有被标准化，并且 Opera 18 及更低版本的浏览器并没有完全支持这一属性，同样，Internet Explorer 11 也不支持。In addition, even in browsers that do support pointer-events: none, keyboard navigation remains unaffected, meaning that sighted keyboard users and users of assistive technologies will still be able to activate these links. 因此，为了安全起见，建议通过 JavaScript 代码来禁止链接的原始功能。 图片响应式图片在 Bootstrap 版本 3 中，通过为图片添加 .img-responsive 类可以让图片支持响应式布局。其实质是为图片设置了 max-width: 100%;、 height: auto; 和 display: block; 属性，从而让图片在其父元素中更好的缩放。 如果需要让使用了 .img-responsive 类的图片水平居中，请使用 .center-block 类，不要用 .text-center。 请参考助手类章节 了解更多关于 .center-block 的用法。 SVG 图像和 IE 8-10在 Internet Explorer 8-10 中，设置为 .img-responsive 的 SVG 图像显示出的尺寸不匀称。为了解决这个问题，在出问题的地方添加 width: 100% \\9; 即可。Bootstrap 并没有自动为所有图像元素设置这一属性，因为这会导致其他图像格式出现错乱。 1&lt;img src=&quot;...&quot; class=&quot;img-responsive&quot; alt=&quot;Responsive image&quot;&gt; 图片形状通过为 &lt;img&gt; 元素添加以下相应的类，可以让图片呈现不同的形状。 跨浏览器兼容性请时刻牢记：Internet Explorer 8 不支持 CSS3 中的圆角属性。 140x140](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzE0MHgxNDAKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJjYWRkZSB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmNhZGRlIj48cmVjdCB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iI0VFRUVFRSIvPjxnPjx0ZXh0IHg9IjQ0LjA1NDY4NzUiIHk9Ijc0LjUiPjE0MHgxNDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) ![140x140](../../../../../../../data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzE0MHgxNDAKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNjJiNTJjZTM5YiB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE2MmI1MmNlMzliIj48cmVjdCB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iI0VFRUVFRSIvPjxnPjx0ZXh0IHg9IjQ0LjA1NDY4NzUiIHk9Ijc0LjUiPjE0MHgxNDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4=) ![140x140 123&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-rounded&quot;&gt;&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-circle&quot;&gt;&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-thumbnail&quot;&gt; 辅助类情境文本颜色通过颜色来展示意图，Bootstrap 提供了一组工具类。这些类可以应用于链接，并且在鼠标经过时颜色可以还可以加深，就像默认的链接一样。 Fusce dapibus, tellus ac cursus commodo, tortor mauris nibh. Nullam id dolor id nibh ultricies vehicula ut id elit. Duis mollis, est non commodo luctus, nisi erat porttitor ligula. Maecenas sed diam eget risus varius blandit sit amet non magna. Etiam porta sem malesuada magna mollis euismod. Donec ullamcorper nulla non metus auctor fringilla. 123456&lt;p class=&quot;text-muted&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;text-primary&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;text-success&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;text-info&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;text-warning&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;text-danger&quot;&gt;...&lt;/p&gt; 处理差异Sometimes emphasis classes cannot be applied due to the specificity of another selector. In most cases, a sufficient workaround is to wrap your text in a &lt;span&gt; with the class. Conveying meaning to assistive technologiesUsing color to add meaning only provides a visual indication, which will not be conveyed to users of assistive technologies – such as screen readers. Ensure that information denoted by the color is either obvious from the content itself (the contextual colors are only used to reinforce meaning that is already present in the text/markup), or is included through alternative means, such as additional text hidden with the .sr-only class. 情境背景色和情境文本颜色类一样，使用任意情境背景色类就可以设置元素的背景。链接组件在鼠标经过时颜色会加深，就像上面所讲的情境文本颜色类一样。 Nullam id dolor id nibh ultricies vehicula ut id elit. Duis mollis, est non commodo luctus, nisi erat porttitor ligula. Maecenas sed diam eget risus varius blandit sit amet non magna. Etiam porta sem malesuada magna mollis euismod. Donec ullamcorper nulla non metus auctor fringilla. 12345&lt;p class=&quot;bg-primary&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;bg-success&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;bg-info&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;bg-warning&quot;&gt;...&lt;/p&gt;&lt;p class=&quot;bg-danger&quot;&gt;...&lt;/p&gt; 处理差异Sometimes contextual background classes cannot be applied due to the specificity of another selector. In some cases, a sufficient workaround is to wrap your element’s content in a &lt;div&gt; with the class. Conveying meaning to assistive technologiesAs with contextual colors, ensure that any meaning conveyed through color is also conveyed in a format that is not purely presentational. 关闭按钮通过使用一个象征关闭的图标，可以让模态框和警告框消失。 × 1&lt;button type=&quot;button&quot; class=&quot;close&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt; 三角符号通过使用三角符号可以指示某个元素具有下拉菜单的功能。注意，向上弹出式菜单中的三角符号是反方向的。 1&lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; 快速浮动通过添加一个类，可以将任意元素向左或向右浮动。!important 被用来明确 CSS 样式的优先级。这些类还可以作为 mixin（参见 less 文档） 使用。 12&lt;div class=&quot;pull-left&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;pull-right&quot;&gt;...&lt;/div&gt; 123456789101112131415// Classes.pull-left &#123; float: left !important;&#125;.pull-right &#123; float: right !important;&#125;// Usage as mixins.element &#123; .pull-left();&#125;.another-element &#123; .pull-right();&#125; 不能用于导航条组件中排列导航条中的组件时可以使用这些工具类：.navbar-left 或 .navbar-right 。 参见导航条文档以获取更多信息。 让内容块居中为任意元素设置 display: block 属性并通过 margin 属性让其中的内容居中。下面列出的类还可以作为 mixin 使用。 1&lt;div class=&quot;center-block&quot;&gt;...&lt;/div&gt; 1234567891011// Class.center-block &#123; display: block; margin-left: auto; margin-right: auto;&#125;// Usage as a mixin.element &#123; .center-block();&#125; 清除浮动通过为父元素添加 .clearfix 类可以很容易地清除浮动（float）。这里所使用的是 Nicolas Gallagher 创造的 micro clearfix 方式。此类还可以作为 mixin 使用。 12&lt;!-- Usage as a class --&gt;&lt;div class=&quot;clearfix&quot;&gt;...&lt;/div&gt; 12345678910111213141516// Mixin itself.clearfix() &#123; &amp;:before, &amp;:after &#123; content: &quot; &quot;; display: table; &#125; &amp;:after &#123; clear: both; &#125;&#125;// Usage as a mixin.element &#123; .clearfix();&#125; 显示或隐藏内容.show 和 .hidden 类可以强制任意元素显示或隐藏(对于屏幕阅读器也能起效)。这些类通过 !important 来避免 CSS 样式优先级问题，就像 quick floats 一样的做法。注意，这些类只对块级元素起作用，另外，还可以作为 mixin 使用。 .hide 类仍然可用，但是它不能对屏幕阅读器起作用，并且从 v3.0.1 版本开始就不建议使用了。请使用 .hidden 或 .sr-only 。 另外，.invisible 类可以被用来仅仅影响元素的可见性，也就是说，元素的 display 属性不被改变，并且这个元素仍然能够影响文档流的排布。 12&lt;div class=&quot;show&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;hidden&quot;&gt;...&lt;/div&gt; 123456789101112131415161718// Classes.show &#123; display: block !important;&#125;.hidden &#123; display: none !important;&#125;.invisible &#123; visibility: hidden;&#125;// Usage as mixins.element &#123; .show();&#125;.another-element &#123; .hidden();&#125; 屏幕阅读器和键盘导航.sr-only 类可以对屏幕阅读器以外的设备隐藏内容。.sr-only 和 .sr-only-focusable 联合使用的话可以在元素有焦点的时候再次显示出来（例如，使用键盘导航的用户）。对于遵循 可访问性的最佳实践 很有必要。这个类也可以作为 mixin 使用。 1&lt;a class=&quot;sr-only sr-only-focusable&quot; href=&quot;#content&quot;&gt;Skip to main content&lt;/a&gt; 12345// Usage as a mixin.skip-navigation &#123; .sr-only(); .sr-only-focusable();&#125; 图片替换使用 .text-hide 类或对应的 mixin 可以用来将元素的文本内容替换为一张背景图。 1&lt;h1 class=&quot;text-hide&quot;&gt;Custom heading&lt;/h1&gt; 1234// Usage as a mixin.heading &#123; .text-hide();&#125; 响应式工具为了加快对移动设备友好的页面开发工作，利用媒体查询功能并使用这些工具类可以方便的针对不同设备展示或隐藏页面内容。另外还包含了针对打印机显示或隐藏内容的工具类。 有针对性的使用这类工具类，从而避免为同一个网站创建完全不同的版本。相反，通过使用这些工具类可以在不同设备上提供不同的展现形式。 可用的类通过单独或联合使用以下列出的类，可以针对不同屏幕尺寸隐藏或显示页面内容。 超小屏幕手机 (&lt;768px) 小屏幕平板 (≥768px) 中等屏幕桌面 (≥992px) 大屏幕桌面 (≥1200px) .visible-xs-* 可见 隐藏 隐藏 隐藏 .visible-sm-* 隐藏 可见 隐藏 隐藏 .visible-md-* 隐藏 隐藏 可见 隐藏 .visible-lg-* 隐藏 隐藏 隐藏 可见 .hidden-xs 隐藏 可见 可见 可见 .hidden-sm 可见 隐藏 可见 可见 .hidden-md 可见 可见 隐藏 可见 .hidden-lg 可见 可见 可见 隐藏 从 v3.2.0 版本起，形如 .visible-*-* 的类针对每种屏幕大小都有了三种变体，每个针对 CSS 中不同的 display 属性，列表如下： 类组 CSS display .visible-*-block display: block; .visible-*-inline display: inline; .visible-*-inline-block display: inline-block; 因此，以超小屏幕（xs）为例，可用的 .visible-*-* 类是：.visible-xs-block、.visible-xs-inline 和 .visible-xs-inline-block。 .visible-xs、.visible-sm、.visible-md 和 .visible-lg 类也同时存在。但是从 v3.2.0 版本开始不再建议使用。除了 &lt;table&gt; 相关的元素的特殊情况外，它们与 .visible-*-block 大体相同。 打印类和常规的响应式类一样，使用下面的类可以针对打印机隐藏或显示某些内容。 class 浏览器 打印机 .visible-print-block`.visible-print-inline.visible-print-inline-block` 隐藏 可见 .hidden-print 可见 隐藏 .visible-print 类也是存在的，但是从 v3.2.0 版本开始不建议使用。它与 .visible-print-block 类大致相同，除了 &lt;table&gt; 相关元素的特殊情况外。 测试用例调整你的浏览器大小，或者用其他设备打开页面，都可以测试这些响应式工具类。 在…上可见带有绿色标记的元素表示其在当前浏览器视口（viewport）中是可见的。 超小屏幕 小屏幕 中等屏幕 ✔ 在大屏幕上可见 超小屏幕和小屏幕 ✔ 在中等屏幕和大屏幕上可见 超小屏幕和中等屏幕 ✔ 在小屏幕和大屏幕上可见 ✔ 在超小屏幕和大屏幕上可见 小屏幕和中等屏幕 在…上隐藏带有绿色标记的元素表示其在当前浏览器视口（viewport）中是隐藏的。 超小屏幕 小屏幕 中等屏幕 ✔ 在大屏幕上隐藏 超小屏幕与小屏幕 ✔ 在 medium 和 large 上隐藏 超小屏幕和中等屏幕 ✔ 在小屏幕和大屏幕上隐藏 ✔ 在超小屏幕和大屏幕上隐藏 小屏幕和中等屏幕 使用 LessBootstrap 的 CSS 文件是通过 Less 源码编译而来的。Less 是一门预处理语言，支持变量、mixin、函数等额外功能。对于希望使用 Less 源码而非编译而来的 CSS 文件的用户，Bootstrap 框架中包含的大量变量、mixin 将非常有价值。 针对栅格系统的变量和 mixin 包含在栅格系统章节。 编译 Bootstrap可以通过两种方式使用 Bootstrap ：使用编译后的 CSS 文件或者使用 Less 源码文件。若要编译 Less 文件，请参考“起步”章节的内容以了解如何设置开发环境并运行必须的编译指令。 变量整个 Bootstrap 项目中使用了大量的变量，这些变量被用来代表颜色、空白（内部、边距）、字体等。详细内容请参考定制工具。 颜色Bootstrap 使用了两种颜色模式：灰度颜色和语义颜色。灰度颜色用于快速获取常用的黑色色调；语义颜色包含了各种赋予语义的颜色值。 12345@gray-darker: lighten(#000, 13.5%); // #222@gray-dark: lighten(#000, 20%); // #333@gray: lighten(#000, 33.5%); // #555@gray-light: lighten(#000, 46.7%); // #777@gray-lighter: lighten(#000, 93.5%); // #eee 12345@brand-primary: darken(#428bca, 6.5%); // #337ab7@brand-success: #5cb85c;@brand-info: #5bc0de;@brand-warning: #f0ad4e;@brand-danger: #d9534f; 你在项目中可以使用这些预定义的颜色变量，或者重新为其赋予别名，使其更有语义。 12345678910// Use as-is.masthead &#123; background-color: @brand-primary;&#125;// Reassigned variables in Less@alert-message-background: @brand-info;.alert &#123; background-color: @alert-message-background;&#125; Scaffolding某几个变量是改变网站外观的关键要素。 123// Scaffolding@body-bg: #fff;@text-color: @black-50; 链接仅仅通过改变一个变量，可以很容易地为链接赋予正确的颜色。 1234567891011121314// Variables@link-color: @brand-primary;@link-hover-color: darken(@link-color, 15%);// Usagea &#123; color: @link-color; text-decoration: none; &amp;:hover &#123; color: @link-hover-color; text-decoration: underline; &#125;&#125; 注意：@link-hover-color 使用了 Less 提供的一个内置函数，用于自动为鼠标悬停设置合适的颜色。你还可以使用 darken、lighten、saturate 和 desaturate 等 Less 内置的函数。 排版通过几个变量就能轻松的设置字体、字号、行距等。Bootstrap 利用这些变量提供了简单地定制排版的功能。 1234567891011121314151617181920212223@font-family-sans-serif: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;@font-family-serif: Georgia, &quot;Times New Roman&quot;, Times, serif;@font-family-monospace: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;@font-family-base: @font-family-sans-serif;@font-size-base: 14px;@font-size-large: ceil((@font-size-base * 1.25)); // ~18px@font-size-small: ceil((@font-size-base * 0.85)); // ~12px@font-size-h1: floor((@font-size-base * 2.6)); // ~36px@font-size-h2: floor((@font-size-base * 2.15)); // ~30px@font-size-h3: ceil((@font-size-base * 1.7)); // ~24px@font-size-h4: ceil((@font-size-base * 1.25)); // ~18px@font-size-h5: @font-size-base;@font-size-h6: ceil((@font-size-base * 0.85)); // ~12px@line-height-base: 1.428571429; // 20/14@line-height-computed: floor((@font-size-base * @line-height-base)); // ~20px@headings-font-family: inherit;@headings-font-weight: 500;@headings-line-height: 1.1;@headings-color: inherit; 图标以下两个变量用于设置图标文件的位置和文件名。 12@icon-font-path: &quot;../fonts/&quot;;@icon-font-name: &quot;glyphicons-halflings-regular&quot;; 组件组件贯穿整个 Bootstrap 框架，他们通过一些变量来设置默认值。下面列出的是常用的几个。 123456789101112131415161718192021222324@padding-base-vertical: 6px;@padding-base-horizontal: 12px;@padding-large-vertical: 10px;@padding-large-horizontal: 16px;@padding-small-vertical: 5px;@padding-small-horizontal: 10px;@padding-xs-vertical: 1px;@padding-xs-horizontal: 5px;@line-height-large: 1.33;@line-height-small: 1.5;@border-radius-base: 4px;@border-radius-large: 6px;@border-radius-small: 3px;@component-active-color: #fff;@component-active-bg: @brand-primary;@caret-width-base: 4px;@caret-width-large: 5px; 特定浏览器厂商的 mixin特定浏览器厂商的 mixin 用于为不同厂商的浏览器使用相应的 CSS 属性前缀来支持各厂商的浏览器。 Box-sizing通过这一个 mixin 来为所有组件设置盒模型。请参考这篇 来自 Mozilla 的文章。 此 mixin 从 v3.2.0 版本开始就被列为 不建议使用 了，取而代之的是使用 Autoprefixer。为了保持向后兼容，在 v4 版本之前，Bootstrap 将在内部继续使用这些 mixin。 12345.box-sizing(@box-model) &#123; -webkit-box-sizing: @box-model; // Safari &lt;= 5 -moz-box-sizing: @box-model; // Firefox &lt;= 19 box-sizing: @box-model;&#125; 圆角现在，所有现代浏览器都支持不带厂商前缀的 border-radius 属性了。有鉴于此，我们没有提供 .border-radius() mixin，但是，Bootstrap does 提供了用于快速设置同一侧圆角的 mixin 。 12345678910111213141516.border-top-radius(@radius) &#123; border-top-right-radius: @radius; border-top-left-radius: @radius;&#125;.border-right-radius(@radius) &#123; border-bottom-right-radius: @radius; border-top-right-radius: @radius;&#125;.border-bottom-radius(@radius) &#123; border-bottom-right-radius: @radius; border-bottom-left-radius: @radius;&#125;.border-left-radius(@radius) &#123; border-bottom-left-radius: @radius; border-top-left-radius: @radius;&#125; Box (Drop) 隐形如果你的目标用户使用的是最新版本和更高级的浏览器和设备，只需单独使用 box-shadow 属性即可。如果你需要兼容较老的 Android (低于 v4) 和 iOS 设备 (低于 iOS 5)，可以使用下面这个 不建议使用 的 mixin，便于帮你添加 -webkit 前缀。 由于 Bootstrap 并未官方提供对过时（不支持标准属性）平台的支持，此 mixin 从 v3.1.0 版本期就 不建议使用 了。为了保持向后兼容，Bootstrap 将继续在内部使用此 mixin， 直到 Bootstrap v4。 在设置 box 阴影时务必使用 rgba() 颜色，这样可以使他们尽可能地与背景无缝融入。 1234.box-shadow(@shadow: 0 1px 3px rgba(0,0,0,.25)) &#123; -webkit-box-shadow: @shadow; // iOS &lt;4.3 &amp; Android &lt;4.1 box-shadow: @shadow;&#125; 过渡效果有多个 mixin 供你灵活使用。可以一次性设置所有的过渡效果的属性，或者根据需要只是指定延时和持续时间。 此 mixin 从 v3.2.0 版本开始就被列为 不建议使用 了，取而代之的是使用 Autoprefixer。为了保持向后兼容，在 v4 版本之前，Bootstrap 将在内部继续使用这些 mixin。 1234567891011121314151617181920212223242526.transition(@transition) &#123; -webkit-transition: @transition; transition: @transition;&#125;.transition-property(@transition-property) &#123; -webkit-transition-property: @transition-property; transition-property: @transition-property;&#125;.transition-delay(@transition-delay) &#123; -webkit-transition-delay: @transition-delay; transition-delay: @transition-delay;&#125;.transition-duration(@transition-duration) &#123; -webkit-transition-duration: @transition-duration; transition-duration: @transition-duration;&#125;.transition-timing-function(@timing-function) &#123; -webkit-transition-timing-function: @timing-function; transition-timing-function: @timing-function;&#125;.transition-transform(@transition) &#123; -webkit-transition: -webkit-transform @transition; -moz-transition: -moz-transform @transition; -o-transition: -o-transform @transition; transition: transform @transition;&#125; 变形旋转、缩放、平移（移动）或倾斜任何对象。 此 mixin 从 v3.2.0 版本开始就被列为 不建议使用 了，取而代之的是使用 Autoprefixer。为了保持向后兼容，在 v4 版本之前，Bootstrap 将在内部继续使用这些 mixin。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051.rotate(@degrees) &#123; -webkit-transform: rotate(@degrees); -ms-transform: rotate(@degrees); // IE9 only transform: rotate(@degrees);&#125;.scale(@ratio; @ratio-y...) &#123; -webkit-transform: scale(@ratio, @ratio-y); -ms-transform: scale(@ratio, @ratio-y); // IE9 only transform: scale(@ratio, @ratio-y);&#125;.translate(@x; @y) &#123; -webkit-transform: translate(@x, @y); -ms-transform: translate(@x, @y); // IE9 only transform: translate(@x, @y);&#125;.skew(@x; @y) &#123; -webkit-transform: skew(@x, @y); -ms-transform: skewX(@x) skewY(@y); // See https://github.com/twbs/bootstrap/issues/4885; IE9+ transform: skew(@x, @y);&#125;.translate3d(@x; @y; @z) &#123; -webkit-transform: translate3d(@x, @y, @z); transform: translate3d(@x, @y, @z);&#125;.rotateX(@degrees) &#123; -webkit-transform: rotateX(@degrees); -ms-transform: rotateX(@degrees); // IE9 only transform: rotateX(@degrees);&#125;.rotateY(@degrees) &#123; -webkit-transform: rotateY(@degrees); -ms-transform: rotateY(@degrees); // IE9 only transform: rotateY(@degrees);&#125;.perspective(@perspective) &#123; -webkit-perspective: @perspective; -moz-perspective: @perspective; perspective: @perspective;&#125;.perspective-origin(@perspective) &#123; -webkit-perspective-origin: @perspective; -moz-perspective-origin: @perspective; perspective-origin: @perspective;&#125;.transform-origin(@origin) &#123; -webkit-transform-origin: @origin; -moz-transform-origin: @origin; -ms-transform-origin: @origin; // IE9 only transform-origin: @origin;&#125; 动画仅适用一个 mixin 就可以在一个声明中使用所有 CSS3 所提供的动画属性，其他 mixin 用于设置单个属性。 T此 mixin 从 v3.2.0 版本开始就 不建议使用 了，取而代之的是使用 Autoprefixer。为了保持向后兼容，在 v4 版本之前，Bootstrap 将在内部继续使用这些 mixin。 12345678910111213141516171819202122232425262728.animation(@animation) &#123; -webkit-animation: @animation; animation: @animation;&#125;.animation-name(@name) &#123; -webkit-animation-name: @name; animation-name: @name;&#125;.animation-duration(@duration) &#123; -webkit-animation-duration: @duration; animation-duration: @duration;&#125;.animation-timing-function(@timing-function) &#123; -webkit-animation-timing-function: @timing-function; animation-timing-function: @timing-function;&#125;.animation-delay(@delay) &#123; -webkit-animation-delay: @delay; animation-delay: @delay;&#125;.animation-iteration-count(@iteration-count) &#123; -webkit-animation-iteration-count: @iteration-count; animation-iteration-count: @iteration-count;&#125;.animation-direction(@direction) &#123; -webkit-animation-direction: @direction; animation-direction: @direction;&#125; 透明度为所有浏览器设置透明度，并为IE8提供 filter 备用滤镜。 123456.opacity(@opacity) &#123; opacity: @opacity; // IE8 filter @opacity-ie: (@opacity * 100); filter: ~&quot;alpha(opacity=@&#123;opacity-ie&#125;)&quot;;&#125; 占位符文本为表单控件中每个文本域提供占位符（Placeholder）文本的颜色。 12345.placeholder(@color: @input-color-placeholder) &#123; &amp;::-moz-placeholder &#123; color: @color; &#125; // Firefox &amp;:-ms-input-placeholder &#123; color: @color; &#125; // Internet Explorer 10+ &amp;::-webkit-input-placeholder &#123; color: @color; &#125; // Safari and Chrome&#125; 列通过CSS在一个单独的元素中生成列。 1234567891011.content-columns(@width; @count; @gap) &#123; -webkit-column-width: @width; -moz-column-width: @width; column-width: @width; -webkit-column-count: @count; -moz-column-count: @count; column-count: @count; -webkit-column-gap: @gap; -moz-column-gap: @gap; column-gap: @gap;&#125; 渐变便于把任何两种颜色变成背景渐变色。想要使他更高级些，可以设置一个direction（方向），使用三种颜色，也可以使用径向（radial）渐变。使用一个mixin（混入），你就可以得到所有需要的前缀语法。 123#gradient &gt; .vertical(#333; #000);#gradient &gt; .horizontal(#333; #000);#gradient &gt; .radial(#333; #000); 你也可以为标准的里两颜色线性渐变指定角度： 1#gradient &gt; .directional(#333; #000; 45deg); 如果你需要一个条纹风格的渐变，这也很容易。只要指定一个颜色，我们将该颜色半透明的条纹覆盖其上。 1#gradient &gt; .striped(#333; 45deg); 再来试试三种颜色。利用此 mixin ，并为其设置第一种颜色、第二种颜色、第二种颜色的色标（例如 25%），还有第三种颜色： 12#gradient &gt; .vertical-three-colors(#777; #333; 25%; #000);#gradient &gt; .horizontal-three-colors(#777; #333; 25%; #000); 当心！ 如果你想删除某个渐变，确保将你所添加的针对 IE 的 filter 一并删除。你可以通过使用 .reset-filter() mixin 和 background-image: none; 达到目的。 实用工具 mixin实用工具 mixin 用于与不相关的 CSS 结合以达到特定目的或任务。 Clearfix – 清除浮动建议为需要清除浮动的元素使用 .clearfix() mixin ，尽量不要直接添加 class=&quot;clearfix&quot; 类。基于 Nicolas Gallagher 的 micro clearfix 代码。 12345678910111213141516// Mixin.clearfix() &#123; &amp;:before, &amp;:after &#123; content: &quot; &quot;; display: table; &#125; &amp;:after &#123; clear: both; &#125;&#125;// Usage.container &#123; .clearfix();&#125; 水平居中让元素在其父元素中水平居中。需要设置 width 或 max-width 属性。 123456789101112// Mixin.center-block() &#123; display: block; margin-left: auto; margin-right: auto;&#125;// Usage.container &#123; width: 940px; .center-block();&#125; 尺寸助手 mixin用于方便的指定对象的尺寸。 123456789101112// Mixins.size(@width; @height) &#123; width: @width; height: @height;&#125;.square(@size) &#123; .size(@size; @size);&#125;// Usage.image &#123; .size(400px; 300px); &#125;.avatar &#123; .square(48px); &#125; 可调整大小的文本域方便设置任何文本域或其他元素的尺寸可调整。默认依循浏览器默认行为 (both)，即垂直、水平都可以调整。 123456.resizable(@direction: both) &#123; // Options: horizontal, vertical, both resize: @direction; // Safari fix overflow: auto;&#125; 截断文本此 mixin 用来以省略号代替被截断的文本。元素必须是 block 或 inline-block 级。 12345678910111213// Mixin.text-overflow() &#123; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;&#125;// Usage.branch-name &#123; display: inline-block; max-width: 200px; .text-overflow();&#125; 视网膜屏幕（Retina）下的图片通过指定两个图片路径和 @1x 图片尺寸，Bootstrap 还提供了对 @2x 媒体查询的支持。 如果你的页面上有很多图片，建议在一个单独的媒体查询中手工编写针对视网膜屏幕的 CSS 代码。 12345678910111213141516171819.img-retina(@file-1x; @file-2x; @width-1x; @height-1x) &#123; background-image: url(&quot;@&#123;file-1x&#125;&quot;); @media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and ( min--moz-device-pixel-ratio: 2), only screen and ( -o-min-device-pixel-ratio: 2/1), only screen and ( min-device-pixel-ratio: 2), only screen and ( min-resolution: 192dpi), only screen and ( min-resolution: 2dppx) &#123; background-image: url(&quot;@&#123;file-2x&#125;&quot;); background-size: @width-1x @height-1x; &#125;&#125;// Usage.jumbotron &#123; .img-retina(&quot;/img/bg-1x.png&quot;, &quot;/img/bg-2x.png&quot;, 100px, 100px);&#125; ===","categories":[],"tags":[]},{"title":"","slug":"Java/spring/Spring跨域","date":"2018-04-11T10:59:21.000Z","updated":"2018-04-11T11:00:23.000Z","comments":true,"path":"2018/04/11/Java/spring/Spring跨域/","link":"","permalink":"http://io.stelawliet.top/2018/04/11/Java/spring/Spring跨域/","excerpt":"","text":"CORS support in Spring FrameworkENGINEERING SÉBASTIEN DELEUZE JUNE 08, 2015 56 COMMENTS For security reasons, browsers prohibit AJAX calls to resources residing outside the current origin. For example, as you’re checking your bank account in one tab, you could have the evil.com website in another tab. The scripts from evil.com shouldn’t be able to make AJAX requests to your bank API (withdrawing money from your account!) using your credentials. Cross-origin resource sharing (CORS) is a W3C specification implemented by most browsersthat allows you to specify in a flexible way what kind of cross domain requests are authorized, instead of using some less secured and less powerful hacks like IFrame or JSONP. Spring Framework 4.2 GA provides first class support for CORS out-of-the-box, giving you an easier and more powerful way to configure it than typical filter based solutions. Spring MVC provides high-level configuration facilities, described bellow. Controller method CORS configurationYou can add to your @RequestMapping annotated handler method a @CrossOriginannotation in order to enable CORS on it (by default @CrossOrigin allows all origins and the HTTP methods specified in the @RequestMapping annotation): 123456789101112131415@RestController@RequestMapping(&quot;/account&quot;)public class AccountController &#123; @CrossOrigin @GetMapping(&quot;/&#123;id&#125;&quot;) public Account retrieve(@PathVariable Long id) &#123; // ... &#125; @DeleteMapping(&quot;/&#123;id&#125;&quot;) public void remove(@PathVariable Long id) &#123; // ... &#125;&#125; It is also possible to enable CORS for the whole controller: 123456789101112131415@CrossOrigin(origins = &quot;http://domain2.com&quot;, maxAge = 3600)@RestController@RequestMapping(&quot;/account&quot;)public class AccountController &#123; @GetMapping(&quot;/&#123;id&#125;&quot;) public Account retrieve(@PathVariable Long id) &#123; // ... &#125; @DeleteMapping(&quot;/&#123;id&#125;&quot;) public void remove(@PathVariable Long id) &#123; // ... &#125;&#125; In this example CORS support is enabled for both retrieve() and remove() handler methods, and you can also see how you can customize the CORS configuration using @CrossOrigin attributes. You can even use both controller and method level CORS configurations, Spring will then combine both annotation attributes to create a merged CORS configuration. 12345678910111213141516@CrossOrigin(maxAge = 3600)@RestController@RequestMapping(&quot;/account&quot;)public class AccountController &#123; @CrossOrigin(origins = &quot;http://domain2.com&quot;) @GetMapping(&quot;/&#123;id&#125;&quot;) public Account retrieve(@PathVariable Long id) &#123; // ... &#125; @DeleteMapping(&quot;/&#123;id&#125;&quot;) public void remove(@PathVariable Long id) &#123; // ... &#125;&#125; If you are using Spring Security, make sure to enable CORS at Spring Security level as well to allow it to leverage the configuration defined at Spring MVC level. 12345678@EnableWebSecuritypublic class WebSecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.cors().and()... &#125;&#125; Global CORS configurationIn addition to fine-grained, annotation-based configuration you’ll probably want to define some global CORS configuration as well. This is similar to using filters but can be declared withing Spring MVC and combined with fine-grained @CrossOrigin configuration. By default all origins and GET, HEAD and POST methods are allowed. JavaConfigEnabling CORS for the whole application is as simple as: 123456789@Configuration@EnableWebMvcpublic class WebConfig extends WebMvcConfigurerAdapter &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;); &#125;&#125; If you are using Spring Boot, it is recommended to just declare a WebMvcConfigurer bean as following: 12345678910111213@Configurationpublic class MyConfiguration &#123; @Bean public WebMvcConfigurer corsConfigurer() &#123; return new WebMvcConfigurerAdapter() &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;); &#125; &#125;; &#125;&#125; You can easily change any properties, as well as only apply this CORS configuration to a specific path pattern: 123456789@Overridepublic void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/api/**&quot;) .allowedOrigins(&quot;http://domain2.com&quot;) .allowedMethods(&quot;PUT&quot;, &quot;DELETE&quot;) .allowedHeaders(&quot;header1&quot;, &quot;header2&quot;, &quot;header3&quot;) .exposedHeaders(&quot;header1&quot;, &quot;header2&quot;) .allowCredentials(false).maxAge(3600);&#125; If you are using Spring Security, make sure to enable CORS at Spring Security level as well to allow it to leverage the configuration defined at Spring MVC level. XML namespaceIt is also possible to configure CORS with the mvc XML namespace. This minimal XML configuration enable CORS on /** path pattern with the same default properties than the JavaConfig one: 123&lt;mvc:cors&gt; &lt;mvc:mapping path=&quot;/**&quot; /&gt;&lt;/mvc:cors&gt; It is also possible to declare several CORS mappings with customized properties: 12345678910111213&lt;mvc:cors&gt; &lt;mvc:mapping path=&quot;/api/**&quot; allowed-origins=&quot;http://domain1.com, http://domain2.com&quot; allowed-methods=&quot;GET, PUT&quot; allowed-headers=&quot;header1, header2, header3&quot; exposed-headers=&quot;header1, header2&quot; allow-credentials=&quot;false&quot; max-age=&quot;123&quot; /&gt; &lt;mvc:mapping path=&quot;/resources/**&quot; allowed-origins=&quot;http://domain1.com&quot; /&gt;&lt;/mvc:cors&gt; If you are using Spring Security, don’t forget to enable CORS at Spring Security level as well: 12345&lt;http&gt; &lt;!-- Default to Spring MVC&apos;s CORS configuration --&gt; &lt;cors /&gt; ...&lt;/http&gt; How does it work?CORS requests (including preflight ones with an OPTIONS method) are automatically dispatched to the various HandlerMappings registered. They handle CORS preflight requests and intercept CORS simple and actual requests thanks to a CorsProcessor implementation (DefaultCorsProcessor by default) in order to add the relevant CORS response headers (like Access-Control-Allow-Origin). CorsConfiguration allows you to specify how the CORS requests should be processed: allowed origins, headers, methods, etc. It can be provided in various ways: AbstractHandlerMapping#setCorsConfiguration() allows to specify a Map with several CorsConfiguration mapped on path patterns like /api/** Subclasses can provide their own CorsConfiguration by overriding AbstractHandlerMapping#getCorsConfiguration(Object, HttpServletRequest)method Handlers can implement CorsConfigurationSource interface (like ResourceHttpRequestHandler now does) in order to provide a CorsConfiguration for each request. Filter based CORS supportAs an alternative to other methods presented above, Spring Framework also provides a CorsFilter. In that case, instead of using @CrossOrigin or WebMvcConfigurer#addCorsMappings(CorsRegistry), you can for example declare the filter as following in your Spring Boot application: 1234567891011121314151617@Configurationpublic class MyConfiguration &#123; @Bean public FilterRegistrationBean corsFilter() &#123; UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); CorsConfiguration config = new CorsConfiguration(); config.setAllowCredentials(true); config.addAllowedOrigin(&quot;http://domain1.com&quot;); config.addAllowedHeader(&quot;*&quot;); config.addAllowedMethod(&quot;*&quot;); source.registerCorsConfiguration(&quot;/**&quot;, config); FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source)); bean.setOrder(0); return bean; &#125;&#125;","categories":[],"tags":[]},{"title":"","slug":"JavaScript/Vue.js/生命周期","date":"2018-04-10T13:53:42.000Z","updated":"2018-04-10T14:16:44.000Z","comments":true,"path":"2018/04/10/JavaScript/Vue.js/生命周期/","link":"","permalink":"http://io.stelawliet.top/2018/04/10/JavaScript/Vue.js/生命周期/","excerpt":"","text":"Vue生命周期钩子（函数）beforeCreate 类型：Function 详细： 在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用。 无法取到el和data中的数据 ​ ​ created 类型：Function 详细： 在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，属性和方法的运算，watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。 可以访问data中的数据。 没有mount(挂载)。拿不到el 可以用来请求数据赋值给data ​ beforeMount 类型：Function 详细： 在挂载开始之前被调用：相关的 render 函数首次被调用。 render的用法用指定的vue文件来渲染模版 main.js入口来引入app.vue 获取的el元素还是。没有渲染数据到dom上 ​ mounted 类型：Function 详细： el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子。如果 root 实例挂载了一个文档内元素，当 mounted 被调用时 vm.$el 也在文档内。 注意 mounted 不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用 vm.$nextTick 替换掉 mounted： 123456mounted: function () &#123; this.$nextTick(function () &#123; // Code that will run only after the // entire view has been rendered &#125;)&#125; 该钩子在服务器端渲染期间不被调用。 ​ beforeUpdate 类型：Function 详细： 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。 你可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程。 该钩子在服务器端渲染期间不被调用。 ​ updated 类型：Function 详细： 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。 当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态。如果要相应状态改变，通常最好使用计算属性或 watcher 取而代之。 注意 updated 不会承诺所有的子组件也都一起被重绘。如果你希望等到整个视图都重绘完毕，可以用 vm.$nextTick 替换掉 updated： 123456updated: function () &#123; this.$nextTick(function () &#123; // Code that will run only after the // entire view has been re-rendered &#125;)&#125; 该钩子在服务器端渲染期间不被调用。 ​ activated 类型：Function 详细： keep-alive 组件激活时调用。 该钩子在服务器端渲染期间不被调用。 ​ deactivated 类型：Function 详细： keep-alive 组件停用时调用。 该钩子在服务器端渲染期间不被调用。 参考： 构建组件 - keep-alive 动态组件 - keep-alive beforeDestroy 类型：Function 详细： 实例销毁之前调用。在这一步，实例仍然完全可用。 该钩子在服务器端渲染期间不被调用。 ​ destroyed 类型：Function 详细： Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。 ​","categories":[],"tags":[]},{"title":"yaml study","slug":"yaml","date":"2018-04-09T14:36:15.000Z","updated":"2018-07-31T02:25:30.000Z","comments":true,"path":"2018/04/09/yaml/","link":"","permalink":"http://io.stelawliet.top/2018/04/09/yaml/","excerpt":"","text":"yaml study YamlBeans makes it easy to serialize and deserialize Java object graphs to and from YAML, a human-friendly data format. Replace XML and properties files with YAML for more expressive power (lists, maps, anchors, etc) and easier hand-editing. Basic deserialization The YamlReader class is used to deserialize YAML to Java objects. The following YAML defines a Map with four entries. The “phone numbers” entry is a List of two items, each of which is a Map. 12345678name: Nathan Sweetage: 28address: 4011 16th Ave Sphone numbers: - name: Home number: 206-555-5138 - name: Work number: 425-555-2306 The “read” method reads the next YAML document and deserializes it into HashMaps, ArrayLists, and Strings. Since we know the root object defined in the YAML of our example is a Map, we can cast the object and make use of it. 12345YamlReader reader = new YamlReader(new FileReader(&quot;contact.yml&quot;));Object object = reader.read();System.out.println(object);Map map = (Map)object;System.out.println(map.get(&quot;address&quot;)); Multiple objects A stream of YAML can contain more than one YAML document. Each call to YamlReader#read() deserializes the next document into an object. YAML documents are delimited by “—“ (this is optional for the first document). 12345name: Nathan Sweetage: 28---name: Jenny Alarcoage: 25 This prints the String “28” then “25”: 123456YamlReader reader = new YamlReader(new FileReader(&quot;contact.yml&quot;));while (true) &#123; Map contact = reader.read(); if (contact == null) break; System.out.println(contact.get(&quot;age&quot;));&#125; Deserializing other classes There are two ways to deserialize something other than HashMaps, ArrayLists, and Strings. Imagine this YAML document and Java class: 1234567name: Nathan Sweetage: 28public class Contact &#123; public String name; public int age;&#125; The “read” method can be passed a class, so the YamlReader knows what it is deserializing: 123YamlReader reader = new YamlReader(new FileReader(&quot;contact.yml&quot;));Contact contact = reader.read(Contact.class);System.out.println(contact.age); The YamlReader creates an instance of the Contact class and sets the “name” and “age” fields. The YamlReader determines the “age” value in the YAML needs to be converted into a int. Deserialization would have failed if the age was not a valid int. The YamlReader can set public fields and bean setter methods. Instead of telling the YamlReader what type to deserialize, the type can alternatively be specified in the YAML using a tag: 123!com.example.Contactname: Nathan Sweetage: 28 Serializing objects The YamlWriter class is used to serialize Java objects to YAML. The “write” method automatically handles this by recognizing public fields and bean getter methods. 123456Contact contact = new Contact();contact.name = &quot;Nathan Sweet&quot;;contact.age = 28;YamlWriter writer = new YamlWriter(new FileWriter(&quot;output.yml&quot;));writer.write(contact);writer.close(); This outputs: 123!com.example.Contactname: Nathan Sweetage: 28 The tags are automatically output as needed so that the YamlReader class will be able to reconstruct the object graph. For example, serializing this ArrayList does not output any tag for the list because YamlReader uses an ArrayList by default. 123456List list = new ArrayList();list.add(&quot;moo&quot;);list.add(&quot;cow&quot;);- moo- cow If the list was a LinkedList, then YamlWriter knows that a tag is needed and outputs: 1234567List list = new LinkedList();list.add(&quot;moo&quot;);list.add(&quot;cow&quot;);!java.util.LinkedList- moo- cow Complex graphs YamlBeans can serialize any object graph. 1234567891011121314151617181920212223242526272829303132333435public class Contact &#123; public String name; public int age; public List phoneNumbers;&#125;public class Phone &#123; public String name; public String number;&#125;friends: - !com.example.Contact name: Bob age: 29 phoneNumbers: - !com.example.Phone name: Home number: 206-555-1234 - !com.example.Phone name: Work number: 206-555-5678 - !com.example.Contact name: Mike age: 31 phoneNumbers: - !com.example.Phone number: 206-555-4321enemies: - !com.example.Contact name: Bill phoneNumbers: - !com.example.Phone name: Cell number: 206-555-1234 This is a map of lists of contacts, each with a list of phone numbers. Again, the public fields could also have been bean properties. Tag shortcuts Tags can be lengthy sometimes and can clutter up the YAML. Alternate tags can be defined for a class and will be used instead of the full class name. 1234YamlWriter writer = new YamlWriter(new FileWriter(&quot;output.yml&quot;));writer.getConfig().setClassTag(&quot;contact&quot;, Contact.class);writer.write(contact);writer.close(); The output no longer contains the full classname for the Contact class. 123!contactname: Nathan Sweetage: 28 Lists and maps When reading or writing a List or Map, YamlBeans cannot know what type of objects are supposed to be in the List or Map, so it will write out a tag. 123456789!com.example.Contactname: Bill phoneNumbers: - !com.example.Phone number: 206-555-1234 - !com.example.Phone number: 206-555-5678 - !com.example.Phone number: 206-555-7654 This can make the YAML less readable. To improve this, you may define what element type should be expected for a List or Map field on your object. 1234YamlWriter writer = new YamlWriter(new FileWriter(&quot;output.yml&quot;));writer.getConfig().setPropertyElementType(Contact.class, &quot;phoneNumbers&quot;, Phone.class);writer.write(contact);writer.close(); Now YamlBeans knows what to expect for elements of the “phoneNumbers” field, so extra tags will not be output. 123456!com.example.Contactname: Bill phoneNumbers: - number: 206-555-1234 - number: 206-555-5678 - number: 206-555-7654 Setting the element type for a Map field tells YamlBeans what to expect for values in the Map. Keys in a Map are always Strings. Anchors When an object graph contains multiple references to the same object, an anchor may be used so that the object only needs to be defined once in the YAML. 12345oldest friend: &amp;1 !contact name: Bob age: 29best friend: *1 In this map, the “oldest friend” and “best friend” keys reference the same object. The YamlReader automatically handles the anchors in the YAML when rebuilding the object graph. By default, the YamlWriter automatically outputs anchors when writing objects. 123456Contact contact = new Contact();contact.name = &quot;Bob&quot;;contact.age = 29;Map map = new HashMap();map.put(&quot;oldest friend&quot;, contact);map.put(&quot;best friend&quot;, contact); Architecture The YAML tokenizer, parser, and emitter are based on those from the JvYAML project. They have been heavily refactored, bugs fixed, etc. The rest of the JvYAML project was not used because of its complexity. YamlBeans strives for the simplest possible thing that works, with the goal being to make it easy to use the YAML data format with Java. YamlBeans supports YAML version 1.0 and 1.1. More info Maven 坐标 12345&lt;dependency&gt; &lt;groupId&gt;org.yaml&lt;/groupId&gt; &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt; &lt;version&gt;1.19&lt;/version&gt; &lt;/dependency&gt; Various other features are available on the YamlConfig class and should be pretty self explanatory. First release date: 2008-08-14 Website: http://sourceforge.net/projects/yamlbeans/","categories":[{"name":"标记语言","slug":"标记语言","permalink":"http://io.stelawliet.top/categories/标记语言/"},{"name":"yaml","slug":"标记语言/yaml","permalink":"http://io.stelawliet.top/categories/标记语言/yaml/"}],"tags":[{"name":"yaml","slug":"yaml","permalink":"http://io.stelawliet.top/tags/yaml/"}]},{"title":"Java学习大纲参考 I","slug":"Java/JavaEE/java学习之路","date":"2018-04-05T05:52:17.000Z","updated":"2018-07-04T11:39:58.000Z","comments":true,"path":"2018/04/05/Java/JavaEE/java学习之路/","link":"","permalink":"http://io.stelawliet.top/2018/04/05/Java/JavaEE/java学习之路/","excerpt":"","text":"[TOC] Java工程师成神之路（2018修订版） 主要版本 更新时间 备注 v1.0 2015-08-01 首次发布 v1.1 2018-03-12 增加新技术知识、完善知识体系 一、基础篇JVMJVM内存结构堆、栈、方法区、直接内存、堆和栈区别 Java内存模型内存可见性、重排序、顺序一致性、volatile、锁、final 垃圾回收内存分配策略、垃圾收集器（G1）、GC算法、GC参数、对象存活的判定 JVM参数及调优Java对象模型oop-klass、对象头 HotSpot即时编译器、编译优化 类加载机制classLoader、类加载过程、双亲委派（破坏双亲委派）、模块化（jboss modules、osgi、jigsaw） 虚拟机性能监控与故障处理工具jps, jstack, jmap、jstat, jconsole, jinfo, jhat, javap, btrace、TProfiler 编译与反编译javac 、javap 、jad 、CRF Java基础知识阅读源代码String、Integer、Long、Enum、BigDecimal、ThreadLocal、ClassLoader &amp; URLClassLoader、ArrayList &amp; LinkedList、 HashMap &amp; LinkedHashMap &amp; TreeMap &amp; CouncurrentHashMap、HashSet &amp; LinkedHashSet &amp; TreeSet Java中各种变量类型熟悉Java String的使用，熟悉String的各种函数JDK 6和JDK 7中substring的原理及区别、 replaceFirst、replaceAll、replace区别、 String对“+”的重载、 String.valueOf和Integer.toString的区别、 字符串的不可变性 自动拆装箱Integer的缓存机制 熟悉Java中各种关键字transient、instanceof、volatile、synchronized、final、static、const 原理及用法。 集合类常用集合类的使用、ArrayList和LinkedList和Vector的区别 、SynchronizedList和Vector的区别、HashMap、HashTable、ConcurrentHashMap区别、Java 8中stream相关用法、apache集合处理工具类的使用、不同版本的JDK中HashMap的实现的区别以及原因 枚举枚举的用法、枚举与单例、Enum类 Java IO&amp;Java NIO，并学会使用bio、nio和aio的区别、三种IO的用法与原理、netty Java反射与javassist反射与工厂模式、 java.lang.reflect.* Java序列化什么是序列化与反序列化、为什么序列化、序列化底层原理、序列化与单例模式、protobuf、为什么说序列化并不安全 注解元注解、自定义注解、Java中常用注解使用、注解与反射的结合 JMS什么是Java消息服务、JMS消息传送模型 JMXjava.lang.management.*、 javax.management.* 泛型泛型与继承、类型擦除、泛型中K T V E ？ object等的含义、泛型各种用法 单元测试junit、mock、mockito、内存数据库（h2） 正则表达式java.lang.util.regex.* 常用的Java工具库commons.lang, commons.*... guava-libraries netty 什么是API&amp;SPI异常异常类型、正确处理异常、自定义异常 时间处理时区、时令、Java中时间API 编码方式解决乱码问题、常用编码方式 语法糖Java中语法糖原理、解语法糖 Java并发编程什么是线程，与进程的区别阅读源代码，并学会使用Thread、Runnable、Callable、ReentrantLock、ReentrantReadWriteLock、Atomic*、Semaphore、CountDownLatch、、ConcurrentHashMap、Executors 线程池自己设计线程池、submit() 和 execute() 线程安全死锁、死锁如何排查、Java线程调度、线程安全和内存模型的关系 锁CAS、乐观锁与悲观锁、数据库相关锁机制、分布式锁、偏向锁、轻量级锁、重量级锁、monitor、锁优化、锁消除、锁粗化、自旋锁、可重入锁、阻塞锁、死锁 死锁volatilehappens-before、编译器指令重排和CPU指令重 synchronizedsynchronized是如何实现的？synchronized和lock之间关系、不使用synchronized如何实现一个线程安全的单例 sleep 和 waitwait 和 notifynotify 和 notifyAllThreadLocal写一个死锁的程序写代码来解决生产者消费者问题守护线程守护线程和非守护线程的区别以及用法 二、 进阶篇Java底层知识字节码、class文件格式CPU缓存，L1，L2，L3和伪共享尾递归位运算用位运算实现加、减、乘、除、取余 设计模式了解23种设计模式会使用常用设计模式单例、策略、工厂、适配器、责任链。 实现AOP实现IOC不用synchronized和lock，实现线程安全的单例模式nio和reactor设计模式网络编程知识tcp、udp、http、https等常用协议三次握手与四次关闭、流量控制和拥塞控制、OSI七层模型、tcp粘包与拆包 http/1.0 http/1.1 http/2之前的区别Java RMI，Socket，HttpClientcookie 与 sessioncookie被禁用，如何实现session 用Java写一个简单的静态文件的HTTP服务器 实现客户端缓存功能，支持返回304 实现可并发下载一个文件 使用线程池处理客户端请求 使用nio处理客户端请求 支持简单的rewrite规则 上述功能在实现的时候需要满足“开闭原则” 了解nginx和apache服务器的特性并搭建一个对应的服务器用Java实现FTP、SMTP协议进程间通讯的方式什么是CDN？如果实现？什么是DNS？反向代理框架知识Servlet线程安全问题Servlet中的filter和listenerHibernate的缓存机制Hiberate的懒加载Spring Bean的初始化Spring的AOP原理自己实现Spring的IOCSpring MVCSpring Boot2.0Spring Boot的starter原理，自己实现一个starter Spring Security应用服务器知识JBosstomcatjettyWeblogic工具git &amp; svnmaven &amp; gradle三、 高级篇新技术Java 8lambda表达式、Stream API、 Java 9Jigsaw、Jshell、Reactive Streams Java 10局部变量类型推断、G1的并行Full GC、ThreadLocal握手机制 Spring 5响应式编程 Spring Boot 2.0性能优化使用单例、使用Future模式、使用线程池、选择就绪、减少上下文切换、减少锁粒度、数据压缩、结果缓存 线上问题分析dump获取线程Dump、内存Dump、gc情况 dump分析分析死锁、分析内存泄露 自己编写各种outofmemory，stackoverflow程序HeapOutOfMemory、 Young OutOfMemory、MethodArea OutOfMemory、ConstantPool OutOfMemory、DirectMemory OutOfMemory、Stack OutOfMemory Stack OverFlow 常见问题解决思路内存溢出、线程死锁、类加载冲突 使用工具尝试解决以下问题，并写下总结当一个Java程序响应很慢时如何查找问题、 当一个Java程序频繁FullGC时如何解决问题、 如何查看垃圾回收日志、 当一个Java应用发生OutOfMemory时该如何解决、 如何判断是否出现死锁、 如何判断是否存在内存泄露 编译原理知识编译与反编译Java代码的编译与反编译Java的反编译工具词法分析，语法分析（LL算法，递归下降算法，LR算法），语义分析，运行时环境，中间代码，代码生成，代码优化操作系统知识Linux的常用命令进程同步缓冲区溢出分段和分页虚拟内存与主存数据库知识MySql 执行引擎MySQL 执行计划如何查看执行计划，如何根据执行计划进行SQL优化 SQL优化事务事务的隔离级别、事务能不能实现锁的功能 数据库锁行锁、表锁、使用数据库锁实现乐观锁、 数据库主备搭建binlog内存数据库h2 常用的nosql数据库redis、memcached 分别使用数据库锁、NoSql实现分布式锁性能调优数据结构与算法知识简单的数据结构栈、队列、链表、数组、哈希表、 树二叉树、字典树、平衡树、排序树、B树、B+树、R树、多路树、红黑树 排序算法各种排序算法和时间复杂度 深度优先和广度优先搜索 全排列、贪心算法、KMP算法、hash算法、海量数据处理 大数据知识Zookeeper基本概念、常见用法 Solr，Lucene，ElasticSearch在linux上部署solr，solrcloud，，新增、删除、查询索引 Storm，流式计算，了解Spark，S4在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。 Hadoop，离线计算HDFS、MapReduce 分布式日志收集flume，kafka，logstash数据挖掘，mahout网络安全知识什么是XSSXSS的防御 什么是CSRF什么是注入攻击SQL注入、XML注入、CRLF注入 什么是文件上传漏洞加密与解密MD5，SHA1、DES、AES、RSA、DSA 什么是DOS攻击和DDOS攻击memcached为什么可以导致DDos攻击、什么是反射型DDoS SSL、TLS，HTTPS如何通过Hash碰撞进行DOS攻击用openssl签一个证书部署到apache或nginx四、架构篇分布式数据一致性、服务治理、服务降级 分布式事务2PC、3PC、CAP、BASE、 可靠消息最终一致性、最大努力通知、TCC Dubbo服务注册、服务发现，服务治理 分布式数据库怎样打造一个分布式数据库、什么时候需要分布式数据库、mycat、otter、HBase 分布式文件系统mfs、fastdfs 分布式缓存缓存一致性、缓存命中率、缓存冗余 微服务SOA、康威定律 ServiceMeshDocker &amp; KubernetsSpring BootSpring Cloud高并发分库分表CDN技术消息队列ActiveMQ 监控监控什么CPU、内存、磁盘I/O、网络I/O等 监控手段进程监控、语义监控、机器资源监控、数据波动 监控数据采集日志、埋点 Dapper负载均衡tomcat负载均衡、Nginx负载均衡 DNSDNS原理、DNS的设计 CDN数据一致性 五、 扩展篇云计算IaaS、SaaS、PaaS、虚拟化技术、openstack、Serverlsess 搜索引擎Solr、Lucene、Nutch、Elasticsearch 权限管理Shiro 区块链哈希算法、Merkle树、公钥密码算法、共识算法、Raft协议、Paxos 算法与 Raft 算法、拜占庭问题与算法、消息认证码与数字签名 比特币挖矿、共识机制、闪电网络、侧链、热点问题、分叉 以太坊超级账本人工智能数学基础、机器学习、人工神经网络、深度学习、应用场景。 常用框架TensorFlow、DeepLearning4J 其他语言Groovy、Python、Go、NodeJs、Swift、Rust 六、 推荐书籍《深入理解Java虚拟机》 《Effective Java》 《深入分析Java Web技术内幕》 《大型网站技术架构》 《代码整洁之道》 《Head First设计模式》 《maven实战》 《区块链原理、设计与应用》 《Java并发编程实战》 《鸟哥的Linux私房菜》 《从Paxos到Zookeeper》 《架构即未来》","categories":[{"name":"Java","slug":"Java","permalink":"http://io.stelawliet.top/categories/Java/"},{"name":"学习路线","slug":"Java/学习路线","permalink":"http://io.stelawliet.top/categories/Java/学习路线/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://io.stelawliet.top/tags/Java/"}]},{"title":"","slug":"MD/studyo/java面试要点","date":"2018-04-03T08:40:56.000Z","updated":"2018-04-03T09:07:29.000Z","comments":true,"path":"2018/04/03/MD/studyo/java面试要点/","link":"","permalink":"http://io.stelawliet.top/2018/04/03/MD/studyo/java面试要点/","excerpt":"","text":"1. Spring MVC 如何接受并处理一个请求的? 首先我们会在web.xml中注册一个DispatcherServlet，并令这个servlet接收所有的请求，项目启动后Spring会扫描配置文件，根据配置加载和实例化类，其中扫描到的带有@Controller或者@RestController注解的类则是请求要映射到的类，Spring MVC扫描里面所有和请求映射有关的注解， 如@RequestMapping、@ResponseBody、@RequestParam等。当接收到一个请求时，它会根据请求的url映射到对应的controler，并根据返回值判断是渲染jsp页面还是返回普通文本，亦或是返回json。 2. AOP实现原理。 AOP是通过动态代理来实现的，有两种常用的技术，一是JDK的动态代理，二是CGLIB，而无论是前者还是后者，都是生成动态生成类的字节码来实现的。JDK的动态代理只能处理接口实现的方法，而CGLIB则没有这个限制。因为字节码是动态生成的，所以可以在生成的字节码当中，在目标方法前后插入定义好的方法的调用。 3. 注解是怎么用的?为什么要使用注解? 当在一个类、方法或者字段上标上注解后，可以通过obj.getClass().isAnnotationPresent(..)来判断一个目标是否被特定的注解标识，通过obj.getClass().getAnnotation(..)来获取标志是注解，以此获得注解上的信息。使用注解可以帮助我们在项目的编译期或运行时给类、方法或对象添加一个额外的信息，给编程增加了很大的灵活性。比如用@Override来标志这是重写父类的方法，那么编译器就可以在编译期检查该方法是否真的是重写父类的方法，将错误扼杀在编译器。 4. 线程有几种状态?生命周期是怎样的? 线程有五种状态:创建、就绪、运行、阻塞、死亡。调用start方法时，线程就会进入就绪状态。在线程得到cpu时间片时进入运行状态。线程调用yield方法可以让出cpu时间回到就绪状态。线程运行时可能由于IO、调用sleep、wait、join方法或者无法获得同步锁等原因进入阻塞状态。当线程获得到等待的资源资源或者引起阻塞的条件得到满足时(调用notify或notifyAll)，会从阻塞状态进入就绪状态。当线程的run方法执行结束或者调用interrupt方法时，线程就进入死亡状态。 5. Java中如何实现同步。 Java实现同步的方法有: 使用synchronized关键字为方法或代码块加锁。 使用volatile修饰变量，但是volatile不保证原子性。 使用ReentrantLock或者ReentrantReadWriteLock， 这种方法比synchronized更灵活。 使用Semaphore，允许最多n个线程同时访问资源。 6. HashMap与Hashtable的区别。 HashMap是线程不安全的，Hashtable是线程安全的。 HashMap的key和value接受null，Hashtable不接受。 HashMap继承自AbstractMap，Hashtable继承自Directory。 7. JVM是否了解?这里我回答了最近正在看《深入理解Java虚拟机》一书，本想着这方面的问题能答上一些的，没想到面试官直接说那看样子还不是很了解，就不问这块的问题了= =.. 心塞但是我估摸着大概如果问的话会问: 7.1. JVM的内存模型。 JVM的内存一共分为5个部分: 程序计数器: 里面存放着线程执行的指令。 方法区: 存放类的信息，如:类名、方法、成员变量等，也存放着常量池。 虚拟机栈: 存放着局部变量表、操作数栈、方法出口信息等方法执行所需信息。 本地方法栈: 存放程序调用native方法的信息。 堆: 这五个部分中最大的，对象的内存分配都是在堆内存中。 7.2. 常用的虚拟机参数。 -Xmx: 指定最大堆内存 -Xms: 指定初始化堆内存大小。 -Xmn: 指定年轻代内存初始内存大小，同时也是最大内存大小。 -XX:NewSize: 指定年轻代内存大小。 -XX:NewRatio: 指定年轻代和老年代的内存比例。 -XX:MaxHeapSize: 指定程序最大内存。 -XX:+PrintGC: 打印GC日志。 -XX:+PrintGCDetails: 打印详细的GC日志。 -Xloggc: 打印GC日志保存位置。 7.3. 垃圾回收算法。 引用计数算法: 该算法对每一个对象都有一个引用计数，没增加一次引用就+1，减少一次引用-1，在回收时将引用计数为0的对象清理掉。这种算法简单，但是无法解决循环引用的问题(比如: A引用B， B也引用A，但是A和B都没有被其它任何对象引用)。 标记-清除算法: 该算法分为两个阶段， 第一阶段遍历找出所有需要被回收的对象，并做上标记，第二阶段对清理所有被标记的对象，这种算法效率比较低，并且会产生较多的内存碎片。 标记-整理算法: 该算法的第一阶段和标记-清除算法是一样的，而第二阶段它不是直接清理掉垃圾对象，而且将存活的对象往同一侧移动，移动完成后清理掉另一侧所有的对象。这种算法不会产生内存碎片，但是效率低下。 复制算法: 该算法将内存分为两个区域，进行垃圾回收时，就将还活着的对象复制到另一块内存区域中，然后再将整片内存区域清空。这种算法简单快速，而且不会产生内存碎片，但是因为将内存分成两块，所以可用的内存会少很多。 分代收集算法: 将内存细分为多个区域，不同区域GC的频率，并对不同的区域采用适当的收集算法。如JVM将内存分为年轻代和老年代，普通对象最开始分配在年轻代(大对象会直接分配到老年代)，同一个对象在经过几次GC后还存活着，就认为这个对象的生命周期会比较长，将其移入老年代，GC主要发生在年轻代。 7.4 类加载机制。 Java中主要有Bootstrap类加载器、ExtClassLoader、AppClassLoader，其中Bootstrap类加载器主要加载JAVA_HOME/lib目录下的类库，ExtClassLoader加载JAVA_HOME/lib/ext目录下的类库，AppClassLoader加载classpath指向目录下的类库。 Java的类加载器使用双亲委派模型，除了顶层的Bootstrap类加载器外，其余的类加载器都有父类加载器，当一个类加载器要加载一个类时，它不会直接去加载，而是委托父类加载器尝试加载，父类加载器如果无法完成，则继续委托其父类加载器加载，如果在期间有某一个类加载器发现已经加载过这个类，则会将已经加载的类返回，子类不再加载。若所有的类加载器都未加载过这个类，那么最开始尝试加载的加载器才会去加载这个类。使用这样的加载机制的好处是: 对于同一个类，如: java.lang.String，能保证整个程序中都是使用的这一个类，否则如果用户在自己的项目中也写了一个java.lang.String类，那么项目中将存在两个String类，一个是java提供的String类，一个是用户自定义的String类，不仅使项目变得混乱，而且不安全。 8. MyBatis和Hibernate各有什么优缺点?我个人因为只简单接触过而没有实际应用过Hibernate，所以没能从比较好的角度来回答这个问题。 Hibernate的优点是它是一个完全的ORM框架，使用Hibernate可以做到不用手写SQL，而且无须关心使用何种数据库，可移植性较好，当需要更变数据库时需要做的修改很少甚至为0。其缺点是需要根据数据库的设计在实体进行又一次的配置，且帮程序员做了太多事，如果需要进行调优的话需要对Hibernate有比较深的了解。MyBatis的优缺点差不多和Hibernate相反，我们需要手写SQL语句和配置结果集和实体类的映射，即使是简单的单表操作也需要写SQL(可以通过拦截器来实现CommonMapper，或者可以使用生成器来生成代码)，因此MyBatis要进行SQL调优也简单直接。其次是MyBatis的二级缓存功能较弱，是针对namespace的。 9. MySQL平时是怎么分析效率和进行SQL优化的? 较常使用的方法是explain SQL查看执行计划，根据查询计划可以知道是否使用了索引，是否进行来全表扫描以及查询的顺序，依此我们可以建立适当的索引和连接查询调优。还有一个是开启慢查询记录执行时间长的SQL语句。 通常会在WHERE、JOIN ON和ORDER BY使用到字段上加上索引。 避免查询时判断NULL，否则可能会导致全表扫描。 避免使用OR来连接查询条件，否则可能导致全表扫描，可以改用UNION或UNION ALL。 避免LIKE查询，否则可能导致全表扫描。 不使用SELECT *，只查询必须的字段，避免加载无用数据。 能用UNION ALL的时候就不用UNION，UNION过滤重复数据要耗费更多的cpu资源。 10. MySQL除了InnoDB还有哪些引擎，有什么区别? 因为平时都是用的InnoDB，对其它引擎的了解甚少，所以这个问题没答上= =，这里直接贴一个链接好了。相关链接: MySQL存储引擎介绍 11. 如何动态改变页面上的元素? 使用$(..).css({..})来改变元素的样式。 使用$(..).attr(..)改变元素的属性。 使用$(..).html(..)改变元素的html内容。 使用$(..).text(..)改变元素的文本内容。 使用$(..).remove(..)删除元素。 使用$(..).append(..)添加元素。 12. 分页的实现。 如果是使用JSP等后端模板的话，一般会将需要分页的JSP代码抽成一个单独的JSP文件，并在页面中动态计算分页按钮的展示方式，在母页中include该JSP文件，然后在前端点击分页按钮时，通过AJAX请求下一页的内容，服务器端将渲染后的HTML返回给前端，前端通过$(..).html()等方式替换展示内容。如果是在前后端分离的项目中，一般会使用一些前端的框架，如: React.js、Vue.js等，每次只向后台请求分页的数据，一般数据交互格式使用JSON，并替换已有的数据，触发页面内容的改变。 13. 解释一下RESTful，平时是怎么用的 RESTful是无状态的，采用URL+HTTP请求方法来描述资源和行为。一般在前后端分离的项目中，后端会提供REST接口给前端，其HTTP请求方法一般为: GET : 获取资源。 POST: 更新资源。 PUT: 创建资源。 DELETE: 删除资源。 其次，RESTful由于是无状态的，一般会采用JWT或OAuth的方式来认证一个用户，Token是保存在前端的，为了安全性一般会配合HTTPS使用。 14. 有没有抓过包?GET和POST格式是怎么样的? HTTP请求分为三部分: 请求行、请求头、请求体:请求行: 第一行是METHOD URL protocal，如GET http://abc.com HTTP/1.1。请求头: 从第二行开始，每一行的内容都是一个请求头参数值，直到遇到一个空行为止。请求体: 请求头和请求体中间隔着一行空行作为分界，请求体包含着本次请求携带的内容。GET方式的请求没有请求体，其是将参数追加到URL后面，URL中?后面的内容为请求参数。POST方式则三部分都有，且POST的请求头应当包含Content-Type来指明请求体中内容的类型。 15. 如果是上传文件的话又是怎样的?后端如何处理? 上传文件的话会设置Content-Type为multipart/form-data，并指定boundary的值来标识请求体中内容的分界，而在请求体中，不同的内容(如：文件A和文件B)之间使用boundary的值来标识分界，并且请求体中每部分内容都会有Content-Disposition和Content-Type来指明这部分内容的类型和信息。 后端的话使用ServletFileUpload来解析请求，获得FileItem的List，遍历Item，然后通过Item获得输入流，从输入流中读取上传文件的数据，再构建FileOutputStream输出到磁盘中保存。如果使用Spring MVC，则可以在接收请求的方法中接收CommonsMultipartFile，并使用transferTo方法保存到磁盘中。 16. AJAX实现原理。这个也没答上来，平时都是使用jQuery封装的AJAX或者其他AJAX框架。 AJAX是利用浏览器的AJAX引擎来实现的异步请求，通过XMLHttpRequest对象来发送请求，由AJAX引擎向服务器发送和接收响应，再回调给用户处理，达到不阻塞用户界面和无刷新的目的。资料来源: AJAX工作原理及其优缺点。 17. Linux下怎么查找一个文件? 如果是查找二进制文件，可以使用whereis。如果是查找命令，可以使用which。如果是其他文件，可以使用find命令(其实什么都可以找), -name指定搜索的名称或者匹配串， -maxdepth指定搜索的深度。也可以使用locate命令查找，但是最新变动的文件可能会找不到，因为该命令实际上是搜索数据库，该数据库每天自动更新，可以手动执行updatedb更新。 18. Linux怎么查找一个进程? 使用ps命令可以查看进程状态，ps -ef查看所有进程，配合grep命令可以进行筛选， 如查看tomcat进程的命令是: ps -ef | grep tomcat。 19. Linux下只知道文件所在目录和内容，如何查找文件?这题没也没答上= = 使用grep命令可以实现:grep -rn /path/to/target/dir -e &quot;pattern&quot;-r: 递归-n: 显示行数-w: 完全匹配例子: grep -rn. -e &quot;ERROR&quot;输出: ./面试:143:输出: ./面试:144:上面的命令搜索当前目录及其子目录中的文件，并输出含有ERROR内容的行详细答案及来源:How to find all files containing specific text on Linux? 20. Redis你用它来做什么? Redis在我接触过的项目中主要做了两件事: 缓存。 存储需要计算的信息。 Redis也可以用来做消息订阅、队列等。 21. Redis如果运行过程中崩溃了怎么办。这个问题我估摸着面试官想问的是Redis的数据保障的方法，不然崩溃了除了重启还能怎么办？ Redis有提供数据持久化的功能，一种是快照，一种是AOF。快照是在某一个时间点将所有数据写入到磁盘中，AOF是将被执行的命令复制到硬盘中，快照的文件体积要比AOF的文件体积小。前者在恢复时速度比后者快，但是因为是间隔持久化，所以会有一定量的数据丢失。后者因为是实时写入的，所以数据的完整性比较好，如果丢失的话一般也就丢失一秒的数据。 其次需要做主从复制，这样一份数据可以保存在多台服务器上，且可以避免Redis崩溃到重启完成这段时间内无法提供正常服务，同时从服务器可以分担主服务器的读压力。 22. Redis集群。没配置过所以没答上= = 相关连接: Redis集群教程。 23. 剩下的问题都是偏向个人的，没有什么通用性的回答，大概问了我: 前一家公司实习的时候主要做什么？ 讲一下做过的项目？ 项目中有没有遇到什么难点?怎么解决的？ 有没有做过什么有亮点的东西？其中在问题3根据我的回答，继续将情况复杂化让我给出解决方案，一步一步问。","categories":[],"tags":[]},{"title":"","slug":"Linux/openwrt/sas","date":"2018-03-31T15:49:38.000Z","updated":"2018-03-31T15:49:57.000Z","comments":true,"path":"2018/03/31/Linux/openwrt/sas/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/Linux/openwrt/sas/","excerpt":"","text":"潘多拉 路由器安装 SSR 方法 ON SEPTEMBER 3, 2017 BY ISTARBUCKSIN SSR 路由器安装 SSR 方法 作者：admin • 2017年05月23日 简介： 注：本文中的路由器型号为优酷L1，主控型号为MT7620a，固件为PandoraBox，安装过程中确保路由器能够联网。 软件包包含 shadowsocksr-libev 的可执行文件,以及luci控制界面 支持SSR客户端、服务端模式（服务端支持部分混淆模式、支持多端口） 支持自动分流，国内IP不走代理，国外IP段走透明代理，不需要再安装chnroute等软件 支持本地域名污染情况下的远程服务器解析，多数情况下无需对dns进行处理 可以和Shadowsocks共存，在openwrt可以通过luci界面切换使用Shadowsocks或ShadowsocksR 集成KcpTun加速，此功能对路由器性能要求较高，需下载对应的二进制文件到路由器指定目录，请酌情使用 客户端兼容运行SS或SSR的服务器，使用SS服务器时，传输协议需设置为origin，混淆插件需设置为plain 所有进程自动守护，崩溃后自动重启！首先使用浏览器登录路由器控制界面，依次找到：系统–软件包–配置，将原配置删除，填写以下配置并保存应用！（注：此配置仅适用于路由器主控为MT7620a/PandoraBox系列的固件！如果使用的是其他固件，请参考 这里 核对相应的软件源。） dest root / dest ram /tmp lists_dir ext /var/opkg-lists option overlay_root /overlay src/gz r2_base http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/base src/gz r2_management http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/management src/gz r2_oldpackages http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/oldpackages src/gz r2_packages http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/packages src/gz r2_routing http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/routing src/gz r2_telephony http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/telephony src/gz r2_oldpackages2 http://downloads.openwrt.org.cn/PandoraBox/ralink/mt7620_old/packages src/gz 16.10_base http://downloads.pandorabox.com.cn/pandorabox/packages/mt7620/packages/base src/gz 16.10_luci http://downloads.pandorabox.com.cn/pandorabox/packages/mt7620/packages/luci src/gz 16.10_packages http://downloads.pandorabox.com.cn/pandorabox/packages/mt7620/packages/packages 最新版SSR下载地址：https://github.com/ywb94/openwrt-ssr/releases （全部），或点此下载 （仅限MT7620）下载后打开压缩包，将压缩包内的文件/ramips/luci-app-shadowsocksR_版本号_all.ipk 提取到U盘根目录，然后将U盘插到路由器的USB接口；使用Telnet或SSH进入路由器(命令中的192.168.10.1为此路由器IP地址)：开始–运行，输入cmd并回车，输入：telnet 192.168.10.1，按提示输入用户名和密码后进入命令行终端模式：（注：如果提示“telnet不是内部或外部命令”，请查询 此网页 的图10和图11） echo “nameserver 114.114.114.114”&gt;/tmp/resolv.conf rm -f /var/lock/opkg.lock &amp;&amp; opkg update opkg install /mnt/sda1/luci-app-shadowsocksR_*_all.ipk (or URL of IPK) 安装完成后在浏览器登录路由器并设置SS或SSR帐号即可使用！注意：可以让SS和SSR同时运行，但是要注意使用的Socks5代理端口不能相同，并且最多只能有一个启用透明代理！","categories":[],"tags":[]},{"title":"","slug":"Linux/openwrt/yuan","date":"2018-03-31T15:49:04.000Z","updated":"2018-03-31T15:50:33.000Z","comments":true,"path":"2018/03/31/Linux/openwrt/yuan/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/Linux/openwrt/yuan/","excerpt":"","text":"四、一些资源 1）360p2用breed 文件名：“breed-mt7628-hiwifi-hc5661a.bin” 2）360p2潘多拉固件+一些插件 潘多拉群：【PandoraBox VIP玩家交流群】固件链接：http://downloads.pandorabox.com.cn/ 搜索安装插件小技巧 进入putty1、先更新源opkg update2、按照关键字搜索软件包名称替换命令中为你的关键字，命令已经忽略大小写opkg list |awk ‘BEGIN{IGNORECASE=1}//{print $1}’比如搜索s-sopkg list |awk ‘BEGIN{IGNORECASE=1}/s-s/{print $1}’3、你所熟知的opkg install .ipk了复制代码* img 3）360p2 改华硕老毛子固件，记住选则文件名“RT-AC1200-GPIO-38-7628”的固件 https://eyun.baidu.com/s/3kV0JV19 新软件源 src/gz 17.09_core http://pandorabox.beyang.cc/pandorabox/17.11/targets/ralink/mt7621/packages src/gz 17.09_base http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/base src/gz 17.09_lafite http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/lafite src/gz 17.09_luci http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/luci src/gz 17.09_mtkdrv http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/mtkdrv src/gz 17.09_newifi http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/newifi src/gz 17.09_packages http://pandorabox.beyang.cc/pandorabox/17.11/packages/mipsel_1004kc_dsp/packages 使用方法：系统–软件包–配置–自定义软件源–粘帖以上内容–提交","categories":[],"tags":[]},{"title":"","slug":"Linux/openwrt/WIFI中继","date":"2018-03-31T14:42:19.000Z","updated":"2018-03-31T15:29:42.000Z","comments":true,"path":"2018/03/31/Linux/openwrt/WIFI中继/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/Linux/openwrt/WIFI中继/","excerpt":"","text":"设置开始：首先：192.168.1.1 登陆管理界面，密码：admin img img 按下图做，点搜索。已经测试，虽然5G信号也能搜索到，但是无法连接，原因不明，所以楼主还是中继了2.4G信号，有些遗憾~ img 找到你要中继的路由器 img 按下图设置，然后提交，提交完毕了再点”应用保存“ img 再次回到无线界面，看到如下信息没？就是你刚刚添加的中继路由 img 再看看你的路由器有没有得到主路由DHCP来的ip地址。 刚好潘多拉和小云os 1.6.1.5 不在一个网段~（我多余改成了192.168.88.1） img 好了~这样就设置完毕了~还是非常简单的`~ 本教程适合新鸟，老鸟忽略即可~","categories":[],"tags":[]},{"title":"","slug":"MD/Mac/Mac禁用摄像头","date":"2018-03-31T08:22:22.000Z","updated":"2018-03-31T08:27:43.000Z","comments":true,"path":"2018/03/31/MD/Mac/Mac禁用摄像头/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/MD/Mac/Mac禁用摄像头/","excerpt":"","text":"Mac关闭摄像头为了防止黑客入侵，我们可以手动执行命令，关掉摄像头设备的访问权限，让黑客去看黑夜吧。 Mac关闭禁用摄像头的方法，打开终端。 login root用户获得系统权限 1sudo -i 拷贝如下代码，回车，输入管理员密码，再次拷贝，回车。 123456789sudo chmod a-r /System/Library/Frameworks/CoreMediaIO.framework/Versions/A/Resources/VDC.plugin/Contents/MacOS/VDCsudo chmod a-r /System/Library/PrivateFrameworks/CoreMediaIOServicesPrivate.framework/Versions/A/Resources/AVC.plugin/Contents/MacOS/AVCsudo chmod a-r /System/Library/QuickTime/QuickTimeUSBVDCDigitizer.component/Contents/MacOS/QuickTimeUSBVDCDigitizersudo chmod a-r /Library/CoreMediaIO/Plug-Ins/DAL/AppleCamera.plugin/Contents/MacOS/AppleCamerasudo chmod a-r /Library/CoreMediaIO/Plug-Ins/FCP-DAL/AppleCamera.plugin/Contents/MacOS/AppleCamera 打开摄像头方法 123456789sudo chmod a+r /System/Library/Frameworks/CoreMediaIO.framework/Versions/A/Resources/VDC.plugin/Contents/MacOS/VDCsudo chmod a+r /System/Library/PrivateFrameworks/CoreMediaIOServicesPrivate.framework/Versions/A/Resources/AVC.plugin/Contents/MacOS/AVCsudo chmod a+r /System/Library/QuickTime/QuickTimeUSBVDCDigitizer.component/Contents/MacOS/QuickTimeUSBVDCDigitizersudo chmod a+r /Library/CoreMediaIO/Plug-Ins/DAL/AppleCamera.plugin/Contents/MacOS/AppleCamerasudo chmod a+r /Library/CoreMediaIO/Plug-Ins/FCP-DAL/AppleCamera.plugin/Contents/MacOS/AppleCamera 检验方法，使用Mac自带应用 Photo Booth 或者QQ视频来校验是否生效。 每次系统更新后要重新关闭一次","categories":[],"tags":[]},{"title":"","slug":"MD/site/实用网站1","date":"2018-03-31T06:34:03.000Z","updated":"2018-03-31T06:34:56.000Z","comments":true,"path":"2018/03/31/MD/site/实用网站1/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/MD/site/实用网站1/","excerpt":"","text":"实用的工具网站 总结一下平时可能会用到的工具性网站，欢迎补充。 Regex101 - online regex editor and debugger强大的正则表达式工具，你可以实时查看匹配信息，并且会用不同的颜色将 Group 标记出来。而且有 Quick Reference 来帮助你记忆正则表达式的规则和 Explanation 对你的正则表达式进行解释。重要的是，支持直接生成多种语言的代码。 file file Compressor.io（需要翻墙）强大的图片在线压缩工具，支持JPEG、PNG、GIF、SVG，在保证超高压缩率的同时保证肉眼看不出与原图的差别。（下图：1.07 MB 的图片压缩变成171.41 KB，而视觉效果几乎没有变化。） file TinyPNG同样是图片压缩工具，虽然只支持JPEG、PNG，但是这个不需要翻墙，效果也非常棒。 file VisuAlgo（多语言支持）各种算法可视化，我的多动态图详细讲解二叉搜索树 用的动态图片就是用它做的。 image Desmos Graphing Calculator非常强大的在线作图工具，而且支持动画（支持函数动态变化），界面也非常简洁耐看，我的循环神经网络（Recurrent Neural Network）简介 最后的图片就是用它做的。 file Math在线计算器，可以识别手写的复杂表达式，而且画出函数图像，支持导出为Latex、MathML、SymbolTree等格式。 file Latex2png将 Latex 表达式转换为漂亮的、透明的 PNG 图片，很实用的网站。 file Smallpdf和 PDF 转换有关的操作它都有，而且非常准确。支持哪些？看图片（多语言支持）： file ASCIIFlow InfinityAscii 作图工具，很强大。 1234567891011121314151617Copy+--------+ +---------------+| +-+(A)+ Authorization Request +^+ Resource || | | Owner || +^+(B)++ Authorization Grant +--+ || | +---------------+| || | +---------------+| +-+(C)++ Authorization Grant +-^+ Authorization || Client | | Ser^er || +^+(D)+---+ Access Token +------+ || | +---------------+| || | +---------------+| +-+(E)+---+ Access Token +-----^+ Resource || | | Ser^er || +^+(F)+-+ Protected Resource +--+ |+--------+ +---------------+ file CloudConvert - Conversion Types又一个格式转换网站，太强大了，你能想到的格式转换几乎都有： file Mathcha强大的数学表达式在线编辑工具，可以导出为PDF、Latex等格式。 file ⬆️","categories":[],"tags":[]},{"title":"","slug":"Linux/ssh/mac ssh设置","date":"2018-03-31T06:29:07.000Z","updated":"2018-08-09T11:31:41.000Z","comments":true,"path":"2018/03/31/Linux/ssh/mac ssh设置/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/Linux/ssh/mac ssh设置/","excerpt":"","text":"1、准备ssh-copy-idbrew install ssh-copy-id 2、生成密钥。在终端下执行命令：ssh-keygen -t rsa一路回车，各种提示按默认不要改，等待执行完毕。 3、运行 :ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.6.161","categories":[],"tags":[]},{"title":"","slug":"Linux/ssh/ssh 登录别名与密钥设置","date":"2018-03-31T05:09:56.000Z","updated":"2018-10-14T13:55:35.000Z","comments":true,"path":"2018/03/31/Linux/ssh/ssh 登录别名与密钥设置/","link":"","permalink":"http://io.stelawliet.top/2018/03/31/Linux/ssh/ssh 登录别名与密钥设置/","excerpt":"","text":"SSH别名在Mac OS的终端(terminal)中，可以使用命令ssh user@host的命令来远程连接一台服务器，但是，如果要管理的服务器太多，IP地址不能全部记住的时候怎么办？这时候我们可以为每一台服务器设置一个别名（alias），使用vi命令编辑一下~/.ssh/config这个文件（如果目录下没有这个文件，可以新建一个），接着按下面格式添加内容： 1234567891011# 服务器1Host 别名 HostName IP地址 Port 22 User 用户名# 服务器2Host 别名 HostName IP地址 Port 22 User 用户名更多的服务器...1234567891011 添加完以上内容后，就可以使用命令ssh 服务器别名来连接服务器了，是不是方便很多了？ 另外，如果想查看当前有哪些配置了别名的服务器，可以使用命令cat ~/.ssh/config | grep &quot;Host&quot;来查看 SSH公钥和密钥使用场景？ linux 无密login git 无密push ssh有啥？ssh中，有两个钥匙：公钥、私钥 ,公钥主要是用于对一些敏感信息进行加密 ， 私钥是用于对解密 。 ssh的文件都存在于机器的~/.ssh中。 客户机端：id_rsa(私钥) 、 id_rsa.pub(公钥) 、 known_hosts(已知远程主机) 服务器端：authorized_keys(验证过的公钥列表) 、 sshd_config(ssh配置文件) linux 无密loginlinux的远程登录默认是需要密码的，但是我们可以通过ssh通道，进行无密登录，也就是说每次登录只需要 ssh username@host 就能成功登录远程机器。 *下面是无密登录的完整过程： 客户机使用ssh-keygen生成密钥对（私密id_rsa、公密id_rsa.pub）。 复制公密id_rsa.pub的内容 123$ pbcopy &lt; ~/.ssh/id_rsa.pub读取文件中的内容，并将其存入到变量中$ var=$(cat name.txt) 使用ssh登录到远程机器（这次需要密码） 1$ ssh root@host //root：帐号 ， host ：服务器IP地址 把剪切版的内容粘贴到~/.ssh/authorized_keys中，退出登录 1$ exit ，基础已经搭建完了，使用ssh无密登录（不需要密码） 1&gt; 如果发现无法自动登录，请修改 $ vi /etc/ssh/sshd_config RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys 把以上的最前面的＃去掉 。 $ service ssh restart $ exit 重新登录 1234$ ssh root@192.168.1.1The authenticity of host &apos;192.168.1.1 (192.168.1.1)&apos; can&apos;t be established.ECDSA key fingerprint is SHA256:8bZUeFxyoxL9oYhc5aAZjgSZ5CT1oGYEYoehN/OLEYY.Are you sure you want to continue connecting (yes/no)? 因为这是第一次登录，ssh无法判断远程的服务端是否是正确的，在这里如果有人中间截获了你的登录请求，并且模拟ssh服务端的话，你的密码就会泄漏（中间人攻击），所以ssh会询问你：远程服务端的指纹是：xxxx，是不是确定登录。 选择yes，ssh会把该服务端的信息存到本地的~/.ssh/known_hosts文件中，那么下次登录就不会再询问了。 这时候服务端会使用公钥对A字符串加密，然后传输到客户端，客户端使用私钥进行解密，得到的A字符串，然后对A字符串进行md5加密，服务端判断传回来的字符串是否正确，如果正确，直接登录。 如果还是不行修改权限 12345678# 或 chmod g-w ~chmod 0755 ~ chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys sudo service sshd restart","categories":[],"tags":[]},{"title":"","slug":"Linux/shdaowsocks/kcp-server","date":"2018-03-30T12:26:32.000Z","updated":"2018-07-04T11:48:52.000Z","comments":true,"path":"2018/03/30/Linux/shdaowsocks/kcp-server/","link":"","permalink":"http://io.stelawliet.top/2018/03/30/Linux/shdaowsocks/kcp-server/","excerpt":"","text":"KCP-Server##作为kcptun的搬运工，我只是提供了一键安装脚本，至于使用的原理啊、功能啊、bug啊请各位移步到kcptun项目，我真的无能为力。 ##感谢kcptun提供这么优秀的软件 kcptun是kcp协议的一个简单应用，可以用于任意tcp网络程序的传输承载，以提高网络流畅度，降低掉线情况。 脚本是业余爱好，英文属于文盲，写的不好，不要笑话我，欢迎您批评指正。 安装平台：CentOS、Debian、Ubuntu。 注意：安装脚本2.0版本之前的请卸载后重新安装！！！ServerInstall123wget --no-check-certificate https://github.com/clangcn/kcp-server/raw/master/install-kcp-server.sh -O ./install-kcp-server.shchmod 500 ./install-kcp-server.sh./install-kcp-server.sh install UnInstall1./install-kcp-server.sh uninstall Update1./install-kcp-server.sh update 服务器管理1Usage: /etc/init.d/kcp-server &#123;start|stop|restart|status&#125;","categories":[],"tags":[]},{"title":"KCP和SS脚本","slug":"Linux/shdaowsocks/SS和Kcp脚本","date":"2018-03-30T11:52:51.000Z","updated":"2018-07-04T11:50:50.000Z","comments":true,"path":"2018/03/30/Linux/shdaowsocks/SS和Kcp脚本/","link":"","permalink":"http://io.stelawliet.top/2018/03/30/Linux/shdaowsocks/SS和Kcp脚本/","excerpt":"","text":"Centos安装ShadowSocks123wget --no-check-certificate -O shadowsocks-libev.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-libev.shchmod +x shadowsocks-libev.sh./shadowsocks-libev.sh 2&gt;&amp;1 | tee shadowsocks-libev.log 操作命令 使用命令：启动：/etc/init.d/shadowsocks start |stop|restart|status KCPTUN加速123wget --no-check-certificate https://github.com/kuoruan/shell-scripts/raw/master/kcptun/kcptun.shchmod +x ./kcptun.sh./kcptun.sh 防火墙启动firewall-cmd –zone=public –add-port=44444/tcp –permanent","categories":[{"name":"Linux","slug":"Linux","permalink":"http://io.stelawliet.top/categories/Linux/"},{"name":"VPS","slug":"Linux/VPS","permalink":"http://io.stelawliet.top/categories/Linux/VPS/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/tags/linux/"},{"name":"ShadowSocks","slug":"ShadowSocks","permalink":"http://io.stelawliet.top/tags/ShadowSocks/"},{"name":"Kcptun","slug":"Kcptun","permalink":"http://io.stelawliet.top/tags/Kcptun/"}]},{"title":"","slug":"JavaScript/node/module.exports&exports区别","date":"2018-03-29T14:53:06.000Z","updated":"2018-03-29T14:55:14.000Z","comments":true,"path":"2018/03/29/JavaScript/node/module.exports&exports区别/","link":"","permalink":"http://io.stelawliet.top/2018/03/29/JavaScript/node/module.exports&exports区别/","excerpt":"","text":"Module.exports和exports的区别一、官方解释因为SeaJs和Nodejs都是基于CommonJS,所以直接看的Node的官方文档解释 Module.exports The module.exports object is created by the Module system. Sometimes this is not acceptable; many want their module to be an instance of some class. To do this, assign the desired export object to module.exports. Note that assigning the desired object to exports will simply rebind the local exports variable, which is probably not what you want to do. 译文：module.exports对象是由模块系统创建的。 有时这是难以接受的；许多人希望他们的模块成为某个类的实例。 为了实现这个，需要将期望导出的对象赋值给module.exports。 注意，将期望的对象赋值给exports会简单地重新绑定到本地exports变量上，这可能不是你想要的。 exports The exports variable is available within a module’s file-level scope, and is assigned the value of module.exports before the module is evaluated. It allows a shortcut, so that module.exports.f = … can be written more succinctly as exports.f = …. However, be aware that like any variable, if a new value is assigned to exports, it is no longer bound to module.exports: 译文：exports变量是在模块的文件级别作用域内有效的，它在模块被执行前被赋于 module.exports 的值。它有一个快捷方式，以便 module.exports.f = … 可以被更简洁地写成exports.f = …。 注意，就像任何变量，如果一个新的值被赋值给exports，它就不再绑定到module.exports(其实是exports.属性会自动挂载到没有命名冲突的module.exports.属性) require从require导入方式去理解，关键有两个变量(全局变量module.exports，局部变量exports)、一个返回值(module.exports) 12345678910111213141516function require(...) &#123; var module = &#123; exports: &#123;&#125; &#125;; ((module, exports) =&gt; &#123; // 你的被引入代码 Start // var exports = module.exports = &#123;&#125;; (默认都有的) function some_func() &#123;&#125;; exports = some_func; // 此时，exports不再挂载到module.exports， // export将导出&#123;&#125;默认对象 module.exports = some_func; // 此时，这个模块将导出some_func对象，覆盖exports上的some_func // 你的被引入代码 End &#125;)(module, module.exports); // 不管是exports还是module.exports，最后返回的还是module.exports return module.exports;&#125; 二、Demo事例事例一：1.js123456789101112131415161718console.log(exports); // &#123;&#125; console.log(module.exports); // &#123;&#125; console.log(exports === module.exports); // true console.log(exports == module.exports); // true /** Module &#123; id: &apos;.&apos;, exports: &#123;&#125;, parent: null, filename: &apos;/1.js&apos;, loaded: false, children: [], paths: [ &apos;/node_modules&apos; ] &#125; */console.log(module); 从事例一中，可以看出来 1.每个js文件一创建，都有一个var exports = module.exports = {};，使exports和module.exports都指向一个空对象。 2.module是全局内置对象，exports是被var创建的局部对象。 3.module.exports和exports所指向的内存地址相同 事例二：2.js、3.js12345678910111213141516// 2.jsexports.id = &apos;exports的id&apos;; exports.id2 = &apos;exports的id2&apos;; exports.func = function()&#123; console.log(&apos;exports的函数&apos;);&#125;;exports.func2 = function() &#123; console.log(&apos;exports的函数2&apos;);&#125;;module.exports = &#123; id: &apos;module.exports的id&apos;, func:function()&#123; console.log(&apos;module.exports的函数&apos;); &#125;&#125;; 12345678910111213// 3.jsvar a = require(&apos;./2.js&apos;); // 当属性和函数在module.exports都有定义时：console.log(a.id); // module.exports的id console.log(a.func()); // module.exports的函数// 当属性在module.exports没有定义，函数在module.exports有定义console.log(a.id2); // undefined console.log(a.func()); // module.exports的函数// 当函数在module.exports没有定义，属性在module.exports有定义console.log(a.id); // module.exports的id console.log(a.func2()); // 报错了 TypeError: a.func2 is not a function 由例二可以知道： 1.module.exports像是exports的大哥，当module.exports以{}整体导出时会覆盖exports的属性和方法， 2.注意，若只是将属性/方法挂载在module.exports./exports.上时，exports.id=1和module.exports.id=100，module.exports.id=function(){}和exports.id=function(){}，最后id的值取决于exports.id和module.exports.id的顺序，谁在后，就是最后的值 3.若exports和module.exports同时赋值时，exports所使用的属性和方法必须出现在module.exports，若属性没有在module.exports中定义的话，出现undefined，若方法没有在module.exports中定义，会抛出TypeError错误。 例三 4.js、5.jsmodule.exports的对象、prototype、构造函数使用 12345678// 4.jsvar a = require(&apos;./5.js&apos;); // 若传的是类，new一个对象var person = new a(&apos;Kylin&apos;,20); console.log(person.speak()); // my name is Kylin ,my age is 20// 若不需要在构造函数时初始化参数，直接调用方法/属性// a.speak(); // my name is kylin ,my age is 20 12345678910111213141516// 5.js// Person类function Person(name,age)&#123; this.name = name; this.age = age;&#125;// 为类添加方法Person.prototype.speak = function()&#123; console.log(&apos;my name is &apos;+this.name+&apos; ,my age is &apos;+this.age);&#125;;// 返回类module.exports = Person;// 若构造函数没有传入参数(name,age)，直接传入对象// module.exports = new Person(&apos;kylin&apos;,20); 说了这么多，其实建议就是，如果只是单一属性或方法的话，就使用exports.属性/方法。要是导出多个属性或方法或使用对象构造方法，结合prototype等，就建议使用module.exports = {}。文章有很多地方描述的可能不是很准确，提到的点也不够全面，如果有不对的地方，还望斧正！ 参考资料：Nodejs官方文档(中文)、Node.js Module – exports vs module.exports、Understanding module.exports and exports in Node.js、exports 和 module.exports 的区别 转载请注明：信鑫-King’s Blog » Module.exports和exports的区别","categories":[],"tags":[]},{"title":"","slug":"Linux/ftp实例","date":"2018-03-28T08:32:11.000Z","updated":"2018-05-04T13:17:52.000Z","comments":true,"path":"2018/03/28/Linux/ftp实例/","link":"","permalink":"http://io.stelawliet.top/2018/03/28/Linux/ftp实例/","excerpt":"","text":"使用实例：利用编写 ftp 脚本可以自动完成文件传输任务。具体方法是使用 ftp 命令的 -in 选项，并重定向 ftp 命令的输入。现在我们来编写一个利用 ftp 登录到远程服务器，并以 bin 的文件格式，在 /home 目录下，下载 file1.log 以及 file2.sh 至本机 /opt/ibm/，并从本地 /opt 目录上传文件 file3.jave 至远程服务器 /home 的自动化脚本。 1234567891011ftp -ni &lt;&lt;+ open $IP user $USERNAME $PASSWD bin cd /home lcd /opt/ibm mget file1.log file2.sh lcd /opt mput file3.jave ls bye","categories":[],"tags":[]},{"title":"","slug":"Linux/shdaowsocks/kcptun","date":"2018-03-28T05:29:40.000Z","updated":"2018-03-28T05:29:40.000Z","comments":true,"path":"2018/03/28/Linux/shdaowsocks/kcptun/","link":"","permalink":"http://io.stelawliet.top/2018/03/28/Linux/shdaowsocks/kcptun/","excerpt":"","text":"kcptun shadowsocks加速方案转载 2017年02月17日 11:42:59 标签： kcptun 9825 原文连接：https://blog.kuoruan.com/102.html Kcptun介绍 Kcptun 是一个非常简单和快速的，基于 KCP 协议的 UDP 隧道，它可以将 TCP 流转换为 KCP+UDP 流。而 KCP 是一个快速可靠协议，能以比 TCP 浪费10%-20%的带宽的代价，换取平均延迟降低 30%-40%，且最大延迟降低三倍的传输效果。 Kcptun 是 KCP 协议的一个简单应用，可以用于任意 TCP 网络程序的传输承载，以提高网络流畅度，降低掉线情况。由于 Kcptun 使用 Go 语言编写，内存占用低（经测试，在64M内存服务器上稳定运行），而且适用于所有平台，甚至 Arm 平台。 Kcptun 工作示意图： [ 小内存福音，Kcptun Shadowsocks加速方案 - 第1张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/kcptun-550x159.png) KCP 协议：https://github.com/skywind3000/kcp Kcptun 项目地址：https://github.com/xtaci/kcptun 2016.08.31 v20160831发布，新版支持配置文件！ 2016.08.29 新的客户端可视化配置工具可选 2016.08.13 发布一键安装脚本 https://blog.kuoruan.com/110.html 2016.08.06 添加Kcptun可视化运行工具和Android使用说明。 2016.06.17 添加客户端开机自启批处理，重写软件启动vbs脚本。 相关项目以下为 Kcptun 的相关项目，如果有兴趣，可以了解一下。 1.Kcp-server：https://github.com/clangcn/kcp-server Kcp-server 是在 Kcptun 的基础上，添加了配置文件的支持，并整合了一个socks5代理，可用不用配合其他软件单独使用，而原版 Kcptun 需要配合其他软件使用而不能单独使用。Kcp-server 简化了安装过程，一条命令即可配置完毕。 2.Shadowsocks-Plus：https://github.com/shadowsocks-plus/shadowsocks-plus 基于 Shadowsocks Go 版本，加入了以下特性： 启动后降低权限至 nobody , 增强安全性； 与 kcptun 集成，配合相应客户端可加速传输； 网页控制面板。 部署Kcptun现在博主编写的一键安装脚本已公开发布测试，支持 Kcptun 一键安装、更新、卸载、配置，欢迎测试使用：Kcptun 服务端一键安装脚本 点击这里查看手动配置方式 响应速度： fast3 &gt; [fast2] &gt; fast &gt; normal &gt; default 有效载荷比： default &gt; normal &gt; fast &gt; [fast2] &gt; fast3 中间 mode 参数比较均衡，总之就是越快越浪费带宽（根据设置，可能会浪费数倍流量），请自行斟酌。推荐模式 fast2。 可用的参数请使用 ./server_linux_amd64 -h 查看： 12345678910111213141516171819202122232425262728 ./server_linux_amd64-hNAME: kcptun-kcptunserver USAGE: server_darwin_amd64[globaloptions]command[commandoptions][arguments…] VERSION: 20160820 COMMANDS: help,h Showsalistofcommandsorhelpforonecommand GLOBALOPTIONS: –listenvalue,-lvalue kcpserverlistenaddress(default:”:29900”) –targetvalue,-tvalue targetserveraddress(default:”127.0.0.1:12948”) –keyvalue pre-sharedsecretforclientandserver(default:”it’s a secrect”)[$KCPTUN_KEY] –cryptvalue aes,aes-128,aes-192,salsa20,blowfish,twofish,cast5,3des,tea,xtea,xor,none(default:”aes”) –modevalue profiles:fast3,fast2,fast,normal(default:”fast”) –mtuvalue setmaximumtransmissionunitofUDPpackets(default:1350) –sndwndvalue setsendwindowsize(numofpackets)(default:1024) –rcvwndvalue setreceivewindowsize(numofpackets)(default:1024) –datashardvalue setreed-solomonerasurecoding-datashard(default:10) –parityshardvalue setreed-solomonerasurecoding-parityshard(default:3) –dscpvalue setDSCP(6bit)(default:0) –nocomp disablecompression –help,-h showhelp –version,-v printtheversion 更深层次的参数调整需要理解 KCP 协议，并通过“隐藏参数”调整。巭孬嫑乱动 下面是作者给的配置参数样例，适用大部分ADSL接入（非对称上下行）的参数（实验环境电信100M ADSL）。其它带宽请按比例调整，比如 50M ADSL，把 CLIENT 的 -sndwnd -rcvwnd 减掉一半，SERVER 不变。 12 服务端: -mtu1400-sndwnd2048-rcvwnd2048-modefast2客户端: -mtu1400-sndwnd256-rcvwnd2048-modefast2-dscp46 在不丢包的情况下，有最大-rcvwnd 个数据包在网络上正在向你传输，以平均数据包大小avgsize计算，在任意时刻，有： network_cap = rcvwnd*avgsize 数据流向你，这个值再除以ping值(rtt)，等于最大带宽使用量。 max_bandwidth = network_cap/rtt = rcvwnd*avgsize/rtt 举例，设rcvwnd = 1024, avgsize = 1KB, rtt = 400ms，则： max_bandwidth = 1024 * 1KB / 400ms = 2.5MB/s ~= 25Mbps （注：以上计算不包括前向纠错的数据量） 前向纠错是最大带宽量的一个固定比例增加： max_bandwidth_fec = max_bandwidth*(datashard+parityshard)/datashard 举例，设datashard = 10 , partiyshard = 3，则： max_bandwidth_fec = max_bandwidth (10 + 3) /10 = 1.3max_bandwidth ＝ 1.3 * 25Mbps = 32.5Mbps 看不懂？那就别管它，你只要会简易自我调优方法就够了： 同时在两端逐步增大 client rcvwnd 和 server sndwnd; 尝试下载，观察如果带宽利用率（服务器＋客户端两端都要观察）接近物理带宽则停止，否则跳转到第一步。 基本原则：SERVER 的发送速率不能超过 ADSL 下行带宽，否则只会浪费您的服务器带宽。 如果你有任何问题，欢迎加入我们的QQ群寻求帮助：43391448 配置客户端首先下载 Kcptun 的客户端文件。 请注意：客户端版本建议和服务端版本一致，有许多朋友没有检查两端造成无法连接！ Windows 64位： 1 https://github.com/xtaci/kcptun/releases/download/v20161031/kcptun-windows-amd64-20161031.tar.gz Mac 64位： 1 https://github.com/xtaci/kcptun/releases/download/v20161031/kcptun-darwin-amd64-20161031.tar.gz 注意： 1.0830以后的版本不和之前的版本兼容，请确保两端使用相同的版本！ 2.下面的软件截图仅供选择软件时参考，请不要照着填写里边的参数！ 当前，Kcptun 已经有可视化配置工具了，你可以自行选择使用。如果不想用工具，可以往后翻，手动创建启动文件。 1.Kcptun客户端配置管理工具，来自 @dfdragon [ 小内存福音，Kcptun Shadowsocks加速方案 - 第3张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/kcptun-gui-1-550x330.jpg) 下载地址：https://github.com/dfdragon/kcptun_gclient/releases 2.kcptun-gui-windows，来自 @GangZhuo [ 小内存福音，Kcptun Shadowsocks加速方案 - 第4张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/kcptun-gui-windows-550x403.png) 下载地址：https://github.com/GangZhuo/kcptun-gui-windows/releases 3.来自“逗比根据地”的 Kcptun tools。由于软件是易语言编写的，可能会被杀毒软件报毒，请各位自行查毒。 [ 小内存福音，Kcptun Shadowsocks加速方案 - 第5张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/Kcptun_tools.png) 软件说明：http://www.dou-bi.com/ss-jc37/ 软件下载地址：https://pan.baidu.com/s/1i5HdlVv 4.KcptunGUI，来自“诸神的黄昏”。 [ 小内存福音，Kcptun Shadowsocks加速方案 - 第6张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/Kcptun-gui-550x280.png) 源码地址：https://git.oschina.net/ragnaroks/KcptunGUI 软件下载：https://git.oschina.net/ragnaroks/KcptunGUI/releases Mac 系统可以下载使用：https://github.com/dfdragon/kcptun_xclient/releases 注意：客户端和服务端参数必须一致的有: datashard parityshard nocomp key crypt 点击查看手动创建启动文件的方法 上面的配置过程中出现了多个端口，我在这里画个图，方便各位理解各端口的作用（点击看大图）： [ 小内存福音，Kcptun Shadowsocks加速方案 - 第7张 | 扩软博客](https://blog.kuoruan.com/wp-content/uploads/2016/06/Kcptun_ports.png) Shadowsocks 客户端配置在客户端中新建服务器： 服务器 IP 填写本机：127.0.0.1 服务器端口填写：12948 正确填写你的 Shadowsocks 密码，加密方式，协议和混淆方式。 切换到该服务器上，测试是否正确运行。 速度实测我用的服务器是搬瓦工 512M 内存，费利蒙机房，以此测试加速效果。 按结论看，Kcptun 的加速效果略逊于 Finalspeed，估计需要细调配置。 刚运行 Finalspeed 时，内存占用就达到了 9.1% 也就是接近 47M；而此时 Kcptun 占用 0.4%，也就是 2M左右。 YouTube 1440p 满跑情况下，FInalspeed 最高内存占用 15.4%，接近 79M；而此时 Kcptun 占用 3% 左右，即 15.5M。 速度方面，Finalspeed 最大速度达到了10000 Kbps +，Kcptun 6000+ Kbps。 以上结论为本人测试所得，仅作为参考；实际情况请自行测试，如有纰漏，欢迎指出。 多人同时使用如果想多人使用同一个服务器并同时使用 Kcptun 加速，需要启动多个 Kcptun 进程： 1.你使用的是本站的一键安装脚本，请使用命令： 1 ./kcptun.shadd 来添加一个新实例，新 Kcptun 实例使用的端口需要与其他实例不一致。 2.你是自己创建的启动脚本： 为了启动多个 Kcptun 服务端，你可以将 start.sh 拷贝一份，然后修改其中的 Kcptun 运行端口。 Android上使用请看这篇文章：Shadowsocks-Android客户端上的KCP配置说明 在路由器上使用如果需要在路由器上使用 Kcptun，首先你得有个智能路由器，然后能进入shell。 编译好的客户端文件在这里下载： https://github.com/bettermanbao/openwrt-kcptun/releases 小米路由器、极路由等一大批国产智能路由器都是 MT7620 的芯片，请下载 ramips 版本。","categories":[],"tags":[]},{"title":"","slug":"Linux/muti","date":"2018-03-27T12:43:22.000Z","updated":"2018-03-27T12:44:01.000Z","comments":true,"path":"2018/03/27/Linux/muti/","link":"","permalink":"http://io.stelawliet.top/2018/03/27/Linux/muti/","excerpt":"","text":"默认配置 服务器端口：自己设定（如不设定，默认从 9000-19999 之间随机生成）密码：自己设定（如不设定，默认为 teddysun.com）加密方式：自己设定（如不设定，Python 和 libev 版默认为 aes-256-gcm，R 和 Go 版默认为 aes-256-cfb）协议（protocol）：自己设定（如不设定，默认为 origin）（仅限 ShadowsocksR 版）混淆（obfs）：自己设定（如不设定，默认为 plain）（仅限 ShadowsocksR 版）备注：脚本默认创建单用户配置文件，如需配置多用户，请手动修改相应的配置文件后重启即可。 客户端下载 常规版 Windows 客户端https://github.com/shadowsocks/shadowsocks-windows/releases ShadowsocksR 版 Windows 客户端https://github.com/shadowsocksr-backup/shadowsocksr-csharp/releases 使用方法 使用root用户登录，运行以下命令： 123wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.shchmod +x shadowsocks-all.sh./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log 安装完成后，脚本提示如下 Congratulations, your_shadowsocks_version install completed!Your Server IP :your_server_ipYour Server Port :your_server_portYour Password :your_passwordYour Encryption Method:your_encryption_method Your QR Code: (For Shadowsocks Windows, OSX, Android and iOS clients)ss://your_encryption_method:your_password@your_server_ip:your_server_portYour QR Code has been saved as a PNG file path:your_path.png Welcome to visit:https://teddysun.com/486.htmlEnjoy it! 卸载方法 若已安装多个版本，则卸载时也需多次运行（每次卸载一种） 使用root用户登录，运行以下命令： 1./shadowsocks-all.sh uninstall 启动脚本 启动脚本后面的参数含义，从左至右依次为：启动，停止，重启，查看状态。 Shadowsocks-Python 版：/etc/init.d/shadowsocks-python start | stop | restart | statusShadowsocksR 版 ：/etc/init.d/shadowsocks-r start | stop | restart | statusShadowsocks-Go 版 ：/etc/init.d/shadowsocks-go start | stop | restart | statusShadowsocks-libev 版 ：/etc/init.d/shadowsocks-libev start | stop | restart | status 各版本默认配置文件 Shadowsocks-Python 版：/etc/shadowsocks-python/config.jsonShadowsocksR 版 ：/etc/shadowsocks-r/config.jsonShadowsocks-Go 版 ：/etc/shadowsocks-go/config.jsonShadowsocks-libev 版 ：/etc/shadowsocks-libev/config.json","categories":[],"tags":[]},{"title":"","slug":"Linux/ssh/ssr-py","date":"2018-03-27T12:42:27.000Z","updated":"2018-08-18T09:00:08.000Z","comments":true,"path":"2018/03/27/Linux/ssh/ssr-py/","link":"","permalink":"http://io.stelawliet.top/2018/03/27/Linux/ssh/ssr-py/","excerpt":"","text":"使用方法：使用root用户登录，运行以下命令： 123wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.shchmod +x shadowsocks.sh./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log 安装完成后，脚本提示如下： Congratulations, Shadowsocks-python server install completed!Your Server IP :your_server_ipYour Server Port :your_server_portYour Password :your_passwordYour Encryption Method:your_encryption_method Welcome to visit:http://teddysun.com/342.htmlEnjoy it! 卸载方法：使用root用户登录，运行以下命令： 1./shadowsocks.sh uninstall 单用户配置文件示例（2015 年 08 月 28 日修正）：配置文件路径：/etc/shadowsocks.json 12345678910&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:your_server_port, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;your_password&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;your_encryption_method&quot;, &quot;fast_open&quot;: false&#125; 多用户多端口配置文件示例（2015 年 08 月 28 日修正）：配置文件路径：/etc/shadowsocks.json 123456789101112131415&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;port_password&quot;:&#123; &quot;8989&quot;:&quot;password0&quot;, &quot;9001&quot;:&quot;password1&quot;, &quot;9002&quot;:&quot;password2&quot;, &quot;9003&quot;:&quot;password3&quot;, &quot;9004&quot;:&quot;password4&quot; &#125;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;your_encryption_method&quot;, &quot;fast_open&quot;: false&#125; 使用命令（2015 年 08 月 28 日修正）：启动：/etc/init.d/shadowsocks start停止：/etc/init.d/shadowsocks stop重启：/etc/init.d/shadowsocks restart状态：/etc/init.d/shadowsocks status 12345678910&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:55555, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;root1234&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;rc4-md5&quot;, &quot;fast_open&quot;:false&#125;","categories":[],"tags":[]},{"title":"","slug":"Java/framework/mybaits逆向工程example","date":"2018-03-25T07:52:31.000Z","updated":"2018-03-25T07:55:59.000Z","comments":true,"path":"2018/03/25/Java/framework/mybaits逆向工程example/","link":"","permalink":"http://io.stelawliet.top/2018/03/25/Java/framework/mybaits逆向工程example/","excerpt":"","text":"mybatis的逆向工程中创建的以Example类的作用在平常的开发中，有时会使用mybatis的逆向工程，来快速的创建类，其中在创建实例的过程中有一个以Example结尾的类，这个类是专门用来对这个单表来查询的类，就相当于，对该单表的增删改查是脱离sql性质的，直接在service层就可以完成（当然这个sql是逆向已经生过的） 例如： select id, username, birthday, sex, address from user WHERE ( username = ‘张三’ ) order by username asc 123456789101112131415@Test public void testFindUserByName()&#123; //通过criteria构造查询条件 UserExample userExample = new UserExample(); userExample.setOrderByClause(\"username asc\"); //asc升序,desc降序排列 userExample.setDistinct(false); //去除重复,true是选择不重复记录,false反之 UserExample.Criteria criteria = userExample.createCriteria(); //构造自定义查询条件 criteria.andUsernameEqualTo(\"张三\"); //自定义查询条件可能返回多条记录,使用List接收 List&lt;User&gt; users = userMapper.selectByExample(userExample); System.out.println(users); &#125; 1234567891011121314151617181920212223242526272829303132Mybatis逆向工程会生成实例及实例对应的example（用于添加条件，相当于where后的部分）xxxExample example = new xxxExample();Criteria criteria = example.createCriteria();方法说明：// 1.添加升序排列条件，DESC为降序example.setOrderByClause(\"字段名ASC\")// 2.去除重复，boolean类型，true为选择不重复的记录example.setDistinct(false)// 3.添加字段xxx为null的条件criteria.andXxxIsNull// 4.添加字段xxx不为null的条件criteria.andXxxIsNotNull// 5.添加xxx字段等于value条件criteria.andXxxEqualTo(value)// 6.添加xxx字段不等于value条件criteria.andXxxNotEqualTo(value)// 7.添加xxx字段大于value条件criteria.andXxxGreaterThan(value)// 8.添加xxx字段大于等于value条件criteria.andXxxGreaterThanOrEqualTo(value)// 9.添加xxx字段小于value条件criteria.andXxxLessThan(value)// 10.添加xxx字段小于等于value条件criteria.andXxxLessThanOrEqualTo(value)// 11.添加xxx字段值在Listcriteria.andXxxIn(List)// 12.不添加xxx字段值在Listcriteria.andXxxNotIn(List)// 13.添加xxx字段值在之间criteria.andXxxBetween(value1,value2)// 14.添加xxx字段值不在之间criteria.andXxxNotBetween(value1,value2)","categories":[],"tags":[]},{"title":"mybatis逆向工程配置","slug":"Java/JavaEE/mybatis逆向工程配置","date":"2018-03-24T15:59:00.000Z","updated":"2018-07-04T11:18:20.000Z","comments":true,"path":"2018/03/24/Java/JavaEE/mybatis逆向工程配置/","link":"","permalink":"http://io.stelawliet.top/2018/03/24/Java/JavaEE/mybatis逆向工程配置/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;&lt;!-- 配置生成器 --&gt;&lt;generatorConfiguration&gt;&lt;!-- 可以用于加载配置项或者配置文件，在整个配置文件中就可以使用$&#123;propertyKey&#125;的方式来引用配置项​ resource：配置资源加载地址，使用resource，MBG从classpath开始找，比如com/myproject/generatorConfig.properties ​ url：配置资源加载地质，使用URL的方式，比如file:///C:/myfolder/generatorConfig.properties.​ 注意，两个属性只能选址一个;​ ​ 另外，如果使用了mybatis-generator-maven-plugin，那么在pom.xml中定义的properties都可以直接在generatorConfig.xml中使用&lt;properties resource=&quot;&quot; url=&quot;&quot; /&gt; --&gt; &lt;!-- 在MBG工作的时候，需要额外加载的依赖包​ location属性指明加载jar/zip包的全路径&lt;classPathEntry location=&quot;/Program Files/IBM/SQLLIB/java/db2java.zip&quot; /&gt; --&gt;&lt;!-- ​ context:生成一组对象的环境 ​ id:必选，上下文id，用于在生成错误时提示​ defaultModelType:指定生成对象的样式​ 1，conditional：类似hierarchical；​ 2，flat：所有内容（主键，blob）等全部生成在一个对象中；​ 3，hierarchical：主键生成一个XXKey对象(key class)，Blob等单独生成一个对象，其他简单属性在一个对象中(record class)​ targetRuntime:​ 1，MyBatis3：默认的值，生成基于MyBatis3.x以上版本的内容，包括XXXBySample；​ 2，MyBatis3Simple：类似MyBatis3，只是不生成XXXBySample；​ introspectedColumnImpl：类全限定名，用于扩展MBG--&gt;&lt;context id=&quot;mysql&quot; defaultModelType=&quot;hierarchical&quot; targetRuntime=&quot;MyBatis3Simple&quot; &gt;​ &lt;!-- 自动识别数据库关键字，默认false，如果设置为true，根据SqlReservedWords中定义的关键字列表；​ 一般保留默认值，遇到数据库关键字（Java关键字），使用columnOverride覆盖​ --&gt;​ &lt;property name=&quot;autoDelimitKeywords&quot; value=&quot;false&quot;/&gt;​ &lt;!-- 生成的Java文件的编码 --&gt;​ &lt;property name=&quot;javaFileEncoding&quot; value=&quot;UTF-8&quot;/&gt;​ &lt;!-- 格式化java代码 --&gt;​ &lt;property name=&quot;javaFormatter&quot; value=&quot;org.mybatis.generator.api.dom.DefaultJavaFormatter&quot;/&gt;​ &lt;!-- 格式化XML代码 --&gt;​ &lt;property name=&quot;xmlFormatter&quot; value=&quot;org.mybatis.generator.api.dom.DefaultXmlFormatter&quot;/&gt;​ ​ &lt;!-- beginningDelimiter和endingDelimiter：指明数据库的用于标记数据库对象名的符号，比如ORACLE就是双引号，MYSQL默认是`反引号； --&gt;​ &lt;property name=&quot;beginningDelimiter&quot; value=&quot;`&quot;/&gt;​ &lt;property name=&quot;endingDelimiter&quot; value=&quot;`&quot;/&gt;​ ​ &lt;!-- 必须要有的，使用这个配置链接数据库​ @TODO:是否可以扩展​ --&gt;​ &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot; connectionURL=&quot;jdbc:mysql:///pss&quot; userId=&quot;root&quot; password=&quot;admin&quot;&gt;​ &lt;!-- 这里面可以设置property属性，每一个property属性都设置到配置的Driver上 --&gt;​ &lt;/jdbcConnection&gt;​ ​ &lt;!-- java类型处理器 ​ 用于处理DB中的类型到Java中的类型，默认使用JavaTypeResolverDefaultImpl；​ 注意一点，默认会先尝试使用Integer，Long，Short等来对应DECIMAL和 NUMERIC数据类型； ​ --&gt;​ &lt;javaTypeResolver type=&quot;org.mybatis.generator.internal.types.JavaTypeResolverDefaultImpl&quot;&gt;​ &lt;!-- ​ true：使用BigDecimal对应DECIMAL和 NUMERIC数据类型​ false：默认,​ scale&gt;0;length&gt;18：使用BigDecimal;​ scale=0;length[10,18]：使用Long；​ scale=0;length[5,9]：使用Integer；​ scale=0;length&lt;5：使用Short；​ --&gt;​ &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot;/&gt;​ &lt;/javaTypeResolver&gt;​ ​ ​ &lt;!-- java模型创建器，是必须要的元素​ 负责：1，key类（见context的defaultModelType）；2，java类；3，查询类​ targetPackage：生成的类要放的包，真实的包受enableSubPackages属性控制；​ targetProject：目标项目，指定一个存在的目录下，生成的内容会放到指定目录中，如果目录不存在，MBG不会自动建目录​ --&gt;​ &lt;javaModelGenerator targetPackage=&quot;com._520it.mybatis.domain&quot; targetProject=&quot;src/main/java&quot;&gt;​ &lt;!-- for MyBatis3/MyBatis3Simple​ 自动为每一个生成的类创建一个构造方法，构造方法包含了所有的field；而不是使用setter；​ --&gt;​ &lt;property name=&quot;constructorBased&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 在targetPackage的基础上，根据数据库的schema再生成一层package，最终生成的类放在这个package下，默认为false --&gt;​ &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;​ ​ &lt;!-- for MyBatis3 / MyBatis3Simple​ 是否创建一个不可变的类，如果为true，​ 那么MBG会创建一个没有setter方法的类，取而代之的是类似constructorBased的类​ --&gt;​ &lt;property name=&quot;immutable&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 设置一个根对象，​ 如果设置了这个根对象，那么生成的keyClass或者recordClass会继承这个类；在Table的rootClass属性中可以覆盖该选项​ 注意：如果在key class或者record class中有root class相同的属性，MBG就不会重新生成这些属性了，包括：​ 1，属性名相同，类型相同，有相同的getter/setter方法；​ --&gt;​ &lt;property name=&quot;rootClass&quot; value=&quot;com._520it.mybatis.domain.BaseDomain&quot;/&gt;​ ​ &lt;!-- 设置是否在getter方法中，对String类型字段调用trim()方法 --&gt;​ &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot;/&gt;​ &lt;/javaModelGenerator&gt;​ ​ ​ &lt;!-- 生成SQL map的XML文件生成器，​ 注意，在Mybatis3之后，我们可以使用mapper.xml文件+Mapper接口（或者不用mapper接口），​ 或者只使用Mapper接口+Annotation，所以，如果 javaClientGenerator配置中配置了需要生成XML的话，这个元素就必须配置​ targetPackage/targetProject:同javaModelGenerator​ --&gt;​ &lt;sqlMapGenerator targetPackage=&quot;com._520it.mybatis.mapper&quot; targetProject=&quot;src/main/resources&quot;&gt;​ &lt;!-- 在targetPackage的基础上，根据数据库的schema再生成一层package，最终生成的类放在这个package下，默认为false --&gt;​ &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;​ &lt;/sqlMapGenerator&gt;​ ​ ​ &lt;!-- 对于mybatis来说，即生成Mapper接口，注意，如果没有配置该元素，那么默认不会生成Mapper接口 ​ targetPackage/targetProject:同javaModelGenerator​ type：选择怎么生成mapper接口（在MyBatis3/MyBatis3Simple下）：​ 1，ANNOTATEDMAPPER：会生成使用Mapper接口+Annotation的方式创建（SQL生成在annotation中），不会生成对应的XML；​ 2，MIXEDMAPPER：使用混合配置，会生成Mapper接口，并适当添加合适的Annotation，但是XML会生成在XML中；​ 3，XMLMAPPER：会生成Mapper接口，接口完全依赖XML；​ 注意，如果context是MyBatis3Simple：只支持ANNOTATEDMAPPER和XMLMAPPER​ --&gt;​ &lt;javaClientGenerator targetPackage=&quot;com._520it.mybatis.mapper&quot; type=&quot;ANNOTATEDMAPPER&quot; targetProject=&quot;src/main/java&quot;&gt;​ &lt;!-- 在targetPackage的基础上，根据数据库的schema再生成一层package，最终生成的类放在这个package下，默认为false --&gt;​ &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;​ ​ &lt;!-- 可以为所有生成的接口添加一个父接口，但是MBG只负责生成，不负责检查​ &lt;property name=&quot;rootInterface&quot; value=&quot;&quot;/&gt;​ --&gt;​ &lt;/javaClientGenerator&gt;​ ​ &lt;!-- 选择一个table来生成相关文件，可以有一个或多个table，必须要有table元素​ 选择的table会生成一下文件：​ 1，SQL map文件​ 2，生成一个主键类；​ 3，除了BLOB和主键的其他字段的类；​ 4，包含BLOB的类；​ 5，一个用户生成动态查询的条件类（selectByExample, deleteByExample），可选；​ 6，Mapper接口（可选）​ ​ tableName（必要）：要生成对象的表名；​ 注意：大小写敏感问题。正常情况下，MBG会自动的去识别数据库标识符的大小写敏感度，在一般情况下，MBG会​ 根据设置的schema，catalog或tablename去查询数据表，按照下面的流程：​ 1，如果schema，catalog或tablename中有空格，那么设置的是什么格式，就精确的使用指定的大小写格式去查询；​ 2，否则，如果数据库的标识符使用大写的，那么MBG自动把表名变成大写再查找；​ 3，否则，如果数据库的标识符使用小写的，那么MBG自动把表名变成小写再查找；​ 4，否则，使用指定的大小写格式查询；​ 另外的，如果在创建表的时候，使用的&quot;&quot;把数据库对象规定大小写，就算数据库标识符是使用的大写，在这种情况下也会使用给定的大小写来创建表名；​ 这个时候，请设置delimitIdentifiers=&quot;true&quot;即可保留大小写格式；​ ​ 可选：​ 1，schema：数据库的schema；​ 2，catalog：数据库的catalog；​ 3，alias：为数据表设置的别名，如果设置了alias，那么生成的所有的SELECT SQL语句中，列名会变成：alias_actualColumnName​ 4，domainObjectName：生成的domain类的名字，如果不设置，直接使用表名作为domain类的名字；可以设置为somepck.domainName，那么会自动把domainName类再放到somepck包里面；​ 5，enableInsert（默认true）：指定是否生成insert语句；​ 6，enableSelectByPrimaryKey（默认true）：指定是否生成按照主键查询对象的语句（就是getById或get）；​ 7，enableSelectByExample（默认true）：MyBatis3Simple为false，指定是否生成动态查询语句；​ 8，enableUpdateByPrimaryKey（默认true）：指定是否生成按照主键修改对象的语句（即update)；​ 9，enableDeleteByPrimaryKey（默认true）：指定是否生成按照主键删除对象的语句（即delete）；​ 10，enableDeleteByExample（默认true）：MyBatis3Simple为false，指定是否生成动态删除语句；​ 11，enableCountByExample（默认true）：MyBatis3Simple为false，指定是否生成动态查询总条数语句（用于分页的总条数查询）；​ 12，enableUpdateByExample（默认true）：MyBatis3Simple为false，指定是否生成动态修改语句（只修改对象中不为空的属性）；​ 13，modelType：参考context元素的defaultModelType，相当于覆盖；​ 14，delimitIdentifiers：参考tableName的解释，注意，默认的delimitIdentifiers是双引号，如果类似MYSQL这样的数据库，使用的是`（反引号，那么还需要设置context的beginningDelimiter和endingDelimiter属性）​ 15，delimitAllColumns：设置是否所有生成的SQL中的列名都使用标识符引起来。默认为false，delimitIdentifiers参考context的属性​ ​ 注意，table里面很多参数都是对javaModelGenerator，context等元素的默认属性的一个复写；​ --&gt;​ &lt;table tableName=&quot;userinfo&quot; &gt;​ ​ &lt;!-- 参考 javaModelGenerator 的 constructorBased属性--&gt;​ &lt;property name=&quot;constructorBased&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 默认为false，如果设置为true，在生成的SQL中，table名字不会加上catalog或schema； --&gt;​ &lt;property name=&quot;ignoreQualifiersAtRuntime&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 参考 javaModelGenerator 的 immutable 属性 --&gt;​ &lt;property name=&quot;immutable&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 指定是否只生成domain类，如果设置为true，只生成domain类，如果还配置了sqlMapGenerator，那么在mapper XML文件中，只生成resultMap元素 --&gt;​ &lt;property name=&quot;modelOnly&quot; value=&quot;false&quot;/&gt;​ ​ &lt;!-- 参考 javaModelGenerator 的 rootClass 属性 ​ &lt;property name=&quot;rootClass&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 参考javaClientGenerator 的 rootInterface 属性​ &lt;property name=&quot;rootInterface&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 如果设置了runtimeCatalog，那么在生成的SQL中，使用该指定的catalog，而不是table元素上的catalog ​ &lt;property name=&quot;runtimeCatalog&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 如果设置了runtimeSchema，那么在生成的SQL中，使用该指定的schema，而不是table元素上的schema ​ &lt;property name=&quot;runtimeSchema&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 如果设置了runtimeTableName，那么在生成的SQL中，使用该指定的tablename，而不是table元素上的tablename ​ &lt;property name=&quot;runtimeTableName&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 注意，该属性只针对MyBatis3Simple有用；​ 如果选择的runtime是MyBatis3Simple，那么会生成一个SelectAll方法，如果指定了selectAllOrderByClause，那么会在该SQL中添加指定的这个order条件；​ --&gt;​ &lt;property name=&quot;selectAllOrderByClause&quot; value=&quot;age desc,username asc&quot;/&gt;​ ​ &lt;!-- 如果设置为true，生成的model类会直接使用column本身的名字，而不会再使用驼峰命名方法，比如BORN_DATE，生成的属性名字就是BORN_DATE,而不会是bornDate --&gt;​ &lt;property name=&quot;useActualColumnNames&quot; value=&quot;false&quot;/&gt;​ ​ ​ &lt;!-- generatedKey用于生成生成主键的方法，​ 如果设置了该元素，MBG会在生成的&lt;insert&gt;元素中生成一条正确的&lt;selectKey&gt;元素，该元素可选​ column:主键的列名；​ sqlStatement：要生成的selectKey语句，有以下可选项：​ Cloudscape:相当于selectKey的SQL为： VALUES IDENTITY_VAL_LOCAL()​ DB2 :相当于selectKey的SQL为： VALUES IDENTITY_VAL_LOCAL()​ DB2_MF :相当于selectKey的SQL为：SELECT IDENTITY_VAL_LOCAL() FROM SYSIBM.SYSDUMMY1​ Derby :相当于selectKey的SQL为：VALUES IDENTITY_VAL_LOCAL()​ HSQLDB :相当于selectKey的SQL为：CALL IDENTITY()​ Informix :相当于selectKey的SQL为：select dbinfo(&apos;sqlca.sqlerrd1&apos;) from systables where tabid=1​ MySql :相当于selectKey的SQL为：SELECT LAST_INSERT_ID()​ SqlServer :相当于selectKey的SQL为：SELECT SCOPE_IDENTITY()​ SYBASE :相当于selectKey的SQL为：SELECT @@IDENTITY​ JDBC :相当于在生成的insert元素上添加useGeneratedKeys=&quot;true&quot;和keyProperty属性​ &lt;generatedKey column=&quot;&quot; sqlStatement=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- ​ 该元素会在根据表中列名计算对象属性名之前先重命名列名，非常适合用于表中的列都有公用的前缀字符串的时候，​ 比如列名为：CUST_ID,CUST_NAME,CUST_EMAIL,CUST_ADDRESS等；​ 那么就可以设置searchString为&quot;^CUST_&quot;，并使用空白替换，那么生成的Customer对象中的属性名称就不是​ custId,custName等，而是先被替换为ID,NAME,EMAIL,然后变成属性：id，name，email；​ ​ 注意，MBG是使用java.util.regex.Matcher.replaceAll来替换searchString和replaceString的，​ 如果使用了columnOverride元素，该属性无效；​ ​ &lt;columnRenamingRule searchString=&quot;&quot; replaceString=&quot;&quot;/&gt;​ --&gt;​ ​ ​ &lt;!-- 用来修改表中某个列的属性，MBG会使用修改后的列来生成domain的属性；​ column:要重新设置的列名；​ 注意，一个table元素中可以有多个columnOverride元素哈~​ --&gt;​ &lt;columnOverride column=&quot;username&quot;&gt;​ &lt;!-- 使用property属性来指定列要生成的属性名称 --&gt;​ &lt;property name=&quot;property&quot; value=&quot;userName&quot;/&gt;​ ​ &lt;!-- javaType用于指定生成的domain的属性类型，使用类型的全限定名​ &lt;property name=&quot;javaType&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- jdbcType用于指定该列的JDBC类型 ​ &lt;property name=&quot;jdbcType&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- typeHandler 用于指定该列使用到的TypeHandler，如果要指定，配置类型处理器的全限定名​ 注意，mybatis中，不会生成到mybatis-config.xml中的typeHandler​ 只会生成类似：where id = #&#123;id,jdbcType=BIGINT,typeHandler=com._520it.mybatis.MyTypeHandler&#125;的参数描述​ &lt;property name=&quot;jdbcType&quot; value=&quot;&quot;/&gt;​ --&gt;​ ​ &lt;!-- 参考table元素的delimitAllColumns配置，默认为false​ &lt;property name=&quot;delimitedColumnName&quot; value=&quot;&quot;/&gt;​ --&gt;​ &lt;/columnOverride&gt;​ ​ &lt;!-- ignoreColumn设置一个MGB忽略的列，如果设置了改列，那么在生成的domain中，生成的SQL中，都不会有该列出现 ​ column:指定要忽略的列的名字；​ delimitedColumnName：参考table元素的delimitAllColumns配置，默认为false​ ​ 注意，一个table元素中可以有多个ignoreColumn元素​ &lt;ignoreColumn column=&quot;deptId&quot; delimitedColumnName=&quot;&quot;/&gt;​ --&gt;​ &lt;/table&gt;​ &lt;/context&gt;&lt;/generatorConfiguration&gt; 作者：叩丁狼教育链接：https://www.jianshu.com/p/e09d2370b796","categories":[{"name":"Java","slug":"Java","permalink":"http://io.stelawliet.top/categories/Java/"},{"name":"framework","slug":"Java/framework","permalink":"http://io.stelawliet.top/categories/Java/framework/"},{"name":"mybatis","slug":"Java/framework/mybatis","permalink":"http://io.stelawliet.top/categories/Java/framework/mybatis/"}],"tags":[{"name":"mybatis","slug":"mybatis","permalink":"http://io.stelawliet.top/tags/mybatis/"},{"name":"逆向工程","slug":"逆向工程","permalink":"http://io.stelawliet.top/tags/逆向工程/"}]},{"title":"web管理tomcat项目配置","slug":"Java/JavaEE/远程web管理tomcat部署","date":"2018-03-24T08:40:04.000Z","updated":"2018-07-04T12:02:27.000Z","comments":true,"path":"2018/03/24/Java/JavaEE/远程web管理tomcat部署/","link":"","permalink":"http://io.stelawliet.top/2018/03/24/Java/JavaEE/远程web管理tomcat部署/","excerpt":"","text":"1.配置web管理帐号密码权限vim tomcat/conf/tomcat-users.xml编辑tomcat配置路径下的tomcat-users.xml; 123456&lt;role rolename=\"tomcat\"/&gt;&lt;role rolename=\"manager\"/&gt;&lt;role rolename=\"manager-gui\"/&gt;&lt;role rolename=\"manager-script\" /&gt;&lt;role rolename=\"admin-gui\"/&gt;&lt;user username=\"admin\" password=\"admin\" roles=\"tomcat,manager,manager-gui,manager-script,admin-gui\" /&gt; username 和password的值为管理帐号和密码 role为对应的管理功能 2.远程管理云主机配置vim tomcat/conf/Catalina/localhost/manager.xml 在此文件中添加远程主机管理权限 （原本默认只能本机管理） 1234&lt;Context privileged=\"true\" antiResourceLocking=\"false\" docBase=\"$&#123;catalina.home&#125;/webapps/manager\"&gt; &lt;Valve className=\"org.apache.catalina.valves.RemoteAddrValve\" allow=\"^.*$\" /&gt;&lt;/Context&gt; 3.MAVEN插件自动部署设置Maven目前有俩个插件来配置tomcat的部署：tomcat-maven-plugin和tomcat7-maven-plugin、 12345678910 &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;configuration&gt; &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin&lt;/password&gt; &lt;/configuration&gt; &lt;/plugin&gt; password和username为上文设置的用户名和密码","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"javaee","slug":"java/javaee","permalink":"http://io.stelawliet.top/categories/java/javaee/"},{"name":"server","slug":"java/javaee/server","permalink":"http://io.stelawliet.top/categories/java/javaee/server/"},{"name":"tomcat","slug":"java/javaee/server/tomcat","permalink":"http://io.stelawliet.top/categories/java/javaee/server/tomcat/"}],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://io.stelawliet.top/tags/tomcat/"}]},{"title":"","slug":"Java/JavaEE/MAVEN/Maven配置详解","date":"2018-03-24T08:10:23.000Z","updated":"2018-03-24T08:11:21.000Z","comments":true,"path":"2018/03/24/Java/JavaEE/MAVEN/Maven配置详解/","link":"","permalink":"http://io.stelawliet.top/2018/03/24/Java/JavaEE/MAVEN/Maven配置详解/","excerpt":"","text":"MAVEN2的配置文件有两个settings.xml和pom.xml settings.xml：保存的是本地所有项目所共享的全局配置信息，默认在maven安装目录的conf目录下，如果没有安装maven而是用的m2eclipse插件，那么也可以把这个配置文件放在.m2目录下 pom.xml：描述项目的配置文件，放在每个项目的根目录下 settings.xml localRepository：本地仓库位置，默认在.m2/repository/，可以人为更改 offline：离线开关，是否每次构建都从远程仓库下载，默认false servers：对应POM文件的distributionManagement元素里定义id,和登陆服务器的用户名、密码 mirrors：定义仓库镜像，将仓库地址指向自定义仓库地址(id：新的镜像ID，name：镜像名称，url：镜像地址，mirrorOf：以那个地址做镜像，默认为central) proxies：设置HTTP代理 parent 给出父项目的位置，如果存在上一级父项目的话。如果没有特别指出的话，值就是父项目对于当前项目而言。位置是一个 as a group ID, artifact ID 和version元素的组合。modelVersion 描述这个POM文件遵从哪个版本的项目描述符.groupId 针对一个项目的普遍唯一识别符。通常用一个完全正确的包的名字来与其他项目的类似名字来进行区分（比如：org.apache.maven)artifactId 在给定groupID 的group里面为artifact 指定的标识符是唯一的 artifact 代表的是被制作或者被一个project应用的组件。对于Maven项目的artifact 的例子包括：一些JARs, 原代码以及二进制的发布以及WARs.packaging 这个项目生产出来的artifact 类型，举个例子 jar war pom Plugins 能够创建他们自己的包，包括包的类型，所以这个列表不可能包含所有可能的类型name 当前项目的全称version 当前项目产生的artifact的当前版本description 当前项目的一个细节描述，当需要描述这个项目的时候被Maven所用，比如在web 站点中。 这个元素能够被指定为CDATA 类型，允许在描述器中HTML的tags, 并不鼓励用空白文本来表示。 如果你需要去修改生成的web 站点的索引页，你能够用你自己的索引来代替自动生成的文本。url 当前项目的主页的URLprerequisites 描述当前项目的编译环境的先决条件issueManagement 当前项目的发布管理信息。ciManagement 当前项目的连续集成信息。inceptionYear 当前项目开始的年份, 用4位数字描述. 涉及到介绍情况时用作提供版权信息mailingLists 包含的信息包括邮件列表developers 描述当前的项目的开发人员的信息contributors 描述对当前项目有贡献的人员的信息，不特指开发人员licenses 这个元素描述了当前项目的所有的许可文件。每一个许可文件用一个许可元素来描述，然后描述额外的元素. 通常只列出适用于这个项目的许可文件以及适用于 依赖的非licenses。如果多个licenses都列出来了，那么假设这个用户选择其中的所需的，而不是接受所有的许可文件。scm 指定当前项目中的版本控制工具，比如CVS, Subversion, 等等。organization 这个元素描述这个项目所属组织的各种属性的描述。这些属性应用于文档创建的时候 (版权通知和链接).build 创建项目时必须的信息。profiles 本地项目编译档案文件时的列表，被激活时会修改build的过程modules 模块 (有时被叫做子项目)作为当前项目的一部分.每一个被列出来的子模块都指向包含这个模块的目录文件的相对路径repositories 发现依赖和扩展的远程资源库pluginRepositories 发现plugins 的远程资源库的列表，主要是为了编译和报告dependencies 这个元素描述了所有与当前项目相关的依赖.这些依赖被用作创建一个编译时的路径. 他们被自动的从资源库中下在下来依据当前项目的定义。如需更多信息，参看 the dependency mechanismreports Deprecated.禁止适用。现在的版本中被 Maven所忽略掉。reporting 这个元素包括报告的plugins 的指定，用作Maven生成站点的自动生成报告.这些报告将会运行当用户执行mvn site. 所有的报告将会包括在浏览器的导航栏中。dependencyManagement 缺省的依赖信息将会从这个元素中继承。这些依赖在这一部分中被不立刻被解决的。当一个源于这个POM的元素描述了一个依赖根据匹配的 groupId 和artifactId,这个部分的版本和其他值用作那些还没有指定的依赖。distributionManagement 对于一个项目分配的信息允许对于远程web服务器和资源库的site和artifacts配置。 -——————————————————————————————————- 什么是pom?​ pom作为项目对象模型。通过xml表示maven项目，使用pom.xml来实现。主要描述了项目：包括配置文件；开发者需要遵循的规则，缺陷管理系统，组织和licenses，项目的url，项目的依赖性，以及其他所有的项目相关因素。快速察看： xml 代码 4.0.0modelVersion&gt; … … … … … … … … … … … … … … … … … … … … … … … … … … … … 基本内容：POM包括了所有的项目信息。maven 相关：pom定义了最小的maven2元素，允许groupId,artifactId,version。所有需要的元素 groupId:项目或者组织的唯一标志，并且配置时生成的路径也是由此生成，如org.codehaus.mojo生成的相对路径为：/org/codehaus/mojoartifactId: 项目的通用名称version:项目的版本packaging: 打包的机制，如pom, jar, maven-plugin, ejb, war, ear, rar, parclassifier: 分类 POM关系：主要为依赖，继承，合成依赖关系：xml 代码 ​ ​ junit​ junit​ 4.0​ ja​ test​ true​ ​ … groupId, artifactId, version:描述了依赖的项目唯一标志可以通过以下方式进行安装： 使用以下的命令安装：mvn install:install-file –Dfile=non-maven-proj.jar –DgroupId=some.group –DartifactId=non-maven-proj –Dversion=1创建自己的库,并配置，使用deploy:deploy-file设置此依赖范围为system，定义一个系统路径。不提倡。type:相应的依赖产品包形式，如jar，warscope:用于限制相应的依赖范围，包括以下的几种变量：compile ：默认范围，用于编译provided：类似于编译，但支持你期待jdk或者容器提供，类似于classpathruntime:在执行时，需要使用test:用于test任务时使用system:需要外在提供相应得元素。通过systemPath来取得systemPath: 仅用于范围为system。提供相应的路径optional: 标注可选，当项目自身也是依赖时。用于连续依赖时使用独占性外在告诉maven你只包括指定的项目，不包括相关的依赖。此因素主要用于解决版本冲突问题 xml 代码 ​ ​ org.apache.maven​ maven-embedder​ 2.0​ ​ ​ org.apache.maven​ maven-core​ ​ ​ 表示项目maven-embedder需要项目maven-core，但我们不想引用maven-core 继承关系另一个强大的变化,maven带来的是项目继承。主要的设置：定义父项目 xml 代码 4.0.0 org.codehaus.mojo my-parent 2.0version&gt; pom packaging 类型，需要pom用于parent和合成多个项目。我们需要增加相应的值给父pom，用于子项目继承。主要的元素如下： 依赖型开发者和合作者插件列表报表列表插件执行使用相应的匹配ids插件配置子项目配置xml 代码 4.0.0 ​ org.codehaus.mojo​ my-parent​ 2.0​ ../my-parent my-project relativePath可以不需要，但是用于指明parent的目录，用于快速查询。 dependencyManagement：用于父项目配置共同的依赖关系，主要配置依赖包相同因素，如版本，scope。 合成（或者多个模块）​ 一个项目有多个模块，也叫做多重模块，或者合成项目。如下的定义： xml 代码 4.0.0 org.codehaus.mojo my-parent 2.0 ​ my-project1​ my-project2 build 设置​ 主要用于编译设置，包括两个主要的元素，build和reportbuild​ 主要分为两部分，基本元素和扩展元素集合注意：包括项目build和profile build xml 代码 … ​ ​ …​ 基本元素 xml 代码 install ${basedir}/targetdirectory&gt; ${artifactId}-${version}finalName&gt; ​ filters/filter1.properties … defaultGoal: 定义默认的目标或者阶段。如installdirectory: 编译输出的目录finalName: 生成最后的文件的样式filter: 定义过滤，用于替换相应的属性文件，使用maven定义的属性。设置所有placehold的值 资源(resources)​ 你项目中需要指定的资源。如spring配置文件,log4j.properties xml 代码 ​ …​ ​ ​ META-INF/plexus​ falsefiltering&gt;​ ${basedir}/src/main/plexus​ ​ configuration.xml​ ​ ​ */.properties​ ​ ​ ​ ​ …​ ​ … resources: resource的列表，用于包括所有的资源targetPath: 指定目标路径，用于放置资源，用于buildfiltering: 是否替换资源中的属性placeholddirectory: 资源所在的位置includes: 样式，包括那些资源excludes: 排除的资源testResources: 测试资源列表插件在build时，执行的插件，比较有用的部分，如使用jdk 5.0编译等等 xml 代码 ​ …​ ​ ​ org.apache.maven.plugins​ maven-jar-plugin​ 2.0​ false​ true​ ​ test​ ​ …​ …​ ​ extensions: true or false，是否装载插件扩展。默认falseinherited: true or false，是否此插件配置将会应用于poms，那些继承于此的项目configuration: 指定插件配置dependencies: 插件需要依赖的包executions: 用于配置execution目标，一个插件可以有多个目标。如下： xml 代码 ​ maven-antrun-plugin​ ​ ​ echodirid&gt;​ ​ run​ verify​ false​ ​ ​ Build Dir: ${project.build.directory}​ ​ ​ ​ ​ 说明：id:规定execution 的唯一标志goals: 表示目标phase: 表示阶段，目标将会在什么阶段执行inherited: 和上面的元素一样，设置false maven将会拒绝执行继承给子插件configuration: 表示此执行的配置属性插件管理 pluginManagement：插件管理以同样的方式包括插件元素，用于在特定的项目中配置。所有继承于此项目的子项目都能使用。主要定义插件的共同元素扩展元素集合主要包括以下的元素：Directories用于设置各种目录结构，如下：xml 代码​ ${basedir}/src/main/java​ ${basedir}/src/main/scripts​ ${basedir}/src/test/java​ ${basedir}/target/classes​ ${basedir}/target/test-classes​ …Extensions表示需要扩展的插件，必须包括进相应的build路径。xml 代码​ …​ ​ ​ org.apache.maven.wagon​ wagon-ftp​ 1.0-alpha-3​ ​ ​ …Reporting​ 用于在site阶段输出报表。特定的maven 插件能输出相应的定制和配置报表。xml 代码​ ​ ​ ${basedir}/target/siteoutputDirectory&gt;​ maven-project-info-reports-pluginartifactId&gt;​ ​ reportSet&gt;​ reportSets&gt;​ plugin&gt;​ plugins&gt;reporting&gt;Report Sets​ 用于配置不同的目标，应用于不同的报表xml 代码​ ​ ​ …​ ​ ​ sunlinkid&gt;​ ​ javadoc​ truei​ ​ ​ http://java.sun.com/j2se/1.5.0/docs/api/​ ​ ​ ​ ​ name:项目除了artifactId外，可以定义多个名称description: 项目描述url: 项目urlinceptionYear:创始年份Licensesxml 代码​ Apache 2name&gt;​ http://www.apache.org/licenses/LICENSE-2.0.txt​ repodistribution&gt;​ A business-friendly OSS licenseOrganization配置组织信息xml 代码​ Codehaus Mojoname&gt;​ http://mojo.codehaus.orgorganization&gt;Developers配置开发者信息xml 代码​ ​ eric​ Eric​ eredmond@codehaus.org​ http://eric.propellors.net​ Codehausorganization&gt;​ http://mojo.codehaus.orgorganization​ ​ architect​ developer​ ​ -6timezone&gt;​ ​ http://tinyurl.com/prv4tpic​ ​ Contributorsxml 代码 ​ Noelle​ some.name@gmail.com​ http://noellemarie.com​ Noelle Marie​ http://noellemarie.com​ ​ tester​ ​ -5​ ​ some.name@gmail.com​ 环境设置Issue Management​ 定义相关的bug跟踪系统，如bugzilla,testtrack,clearQuest等xml 代码​ Bugzilla​ http://127.0.0.1/bugzillauContinuous Integration Management连续整合管理，基于triggers或者timingsxml 代码 continuum http://127.0.0.1:8080/continuum ​ ​ mail​ true​ true​ false​ false​ continuum@127.0.0.1​ Mailing Listsxml 代码 ​ User List​ user-subscribe@127.0.0.1​ user-unsubscribe@127.0.0.1un​ user@127.0.0.1​ http://127.0.0.1/user/​ ​ http://base.google.com/base/1/127.0.0.1​ SCM软件配置管理，如cvs 和svnxml 代码​ scm:svn:http://127.0.0.1/svn/my-project​ scm:svn:https://127.0.0.1/svn/my-project​ HEAD​ http://127.0.0.1/websvn/my-projectRepositories配置同setting.xml中的开发库Plugin Repositories配置同 repositoriesDistribution Management用于配置分发管理，配置相应的产品发布信息,主要用于发布，在执行mvn deploy后表示要发布的位置1 配置到文件系统xml 代码proficio-repositoryProficio Repositoryfile://${basedir}/target/deploy2 使用ssh2配置xml 代码proficio-repositoryProficio Repositoryscp://sshserver.yourcompany.com/deploy3 使用sftp配置xml 代码proficio-repositoryiProficio Repositorysftp://ftpserver.yourcompany.com/deploy4 使用外在的ssh配置​ 编译扩展用于指定使用wagon外在ssh提供，用于提供你的文件到相应的远程服务器。xml 代码proficio-repositoryProficio Repositoryscpexe://sshserver.yourcompany.com/deployorg.apache.maven.wagonwagon-ssh-external1.0-alpha-65 使用ftp配置xml 代码proficio-repositoryProficio Repositoryftp://ftpserver.yourcompany.com/deployorg.apache.maven.wagongroupId&gt;wagon-ftpartifactId&gt;1.0-alpha-6version&gt;repository 对应于你的开发库，用户信息通过settings.xml中的server取得Profiles类似于settings.xml中的profiles，增加了几个元素，如下的样式：xml 代码​ ​ test​ …​ …​ …​ …​ …​ …​ …r​ …​ …​ 设置项目主函数：​ org.apache.maven.plugins​ maven-shade-plugin​ 1.2.1​ ​ ​ package​ ​ shade​ ​ ​ ​ ​ cn.vicky.mainapp.App​ ​ ​ ​ ​ ​","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring-aop注解","date":"2018-03-21T13:08:01.000Z","updated":"2018-03-21T13:10:58.000Z","comments":true,"path":"2018/03/21/Java/spring/xml/spring-aop注解/","link":"","permalink":"http://io.stelawliet.top/2018/03/21/Java/spring/xml/spring-aop注解/","excerpt":"","text":"目标对象（被增强1.xml中配置目标对象 &lt;bean name=&quot;userService&quot; class=&quot;cn.itcast.service.UserServiceImpl&quot; &gt;&lt;/bean&gt; 2. 1234567891011121314151617181920public class UserServiceImpl implements UserService &#123; @Override public void save() &#123; System.out.println(\"保存用户!\"); //int i = 1/0; &#125; @Override public void delete() &#123; System.out.println(\"删除用户!\"); &#125; @Override public void update() &#123; System.out.println(\"更新用户!\"); &#125; @Override public void find() &#123; System.out.println(\"查找用户!\"); &#125;&#125; 切面对象切入的注解：@Pointcut(&quot;execution(* cn.itcast.service.*ServiceImpl.*(..))&quot;) 123456789101112131415161718192021222324252627282930313233343536//通知类@Aspect//表示该类是一个通知类public class MyAdvice &#123; @Pointcut(\"execution(* cn.itcast.service.*ServiceImpl.*(..))\") public void pc()&#123;&#125; //前置通知 //指定该方法是前置通知,并制定切入点 @Before(\"MyAdvice.pc()\") public void before()&#123; System.out.println(\"这是前置通知!!\"); &#125; //后置通知 @AfterReturning(\"execution(* cn.itcast.service.*ServiceImpl.*(..))\") public void afterReturning()&#123; System.out.println(\"这是后置通知(如果出现异常不会调用)!!\"); &#125; //环绕通知 @Around(\"execution(* cn.itcast.service.*ServiceImpl.*(..))\") public Object around(ProceedingJoinPoint pjp) throws Throwable &#123; System.out.println(\"这是环绕通知之前的部分!!\"); Object proceed = pjp.proceed();//调用目标方法 System.out.println(\"这是环绕通知之后的部分!!\"); return proceed; &#125; //异常通知 @AfterThrowing(\"execution(* cn.itcast.service.*ServiceImpl.*(..))\") public void afterException()&#123; System.out.println(\"出事啦!出现异常了!!\"); &#125; //后置通知 @After(\"execution(* cn.itcast.service.*ServiceImpl.*(..))\") public void after()&#123; System.out.println(\"这是后置通知(出现异常也会调用)!!\"); &#125; xml配置1234567&lt;!-- 准备工作: 导入aop(约束)命名空间 --&gt;&lt;!-- 1.配置目标对象 --&gt; &lt;bean name=\"userService\" class=\"cn.itcast.service.UserServiceImpl\" &gt;&lt;/bean&gt;&lt;!-- 2.配置通知对象 --&gt; &lt;bean name=\"myAdvice\" class=\"cn.itcast.e_annotationaop.MyAdvice\" &gt;&lt;/bean&gt;&lt;!-- 3.开启使用注解完成织入 --&gt; &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt; 约束 12&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.springframework.org/schema/beans\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.2.xsd \"&gt;","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring-aop配置xml","date":"2018-03-21T13:00:37.000Z","updated":"2018-03-21T13:14:49.000Z","comments":true,"path":"2018/03/21/Java/spring/xml/spring-aop配置xml/","link":"","permalink":"http://io.stelawliet.top/2018/03/21/Java/spring/xml/spring-aop配置xml/","excerpt":"","text":"xml配置123456789101112131415161718192021&lt;!-- 准备工作: 导入aop(约束)命名空间 --&gt;&lt;!-- 1.配置目标对象 --&gt; &lt;bean name=\"userService\" class=\"cn.itcast.service.UserServiceImpl\" &gt;&lt;/bean&gt;&lt;!-- 2.配置通知对象 --&gt; &lt;bean name=\"myAdvice\" class=\"cn.itcast.d_springaop.MyAdvice\" &gt;&lt;/bean&gt;&lt;!-- 3.配置将通知织入目标对象 --&gt; &lt;aop:config&gt; &lt;aop:pointcut expression=\"execution(* cn.itcast.service.*ServiceImpl.*(..))\" id=\"pc\"/&gt; &lt;aop:aspect ref=\"myAdvice\" &gt; &lt;!-- 指定名为before方法作为前置通知 --&gt; &lt;aop:before method=\"before\" pointcut-ref=\"pc\" /&gt; &lt;!-- 后置 --&gt; &lt;aop:after-returning method=\"afterReturning\" pointcut-ref=\"pc\" /&gt; &lt;!-- 环绕通知 --&gt; &lt;aop:around method=\"around\" pointcut-ref=\"pc\" /&gt; &lt;!-- 异常拦截通知 --&gt; &lt;aop:after-throwing method=\"afterException\" pointcut-ref=\"pc\"/&gt; &lt;!-- 后置 --&gt; &lt;aop:after method=\"after\" pointcut-ref=\"pc\"/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; 配置切入点多种匹配 12345678//配置切入点 public void cn.itcast.service.UserServiceImpl.save() void cn.itcast.service.UserServiceImpl.save() * cn.itcast.service.UserServiceImpl.save() * cn.itcast.service.UserServiceImpl.*() * cn.itcast.service.*ServiceImpl.*(..) * cn.itcast.service..*ServiceImpl.*(..) 通知类1234567891011121314151617181920212223242526272829303132333435363738//通知类public class MyAdvice &#123; //前置通知 // |-目标方法运行之前调用 //后置通知(如果出现异常不会调用)// |-在目标方法运行之后调用 //环绕通知// |-在目标方法之前和之后都调用 //异常拦截通知// |-如果出现异常,就会调用 //后置通知(无论是否出现 异常都会调用)// |-在目标方法运行之后调用//---------------------------------------------------------------- //前置通知 public void before()&#123; System.out.println(\"这是前置通知!!\"); &#125; //后置通知 public void afterReturning()&#123; System.out.println(\"这是后置通知(如果出现异常不会调用)!!\"); &#125; //环绕通知 public Object around(ProceedingJoinPoint pjp) throws Throwable &#123; System.out.println(\"这是环绕通知之前的部分!!\"); Object proceed = pjp.proceed();//调用目标方法 System.out.println(\"这是环绕通知之后的部分!!\"); return proceed; &#125; //异常通知 public void afterException()&#123; System.out.println(\"出事啦!出现异常了!!\"); &#125; //后置通知 public void after()&#123; System.out.println(\"这是后置通知(出现异常也会调用)!!\"); &#125;&#125; 目标类12","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring-事务注解配置","date":"2018-03-21T12:36:37.000Z","updated":"2018-08-25T08:47:47.000Z","comments":true,"path":"2018/03/21/Java/spring/xml/spring-事务注解配置/","link":"","permalink":"http://io.stelawliet.top/2018/03/21/Java/spring/xml/spring-事务注解配置/","excerpt":"","text":"xml配置12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.springframework.org/schema/beans\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.2.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.2.xsd \"&gt;&lt;!-- 指定spring读取db.properties配置 --&gt;&lt;context:property-placeholder location=\"classpath:db.properties\" /&gt;&lt;!-- 事务核心管理器,封装了所有事务操作. 依赖于连接池 --&gt;&lt;bean name=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\" &gt; &lt;property name=\"dataSource\" ref=\"dataSource\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 事务模板对象 --&gt;&lt;bean name=\"transactionTemplate\" class=\"org.springframework.transaction.support.TransactionTemplate\" &gt; &lt;property name=\"transactionManager\" ref=\"transactionManager\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 开启使用注解管理aop事务 --&gt;&lt;tx:annotation-driven/&gt;&lt;!-- 1.将连接池 --&gt;&lt;bean name=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" &gt; &lt;property name=\"jdbcUrl\" value=\"$&#123;jdbc.jdbcUrl&#125;\" &gt;&lt;/property&gt; &lt;property name=\"driverClass\" value=\"$&#123;jdbc.driverClass&#125;\" &gt;&lt;/property&gt; &lt;property name=\"user\" value=\"$&#123;jdbc.user&#125;\" &gt;&lt;/property&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 2.Dao--&gt;&lt;bean name=\"accountDao\" class=\"cn.itcast.dao.AccountDaoImpl\" &gt; &lt;property name=\"dataSource\" ref=\"dataSource\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 3.Service--&gt;&lt;bean name=\"accountService\" class=\"cn.itcast.service.AccountServiceImpl\" &gt; &lt;property name=\"ad\" ref=\"accountDao\" &gt;&lt;/property&gt; &lt;property name=\"tt\" ref=\"transactionTemplate\" &gt;&lt;/property&gt;&lt;/bean&gt; &lt;/beans&gt; 事务注解Spring事务的隔离级别 1、 ISOLATION_DEFAULT: 这是一个PlatfromTransactionManager默认的隔离级别，使用数据库默认的事务隔离级别。 2、ISOLATION_READ_UNCOMMITTED:这是事务最低的隔离级别，它允许另外一个事务可以看到这个事务未提交的数据。 3、ISOLATION_READ_COMMITTED：保证一个事务修改的数据提交后才能被另外一个事务读取。另外一个事务不能读取该事务未提交的数据。 4、ISOLATION_REPEATALBE_READ: 这种事务隔离级别可以防止脏读，不可重复读。但是可能出现幻想读。它除了保证一个事务不能读取另外一个事务未提交的数据外，还保证了避免下面的情况产生（不可重复读）。 5、ISOLATION_SERIALIZABLE 这是花费最高代价但是最可靠的事务隔离级别。事务被处理为顺序执行。除了防止脏读，不课重复读外，还避免了幻想读。 事务属性说明的注解@Transactional,Isolation.REPEATALBE_READ 123456789101112131415@Transactional(isolation=Isolation.REPEATABLE_READ,propagation=Propagation.REQUIRED,readOnly=true)public class AccountServiceImpl implements AccountService &#123; private AccountDao ad ; private TransactionTemplate tt; @Override @Transactional(isolation=Isolation.REPEATABLE_READ,propagation=Propagation.REQUIRED,readOnly=false) public void transfer(final Integer from,final Integer to,final Double money) &#123; //减钱 ad.decreaseMoney(from, money); int i = 1/0; //加钱 ad.increaseMoney(to, money); &#125;","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring-事务配置","date":"2018-03-21T12:30:12.000Z","updated":"2018-08-29T13:40:53.000Z","comments":true,"path":"2018/03/21/Java/spring/xml/spring-事务配置/","link":"","permalink":"http://io.stelawliet.top/2018/03/21/Java/spring/xml/spring-事务配置/","excerpt":"","text":"事务xml配置123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.springframework.org/schema/beans\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.2.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.2.xsd \"&gt;&lt;!-- 指定spring读取db.properties配置 --&gt;&lt;context:property-placeholder location=\"classpath:db.properties\" /&gt;&lt;!-- 事务核心管理器,封装了所有事务操作. 依赖于连接池 --&gt;&lt;bean name=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\" &gt; &lt;property name=\"dataSource\" ref=\"dataSource\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 事务模板对象 --&gt;&lt;bean name=\"transactionTemplate\" class=\"org.springframework.transaction.support.TransactionTemplate\" &gt; &lt;property name=\"transactionManager\" ref=\"transactionManager\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 配置事务通知 --&gt;&lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\" &gt; &lt;tx:attributes&gt; &lt;!-- 以方法为单位,指定方法应用什么事务属性 isolation:隔离级别 propagation:传播行为 read-only:是否只读 --&gt; &lt;tx:method name=\"save*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"persist*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"update*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"modify*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"delete*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"remove*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;tx:method name=\"get*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"true\" /&gt; &lt;tx:method name=\"find*\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"true\" /&gt; &lt;tx:method name=\"transfer\" isolation=\"REPEATABLE_READ\" propagation=\"REQUIRED\" read-only=\"false\" /&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!-- 配置织入 --&gt;&lt;aop:config &gt; &lt;!-- 配置切点表达式 --&gt; &lt;aop:pointcut expression=\"execution(* cn.itcast.service.*ServiceImpl.*(..))\" id=\"txPc\"/&gt; &lt;!-- 配置切面 : 通知+切点 advice-ref:通知的名称 pointcut-ref:切点的名称 --&gt; &lt;aop:advisor advice-ref=\"txAdvice\" pointcut-ref=\"txPc\" /&gt;&lt;/aop:config&gt;&lt;!-- 1.将连接池 --&gt;&lt;bean name=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" &gt; &lt;property name=\"jdbcUrl\" value=\"$&#123;jdbc.jdbcUrl&#125;\" &gt;&lt;/property&gt; &lt;property name=\"driverClass\" value=\"$&#123;jdbc.driverClass&#125;\" &gt;&lt;/property&gt; &lt;property name=\"user\" value=\"$&#123;jdbc.user&#125;\" &gt;&lt;/property&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 2.Dao--&gt;&lt;bean name=\"accountDao\" class=\"cn.itcast.dao.AccountDaoImpl\" &gt; &lt;property name=\"dataSource\" ref=\"dataSource\" &gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 3.Service--&gt;&lt;bean name=\"accountService\" class=\"cn.itcast.service.AccountServiceImpl\" &gt; &lt;property name=\"ad\" ref=\"accountDao\" &gt;&lt;/property&gt; &lt;property name=\"tt\" ref=\"transactionTemplate\" &gt;&lt;/property&gt;&lt;/bean&gt; &lt;/beans&gt; TransactionDefinition 事务隔离级别的常量1234567891. static int ISOLATION_DEFAULT -- 采用数据库的默认隔离级别 2. static int ISOLATION_READ_UNCOMMITTED 3. static int ISOLATION_READ_COMMITTED 4. static int ISOLATION_REPEATABLE_READ 5. static int ISOLATION_SERIALIZABLE 事务的传播行为常量 propagation 123456789101112131415PROPAGATION_REQUIRED（默认值） -- A中有事务,使用A中的事务.如果没有B就会开启一个新的事务,将A包含进来.(保证A,B在同一个事务中)，默认值！PROPAGATION_MANDATORY -- A中有事务,使用A中的事务.如果A没有事务.抛出异常. PROPAGATION_REQUIRES_NEW（记）-- A中有事务,将A中的事务挂起.B创建一个新的事务.(保证A,B没有在一个事务中) PROPAGATION_NOT_SUPPORTED -- A中有事务,将A中的事务挂起. PROPAGATION_NEVER -- A中有事务,抛出异常. PROPAGATION_NESTED（记）-- 嵌套事务.当A执行之后,就会在这个位置设置一个保存点.如果B没有问题.执行通过.如果B出现异常,运行客户根据需求回滚(选择回滚到保存点或者是最初始状态)先解释什么是事务的传播行为：解决的是业务层之间的方法调用！！ PROPAGATION_SUPPORTS -- A中有事务,使用A中的事务.如果A中没有事务.那么B也不使用事务.","categories":[],"tags":[]},{"title":"","slug":"JavaScript/webpack报错总结","date":"2018-02-27T07:51:37.000Z","updated":"2018-07-04T14:00:20.000Z","comments":true,"path":"2018/02/27/JavaScript/webpack报错总结/","link":"","permalink":"http://io.stelawliet.top/2018/02/27/JavaScript/webpack报错总结/","excerpt":"","text":"1.在项目根目录下 npm init 2.webpack-dev-server的版本问题。 保持webpack和webpack-dev-server版本兼容 在package.josn中修改 “webpack”: “2.2.0” “webpack-dev-server”: “2.2.0” 然后执行npm update。","categories":[],"tags":[]},{"title":"","slug":"Java/spring/idea spring配置","date":"2018-01-06T15:01:47.000Z","updated":"2018-09-03T14:12:18.000Z","comments":true,"path":"2018/01/06/Java/spring/idea spring配置/","link":"","permalink":"http://io.stelawliet.top/2018/01/06/Java/spring/idea spring配置/","excerpt":"","text":"5、基于XML 的配置 5.1、配置web.xml idea创建的web.xml这个文件版本比较低，所以我们要找一个新的。把我的文件直接全部覆盖复制进去就可以了。 1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt; &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt; &lt;!--welcome pages--&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt; &lt;/welcome-file-list&gt; &lt;!--配置springmvc DispatcherServlet--&gt; &lt;servlet&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;!--配置dispatcher.xml作为mvc的配置文件--&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/dispatcher-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!--把applicationContext.xml加入到配置文件中--&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt;&lt;/web-app&gt;1234567891011121314151617181920212223242526272829303132333435363738 上面代码的意思主要就是创建一个中央的控制器，都有简单的注释，如果有需要，请自行百度。 5.2 配置dispatcher-servlet.xml 这个文件负责mvc的配置。 1234567891011121314151617181920212223242526272829303132&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;!--此文件负责整个mvc中的配置--&gt; &lt;!--启用spring的一些annotation --&gt; &lt;context:annotation-config/&gt; &lt;!-- 配置注解驱动 可以将request参数与绑定到controller参数上 --&gt; &lt;mvc:annotation-driven/&gt; &lt;!--静态资源映射--&gt; &lt;!--本项目把静态资源放在了webapp的statics目录下，资源映射如下--&gt; &lt;mvc:resources mapping=\"/css/**\" location=\"/WEB-INF/statics/css/\"/&gt; &lt;mvc:resources mapping=\"/js/**\" location=\"/WEB-INF/statics/js/\"/&gt; &lt;mvc:resources mapping=\"/image/**\" location=\"/WEB-INF/statics/image/\"/&gt; &lt;!-- 对模型视图名称的解析，即在模型视图名称添加前后缀(如果最后一个还是表示文件夹,则最后的斜杠不要漏了) 使用JSP--&gt; &lt;!-- 默认的视图解析器 在上边的解析错误时使用 (默认使用html)- --&gt; &lt;bean id=\"defaultViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\"/&gt; &lt;property name=\"prefix\" value=\"/WEB-INF/view/\"/&gt;&lt;!--设置JSP文件的目录位置--&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt; &lt;property name=\"exposeContextBeansAsAttributes\" value=\"true\"/&gt; &lt;/bean&gt; &lt;!-- 自动扫描装配 --&gt; &lt;context:component-scan base-package=\"example.controller\"/&gt;&lt;/beans&gt; 直接复制即可，都有注释，如果有需要，请自行百度。 5.3、 配置applicationContext.xml 其实这个文件没什么好配置的，这个文件主要负责一些非mvc组件（或者其他组件）的配置，暂时没有，所以是空的，但你也可以扫描一下。 1234567&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;context:component-scan base-package=\"example\"/&gt;&lt;/beans&gt;1234567 5.4、 测试 三个配置文件配置好之后，就可以测试了。首先在controller文件夹下创建一个IndexController，代码如下： 123456789@Controller@RequestMapping(\"/home\")public class IndexController &#123; @RequestMapping(\"/index\") public String index() &#123; return \"index\"; &#125;&#125; views文件夹下创建index.jsp，statics/css/下创建test.css 123456789101112&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;&lt;%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Index&lt;/title&gt; &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;c:url value=\"/css/test.css\"/&gt; \"/&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;Spring MVC based on XML config success!&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;123456789101112 123456p&#123; background-color: brown; font-family: &quot;Courier New&quot;; font-size:100px;&#125;123456 接下来配置tomcat，如果没有，去官网下载tomcat7以上的版本。右上角 这里写图片描述 然后选择tomcat 这里写图片描述 配置相关信息 这里写图片描述 还有deployment 这里写图片描述 选择第二个 这里写图片描述 这里的名称和项目名一样。 这里写图片描述 然后点击ok完成。 最后运行tomcat，在浏览器输入http://localhost:8080/Demo/home/index 即可。 这里写图片描述 运行成功。 6、基于Java配置java配置也是参考spring in action 第四版这个书，所以具体的原理不去详解，所以我这里更加倾向于把java配置和xml配置中的相同功能的部分进行比较，也是能对java配置又以有一个更加直观的认识。首先我们先完成准备工作，也就是本文的前四个直到文件目录完成，但是目录需要一点小的修改，因为多了配置类，如下图。 这里写图片描述 可以看到我们多了一个config包，这个里面就是放配置类的。 6.1 、去除web.xmlweb.xml里面的内容可以删掉了。在config中创建WebXml类 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class WebXml extends AbstractAnnotationConfigDispatcherServletInitializer &#123; /* &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; */ @Override protected Class&lt;?&gt;[] getRootConfigClasses() &#123; return new Class&lt;?&gt;[] &#123;ApplicationContextXml.class&#125;; &#125; /* &lt;servlet&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;!--配置dispatcher.xml作为mvc的配置文件--&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/dispatcher-servlet.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; */ @Override protected Class&lt;?&gt;[] getServletConfigClasses() &#123; return new Class&lt;?&gt;[] &#123;DispatcherServletXml.class&#125;; &#125; /* &lt;servlet-mapping&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; */ @Override protected String[] getServletMappings() &#123; return new String[] &#123;&quot;/&quot;&#125;; &#125;&#125; 6.2、去除dispatcher-servle.xml 1234567891011121314151617181920212223242526272829303132333435363738394041@Configuration@EnableWebMvc@ComponentScan(&quot;web.example.controller&quot;)public class DispatcherServletXml extends WebMvcConfigurerAdapter&#123; /* &lt;bean id=&quot;defaultViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot;/&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot;/&gt;&lt;!--设置JSP文件的目录位置--&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;property name=&quot;exposeContextBeansAsAttributes&quot; value=&quot;true&quot;/&gt; &lt;/bean&gt; */ @Bean public ViewResolver viewResolver() &#123; InternalResourceViewResolver resolver = new InternalResourceViewResolver(); resolver.setViewClass(org.springframework.web.servlet.view.JstlView.class); resolver.setPrefix(&quot;/WEB-INF/views/&quot;); resolver.setSuffix(&quot;.jsp&quot;); resolver.setExposeContextBeansAsAttributes(true); return resolver; &#125; @Override public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123; configurer.enable(); super.configureDefaultServletHandling(configurer); &#125; // 静态资源配置 /* &lt;mvc:resources mapping=&quot;/css/**&quot; location=&quot;/WEB-INF/statics/css/&quot;/&gt; &lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/WEB-INF/statics/js/&quot;/&gt; &lt;mvc:resources mapping=&quot;/image/**&quot; location=&quot;/WEB-INF/statics/image/&quot;/&gt; */ @Override public void addResourceHandlers(ResourceHandlerRegistry registry) &#123; registry.addResourceHandler(&quot;/css/**&quot;).addResourceLocations(&quot;/WEB-INF/statics/css/&quot;); registry.addResourceHandler(&quot;/js/**&quot;).addResourceLocations(&quot;/WEB-INF/statics/js/&quot;); registry.addResourceHandler(&quot;/image/**&quot;).addResourceLocations(&quot;WEB-INF/statics/image/&quot;); super.addResourceHandlers(registry); &#125;&#125; 6.3、去除applicationContext.xml 1234567@Configuration@ComponentScan(basePackages = &#123;&quot;web&quot;&#125;, excludeFilters = &#123; @ComponentScan.Filter(type = FilterType.ANNOTATION, value = EnableWebMvc.class) &#125;)public class ApplicationContextXml &#123;&#125; 上面三个配置类中的每一个设置我都对应的给出了原xml文档中的对应部分，两边对照着看，应该很容易理解。然后按照之前的测试方法，测试成功。 7、 结束语以上的都是我边写边进行配置的，如果说的有什么错误，希望指正，毕竟我还是个新手，配置成功的项目我已经上传，以方便参考。链接：点此下载 参考资料：IntelliJ IDEA上创建Maven Spring MVC项目 IntelliJ idea创建Spring MVC的Maven项目 Intellij IDEA使用Maven快速创建Spring MVC Web项目工程 applicationContext.xml和dispatcher-servlet.xml的区别 Servlet 3 + Spring MVC零配置：去除所有xml Spring(三）：使用java config配置spring mvc 版权声明：欢迎转载，转载请注明出处http://blog.csdn.net/cquwel","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring xml约束","date":"2018-01-06T15:01:29.000Z","updated":"2018-01-06T15:01:29.000Z","comments":true,"path":"2018/01/06/Java/spring/xml/spring xml约束/","link":"","permalink":"http://io.stelawliet.top/2018/01/06/Java/spring/xml/spring xml约束/","excerpt":"","text":"spring配置文件最全约束转载 2016年09月12日 22:05:30 &lt;?xml version=”1.0” encoding=”utf-8”?&gt;","categories":[],"tags":[]},{"title":"","slug":"Java/spring/xml/spring-xml","date":"2018-01-06T14:45:58.000Z","updated":"2018-01-06T14:45:58.000Z","comments":true,"path":"2018/01/06/Java/spring/xml/spring-xml/","link":"","permalink":"http://io.stelawliet.top/2018/01/06/Java/spring/xml/spring-xml/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"","slug":"MD/ssss","date":"2017-12-28T11:46:45.000Z","updated":"2017-12-28T11:48:03.000Z","comments":true,"path":"2017/12/28/MD/ssss/","link":"","permalink":"http://io.stelawliet.top/2017/12/28/MD/ssss/","excerpt":"","text":"img","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/DataSources数据库连接池","date":"2017-12-26T11:15:52.000Z","updated":"2017-12-26T11:15:52.000Z","comments":true,"path":"2017/12/26/Java/JavaEE/DataSources数据库连接池/","link":"","permalink":"http://io.stelawliet.top/2017/12/26/Java/JavaEE/DataSources数据库连接池/","excerpt":"","text":"DataSources数据库连接池.mdhtml {overflow-x: initial !important;}.CodeMirror { height: auto; } .CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { padding: 4px 0px; } .CodeMirror pre { } .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; } .CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; } .CodeMirror-linenumbers { } .CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); } .CodeMirror div.CodeMirror-cursor { border-left-width: 1px; border-left-style: solid; border-left-color: black; z-index: 3; } .CodeMirror div.CodeMirror-secondarycursor { border-left-width: 1px; border-left-style: solid; border-left-color: silver; } .CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background-color: rgb(119, 238, 119); z-index: 1; background-position: initial initial; background-repeat: initial initial; } .CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { } .cm-tab { display: inline-block; } .cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); } .cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; } .cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; } .cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); } .cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; } .cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; } .cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); } .cm-s-typora-default .cm-string { color: rgb(126, 134, 169); } .cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; } .cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; } .cm-s-typora-default .cm-overlay { font-family: monospace; } .CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left-width: 3px; border-left-style: solid; border-left-color: rgb(228, 98, 154); } .cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background-color: rgba(204, 204, 204, 0.2); background-position: initial initial; background-repeat: initial initial; } .cm-s-typora-default .CodeMirror-gutters { border-right-style: none; background-color: inherit; } .cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: '•'; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; } .os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; } .cm-starttab .cm-tab::after { content: ' '; } .cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; } .cm-s-typora-default .cm-trailing-space-new-line::after { content: '↓'; opacity: 0.3; } .cm-s-inner .cm-keyword { color: rgb(119, 0, 136); } .cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); } .cm-s-inner .cm-number { color: rgb(17, 102, 68); } .cm-s-inner .cm-def { color: rgb(0, 0, 255); } .cm-s-inner .cm-variable { color: black; } .cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); } .cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); } .cm-s-inner .cm-property { color: black; } .cm-s-inner .cm-operator { color: rgb(152, 26, 26); } .cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); } .cm-s-inner .cm-string { color: rgb(170, 17, 17); } .cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); } .cm-s-inner .cm-meta { color: rgb(85, 85, 85); } .cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); } .cm-s-inner .cm-builtin { color: rgb(51, 0, 170); } .cm-s-inner .cm-bracket { color: rgb(153, 153, 119); } .cm-s-inner .cm-tag { color: rgb(17, 119, 0); } .cm-s-inner .cm-attribute { color: rgb(0, 0, 204); } .cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; } .cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); } .cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); } .cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); } .cm-negative { color: rgb(221, 68, 68); } .cm-positive { color: rgb(34, 153, 34); } .cm-header, .cm-strong { font-weight: bold; } .cm-del { text-decoration: line-through; } .cm-em { font-style: italic; } .cm-link { text-decoration: underline; } .cm-error { color: rgb(255, 0, 0); } .cm-invalidchar { color: rgb(255, 0, 0); } .cm-constant { color: rgb(38, 139, 210); } .cm-defined { color: rgb(181, 137, 0); } div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); } div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); } .cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; } .CodeMirror { position: relative; overflow: hidden; } .CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; } .CodeMirror-sizer { position: relative; } .CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; } .CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; } .CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; } .CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; } .CodeMirror-gutter-filler { left: 0px; bottom: 0px; } .CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; } .CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; } .CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background-image: none !important; border: none !important; background-position: initial initial !important; background-repeat: initial initial !important; } .CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; } .CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; } .CodeMirror-lines { cursor: text; } .CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; background-color: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: initial initial; background-repeat: initial initial; } .CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; } .CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: -webkit-fit-content; } .CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; } .CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; } .CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; } .CodeMirror-widget { } .CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; } .CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; } .CodeMirror-measure pre { position: static; } .CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; } .CodeMirror div.CodeMirror-cursor { visibility: hidden; } .CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; } .CodeMirror-selected { background-color: rgb(217, 217, 217); background-position: initial initial; background-repeat: initial initial; } .CodeMirror-focused .CodeMirror-selected { background-color: rgb(215, 212, 240); background-position: initial initial; background-repeat: initial initial; } .cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; } .CodeMirror span { } @media print { .CodeMirror div.CodeMirror-cursor { visibility: hidden; } } .CodeMirror-lint-markers { width: 16px; } .CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; -webkit-transition: opacity 0.4s; transition: opacity 0.4s; font-size: 0.8em; } .CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: 0% 100%; background-repeat: repeat no-repeat; } .CodeMirror-lint-mark-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==); } .CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; background-position: 50% 50%; background-repeat: no-repeat no-repeat; } .CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: 0% 0%; background-repeat: no-repeat no-repeat; } .CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=); } .CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=); } .CodeMirror-lint-marker-multiple { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC); width: 100%; height: 100%; background-position: 100% 100%; background-repeat: no-repeat no-repeat; } :root { --bg-color: rgb(255, 255, 255); --text-color: rgb(51, 51, 51); --code-block-bg-color: inherit; } html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; } body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; } a:active, a:hover { outline: 0px; } .in-text-selection, ::selection { background-color: rgb(181, 214, 252); text-shadow: none; background-position: initial initial; background-repeat: initial initial; } #write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; } .for-image #write { padding-left: 8px; padding-right: 8px; } body.typora-export { padding-left: 30px; padding-right: 30px; } @media screen and (max-width: 500px) { body.typora-export { padding-left: 0px; padding-right: 0px; } .CodeMirror-sizer { margin-left: 0px !important; } .CodeMirror-gutters { display: none !important; } } .typora-export #write { margin: 0px auto; } #write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; } #write li > table:first-child { margin-top: -20px; } img { max-width: 100%; vertical-align: middle; } input, button, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; line-height: inherit; } input[type=\"checkbox\"], input[type=\"radio\"] { line-height: normal; padding: 0px; } ::before, ::after, * { box-sizing: border-box; } #write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; } #write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; } h1 { font-size: 2rem; } h2 { font-size: 1.8rem; } h3 { font-size: 1.6rem; } h4 { font-size: 1.4rem; } h5 { font-size: 1.2rem; } h6 { font-size: 1rem; } p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; } .typora-export p { white-space: normal; } .mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; } .hidden { display: none; } .md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; } a { cursor: pointer; } sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; } #write input[type=\"checkbox\"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; } figure { max-width: 100%; overflow-x: auto; margin: 0px; } tr { page-break-inside: avoid; page-break-after: auto; } thead { display: table-header-group; } table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; page-break-inside: auto; text-align: left; } table.md-table td { min-width: 80px; } .CodeMirror-gutters { border-right-width: 0px; background-color: inherit; } .CodeMirror { text-align: left; } .CodeMirror-placeholder { opacity: 0.3; } .CodeMirror pre { padding: 0px 4px; } .CodeMirror-lines { padding: 0px; } div.hr:focus { cursor: none; } pre { white-space: pre-wrap; } .CodeMirror-gutters { margin-right: 4px; } .md-fences { font-size: 0.9rem; display: block; page-break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: var(--code-block-bg-color); position: relative !important; } .md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; } .md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; } .md-fences.mock-cm { white-space: pre-wrap; } .show-fences-line-number .md-fences { padding-left: 0px; } .show-fences-line-number .md-fences.mock-cm { padding-left: 40px; } .CodeMirror-line { page-break-inside: avoid; } .footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; } .footnotes + .footnotes { margin-top: -1em; } .md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background-color: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; background-position: initial initial; background-repeat: initial initial; } li div { padding-top: 0px; } blockquote { margin: 1rem 0px; } li p, li .mathjax-block { margin: 0.5rem 0px; } li { margin: 0px; position: relative; } blockquote > :last-child { margin-bottom: 0px; } blockquote > :first-child { margin-top: 0px; } .footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; } @media print { html, body { border: 1px solid transparent; height: 99%; page-break-after: avoid; page-break-before: avoid; } .typora-export * { -webkit-print-color-adjust: exact; } h1, h2, h3, h4, h5, h6 { page-break-after: avoid; orphans: 2; } p { orphans: 4; } html.blink-to-pdf { font-size: 13px; } .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; page-break-after: avoid; } .typora-export #write::after { height: 0px; } @page { margin: 20mm 0mm; } } .footnote-line { margin-top: 0.714em; font-size: 0.7em; } a img, img a { cursor: pointer; } pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; } p > img:only-child { display: block; margin: auto; } p .md-image:only-child { display: inline-block; width: 100%; text-align: center; } #write .MathJax_Display { margin: 0.8em 0px 0px; } .mathjax-block { white-space: pre; overflow: hidden; width: 100%; } p + .mathjax-block { margin-top: -1.143rem; } .mathjax-block:not(:empty)::after { display: none; } [contenteditable=\"true\"]:active, [contenteditable=\"true\"]:focus { outline: none; box-shadow: none; } .task-list { list-style-type: none; } .task-list-item { position: relative; padding-left: 1em; } .task-list-item input { position: absolute; top: 0px; left: 0px; } .math { font-size: 1rem; } .md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; } .md-toc-content { position: relative; margin-left: 0px; } .md-toc::after, .md-toc-content::after { display: none; } .md-toc-item { display: block; color: rgb(65, 131, 196); } .md-toc-item a { text-decoration: none; } .md-toc-inner:hover { } .md-toc-inner { display: inline-block; cursor: pointer; } .md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; } .md-toc-h2 .md-toc-inner { margin-left: 2em; } .md-toc-h3 .md-toc-inner { margin-left: 4em; } .md-toc-h4 .md-toc-inner { margin-left: 6em; } .md-toc-h5 .md-toc-inner { margin-left: 8em; } .md-toc-h6 .md-toc-inner { margin-left: 10em; } @media screen and (max-width: 48em) { .md-toc-h3 .md-toc-inner { margin-left: 3.5em; } .md-toc-h4 .md-toc-inner { margin-left: 5em; } .md-toc-h5 .md-toc-inner { margin-left: 6.5em; } .md-toc-h6 .md-toc-inner { margin-left: 8em; } } a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; } .footnote-line a:not(.reversefootnote) { color: inherit; } .md-attr { display: none; } .md-fn-count::after { content: '.'; } .md-tag { opacity: 0.5; } .md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; } code { text-align: left; } h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; } a.md-print-anchor { border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background-color: transparent !important; text-shadow: initial !important; background-position: initial initial !important; background-repeat: initial initial !important; } .md-inline-math .MathJax_SVG .noError { display: none !important; } .mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; } .MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; } .MathJax_SVG .MJX-monospace { font-family: monospace; } .MathJax_SVG .MJX-sans-serif { font-family: sans-serif; } .MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; } .MathJax_SVG * { -webkit-transition: none; transition: none; } .md-diagram-panel > svg { max-width: 100%; } [lang=\"flow\"] svg, [lang=\"mermaid\"] svg { max-width: 100%; } :root { --side-bar-bg-color: #fafafa; --control-text-color: #777; } @include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext); @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: normal; src: local('Open Sans Regular'),url('file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/github/400.woff') format('woff') } @font-face { font-family: 'Open Sans'; font-style: italic; font-weight: normal; src: local('Open Sans Italic'),url('file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/github/400i.woff') format('woff') } @font-face { font-family: 'Open Sans'; font-style: normal; font-weight: bold; src: local('Open Sans Bold'),url('file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/github/700.woff') format('woff') } @font-face { font-family: 'Open Sans'; font-style: italic; font-weight: bold; src: local('Open Sans Bold Italic'),url('file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/github/700i.woff') format('woff') } html { font-size: 16px; } body { font-family: \"Open Sans\",\"Clear Sans\",\"Helvetica Neue\",Helvetica,Arial,sans-serif; color: rgb(51, 51, 51); line-height: 1.6; } #write{ max-width: 860px; margin: 0 auto; padding: 20px 30px 40px 30px; padding-top: 20px; padding-bottom: 100px; } #write > ul:first-child, #write > ol:first-child{ margin-top: 30px; } body > *:first-child { margin-top: 0 !important; } body > *:last-child { margin-bottom: 0 !important; } a { color: #4183C4; } h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; } h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { /*background: url(\"file:///Users/zhaoziqi/Library/Application%20Support/images/modules/styleguide/para.png\") no-repeat 10px center;*/ text-decoration: none; } h1 tt, h1 code { font-size: inherit; } h2 tt, h2 code { font-size: inherit; } h3 tt, h3 code { font-size: inherit; } h4 tt, h4 code { font-size: inherit; } h5 tt, h5 code { font-size: inherit; } h6 tt, h6 code { font-size: inherit; } h1 { padding-bottom: .3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid #eee; } h2 { padding-bottom: .3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid #eee; } h3 { font-size: 1.5em; line-height: 1.43; } h4 { font-size: 1.25em; } h5 { font-size: 1em; } h6 { font-size: 1em; color: #777; } p, blockquote, ul, ol, dl, table{ margin: 0.8em 0; } li>ol, li>ul { margin: 0 0; } hr { height: 4px; padding: 0; margin: 16px 0; background-color: #e7e7e7; border: 0 none; overflow: hidden; box-sizing: content-box; border-bottom: 1px solid #ddd; } body > h2:first-child { margin-top: 0; padding-top: 0; } body > h1:first-child { margin-top: 0; padding-top: 0; } body > h1:first-child + h2 { margin-top: 0; padding-top: 0; } body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0; padding-top: 0; } a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0; padding-top: 0; } h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0; } li p.first { display: inline-block; } ul, ol { padding-left: 30px; } ul:first-child, ol:first-child { margin-top: 0; } ul:last-child, ol:last-child { margin-bottom: 0; } blockquote { border-left: 4px solid #dddddd; padding: 0 15px; color: #777777; } blockquote blockquote { padding-right: 0; } table { padding: 0; word-break: initial; } table tr { border-top: 1px solid #cccccc; margin: 0; padding: 0; } table tr:nth-child(2n) { background-color: #f8f8f8; } table tr th { font-weight: bold; border: 1px solid #cccccc; text-align: left; margin: 0; padding: 6px 13px; } table tr td { border: 1px solid #cccccc; text-align: left; margin: 0; padding: 6px 13px; } table tr th:first-child, table tr td:first-child { margin-top: 0; } table tr th:last-child, table tr td:last-child { margin-bottom: 0; } .CodeMirror-gutters { border-right: 1px solid #ddd; } .md-fences, code, tt { border: 1px solid #ddd; background-color: #f8f8f8; border-radius: 3px; padding: 0; font-family: Consolas, \"Liberation Mono\", Courier, monospace; padding: 2px 4px 0px 4px; font-size: 0.9em; } .md-fences { margin-bottom: 15px; margin-top: 15px; padding: 0.2em 1em; padding-top: 8px; padding-bottom: 6px; } .task-list{ padding-left: 0; } .task-list-item { padding-left:32px; } .task-list-item input { top: 3px; left: 8px; } @media screen and (min-width: 914px) { /*body { width: 854px; margin: 0 auto; }*/ } @media print { html { font-size: 13px; } table, pre { page-break-inside: avoid; } pre { word-wrap: break-word; } } .md-fences { background-color: #f8f8f8; } #write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: #f7f7f7; border: 0; border-radius: 3px; color: #777777; margin-top: 0 !important; } .mathjax-block>.code-tooltip { bottom: .375rem; } #write>h3.md-focus:before{ left: -1.5625rem; top: .375rem; } #write>h4.md-focus:before{ left: -1.5625rem; top: .285714286rem; } #write>h5.md-focus:before{ left: -1.5625rem; top: .285714286rem; } #write>h6.md-focus:before{ left: -1.5625rem; top: .285714286rem; } .md-image>.md-meta { border: 1px solid #ddd; border-radius: 3px; font-family: Consolas, \"Liberation Mono\", Courier, monospace; padding: 2px 4px 0px 4px; font-size: 0.9em; color: inherit; } .md-tag{ color: inherit; } .md-toc { margin-top:20px; padding-bottom:20px; } .sidebar-tabs { border-bottom: none; } #typora-quick-open { border: 1px solid #ddd; background-color: #f8f8f8; } #typora-quick-open-item { background-color: #FAFAFA; border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee; border-style: solid; border-width: 1px; } #md-notification:before { top: 10px; } /** focus mode */ .on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); } header, .context-menu, .megamenu-content, footer{ font-family: \"Segoe UI\", \"Arial\", sans-serif; } .file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state{ visibility: visible; } .mac-seamless-mode #typora-sidebar { background-color: #fafafa; background-color: var(--side-bar-bg-color); } .md-lang { color: #b4654d; } 数据库连接池DBCPjar：commons-pool.jar、commons-dbcp.jarC3P0Tomcat配置连接池获取Tomcat资源修改JdbcUtilsDBUtils增、删、改查批处理数据库连接池作用：使用池来管理连接的生命周期，节省资源，提高性能。 java提供的连接池接口：javax.sql.DataSource，连接池厂商的连接池类需要实现这一接口。DBCPjar：commons-pool.jar、commons-dbcp.jar xxxxxxxxxx121BasicDataSource ds = new BasicDataSource();2ds.setUsername(\"root\");3ds.setPassword(\"123\");4ds.setUrl(\"jdbc:mysql://localhost:3306/mydb1\");5ds.setDriverClassName(\"com.mysql.jdbc.Driver\");6 7ds.setMaxActive(20); 8ds.setMaxIdle(10); 9ds.setInitialSize(10) ;10ds.setMinIdle(2) ;11ds.setMaxWait(1000) ;12Connection con = ds.getConnection();C3P0jar：c3p0-0.9.2-pre1.jar、c3p0-oracle-thin-extras-0.9.2-pre1.jar、mchange-commons-0.2.jar xxxxxxxxxx121ComboPooledDataSource ds = new ComboPooledDataSource();2ds.setJdbcUrl(\"jdbc:mysql://localhost:3306/mydb1\");3ds.setUser(\"root\");4ds.setPassword(\"123\");5ds.setDriverClass(\"com.mysql.jdbc.Driver\");6 7ds.setAcquireIncrement(5) ;8ds.setInitialPoolSize(20) ;9ds.setMinPoolSize(2) ;10ds.setMaxPoolSize(50) ;11​12Connection con = ds.getConnection();C3P0配置文件xml文件详细配置 通过默认配置初始化连接池 xxxxxxxxxx21 &nbsp;ComboPooledDataSource ds = new ComboPooledDataSource();2 &nbsp;Connection con = ds.getConnection(); xxxxxxxxxx31&lt;default-config&gt;2 &nbsp;&lt;property name=\"xxx\"&gt;XXX&lt;/property&gt;3&lt;/defualt-config&gt;通过命名配置初始化连接池 xxxxxxxxxx21 &nbsp;ComboPooledDataSource ds = new ComboPooledDataSource(\"oracle-config\");2 &nbsp;Connection con = ds.getConnection(); xxxxxxxxxx31&lt;named-config name=\"orcale-config\"&gt;2 &nbsp;&lt;property name=\"xxx\"&gt;XXX&lt;/property&gt;3&lt;/named-config&gt;Tomcat配置连接池在server.xml中，或在conf/catalina/localhost/下创建xml文件 xxxxxxxxxx131&lt;Context&gt; &nbsp;2 &nbsp;&lt;Resource name=\"myc3p0\" 3 &nbsp; type=\"com.mchange.v2.c3p0.ComboPooledDataSource\"4 &nbsp; factory=\"org.apache.naming.factory.BeanFactory\"5 &nbsp; user=\"root\" 6 &nbsp; password=\"123\" 7 &nbsp; classDriver=\"com.mysql.jdbc.Driver\" &nbsp; &nbsp;8 &nbsp; jdbcUrl=\"jdbc:mysql://127.0.0.1/mydb1\"9 &nbsp; maxPoolSize=\"20\"10 &nbsp; minPoolSize =\"5\"11 &nbsp; initialPoolSize=\"10\"12 &nbsp; &nbsp; &nbsp; &nbsp;acquireIncrement=\"2\"/&gt;13&lt;/Context&gt; &nbsp;&nbsp;获取Tomcat资源 xxxxxxxxxx31Context cxt = new InitialContext(); 2DataSource ds = (DataSource)cxt.lookup(\"java:/comp/env/myc3p0\");3Connection con = ds.getConnection();修改JdbcUtils xxxxxxxxxx151public class JdbcUtils {2​3 &nbsp; &nbsp;private static DataSource dataSource = new ComboPooledDataSource();4​5 &nbsp; &nbsp;public static DataSource getDataSource() {6 &nbsp; return dataSource;7 &nbsp; }8 &nbsp; &nbsp;9 &nbsp; &nbsp;public static Connection getConnection() {10 &nbsp; try {11 &nbsp; return dataSource.getConnection();12 &nbsp; } catch (Exception e) {13 &nbsp; throw new RuntimeException(e);14 &nbsp; } &nbsp;15 &nbsp; }}DBUtilsjar：commons-dbutils.jar 核心类：QueryRunner、ResultSetHandlerQueryRunner方法：update()：DDL、DMLquery()：DQLbatch()：批处理增、删、改 xxxxxxxxxx71public void fun1() throws SQLException {2 &nbsp; &nbsp;QueryRunner qr = new QueryRunner();3 &nbsp; &nbsp;String sql = \"insert into user values(?,?,?)\";4 &nbsp; &nbsp;qr.update(JdbcUtils.getConnection()5 &nbsp; , sql, \"u1\", \"zhangSan\", \"123\");6}7​查 xxxxxxxxxx301DataSource ds = JdbcUtils.getDataSource();2​3QueryRunner qr = new QueryRunner(ds);4​5String sql = \"select * from tab_student\";6​7// 把结果集转换成Bean8​9Student stu = qr.query(sql, new BeanHandler&lt;Student&gt;(Student.class));10​11// 把结果集转换成Bean的List12​13List&lt;Student&gt; list = qr.query(sql, new BeanListHandler&lt;Student&gt;(Student.class));14​15// 把结果集转换成Map16​17Map&lt;String,Object&gt; map = qr.query(sql, new MapHandler());18​19// 把结果集转换成List&lt;Map&gt;20​21List&lt;Map&lt;String,Object&gt;&gt; list = qr.query(sql, new MapListHandler() );22​23// 把结果集转换成一列的List24​25List&lt;Object&gt; list = qr.query(sql, new ColumnListHandler(\"name\")) ;26​27// 把结果转换成单行单列的值28​29Number number = (Number)qr.query(sql, new ScalarHandler());30​批处理 xxxxxxxxxx131DataSource ds = JdbcUtils.getDataSource();2QueryRunner qr = new QueryRunner(ds);3String sql = \"insert into tab_student values(?,?,?,?)\";4Object[][] params = new Object[10][]; //表示 要插入10行记录5/**6 * Object[] parms = new Object{\"xxxx\",\"xxxx\"};7 * String[] s = new String{\"xxx\",\"xxx\"};8 */9for(int i = 0; i &lt; params.length; i++) {10 params[i] = new Object[]11 &nbsp; &nbsp; {\"S_300\" + i, \"name\" + i, 30 + i, i%2==0?\"男\":\"女\"};12}13qr.batch (sql, params);","categories":[],"tags":[]},{"title":"SQL面试语法汇总","slug":"sql/SQL面试语法","date":"2017-12-26T07:17:26.000Z","updated":"2018-07-18T06:29:52.000Z","comments":true,"path":"2017/12/26/sql/SQL面试语法/","link":"","permalink":"http://io.stelawliet.top/2017/12/26/sql/SQL面试语法/","excerpt":"","text":"DDL—数据定义语言(Create，Alter，Drop，DECLARE) DML—数据操纵语言(Select，Delete，Update，Insert) DCL—数据控制语言(GRANT，REVOKE，COMMIT，ROLLBACK) 首先,简要介绍基础语句：1、创建数据库Create DATABASE database-name2、删除数据库drop database dbname3、备份sql server— 创建备份数据的 deviceUSE masterEXEC sp_addumpdevice ‘disk’, ‘testBack’, ‘c:\\mssql7backup\\MyNwind_1.dat’— 开始备份BACKUP DATABASE pubs TO testBack4、创建新表create table tabname(col1 type1 [not null] [primary key],col2 type2 [notnull],..)根据已有的表创建新表：A：create table tab_new like tab_old (使用旧表创建新表)B：create table tab_new as select col1,col2… fromtab_old definition only5、删除新表drop table tabname6、增加一个列Alter table tabname add column col type注：列增加后将不能删除。DB2中列加上后数据类型也不能改变，唯一能改变的是增加varchar类型的长度。7、添加主键： Alter table tabname add primary key(col)说明：删除主键： Alter table tabname drop primary key(col)8、创建索引：create [unique] index idxname on tabname(col….)删除索引：drop index idxname注：索引是不可更改的，想更改必须删除重新建。9、创建视图：create view viewname as select statement删除视图：drop view viewname10、几个简单的基本的sql语句选择：select from table1 where 范围插入：insert into table1(field1,field2) values(value1,value2)删除：delete from table1 where 范围更新：update table1 set field1=value1 where 范围查找：select from table1 where field1 like ’%value1%’ —like的语法很精妙，查资料!排序：select * from table1 order by field1,field2 [desc]总数：select count as totalcount from table1求和：select sum(field1) as sumvalue from table1平均：select avg(field1) as avgvalue from table1最大：select max(field1) as maxvalue from table1最小：select min(field1) as minvalue from table111、几个高级查询运算词 本帖隐藏的内容A： UNION 运算符UNION 运算符通过组合其他两个结果表（例如 TABLE1 和 TABLE2）并消去表中任何重复行而派生出一个结果表。当 ALL 随 UNION 一起使用时（即 UNION ALL），不消除重复行。两种情况下，派生表的每一行不是来自 TABLE1 就是来自 TABLE2。B： EXCEPT 运算符EXCEPT 运算符通过包括所有在 TABLE1 中但不在 TABLE2 中的行并消除所有重复行而派生出一个结果表。当 ALL 随 EXCEPT 一起使用时 (EXCEPT ALL)，不消除重复行。C： INTERSECT 运算符INTERSECT 运算符通过只包括 TABLE1 和 TABLE2 中都有的行并消除所有重复行而派生出一个结果表。当 ALL 随 INTERSECT 一起使用时 (INTERSECT ALL)，不消除重复行。注：使用运算词的几个查询结果行必须是一致的。 12、使用外连接A、left outer join：左外连接（左连接）：结果集几包括连接表的匹配行，也包括左连接表的所有行。sql: select a.a, a.b, a.c, b.c, b.d, b.f from a LEFT OUT JOIN b ON a.a = b.cB：right outer join:右外连接(右连接)：结果集既包括连接表的匹配连接行，也包括右连接表的所有行。C：full outer join：全外连接：不仅包括符号连接表的匹配行，还包括两个连接表中的所有记录。13、复制表(只复制结构,源表名：a 新表名：b) (Access可用)法一：select into b from a where 1&lt;&gt;1法二：select top 0 into b from a14、拷贝表(拷贝数据,源表名：a 目标表名：b) (Access可用)insert into b(a, b, c) select d,e,f from b;15、跨数据库之间表的拷贝(具体数据使用绝对路径) (Access可用)insert into b(a, b, c) select d,e,f from b in ‘具体数据库’ where 条件例子：..from b in’”&amp;Server.MapPath(“.”)&amp;”\\data.mdb”&amp;”‘ where..16、子查询(表名1：a 表名2：b)select a,b,c from a where a IN (select d from b ) 或者: selecta,b,c from a where a IN(1,2,3)17、显示文章、提交人和最后回复时间select a.title,a.username,b.adddate from table a,(select max(adddate) adddatefromtable where table.title=a.title) b18.外连接查询(表名1：a 表名2：b)select a.a, a.b, a.c, b.c, b.d, b.f from a LEFT OUT JOIN b ON a.a = b.c19、在线视图查询(表名1：a )select from (Select a,b,c FROM a) T where t.a &gt; 1;20、between的用法,between限制查询数据范围时包括了边界值,not between不包括select from table1 where time between time1 and time2select a,b,c, from table1 where a not between 数值1 and 数值221、：in 的使用方法select from table1 where a [not] in (‘值1’,’值2’,’值4’,’值6’)22、：两张关联表，删除主表中已经在副表中没有的信息delete from table1 where not exists ( select from table2 wheretable1.field1=table2.field1 )23、四表联查问题：select from a left inner join b on a.a=b.b right inner join c on a.a=c.cinner joind on a.a=d.d where …..24、日程安排提前五分钟提醒sql: select from 日程安排 where datediff(‘minute’,f开始时间,getdate())&gt;525、一条sql 语句搞定数据库分页select top 10 b.* from (select top 20 主键字段,排序字段 from 表名 order by 排序字段desc) a,表名 b where b.主键字段 = a.主键字段 order by a.排序字段 26、前10条记录select top 10 * form table1 where 范围 27、选择在每一组b值相同的数据中对应的a最大的记录的所有信息(类似这样的用法可以用于论坛每月排行榜,每月热销产品分析,按科目成绩排名,等等.)select a,b,c from tablename ta where a=(select max(a) from tablename tb wheretb.b=ta.b) 28、包括所有在 TableA 中但不在 TableB和TableC 中的行并消除所有重复行而派生出一个结果表(select a from tableA ) except (select a from tableB) except (select a from tableC) 29、随机取出10条数据select top 10 * from tablename order by newid() 30、随机选择记录select newid() 31、删除重复记录Delete from tablename where id not in (select max(id) from tablename group bycol1,col2,…) 32、列出数据库里所有的表名select name from sysobjects where type=’U’ 33、列出表里的所有的select name from syscolumns where id=object_id(‘TableName’) 34、列示type、vender、pcs字段，以type字段排列，case可以方便地实现多重选择，类似select 中的case。select type,sum(case vender when ‘A’ then pcs else 0 end),sum(case vender when ‘C’then pcs else 0 end),sum(case vender when ‘B’ then pcs else 0 end) FROM tablenamegroup by type显示结果：type vender pcs电脑 A 1电脑 A 1光盘 B 2光盘 A 2手机 B 3手机 C 3 35、初始化表 table1TRUNCATE TABLE table1","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"mysql","slug":"sql/mysql","permalink":"http://io.stelawliet.top/categories/sql/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://io.stelawliet.top/tags/mysql/"},{"name":"面试","slug":"面试","permalink":"http://io.stelawliet.top/tags/面试/"}]},{"title":"","slug":"Java/JavaEE/java1年经验之谈","date":"2017-12-15T06:39:45.000Z","updated":"2017-12-15T06:40:10.000Z","comments":true,"path":"2017/12/15/Java/JavaEE/java1年经验之谈/","link":"","permalink":"http://io.stelawliet.top/2017/12/15/Java/JavaEE/java1年经验之谈/","excerpt":"","text":"java后端工作一年浅谈经验转载 2017年08月27日 18:53:17 标签： java / 程序员 / 经验 / 技术 **185 1.引言 毕业已经一年有余，这一年里特别感谢技术管理人员的器重，以及同事的帮忙，学到了不少东西。这一年里走过一些弯路，也碰到一些难题，也受到过做为一名开发却经常为系统维护和发布当救火队员的苦恼。遂决定梳理一下自己所学的东西，为大家分享一下。 经过一年意识到以前也有很多认识误区，比如： 偏爱收集，经常收集各种资料视频塞满一个个硬盘，然后心满意足的看着容量不行动。 不重基础，总觉得很多基础东西不需要再看了，其实不懂的地方很多，计算机程序方面任何一个结果都必有原因，不要只会用不知道原理，那是加工厂出来的。现在ide查看代码那么方便，ctrl+点击就进入了JDK查看实现细节。 好高骛远，在计算机基础不牢固的情况下，总想着要做架构，弄分布式，搞大数据之类。 不重视性能，只求能实现功能，sql查询是不是可以优化，是否有算法妙用，大对象是否要清除。 不重视扩展性，模块之间紧密耦合，常用方法不提取成工具类，调用关系混乱等问题。 …… 本文重点不在这些，故只列举了一小部分，下面进入正题。 2.语法基础 2.1 Java类初始化顺序 这是所有情况的类初始化顺序，如果实际类中没有定义则跳过：父类静态变量——父类静态代码块——子类静态代码块——父类非静态变量——父类非静态代码块——父类构造函数——子类非静态变量——子类非静态代码块——子类构造函数 2.2值传递和引用传递 可能很多人对此不屑一顾，心想老子都工作一年了，对这些还不熟悉吗？但实际情况并非这样，JDK中东西全部熟悉了吗？以一个最简单的例子开始，你觉得下图中代码执行完之后fatherList中的元素是什么？ 这是一个最基础的值传递和引用传递的例子，你觉得好简单，已经想跃跃欲试的挑战了，那么请看下面的，StringBuffer很好理解，但是当你执行一遍之后发现是不是和预想中的输出不一样呢？String不是引用类型吗，怎么会这样呢？如果你无法理解，那么请看下String的实现源码，了解下其在内存中分配的实现原理。 2.3集合的使用 这部分几乎每个人都会用到，而且大家还都不陌生。下图来源于互联网，供大家复习一下。但是利用集合的特性进行巧妙的组合运用能解决优化很多复杂问题。Set不可重复性，List的顺序性，Map的键值对，SortSet/SortMap的有序性，我在工作中有很多复杂的业务都巧妙的使用了这些，涉及到公司保密信息，我就不贴出代码了。工作越久越发现这些和越巧妙。 2.3异常处理 1.看着try、catch、finally非常容易，如果和事务传播结合在一起，就会变得极其复杂。 2.finally不一定必须执行，return在catch/finally中处理情况（建议亲自操刀试一下）。 3.catch中可以继续抛自定义异常（并把异常一步步传递到控制层，利用切面抓取封装异常，返回给调用者）。 2.4面向对象思想 一提起面向对象，大家都知道抽象、封装、继承、和多态。但是实际工作经验中又知道多少呢，对于项目中如何巧用估计更不要提了。 共性的机会每个都需要用的建立基类，如每个控制层方法可能要通过security获取一个登录用户id，用于根据不同的用户操作不同的数据，可以抽象出一个应用层基类，实现获取id的protect方法。同理DAO层可以利用泛型提取出一个包含增删改查的基类。 多态的Override：基类的引用变量不仅可以指向基类的实例对象，也可以指向其子类的实例对象，如果指向子类的实例对象，其调用的方法应该是正在运行的那个对象的方法。在策略模式中使用很普遍。 提到面向对象，就不可避免的要说设计模式，在工作中，一个技术大牛写的一个类似策略模式（更复杂一点），十分巧妙的解决了各种业务同一个方法，并且实现了订单、工单、业务的解耦，看得我是非常佩服。我想很多面试中都会问道单例模式吧，还没有理解的建议去看一看。 3.多线程 3.1线程安全 这个是老生常谈的问题了，但是确实是问题和bug高发区。线程同步问题不需要单独写了，想必大家都清楚，不太熟悉的建议百度一下。 3.1.1 线程安全问题 1.代码中如果有同步操作，共享变量要特别注意（这个一般都能意识到） 2多个操作能修改数据表中同一条数据的。（这个容易被忽略，业务A可能操作表a，业务B也可以操作表a，业务A、B即使在不同的模块和方法中，也会引起线程安全问题。例如如果一个人访问业务A接口，另一个人访问业务B接口，在web中每个业务请求都是会有单独的一个线程进行处理的，就会出现线程安全问题）。 3.不安全的类型使用，例如StringBuffer、StringBuild，HashTable、HashMap等。在工作中我就遇到过有人在for循环进行list的remove，虽然编译器不报错，程序可以运行，但是结果却可想而知。 4.Spring的bean默认是单例的，如果有类变量就要特别小心了（一般情况下是没人在控制层、业务层、DAO层等用类变量的，用的话建议是final类型，例如日志log，gson等）。 5.多个系统共享数据库情况，这个其实和分布式系统类似 用户重复提交问题（即使代码中从数据库读取是否存在进行限制不能解决问题） 3.1.2线程安全解决 在需要同步的地方采用安全的类型。 JDK锁机制，lock、tryLock，synchronized，wait、notify、notifyAll等 Concurrent并发工具包，在处理一些问题上，谁用谁知道。强烈建议查看源码！ 数据表加锁。（除非某个表的访问频率极低，否则不建议使用） 涉及分布式的，采用中间件技术例如zookeeper等解决。 3.2异步 异步使用场景不影响主线程，且响应较慢的业务。例如IO操作，第三方服务（短信验证码、app推送、云存储上传等）。 如果异步任务很多，就需要使用任务队列了，任务队列可以在代码级别实现，也可以利用redis（优势太明显了）。 3.3多线程通信 这方面文章非常多，这里不在详述。 1.共享变量方式（共享文件、全局变量，信号量机制等） 2.消息队列方式 3.忙等，锁机制 3.4多线程实现 1.集成Thread类，重写（这里的重写指的是override）run方法，调用start方法执行。 2.实现Runable接口，实现run方法，以Runable实例创建thread对象。 3.实现Callable接口，实现call方法，FutureTask包装callable接口，FutureTask对象创建thread对象，常用语异步操作，建议使用匿名内部类，方便阅读和使用。 额外需要说明的是： 1.理解thread的join方法； 2.不要认为volitate是线程安全的（不明白原因的建议去看jvm运行时刻内存分配策略）； 3.sleep时间片结束后并不保证立马获取cpu。 4.ThreadLocal能够为每一个线程维护变量副本，常用于在多线程中用空间换时间。 4.开源框架 4.1 Hibernate、Mybatis 相信每一个java程序员对这些都不陌生，这里不再详述。 需要说明的主要以下几点： 1.hibernate一级缓存（内置session缓存），二级缓存（可装配sessionFactory缓存），二级缓存会引起并发问题。 2.hibernate延迟加载原理理解。 3.hibernate的get、load方法，sava、persist、savaOrUpdate方法区别 4.session重建了关联关系却并没有同数据库进行同步和更新 5.hibernate session关联关系：detached对象、persistent对象 6.Spring data集成，注解方式配置属性和实体。 7.mybatis插件。 8.分页查询（数据库）。 9.连接池技术 4.2 Spring IOC 4.1.1 Spring bean 1.bean注入注解方式方便易读，引用第三方（数据库连接，数据库连接池，JedisPool等）采用配置文件方式。 \\2. bean作用域：Singleton，prototype，request，session，global session 3.bean生命周期:如下图所示（图片来源于互联网）： 4.3 Spring AOP 基本概念：关注点、切面Aspect、切入点pointcut、连接点joinpoint、通知advice、织入weave、引入introduction。 Spring AOP支持5中类型通知，分别是MethodBeforeAdvice、AfterReturningAdvice、ThrowsAdvice、MethodInterceptor、IntroductionInterceptor（吐槽一下名字太长） 实现方式如下: 1.基于代理的AOP 2.基于@Aspect注解驱动的切面。（强烈推荐：可读性好，易维护，易扩展，开发快） 3.纯POJO切面。 4.注入式Aspect切面。 4.4 Srping事务 4.4.1事务传播 概念：某些操作需要保证原子性，如果中间出错，需要事务回滚。如果某个事务回滚，那么调用该事务的方法中的事务的作出如何的动作，就是事务传播。 短时间内写不清楚，建议访问 http://www.cnblogs.com/yangy608/archive/2010/12/15/1907065.html 查看。 事务传播属性： PROPAGATION_REQUIRED–支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。 \\2. PROPAGATION_SUPPORTS–支持当前事务，如果当前没有事务，就以非事务方式执行。 \\3. PROPAGATION_MANDATORY–支持当前事务，如果当前没有事务，就抛出异常。 \\4. PROPAGATION_REQUIRES_NEW–新建事务，如果当前存在事务，把当前事务挂起。 \\5. PROPAGATION_NOT_SUPPORTED–以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。 \\6. PROPAGATION_NEVER–以非事务方式执行，如果当前存在事务，则抛出异常。 事务隔离级别： ISOLATION_DEFAULT：这是一个PlatfromTransactionManager默认的隔离级别，使用数据库默认的事务隔离级别.另外四个与JDBC的隔离级别相对应 \\2. ISOLATION_READ_UNCOMMITTED：这是事务最低的隔离级别，充许令外一个事务可以看到这个事务未提交的数据。这种隔离级别会产生脏读，不可重复读和幻像读。 \\3. ISOLATION_READ_COMMITTED：保证一个事务修改的数据提交后才能被另外一个事务读取。另外一个事务不能读取该事务未提交的数据 \\4. ISOLATION_REPEATABLE_READ：这种事务隔离级别可以防止脏读，不可重复读。但是可能出现幻像读。它除了保证一个事务不能读取另一个事务未提交的数据外，还保证了避免下面的情况产生(不可重复读)。 \\5. ISOLATION_SERIALIZABLE这是花费最高代价但是最可靠的事务隔离级别。事务被处理为顺序执行。除了防止脏读，不可重复读外，还避免了幻像读。 4.5其他Spring 技术栈 spring boot轻量级启动框架 spring security用户权限管理，根据角色和用户，实现UserDetailsService，进行自定义权限管理。 spring task代码级定时任务，注解方式，使用起来非常方便。需要注意的是，如果某次定时任务出了异常而没有进行处理，会导致接下来定时任务失效。如果各个任务相互独立，可以简单用try，catch包围（之前就吃过这方面的亏）。 spring data注解方式定义实体，属性等 spring mvc简单明了的mvc框架。url传值、数组传值、对象传值、对象数组等传值类型，上传/下载文件类型需要注意。 spring restful注意命名，对命名要求很严格。 spring shell命令行方式执行命令，救火、导入导出数据等用起来非常方便、制作报表。 \\5. Web基础 5.1 web容器启动 1.web.xml加载顺序: listener -&gt; filter -&gt;servlet 2.webt容器启动过程，java新手很怕配置文件，理解完这些有助于熟悉配置文件 http://blog.csdn.net/u014431852/article/details/47042895 5.2 Servlet、Interceptor、Listener、Filter Servlet接收请求返回响应，最原始的web业务处理类。 Interceptor拦截器，可以实现HandlerInterceptor接口自定义拦截器，在日志记录、权限检查、性能监控、通用行为等场景使用，本质是AOP。 Listener监听器常用于统计在线人数等纵向功能。 Filter过滤器在请求接口处理业务之前改变requset，在业务处理之后响应用户之前改变response。如果某些数据不加密，很容易用抓包工具加filter作弊。 5.3 web项目结构 5.3.1 mvn结构 熟练掌握几种常见的mvn项目结构，mvn可以自动生成，这里不再详述。 5.3.2 mvn包管理 1.版本号尽量几种在一个文件中便于管理。 2.spring milestone包解决spring包冲突问题。 3.mvn dependency:tree命令分析所有包依赖，对于冲突的在pom文件中包围起来 5.3.3版本控制 1.git、svn等 2.代码冲突解决方案 3.分支管理。 对于某个稳定版本上线后，如果在此基础上开发新功能，一定要新建分支，在新分支上提交代码，最后在新版发布时合并分支。修改运营环境bug切换到主分支进行修改 5.4 Http请求 5.4.1请求方法 post、get、put、head、delete、copy、move、connect、link、patch，最常用的是前4、5个。 5.4.2请求头，状态码 常用的请求头有Accept（下载文件会特殊使用）、Accept-Charset（设置utf-8字符集）、Content-Type（json等配置）等 常用的响应头有Content-Type、Content-Type、Content-Length等，偏前端，不再详述。 6.系统架构 接触的不是特别多，目前用到的只是服务器主从备份。Nginx反向代理进行配置。 多个项目nginx配置 Spring Mvc用json数据进行交互，配置json转换的servlet。 封装返回值 自定义RunEnvironmentException（状态码，原因），覆盖原有Exception，切面ExceptionHandler抓取Exception并封装到返回值中（前后端松耦合） 令人头疼的用户重复（连续快速点击）提交问题，前端限制治标不治本；后端用sessonid在切面上实现，又需要前端存储，对所有请求数据加sessionId。最后用jedis中存储，用接口名+用户名当做key，根据不同的接口对不同的key可以单独设置时间，不仅保证了重复提交问题，也避免了恶意请求问题，同时还能自定义请求间隔。（期初担心redis缓存读写时间延误导致限制失效，后来发现多虑了，对一般的小系统来说，经性能测试，发现即使请求频率再提高100被也不会导致限制失效） testNg单元测试、性能测试，覆盖测试。 切面管理日期、权限。缓存等。 \\7. Nosql 1.Redis的java库Jedis。 Jedispool配置。 项目中用到的有任务队列、缓存。 neo4j图数据库 处理社交、推荐 8.服务端 linux操作系统熟悉以centos为例： 常用简单命令：ssh、vim、scp、ps、gerp、sed、awk、cat、tail，df、top，shell、chmod、sh、tar、find、wc、ln、| 目录结构明细:/etc/、~/、/usr/、/dev/、/home/、/etc/init.d/ 服务端：jdk、tomcat、nginx、mysql、jedis、neo4j启动与配置（特别说明的是该死的防火墙，nginx启动后一直访问不了，查找一下午查不到原因，最后发现是防火墙问题） 监控服务器状态（cpu，磁盘，内存），定位pid，日志查看 nginx负载均衡、反向代理、配置 自动化部署脚本 简单shell脚本书写，避免大量人力劳动。 监控系统，代码抛fatal异常自动发邮件，系统指标持续偏高自动发邮件。 9.数据库相关 10.第三方接口对接 10.1支付接口 微信支付坑比较多，用将近两周时间才把微信支付所有完成。需要在微信后台配置的地方太多。 而支付宝支付模块只用了2天时间就搞定了。 10.2推送接口 为用户定义tag、定义alias，注意当数据更新时需要同步更新tag、更新alias。如果没采用异步实现（用户体验就是好卡啊） 10.3云存储 大量文件上传云端（七牛云），注意创建bucket 10.4短信验证 很简单的第三方接口，引入依赖，直接调用即可。需要在第三方后台设置模板等，注意限定用户访问次数。 10.5邮件 很简单小功能，工具类。 时间有限，目前先写这么多技术栈。对于代码书写和、算法技巧问题，会抽时间写在（2）中。 好了同学们，我能介绍的也都全部介绍完给你们了，如果下获得更多JAVA教学资源，可以选择来我们这里共同交流，群：24044837，很多大神在这里切磋学习，不懂可以直接问，晚上还有大牛免费直播教学。注：加群要求1、具有一定工作经验的，面对目前流行的技术不知从何下手，需要突破技术瓶颈的可以加，有些应届生和实习生也可以加。2、在公司待久了，过得很安逸，但跳槽时面试碰壁。需要在短时间内进修、跳槽拿高薪的可以加。3、如果没有工作经验，但基础非常扎实，对java工作机制，常用设计思想，常用java开发框架掌握熟练的，可以加。4、觉得自己很牛B，一般需求都能搞定。但是所学的知识点没有系统化，很难在技术领域继续突破的可以加。5.阿里Java高级大牛直播讲解知识点，分享知识，多年工作经验的梳理和总结，带着大家全面、科学地建立自己的技术体系和技术认知！PS：现在主要讲解的内容是（反射原理、枚举原理与应用、注解原理、常用设计模式、正规表达式高级应用、JAVA操作Office原理详解、JAVA图像处理技术，等多个知识点的详解和实战）6.小号或者小白之类加群一律不给过，谢谢。最后，每一位读到这里的网友，感谢你们能耐心地看完。觉得对你有帮助可以给个喜欢！希望在成为一名更优秀的Java程序员的道路上，我们可以一起学习、一起进步","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/class文件路径","date":"2017-11-28T05:34:42.000Z","updated":"2018-07-02T01:18:44.000Z","comments":true,"path":"2017/11/28/Java/JavaEE/class文件路径/","link":"","permalink":"http://io.stelawliet.top/2017/11/28/Java/JavaEE/class文件路径/","excerpt":"","text":"Class.getResource和ClassLoader.getResource的使用 参考 Class.getResource(String path)12path不以’/&apos;开头时，默认是从此类所在的包下取资源；path 以’/&apos;开头时，则是从ClassPath根下获取； 什么意思呢？看下面这段代码的输出结果就明白了： 1234567package testpackage;public class TestMain &#123; public static void main(String[] args) &#123; System.out.println(TestMain.class.getResource(&quot;&quot;)); System.out.println(TestMain.class.getResource(&quot;/&quot;)); &#125;&#125; 输出结果： 12file:/E:/workspace/Test/WebRoot/WEB-INF/classes/testpackage/file:/E:/workspace/Test/WebRoot/WEB-INF/classes/ getclass.getResource(&quot;&quot;)为当前类的包根路径 getClass.getRessource(&quot;/&quot;)为classpath根路径 ※Class.getResource和Class.getResourceAsStream在使用时，路径选择上是一样的。 Class.getClassLoader（）.getResource(String path)12path不能以’/&apos;开头时；path是从ClassPath根下获取； Class.getClassLoader().getResource(&quot;&quot;) == xxClass.getResource(&quot;/&quot;) 注： Windows绝对路径： 以盘符开始 如C:/a.txt Windows相对路径： . 指的是当前目录 .. 指的是当前目录的上一级目录 ./test 表示当前目录下的test文件夹 /test 表示当前盘符下的test文件夹 Linux绝对路径： 以root根目录/开始的路径 如/ 表示root根目录 Linux相对路径： ./ 指的是当前目录 ../ 指的是当前目录的上一级目录 .代表当前目录，..代表上级目录 好像是统一的。 在windows或者Linux获取配置文件如：.properties文件时 使用Class.getResource或者ClassLoader.getResource获取绝对路径classpath时返回的值如下不同 Windows输出 Linux输出 因此获取绝对路径的截取的也就不同 ※Class.getClassLoader（）.getResource和Class.getClassLoader（）.getResourceAsStream在使用时，路径选择上也是一样的。 getResourceAsStream()方法，参数是与getResouce()方法是一样的，它相当于你用getResource()取得File文件后，再new InputStream(file) 总结： Xxx.class.getResource(“”) ; Xxx.class.getResource(“/“)或者Xxx.class.getClassLoader().getgetResource(“”);; xxx.getClass.getResource(“”) ; xxx.getClass.getResource(“/“)或者xxx.getClass.getClassLoader().getgetResource(“”); 1234567891011121314151617181920212223242526272829知识扩充：linux下没有C、D盘等硬盘分区的概念。linux下是采用目录形式来代替windows中硬盘分区的概念。linux文件结构/：根目录，所有的目录、文件、设备都在/之下，/就是Linux文件系统的组织者，也是最上级的领导者。/bin：bin 就是二进制（binary）英文缩写。在一般的系统当中，都可以在这个目录下找到linux常用的命令。系统所需要的那些命令位于此目录。/boot：Linux的内核及引导系统程序所需要的文件目录，比如 vmlinuz initrd.img 文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器也位于这个目录。/cdrom：这个目录在刚刚安装系统的时候是空的。可以将光驱文件系统挂在这个目录下。例如：mount /dev/cdrom /cdrom/dev：dev 是设备（device)的英文缩写。这个目录对所有的用户都十分重要。因为在这个目录中包含了所有linux系统中使用的外部设备。但是这里并不是放的外部设备的驱动程序。这一点和常用的windows,dos操作系统不一样。它实际上是一个访问这些外部设备的端口。可以非常方便地去访问这些外部设备，和访问一个文件，一个目录没有任何区别。/etc：etc这个目录是linux系统中最重要的目录之一。在这个目录下存放了系统管理时要用到的各种配置文件和子目录。要用到的网络配置文件，文件系统，x系统配置文件，设备配置信息，设置用户信息等都在这个目录下。/home：如果建立一个用户，用户名是&quot;xx&quot;,那么在/home目录下就有一个对应的/home/xx路径，用来存放用户的主目录。/lib：lib是库（library）英文缩写。这个目录是用来存放系统动态连接共享库的。几乎所有的应用程序都会用到这个目录下的共享库。因此，千万不要轻易对这个目录进行什么操作，一旦发生问题，系统就不能工作了。/lost+found：在ext2或ext3文件系统中，当系统意外崩溃或机器意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck工具会检查这里，并修复已经损坏的文件系统。有时系统发生问题，有很多的文件被移到这个目录中，可能会用手工的方式来修复，或移到文件到原来的位置上。/mnt：这个目录一般是用于存放挂载储存设备的挂载目录的，比如有cdrom等目录。可以参看/etc/fstab的定义。/media：有些linux的发行版使用这个目录来挂载那些usb接口的移动硬盘（包括U盘）、CD/DVD驱动器等等。/opt：这里主要存放那些可选的程序。/proc：可以在这个目录下获取系统信息。这些信息是在内存中，由系统自己产生的。/root：Linux超级权限用户root的家目录。/sbin：这个目录是用来存放系统管理员的系统管理程序。大多是涉及系统管理的命令的存放，是超级权限用户root的可执行命令存放地，普通用户无权限执行这个目录下的命令，这个目录和/usr/sbin; /usr/X11R6/sbin或/usr/local/sbin目录是相似的，凡是目录sbin中包含的都是root权限才能执行的。/selinux ：对SElinux的一些配置文件目录，SElinux可以让linux更加安全。/srv 服务启动后，所需访问的数据目录，举个例子来说，www服务启动读取的网页数据就可以放在/srv/www中/tmp：临时文件目录，用来存放不同程序执行时产生的临时文件。有时用户运行程序的时候，会产生临时文件。/tmp就用来存放临时文件的。/var/tmp目录和这个目录相似。/usr这是linux系统中占用硬盘空间最大的目录。用户的很多应用程序和文件都存放在这个目录下。在这个目录下，可以找到那些不适合放在/bin或/etc目录下的额外的工具/usr/local：这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本（scripts)放到/usr/local目录下面、。/usr/share ：系统共用的东西存放地，比如 /usr/share/fonts 是字体目录，/usr/share/doc和/usr/share/man帮助文件。/var：这个目录的内容是经常变动的，看名字就知道，可以理解为vary的缩写，/var下有/var/log 这是用来存放系统日志的目录。/var/ www目录是定义Apache服务器站点存放目录；/var/lib 用来存放一些库文件，比如MySQL的，以及MySQL数据库的的存放地。","categories":[],"tags":[]},{"title":"","slug":"JavaScript/js","date":"2017-11-24T15:12:59.000Z","updated":"2017-11-24T15:13:20.000Z","comments":true,"path":"2017/11/24/JavaScript/js/","link":"","permalink":"http://io.stelawliet.top/2017/11/24/JavaScript/js/","excerpt":"","text":"ssssyoki2017 年 11 月 21 日 这一次，彻底弄懂 JavaScript 执行机制本文的目的就是要保证你彻底弄懂javascript的执行机制，如果读完本文还不懂，可以揍我。 不论你是javascript新手还是老鸟，不论是面试求职，还是日常开发工作，我们经常会遇到这样的情况：给定的几行代码，我们需要知道其输出内容和顺序。因为javascript是一门单线程语言，所以我们可以得出结论： javascript是按照语句出现的顺序执行的 看到这里读者要打人了：我难道不知道js是一行一行执行的？还用你说？稍安勿躁，正因为js是一行一行执行的，所以我们以为js都是这样的： 12345let a = &apos;1&apos;;console.log(a);let b = &apos;2&apos;;console.log(b); img 然而实际上js是这样的： 1234567891011121314setTimeout(function()&#123; console.log(&apos;定时器开始啦&apos;)&#125;);new Promise(function(resolve)&#123; console.log(&apos;马上执行for循环啦&apos;); for(var i = 0; i &lt; 10000; i++)&#123; i == 99 &amp;&amp; resolve(); &#125;&#125;).then(function()&#123; console.log(&apos;执行then函数啦&apos;)&#125;);console.log(&apos;代码执行结束&apos;); img 依照js是按照语句出现的顺序执行这个理念，我自信的写下输出结果： 1234//&quot;定时器开始啦&quot;//&quot;马上执行for循环啦&quot;//&quot;执行then函数啦&quot;//&quot;代码执行结束&quot; 去chrome上验证下，结果完全不对，瞬间懵了，说好的一行一行执行的呢？ img 我们真的要彻底弄明白javascript的执行机制了。 1.关于javascriptjavascript是一门单线程语言，在最新的HTML5中提出了Web-Worker，但javascript是单线程这一核心仍未改变。所以一切javascript版的”多线程”都是用单线程模拟出来的，一切javascript多线程都是纸老虎！ 2.javascript事件循环既然js是单线程，那就像只有一个窗口的银行，客户需要排队一个一个办理业务，同理js任务也要一个一个顺序执行。如果一个任务耗时过长，那么后一个任务也必须等着。那么问题来了，假如我们想浏览新闻，但是新闻包含的超清图片加载很慢，难道我们的网页要一直卡着直到图片完全显示出来？因此聪明的程序员将任务分为两类： 同步任务 异步任务 当我们打开网站时，网页的渲染过程就是一大堆同步任务，比如页面骨架和页面元素的渲染。而像加载图片音乐之类占用资源大耗时久的任务，就是异步任务。关于这部分有严格的文字定义，但本文的目的是用最小的学习成本彻底弄懂执行机制，所以我们用导图来说明： img 导图要表达的内容用文字来表述的话： 同步和异步任务分别进入不同的执行”场所”，同步的进入主线程，异步的进入Event Table并注册函数。 当指定的事情完成时，Event Table会将这个函数移入Event Queue。 主线程内的任务执行完毕为空，会去Event Queue读取对应的函数，进入主线程执行。 上述过程会不断重复，也就是常说的Event Loop(事件循环)。 我们不禁要问了，那怎么知道主线程执行栈为空啊？js引擎存在monitoring process进程，会持续不断的检查主线程执行栈是否为空，一旦为空，就会去Event Queue那里检查是否有等待被调用的函数。 说了这么多文字，不如直接一段代码更直白： 123456789let data = [];$.ajax(&#123; url:www.javascript.com, data:data, success:() =&gt; &#123; console.log(&apos;发送成功!&apos;); &#125;&#125;)console.log(&apos;代码执行结束&apos;); 上面是一段简易的ajax请求代码： ajax进入Event Table，注册回调函数success。 执行console.log(&#39;代码执行结束&#39;)。 ajax事件完成，回调函数success进入Event Queue。 主线程从Event Queue读取回调函数success并执行。 相信通过上面的文字和代码，你已经对js的执行顺序有了初步了解。接下来我们来研究进阶话题：setTimeout。 3.又爱又恨的setTimeout大名鼎鼎的setTimeout无需再多言，大家对他的第一印象就是异步可以延时执行，我们经常这么实现延时3秒执行： 123setTimeout(() =&gt; &#123; console.log(&apos;延时3秒&apos;);&#125;,3000) 渐渐的setTimeout用的地方多了，问题也出现了，有时候明明写的延时3秒，实际却5，6秒才执行函数，这又咋回事啊？ 先看一个例子： 1234setTimeout(() =&gt; &#123; task();&#125;,3000)console.log(&apos;执行console&apos;); 根据前面我们的结论，setTimeout是异步的，应该先执行console.log这个同步任务，所以我们的结论是： 12//执行console//task() 去验证一下，结果正确！然后我们修改一下前面的代码： 12345setTimeout(() =&gt; &#123; task()&#125;,3000)sleep(10000000) 乍一看其实差不多嘛，但我们把这段代码在chrome执行一下，却发现控制台执行task()需要的时间远远超过3秒，说好的延时三秒，为啥现在需要这么长时间啊？ 这时候我们需要重新理解setTimeout的定义。我们先说上述代码是怎么执行的： task()进入Event Table并注册,计时开始。 执行sleep函数，很慢，非常慢，计时仍在继续。 3秒到了，计时事件timeout完成，task()进入Event Queue，但是sleep也太慢了吧，还没执行完，只好等着。 sleep终于执行完了，task()终于从Event Queue进入了主线程执行。 上述的流程走完，我们知道setTimeout这个函数，是经过指定时间后，把要执行的任务(本例中为task())加入到Event Queue中，又因为是单线程任务要一个一个执行，如果前面的任务需要的时间太久，那么只能等着，导致真正的延迟时间远远大于3秒。 我们还经常遇到setTimeout(fn,0)这样的代码，0秒后执行又是什么意思呢？是不是可以立即执行呢？ 答案是不会的，setTimeout(fn,0)的含义是，指定某个任务在主线程最早可得的空闲时间执行，意思就是不用再等多少秒了，只要主线程执行栈内的同步任务全部执行完成，栈为空就马上执行。举例说明： 12345//代码1console.log(&apos;先执行这里&apos;);setTimeout(() =&gt; &#123; console.log(&apos;执行啦&apos;)&#125;,0); 12345//代码2console.log(&apos;先执行这里&apos;);setTimeout(() =&gt; &#123; console.log(&apos;执行啦&apos;)&#125;,3000); 代码1的输出结果是： 12//先执行这里//执行啦 代码2的输出结果是： 123//先执行这里// ... 3s later// 执行啦 关于setTimeout要补充的是，即便主线程为空，0毫秒实际上也是达不到的。根据HTML的标准，最低是4毫秒。有兴趣的同学可以自行了解。 4.又恨又爱的setInterval上面说完了setTimeout，当然不能错过它的孪生兄弟setInterval。他俩差不多，只不过后者是循环的执行。对于执行顺序来说，setInterval会每隔指定的时间将注册的函数置入Event Queue，如果前面的任务耗时太久，那么同样需要等待。 唯一需要注意的一点是，对于setInterval(fn,ms)来说，我们已经知道不是每过ms秒会执行一次fn，而是每过ms秒，会有fn进入Event Queue。一旦setInterval的回调函数fn执行时间超过了延迟时间ms，那么就完全看不出来有时间间隔了。这句话请读者仔细品味。 5.Promise与process.nextTick(callback)传统的定时器我们已经研究过了，接着我们探究Promise与process.nextTick(callback)的表现。 Promise的定义和功能本文不再赘述，不了解的读者可以学习一下阮一峰老师的Promise。而process.nextTick(callback)类似node.js版的”setTimeout”，在事件循环的下一次循环中调用 callback 回调函数。 我们进入正题，除了广义的同步任务和异步任务，我们对任务有更精细的定义： macro-task(宏任务)：包括整体代码script，setTimeout，setInterval micro-task(微任务)：Promise，process.nextTick 不同类型的任务会进入对应的Event Queue，比如setTimeout和setInterval会进入相同的Event Queue。 事件循环的顺序，决定js代码的执行顺序。进入整体代码(宏任务)后，开始第一次循环。接着执行所有的微任务。然后再次从宏任务开始，找到其中一个任务队列执行完毕，再执行所有的微任务。听起来有点绕，我们用文章最开始的一段代码说明： 1234567891011setTimeout(function() &#123; console.log(&apos;setTimeout&apos;);&#125;)new Promise(function(resolve) &#123; console.log(&apos;promise&apos;);&#125;).then(function() &#123; console.log(&apos;then&apos;);&#125;)console.log(&apos;console&apos;); 这段代码作为宏任务，进入主线程。 先遇到setTimeout，那么将其回调函数注册后分发到宏任务Event Queue。(注册过程与上同，下文不再描述) 接下来遇到了Promise，new Promise立即执行，then函数分发到微任务Event Queue。 遇到console.log()，立即执行。 好啦，整体代码script作为第一个宏任务执行结束，看看有哪些微任务？我们发现了then在微任务Event Queue里面，执行。 ok，第一轮事件循环结束了，我们开始第二轮循环，当然要从宏任务Event Queue开始。我们发现了宏任务Event Queue中setTimeout对应的回调函数，立即执行。 结束。 事件循环，宏任务，微任务的关系如图所示： img 我们来分析一段较复杂的代码，看看你是否真的掌握了js的执行机制： 123456789101112131415161718192021222324252627282930313233343536console.log(&apos;1&apos;);setTimeout(function() &#123; console.log(&apos;2&apos;); process.nextTick(function() &#123; console.log(&apos;3&apos;); &#125;) new Promise(function(resolve) &#123; console.log(&apos;4&apos;); resolve(); &#125;).then(function() &#123; console.log(&apos;5&apos;) &#125;)&#125;)process.nextTick(function() &#123; console.log(&apos;6&apos;);&#125;)new Promise(function(resolve) &#123; console.log(&apos;7&apos;); resolve();&#125;).then(function() &#123; console.log(&apos;8&apos;)&#125;)setTimeout(function() &#123; console.log(&apos;9&apos;); process.nextTick(function() &#123; console.log(&apos;10&apos;); &#125;) new Promise(function(resolve) &#123; console.log(&apos;11&apos;); resolve(); &#125;).then(function() &#123; console.log(&apos;12&apos;) &#125;)&#125;) 第一轮事件循环流程分析如下： 整体script作为第一个宏任务进入主线程，遇到console.log，输出1。 遇到setTimeout，其回调函数被分发到宏任务Event Queue中。我们暂且记为setTimeout1。 遇到process.nextTick()，其回调函数被分发到微任务Event Queue中。我们记为process1。 遇到Promise，new Promise直接执行，输出7。then被分发到微任务Event Queue中。我们记为then1。 又遇到了setTimeout，其回调函数被分发到宏任务Event Queue中，我们记为setTimeout2。 宏任务Event Queue 微任务Event Queue setTimeout1 process1 setTimeout2 then1 上表是第一轮事件循环宏任务结束时各Event Queue的情况，此时已经输出了1和7。 我们发现了process1和then1两个微任务。 执行process1,输出6。 执行then1，输出8。 好了，第一轮事件循环正式结束，这一轮的结果是输出1，7，6，8。那么第二轮时间循环从setTimeout1宏任务开始： 首先输出2。接下来遇到了process.nextTick()，同样将其分发到微任务Event Queue中，记为process2。new Promise立即执行输出4，then也分发到微任务Event Queue中，记为then2。 宏任务Event Queue 微任务Event Queue setTimeout2 process2 then2 第二轮事件循环宏任务结束，我们发现有process2和then2两个微任务可以执行。 输出3。 输出5。 第二轮事件循环结束，第二轮输出2，4，3，5。 第三轮事件循环开始，此时只剩setTimeout2了，执行。 直接输出9。 将process.nextTick()分发到微任务Event Queue中。记为process3。 直接执行new Promise，输出11。 将then分发到微任务Event Queue中，记为then3。 宏任务Event Queue 微任务Event Queue process3 then3 第三轮事件循环宏任务执行结束，执行两个微任务process3和then3。 输出10。 输出12。 第三轮事件循环结束，第三轮输出9，11，10，12。 整段代码，共进行了三次事件循环，完整的输出为1，7，6，8，2，4，3，5，9，11，10，12。(请注意，node环境下的事件监听依赖libuv与前端环境不完全相同，输出顺序可能会有误差) 6.写在最后(1)js的异步我们从最开头就说javascript是一门单线程语言，不管是什么新框架新语法糖实现的所谓异步，其实都是用同步的方法去模拟的，牢牢把握住单线程这点非常重要。 (2)事件循环Event Loop事件循环是js实现异步的一种方法，也是js的执行机制。 (3)javascript的执行和运行执行和运行有很大的区别，javascript在不同的环境下，比如node，浏览器，Ringo等等，执行方式是不同的。而运行大多指javascript解析引擎，是统一的。 (4)setImmediate微任务和宏任务还有很多种类，比如setImmediate等等，执行都是有共同点的，有兴趣的同学可以自行了解。 (5)最后的最后 javascript是一门单线程语言 Event Loop是javascript的执行机制 牢牢把握两个基本点，以认真学习javascript为中心，早日实现成为前端高手的伟大梦想！","categories":[],"tags":[]},{"title":"","slug":"JavaScript/JavaScript复习","date":"2017-11-21T09:22:48.000Z","updated":"2017-11-22T09:38:41.000Z","comments":true,"path":"2017/11/21/JavaScript/JavaScript复习/","link":"","permalink":"http://io.stelawliet.top/2017/11/21/JavaScript/JavaScript复习/","excerpt":"","text":"JavaScript内置对象 switch Java SDF ​ javascript 事件 Event 对象Event 对象代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。 事件通常与函数结合使用，函数不会在事件发生前被执行！ 事件句柄 (Event Handlers)HTML 4.0 的新特性之一是能够使 HTML 事件触发浏览器中的行为，比如当用户点击某个 HTML 元素时启动一段 JavaScript。下面是一个属性列表，可将之插入 HTML 标签以定义事件的行为。 | 属性 | 此事件发生在何时… || —————————————- | —————— || onabort | 图像的加载被中断。 || onblur | 元素失去焦点。 || onchange | 域的内容被改变。 || onclick | 当用户点击某个对象时调用的事件句柄。 || ondblclick | 当用户双击某个对象时调用的事件句柄。 || onerror | 在加载文档或图像时发生错误。 || onfocus | 元素获得焦点。 || onkeydown | 某个键盘按键被按下。 || onkeypress | 某个键盘按键被按下并松开。 || onkeyup | 某个键盘按键被松开。 || onload | 一张页面或一幅图像完成加载。 || onmousedown | 鼠标按钮被按下。 || onmousemove | 鼠标被移动。 || onmouseout | 鼠标从某元素移开。 || onmouseover | 鼠标移到某元素之上。 || onmouseup | 鼠标按键被松开。 || onreset | 重置按钮被点击。 || onresize | 窗口或框架被重新调整大小。 || onselect | 文本被选中。 || onsubmit | 确认按钮被点击。 || onunload | 用户退出页面。 | 鼠标 / 键盘属性| 属性 | 描述 || —————————————- | ————————- || altKey | 返回当事件被触发时，”ALT” 是否被按下。 || button | 返回当事件被触发时，哪个鼠标按钮被点击。 || clientX | 返回当事件被触发时，鼠标指针的水平坐标。 || clientY | 返回当事件被触发时，鼠标指针的垂直坐标。 || ctrlKey | 返回当事件被触发时，”CTRL” 键是否被按下。 || metaKey | 返回当事件被触发时，”meta” 键是否被按下。 || relatedTarget | 返回与事件的目标节点相关的节点。 || screenX | 返回当某个事件被触发时，鼠标指针的水平坐标。 || screenY | 返回当某个事件被触发时，鼠标指针的垂直坐标。 || shiftKey | 返回当事件被触发时，”SHIFT” 键是否被按下。 | IE 属性除了上面的鼠标/事件属性，IE 浏览器还支持下面的属性： | 属性 | 描述 || ————— | —————————————- || cancelBubble | 如果事件句柄想阻止事件传播到包容对象，必须把该属性设为 true。 || fromElement | 对于 mouseover 和 mouseout 事件，fromElement 引用移出鼠标的元素。 || keyCode | 对于 keypress 事件，该属性声明了被敲击的键生成的 Unicode 字符码。对于 keydown 和 keyup 事件，它指定了被敲击的键的虚拟键盘码。虚拟键盘码可能和使用的键盘的布局相关。 || offsetX,offsetY | 发生事件的地点在事件源元素的坐标系统中的 x 坐标和 y 坐标。 || returnValue | 如果设置了该属性，它的值比事件句柄的返回值优先级高。把这个属性设置为 fasle，可以取消发生事件的源元素的默认动作。 || srcElement | 对于生成事件的 Window 对象、Document 对象或 Element 对象的引用。 || toElement | 对于 mouseover 和 mouseout 事件，该属性引用移入鼠标的元素。 || x,y | 事件发生的位置的 x 坐标和 y 坐标，它们相对于用CSS动态定位的最内层包容元素。 | ​","categories":[],"tags":[]},{"title":"","slug":"JavaScript/html复习","date":"2017-11-19T11:48:56.000Z","updated":"2017-11-19T11:48:56.000Z","comments":true,"path":"2017/11/19/JavaScript/html复习/","link":"","permalink":"http://io.stelawliet.top/2017/11/19/JavaScript/html复习/","excerpt":"","text":"html复习 &lt;a&gt; target 1234567891011&lt;html&gt; &lt;head&gt; &lt;!--html注释--&gt; &lt;title&gt;this is a title&lt;/title&gt; &lt;meta http-equiv=\"content-type\"content=\"text/html;charset=utf-8\"/&gt; &lt;/head&gt; &lt;a name=\"top\"&gt;&lt;/a&gt; &lt;!-- --&gt; &lt;a href=\"o3.html#top\" target=\"_blank\"&gt;top&lt;/a&gt;&amp;nbsp; &lt;/html&gt; &lt;img&gt; alt &lt;frame&gt; cosl rowl &lt;link href=&quot;01.css&quot; rel=&quot;stylesheet&quot;/&gt; 引入css文件 盒子模型重新 norepeat","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/day22test","date":"2017-11-14T11:39:35.000Z","updated":"2017-11-14T11:39:35.000Z","comments":true,"path":"2017/11/14/Java/JavaEE/day22test/","link":"","permalink":"http://io.stelawliet.top/2017/11/14/Java/JavaEE/day22test/","excerpt":"","text":"day22 body { font-family: Helvetica, arial, sans-serif; font-size: 14px; line-height: 1.6; padding-top: 10px; padding-bottom: 10px; background-color: white; padding: 30px; } body > *:first-child { margin-top: 0 !important; } body > *:last-child { margin-bottom: 0 !important; } a { color: #4183C4; } a.absent { color: #cc0000; } a.anchor { display: block; padding-left: 30px; margin-left: -30px; cursor: pointer; position: absolute; top: 0; left: 0; bottom: 0; } h1, h2, h3, h4, h5, h6 { margin: 20px 0 10px; padding: 0; font-weight: bold; -webkit-font-smoothing: antialiased; cursor: text; position: relative; } h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center; text-decoration: none; } h1 tt, h1 code { font-size: inherit; } h2 tt, h2 code { font-size: inherit; } h3 tt, h3 code { font-size: inherit; } h4 tt, h4 code { font-size: inherit; } h5 tt, h5 code { font-size: inherit; } h6 tt, h6 code { font-size: inherit; } h1 { font-size: 28px; color: black; } h2 { font-size: 24px; border-bottom: 1px solid #cccccc; color: black; } h3 { font-size: 18px; } h4 { font-size: 16px; } h5 { font-size: 14px; } h6 { color: #777777; font-size: 14px; } p, blockquote, ul, ol, dl, li, table, pre { margin: 15px 0; } hr { background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0; border: 0 none; color: #cccccc; height: 4px; padding: 0; } body > h2:first-child { margin-top: 0; padding-top: 0; } body > h1:first-child { margin-top: 0; padding-top: 0; } body > h1:first-child + h2 { margin-top: 0; padding-top: 0; } body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0; padding-top: 0; } a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0; padding-top: 0; } h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0; } li p.first { display: inline-block; } li { margin: 0; } ul, ol { padding-left: 30px; } ul :first-child, ol :first-child { margin-top: 0; } dl { padding: 0; } dl dt { font-size: 14px; font-weight: bold; font-style: italic; padding: 0; margin: 15px 0 5px; } dl dt:first-child { padding: 0; } dl dt > :first-child { margin-top: 0; } dl dt > :last-child { margin-bottom: 0; } dl dd { margin: 0 0 15px; padding: 0 15px; } dl dd > :first-child { margin-top: 0; } dl dd > :last-child { margin-bottom: 0; } blockquote { border-left: 4px solid #dddddd; padding: 0 15px; color: #777777; } blockquote > :first-child { margin-top: 0; } blockquote > :last-child { margin-bottom: 0; } table { padding: 0;border-collapse: collapse; } table tr { border-top: 1px solid #cccccc; background-color: white; margin: 0; padding: 0; } table tr:nth-child(2n) { background-color: #f8f8f8; } table tr th { font-weight: bold; border: 1px solid #cccccc; margin: 0; padding: 6px 13px; } table tr td { border: 1px solid #cccccc; margin: 0; padding: 6px 13px; } table tr th :first-child, table tr td :first-child { margin-top: 0; } table tr th :last-child, table tr td :last-child { margin-bottom: 0; } img { max-width: 100%; } span.frame { display: block; overflow: hidden; } span.frame > span { border: 1px solid #dddddd; display: block; float: left; overflow: hidden; margin: 13px 0 0; padding: 7px; width: auto; } span.frame span img { display: block; float: left; } span.frame span span { clear: both; color: #333333; display: block; padding: 5px 0 0; } span.align-center { display: block; overflow: hidden; clear: both; } span.align-center > span { display: block; overflow: hidden; margin: 13px auto 0; text-align: center; } span.align-center span img { margin: 0 auto; text-align: center; } span.align-right { display: block; overflow: hidden; clear: both; } span.align-right > span { display: block; overflow: hidden; margin: 13px 0 0; text-align: right; } span.align-right span img { margin: 0; text-align: right; } span.float-left { display: block; margin-right: 13px; overflow: hidden; float: left; } span.float-left span { margin: 13px 0 0; } span.float-right { display: block; margin-left: 13px; overflow: hidden; float: right; } span.float-right > span { display: block; overflow: hidden; margin: 13px auto 0; text-align: right; } code, tt { margin: 0 2px; padding: 0 5px; white-space: nowrap; border: 1px solid #eaeaea; background-color: #f8f8f8; border-radius: 3px; } pre code { margin: 0; padding: 0; white-space: pre; border: none; background: transparent; } .highlight pre { background-color: #f8f8f8; border: 1px solid #cccccc; font-size: 13px; line-height: 19px; overflow: auto; padding: 6px 10px; border-radius: 3px; } pre { background-color: #f8f8f8; border: 1px solid #cccccc; font-size: 13px; line-height: 19px; overflow: auto; padding: 6px 10px; border-radius: 3px; } pre code, pre tt { background-color: transparent; border: none; } sup { font-size: 0.83em; vertical-align: super; line-height: 0; } kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: #555; vertical-align: middle; background-color: #fcfcfc; border: solid 1px #ccc; border-bottom-color: #bbb; border-radius: 3px; box-shadow: inset 0 -1px 0 #bbb } * { -webkit-print-color-adjust: exact; } @media screen and (min-width: 914px) { body { width: 854px; margin:0 auto; } } @media print { table, pre { page-break-inside: avoid; } pre { word-wrap: break-word; } } /** * prism.js tomorrow night eighties for JavaScript, CoffeeScript, CSS and HTML * Based on https://github.com/chriskempson/tomorrow-theme * @author Rose Pritchard */ code[class*=\"language-\"], pre[class*=\"language-\"] { color: #ccc; background: none; font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; word-wrap: normal; line-height: 1.5; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4; -webkit-hyphens: none; -moz-hyphens: none; -ms-hyphens: none; hyphens: none; } /* Code blocks */ pre[class*=\"language-\"] { padding: 1em; margin: .5em 0; overflow: auto; } :not(pre) > code[class*=\"language-\"], pre[class*=\"language-\"] { background: #2d2d2d; } /* Inline code */ :not(pre) > code[class*=\"language-\"] { padding: .1em; border-radius: .3em; white-space: normal; } .token.comment, .token.block-comment, .token.prolog, .token.doctype, .token.cdata { color: #999; } .token.punctuation { color: #ccc; } .token.tag, .token.attr-name, .token.namespace, .token.deleted { color: #e2777a; } .token.function-name { color: #6196cc; } .token.boolean, .token.number, .token.function { color: #f08d49; } .token.property, .token.class-name, .token.constant, .token.symbol { color: #f8c555; } .token.selector, .token.important, .token.atrule, .token.keyword, .token.builtin { color: #cc99cd; } .token.string, .token.char, .token.attr-value, .token.regex, .token.variable { color: #7ec699; } .token.operator, .token.entity, .token.url { color: #67cdcc; } .token.important, .token.bold { font-weight: bold; } .token.italic { font-style: italic; } .token.entity { cursor: help; } .token.inserted { color: green; } 番茄花园 Lawliet L 2 7062 2017-11-14T11:33:00Z 2017-11-14T11:33:00Z 26 3384 19291 番茄花园 160 45 22630 15.0 96 800x600 &lt;![if !supportAnnotations]&gt; &lt;![endif]&gt; day22总结 文件上传概述 &nbsp; 1 文件上传的作用 例如网络硬盘！就是用来上传下载文件的。 在智联招聘上填写一个完整的简历还需要上传照片呢。 &nbsp; 2 文件上传对页面的要求 上传文件的要求比较多，需要记一下： 1.&nbsp;&nbsp;&nbsp;&nbsp; 必须使用表单，而不能是超链接； 2.&nbsp;&nbsp;&nbsp;&nbsp; 表单的method必须是POST，而不能是GET； 3.&nbsp;&nbsp;&nbsp;&nbsp; 表单的enctype必须是multipart/form-data； 4.&nbsp;&nbsp;&nbsp;&nbsp; 在表单中添加file表单字段，即&lt;input type=”file”…/&gt; &nbsp; &lt;form action=&ldquo;${pageContext.request.contextPath }/FileUploadServlet&rdquo; method=&ldquo;post&rdquo; enctype=&ldquo;multipart/form-data&rdquo;&gt; 用户名：&lt;input type=&ldquo;text&rdquo; name=&ldquo;username&rdquo;/&gt;&lt;br/&gt; 文件1：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file1&rdquo;/&gt;&lt;br/&gt; 文件2：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file2&rdquo;/&gt;&lt;br/&gt; &lt;input type=&ldquo;submit&rdquo; value=&ldquo;提交&rdquo;/&gt; &lt;/form&gt; &nbsp; 3 比对文件上传表单和普通文本表单的区别 通过httpWatch查看“文件上传表单”和“普通文本表单”的区别。 l&nbsp; 文件上传表单的enctype=”multipart/form-data”，表示多部件表单数据； l&nbsp; 普通文本表单可以不设置enctype属性： Ø&nbsp; 当method=”post”时，enctype的默认值为application/x-www-form-urlencoded，表示使用url编码正文； Ø&nbsp; 当method=”get”时，enctype的默认值为null，没有正文，所以就不需要enctype了。 &nbsp; 对普通文本表单的测试： &lt;form action=&ldquo;${pageContext.request.contextPath }/FileUploadServlet&rdquo; method=&ldquo;post&rdquo;&gt; 用户名：&lt;input type=&ldquo;text&rdquo; name=&ldquo;username&rdquo;/&gt;&lt;br/&gt; 文件1：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file1&rdquo;/&gt;&lt;br/&gt; 文件2：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file2&rdquo;/&gt;&lt;br/&gt; &lt;input type=&ldquo;submit&rdquo; value=&ldquo;提交&rdquo;/&gt; &lt;/form&gt; &nbsp; &nbsp; 通过httpWatch测试，查看表单的请求数据正文，我们发现请求中只有文件名称，而没有文件内容。也就是说，当表单的enctype不是multipart/form-data时，请求中不包含文件内容，而只有文件的名称，这说明普通文本表单中input:file与input:text没什么区别了。 &nbsp; 对文件上传表单的测试： &lt;form action=&ldquo;${pageContext.request.contextPath }/FileUploadServlet&rdquo; method=&ldquo;post&rdquo; enctype=&ldquo;multipart/form-data&rdquo;&gt; 用户名：&lt;input type=&ldquo;text&rdquo; name=&ldquo;username&rdquo;/&gt;&lt;br/&gt; 文件1：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file1&rdquo;/&gt;&lt;br/&gt; 文件2：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file2&rdquo;/&gt;&lt;br/&gt; &lt;input type=&ldquo;submit&rdquo; value=&ldquo;提交&rdquo;/&gt; &lt;/form&gt; &nbsp; &nbsp; 通过httpWatch测试，查看表单的请求数据正文部分，发现正文部分是由多个部件组成，每个部件对应一个表单字段，每个部件都有自己的头信息。头信息下面是空行，空行下面是字段的正文部分。多个部件之间使用随机生成的分隔线隔开。 文本字段的头信息中只包含一条头信息，即Content-Disposition，这个头信息的值有两个部分，第一部分是固定的，即form-data，第二部分为字段的名称。在空行后面就是正文部分了，正文部分就是在文本框中填写的内容。 文件字段的头信息中包含两条头信息，Content-Disposition和Content-Type。Content-Disposition中多出一个filename，它指定的是上传的文件名称。而Content-Type指定的是上传文件的类型。文件字段的正文部分就是文件的内容。 &nbsp; 请注意，因为我们上传的文件都是普通文本文件，即txt文件，所以在httpWatch中是可以正常显示的，如果上传的是exe、mp3等文件，那么在httpWatch看到的就是乱码了。 &nbsp; 4 文件上传对Servlet的要求 当提交的表单是文件上传表单时，那么对Servlet也是有要求的。 首先我们要肯定一点，文件上传表单的数据也是被封装到request对象中的。 request.getParameter(String)方法获取指定的表单字段字符内容，但文件上传表单已经不在是字符内容，而是字节内容，所以失效。 &nbsp; 这时可以使用request的getInputStream()方法获取ServletInputStream对象，它是InputStream的子类，这个ServletInputStream对象对应整个表单的正文部分（从第一个分隔线开始，到最后），这说明我们需要的解析流中的数据。当然解析它是很麻烦的一件事情，而Apache已经帮我们提供了解析它的工具：commons-fileupload。 &nbsp; 可以尝试把request.getInputStream()这个流中的内容打印出来，再对比httpWatch中的请求数据。 public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { InputStream in = request.getInputStream(); String s = IOUtils.toString(in);[崔1]&nbsp; System.out.println(s); } &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;7ddd3370ab2 Content-Disposition: form-data; name=&ldquo;username&rdquo; &nbsp; hello &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;7ddd3370ab2 Content-Disposition: form-data; name=&ldquo;file1&rdquo;; filename=&ldquo;a.txt&rdquo; Content-Type: text/plain &nbsp; aaa &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;7ddd3370ab2 Content-Disposition: form-data; name=&ldquo;file2&rdquo;; filename=&ldquo;b.txt&rdquo; Content-Type: text/plain &nbsp; bbb &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;7ddd3370ab2&ndash; &nbsp; commons-fileupload &nbsp; 为什么使用fileupload： 上传文件的要求比较多，需要记一下： l&nbsp; 必须是POST表单； l&nbsp; 表单的enctype必须是multipart/form-data； l&nbsp; 在表单中添加file表单字段，即&lt;input type=”file”…/&gt; &nbsp; Servlet的要求： l&nbsp; 不能再使用request.getParameter()来获取表单数据； l&nbsp; 可以使用request.getInputStream()得到所有的表单数据，而不是一个表单项的数据； l&nbsp; 这说明不使用fileupload，我们需要自己来对request.getInputStream()的内容进行解析！！！ &nbsp; &nbsp; 1 fileupload概述 fileupload是由apache的commons组件提供的上传组件。它最主要的工作就是帮我们解析request.getInputStream()。 fileupload组件需要的JAR包有： l&nbsp; commons-fileupload.jar，核心包； l&nbsp; commons-io.jar，依赖包。 &nbsp; 2 fileupload简单应用 fileupload的核心类有：DiskFileItemFactory、ServletFileUpload、FileItem。 使用fileupload组件的步骤如下： 1.&nbsp;&nbsp;&nbsp;&nbsp; 创建工厂类DiskFileItemFactory对象：DiskFileItemFactory factory = new DiskFileItemFactory() 2.&nbsp;&nbsp;&nbsp;&nbsp; 使用工厂创建解析器对象：ServletFileUpload fileUpload = new ServletFileUpload(factory) 3.&nbsp;&nbsp;&nbsp;&nbsp; 使用解析器来解析request对象：List&lt;FileItem&gt; list = fileUpload.parseRequest(request) &nbsp; 隆重介绍FileItem类，它才是我们最终要的结果。一个FileItem对象对应一个表单项（表单字段）。一个表单中存在文件字段和普通字段，可以使用FileItem类的isFormField()方法来判断表单字段是否为普通字段，如果不是普通字段，那么就是文件字段了。 l&nbsp; String getName()：获取文件字段的文件名称； l&nbsp; String getString()：获取字段的内容，如果是文件字段，那么获取的是文件内容，当然上传的文件必须是文本文件； l&nbsp; String getFieldName()：获取字段名称，例如：&lt;input type=”text” name=”username”/&gt;，返回的是username； l&nbsp; String getContentType()：获取上传的文件的类型，例如：text/plain。 l&nbsp; int getSize()：获取上传文件的大小； l&nbsp; boolean isFormField()：判断当前表单字段是否为普通文本字段，如果返回false，说明是文件字段； l&nbsp; InputStream getInputStream()：获取上传文件对应的输入流； l&nbsp; void write(File)：把上传的文件保存到指定文件中。 &nbsp; 3 简单上传示例 写一个简单的上传示例： l&nbsp; 表单包含一个用户名字段，以及一个文件字段； l&nbsp; Servlet保存上传的文件到uploads目录，显示用户名，文件名，文件大小，文件类型。 &nbsp; 第一步： 完成index.jsp，只需要一个表单。注意表单必须是post的，而且enctype必须是mulitpart/form-data的。 &lt;form action=&ldquo;${pageContext.request.contextPath }/FileUploadServlet&rdquo; method=&ldquo;post&rdquo; enctype=&ldquo;multipart/form-data&rdquo;&gt; 用户名：&lt;input type=&ldquo;text&rdquo; name=&ldquo;username&rdquo;/&gt;&lt;br/&gt; 文件1：&lt;input type=&ldquo;file&rdquo; name=&ldquo;file1&rdquo;/&gt;&lt;br/&gt; &lt;input type=&ldquo;submit&rdquo; value=&ldquo;提交&rdquo;/&gt; &lt;/form&gt; &nbsp; 第二步： 完成FileUploadServlet public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // 因为要使用response打印，所以设置其编码 response.setContentType(&ldquo;text/html;charset=utf-8&rdquo;); // 创建工厂 DiskFileItemFactory dfif = new DiskFileItemFactory(); // 使用工厂创建解析器对象 ServletFileUpload fileUpload = new ServletFileUpload(dfif); try { // 使用解析器对象解析request，得到FileItem列表 List&lt;FileItem&gt; list = fileUpload.parseRequest(request); // 遍历所有表单项 for(FileItem fileItem : list) { // 如果当前表单项为普通表单项 if(fileItem.isFormField()) { // 获取当前表单项的字段名称 String fieldName = fileItem.getFieldName(); // 如果当前表单项的字段名为username if(fieldName.equals(&ldquo;username&rdquo;)) { // 打印当前表单项的内容，即用户在username表单项中输入的内容 response.getWriter().print(&ldquo;用户名：&rdquo; + fileItem.getString() + &ldquo;&lt;br/&gt;&rdquo;); } } else {//如果当前表单项不是普通表单项，说明就是文件字段 String name = fileItem.getName();//获取上传文件的名称 // 如果上传的文件名称为空，即没有指定上传文件 if(name == null || name.isEmpty()) { continue; } // 获取真实路径，对应${项目目录}/uploads，当然，这个目录必须存在 String savepath = this.getServletContext().getRealPath(&ldquo;/uploads&rdquo;); // 通过uploads目录和文件名称来创建File对象 File file = new File(savepath, name); // 把上传文件保存到指定位置 fileItem.write(file); // 打印上传文件的名称 response.getWriter().print(&ldquo;上传文件名：&rdquo; + name + &ldquo;&lt;br/&gt;&rdquo;); // 打印上传文件的大小 response.getWriter().print(&ldquo;上传文件大小：&rdquo; + fileItem.getSize() + &ldquo;&lt;br/&gt;&rdquo;); // 打印上传文件的类型 response.getWriter().print(&ldquo;上传文件类型：&rdquo; + fileItem.getContentType() + &ldquo;&lt;br/&gt;&rdquo;); } } } catch (Exception e) { throw new ServletException(e); } } &nbsp; 文件上传之细节 &nbsp; 1 把上传的文件放到WEB-INF目录下 如果没有把用户上传的文件存放到WEB-INF目录下，那么用户就可以通过浏览器直接访问上传的文件，这是非常危险的。 假如说用户上传了一个a.jsp文件，然后用户在通过浏览器去访问这个a.jsp文件，那么就会执行a.jsp中的内容，如果在a.jsp中有如下语句：Runtime.getRuntime().exec(“shutdown –s –t 1”);，那么你就会… &nbsp; 通常我们会在WEB-INF目录下创建一个uploads目录来存放上传的文件，而在Servlet中找到这个目录需要使用ServletContext的getRealPath(String)方法，例如在我的upload1项目中有如下语句： ServletContext servletContext = this.getServletContext(); String savepath = servletContext.getRealPath(“/WEB-INF/uploads”); &nbsp; 其中savepath为：F:\\tomcat6_1\\webapps\\upload1\\WEB-INF\\uploads。 &nbsp; 2 文件名称（完整路径、文件名称） 上传文件名称可能是完整路径： IE6获取的上传文件名称是完整路径，而其他浏览器获取的上传文件名称只是文件名称而已。浏览器差异的问题我们还是需要处理一下的。 String name = file1FileItem.getName(); response.getWriter().print(name); &nbsp; 使用不同浏览器测试，其中IE6就会返回上传文件的完整路径，不知道IE6在搞什么，这给我们带来了很大的麻烦，就是需要处理这一问题。 处理这一问题也很简单，无论是否为完整路径，我们都去截取最后一个“\\”后面的内容就可以了。 String name = file1FileItem.getName(); int lastIndex = name.lastIndexOf(&ldquo;\\&rdquo;);//获取最后一个“\\”的位置 if(lastIndex != -1) {//注意，如果不是完整路径，那么就不会有“\\”的存在。 name = name.substring(lastIndex + 1);//获取文件名称 } response.getWriter().print(name); &nbsp; 3 中文乱码问题 上传文件名称中包含中文： 当上传的谁的名称中包含中文时，需要设置编码，commons-fileupload组件为我们提供了两种设置编码的方式： l&nbsp; request.setCharacterEncoding(String)：这种方式是我们最为熟悉的方式了； l&nbsp; fileUpload.setHeaderEncdoing(String)：这种方式的优先级高与前一种。 &nbsp; 上传文件的文件内容包含中文： 通常我们不需关心上传文件的内容，因为我们会把上传文件保存到硬盘上！也就是说，文件原来是什么样子，到服务器这边还是什么样子！ 但是如果你有这样的需求，非要在控制台显示上传的文件内容，那么你可以使用fileItem.getString(“utf-8”)来处理编码。 文本文件内容和普通表单项内容使用FileItem类的getString(“utf-8”)来处理编码。 &nbsp; 4 上传文件同名问题（文件重命名） 通常我们会把用户上传的文件保存到uploads目录下，但如果用户上传了同名文件呢？这会出现覆盖的现象。处理这一问题的手段是使用UUID生成唯一名称，然后再使用“_”连接文件上传的原始名称。 例如用户上传的文件是“我的一寸照片.jpg”，在通过处理后，文件名称为：“891b3881395f4175b969256a3f7b6e10_我的一寸照片.jpg”，这种手段不会使文件丢失扩展名，并且因为UUID的唯一性，上传的文件同名，但在服务器端是不会出现同名问题的。 &nbsp; public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&ldquo;utf-8&rdquo;); DiskFileItemFactory dfif = new DiskFileItemFactory(); ServletFileUpload fileUpload = new ServletFileUpload(dfif); try { List&lt;FileItem&gt; list = fileUpload.parseRequest(request); //获取第二个表单项，因为第一个表单项是username，第二个才是file表单项 FileItem fileItem = list.get(1); String name = fileItem.getName();//获取文件名称 // 如果客户端使用的是IE6，那么需要从完整路径中获取文件名称 int lastIndex = name.lastIndexOf(&ldquo;\\&rdquo;); if(lastIndex != -1) { name = name.substring(lastIndex + 1); } // 获取上传文件的保存目录 String savepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads&rdquo;); String uuid = CommonUtils.uuid();//生成uuid String filename = uuid + &ldquo;_&rdquo; + name;//新的文件名称为uuid + 下划线 + 原始名称 //创建file对象，下面会把上传文件保存到这个file指定的路径 //savepath，即上传文件的保存目录 //filename，文件名称 File file = new File(savepath, filename); // 保存文件 fileItem.write(file); } catch (Exception e) { throw new ServletException(e); } } &nbsp; 5 一个目录不能存放过多的文件（存放目录打散） 一个目录下不应该存放过多的文件，一般一个目录存放1000个文件就是上限了，如果在多，那么打开目录时就会很“卡”。你可以尝试打印C:\\WINDOWS\\system32目录，你会感觉到的。 也就是说，我们需要把上传的文件放到不同的目录中。但是也不能为每个上传的文件一个目录，这种方式会导致目录过多。所以我们应该采用某种算法来“打散”！ 打散的方法有很多，例如使用日期来打散，每天生成一个目录。也可以使用文件名的首字母来生成目录，相同首字母的文件放到同一目录下。 日期打散算法：如果某一天上传的文件过多，那么也会出现一个目录文件过多的情况； 首字母打散算法：如果文件名是中文的，因为中文过多，所以会导致目录过多的现象。 &nbsp; 我们这里使用hash算法来打散： 1.&nbsp;&nbsp;&nbsp;&nbsp; 获取文件名称的hashCode：int hCode = name.hashCode();； 2.&nbsp;&nbsp;&nbsp;&nbsp; 获取hCode的低4位，然后转换成16进制字符； 3.&nbsp;&nbsp;&nbsp;&nbsp; 获取hCode的5~8位，然后转换成16进制字符； 4.&nbsp;&nbsp;&nbsp;&nbsp; 使用这两个16进制的字符生成目录链。例如低4位字符为“5” &nbsp; 这种算法的好处是，在uploads目录下最多生成16个目录，而每个目录下最多再生成16个目录，即256个目录，所有上传的文件都放到这256个目录下。如果每个目录上限为1000个文件，那么一共可以保存256000个文件。 &nbsp; 例如上传文件名称为：新建 文本文档.txt，那么把“新建 文本文档.txt”的哈希码获取到，再获取哈希码的低4位，和5~8位。假如低4位为：9，5~8位为1，那么文件的保存路径为uploads/9/1/。 &nbsp; int hCode = name.hashCode();//获取文件名的hashCode //获取hCode的低4位，并转换成16进制字符串 String dir1 = Integer.toHexString(hCode &amp; 0xF); //获取hCode的低5~8位，并转换成16进制字符串 String dir2 = Integer.toHexString(hCode &gt;&gt;&gt; 4 &amp; 0xF); //与文件保存目录连接成完整路径 savepath = savepath + &ldquo;/&rdquo; + dir1 + &ldquo;/&rdquo; + dir2; //因为这个路径可能不存在，所以创建成File对象，再创建目录链，确保目录在保存文件之前已经存在 new File(savepath).mkdirs(); &nbsp; 6 上传的单个文件的大小限制 限制上传文件的大小很简单，ServletFileUpload类的setFileSizeMax(long)就可以了。参数就是上传文件的上限字节数，例如servletFileUpload.setFileSizeMax(1024*10)表示上限为10KB。 一旦上传的文件超出了上限，那么就会抛出FileUploadBase.FileSizeLimitExceededException异常。我们可以在Servlet中获取这个异常，然后向页面输出“上传的文件超出限制”。 public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&ldquo;utf-8&rdquo;); DiskFileItemFactory dfif = new DiskFileItemFactory(); ServletFileUpload fileUpload = new ServletFileUpload(dfif); // 设置上传的单个文件的上限为10KB fileUpload.setFileSizeMax(1024 * 10);[崔2]&nbsp; try { List&lt;FileItem&gt; list = fileUpload.parseRequest(request); //获取第二个表单项，因为第一个表单项是username，第二个才是file表单项 FileItem fileItem = list.get(1); String name = fileItem.getName();//获取文件名称 // 如果客户端使用的是IE6，那么需要从完整路径中获取文件名称 int lastIndex = name.lastIndexOf(&ldquo;\\&rdquo;); if(lastIndex != -1) { name = name.substring(lastIndex + 1); } // 获取上传文件的保存目录 String savepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads&rdquo;); String uuid = CommonUtils.uuid();//生成uuid String filename = uuid + &ldquo;_&rdquo; + name;//新的文件名称为uuid + 下划线 + 原始名称 int hCode = name.hashCode();//获取文件名的hashCode //获取hCode的低4位，并转换成16进制字符串 String dir1 = Integer.toHexString(hCode &amp; 0xF); //获取hCode的低5~8位，并转换成16进制字符串 String dir2 = Integer.toHexString(hCode &gt;&gt;&gt; 4 &amp; 0xF); //与文件保存目录连接成完整路径 savepath = savepath + &ldquo;/&rdquo; + dir1 + &ldquo;/&rdquo; + dir2; //因为这个路径可能不存在，所以创建成File对象，再创建目录链，确保目录在保存文件之前已经存在 new File(savepath).mkdirs(); //创建file对象，下面会把上传文件保存到这个file指定的路径 //savepath，即上传文件的保存目录 //filename，文件名称 File file = new File(savepath, filename); // 保存文件 fileItem.write(file); } catch (Exception e) { // 判断抛出的异常的类型是否为FileUploadBase.FileSizeLimitExceededException // 如果是，说明上传文件时超出了限制。 if(e instanceof FileUploadBase.FileSizeLimitExceededException) { // 在request中保存错误信息 request.setAttribute(&ldquo;msg&rdquo;, &ldquo;上传失败！上传的文件超出了10KB！&rdquo;); // 转发到index.jsp页面中！在index.jsp页面中需要使用${msg}来显示错误信息 request.getRequestDispatcher(&ldquo;/index.jsp&rdquo;).forward(request, response); return; } [崔3]&nbsp; throw new ServletException(e); } } &nbsp; 7 上传文件的总大小限制 上传文件的表单中可能允许上传多个文件，例如： &nbsp; 有时我们需要限制一个请求的大小。也就是说这个请求的最大字节数（所有表单项之和）！实现这一功能也很简单，只需要调用ServletFileUpload类的setSizeMax(long)方法即可。 例如fileUpload.setSizeMax(1024 * 10);，显示整个请求的上限为10KB。当请求大小超出10KB时，ServletFileUpload类的parseRequest()方法会抛出FileUploadBase.SizeLimitExceededException异常。 &nbsp; 8 缓存大小与临时目录 大家想一想，如果我上传一个蓝光电影，先把电影保存到内存中，然后再通过内存copy到服务器硬盘上，那么你的内存能吃的消么？ 所以fileupload组件不可能把文件都保存在内存中，fileupload会判断文件大小是否超出10KB，如果是那么就把文件保存到硬盘上，如果没有超出，那么就保存在内存中。 10KB是fileupload默认的值，我们可以来设置它。 当文件保存到硬盘时，fileupload是把文件保存到系统临时目录，当然你也可以去设置临时目录。 public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&ldquo;utf-8&rdquo;); DiskFileItemFactory dfif = new DiskFileItemFactory(1024*20, new File(&ldquo;F:\\temp&rdquo;));[崔4]&nbsp; ServletFileUpload fileUpload = new ServletFileUpload(dfif); try { List&lt;FileItem&gt; list = fileUpload.parseRequest(request); FileItem fileItem = list.get(1); String name = fileItem.getName(); String savepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads&rdquo;); // 保存文件 fileItem.write(path(savepath, name)); } catch (Exception e) { throw new ServletException(e); } } private File path[崔5]&nbsp;(String savepath, String filename) { // 从完整路径中获取文件名称 int lastIndex = filename.lastIndexOf(&ldquo;\\&rdquo;); if(lastIndex != -1) { filename = filename.substring(lastIndex + 1); } // 通过文件名称生成一级、二级目录 int hCode = filename.hashCode(); String dir1 = Integer.toHexString(hCode &amp; 0xF); String dir2 = Integer.toHexString(hCode &gt;&gt;&gt; 4 &amp; 0xF); savepath = savepath + &ldquo;/&rdquo; + dir1 + &ldquo;/&rdquo; + dir2; // 创建目录 new File(savepath).mkdirs(); // 给文件名称添加uuid前缀 String uuid = CommonUtils.uuid(); filename = uuid + &ldquo;_&rdquo; + filename; // 创建文件完成路径 return new File(savepath, filename); } &nbsp; 文件下载 &nbsp; 2 通过Servlet下载1 被下载的资源必须放到WEB-INF目录下（只要用户不能通过浏览器直接访问就OK），然后通过Servlet完成下载。 在jsp页面中给出超链接，链接到DownloadServlet，并提供要下载的文件名称。然后DownloadServlet获取文件的真实路径，然后把文件写入到response.getOutputStream()流中。 &nbsp; download.jsp &lt;body&gt; This is my JSP page. &lt;br&gt; &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=a.avi&rsquo;/&gt;&rdquo;&gt;a.avi&lt;/a&gt;&lt;br/&gt; &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=a.jpg&rsquo;/&gt;&rdquo;&gt;a.jpg&lt;/a&gt;&lt;br/&gt; &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=a.txt&rsquo;/&gt;&rdquo;&gt;a.txt&lt;/a&gt;&lt;br/&gt; &lt;/body&gt; &nbsp; DownloadServlet.java public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { String filename = request.getParameter(&ldquo;path&rdquo;);[崔6]&nbsp; String filepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads/&rdquo; + filename);[崔7]&nbsp; File file = new File(filepath); if(!file.exists()) { response.getWriter().print(&ldquo;您要下载的文件不存在！&rdquo;); return; }[崔8]&nbsp; IOUtils.copy(new FileInputStream(file), response.getOutputStream());[崔9]&nbsp; } &nbsp; 上面代码有如下问题： l&nbsp; 可以下载a.avi，但在下载框中的文件名称是DownloadServlet； l&nbsp; 不能下载a.jpg和a.txt，而是在页面中显示它们。 &nbsp; &nbsp; 3 通过Servlet下载2 下面来处理上一例中的问题，让下载框中可以显示正确的文件名称，以及可以下载a.jpg和a.txt文件。 通过添加content-disposition头来处理上面问题。当设置了content-disposition头后，浏览器就会弹出下载框。 而且还可以通过content-disposition头来指定下载文件的名称！ &nbsp; String filename = request.getParameter(&ldquo;path&rdquo;); String filepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads/&rdquo; + filename); File file = new File(filepath); if(!file.exists()) { response.getWriter().print(&ldquo;您要下载的文件不存在！&rdquo;); return; } response.addHeader(&ldquo;content-disposition&rdquo;, &ldquo;attachment;filename=&rdquo; + filename);[崔10]&nbsp; IOUtils.copy(new FileInputStream(file), response.getOutputStream()); &nbsp; &nbsp; 虽然上面的代码已经可以处理txt和jpg等文件的下载问题，并且也处理了在下载框中显示文件名称的问题，但是如果下载的文件名称是中文的，那么还是不行的。 &nbsp; 3 通过Servlet下载3 下面是处理在下载框中显示中文的问题！ 其实这一问题很简单，只需要通过URL来编码中文即可！ &nbsp; download.jsp &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=这个杀手不太冷.avi&rsquo;/&gt;&rdquo;&gt;这个杀手不太冷.avi&lt;/a&gt;&lt;br/&gt; &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=白冰.jpg&rsquo;/&gt;&rdquo;&gt;白冰.jpg&lt;/a&gt;&lt;br/&gt; &lt;a href=&ldquo;&lt;c:url value=&lsquo;/DownloadServlet?path=说明文档.txt&rsquo;/&gt;&rdquo;&gt;说明文档.txt&lt;/a&gt;&lt;br/&gt; &nbsp; DownloadServlet.java String filename = request.getParameter(&ldquo;path&rdquo;); // GET请求中，参数中包含中文需要自己动手来转换。 // 当然如果你使用了“全局编码过滤器”，那么这里就不用处理了 filename = new String(filename.getBytes(&ldquo;ISO-8859-1&rdquo;), &ldquo;UTF-8&rdquo;); String filepath = this.getServletContext().getRealPath(&ldquo;/WEB-INF/uploads/&rdquo; + filename); File file = new File(filepath); if(!file.exists()) { response.getWriter().print(&ldquo;您要下载的文件不存在！&rdquo;); return; } // 所有浏览器都会使用本地编码，即中文操作系统使用GBK // 浏览器收到这个文件名后，会使用iso-8859-1来解码 filename = new String(filename.getBytes(&ldquo;GBK&rdquo;), &ldquo;ISO-8859-1&rdquo;); response.addHeader(&ldquo;content-disposition&rdquo;, &ldquo;attachment;filename=&rdquo; + filename); IOUtils.copy(new FileInputStream(file), response.getOutputStream()); &nbsp; JavaMail 今日内容 l&nbsp; 邮件协议 l&nbsp; telnet访问邮件服务器 l&nbsp; JavaMail &nbsp; 邮件协议 &nbsp; 1 收发邮件 发邮件大家都会吧！发邮件是从客户端把邮件发送到邮件服务器，收邮件是把邮件服务器的邮件下载到客户端。 我们在163、126、QQ、sohu、sina等网站注册的Email账户，其实就是在邮件服务器中注册的。这些网站都有自己的邮件服务器。 &nbsp; 2 邮件协议概述 与HTTP协议相同，收发邮件也是需要有传输协议的。 l&nbsp; SMTP：（Simple Mail Transfer Protocol，简单邮件传输协议）发邮件协议； l&nbsp; POP3：（Post Office Protocol Version 3，邮局协议第3版）收邮件协议； l&nbsp; IMAP：（Internet Message Access Protocol，因特网消息访问协议）收发邮件协议，我们的课程不涉及该协议。 &nbsp; 3 理解邮件收发过程 其实你可以把邮件服务器理解为邮局！如果你需要给朋友寄一封信，那么你需要把信放到邮筒中，这样你的信会“自动”到达邮局，邮局会把信邮到另一个省市的邮局中。然后这封信会被送到收信人的邮箱中。最终收信人需要自己经常查看邮箱是否有新的信件。 其实每个邮件服务器都由SMTP服务器和POP3服务器构成，其中SMTP服务器负责发邮件的请求，而POP3负责收邮件的请求。 &nbsp; 当然，有时我们也会使用163的账号，向126的账号发送邮件。这时邮件是发送到126的邮件服务器，而对于163的邮件服务器是不会存储这封邮件的。 &nbsp; 4 邮件服务器名称 smtp服务器的端口号为25，服务器名称为smtp.xxx.xxx。 pop3服务器的端口号为110，服务器名称为pop3.xxx.xxx。 例如： l&nbsp; 163：smtp.163.com和pop3.163.com； l&nbsp; 126：smtp.126.com和pop3.126.com； l&nbsp; qq：smtp.qq.com和pop3.qq.com； l&nbsp; sohu：smtp.sohu.com和pop3.sohu.com； l&nbsp; sina：smtp.sina.com和pop3.sina.com。 &nbsp; telnet收发邮件 &nbsp; 1 BASE64加密 BASE64是一种加密算法，这种加密方式是可逆的！它的作用是使加密后的文本无法用肉眼识别。Java提供了sun.misc.BASE64Encoder这个类，用来对做Base64的加密和解密，但我们知道，使用sun包下的东西会有警告！甚至在eclipse中根本使用不了这个类（需要设置），所以我们还是听sun公司的话，不要去使用它内部使用的类，我们去使用apache commons组件中的codec包下的Base64这个类来完成BASE64加密和解密。 package cn.itcast; &nbsp; import org.apache.commons.codec.binary.Base64; &nbsp; public class Base64Utils { public static String encode(String s) { return encode(s, &ldquo;utf-8&rdquo;); } public static String decode(String s) { return decode(s, &ldquo;utf-8&rdquo;); } public static String encode(String s, String charset) { try { byte[] bytes = s.getBytes(charset); bytes = Base64.encodeBase64(bytes); return new String(bytes, charset); } catch (Exception e) { throw new RuntimeException(e); } } &nbsp; public static String decode(String s, String charset) { try { byte[] bytes = s.getBytes(charset); bytes = Base64.decodeBase64(bytes); return new String(bytes, charset); } catch (Exception e) { throw new RuntimeException(e); } } } &nbsp; 2 telnet发邮件 连接163的smtp服务器：； 连接成功后需要如下步骤才能发送邮件： 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 与服务器打招呼：ehlo你的名字 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发出登录请求：auth login 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入加密后的邮箱名：(itcast_cxf@163.com)aXRjYXN0X2N4ZkAxNjMuY29t 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入加密后的邮箱密码：(itcast)aXRjYXN0 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入谁来发送邮件，即from：mail from:&lt;itcast_cxf@163.com&gt; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入把邮件发给谁，即to：rcpt to:&lt;itcast_cxf@126.com&gt; 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发送填写数据请求：data 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 开始输入数据，数据包含：from、to、subject，以及邮件内容，如果输入结束后，以一个“.”为一行，表示输入结束： from:&lt;zhangBoZhi@163.com&gt; to:&lt;itcast_cxf@sina.com&gt; subject: 我爱上你了 &nbsp; 我已经深深的爱上你了，我是张柏芝。 . 注意，在标题和邮件正文之间要有一个空行！当要退出时，一定要以一个“.”为单行，表示输入结束。 9 最后一步：quit &nbsp; telnet收邮件 &nbsp; 1 telnet收邮件的步骤 pop3无需使用Base64加密！！！ &nbsp; 收邮件连接的服务器是pop3.xxx.com，pop3协议的默认端口号是110。请注意！这与发邮件完全不同。如果你在163有邮箱账户，那么你想使用telnet收邮件，需要连接的服务器是pop3.163.com。 l&nbsp; 连接pop3服务器：telnet pop3.163.com 110 l&nbsp; user命令：user 用户名，例如：user itcast_cxf@163.com； l&nbsp; pass命令：pass 密码，例如：pass itcast； l&nbsp; stat命令：stat命令用来查看邮箱中邮件的个数，所有邮件所占的空间； l&nbsp; list命令：list命令用来查看所有邮件，或指定邮件的状态，例如：list 1是查看第一封邮件的大小，list是查看邮件列表，即列出所有邮件的编号，及大小； l&nbsp; retr命令：查看指定邮件的内容，例如：retr 1#是查看第一封邮件的内容； l&nbsp; dele命令：标记某邮件为删除，但不是马上删除，而是在退出时才会真正删除； l&nbsp; quit命令：退出！如果在退出之前已经使用dele命令标记了某些邮件，那么会在退出是删除它们。 &nbsp; &nbsp; &nbsp; &nbsp; JavaMail &nbsp; 1 JavaMail概述 Java Mail是由SUN公司提供的专门针对邮件的API，主要Jar包：mail.jar、activation.jar。 在使用MyEclipse创建web项目时，需要小心！如果只是在web项目中使用java mail是没有什么问题的，发布到Tomcat上运行一点问题都没有！ 但是如果是在web项目中写测试那就出问题了。 在MyEclipse中，会自动给web项目导入javax.mail包中的类，但是不全（其实是只有接口，而没有接口的实现类），所以只靠MyEclipse中的类是不能运行java mail项目的，但是如果这时你再去自行导入mail.jar时，就会出现冲突。 处理方案：到下面路径中找到javaee.jar文件，把javax.mail删除！！！ D:\\Program Files\\MyEclipse\\Common\\plugins\\com.genuitec.eclipse.j2eedt.core_10.0.0.me201110301321\\data\\libraryset\\EE_5 &nbsp; 2 JavaMail中主要类 java mail中主要类：javax.mail.Session、javax.mail.internet.MimeMessage、javax.mail.Transport。 Session：表示会话，即客户端与邮件服务器之间的会话！想获得会话需要给出账户和密码，当然还要给出服务器名称。在邮件服务中的Session对象，就相当于连接数据库时的Connection对象。 MimeMessage：表示邮件类，它是Message的子类。它包含邮件的主题（标题）、内容，收件人地址、发件人地址，还可以设置抄送和暗送，甚至还可以设置附件。 Transport：用来发送邮件。它是发送器！ &nbsp; 3 JavaMail之Hello World 在使用telnet发邮件时，还需要自己来处理Base64编码的问题，但使用JavaMail就不必理会这些问题了，都由JavaMail来处理。 第一步：获得Session Session session = Session.getInstance(Properties prop, Authenticator auth); 其中prop需要指定两个键值，一个是指定服务器主机名，另一个是指定是否需要认证！我们当然需要认证！ Properties prop = new Properties(); prop.setProperty(“mail.host”, “smtp.163.com”);//设置服务器主机名 prop.setProperty(“mail.smtp.auth”, “true”);//设置需要认证 &nbsp; 其中Authenticator是一个接口表示认证器，即校验客户端的身份。我们需要自己来实现这个接口，实现这个接口需要使用账户和密码。 Authenticator auth = new Authenticator() { public PasswordAuthentication getPasswordAuthentication () { new PasswordAuthentication(“itcast_cxf”, “itcast”);//用户名和密码 } }; 通过上面的准备，现在可以获取得Session对象了： Session session = Session.getInstance(prop, auth); &nbsp; 第二步：创建MimeMessage对象 创建MimeMessage需要使用Session对象来创建： MimeMessage msg = new MimeMessage(session); 然后需要设置发信人地址、收信人地址、主题，以及邮件正文。 msg.setFrom(new InternetAddress(“itcast_cxf@163.com”));//设置发信人 msg.addRecipients(RecipientType.TO, “itcast_cxf@qq.com,itcast_cxf@sina.com”);//设置多个收信人 msg.addRecipients(RecipientType.CC, “itcast_cxf@sohu.com,itcast_cxf@126.com”);//设置多个抄送 msg.addRecipients(RecipientType.BCC, ”itcast_cxf@hotmail.com”);//设置暗送 msg.setSubject(“这是一封测试邮件”);//设置主题（标题） msg.setContent(“当然是hello world!”, “text/plain;charset=utf-8”);//设置正文 &nbsp; 第三步：发送邮件 Transport.send(msg);//发送邮件 &nbsp; 4 JavaMail发送带有附件的邮件（了解） 一封邮件可以包含正文、附件N个，所以正文与N个附件都是邮件的一个部份。 上面的hello world案例中，只是发送了带有正文的邮件！所以在调用setContent()方法时直接设置了正文，如果想发送带有附件邮件，那么需要设置邮件的内容为MimeMultiPart。 MimeMulitpart parts = new MimeMulitpart();//多部件对象，可以理解为是部件的集合 msg.setContent(parts);//设置邮件的内容为多部件内容。 然后我们需要把正文、N个附件创建为“主体部件”对象（MimeBodyPart），添加到MimeMuiltPart中即可。 MimeBodyPart part1 = new MimeBodyPart();//创建一个部件 part1.setCotnent(“这是正文部分”, “text/html;charset=utf-8”);//给部件设置内容 parts.addBodyPart(part1);//把部件添加到部件集中。 &nbsp; 下面我们创建一个附件： MimeBodyPart part2 = new MimeBodyPart();//创建一个部件 part2.attachFile(“F:\\a.jpg”);//设置附件 part2.setFileName(“hello.jpg”);//设置附件名称 parts.addBodyPart(part2);//把附件添加到部件集中 &nbsp; 注意，如果在设置文件名称时，文件名称中包含了中文的话，那么需要使用MimeUitlity类来给中文编码： part2.setFileName(MimeUitlity.encodeText(“美女.jpg”)); &nbsp; &nbsp; &nbsp;[崔1]使用apache的commons的io组件，把流中的数据读取出来转换成字符串 &lt;![endif]&gt; &nbsp;[崔2]设置单个上传文件的上限为10KB，超出10KB，fileUploadRequest()方法就会抛出异常。 这条代码一定要在fileUploadRequest()方法之前调用。 &lt;![endif]&gt; &nbsp;[崔3]当抛出异常后，判断异常类型，如果是超出了文件大小限制，那么就转发到index.jsp页面显示错误信息。 &lt;![endif]&gt; &nbsp;[崔4]指定缓存大小为20KB，当上传的文件超出了20KB就会保存到临时目录。 临时目录为F:\\temp &lt;![endif]&gt; &nbsp;[崔5]生成文件的保存路径 &lt;![endif]&gt; &nbsp;[崔6]获取要下载的文件名称 &lt;![endif]&gt; &nbsp;[崔7]因为文件都存放在WEB-INF/uploads目录下，所以需要获取文件的真实路径 &lt;![endif]&gt; &nbsp;[崔8]判断文件是否存在，不存在，输出错误信息。 &lt;![endif]&gt; &nbsp;[崔9]把文件写入到response.getOutputStream()中。 &lt;![endif]&gt; &nbsp;[崔10]添加content-disposition头，指定了在下载框中显示的文件名称。 只要设置了这个头信息，浏览器就会弹出下载框，这就可以下载jpg和txt文件了。 &lt;![endif]&gt; var _self=\"undefined\"!=typeof window?window:\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\blang(?:uage)?-(\\w+)\\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\"Array\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\"&amp;\").replace(/","categories":[],"tags":[]},{"title":"副本","slug":"MD/副本","date":"2017-11-13T18:23:52.000Z","updated":"2018-07-17T08:51:34.000Z","comments":true,"path":"2017/11/14/MD/副本/","link":"","permalink":"http://io.stelawliet.top/2017/11/14/MD/副本/","excerpt":"","text":"DDEEEEEEEEEEEEEEEEFFFFFFFFFFFFFF","categories":[],"tags":[]},{"title":"","slug":"MD/test","date":"2017-11-13T18:23:52.000Z","updated":"2018-07-17T11:03:15.000Z","comments":true,"path":"2017/11/14/MD/test/","link":"","permalink":"http://io.stelawliet.top/2017/11/14/MD/test/","excerpt":"","text":"AAABBB SASSA SAS SDSDSD SDSD","categories":[],"tags":[]},{"title":"","slug":"JavaScript/ajax-json-xstream","date":"2017-11-13T18:09:53.000Z","updated":"2017-11-13T18:09:53.000Z","comments":true,"path":"2017/11/14/JavaScript/ajax-json-xstream/","link":"","permalink":"http://io.stelawliet.top/2017/11/14/JavaScript/ajax-json-xstream/","excerpt":"","text":"ajax-json-xstream.mdhtml {overflow-x: initial !important;}.CodeMirror { height: auto; } .CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { padding: 4px 0px; } .CodeMirror pre { } .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; } .CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; } .CodeMirror-linenumbers { } .CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); } .CodeMirror div.CodeMirror-cursor { border-left-width: 1px; border-left-style: solid; border-left-color: black; z-index: 3; } .CodeMirror div.CodeMirror-secondarycursor { border-left-width: 1px; border-left-style: solid; border-left-color: silver; } .CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background-color: rgb(119, 238, 119); z-index: 1; background-position: initial initial; background-repeat: initial initial; } .CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { } .cm-tab { display: inline-block; } .cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); } .cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; } .cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; } .cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); } .cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; } .cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; } .cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); } .cm-s-typora-default .cm-string { color: rgb(126, 134, 169); } .cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; } .cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; } .cm-s-typora-default .cm-overlay { font-family: monospace; } .CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left-width: 3px; border-left-style: solid; border-left-color: rgb(228, 98, 154); } .cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background-color: rgba(204, 204, 204, 0.2); background-position: initial initial; background-repeat: initial initial; } .cm-s-typora-default .CodeMirror-gutters { border-right-style: none; background-color: inherit; } .cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: '•'; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; } .os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; } .cm-starttab .cm-tab::after { content: ' '; } .cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; } .cm-s-typora-default .cm-trailing-space-new-line::after { content: '↓'; opacity: 0.3; } .cm-s-inner .cm-keyword { color: rgb(119, 0, 136); } .cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); } .cm-s-inner .cm-number { color: rgb(17, 102, 68); } .cm-s-inner .cm-def { color: rgb(0, 0, 255); } .cm-s-inner .cm-variable { color: black; } .cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); } .cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); } .cm-s-inner .cm-property { color: black; } .cm-s-inner .cm-operator { color: rgb(152, 26, 26); } .cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); } .cm-s-inner .cm-string { color: rgb(170, 17, 17); } .cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); } .cm-s-inner .cm-meta { color: rgb(85, 85, 85); } .cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); } .cm-s-inner .cm-builtin { color: rgb(51, 0, 170); } .cm-s-inner .cm-bracket { color: rgb(153, 153, 119); } .cm-s-inner .cm-tag { color: rgb(17, 119, 0); } .cm-s-inner .cm-attribute { color: rgb(0, 0, 204); } .cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; } .cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); } .cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); } .cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); } .cm-negative { color: rgb(221, 68, 68); } .cm-positive { color: rgb(34, 153, 34); } .cm-header, .cm-strong { font-weight: bold; } .cm-del { text-decoration: line-through; } .cm-em { font-style: italic; } .cm-link { text-decoration: underline; } .cm-error { color: rgb(255, 0, 0); } .cm-invalidchar { color: rgb(255, 0, 0); } .cm-constant { color: rgb(38, 139, 210); } .cm-defined { color: rgb(181, 137, 0); } div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); } div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); } .cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; } .CodeMirror { position: relative; overflow: hidden; } .CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; } .CodeMirror-sizer { position: relative; } .CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; } .CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; } .CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; } .CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; } .CodeMirror-gutter-filler { left: 0px; bottom: 0px; } .CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; } .CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; } .CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background-image: none !important; border: none !important; background-position: initial initial !important; background-repeat: initial initial !important; } .CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; } .CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; } .CodeMirror-lines { cursor: text; } .CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; background-color: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: initial initial; background-repeat: initial initial; } .CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; } .CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: -webkit-fit-content; } .CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; } .CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; } .CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; } .CodeMirror-widget { } .CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; } .CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; } .CodeMirror-measure pre { position: static; } .CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; } .CodeMirror div.CodeMirror-cursor { visibility: hidden; } .CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; } .CodeMirror-selected { background-color: rgb(217, 217, 217); background-position: initial initial; background-repeat: initial initial; } .CodeMirror-focused .CodeMirror-selected { background-color: rgb(215, 212, 240); background-position: initial initial; background-repeat: initial initial; } .cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; } .CodeMirror span { } @media print { .CodeMirror div.CodeMirror-cursor { visibility: hidden; } } .CodeMirror-lint-markers { width: 16px; } .CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; -webkit-transition: opacity 0.4s; transition: opacity 0.4s; font-size: 0.8em; } .CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: 0% 100%; background-repeat: repeat no-repeat; } .CodeMirror-lint-mark-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==); } .CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; background-position: 50% 50%; background-repeat: no-repeat no-repeat; } .CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: 0% 0%; background-repeat: no-repeat no-repeat; } .CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=); } .CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=); } .CodeMirror-lint-marker-multiple { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC); width: 100%; height: 100%; background-position: 100% 100%; background-repeat: no-repeat no-repeat; } :root { --bg-color: rgb(255, 255, 255); --text-color: rgb(51, 51, 51); --code-block-bg-color: inherit; } html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; } body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; } a:active, a:hover { outline: 0px; } .in-text-selection, ::selection { background-color: rgb(181, 214, 252); text-shadow: none; background-position: initial initial; background-repeat: initial initial; } #write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; } .for-image #write { padding-left: 8px; padding-right: 8px; } body.typora-export { padding-left: 30px; padding-right: 30px; } @media screen and (max-width: 500px) { body.typora-export { padding-left: 0px; padding-right: 0px; } .CodeMirror-sizer { margin-left: 0px !important; } .CodeMirror-gutters { display: none !important; } } .typora-export #write { margin: 0px auto; } #write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; } #write li > table:first-child { margin-top: -20px; } img { max-width: 100%; vertical-align: middle; } input, button, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; line-height: inherit; } input[type=\"checkbox\"], input[type=\"radio\"] { line-height: normal; padding: 0px; } ::before, ::after, * { box-sizing: border-box; } #write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; } #write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; } h1 { font-size: 2rem; } h2 { font-size: 1.8rem; } h3 { font-size: 1.6rem; } h4 { font-size: 1.4rem; } h5 { font-size: 1.2rem; } h6 { font-size: 1rem; } p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; } .typora-export p { white-space: normal; } .mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; } .hidden { display: none; } .md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; } a { cursor: pointer; } sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; } #write input[type=\"checkbox\"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; } tr { page-break-inside: avoid; page-break-after: auto; } thead { display: table-header-group; } table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; page-break-inside: auto; text-align: left; } table.md-table td { min-width: 80px; } .CodeMirror-gutters { border-right-width: 0px; background-color: inherit; } .CodeMirror { text-align: left; } .CodeMirror-placeholder { opacity: 0.3; } .CodeMirror pre { padding: 0px 4px; } .CodeMirror-lines { padding: 0px; } div.hr:focus { cursor: none; } pre { white-space: pre-wrap; } .CodeMirror-gutters { margin-right: 4px; } .md-fences { font-size: 0.9rem; display: block; page-break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: var(--code-block-bg-color); position: relative !important; } .md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; } .md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; } .md-fences.mock-cm { white-space: pre-wrap; } .show-fences-line-number .md-fences { padding-left: 0px; } .show-fences-line-number .md-fences.mock-cm { padding-left: 40px; } .footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; } .footnotes + .footnotes { margin-top: -1em; } .md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background-color: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; background-position: initial initial; background-repeat: initial initial; } li div { padding-top: 0px; } blockquote { margin: 1rem 0px; } li p, li .mathjax-block { margin: 0.5rem 0px; } li { margin: 0px; position: relative; } blockquote > :last-child { margin-bottom: 0px; } blockquote > :first-child { margin-top: 0px; } .footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; } @media print { html, body { border: 1px solid transparent; height: 99%; page-break-after: avoid; page-break-before: avoid; } .typora-export * { -webkit-print-color-adjust: exact; } h1, h2, h3, h4, h5, h6 { page-break-after: avoid; orphans: 2; } p { orphans: 4; } html.blink-to-pdf { font-size: 13px; } .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; page-break-after: avoid; } .typora-export #write::after { height: 0px; } @page { margin: 20mm 0mm; } } .footnote-line { margin-top: 0.714em; font-size: 0.7em; } a img, img a { cursor: pointer; } pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; } p .md-image:only-child { display: inline-block; width: 100%; text-align: center; } #write .MathJax_Display { margin: 0.8em 0px 0px; } .mathjax-block { white-space: pre; overflow: hidden; width: 100%; } p + .mathjax-block { margin-top: -1.143rem; } .mathjax-block:not(:empty)::after { display: none; } [contenteditable=\"true\"]:active, [contenteditable=\"true\"]:focus { outline: none; box-shadow: none; } .task-list { list-style-type: none; } .task-list-item { position: relative; padding-left: 1em; } .task-list-item input { position: absolute; top: 0px; left: 0px; } .math { font-size: 1rem; } .md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; } .md-toc-content { position: relative; margin-left: 0px; } .md-toc::after, .md-toc-content::after { display: none; } .md-toc-item { display: block; color: rgb(65, 131, 196); } .md-toc-item a { text-decoration: none; } .md-toc-inner:hover { } .md-toc-inner { display: inline-block; cursor: pointer; } .md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; } .md-toc-h2 .md-toc-inner { margin-left: 2em; } .md-toc-h3 .md-toc-inner { margin-left: 4em; } .md-toc-h4 .md-toc-inner { margin-left: 6em; } .md-toc-h5 .md-toc-inner { margin-left: 8em; } .md-toc-h6 .md-toc-inner { margin-left: 10em; } @media screen and (max-width: 48em) { .md-toc-h3 .md-toc-inner { margin-left: 3.5em; } .md-toc-h4 .md-toc-inner { margin-left: 5em; } .md-toc-h5 .md-toc-inner { margin-left: 6.5em; } .md-toc-h6 .md-toc-inner { margin-left: 8em; } } a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; } .footnote-line a:not(.reversefootnote) { color: inherit; } .md-attr { display: none; } .md-fn-count::after { content: '.'; } .md-tag { opacity: 0.5; } .md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; } code { text-align: left; } h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; } a.md-print-anchor { border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background-color: transparent !important; text-shadow: initial !important; background-position: initial initial !important; background-repeat: initial initial !important; } .md-inline-math .MathJax_SVG .noError { display: none !important; } .mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; } .MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; } .MathJax_SVG .MJX-monospace { font-family: monospace; } .MathJax_SVG .MJX-sans-serif { font-family: sans-serif; } .MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; } .MathJax_SVG * { -webkit-transition: none; transition: none; } .md-diagram-panel > svg { max-width: 100%; } [lang=\"flow\"] svg, [lang=\"mermaid\"] svg { max-width: 100%; } @include-when-export url(http://fonts.googleapis.com/css?family=Ubuntu:400,700,400italic,700italic); @include-when-export url(http://fonts.googleapis.com/css?family=Raleway:600,400&subset=latin,latin-ext); @charset \"UTF-8\"; @font-face { font-family: 'TeXGyreAdventor'; src: url('file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/texgyreadventor-regular.otf'); font-weight: normal; font-style: normal; } @charset \"UTF-8\"; @font-face { font-family: 'TeXGyreAdventor'; font-style: normal; font-weight: normal; src: url(file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/gothic/texgyreadventor-regular.otf); } @font-face { font-family: 'TeXGyreAdventor'; font-style: normal; font-weight: bold; src: url(file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/gothic/texgyreadventor-bold.otf); } @font-face { font-family: 'TeXGyreAdventor'; font-style: italic; font-weight: normal; src: url(file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/gothic/texgyreadventor-italic.otf); } @font-face { font-family: 'TeXGyreAdventor'; font-style: italic; font-weight: bold; src: url(file:///Users/zhaoziqi/Library/Application%20Support/abnerworks.Typora/themes/gothic/texgyreadventor-bolditalic.otf); } :root { --window-border: none; --typora-center-window-title: true; --active-file-bg-color: #f3f3f3; --bg-color: #fcfcfc; --control-text-color: #777; } .mac-seamless-mode #typora-sidebar { top: var(--mac-title-bar-height); padding-top: 0; height: calc(100% - var(--mac-title-bar-height)); } html, body, #write{ background: #fcfcfc; font-family: 'TeXGyreAdventor', \"Century Gothic\", 'Yu Gothic', 'Raleway', \"STHeiti\", sans-serif; font-weight: 400; } h1, h2, h3, h4, h5, h6 { color: #111; font-family: 'TeXGyreAdventor', \"Century Gothic\", 'Yu Gothic', 'Ubuntu', \"STHeiti\", sans-serif; } html { font-size:16px; } #write { max-width: 914px; text-align: justify; } #write>h1:first-child { margin-top: 2.75rem; } #write>h2:first-child { margin-top: 1.75rem; } #write>h3:first-child { margin-top: 1rem; } #write>h4:first-child { margin-top: 0.5rem; } h1 { font-weight: normal; line-height: 4rem; margin: 0 0 1.75rem; padding: 20px 30px; text-align: center; text-transform: uppercase; margin-top: 4rem; } h2 { font-weight: normal; line-height: 3rem; margin: 0 0 1.9375rem; padding: 0 30px; text-align: center; text-transform: uppercase; margin-top: 3rem } h3 { font-weight: normal; } h4 { font-weight: normal; } h5 { font-size: 1.125rem; font-weight: normal; } h6 { font-size: 1rem; font-weight: bold; } p { color: #111; font-size: 1rem; line-height: 1.75rem; margin: 0 0 1.25rem; } #write>h3.md-focus:before { left: -1.875rem; top: 0.5rem; padding: 2px; } #write>h4.md-focus:before { left: -1.875rem; top: 0.3125rem; padding: 2px; } #write>h5.md-focus:before { left: -1.875rem; top: 0.25rem; padding: 2px; } #write>h6.md-focus:before { left: -1.875rem; top: .125rem; padding: 2px; } /*@media screen and (min-width: 48em) { .h1, h1 { font-size: 3.250rem; } .h2, h2 { font-size: 2.298rem; } .h3, h3 { font-size: 1.625rem; } .h4, h4 { font-size: 1.250rem; } .h5, h5 { font-size: 1.150rem; } .h6, h6 { font-size: 1rem; } #write>h4.md-focus:before, #write>h5.md-focus:before, #write>h6.md-focus:before { top: 1px; } p { font-size: 1.25rem; line-height: 1.8; } table { font-size: 1.25rem; } }*/ @media screen and (max-width: 48em) { blockquote { margin-left: 1rem; margin-right: 0; padding: 0.5em; } .h1, h1 { font-size: 2.827rem; } .h2, h2 { font-size: 1.999rem; } .h3, h3 { font-size: 1.413rem; } .h4, h4 { font-size: 1.250rem; } .h5, h5 { font-size: 1.150rem; } .h6, h6 { font-size: 1rem; } } a, .md-def-url { color: #990000; text-decoration: none; } a:hover { text-decoration: underline; } table { margin-bottom: 20px } table th, table td { padding: 8px; line-height: 1.25rem; vertical-align: top; border-top: 1px solid #ddd } table th { font-weight: bold } table thead th { vertical-align: bottom } table caption+thead tr:first-child th, table caption+thead tr:first-child td, table colgroup+thead tr:first-child th, table colgroup+thead tr:first-child td, table thead:first-child tr:first-child th, table thead:first-child tr:first-child td { border-top: 0 } table tbody+tbody { border-top: 2px solid #ddd } code, .md-fences { padding: .5em; /*background: #f0f0f0;*/ border: 1px solid #ccc; padding: .1em; font-size: 0.9em; margin-left: 0.2em; margin-right: 0.2em; } .md-fences { margin: 0 0 20px; font-size: 1em; padding: 0.3em 1em; padding-top: 0.4em; } .task-list{ padding-left: 0; } .task-list-item { padding-left:2.125rem; } .task-list-item input { top: 3px; } .task-list-item input:before { content: \"\"; display: inline-block; width: 1rem; height: 1rem; vertical-align: middle; text-align: center; border: 1px solid gray; background-color: #fdfdfd; margin-left: 0; margin-top: -0.8rem; } .task-list-item input:checked:before, .task-list-item input[checked]:before{ content: '\\25FC'; /*◘*/ font-size: 0.8125rem; line-height: 0.9375rem; margin-top: -1rem; } /* Chrome 29+ */ @media screen and (-webkit-min-device-pixel-ratio:0) and (min-resolution:.001dpcm) { .task-list-item input:before { margin-top: -0.2rem; } .task-list-item input:checked:before, .task-list-item input[checked]:before { margin-top: -0.2rem; } } blockquote { margin: 0 0 1.11111rem; padding: 0.5rem 1.11111rem 0 1.05556rem; border-left: 1px solid gray; } blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; } #write pre.md-meta-block { min-height: 30px; background: #f8f8f8; padding: 1.5em; font-weight: 300; font-size: 1em; padding-bottom: 1.5em; padding-top: 3em; margin-top: -1.5em; color: #999; width: 100vw; max-width: calc(100% + 60px); margin-left: -30px; border-left: 30px #f8f8f8 solid; border-right: 30px #f8f8f8 solid; } .MathJax_Display { font-size: 0.9em; margin-top: 0.5em; margin-bottom: 0; } p.mathjax-block, .mathjax-block { padding-bottom: 0; } .mathjax-block>.code-tooltip { bottom: 5px; box-shadow: none; } .md-image>.md-meta { padding-left: 0.5em; padding-right: 0.5em; } .md-image>img { margin-top: 2px; } .md-image>.md-meta:first-of-type:before { padding-left: 4px; } #typora-source { color: #555; } /** ui for windows **/ #md-searchpanel { border-bottom: 1px solid #ccc; } #md-searchpanel .btn { border: 1px solid #ccc; } #md-notification:before { top: 14px; } #md-notification { background: #eee; } .megamenu-menu-panel .btn { border: 1px solid #ccc; } #typora-sidebar { box-shadow: none; } .file-list-item , .show-folder-name .file-list-item { padding-top: 20px; padding-bottom: 20px; line-height: 20px; } .file-list-item-summary { height: 40px; line-height: 20px; } ajaxajax发送异步请求（四步操作）响应内容为xml数据第五例：省市联动XStreamJSONjson-libajaxajax是什么?asynchronous javascript and xml：异步的js和xml它能使用js访问服务器，而且是异步访问！服务器给客户端的响应一般是整个页面，一个html完整页面！但在ajax中因为是局部刷新，那么服务器就不用再响应整个页面！而只是数据！text：纯文本 xml：大家都熟悉！！！ json：它是js提供的数据交互格式，它在ajax中最受欢迎！异步交互和同步交互同步：发一个请求，就要等待服务器的响应结束，然后才能发第二个请求！中间这段时间就是一个字“卡” 刷新的是整个页面！异步：发一个请求后，无需等待服务器的响应，然后就可以发第二个请求！ 可以使用js接收服务器的响应，然后使用js来局部刷新！ajax应用场景百度的搜索框用户注册时（校验用户名是否被注册过）ajax的优缺点优点：异步交互：增强了用户的体验！性能：因为服务器无需再响应整个页面，只需要响应部份内容，所以服务器的压力减轻了！缺点：ajax不能应用在所有场景！ajax无端的增多了对服务器的访问次数，给服务器带来了压力！ajax发送异步请求（四步操作）第一步（得到XMLHttpRequest）ajax其实只需要学习一个对象：XMLHttpRequest，如果掌握了它，就掌握了ajax！！！得到XMLHttpRequest大多数浏览器都支持：var xmlHttp = new XMLHttpRequest();IE6.0：var xmlHttp = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);IE5.5以更早版本的IE：var xmlHttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);编写创建XMLHttpRequest对象的函数 xxxxxxxxxx161 &nbsp; &nbsp;function createXMLHttpRequest() {2 &nbsp; &nbsp; &nbsp;try {3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return new XMLHttpRequest();4 &nbsp; &nbsp; } catch(e) {5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;try {6 &nbsp; &nbsp; &nbsp; &nbsp;return new ActiveXObject(\"Msxml2.XMLHTTP\");7 &nbsp; } catch(e) {8 &nbsp; &nbsp; &nbsp; &nbsp;try {9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return new ActiveXObject(\"Microsoft.XMLHTTP\");10 &nbsp; &nbsp; &nbsp; } catch(e) {11 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(\"哥们儿，你用的是什么浏览器啊？\");12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw e;13 &nbsp; &nbsp; &nbsp; }14 &nbsp; }15 &nbsp; &nbsp; }16 &nbsp; }第二步（打开与服务器的连接）xmlHttp.open()：用来打开与服务器的连接，它需要三个参数：请求方式：可以是GET或POST 请求的URL：指定服务器端资源，例如；/day23_1/AServlet 请求是否为异步：如果为true表示发送异步请求，否则同步请求！xmlHttp.open(&quot;GET&quot;, &quot;/day23_1/AServlet&quot;, true);第三步（发送请求）xmlHttp.send(null)：如果不给可能会造成部份浏览器无法发送！参数：就是请求体内容！如果是GET请求，必须给出null。第四步（）在xmlHttp对象的一个事件上注册监听器：onreadystatechangexmlHttp对象一共有5个状态：0状态：刚创建，还没有调用open()方法; 1状态：请求开始：调用了open()方法，但还没有调用send()方法 2状态：调用完了send()方法了； 3状态：服务器已经开始响应，但不表示响应结束了！ 4状态：服务器响应结束！（通常我们只关心这个状态！！！）得到xmlHttp对象的状态：var state = xmlHttp.readyState;//可能是0、1、2、3、4得到服务器响应的状态码var status = xmlHttp.status;//例如为200、404、500得到服务器响应的内容1var content = xmlHttp.responseText;//得到服务器的响应的文本格式的内容 var content = xmlHttp.responseXML;//得到服务器的响应的xml响应的内容，它是Document对象了！ xxxxxxxxxx61 &nbsp;xmlHttp.onreadystatechange = function() {//xmlHttp的5种状态都会调用本方法2 &nbsp; &nbsp; &nbsp;if(xmlHttp.readyState == 4 &amp;&amp; xmlHttp.status == 200) {//双重判断：判断是否为4状态，而且还要判断是否为2003 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 获取服务器的响应内容4 &nbsp; &nbsp;var text = xmlHttp.responseText;5 &nbsp; &nbsp; }6 };第二例：发送POST请求(如果发送请求时需要带有参数，一般都用POST请求)open：xmlHttp.open(&quot;POST&quot; ....);添加一步：设置Content-Type请求头：xmlHttp.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);send：xmlHttp.send(&quot;username=zhangSan&amp;password=123&quot;);//发送请求时指定请求体第三例：注册表单之校验用户是否注册！编写页面：ajax3.jsp给出注册表单页面 给用户名文本框添加onblur事件的监听 获取文本框的内容，通过ajax4步发送给服务器，得到响应结果如果为1：在文本框后显示“用户名已被注册”如果为0：什么都不做！编写ServletValidateUsernameServlet获取客户端传递的用户名参数 判断是否为itcast是：返回1否：返回0响应内容为xml数据服务器端：设置响应头：ContentType，其值为：text/xml;charset=utf-8客户端：var doc = xmlHttp.responseXML;//得到的是Document对象！第四例：响应内容为xml数据第五例：省市联动页面 xxxxxxxxxx111&lt;select name=\"province\"&gt;2​3 &nbsp;&lt;option&gt;=请选择省份=&lt;/option&gt;4​5&lt;/select&gt;6​7&lt;select name=\"city\"&gt;8​9 &nbsp;&lt;option&gt;=请选择城市=&lt;/option&gt; &nbsp;10​11&lt;/select&gt;ProvinceServletProvinceServlet：当页面加载完毕后马上请求这个Servlet！它需要加载china.xml文件，把所有的省的名称使用字符串发送给客户端！页面的工作获取这个字符串，使用逗号分隔，得到数组循环遍历每个字符串（省份的名称），使用每个字符串创建一个&lt;option&gt;元素添加到&lt;select name=&quot;province&quot;&gt;这个元素中CityServletCityServlet：当页面选择某个省时，发送请求！得到省份的名称，加载china.xml文件，查询出该省份对应的元素对象！，把这个元素转换成xml字符串，发送给客户端页面的工作把&lt;select name=&quot;city&quot;&gt;中的所有子元素删除，但不要删除&lt;option&gt;===请选择城市===&lt;/option&gt;得到服务器的响应结果：doc！！！获取所有的&lt;city&gt;子元素，循环遍历，得到&lt;city&gt;的内容使用每个&lt;city&gt;的内容创建一个&lt;option&gt;元素，添加到&lt;select name=&quot;city&quot;&gt;XStream什么作用可以把JavaBean转换为（序列化为）xmlXStream的jar包核心JAR包：xstream-1.4.7.jar；必须依赖包：xpp3_min-1.1.4c（XML Pull Parser，一款速度很快的XML解析器）；使用步骤XStream xstream = new XStream();String xmlStr = xstream.toXML(javabean);使用细节别名：把类型对应的元素名修改了xstream.alias(&quot;china&quot;, List.class)：让List类型生成的元素名为china xstream.alias(&quot;province&quot;, Province.class)：让Province类型生成的元素名为province使用为属性：默认类的成员，生成的是元素的子元素！我们希望让类的成员生成元素的属性xstream.useAttributeFor(Province.class, &quot;name&quot;)：把Province类的名为name成员，生成&lt;province&gt;元素的name属性去除Collection类型的成名：我们只需要Collection的内容，而不希望Collection本身也生成一个元素xstream.addImplicitCollection(Province.class, &quot;cities&quot;)：让Province类的名为cities(它是List类型的，它的内容还会生成元素)的成名不生成元素去除类的指定成名，让其不生成xml元素xstream.omitField(City.class, &quot;description&quot;)：在生成的xml中不会出现City类的名为description的对应的元素！JSONjson是什么它是js提供的一种数据交换格式！json的语法{}：是对象！属性名必须使用双引号括起来！单引不行！！！ 属性值：null数值字符串数组：使用[]括起来boolean值：true和false应用jsonvar person = {&quot;name&quot;:&quot;zhangSan&quot;, &quot;age&quot;:18, &quot;sex&quot;:&quot;male&quot;};json与xml比较可读性：XML胜出解析难度：JSON本身就是JS对象（主场作战），所以简单很多流行度：XML已经流行好多年，但在AJAX领域，JSON更受欢迎。json-lib是什么？它可以把javabean转换成json串jar包略核心类JSONObject --&gt; MaptoString();JSONObject map = JSONObject.fromObject(person)：把对象转换成JSONObject对象JSONArray --&gt; ListtoString()JSONArray jsonArray = JSONObject.fromObject(list)：把list转换成JSONArray对象","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/Servlet作用域","date":"2017-11-10T05:51:50.000Z","updated":"2017-11-10T05:54:03.000Z","comments":true,"path":"2017/11/10/Java/JavaEE/Servlet作用域/","link":"","permalink":"http://io.stelawliet.top/2017/11/10/Java/JavaEE/Servlet作用域/","excerpt":"","text":"javaweb开发中Servlet三大域对象的应用 （request、session、application（ServletContext））。 requestrequest是表示一个请求，只要发出一个请求就会创建一个request，它的作用域：仅在当前请求中有效。用处：常用于服务器间同一请求不同页面之间的参数传递，常应用于表单的控件值传递。方法：request.setAttribute(); request.getAttribute(); request.removeAttribute(); request.getParameter(). session服务器会为每个会话创建一个session对象，所以session中的数据可供当前会话中所有servlet共享。会话：用户打开浏览器会话开始，直到关闭浏览器会话才会结束。一次会话期间只会创建一个session对象。用处：常用于web开发中的登陆验证界面（当用户登录成功后浏览器分配其一个session键值对）。方法：session.setAttribute(); session.getAttribute(); session.removeAttribute();获得session对象方法： 在Servlet中：HttpSession session = request.getSession(); 由于session属于jsp九大内置对象之一，当然可以直接使用。例如：&lt;%session.serAttribute(“name”,”admin”)%&gt;。 session被销毁​ 1)session超时;​ 2)客户端关闭后，再也访问不到和该客户端对应的session了，它会在超时之后被销毁;​ 3)调用session. invalidate();备注： session是服务器端对象，保存在服务器端。并且服务器可以将创建session后产生的sessionid通过一个cookie返回给客户端，以便下次验证。（session底层依赖于cookie） Application（ServletContext）作用范围：所有的用户都可以取得此信息，此信息在整个服务器上被保留。Application属性范围值，只要设置一次，则所有的网页窗口都可以取得数据。ServletContext在服务器启动时创建，在服务器关闭时销毁，一个JavaWeb应用只创建一个ServletContext对象，所有的客户端在访问服务器时都共享同一个ServletContext对象;ServletContext对象一般用于在多个客户端间共享数据时使用;获取Application对象方法（Servlet中）：​ ServletContext app01 = this.getServletContext();​ app01.setAttribute(“name”, “kaixuan”); //设置一个值进去​ ServletContext app02 = this.getServletContext();​ app02.getAttribute(“name”); //获取键值对ServletContext同属于JSP九大内置对象之一，故可以直接使用备注：服务器只会创建一个ServletContext 对象，所以app01就是app02，通过app01设置的值当然可以通过app02获取。 总结：1.作用域： request session application 使用作用域传递数据和存储数据 使用作用域传递数据时，必须掌握作用域对应的生命周期和作用范围 2. * 生命周期 (1) request:只限于一次请求 (2) session：一次会话（多次请求） 开始 用户向服务器发送请求的时候 结束 客户端 丢失JsessionId值的时候（关闭浏览器） 服务器端 关闭服务器 超过会话的不活动周期时间 (3) application:项目的加载到卸载 *3.作用范围 (1) requset：所有被请求转发的Servlet (2) session:所有的Servlet (3)application：所有的Servlet(换一个浏览器演示，跟session作用域区分) 4.*如何正确的选择作用域 *(1) request：跟当前操作功能相关 (2) session: 跟用户信息相关 (3) application：跟项目全局信息相关—-》京东配送地址 5.如何正确的选择作用域不正确，会出现什么情况 内存浪费","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/Filter","date":"2017-11-09T15:42:14.000Z","updated":"2017-11-09T15:42:14.000Z","comments":true,"path":"2017/11/09/Java/JavaEE/Filter/","link":"","permalink":"http://io.stelawliet.top/2017/11/09/Java/JavaEE/Filter/","excerpt":"","text":"Filter","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/wait:notify:notifyAll实现线程间通信","date":"2017-11-07T08:44:54.000Z","updated":"2017-11-07T08:44:54.000Z","comments":true,"path":"2017/11/07/Java/JavaEE/wait:notify:notifyAll实现线程间通信/","link":"","permalink":"http://io.stelawliet.top/2017/11/07/Java/JavaEE/wait:notify:notifyAll实现线程间通信/","excerpt":"","text":"【Java并发编程】之十：使用wait/notify/notifyAll实现线程间通信的几点重要说明转载 2015年11月17日 09:34:57 标签： JAVA / notify / wait / 线程间通信 / notifyAll 在Java中，可以通过配合调用Object对象的wait（）方法和notify（）方法或notifyAll（）方法来实现线程间的通信。在线程中调用wait（）方法，将阻塞等待其他线程的通知（其他线程调用notify（）方法或notifyAll（）方法），在线程中调用notify（）方法或notifyAll（）方法，将通知其他线程从wait（）方法处返回。 ​ Object是所有类的超类，它有5个方法组成了等待/通知机制的核心：notify（）、notifyAll（）、wait（）、wait（long）和wait（long，int）。在Java中，所有的类都从Object继承而来，因此，所有的类都拥有这些共有方法可供使用。而且，由于他们都被声明为final，因此在子类中不能覆写任何一个方法。 ​ 这里详细说明一下各个方法在使用中需要注意的几点： ​ 1、wait（） ​ public final void wait() throws InterruptedException,IllegalMonitorStateException ​ 该方法用来将当前线程置入休眠状态，直到接到通知或被中断为止。在调用wait（）之前，线程必须要获得该对象的对象级别锁，即只能在同步方法或同步块中调用wait（）方法。进入wait（）方法后，当前线程释放锁。在从wait（）返回前，线程与其他线程竞争重新获得锁。如果调用wait（）时，没有持有适当的锁，则抛出IllegalMonitorStateException，它是RuntimeException的一个子类，因此，不需要try-catch结构。 ​ 2、notify（） ​ public final native void notify() throws IllegalMonitorStateException ​ 该方法也要在同步方法或同步块中调用，即在调用前，线程也必须要获得该对象的对象级别锁，的如果调用notify（）时没有持有适当的锁，也会抛出IllegalMonitorStateException。 ​ 该方法用来通知那些可能等待该对象的对象锁的其他线程。如果有多个线程等待，则线程规划器任意挑选出其中一个wait（）状态的线程来发出通知，并使它等待获取该对象的对象锁（notify后，当前线程不会马上释放该对象锁，wait所在的线程并不能马上获取该对象锁，要等到程序退出synchronized代码块后，当前线程才会释放锁，wait所在的线程也才可以获取该对象锁），但不惊动其他同样在等待被该对象notify的线程们。当第一个获得了该对象锁的wait线程运行完毕以后，它会释放掉该对象锁，此时如果该对象没有再次使用notify语句，则即便该对象已经空闲，其他wait状态等待的线程由于没有得到该对象的通知，会继续阻塞在wait状态，直到这个对象发出一个notify或notifyAll。这里需要注意：它们等待的是被notify或notifyAll，而不是锁。这与下面的notifyAll（）方法执行后的情况不同。 ​ 3、notifyAll（） ​ public final native void notifyAll() throws IllegalMonitorStateException ​ 该方法与notify（）方法的工作方式相同，重要的一点差异是： ​ notifyAll使所有原来在该对象上wait的线程统统退出wait的状态（即全部被唤醒，不再等待notify或notifyAll，但由于此时还没有获取到该对象锁，因此还不能继续往下执行），变成等待获取该对象上的锁，一旦该对象锁被释放（notifyAll线程退出调用了notifyAll的synchronized代码块的时候），他们就会去竞争。如果其中一个线程获得了该对象锁，它就会继续往下执行，在它退出synchronized代码块，释放锁后，其他的已经被唤醒的线程将会继续竞争获取该锁，一直进行下去，直到所有被唤醒的线程都执行完毕。 ​ 4、wait（long）和wait（long,int） ​ 显然，这两个方法是设置等待超时时间的，后者在超值时间上加上ns，精度也难以达到，因此，该方法很少使用。对于前者，如果在等待线程接到通知或被中断之前，已经超过了指定的毫秒数，则它通过竞争重新获得锁，并从wait（long）返回。另外，需要知道，如果设置了超时时间，当wait（）返回时，我们不能确定它是因为接到了通知还是因为超时而返回的，因为wait（）方法不会返回任何相关的信息。但一般可以通过设置标志位来判断，在notify之前改变标志位的值，在wait（）方法后读取该标志位的值来判断，当然为了保证notify不被遗漏，我们还需要另外一个标志位来循环判断是否调用wait（）方法。 深入理解： 如果线程调用了对象的wait（）方法，那么线程便会处于该对象的等待池中，等待池中的线程不会去竞争该对象的锁。 当有线程调用了对象的notifyAll（）方法（唤醒所有wait线程）或notify（）方法（只随机唤醒一个wait线程），被唤醒的的线程便会进入该对象的锁池中，锁池中的线程会去竞争该对象锁。 优先级高的线程竞争到对象锁的概率大，假若某线程没有竞争到该对象锁，它还会留在锁池中，唯有线程再次调用wait（）方法，它才会重新回到等待池中。而竞争到对象锁的线程则继续往下执行，直到执行完了synchronized代码块，它会释放掉该对象锁，这时锁池中的线程会继续竞争该对象锁。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/Java-wait&notify","date":"2017-11-07T07:36:22.000Z","updated":"2017-11-07T07:37:07.000Z","comments":true,"path":"2017/11/07/Java/JavaEE/Java-wait&notify/","link":"","permalink":"http://io.stelawliet.top/2017/11/07/Java/JavaEE/Java-wait&notify/","excerpt":"","text":"wait()方法与notify()必须要与synchronized(resource)一起使用。 也就是wait与notify针对已经获取了resource锁的线程进行操作， 从语法角度来说就是Obj.wait(),Obj.notify必须在synchronized(Obj){…}语句块内。 从功能上来说wait()线程在获取对象锁后，主动释放CPU控制权，主动释放对象锁，同时本线程休眠。 直到有其它线程调用对象的notify()唤醒该线程，才能继续获取对象锁，并继续执行。 相应的notify()就是对对象锁的释放操作。 【因此，我们可以发现，wait和notify方法均可释放对象的锁，但wait同时释放CPU控制权，即它后面的代码停止执行，线程进入阻塞状态，而notify方法不立刻释放CPU控制权，而是在相应的synchronized(){}语句块执行结束，再自动释放锁。】 释放锁后，JVM会在等待resoure的线程中选取一线程，赋予其对象锁，唤醒线程，继续执行。这样就提供了在线程间同步、唤醒的操作。 Thread.sleep()与Object.wait()二者都可以暂停当前线程，释放CPU控制权，主要的区别在于Object.wait()在释放CPU同时，释放了对象锁的控制，而在同步块中的Thread.sleep()方法并不释放锁，仅释放CPU控制权","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/JavaWeb3大域生命","date":"2017-11-03T07:29:38.000Z","updated":"2017-11-03T07:39:16.000Z","comments":true,"path":"2017/11/03/Java/JavaEE/JavaWeb3大域生命/","link":"","permalink":"http://io.stelawliet.top/2017/11/03/Java/JavaEE/JavaWeb3大域生命/","excerpt":"","text":"ServletContext服务器启动 开始 服务器关闭 消失 HttpSessionrequest.getSession(); 第一次访问创建 或是 第一次访问Jsp。（jsp内置对象默认调用request.getSession()） HTTPRequest","categories":[],"tags":[]},{"title":"","slug":"MD/A1-Study","date":"2017-11-02T15:59:48.000Z","updated":"2018-07-17T03:23:01.000Z","comments":true,"path":"2017/11/02/MD/A1-Study/","link":"","permalink":"http://io.stelawliet.top/2017/11/02/MD/A1-Study/","excerpt":"","text":"Jsp foreach标签 ==\\&lt;c:if test = “${ }”&gt;&lt;c:choose&gt; \\&lt;c:when&gt;\\&lt;c:set&gt;\\&lt;c:otherwise&gt;== include.转发.重定向复习 baseServlet arrylist to string 12345678910@Test public void fun1()&#123; List&lt;String&gt; listS = new ArrayList&lt;&gt;(); //Set&lt;String&gt; listS = new LinkedHashSet&lt;&gt;(); for (int i = 0; i &lt;5 ; i++) &#123; listS.add(\"00\"+i); &#125; System.out.println(Arrays.toString(listS.toArray())); &#125; ​ 反射invoke的method调用 123456789101112131415161718@Test public void fun2() throws Exception &#123; Class c = Class.forName(\"Sky.Domain.Student\"); Object o = c.newInstance(); Method method0 = c.getMethod(\"setAge\", String.class); method0.invoke(o,\"10\"); System.out.println(o); Method method1= c.getMethod(\"setSname\", String.class); method1.invoke(o,\"zzq0\"); System.out.println(o); Method method2 =c.getMethod(\"getSname\"); Object sname = method2.invoke(o); System.out.println(sname); Student student = (Student)o; System.out.println(student.getAge()); &#125;@Test public void fun() throws Exception &#123;&#125; ​ io ==nio??== 事务 exquery Object序列化 国际化 Locale ResourceBundle 过滤器的测试。。多个request。forword include error IP统计 过滤器和监听器应用。（3个域复习。。笔记） HTML静态化。(过滤器先拦截。response 包装类复写getWriter（）到HTML。) 文件上传。（DiskFileItemFactory。ServletUpload。FileitemParse 上传 下载 ==上传进度监听== 装饰者模式练习（buffreader的readline增强） gzip压缩 post请求格式化编码 ajax post get Ajax username异步校验。 ajax xml响应 ​ html5 css3 ==index== css div float css table ​ jQuery dom add remove change replace 固定导航 小火箭top 弹幕 jQuery cookie add get set ​ 事件绑定不同 bind click delegate ​ jQuery ipa复习（event，css，atrr） cookie ==JavaScript RegExp== CSS 简单主页 jd.com/index.html ssm框架学习 spring h spring mvc ​ mybitas vue.js webpack ​ node.js a.js myblog 购买域名 GitHub Page MD整理 git练习 Skll yml学习 python ​ ios mac swift oc ​ ​ ​","categories":[],"tags":[]},{"title":"c3p0-config.xml","slug":"Java/JavaEE/c3p0-config.xml","date":"2017-10-30T09:08:29.000Z","updated":"2018-07-04T11:36:14.000Z","comments":true,"path":"2017/10/30/Java/JavaEE/c3p0-config.xml/","link":"","permalink":"http://io.stelawliet.top/2017/10/30/Java/JavaEE/c3p0-config.xml/","excerpt":"","text":"c3p0-config.xml12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;c3p0-config&gt;&lt;named-config name=\"mysql\"&gt; &lt;!-- 配置数据库用户名 --&gt; &lt;property name=\"user\"&gt;root&lt;/property&gt; &lt;!-- 配置数据库密码 --&gt; &lt;property name=\"password\"&gt;&lt;/property&gt; &lt;!-- 配置数据库链接地址 --&gt; &lt;property name=\"jdbcUrl\"&gt;jdbc:mysql://localhost:3306/cdcol?useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/property&gt; &lt;!-- 配置数据库驱动 --&gt; &lt;property name=\"driverClass\"&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;!-- 数据库连接池一次性向数据库要多少个连接对象 --&gt; &lt;property name=\"acquireIncrement\"&gt;20&lt;/property&gt; &lt;!-- 初始化连接数 --&gt; &lt;property name=\"initialPoolSize\"&gt;10&lt;/property&gt; &lt;!-- 最小连接数 --&gt; &lt;property name=\"minPoolSize\"&gt;5&lt;/property&gt; &lt;!--连接池中保留的最大连接数。Default: 15 --&gt; &lt;property name=\"maxPoolSize\"&gt;30&lt;/property&gt; &lt;!--JDBC的标准参数，用以控制数据源内加载的PreparedStatements数量。但由于预缓存的statements 属于单个connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素。如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default:0 --&gt; &lt;property name=\"maxStatements\"&gt;0&lt;/property&gt; &lt;!--maxStatementsPerConnection定义了连接池内单个连接所拥有的最大缓存statements数。Default: 0 --&gt; &lt;property name=\"maxStatementsPerConnection\"&gt;0&lt;/property&gt; &lt;!--c3p0是异步操作的，缓慢的JDBC操作通过帮助进程完成。扩展这些操作可以有效的提升性能 通过多线程实现多个操作同时被执行。Default:3 --&gt; &lt;property name=\"numHelperThreads\"&gt;3&lt;/property&gt; &lt;!--用户修改系统配置参数执行前最多等待300秒。Default: 300 --&gt; &lt;property name=\"propertyCycle\"&gt;3&lt;/property&gt; &lt;!-- 获取连接超时设置 默认是一直等待单位毫秒 --&gt; &lt;property name=\"checkoutTimeout\"&gt;1000&lt;/property&gt; &lt;!--每多少秒检查所有连接池中的空闲连接。Default: 0 --&gt; &lt;property name=\"idleConnectionTestPeriod\"&gt;3&lt;/property&gt; &lt;!--最大空闲时间,多少秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 --&gt; &lt;property name=\"maxIdleTime\"&gt;10&lt;/property&gt; &lt;!--配置连接的生存时间，超过这个时间的连接将由连接池自动断开丢弃掉。当然正在使用的连接不会马上断开，而是等待它close再断开。配置为0的时候则不会对连接的生存时间进行限制。 --&gt; &lt;property name=\"maxIdleTimeExcessConnections\"&gt;5&lt;/property&gt; &lt;!--两次连接中间隔时间，单位毫秒。Default: 1000 --&gt; &lt;property name=\"acquireRetryDelay\"&gt;1000&lt;/property&gt; &lt;!--c3p0将建一张名为Test的空表，并使用其自带的查询语句进行测试。如果定义了这个参数那么属性preferredTestQuery将被忽略。你不能在这张Test表上进行任何操作，它将只供c3p0测试使用。Default: null --&gt; &lt;property name=\"automaticTestTable\"&gt;Test&lt;/property&gt; &lt;!-- 获取connnection时测试是否有效 --&gt; &lt;property name=\"testConnectionOnCheckin\"&gt;true&lt;/property&gt;&lt;/named-config&gt;&lt;/c3p0-config&gt;","categories":[{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/categories/sql/"},{"name":"连接池","slug":"sql/连接池","permalink":"http://io.stelawliet.top/categories/sql/连接池/"}],"tags":[{"name":"c3p0","slug":"c3p0","permalink":"http://io.stelawliet.top/tags/c3p0/"},{"name":"sql","slug":"sql","permalink":"http://io.stelawliet.top/tags/sql/"}]},{"title":"","slug":"Java/JavaEE/MAVEN/intellij idea中使用maven创建web项目","date":"2017-10-29T09:01:32.000Z","updated":"2017-10-29T09:05:32.000Z","comments":true,"path":"2017/10/29/Java/JavaEE/MAVEN/intellij idea中使用maven创建web项目/","link":"","permalink":"http://io.stelawliet.top/2017/10/29/Java/JavaEE/MAVEN/intellij idea中使用maven创建web项目/","excerpt":"","text":"intellij idea中使用maven创建web项目intellij idea中使用maven创建web项目 ​ 不选择模板创建web项目 Create New Project或者File-&gt;New-&gt;Project，如图： img 点击maven,(不用选择Create from archetype,因为此处讲解不使用maven模板创建web项目)，点击next，如图： img 填写GroupId和ArtifactId,点击next，如图： img 填写项目名称，点击Finish，如图： img 此时的目录结构如图所示：可以看到这里只创建了java的文件目录，没有创建web的文件目录。 img idea会有一个提示，自动引入，点击它： img 部署项目，File-&gt;Project Structure或点击如图所示的图标： img 设置SDK，选择自己电脑上安装的SDK版本。设置Project compiler output,通常选择默认，这里是编译后的文件目录，如图： img 点击Modules,可以看到这里没有任何模板服务，在这里创建一个web服务，点击+，选择web img 设置webapp。双击Web Resource Directory,在弹出的窗口路径中选择src\\main，然后在后面添加\\webapp,点击ok。如图： img 给web文件目录设置web.xml，如图： img 设置好后点击应用： img 添加tomcat依赖，如图所示： img 在弹出的窗口中选择tomcat,点击添加，如图所示： img 点击Artifacts,这里设置当前项目发布信息。点击+，选择From Modules…在弹出的窗口中点击ok， img 如图所示，点击应用 img 当前目录如图所示，多了webapp： img 设置tomcat：点击如图所示图标： img 点击+，选择Tomcat Server -&gt;Local.如图： img 如图所示，第一次进入会隐藏热部署设置，需要下次进来设置。 img 选择Deployment-&gt;+-&gt;Artifact.如图； img 如图所示，这里我使用默认： img 现在反回Server，如图在On frame deactivation中选择Update classes and resources;设置热部署 img 点击应用或，ok。 在webapp下面新建index.jsp页面，如图； img 在web.xml中添加欢迎节点，如图: img 启动程序，如图所示； img 成功后，浏览器输出hello Word，如图： img ok，到这里，web项目设置完成。最终目录结构如图： img web模板创建文项目 Create New Project或者File-&gt;New-&gt;Project，如图： img 勾上Create frome archetype，选择maven-archetype-webapp模板，点击下一步，如图： img 填写GroupId和ArtifactId，如图所示： img 选择中央仓库的地址，点击+，添加一个Add Maven Property属性， 这里在Properties中添加一个参数archetypeCatalog=internal，不加这个参数，在maven生成骨架的时候将会非常慢，有时候会直接卡住。 来自网上的解释：archetypeCatalog表示插件使用的archetype元数据，不加这个参数时默认为remote，local，即中央仓库archetype元数据，由于中央仓库的archetype太多了，所以导致很慢，指定internal来表示仅使用内部元数据。如图： img 填写项目名称，点击finish，如图所示： img idea为我们创建好的目录结构如图所示：少java文件： img 启动java web，打开project structure，如图所示： img 选择Project，Project SDK是java jdk安装选择，Project language level是选择语言版本，Project compileroutput 是编译后的文件目录，这里我们的使用默认，你也可以根据需要填写。如图 img 选择Facets,点击+，选择web，如图所示： img 在弹出的窗口中选择项目，点击ok，如图所示； img 设置web.xml文件目录，按如图所示的步骤选择，如图所示： img 选择Web Resource 目录，按如图所示的步骤选择，如图： img 选择Artifacts,点击+，选择Frome Madules….，在弹出的窗口中选择ok，点击Apply。如图所示： img 添加java文件目录，因为maven模板创建的web项目中少java文件目录，所以要自己创建，回到Module-&gt;选择项目名-&gt;Sources-&gt;main右击-&gt;New Folder…,在弹出的文件夹中填写java点击ok如图所示： img 将刚才新建的普通java文件夹变为Sources文件夹，点击Apply，再点击ok。如图所示步骤： img 当集成项目，项目中引入jar包时，启动项目如果报下面的错误，表明找不到jar包，我们要手动建立lib来放jar包。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535403-Dec-2016 09:37:44.044 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Error configuring application listener of class org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1285) at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1119) at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:520) at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:501) at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4649) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5189) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:724) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734) at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1702) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300) at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819) at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801) at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482) at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300) at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819) at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801) at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468) at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76) at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309) at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401) at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:324) at sun.rmi.transport.Transport$1.run(Transport.java:200) at sun.rmi.transport.Transport$1.run(Transport.java:197) at java.security.AccessController.doPrivileged(Native Method) at sun.rmi.transport.Transport.serviceCall(Transport.java:196) at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568) at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826) at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683) at java.security.AccessController.doPrivileged(Native Method) at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745)03-Dec-2016 09:37:44.045 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Skipped installing application listeners due to previous error(s) 手动新建lib： 在WEB-INF下面新建一个lib目录，如图； img 根据如图所示的步骤找到刚才所建立的lib目录，如图： img 找到lib后在弹出的框中选择Jar Directory点击ok，如图 img 进入Artifacts,选中右边项目中的jar包，右击选择Put /WEB-INF/lib,ok,如图 img 打开“Edit Configurations”，如图所示： img 按照如图所示步骤进行选择，如图： img 选择Deployment-&gt;+-&gt;Artifact….,点击应用，如图所示： img 进行热部署,选择server-&gt;On frame deactiveation中选择-&gt;Update classes and resources,点击应用，点击ok。如图： img 点击启动程序，如图所示，web项目搭建成功： img 最终的目录结构如图所示:","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/MAVEN/setting.xml配置文件","date":"2017-10-29T08:47:53.000Z","updated":"2017-10-29T08:51:51.000Z","comments":true,"path":"2017/10/29/Java/JavaEE/MAVEN/setting.xml配置文件/","link":"","permalink":"http://io.stelawliet.top/2017/10/29/Java/JavaEE/MAVEN/setting.xml配置文件/","excerpt":"","text":"setting.xml配置文件maven的配置文件settings.xml存在于两个地方： 1.安装的地方：${M2_HOME}/conf/settings.xml 2.用户的目录：${user.home}/.m2/settings.xml 前者又被叫做全局配置，对操作系统的所有使用者生效；后者被称为用户配置，只对当前操作系统的使用者生效。如果两者都存在，它们的内容将被合并，并且用户范围的settings.xml会覆盖全局的settings.xml。 Maven安装后，用户目录下不会自动生成settings.xml，只有全局配置文件。如果需要创建用户范围的settings.xml，可以将安装路径下的settings复制到目录${user.home}/.m2/。Maven默认的settings.xml是一个包含了注释和例子的模板，可以快速的修改它来达到你的要求。 全局配置一旦更改，所有的用户都会受到影响，而且如果maven进行升级，所有的配置都会被清除，所以要提前复制和备份${M2_HOME}/conf/settings.xml文件，一般情况下不推荐配置全局的settings.xml。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;settings xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt; &lt;!--本地仓库。该值表示构建系统本地仓库的路径。其默认值为$&#123;user.home&#125;/.m2/repository。 --&gt; &lt;localRepository&gt;usr/local/maven&lt;/localRepository&gt; &lt;!--Maven是否需要和用户交互以获得输入。如果Maven需要和用户交互以获得输入，则设置成true，反之则应为false。默认为true。 --&gt; &lt;interactiveMode&gt;true&lt;/interactiveMode&gt; &lt;!--Maven是否需要使用plugin-registry.xml文件来管理插件版本。 --&gt; &lt;!--如果设置为true，则在&#123;user.home&#125;/.m2下需要有一个plugin-registry.xml来对plugin的版本进行管理 --&gt; &lt;!--默认为false。 --&gt; &lt;usePluginRegistry&gt;false&lt;/usePluginRegistry&gt; &lt;!--表示Maven是否需要在离线模式下运行。如果构建系统需要在离线模式下运行，则为true，默认为false。 --&gt; &lt;!--当由于网络设置原因或者安全因素，构建服务器不能连接远程仓库的时候，该配置就十分有用。 --&gt; &lt;offline&gt;false&lt;/offline&gt; &lt;!--当插件的组织Id（groupId）没有显式提供时，供搜寻插件组织Id（groupId）的列表。 --&gt; &lt;!--该元素包含一个pluginGroup元素列表，每个子元素包含了一个组织Id（groupId）。 --&gt; &lt;!--当我们使用某个插件，并且没有在命令行为其提供组织Id（groupId）的时候，Maven就会使用该列表。 --&gt; &lt;!--默认情况下该列表包含了org.apache.maven.plugins。 --&gt; &lt;pluginGroups&gt; &lt;!--plugin的组织Id（groupId） --&gt; &lt;pluginGroup&gt;org.codehaus.mojo&lt;/pluginGroup&gt; &lt;/pluginGroups&gt; &lt;!--用来配置不同的代理，多代理profiles可以应对笔记本或移动设备的工作环境：通过简单的设置profile id就可以很容易的更换整个代理配置。 --&gt; &lt;proxies&gt; &lt;!--代理元素包含配置代理时需要的信息 --&gt; &lt;proxy&gt; &lt;!--代理的唯一定义符，用来区分不同的代理元素。 --&gt; &lt;id&gt;myproxy&lt;/id&gt; &lt;!--该代理是否是激活的那个。true则激活代理。当我们声明了一组代理，而某个时候只需要激活一个代理的时候，该元素就可以派上用处。 --&gt; &lt;active&gt;true&lt;/active&gt; &lt;!--代理的协议。 协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt; &lt;protocol&gt;http://…&lt;/protocol&gt; &lt;!--代理的主机名。协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt; &lt;host&gt;proxy.somewhere.com&lt;/host&gt; &lt;!--代理的端口。协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt; &lt;port&gt;8080&lt;/port&gt; &lt;!--代理的用户名，用户名和密码表示代理服务器认证的登录名和密码。 --&gt; &lt;username&gt;proxyuser&lt;/username&gt; &lt;!--代理的密码，用户名和密码表示代理服务器认证的登录名和密码。 --&gt; &lt;password&gt;somepassword&lt;/password&gt; &lt;!--不该被代理的主机名列表。该列表的分隔符由代理服务器指定；例子中使用了竖线分隔符，使用逗号分隔也很常见。 --&gt; &lt;nonProxyHosts&gt;*.google.com|ibiblio.org&lt;/nonProxyHosts&gt; &lt;/proxy&gt; &lt;/proxies&gt; &lt;!--配置服务端的一些设置。一些设置如安全证书不应该和pom.xml一起分发。这种类型的信息应该存在于构建服务器上的settings.xml文件中。 --&gt; &lt;servers&gt; &lt;!--服务器元素包含配置服务器时需要的信息 --&gt; &lt;server&gt; &lt;!--这是server的id（注意不是用户登陆的id），该id与distributionManagement中repository元素的id相匹配。 --&gt; &lt;id&gt;server001&lt;/id&gt; &lt;!--鉴权用户名。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。 --&gt; &lt;username&gt;my_login&lt;/username&gt; &lt;!--鉴权密码 。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。 --&gt; &lt;password&gt;my_password&lt;/password&gt; &lt;!--鉴权时使用的私钥位置。和前两个元素类似，私钥位置和私钥密码指定了一个私钥的路径（默认是/home/hudson/.ssh/id_dsa）以及如果需要的话，一个密钥 --&gt; &lt;!--将来passphrase和password元素可能会被提取到外部，但目前它们必须在settings.xml文件以纯文本的形式声明。 --&gt; &lt;privateKey&gt;$&#123;usr.home&#125;/.ssh/id_dsa&lt;/privateKey&gt; &lt;!--鉴权时使用的私钥密码。 --&gt; &lt;passphrase&gt;some_passphrase&lt;/passphrase&gt; &lt;!--文件被创建时的权限。如果在部署的时候会创建一个仓库文件或者目录，这时候就可以使用权限（permission）。--&gt; &lt;!--这两个元素合法的值是一个三位数字，其对应了unix文件系统的权限，如664，或者775。 --&gt; &lt;filePermissions&gt;664&lt;/filePermissions&gt; &lt;!--目录被创建时的权限。 --&gt; &lt;directoryPermissions&gt;775&lt;/directoryPermissions&gt; &lt;!--传输层额外的配置项 --&gt; &lt;configuration&gt;&lt;/configuration&gt; &lt;/server&gt; &lt;/servers&gt; &lt;!--为仓库列表配置的下载镜像列表。 --&gt; &lt;mirrors&gt; &lt;!--给定仓库的下载镜像。 --&gt; &lt;mirror&gt; &lt;!--该镜像的唯一标识符。id用来区分不同的mirror元素。 --&gt; &lt;id&gt;planetmirror.com&lt;/id&gt; &lt;!--镜像名称 --&gt; &lt;name&gt;PlanetMirror Australia&lt;/name&gt; &lt;!--该镜像的URL。构建系统会优先考虑使用该URL，而非使用默认的服务器URL。 --&gt; &lt;url&gt;http://downloads.planetmirror.com/pub/maven2&lt;/url&gt; &lt;!--被镜像的服务器的id。例如，如果我们要设置了一个Maven中央仓库（http://repo1.maven.org/maven2）的镜像，--&gt; &lt;!--就需要将该元素设置成central。这必须和中央仓库的id central完全一致。 --&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;!--根据环境参数来调整构建配置的列表。settings.xml中的profile元素是pom.xml中profile元素的裁剪版本。--&gt; &lt;!--它包含了id，activation, repositories, pluginRepositories和 properties元素。--&gt; &lt;!--这里的profile元素只包含这五个子元素是因为这里只关心构建系统这个整体（这正是settings.xml文件的角色定位），而非单独的项目对象模型设置。--&gt; &lt;!--如果一个settings中的profile被激活，它的值会覆盖任何其它定义在POM中或者profile.xml中的带有相同id的profile。 --&gt; &lt;profiles&gt; &lt;!--根据环境参数来调整的构件的配置 --&gt; &lt;profile&gt; &lt;!--该配置的唯一标识符。 --&gt; &lt;id&gt;test&lt;/id&gt; &lt;!--自动触发profile的条件逻辑。Activation是profile的开启钥匙。--&gt; &lt;!--如POM中的profile一样，profile的力量来自于它能够在某些特定的环境中自动使用某些特定的值；这些环境通过activation元素指定。--&gt; &lt;!--activation元素并不是激活profile的唯一方式。settings.xml文件中的activeProfile元素可以包含profile的id。--&gt; &lt;!--profile也可以通过在命令行，使用-P标记和逗号分隔的列表来显式的激活（如，-P test）。 --&gt; &lt;activation&gt; &lt;!--profile默认是否激活的标识 --&gt; &lt;activeByDefault&gt;false&lt;/activeByDefault&gt; &lt;!--activation有一个内建的java版本检测，如果检测到jdk版本与期待的一样，profile被激活。 --&gt; &lt;jdk&gt;1.7&lt;/jdk&gt; &lt;!--当匹配的操作系统属性被检测到，profile被激活。os元素可以定义一些操作系统相关的属性。 --&gt; &lt;os&gt; &lt;!--激活profile的操作系统的名字 --&gt; &lt;name&gt;Windows XP&lt;/name&gt; &lt;!--激活profile的操作系统所属家族(如 'windows') --&gt; &lt;family&gt;Windows&lt;/family&gt; &lt;!--激活profile的操作系统体系结构 --&gt; &lt;arch&gt;x86&lt;/arch&gt; &lt;!--激活profile的操作系统版本 --&gt; &lt;version&gt;5.1.2600&lt;/version&gt; &lt;/os&gt; &lt;!--如果Maven检测到某一个属性（其值可以在POM中通过$&#123;名称&#125;引用），其拥有对应的名称和值，Profile就会被激活。--&gt; &lt;!--如果值字段是空的，那么存在属性名称字段就会激活profile，否则按区分大小写方式匹配属性值字段 --&gt; &lt;property&gt; &lt;!--激活profile的属性的名称 --&gt; &lt;name&gt;mavenVersion&lt;/name&gt; &lt;!--激活profile的属性的值 --&gt; &lt;value&gt;2.0.3&lt;/value&gt; &lt;/property&gt; &lt;!--提供一个文件名，通过检测该文件的存在或不存在来激活profile。missing检查文件是否存在，如果不存在则激活profile。--&gt; &lt;!--另一方面，exists则会检查文件是否存在，如果存在则激活profile。 --&gt; &lt;file&gt; &lt;!--如果指定的文件存在，则激活profile。 --&gt; &lt;exists&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/exists&gt; &lt;!--如果指定的文件不存在，则激活profile。 --&gt; &lt;missing&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/missing&gt; &lt;/file&gt; &lt;/activation&gt; &lt;!--对应profile的扩展属性列表。Maven属性和Ant中的属性一样，可以用来存放一些值。这些值可以在POM中的任何地方使用标记$&#123;X&#125;来使用，这里X是指属性的名称。--&gt; &lt;!--属性有五种不同的形式，并且都能在settings.xml文件中访问。 --&gt; &lt;!--1. env.X: 在一个变量前加上\"env.\"的前缀，会返回一个shell环境变量。例如,\"env.PATH\"指代了$path环境变量（在Windows上是%PATH%）。 --&gt; &lt;!--2. project.x：指代了POM中对应的元素值。 --&gt; &lt;!--3. settings.x: 指代了settings.xml中对应元素的值。 --&gt; &lt;!--4. Java System Properties: 所有可通过java.lang.System.getProperties()访问的属性都能在POM中使用该形式访问， --&gt; &lt;!-- 如/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre。 --&gt; &lt;!--5. x: 在&lt;properties/&gt;元素中，或者外部文件中设置，以$&#123;someVar&#125;的形式使用。 --&gt; &lt;properties&gt; &lt;!-- 如果这个profile被激活，那么属性$&#123;user.install&#125;就可以被访问了 --&gt; &lt;user.install&gt;usr/local/winner/jobs/maven-guide&lt;/user.install&gt; &lt;/properties&gt; &lt;!--远程仓库列表，它是Maven用来填充构建系统本地仓库所使用的一组远程项目。 --&gt; &lt;repositories&gt; &lt;!--包含需要连接到远程仓库的信息 --&gt; &lt;repository&gt; &lt;!--远程仓库唯一标识 --&gt; &lt;id&gt;codehausSnapshots&lt;/id&gt; &lt;!--远程仓库名称 --&gt; &lt;name&gt;Codehaus Snapshots&lt;/name&gt; &lt;!--如何处理远程仓库里发布版本的下载 --&gt; &lt;releases&gt; &lt;!--true或者false表示该仓库是否为下载某种类型构件（发布版，快照版）开启。 --&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;!--该元素指定更新发生的频率。Maven会比较本地POM和远程POM的时间戳。这里的选项是：--&gt; &lt;!--always（一直），daily（默认，每日），interval：X（这里X是以分钟为单位的时间间隔），或者never（从不）。 --&gt; &lt;updatePolicy&gt;always&lt;/updatePolicy&gt; &lt;!--当Maven验证构件校验文件失败时该怎么做:--&gt; &lt;!--ignore（忽略），fail（失败），或者warn（警告）。 --&gt; &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt; &lt;/releases&gt; &lt;!--如何处理远程仓库里快照版本的下载。有了releases和snapshots这两组配置，POM就可以在每个单独的仓库中，为每种类型的构件采取不同的策略。--&gt; &lt;!--例如，可能有人会决定只为开发目的开启对快照版本下载的支持。参见repositories/repository/releases元素 --&gt; &lt;snapshots&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;!--远程仓库URL，按protocol://hostname/path形式 --&gt; &lt;url&gt;http://snapshots.maven.codehaus.org/maven2&lt;/url&gt; &lt;!--用于定位和排序构件的仓库布局类型-可以是default（默认）或者legacy（遗留）。--&gt; &lt;!--Maven 2为其仓库提供了一个默认的布局；然而，Maven 1.x有一种不同的布局。我们可以使用该元素指定布局是default（默认）还是legacy（遗留）。 --&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;!--发现插件的远程仓库列表。仓库是两种主要构件的家。第一种构件被用作其它构件的依赖。这是中央仓库中存储的大部分构件类型。另外一种构件类型是插件。--&gt; &lt;!--Maven插件是一种特殊类型的构件。由于这个原因，插件仓库独立于其它仓库。pluginRepositories元素的结构和repositories元素的结构类似。--&gt; &lt;!--每个pluginRepository元素指定一个Maven可以用来寻找新插件的远程地址。 --&gt; &lt;pluginRepositories&gt; &lt;!--包含需要连接到远程插件仓库的信息.参见profiles/profile/repositories/repository元素的说明 --&gt; &lt;pluginRepository&gt; &lt;releases&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled /&gt; &lt;updatePolicy /&gt; &lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;id /&gt; &lt;name /&gt; &lt;url /&gt; &lt;layout /&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;!--手动激活profiles的列表，按照profile被应用的顺序定义activeProfile。 该元素包含了一组activeProfile元素，每个activeProfile都含有一个profile id。--&gt; &lt;!--任何在activeProfile中定义的profile id，不论环境设置如何，其对应的 profile都会被激活。--&gt; &lt;!--如果没有匹配的profile，则什么都不会发生。例如，env-test是一个activeProfile，则在pom.xml（或者profile.xml）中对应id的profile会被激活。--&gt; &lt;!--如果运行过程中找不到这样一个profile，Maven则会像往常一样运行。 --&gt; &lt;activeProfiles&gt; &lt;activeProfile&gt;env-test&lt;/activeProfile&gt; &lt;/activeProfiles&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;/settings&gt; 上面的配置文件对各个节点的含义及作用都有注解。实际应用中，经常使用的是\\、\\、\\、\\有限几个节点，其他节点使用默认值足够应对大部分的应用场景。 \\节点在仓库的配置一节中，已经对setting.xml中的常用节点做了详细的说明。在这里需要特别介绍一下的是节点的配置，profile是maven的一个重要特性。 \\节点包含了激活(activation)，仓库(repositories)，插件仓库(pluginRepositories)和属性(properties)共四个子元素元素。profile元素仅包含这四个元素是因为他们涉及到整个的构建系统，而不是个别的项目级别的POM配置。 profile可以让maven能够自动适应外部的环境变化，比如同一个项目，在Linux下编译linux的版本，在win下编译win的版本等。一个项目可以设置多个profile，也可以在同一时间设置多个profile被激活（active）的。自动激活的 profile的条件可以是各种各样的设定条件，组合放置在activation节点中，也可以通过命令行直接指定。如果认为profile设置比较复杂，可以将所有的profiles内容移动到专门的 profiles.xml 文件中，不过记得和pom.xml放在一起。 activation节点是设置该profile在什么条件下会被激活，常见的条件有如下几个： os 判断操作系统相关的参数，它包含如下可以自由组合的子节点元素 message - 规则失败之后显示的消息 arch - 匹配cpu结构，常见为x86 family - 匹配操作系统家族，常见的取值为：dos，mac，netware，os/2，unix，windows，win9x，os/400等 name - 匹配操作系统的名字 version - 匹配的操作系统版本号 display - 检测到操作系统之后显示的信息 jdk 检查jdk版本，可以用区间表示。 property 检查属性值，本节点可以包含name和value两个子节点。 file 检查文件相关内容，包含两个子节点：exists和missing，用于分别检查文件存在和不存在两种情况。 如果settings中的profile被激活，那么它的值将覆盖POM或者profiles.xml中的任何相等ID的profiles。 如果想要某个profile默认处于激活状态，可以在\\中将该profile的id放进去。这样，不论环境设置如何，其对应的 profile都会被激活。","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/MAVEN/maven pom.xml文件详解","date":"2017-10-29T07:55:30.000Z","updated":"2017-10-29T07:55:30.000Z","comments":true,"path":"2017/10/29/Java/JavaEE/MAVEN/maven pom.xml文件详解/","link":"","permalink":"http://io.stelawliet.top/2017/10/29/Java/JavaEE/MAVEN/maven pom.xml文件详解/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000100110021003100410051006100710081009101010111012101310141015101610171018101910201021102210231024102510261027102810291030103110321033103410351036103710381039104010411042104310441045104610471048104910501051105210531054105510561057105810591060106110621063106410651066106710681069107010711072107310741075107610771078107910801081108210831084108510861087108810891090109110921093109410951096109710981099110011011102110311041105110611071108110911101111111211131114111511161117111811191120112111221123112411251126112711281129113011311132113311341135113611371138113911401141114211431144114511461147114811491150115111521153115411551156115711581159116011611162116311641165116611671168116911701171117211731174117511761177117811791180118111821183118411851186118711881189119011911192119311941195119611971198119912001201&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd \"&gt; &lt;!-- 父项目的坐标。如果项目中没有规定某个元素的值，那么父项目中的对应值即为项目的默认值。 坐标包括group ID，artifact ID和 version。 --&gt; &lt;parent&gt; &lt;!-- 被继承的父项目的构件标识符 --&gt; &lt;artifactId /&gt; &lt;!-- 被继承的父项目的全球唯一标识符 --&gt; &lt;groupId /&gt; &lt;!-- 被继承的父项目的版本 --&gt; &lt;version /&gt; &lt;!-- 父项目的pom.xml文件的相对路径。相对路径允许你选择一个不同的路径。默认值是../pom.xml。Maven首先在构建当前项目的地方寻找父项目的pom，其次在文件系统的这个位置（relativePath位置），然后在本地仓库，最后在远程仓库寻找父项目的pom。 --&gt; &lt;relativePath /&gt; &lt;/parent&gt; &lt;!-- 声明项目描述符遵循哪一个POM模型版本。模型本身的版本很少改变，虽然如此，但它仍然是必不可少的，这是为了当Maven引入了新的特性或者其他模型变更的时候，确保稳定性。 --&gt; &lt;modelVersion&gt; 4.0.0 &lt;/modelVersion&gt; &lt;!-- 项目的全球唯一标识符，通常使用全限定的包名区分该项目和其他项目。并且构建时生成的路径也是由此生成， 如com.mycompany.app生成的相对路径为：/com/mycompany/app --&gt; &lt;groupId&gt; asia.banseon &lt;/groupId&gt; &lt;!-- 构件的标识符，它和group ID一起唯一标识一个构件。换句话说，你不能有两个不同的项目拥有同样的artifact ID和groupID；在某个特定的group ID下，artifact ID也必须是唯一的。构件是项目产生的或使用的一个东西，Maven为项目产生的构件包括：JARs，源码，二进制发布和WARs等。 --&gt; &lt;artifactId&gt; banseon-maven2 &lt;/artifactId&gt; &lt;!-- 项目产生的构件类型，例如jar、war、ear、pom。插件可以创建他们自己的构件类型，所以前面列的不是全部构件类型 --&gt; &lt;packaging&gt; jar &lt;/packaging&gt; &lt;!-- 项目当前版本，格式为:主版本.次版本.增量版本-限定版本号 --&gt; &lt;version&gt; 1.0-SNAPSHOT &lt;/version&gt; &lt;!-- 项目的名称, Maven产生的文档用 --&gt; &lt;name&gt; banseon-maven &lt;/name&gt; &lt;!-- 项目主页的URL, Maven产生的文档用 --&gt; &lt;url&gt; http://www.baidu.com/banseon &lt;/url&gt; &lt;!-- 项目的详细描述, Maven 产生的文档用。 当这个元素能够用HTML格式描述时（例如，CDATA中的文本会被解析器忽略，就可以包含HTML标签）， 不鼓励使用纯文本描述。如果你需要修改产生的web站点的索引页面，你应该修改你自己的索引页文件，而不是调整这里的文档。 --&gt; &lt;description&gt; A maven project to study maven. &lt;/description&gt; &lt;!-- 描述了这个项目构建环境中的前提条件。 --&gt; &lt;prerequisites&gt; &lt;!-- 构建该项目或使用该插件所需要的Maven的最低版本 --&gt; &lt;maven /&gt; &lt;/prerequisites&gt; &lt;!-- 项目的问题管理系统(Bugzilla, Jira, Scarab,或任何你喜欢的问题管理系统)的名称和URL，本例为 jira --&gt; &lt;issueManagement&gt; &lt;!-- 问题管理系统（例如jira）的名字， --&gt; &lt;system&gt; jira &lt;/system&gt; &lt;!-- 该项目使用的问题管理系统的URL --&gt; &lt;url&gt; http://jira.baidu.com/banseon &lt;/url&gt; &lt;/issueManagement&gt; &lt;!-- 项目持续集成信息 --&gt; &lt;ciManagement&gt; &lt;!-- 持续集成系统的名字，例如continuum --&gt; &lt;system /&gt; &lt;!-- 该项目使用的持续集成系统的URL（如果持续集成系统有web接口的话）。 --&gt; &lt;url /&gt; &lt;!-- 构建完成时，需要通知的开发者/用户的配置项。包括被通知者信息和通知条件（错误，失败，成功，警告） --&gt; &lt;notifiers&gt; &lt;!-- 配置一种方式，当构建中断时，以该方式通知用户/开发者 --&gt; &lt;notifier&gt; &lt;!-- 传送通知的途径 --&gt; &lt;type /&gt; &lt;!-- 发生错误时是否通知 --&gt; &lt;sendOnError /&gt; &lt;!-- 构建失败时是否通知 --&gt; &lt;sendOnFailure /&gt; &lt;!-- 构建成功时是否通知 --&gt; &lt;sendOnSuccess /&gt; &lt;!-- 发生警告时是否通知 --&gt; &lt;sendOnWarning /&gt; &lt;!-- 不赞成使用。通知发送到哪里 --&gt; &lt;address /&gt; &lt;!-- 扩展配置项 --&gt; &lt;configuration /&gt; &lt;/notifier&gt; &lt;/notifiers&gt; &lt;/ciManagement&gt; &lt;!-- 项目创建年份，4位数字。当产生版权信息时需要使用这个值。 --&gt; &lt;inceptionYear /&gt; &lt;!-- 项目相关邮件列表信息 --&gt; &lt;mailingLists&gt; &lt;!-- 该元素描述了项目相关的所有邮件列表。自动产生的网站引用这些信息。 --&gt; &lt;mailingList&gt; &lt;!-- 邮件的名称 --&gt; &lt;name&gt; Demo &lt;/name&gt; &lt;!-- 发送邮件的地址或链接，如果是邮件地址，创建文档时，mailto: 链接会被自动创建 --&gt; &lt;post&gt; banseon@126.com &lt;/post&gt; &lt;!-- 订阅邮件的地址或链接，如果是邮件地址，创建文档时，mailto: 链接会被自动创建 --&gt; &lt;subscribe&gt; banseon@126.com &lt;/subscribe&gt; &lt;!-- 取消订阅邮件的地址或链接，如果是邮件地址，创建文档时，mailto: 链接会被自动创建 --&gt; &lt;unsubscribe&gt; banseon@126.com &lt;/unsubscribe&gt; &lt;!-- 你可以浏览邮件信息的URL --&gt; &lt;archive&gt; http:/hi.baidu.com/banseon/demo/dev/ &lt;/archive&gt; &lt;/mailingList&gt; &lt;/mailingLists&gt; &lt;!-- 项目开发者列表 --&gt; &lt;developers&gt; &lt;!-- 某个项目开发者的信息 --&gt; &lt;developer&gt; &lt;!-- SCM里项目开发者的唯一标识符 --&gt; &lt;id&gt; HELLO WORLD &lt;/id&gt; &lt;!-- 项目开发者的全名 --&gt; &lt;name&gt; banseon &lt;/name&gt; &lt;!-- 项目开发者的email --&gt; &lt;email&gt; banseon@126.com &lt;/email&gt; &lt;!-- 项目开发者的主页的URL --&gt; &lt;url /&gt; &lt;!-- 项目开发者在项目中扮演的角色，角色元素描述了各种角色 --&gt; &lt;roles&gt; &lt;role&gt; Project Manager &lt;/role&gt; &lt;role&gt; Architect &lt;/role&gt; &lt;/roles&gt; &lt;!-- 项目开发者所属组织 --&gt; &lt;organization&gt; demo &lt;/organization&gt; &lt;!-- 项目开发者所属组织的URL --&gt; &lt;organizationUrl&gt; http://hi.baidu.com/banseon &lt;/organizationUrl&gt; &lt;!-- 项目开发者属性，如即时消息如何处理等 --&gt; &lt;properties&gt; &lt;dept&gt; No &lt;/dept&gt; &lt;/properties&gt; &lt;!-- 项目开发者所在时区， -11到12范围内的整数。 --&gt; &lt;timezone&gt; -5 &lt;/timezone&gt; &lt;/developer&gt; &lt;/developers&gt; &lt;!-- 项目的其他贡献者列表 --&gt; &lt;contributors&gt; &lt;!-- 项目的其他贡献者。参见developers/developer元素 --&gt; &lt;contributor&gt; &lt;name /&gt;&lt;email /&gt;&lt;url /&gt;&lt;organization /&gt;&lt;organizationUrl /&gt;&lt;roles /&gt;&lt;timezone /&gt;&lt;properties /&gt; &lt;/contributor&gt; &lt;/contributors&gt; &lt;!-- 该元素描述了项目所有License列表。 应该只列出该项目的license列表，不要列出依赖项目的 license列表。如果列出多个license，用户可以选择它们中的一个而不是接受所有license。 --&gt; &lt;licenses&gt; &lt;!-- 描述了项目的license，用于生成项目的web站点的license页面，其他一些报表和validation也会用到该元素。 --&gt; &lt;license&gt; &lt;!-- license用于法律上的名称 --&gt; &lt;name&gt; Apache 2 &lt;/name&gt; &lt;!-- 官方的license正文页面的URL --&gt; &lt;url&gt; http://www.baidu.com/banseon/LICENSE-2.0.txt &lt;/url&gt; &lt;!-- 项目分发的主要方式： repo，可以从Maven库下载 manual， 用户必须手动下载和安装依赖 --&gt; &lt;distribution&gt; repo &lt;/distribution&gt; &lt;!-- 关于license的补充信息 --&gt; &lt;comments&gt; A business-friendly OSS license &lt;/comments&gt; &lt;/license&gt; &lt;/licenses&gt; &lt;!-- SCM(Source Control Management)标签允许你配置你的代码库，供Maven web站点和其它插件使用。 --&gt; &lt;scm&gt; &lt;!-- SCM的URL,该URL描述了版本库和如何连接到版本库。欲知详情，请看SCMs提供的URL格式和列表。该连接只读。 --&gt; &lt;connection&gt; scm:svn:http://svn.baidu.com/banseon/maven/banseon/banseon-maven2-trunk(dao-trunk) &lt;/connection&gt; &lt;!-- 给开发者使用的，类似connection元素。即该连接不仅仅只读 --&gt; &lt;developerConnection&gt; scm:svn:http://svn.baidu.com/banseon/maven/banseon/dao-trunk &lt;/developerConnection&gt; &lt;!-- 当前代码的标签，在开发阶段默认为HEAD --&gt; &lt;tag /&gt; &lt;!-- 指向项目的可浏览SCM库（例如ViewVC或者Fisheye）的URL。 --&gt; &lt;url&gt; http://svn.baidu.com/banseon &lt;/url&gt; &lt;/scm&gt; &lt;!-- 描述项目所属组织的各种属性。Maven产生的文档用 --&gt; &lt;organization&gt; &lt;!-- 组织的全名 --&gt; &lt;name&gt; demo &lt;/name&gt; &lt;!-- 组织主页的URL --&gt; &lt;url&gt; http://www.baidu.com/banseon &lt;/url&gt; &lt;/organization&gt; &lt;!-- 构建项目需要的信息 --&gt; &lt;build&gt; &lt;!-- 该元素设置了项目源码目录，当构建项目的时候，构建系统会编译目录里的源码。该路径是相对于pom.xml的相对路径。 --&gt; &lt;sourceDirectory /&gt; &lt;!-- 该元素设置了项目脚本源码目录，该目录和源码目录不同：绝大多数情况下，该目录下的内容 会被拷贝到输出目录(因为脚本是被解释的，而不是被编译的)。 --&gt; &lt;scriptSourceDirectory /&gt; &lt;!-- 该元素设置了项目单元测试使用的源码目录，当测试项目的时候，构建系统会编译目录里的源码。该路径是相对于pom.xml的相对路径。 --&gt; &lt;testSourceDirectory /&gt; &lt;!-- 被编译过的应用程序class文件存放的目录。 --&gt; &lt;outputDirectory /&gt; &lt;!-- 被编译过的测试class文件存放的目录。 --&gt; &lt;testOutputDirectory /&gt; &lt;!-- 使用来自该项目的一系列构建扩展 --&gt; &lt;extensions&gt; &lt;!-- 描述使用到的构建扩展。 --&gt; &lt;extension&gt; &lt;!-- 构建扩展的groupId --&gt; &lt;groupId /&gt; &lt;!-- 构建扩展的artifactId --&gt; &lt;artifactId /&gt; &lt;!-- 构建扩展的版本 --&gt; &lt;version /&gt; &lt;/extension&gt; &lt;/extensions&gt; &lt;!-- 当项目没有规定目标（Maven2 叫做阶段）时的默认值 --&gt; &lt;defaultGoal /&gt; &lt;!-- 这个元素描述了项目相关的所有资源路径列表，例如和项目相关的属性文件，这些资源被包含在最终的打包文件里。 --&gt; &lt;resources&gt; &lt;!-- 这个元素描述了项目相关或测试相关的所有资源路径 --&gt; &lt;resource&gt; &lt;!-- 描述了资源的目标路径。该路径相对target/classes目录（例如$&#123;project.build.outputDirectory&#125;）。举个例子，如果你想资源在特定的包里(org.apache.maven.messages)，你就必须该元素设置为org/apache/maven/messages。然而，如果你只是想把资源放到源码目录结构里，就不需要该配置。 --&gt; &lt;targetPath /&gt; &lt;!-- 是否使用参数值代替参数名。参数值取自properties元素或者文件里配置的属性，文件在filters元素里列出。 --&gt; &lt;filtering /&gt; &lt;!-- 描述存放资源的目录，该路径相对POM路径 --&gt; &lt;directory /&gt; &lt;!-- 包含的模式列表，例如**/*.xml. --&gt; &lt;includes /&gt; &lt;!-- 排除的模式列表，例如**/*.xml --&gt; &lt;excludes /&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;!-- 这个元素描述了单元测试相关的所有资源路径，例如和单元测试相关的属性文件。 --&gt; &lt;testResources&gt; &lt;!-- 这个元素描述了测试相关的所有资源路径，参见build/resources/resource元素的说明 --&gt; &lt;testResource&gt; &lt;targetPath /&gt;&lt;filtering /&gt;&lt;directory /&gt;&lt;includes /&gt;&lt;excludes /&gt; &lt;/testResource&gt; &lt;/testResources&gt; &lt;!-- 构建产生的所有文件存放的目录 --&gt; &lt;directory /&gt; &lt;!-- 产生的构件的文件名，默认值是$&#123;artifactId&#125;-$&#123;version&#125;。 --&gt; &lt;finalName /&gt; &lt;!-- 当filtering开关打开时，使用到的过滤器属性文件列表 --&gt; &lt;filters /&gt; &lt;!-- 子项目可以引用的默认插件信息。该插件配置项直到被引用时才会被解析或绑定到生命周期。给定插件的任何本地配置都会覆盖这里的配置 --&gt; &lt;pluginManagement&gt; &lt;!-- 使用的插件列表 。 --&gt; &lt;plugins&gt; &lt;!-- plugin元素包含描述插件所需要的信息。 --&gt; &lt;plugin&gt; &lt;!-- 插件在仓库里的group ID --&gt; &lt;groupId /&gt; &lt;!-- 插件在仓库里的artifact ID --&gt; &lt;artifactId /&gt; &lt;!-- 被使用的插件的版本（或版本范围） --&gt; &lt;version /&gt; &lt;!-- 是否从该插件下载Maven扩展（例如打包和类型处理器），由于性能原因，只有在真需要下载时，该元素才被设置成enabled。 --&gt; &lt;extensions /&gt; &lt;!-- 在构建生命周期中执行一组目标的配置。每个目标可能有不同的配置。 --&gt; &lt;executions&gt; &lt;!-- execution元素包含了插件执行需要的信息 --&gt; &lt;execution&gt; &lt;!-- 执行目标的标识符，用于标识构建过程中的目标，或者匹配继承过程中需要合并的执行目标 --&gt; &lt;id /&gt; &lt;!-- 绑定了目标的构建生命周期阶段，如果省略，目标会被绑定到源数据里配置的默认阶段 --&gt; &lt;phase /&gt; &lt;!-- 配置的执行目标 --&gt; &lt;goals /&gt; &lt;!-- 配置是否被传播到子POM --&gt; &lt;inherited /&gt; &lt;!-- 作为DOM对象的配置 --&gt; &lt;configuration /&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;!-- 项目引入插件所需要的额外依赖 --&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;!-- 任何配置是否被传播到子项目 --&gt; &lt;inherited /&gt; &lt;!-- 作为DOM对象的配置 --&gt; &lt;configuration /&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;!-- 使用的插件列表 --&gt; &lt;plugins&gt; &lt;!-- 参见build/pluginManagement/plugins/plugin元素 --&gt; &lt;plugin&gt; &lt;groupId /&gt;&lt;artifactId /&gt;&lt;version /&gt;&lt;extensions /&gt; &lt;executions&gt; &lt;execution&gt; &lt;id /&gt;&lt;phase /&gt;&lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;!-- 在列的项目构建profile，如果被激活，会修改构建处理 --&gt; &lt;profiles&gt; &lt;!-- 根据环境参数或命令行参数激活某个构建处理 --&gt; &lt;profile&gt; &lt;!-- 构建配置的唯一标识符。即用于命令行激活，也用于在继承时合并具有相同标识符的profile。 --&gt; &lt;id /&gt; &lt;!-- 自动触发profile的条件逻辑。Activation是profile的开启钥匙。profile的力量来自于它 能够在某些特定的环境中自动使用某些特定的值；这些环境通过activation元素指定。activation元素并不是激活profile的唯一方式。 --&gt; &lt;activation&gt; &lt;!-- profile默认是否激活的标志 --&gt; &lt;activeByDefault /&gt; &lt;!-- 当匹配的jdk被检测到，profile被激活。例如，1.4激活JDK1.4，1.4.0_2，而!1.4激活所有版本不是以1.4开头的JDK。 --&gt; &lt;jdk /&gt; &lt;!-- 当匹配的操作系统属性被检测到，profile被激活。os元素可以定义一些操作系统相关的属性。 --&gt; &lt;os&gt; &lt;!-- 激活profile的操作系统的名字 --&gt; &lt;name&gt; Windows XP &lt;/name&gt; &lt;!-- 激活profile的操作系统所属家族(如 'windows') --&gt; &lt;family&gt; Windows &lt;/family&gt; &lt;!-- 激活profile的操作系统体系结构 --&gt; &lt;arch&gt; x86 &lt;/arch&gt; &lt;!-- 激活profile的操作系统版本 --&gt; &lt;version&gt; 5.1.2600 &lt;/version&gt; &lt;/os&gt; &lt;!-- 如果Maven检测到某一个属性（其值可以在POM中通过$&#123;名称&#125;引用），其拥有对应的名称和值，Profile就会被激活。如果值 字段是空的，那么存在属性名称字段就会激活profile，否则按区分大小写方式匹配属性值字段 --&gt; &lt;property&gt; &lt;!-- 激活profile的属性的名称 --&gt; &lt;name&gt; mavenVersion &lt;/name&gt; &lt;!-- 激活profile的属性的值 --&gt; &lt;value&gt; 2.0.3 &lt;/value&gt; &lt;/property&gt; &lt;!-- 提供一个文件名，通过检测该文件的存在或不存在来激活profile。missing检查文件是否存在，如果不存在则激活 profile。另一方面，exists则会检查文件是否存在，如果存在则激活profile。 --&gt; &lt;file&gt; &lt;!-- 如果指定的文件存在，则激活profile。 --&gt; &lt;exists&gt; /usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/ &lt;/exists&gt; &lt;!-- 如果指定的文件不存在，则激活profile。 --&gt; &lt;missing&gt; /usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/ &lt;/missing&gt; &lt;/file&gt; &lt;/activation&gt; &lt;!-- 构建项目所需要的信息。参见build元素 --&gt; &lt;build&gt; &lt;defaultGoal /&gt; &lt;resources&gt; &lt;resource&gt; &lt;targetPath /&gt;&lt;filtering /&gt;&lt;directory /&gt;&lt;includes /&gt;&lt;excludes /&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;testResources&gt; &lt;testResource&gt; &lt;targetPath /&gt;&lt;filtering /&gt;&lt;directory /&gt;&lt;includes /&gt;&lt;excludes /&gt; &lt;/testResource&gt; &lt;/testResources&gt; &lt;directory /&gt;&lt;finalName /&gt;&lt;filters /&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;!-- 参见build/pluginManagement/plugins/plugin元素 --&gt; &lt;plugin&gt; &lt;groupId /&gt;&lt;artifactId /&gt;&lt;version /&gt;&lt;extensions /&gt; &lt;executions&gt; &lt;execution&gt; &lt;id /&gt;&lt;phase /&gt;&lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;plugins&gt; &lt;!-- 参见build/pluginManagement/plugins/plugin元素 --&gt; &lt;plugin&gt; &lt;groupId /&gt;&lt;artifactId /&gt;&lt;version /&gt;&lt;extensions /&gt; &lt;executions&gt; &lt;execution&gt; &lt;id /&gt;&lt;phase /&gt;&lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;goals /&gt;&lt;inherited /&gt;&lt;configuration /&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;!-- 模块（有时称作子项目） 被构建成项目的一部分。列出的每个模块元素是指向该模块的目录的相对路径 --&gt; &lt;modules /&gt; &lt;!-- 发现依赖和扩展的远程仓库列表。 --&gt; &lt;repositories&gt; &lt;!-- 参见repositories/repository元素 --&gt; &lt;repository&gt; &lt;releases&gt; &lt;enabled /&gt;&lt;updatePolicy /&gt;&lt;checksumPolicy /&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled /&gt;&lt;updatePolicy /&gt;&lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;id /&gt;&lt;name /&gt;&lt;url /&gt;&lt;layout /&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;!-- 发现插件的远程仓库列表，这些插件用于构建和报表 --&gt; &lt;pluginRepositories&gt; &lt;!-- 包含需要连接到远程插件仓库的信息.参见repositories/repository元素 --&gt; &lt;pluginRepository&gt; &lt;releases&gt; &lt;enabled /&gt;&lt;updatePolicy /&gt;&lt;checksumPolicy /&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled /&gt;&lt;updatePolicy /&gt;&lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;id /&gt;&lt;name /&gt;&lt;url /&gt;&lt;layout /&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;!-- 该元素描述了项目相关的所有依赖。 这些依赖组成了项目构建过程中的一个个环节。它们自动从项目定义的仓库中下载。要获取更多信息，请看项目依赖机制。 --&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;!-- 不赞成使用. 现在Maven忽略该元素. --&gt; &lt;reports /&gt; &lt;!-- 该元素包括使用报表插件产生报表的规范。当用户执行“mvn site”，这些报表就会运行。 在页面导航栏能看到所有报表的链接。参见reporting元素 --&gt; &lt;reporting&gt; &lt;/reporting&gt; &lt;!-- 参见dependencyManagement元素 --&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;!-- 参见distributionManagement元素 --&gt; &lt;distributionManagement&gt; &lt;/distributionManagement&gt; &lt;!-- 参见properties元素 --&gt; &lt;properties /&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;!-- 模块（有时称作子项目） 被构建成项目的一部分。列出的每个模块元素是指向该模块的目录的相对路径 --&gt; &lt;modules /&gt; &lt;!-- 发现依赖和扩展的远程仓库列表。 --&gt; &lt;repositories&gt; &lt;!-- 包含需要连接到远程仓库的信息 --&gt; &lt;repository&gt; &lt;!-- 如何处理远程仓库里发布版本的下载 --&gt; &lt;releases&gt; &lt;!-- true或者false表示该仓库是否为下载某种类型构件（发布版，快照版）开启。 --&gt; &lt;enabled /&gt; &lt;!-- 该元素指定更新发生的频率。Maven会比较本地POM和远程POM的时间戳。这里的选项是：always（一直），daily（默认，每日），interval：X（这里X是以分钟为单位的时间间隔），或者never（从不）。 --&gt; &lt;updatePolicy /&gt; &lt;!-- 当Maven验证构件校验文件失败时该怎么做：ignore（忽略），fail（失败），或者warn（警告）。 --&gt; &lt;checksumPolicy /&gt; &lt;/releases&gt; &lt;!-- 如何处理远程仓库里快照版本的下载。有了releases和snapshots这两组配置，POM就可以在每个单独的仓库中，为每种类型的构件采取不同的策略。例如，可能有人会决定只为开发目的开启对快照版本下载的支持。参见repositories/repository/releases元素 --&gt; &lt;snapshots&gt; &lt;enabled /&gt;&lt;updatePolicy /&gt;&lt;checksumPolicy /&gt; &lt;/snapshots&gt; &lt;!-- 远程仓库唯一标识符。可以用来匹配在settings.xml文件里配置的远程仓库 --&gt; &lt;id&gt; banseon-repository-proxy &lt;/id&gt; &lt;!-- 远程仓库名称 --&gt; &lt;name&gt; banseon-repository-proxy &lt;/name&gt; &lt;!-- 远程仓库URL，按protocol://hostname/path形式 --&gt; &lt;url&gt; http://192.168.1.169:9999/repository/ &lt;/url&gt; &lt;!-- 用于定位和排序构件的仓库布局类型-可以是default（默认）或者legacy（遗留）。Maven 2为其仓库提供了一个默认的布局；然而，Maven 1.x有一种不同的布局。我们可以使用该元素指定布局是default（默认）还是legacy（遗留）。 --&gt; &lt;layout&gt; default &lt;/layout&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;!-- 发现插件的远程仓库列表，这些插件用于构建和报表 --&gt; &lt;pluginRepositories&gt; &lt;!-- 包含需要连接到远程插件仓库的信息.参见repositories/repository元素 --&gt; &lt;pluginRepository&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;!-- 该元素描述了项目相关的所有依赖。 这些依赖组成了项目构建过程中的一个个环节。它们自动从项目定义的仓库中下载。要获取更多信息，请看项目依赖机制。 --&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;!-- 依赖的group ID --&gt; &lt;groupId&gt; org.apache.maven &lt;/groupId&gt; &lt;!-- 依赖的artifact ID --&gt; &lt;artifactId&gt; maven-artifact &lt;/artifactId&gt; &lt;!-- 依赖的版本号。 在Maven 2里, 也可以配置成版本号的范围。 --&gt; &lt;version&gt; 3.8.1 &lt;/version&gt; &lt;!-- 依赖类型，默认类型是jar。它通常表示依赖的文件的扩展名，但也有例外。一个类型可以被映射成另外一个扩展名或分类器。类型经常和使用的打包方式对应，尽管这也有例外。一些类型的例子：jar，war，ejb-client和test-jar。如果设置extensions为 true，就可以在plugin里定义新的类型。所以前面的类型的例子不完整。 --&gt; &lt;type&gt; jar &lt;/type&gt; &lt;!-- 依赖的分类器。分类器可以区分属于同一个POM，但不同构建方式的构件。分类器名被附加到文件名的版本号后面。例如，如果你想要构建两个单独的构件成JAR，一个使用Java 1.4编译器，另一个使用Java 6编译器，你就可以使用分类器来生成两个单独的JAR构件。 --&gt; &lt;classifier&gt;&lt;/classifier&gt; &lt;!-- 依赖范围。在项目发布过程中，帮助决定哪些构件被包括进来。欲知详情请参考依赖机制。 - compile ：默认范围，用于编译 - provided：类似于编译，但支持你期待jdk或者容器提供，类似于classpath - runtime: 在执行时需要使用 - test: 用于test任务时使用 - system: 需要外在提供相应的元素。通过systemPath来取得 - systemPath: 仅用于范围为system。提供相应的路径 - optional: 当项目自身被依赖时，标注依赖是否传递。用于连续依赖时使用 --&gt; &lt;scope&gt; test &lt;/scope&gt; &lt;!-- 仅供system范围使用。注意，不鼓励使用这个元素，并且在新的版本中该元素可能被覆盖掉。该元素为依赖规定了文件系统上的路径。需要绝对路径而不是相对路径。推荐使用属性匹配绝对路径，例如$&#123;java.home&#125;。 --&gt; &lt;systemPath&gt;&lt;/systemPath&gt; &lt;!-- 当计算传递依赖时， 从依赖构件列表里，列出被排除的依赖构件集。即告诉maven你只依赖指定的项目，不依赖项目的依赖。此元素主要用于解决版本冲突问题 --&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt; spring-core &lt;/artifactId&gt; &lt;groupId&gt; org.springframework &lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;!-- 可选依赖，如果你在项目B中把C依赖声明为可选，你就需要在依赖于B的项目（例如项目A）中显式的引用对C的依赖。可选依赖阻断依赖的传递性。 --&gt; &lt;optional&gt; true &lt;/optional&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;!-- 不赞成使用. 现在Maven忽略该元素. --&gt; &lt;reports&gt;&lt;/reports&gt; &lt;!-- 该元素描述使用报表插件产生报表的规范。当用户执行“mvn site”，这些报表就会运行。 在页面导航栏能看到所有报表的链接。 --&gt; &lt;reporting&gt; &lt;!-- true，则，网站不包括默认的报表。这包括“项目信息”菜单中的报表。 --&gt; &lt;excludeDefaults /&gt; &lt;!-- 所有产生的报表存放到哪里。默认值是$&#123;project.build.directory&#125;/site。 --&gt; &lt;outputDirectory /&gt; &lt;!-- 使用的报表插件和他们的配置。 --&gt; &lt;plugins&gt; &lt;!-- plugin元素包含描述报表插件需要的信息 --&gt; &lt;plugin&gt; &lt;!-- 报表插件在仓库里的group ID --&gt; &lt;groupId /&gt; &lt;!-- 报表插件在仓库里的artifact ID --&gt; &lt;artifactId /&gt; &lt;!-- 被使用的报表插件的版本（或版本范围） --&gt; &lt;version /&gt; &lt;!-- 任何配置是否被传播到子项目 --&gt; &lt;inherited /&gt; &lt;!-- 报表插件的配置 --&gt; &lt;configuration /&gt; &lt;!-- 一组报表的多重规范，每个规范可能有不同的配置。一个规范（报表集）对应一个执行目标 。例如，有1，2，3，4，5，6，7，8，9个报表。1，2，5构成A报表集，对应一个执行目标。2，5，8构成B报表集，对应另一个执行目标 --&gt; &lt;reportSets&gt; &lt;!-- 表示报表的一个集合，以及产生该集合的配置 --&gt; &lt;reportSet&gt; &lt;!-- 报表集合的唯一标识符，POM继承时用到 --&gt; &lt;id /&gt; &lt;!-- 产生报表集合时，被使用的报表的配置 --&gt; &lt;configuration /&gt; &lt;!-- 配置是否被继承到子POMs --&gt; &lt;inherited /&gt; &lt;!-- 这个集合里使用到哪些报表 --&gt; &lt;reports /&gt; &lt;/reportSet&gt; &lt;/reportSets&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/reporting&gt; &lt;!-- 继承自该项目的所有子项目的默认依赖信息。这部分的依赖信息不会被立即解析,而是当子项目声明一个依赖（必须描述group ID和artifact ID信息），如果group ID和artifact ID以外的一些信息没有描述，则通过group ID和artifact ID匹配到这里的依赖，并使用这里的依赖信息。 --&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;!-- 参见dependencies/dependency元素 --&gt; &lt;dependency&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;!-- 项目分发信息，在执行mvn deploy后表示要发布的位置。有了这些信息就可以把网站部署到远程服务器或者把构件部署到远程仓库。 --&gt; &lt;distributionManagement&gt; &lt;!-- 部署项目产生的构件到远程仓库需要的信息 --&gt; &lt;repository&gt; &lt;!-- 是分配给快照一个唯一的版本号（由时间戳和构建流水号）？还是每次都使用相同的版本号？参见repositories/repository元素 --&gt; &lt;uniqueVersion /&gt; &lt;id&gt; banseon-maven2 &lt;/id&gt; &lt;name&gt; banseon maven2 &lt;/name&gt; &lt;url&gt; file://$&#123;basedir&#125;/target/deploy &lt;/url&gt; &lt;layout /&gt; &lt;/repository&gt; &lt;!-- 构件的快照部署到哪里？如果没有配置该元素，默认部署到repository元素配置的仓库，参见distributionManagement/repository元素 --&gt; &lt;snapshotRepository&gt; &lt;uniqueVersion /&gt; &lt;id&gt; banseon-maven2 &lt;/id&gt; &lt;name&gt; Banseon-maven2 Snapshot Repository &lt;/name&gt; &lt;url&gt; scp://svn.baidu.com/banseon:/usr/local/maven-snapshot &lt;/url&gt; &lt;layout /&gt; &lt;/snapshotRepository&gt; &lt;!-- 部署项目的网站需要的信息 --&gt; &lt;site&gt; &lt;!-- 部署位置的唯一标识符，用来匹配站点和settings.xml文件里的配置 --&gt; &lt;id&gt; banseon-site &lt;/id&gt; &lt;!-- 部署位置的名称 --&gt; &lt;name&gt; business api website &lt;/name&gt; &lt;!-- 部署位置的URL，按protocol://hostname/path形式 --&gt; &lt;url&gt; scp://svn.baidu.com/banseon:/var/www/localhost/banseon-web &lt;/url&gt; &lt;/site&gt; &lt;!-- 项目下载页面的URL。如果没有该元素，用户应该参考主页。使用该元素的原因是：帮助定位那些不在仓库里的构件（由于license限制）。 --&gt; &lt;downloadUrl /&gt; &lt;!-- 如果构件有了新的group ID和artifact ID（构件移到了新的位置），这里列出构件的重定位信息。 --&gt; &lt;relocation&gt; &lt;!-- 构件新的group ID --&gt; &lt;groupId /&gt; &lt;!-- 构件新的artifact ID --&gt; &lt;artifactId /&gt; &lt;!-- 构件新的版本号 --&gt; &lt;version /&gt; &lt;!-- 显示给用户的，关于移动的额外信息，例如原因。 --&gt; &lt;message /&gt; &lt;/relocation&gt; &lt;!-- 给出该构件在远程仓库的状态。不得在本地项目中设置该元素，因为这是工具自动更新的。有效的值有：none（默认），converted（仓库管理员从Maven 1 POM转换过来），partner（直接从伙伴Maven 2仓库同步过来），deployed（从Maven 2实例部署），verified（被核实时正确的和最终的）。 --&gt; &lt;status /&gt; &lt;/distributionManagement&gt; &lt;!-- 以值替代名称，Properties可以在整个POM中使用，也可以作为触发条件（见settings.xml配置文件里activation元素的说明）。格式是&lt;name&gt;value&lt;/name&gt;。 --&gt; &lt;properties /&gt; &lt;/project&gt;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/java学习总论","date":"2017-10-29T04:10:38.000Z","updated":"2017-10-29T04:10:38.000Z","comments":true,"path":"2017/10/29/Java/JavaEE/java学习总论/","link":"","permalink":"http://io.stelawliet.top/2017/10/29/Java/JavaEE/java学习总论/","excerpt":"","text":"java学习总论转载 2011年12月06日 17:20:48 标签： java / documentation / weblogic / ejb / jdk / websphere **713 一、 JDK (Java Development Kit)JDK 是整个Java的核心，包括了Java运行环境（Java Runtime Envirnment），一堆Java工具和Java基础的类库(rt.jar)。不论什么Java应用服务器实质都是内置了某个版本的JDK。因此掌握 JDK是学好Java的第一步。最主流的JDK是Sun公司发布的JDK，除了Sun之外，还有很多公司和组织都开发了自己的JDK，例如IBM公司开发的JDK，BEA公司的Jrocket，还有GNU组织开发的JDK等等。其中IBM的JDK包含的JVM（Java Virtual Machine）运行效率要比Sun JDK包含的JVM高出许多。而专门运行在x86平台的Jrocket在服务端运行效率也要比Sun JDK好很多。但不管怎么说，我们还是需要先把Sun JDK掌握好。1、 JDK的下载和安装JDK又叫做J2SE （Java2 SDK Standard Edition），可以从Sun的Java网站上下载到，http://java.sun.com/j2se/downloads.html ;，JDK当前最新的版本是J2SDK1.4.2，建议下载该版本的JDK，下载页面在这里：http: //java.sun.com/j2se/1.4.2/download.html。下载好的JDK是一个可执行安装程序，默认安装完毕后会在C:/Program Files/Java/目录下安装一套JRE（供浏览器来使用），在C:/j2sdk1.4.2下安装一套JDK（也包括一套JRE）。然后我们需要在环境变量PATH的最前面增加java的路径C:/j2sdk1.4.2/bin。这样JDK就安装好了。2、 JDK的命令工具JDK的最重要命令行工具：java： 启动JVM执行classjavac： Java编译器jar： Java打包工具javadoc： Java文档生成器这些命令行必须要非常非常熟悉，对于每个参数都要很精通才行。对于这些命令的学习，JDK Documentation上有详细的文档。二、 JDK DocumentationDocumentation 在JDK的下载页面也有下载连接，建议同时下载Documentation。Documentation是最最重要的编程手册，涵盖了整个Java所有方面的内容的描述。可以这样说，学习Java编程，大部分时间都是花在看这个Documentation上面的。我是随身携带的，写Java代码的时候，随时查看，须臾不离手。三、 应用服务器(App Server)App Server是运行Java企业组件的平台，构成了应用软件的主要运行环境。当前主流的App Server是BEA公司的Weblogic Server和IBM公司的Websphere以及免费的Jboss，选择其中一个进行学习就可以了，个人推荐Weblogic，因为它的体系结构更加干净，开发和部署更加方便，是Java企业软件开发人员首选的开发平台。下面简要介绍几种常用的App Server：1、 TomcatTomcat 严格意义上并不是一个真正的App Server，它只是一个可以支持运行Serlvet/JSP的Web容器，不过Tomcat也扩展了一些App Server的功能，如JNDI，数据库连接池，用户事务处理等等。Tomcat被非常广泛的应用在中小规模的Java Web应用中，因此本文做一点下载、安装和配置Tomcat的介绍：Tomcat是Apache组织下Jakarta项目下的一个子项目，它的主网站是：http://jakarta.apache.org/tomcat/ ;，Tomcat最新版本是Tomcat4.1.27，软件下载的连接是：http: //www.apache.org/dist/jakarta/tomcat-4/binaries/ ;。下载Tomcat既可以直接下载zip包，也可以下载exe安装包（个人建议zip更干净些），不管哪种情况，下载完毕安装好以后（zip直接解压缩就可以了）。需要设置两个环境变量：JAVA_HOME=C:/j2sdk1.4.2CATALINA_HOME=D:/tomcat4 (你的Tomcat安装目录)这样就安装好了，启动Tomcat运行CATALINA_HOME/bin/startup.bat，关闭Tomcat运行shutdown.bat脚本。 Tomcat启动以后，默认使用8080端口，因此可以用浏览器访问http://localhost:8080来测试Tomcat是否正常启动。Tomcat提供了两个Web界面的管理工具，URL分别是：http://localhost:8080/admin/index.jsp ;http://localhost:8080/manager/html ;在启用这两个管理工具之前，先需要手工配置一下管理员用户和口令。用一个文本工具打开CATALINA_HOME/conf/tomcat-users.xml这个文件，加入如下几行：这样用户“robbin”就具备了超级管理员权限。重新启动Tomcat以后，你就可以使用该用户来登陆如上的两个管理工具，通过Web方式进行Tomcat的配置和管理了。2、 BEA WeblogicWeblogic 可以到BEA的网站上免费注册之后下载到最新的Weblogic8.1企业版，License可以免费使用1年时间，其实这已经完全足够了。 Weblogic的下载连接：http://commerce.bea.com/index.jsp，Weblogic的在线文档：http: //edocs.bea.com/ ;。3、 IBM WebshpereWebsphere同样可以下载到免费的试用版本，到IBM的developerWorks网站可以看到Websphere试用产品的下载和相关的Websphere的资料， developerWorks中文网站的连接是：http://www-900.ibm.com/developerWorks/cn/wsdd/ ;，Websphere的下载连接：http: //www7b.software.ibm.com/wsdd/downloads/WASsupport.html ;。4、 JbossJboss 是免费开源的App Server，可以免费的从Jboss网站下载：http://www.jboss.org/index.html，然而Jboss的文档是不免费，需要花钱购买，所以为我们学习Jboss设置了一定的障碍。在Jdon上有几篇不错的Jboss配置文档，可以用来参考：http: //www.jdon.com/idea.html ;四、 Java应用的运行环境Java的应用可以简单分为以下几个方面：1、 Java的桌面应用桌面应用一般仅仅需要JRE的支持就足够了。2、 Java Web应用Java的Web应用至少需要安装JDK和一个web容器（例如Tomcat），以及一个多用户数据库，Web应用至少分为三层：Browser层：浏览器显示用户页面Web层：运行Servlet/JSPDB层：后端数据库，向Java程序提供数据访问服务3、 Java企业级应用企业级应用比较复杂，可以扩展到n层，最简单情况会分为4层：Browser层：浏览器显示用户页面Client层：Java客户端图形程序（或者嵌入式设备的程序）直接和Web层或者EJB层交互Web层：运行Servlet/JSPEJB层：运行EJB，完成业务逻辑运算DB层：后端数据库，向Java程序提供数据访问服务4、 Java嵌入式应用Java嵌入式应用是一个方兴未艾的领域，从事嵌入式开发，需要从Sun下载J2ME开发包，J2ME包含了嵌入式设备专用虚拟机KVM，和普通的JDK中包含的JVM有所不同。另外还需要到特定的嵌入式厂商那里下载模拟器。Java Learning Path（二）、书籍篇学习一门新的知识，不可能指望只看一本，或者两本书就能够完全掌握。需要有一个循序渐进的阅读过程。我推荐Oreilly出版的Java系列书籍。在这里我只想补充一点看法，很多人学习Java是从《Thinking in Java》这本书入手的，但是我认为这本书是不适合初学者的。我认为正确的使用这本书的方法应该是作为辅助的读物。《Thinking in Java》并不是在完整的介绍Java的整个体系，而是一种跳跃式的写作方法，是一种类似tips的方法来对Java很多知识点进行了深入的分析和解释。对于初学者来说，最好是找一本Java入门的书籍，但是比较完整的循序的介绍Java的语法，面向对象的特性，核心类库等等，在看这本书的同时，可以同步来看《Thinking in Java》，来加深对Java的理解和原理的运用，同时又可以完整的了解Java的整个体系。对于Java的入门书籍，蔡学镛推荐的是Oreilly的《Exploring Java, 2nd Edition》 或者《Java in a Nutshell,2nd Edition（针对C++背景）》，我并没有看过这两本书。其实我觉得电子工业出版社的《Java 2编程详解》或者《Java 2从入门到精通》就很不错。在所有的Java书籍当中，其实最最有用的，并不是O′reilly的 Java Serials，真正最最有用处是JDK的Documentation！几乎你想获得的所有的知识在Documentation里面全部都有，其中最主要的部分当然是Java基础类库的API文档，是按照package来组织的，对于每一个class都有详细的解释，它的继承关系，是否实现了某个接口，通常用在哪些场合，还可以查到它所有的public的属性和方法，每个属性的解释，意义，每个方法的用途，调用的参数，参数的意义，返回值的类型，以及方法可能抛出的异常等等。可以这样来说，所有关于Java编程方面的书籍其实都不过是在用比较通俗易懂的语言，和良好的组织方式来介绍 Documentation里面的某个package里面包含的一些类的用法而已。所以万变不离其宗，如果你有足够的能力来直接通过 Documentation来学习Java的类库，那么基本上就不需要看其他的书籍了。除此之外，Documentation也是编程必备的手册，我的桌面上有三个Documentation的快捷方式，分别是J2SDK1.4.1的Documentation，Servlet2.3的 Documentation和J2SDKEE1.3.1的Documentation。有了这个三个Documentation，什么其他的书籍都不需要了。对于Java Web 编程来说，最核心的是要熟悉和掌握HTTP协议，这个就和Java无关了，在熟悉HTTP协议之后，就需要熟悉Java的实现HTTP协议的类库，也就是 Servlet API，所以最重要的东西就是Servlet API。当然对于初学者而言，直接通过Servlet API来学习Web编程有很大的难度，我推荐O′reilly的《Java Server Pages 》这本书来学习Web 编程。EJB 的书籍当中，《Enterprise JavaBeans, 2nd Edition》是一本很不错的书， EJB的学习门槛是比较高，入门很难，但是这本书完全降低了学习的难度，特别重要的一点是，EJB的学习需要结合一种App Server的具体实现，所以在学习EJB的同时，必须同步的学习某种App Server，而这本书相关的出了三本书，分别是Weblogic6.1，Websphere4.0和JBoss3.0上面部署书中例子的实做。真是既有理论，又有实践。在学习EJB的同时，可以边看边做，EJB的学习会变得很轻松。但是这本书也有一个问题，就是版本比较旧，主要讲 EJB1.1规范和部分EJB2.0的规范。而Ed Roman写的《Mastering EJB 2.0》这本书完全是根据EJB2.0规范写的，深入浅出，覆盖了EJB编程的各个方面，并且还有很多编程经验tips，也是学习EJB非常推荐的书籍之一。如果是结合Weblogic来学习J2EE的话，《J2EE应用与BEA Weblogic Server》绝对是首选读物，虽然是讲述的Weblogic6.0，仍然值得购买，这本书是BEA官方推荐的教材，作者也是BEA公司的工程师。现在中文版已经随处可见了。这本书结合Weblogic介绍了J2EE各个方面的技术在Weblogic平台上的开发和部署，实践指导意义非常强。在掌握了Java平台基础知识和J2EE方面的知识以后，更进一步的是学习如何运用OO的方法进行软件的设计，那么就一定要学习“设计模式”。Sun公司出版了一本《J2EE核心模式》，是每个开发Java企业平台软件的架构师必备的书籍。这本书全面的介绍了J2EE体系架构的各种设计模式，是设计师的必读书籍。Java Learning Path（三）过程篇每个人的学习方法是不同的，一个人的方法不见得适合另一个人，我只能是谈自己的学习方法。因为我学习Java是完全自学的，从来没有问过别人，所以学习的过程基本上完全是自己摸索出来的。我也不知道这种方法是否是比较好的方法，只能给大家提供一点参考了。学习Java的第一步是安装好JDK，写一个Hello World，? 其实JDK的学习没有那么简单，关于JDK有两个问题是很容易一直困扰Java程序员的地方：一个是CLASSPATH的问题，其实从原理上来说，是要搞清楚JRE的ClassLoader是如何加载Class的；另一个问题是package和import问题，如何来寻找类的路径问题。把这两个问题摸索清楚了，就扫除了学习Java和使用JDK的最大障碍。推荐看一下王森的《Java深度历险》，对这两个问题进行了深入的探讨。第二步是学习Java的语法。Java的语法是类C++的，基本上主流的编程语言不是类C，就是类C++的，没有什么新东西，所以语法的学习，大概就是半天的时间足够了。唯一需要注意的是有几个不容易搞清楚的关键字的用法，public，protected，private，static，什么时候用，为什么要用，怎么用，这可能需要有人来指点一下，我当初是完全自己琢磨出来的，花了很久的时间。不过后来我看到《Thinking in Java》这本书上面是讲了这些概念的。第三步是学习Java的面向对象的编程语言的特性的地方。比如继承，构造器，抽象类，接口，方法的多态，重载，覆盖，Java的异常处理机制。对于一个没有面向对象语言背景的人来说，我觉得这个过程需要花很长很长时间，因为学习Java之前没有 C++的经验，只有C的经验，我是大概花了一个月左右吧，才彻底把这些概念都搞清楚，把书上面的例子反复的揣摩，修改，尝试，把那几章内容反复的看过来，看过去，看了不下5遍，才彻底领悟了。不过我想如果有C++经验的话，应该一两天时间足够了。那么在这个过程中，可以多看看《Thinking in Java》这本书，对面向对象的讲解非常透彻。可惜的是我学习的时候，并没有看到这本书，所以自己花了大量的时间，通过自己的尝试和揣摩来学会的。第四步就是开始熟悉Java的类库。Java的基础类库其实就是JDK安装目录下面jre/lib/rt.jar这个包。学习基础类库就是学习rt.jar。基础类库里面的类非常非常多。据说有3000多个，我没有统计过。但是真正对于我们来说最核心的只有4个，分别是java.lang.;java.io.;java.util.;java.sql.;这四个包的学习，每个包的学习都可以写成一本厚厚的教材，而O′reilly也确实是这样做的。我觉得如果时间比较紧，是不可能通过读四本书来学习。我觉得比较好的学习方法是这样的：首先要通读整个package的框架，了解整个package的class，interface，exception的构成，最好是能够找到介绍整个包框架的文章。这些专门介绍包的书籍的前几章应该就是这些总体的框架内容介绍。对包整体框架的把握并不是要熟悉每个类的用法，记住它有哪些属性，方法。想记也记不住的。而是要知道包有哪些方面的类构成的，这些类的用途是什么，最核心的几个类分别是完成什么功能的。我在给人培训的时候一般是一次课讲一个包，所以不可能详细的介绍每个类的用法，但是我反复强调，我给你们讲这些包的不是要告诉你们类的方法是怎么调用的，也不要求你们记住类的方法调用，而是要你们了解，Java给我们提供了哪些类，每个类是用在什么场合，当我遇到问题的时候，我知道哪个类，或者哪几个类的组合可以解决我的问题，That′all！，当我们具体写程序的时候，只要你知道该用哪个类来完成你的工作就足够了。编码的时候，具体的方法调用，是边写代码，边查Documentation，所有的东西都在Documentation里面，不要求你一定记住，实际你也记不住 3000多个类的总共将近10万个方法调用。所以对每个包的总体框架的把握就变得极为重要。第五步，通过上面的学习，如果学的比较扎实的话，就打好了Java的基础了，剩下要做的工作是扫清Documentation里面除了上面4个包之外的其他一些比较有用处的类。相信进展到这一步，Java的自学能力已经被培养出来了，可以到了直接学习Documentation的水平了。除了要做GUI编程之外，JDK里面其他会有用处的包是这些：java.text.;java.net.;javax.naming.;这些包里面真正用的比较多的类其实很少，只有几个，所以不需要花很多时间。第六步，Java Web 编程Web 编程的核心是HTTP协议，HTTP协议和Java无关，如果不熟悉HTTP协议的话，虽然也可以学好Servlet/JSP编程，但是达不到举一反三，一通百通的境界。所以HTTP协议的学习是必备的。如果熟悉了HTTP协议的话，又有了Java编程的良好的基础，学习Servlet/JSP简直易如反掌，我学习Servlet/JSP就用了不到一周的时间，然后就开始用JSP来做项目了。在Servlet/JSP的学习中，重头仍然是Servlet Documentation。Servlet API最常用的类很少，花比较少的时间就可以掌握了。把这些类都看一遍，多写几个例子试试。Servlet/JSP编程本质就是在反复调用这些类来通过 HTTP协议在Web Server和Brower之间交谈。另外对JSP，还需要熟悉几个常用JSP的标记，具体的写法记不住的话，临时查就是了。此外Java Web编程学习的重点要放在Web Application的设计模式上，如何进行业务逻辑的分析，并且进行合理的设计，按照MVC设计模式的要求，运用Servlet和JSP分别完成不同的逻辑层，掌握如何在Servlet和JSP之间进行流程的控制和数据的共享，以及Web Application应该如何配置和部署。第七步，J2EE编程以上的学习过程如果是比较顺利的话，进行到这一步，难度又陡然提高。因为上面的知识内容都是只涉及一个方面，而像EJB，JMS，JTA等核心的J2EE规范往往是几种Java技术的综合运用的结晶，所以掌握起来难度比较大。首先一定要学习好JNDI，JNDI是App Server定位服务器资源（EJB组件，Datasouce，JMS）查找方法，如果对JNDI不熟悉的话，EJB，JMS这些东西几乎学不下去。 JNDI其实就是javax.naming.这个包，运用起来很简单。难点在于服务器资源文件的配置。对于服务器资源文件的配置，就需要看看专门的文档规范了，比如web.xml的写法，ejb-jar.xml的写法等等。针对每种不同的App Server，还有自己的服务资源配置文件，也是需要熟悉的。然后可以学习JTA，主要是要理解JTA对于事务的控制的方法，以及该在什么场合使用JTA。这里可以简单的举个例子，我们知道一般情况可以对于一个数据库连接进行事务控制(conn.setAutoCommit (false),….,conn.commit())，做为一个原子操作，但是假设我的业务需求是要把对两个不同数据库的操作做为一个原子操作，你能做的到吗？这时候只能用JTA了。假设操作过程是先往A数据库插一条记录，然后删除B数据库另一个记录，我们自己写代码是控制不了把整个操作做为一个原子操作的。用JTA的话，由App Server来完成控制。在学习EJB之前要学习对象序列化和RMI，RMI是EJB的基础。接着学习JMS和EJB，对于EJB来说，最关键是要理解EJB是如何通过RMI来实现对远端对象的调用的，以及在什么情况下要用到EJB。在学习完EJB，JMS这些东西之后，你可能会意识到要急不可待学习两个领域的知识，一个是UML，另一个是Design Pattern。Java企业软件的设计非常重视框架(Framework)的设计，一个好的软件框架是软件开发成功的必要条件。在这个时候，应该开始把学习的重点放在设计模式和框架的学习上，通过学习和实际的编程经验来掌握EJB的设计模式和J2EE的核心模式。J2EE规范里面，除了EJB，JMS，JTA，Servlet/JSP，JDBC之外还有很多很多的企业技术，这里不一一进行介绍了。另外还有一个最新领域Web Services。Web Services也完全没有任何新东西，它像是一种黏合剂，可以把不同的服务统一起来提供一个统一的调用接口，作为使用者来说，我只要获得服务提供者给我的WSDL（对服务的描述），就够了，我完全不知道服务器提供者提供的服务究竟是EJB组件，还是.Net组件，还是什么CORBA组件，还是其他的什么实现，我也不需要知道。Web Services最伟大的地方就在于通过统一的服务提供方式和调用方式，实现了整个Internet服务的共享，是一个非常令人激动的技术领域。Web Services好像目前还没有什么很好的书籍，但是可以通过在网络上面查资料的方式来学习。Java Learning Path（四） 方法篇Java 作为一门编程语言，最好的学习方法就是写代码。当你学习一个类以后，你就可以自己写个简单的例子程序来运行一下，看看有什么结果，然后再多调用几个类的方法，看看运行结果，这样非常直观的把类给学会了，而且记忆非常深刻。然后不应该满足把代码调通，你应该想想看如果我不这样写，换个方式，再试试行不行。记得哪个高人说过学习编程就是个破坏的过程，把书上的例子，自己学习Documentation编写的例子在运行通过以后，不断的尝试着用不同的方法实现，不断的尝试破坏代码的结构，看看它会有什么结果。通过这样的方式，你会很彻底的很精通的掌握Java。举个例子，我们都编过Hello Worldpublic class HelloWorld {public static void main(String[] args) {System.out.println(“Hello World”);}}很多初学者不是很理解为什么main方法一定要这样来定义public static void main(String[] args)，能不能不这样写？包括我刚学习Java的时候也有这样的疑问。想知道答案吗？很简单，你把main改个名字运行一下，看看报什么错误，然后根据出错信息进行分析；把main的public取掉，在试试看，报什么错误；static去掉还能不能运行；不知道main方法是否一定要传一个 String[]数组的，把String[]改掉，改成int[]，或者String试试看；不知道是否必须写args参数名称的，也可以把args改成别的名字，看看运行结果如何。我当初学习Java的时候就是这样做的，把Hello World程序反复改了七八次，不断运行，分析运行结果，最后就彻底明白为什么了main方法是这样定义的了。此外，我对于staic，public，private，Exception，try{ }catch {}finally{}等等等等一开始都不是很懂，都是把参考书上面的例子运行成功，然后就开始破坏它，不断的根据自己心里面的疑问来重新改写程序，看看能不能运行，运行出来是个什么样子，是否可以得到预期的结果。这样虽然比较费时间，不过一个例子程序这样反复破坏几次之后。我就对这个相关的知识彻底学通了。有时候甚至故意写一些错误的代码来运行，看看能否得到预期的运行错误。这样对于编程的掌握是及其深刻的。其中特别值得一提的是JDK有一个非常棒的调试功能，-verbosejava ?Cverbosejavac ?Cverbose 以及其它很多JDK工具都有这个选项-verbose 可以显示在命令执行的过程中，JVM都依次加载哪里Class，通过这些宝贵的调试信息，可以帮助我们分析出JVM在执行的过程中都干了些什么。另外，自己在学习过程中，写的很多的这种破坏例程，应该有意识的分门别类的保存下来，在工作中积累的典型例程也应该定期整理，日积月累，自己就有了一个代码库了。遇到类似的问题，到代码库里面 Copy &amp; Paste ，Search &amp; Replace，就好了，极大提高了开发速度。最理想的情况是把一些通用的例程自己再抽象一层，形成一个通用的类库，封装好。那么可复用性就更强了。所以我觉得其实不是特别需要例程的，自己写的破坏例程就是最好的例子，如果你实在对自己写的代码不放心的话，我强烈推荐你看看JDK基础类库的Java源代码。在JDK安装目录下面会有一个src.zip，解开来就可以完整的看到整个JDK基础类库，也就是rt.jar的Java源代码，你可以参考一下 Sun是怎么写Java程序的，规范是什么样子的。我自己在学习Java的类库的时候，当有些地方理解的不是很清楚的时候，或者想更加清晰的理解运作的细节的时候，往往会打开相应的类的源代码，通过看源代码，所有的问题都会一扫而空。Java Learning Path（五）资源篇1、 http://java.sun.com/ ;(英文)Sun的Java网站，是一个应该经常去看的地方。不用多说。2、 http://www-900.ibm.com/developerWorks/cn/ ;IBM的developerWorks网站，英语好的直接去英文主站点看。这里不但是一个极好的面向对象的分析设计网站，也是Web Services，Java，Linux极好的网站。强烈推荐！！！3、 http://www.java-cn.com/ ;(中文)JAVA 中文站，目前国内资料最全、会员最多的JAVA技术网站，人气极高。有《JAVA电子书库》、《JAVA视频库》(国内唯一)、《JAVA技术文摘库》、《JAVA源代码库》、《JAVA工具库》、《招聘求职广场》等主要栏目，还有一些专家栏目。目前会员有5万多，VIP会员近1000人。无论是菜鸟还是老鸟，都能在此网站中找到自己所需要的东东！！ 最强烈推荐！！！！！！4、 http://www.javaworld.com/ ;(英文)关于Java很多新技术的讨论和新闻。想多了解Java的方方面面的应用，这里比较好。5、 http://dev2dev.bea.com.cn/index.jsp ;BEA的开发者园地，BEA作为最重要的App Server厂商，有很多独到的技术，在Weblogic上做开发的朋友不容错过。6、 http://www.huihoo.com/ ;灰狐动力网站，一个专业的中间件网站，虽然不是专业的Java网站，但是在J2EE企业应用技术方面有深厚的造诣。7、 http://www.theserverside.com/home/ ;(英文)TheServerSide是一个著名的专门面向Java Server端应用的网站。8、 http://www.javaresearch.org/ ;Java研究组织，有很多优秀的Java方面的文章和教程，特别是在JDO方面的文章比较丰富。9、 http://www.cnjsp.org/ ;JSP技术网站，有相当多的Java方面的文章和资源。10、 http://www.jdon.com/ ;Jdon论坛，是一个个人性质的中文J2EE专业技术论坛，在众多的Java的中文论坛中，Jdon一个是技术含量非常高，帖子质量非常好的论坛。11、 http://sourceforge.net/ ;SourgeForge是一个开放源代码软件的大本营，其中也有非常非常丰富的Java的开放源代码的著名的软件。","categories":[],"tags":[]},{"title":"","slug":"MD/idea/ JRebel热部署","date":"2017-10-28T11:12:37.000Z","updated":"2017-12-25T16:32:33.000Z","comments":true,"path":"2017/10/28/MD/idea/ JRebel热部署/","link":"","permalink":"http://io.stelawliet.top/2017/10/28/MD/idea/ JRebel热部署/","excerpt":"","text":"Intellij IDEA使用 JRebel 搭配 maven-jetty-plugin插件实现热部署1. 在pom.xml文件中依赖jetty在&lt;build&gt;标签的子标签&lt;plugins&gt;标签下加入以下内容: 1234567891011&lt;plugin&gt; &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt; &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt; &lt;version&gt;9.3.11.v20160721&lt;/version&gt; &lt;configuration&gt; &lt;scanIntervalSeconds&gt;5&lt;/scanIntervalSeconds&gt; &lt;httpConnector&gt; &lt;port&gt;9999&lt;/port&gt; &lt;/httpConnector&gt; &lt;/configuration&gt;&lt;/plugin&gt; 其中port可以指定端口号,jetty访问默认不需要项目名,直接通过 localhost:9999访问即可 2. 修改idea运行配置Run Configuration 修改idea运行配置Run Configuration 修改idea运行配置Run Configuration 3. 安装JRebel热部署插件 安装JRebel热部署插件 4. 破解JRebel首先下载破解文件 4.1 解压补丁，替换jar包与licence文件将本机 /Users/&lt;你的用户名&gt;/.jrebel/jrebel.lic替换为下载的jrebel.lic 4.2 将补丁解压包里的文件分别覆盖一下文件,注意文件夹的名字哦/Users/&lt;你的用户名&gt;/IdeaIC2016.1/config/plugins/jr-ide-idea/lib/jrebel6/jrebel.jar/Users/&lt;你的用户名&gt;/IdeaIC2016.1/config/plugins/jr-ide-idea/lib/jrebel/jrebel.jar 5. 重启Idea使JRebel生效，并取消勾选汇报使用数据 重启Idea使JRebel生效，并取消勾选汇报使用数据 6. 勾选需要监控的热部署的模块 勾选需要监控的热部署的模块 7. 通过JRebel来Debug运行项目 通过JRebel来Debug运行项目 8. 控制台打印如下输出表示配置成功 控制台打印如下输出表示配置成功 修改文件后按 Ctrl + (Shift) +F9 来Make项目，使得JRebel热部署最新代码","categories":[],"tags":[]},{"title":"","slug":"MD/idea/IDEA单元测试入门","date":"2017-10-28T10:53:38.000Z","updated":"2017-10-28T10:55:21.000Z","comments":true,"path":"2017/10/28/MD/idea/IDEA单元测试入门/","link":"","permalink":"http://io.stelawliet.top/2017/10/28/MD/idea/IDEA单元测试入门/","excerpt":"","text":"IntelliJ IDEA单元测试入门转载 2016年08月09日 20:10:17 **17701 参考文章地址地址：JUnit4单元测试入门教程 ​ IDEA单元测试及代码覆盖率 ​ IDEA添加jar包的三种方式 本文按以下顺序讲解JUnit4的使用 下载jar包 单元测试初体验 自动生成测试类 执行顺序 @Test的属性 代码覆盖率 下载jar包在github上，把以下两个jar包都下载下来。下载地址：点击打开链接 下载junit-4.12.jar，junit-4.12-javadoc.jar（文档），junit-4.12-sources.jar（源码）。 下载hamcrest-core-1.3.jar，hamcrest-core-1.3-javadoc.jar（文档），hamcrest-core-1.3-sources.jar（源码）。 最前面那个pom是Maven的配置文件，如果你需要的话也下载下来。 ## 单元测试初体验先创建个简单的项目体验下单元测试是怎么一回事吧。 我创建一个项目叫JUnit4Demo，刚创建好的工程目录如下图，然后在External Libraries中导入刚下载的那两个jar包。 ​ 通过Libraries添加Jar包 1.打开 File -&gt; Project Structure -&gt;Modules-&gt; 在Dependencies 下添加jar包 ​ 2、+ -&gt; Library… -&gt; java -&gt; 选择jar的路径添加。 添加jar包后如下图所示。 ​ 3、创建一个类com.hera.util.Math，然后输入一个求阶乘的方法： ​ 4、创建一个队Math方法的单元测试： ​ 创建一个和src同级别的文件夹叫test(逻辑代码放src里，测试代码放test里是个好习惯)。​ 接着在IntelliJ IDEA里还要把这个test文件夹要设置成测试文件的根目录，右键选中​ Mark Directory As - Test Sources Root。 ​ ​ 创建一个测试类： ​ IntelliJ IDEA提供了一个快捷操作Cmd + Shift + T作为类和测试之间的导航。同时允许用户在那里创建一个测试类。IntelliJ IDEA提供了一个快捷操作Cmd + Shift + T作为类和测试之间的导航。同时允许用户在那里创建一个测试类。 ​ 为测试类MathTest添加测试方法： ​ ​ ​ 运行： run MathTest 。右下方一条绿色条说明测试通过，如果把120改成别的数字那么就会测试不通过显色红色条。JUnit4有一句话叫：“keeps the bar green to keep the code clean”。 ​ 解释一下MathTest，就六个地方要讲：​ 第一，导入了org.junit.Test;和org.junit.Assert.*;这两个包，注意后者是静态导入import static。​ 第二，testFactorial是在要测试的方法名Factorial前加个test（这也是个好习惯）。​ 第三，所有测试方法返回类型必须为void且无参数。​ 第四，一个测试方法之所以是个测试方法是因为@Test这个注解。​ 第五，assertEquals的作用是判断两个参数是否相等，例子中120是预期结果，new Math().factorial(5)是实 际结果。但是通常不应该只比较一个值，要测试多几个特殊值，特别是临界值。 ​ 例如Math().factorial(0)和Math().factorial(-1)等。​ 第六，assertEquals除了比较两个int，还重载了好多次可以比较很多种类型的参数。而且JUnit4包含一堆 assertXX方法，assertEquals只是其中之一，这些assertXX统称为断言。刚不是下载了junit-4.12- javadoc.jar这个文档吗，解压后打开index.html如下图还有一堆断言。 ​ ​ 执行顺序JUnit4利用JDK5的新特性Annotation，使用注解来定义测试规则。这里讲一下以下几个常用的注解： @Test：把一个方法标记为测试方法 @Before：每一个测试方法执行前自动调用一次 @After：每一个测试方法执行完自动调用一次 @BeforeClass：所有测试方法执行前执行一次，在测试类还没有实例化就已经被加载，所以用static修饰 @AfterClass：所有测试方法执行完执行一次，在测试类还没有实例化就已经被加载，所以用static修饰 @Ignore：暂不执行该测试方法 我们来试验一下，我新建一个测试类AnnotationTest，然后每个注解都用了，其中有两个用@Test标记的方法分别是test1和test2，还有一个用@Ignore标记的方法test3。然后我还创建了一个构造方法，这个构造方法很重要一会会引出一个问题。具体代码如下： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.xuhongchuan.util;import org.junit.*;import static org.junit.Assert.*;/** * Created by xuhongchuan on 2015/7/18. */public class AnnotationTest &#123; public AnnotationTest() &#123; System.out.println(&quot;构造方法&quot;); &#125; @BeforeClass public static void setUpBeforeClass() &#123; System.out.println(&quot;BeforeClass&quot;); &#125; @AfterClass public static void tearDownAfterClass() &#123; System.out.println(&quot;AfterClass&quot;); &#125; @Before public void setUp() &#123; System.out.println(&quot;Before&quot;); &#125; @After public void tearDown() &#123; System.out.println(&quot;After&quot;); &#125; @Test public void test1() &#123; System.out.println(&quot;test1&quot;); &#125; @Test public void test2() &#123; System.out.println(&quot;test2&quot;); &#125; @Ignore public void test3() &#123; System.out.println(&quot;test3&quot;); &#125;&#125; 运行结果如下： 12345678910BeforeClass构造方法Beforetest1After构造方法Beforetest2AfterAfterClass ​ 解释一下：@BeforeClass和@AfterClass在类被实例化前（构造方法执行前）就被调用了，而且只执行一次，通常用来初始化和关闭资源。@Before和@After和在每个@Test执行前后都会被执行一次。@Test标记一个方法为测试方法没什么好说的，被@Ignore标记的测试方法不会被执行，例如这个模块还没完成或者现在想测试别的不想测试这一块。 ​ 以上有一个问题，构造方法居然被执行了两次。所以我这里要说明一下，JUnit4为了保证每个测试方法都是单元测试，是独立的互不影响。所以每个测试方法执行前都会重新实例化测试类。 ​ 我再给你看一个实验： ​ 添加一个成员变量 1int i = 0; 然后把test1改为： 12i++;System.out.println(&quot;test1的i为&quot; + i); test2改为： 12i++;System.out.println(&quot;test2的i为&quot; + i); 执行结果： 12345678910BeforeClass构造方法Beforetest1的i为1After构造方法Beforetest2的i为1AfterAfterClass ​ 可以看到test1和test2的i都只自增了一次，所以test1的执行不会影响test2，因为执行test2时又把测试类重新实例化了一遍。如果你希望test2的执行受test1的影响怎么办呢？把int i改为static的呗。 ​ 最后关于这些注解还有一个要说明的就是，你可以把多个方法标记为@BeforeClass、@AfterClass、@Before、@After。他们都会在相应阶段被执行。 @Test的属性最后来说一下@Test的两个属性 excepted timeoutexcepted属性是用来测试异常的，我们回到Math类，拿其中的求阶乘方法factorial()来说。如果传进来一个负数我们是希望抛出异常的，那要测试会不会抛异常怎么办呢？我在测试类MathTest添加一个测试方法： ​ ​ 这个方法就是(expected = Exception.class)和fail(“factorial参数为负数没有抛出异常”);之间的配合。就是这个测试方法会检查是否抛出Exception异常（当然也可以检测是否抛出其它异常），如果抛出了异常那么测试通过（因为你的预期就是传进负数会抛出异常）。没有抛出异常则测试不通过执行fail(“factorial参数为负数没有抛出异常”); ​ 然后说下timeout属性，这个是用来测试性能的，就是测试一个方法能不能在规定时间内完成。回到Math类，我创建一个数组排序的方法，用的是冒泡排序。 ​ 12345678910111213public void sort(int[] arr) &#123; //冒泡排序 for (int i = 0; i &lt; arr.length - 1; i++) &#123; //控制比较轮数 for (int j = 0; j &lt; arr.length - i - 1; j++) &#123; //控制每轮的两两比较次数 if (arr[j] &gt; arr[j + 1]) &#123; int temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; &#125; &#125; &#125;&#125; ​ 然后偶在测试类MathTest创建测试方法，随机生成一个长度为50000的数组然后测试排序所用时间。timeout的值为2000，单位和毫秒，也就是说超出2秒将视为测试不通过。 123456789101112@Test(timeout = 2000)public void testSort() throws Exception &#123; int[] arr = new int[50000]; //数组长度为50000 int arrLength = arr.length; //随机生成数组元素 Random r = new Random(); for (int i = 0; i &lt; arrLength; i++) &#123; arr[i] = r.nextInt(arrLength); &#125; new Math().sort(arr);&#125; 运行结果测试不通过，且提示TestTimedOutException。 ​ 那怎么办，修改代码提升性能呗。回到Math方法改为下sort()。这次我用快速排序，代码如下： 1234567891011121314151617181920212223242526272829303132333435363738394041424344public void sort(int[] arr) &#123; //快速排序 if (arr.length &lt;= 1) &#123; return; &#125; else &#123; partition(arr, 0, arr.length - 1); &#125;&#125;static void partition(int[] arr, int left, int right) &#123; int i = left; int j = right; int pivotKey = arr[left]; //基准数 while (i &lt; j) &#123; while (i &lt; j &amp;&amp; arr[j] &gt;= pivotKey) &#123; j--; &#125; while (i &lt; j &amp;&amp; arr[i] &lt;= pivotKey) &#123; i++; &#125; if (i &lt; j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; &#125; if (i != left) &#123; arr[left] = arr[i]; arr[i] = pivotKey; &#125; if (i - left &gt; 1) &#123; partition(arr, left, i - 1); &#125; if (right - j &gt; 1) &#123; partition(arr, j + 1, right); &#125;&#125; ​ 然后再运行一下测试类MathTest，绿色条出现了，测试通过妥妥的。 编辑测试设置 ​ 我们可以通过Run → Edit Configurations或工具栏上的标签来调整我们的测试运行配置。 ​ ​ 在Configuration选项卡,用户可以选择需要运行的测试。例如,您可以从一个类、程序包、测试套件或甚至模式中运行所有的测试。这里的Fork模式让用户在一个单独的进程运行每个测试。 ​ 在代码覆盖标签你可以调整覆盖率设置。目前IntelliJ IDEA支持两种测量覆盖率引擎。默认情况下它使用自己的引擎，当然用户也可以选择JaCoCo引擎。用户也可以在这里选择覆盖率模式。Tracing{span{ mode模式会增加消耗,但测量会更精确。 ​ 运行覆盖 ​ 收集覆盖率,用户需要通过Run → Run ‘MyClassTest’ with Coverage或工具栏上的选项运行特定模式的测试。 ​ 当覆盖模式运行至少一个测试之后,IDE将会在Project工具窗口显示每个程序包、类的覆盖率数据，同时在Coverage工具窗和编辑器中也会显示。 ​ 编辑器中的覆盖率 如果用户添加另一个方法到MyClass，并运行覆盖率测MyClass,就会发现,没有被测试覆盖到的代码都将高亮显示为红色。覆盖的代码颜色则是绿色。如果一些代码是只覆盖部分,那没将显示为黄色。 Idea配置JUnit4单元测试入门原创 2017年01月07日 13:48:20 标签： junit / idea / 单元测试 **1679 pom.xml文件配置 123456&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;RELEASE&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;123456 然后创建一个和src同级别的文件夹叫test(逻辑代码放src里，测试代码放test里是个好习惯)。接着在IntelliJ IDEA里还要把这个test文件夹要设置成测试文件的根目录,右键选中 Mark Directory As -&gt; Test Sources Root。然后创建测试类(包名一致，类名在要测试的类名后加上Test也是个好习惯)。 12345678910public class IndexBuilderTest &#123; @Test public void testStart() throws Exception &#123; System.out.println(&quot;---testStrat()----&quot;); IndexBuilder indexBuilder=new IndexBuilder(); indexBuilder.start();// assertEquals(true,false); &#125;&#125;12345678910 然后选中MathTest类ctrl + shift + F10运行一下。 JUnit4利用JDK5的新特性Annotation，使用注解来定义测试规则。这里讲一下以下几个常用的注解： 123456@Test：把一个方法标记为测试方法@Before：每一个测试方法执行前自动调用一次@After：每一个测试方法执行完自动调用一次@BeforeClass：所有测试方法执行前执行一次，在测试类还没有实例化就已经被加载，所以用static修饰@AfterClass：所有测试方法执行完执行一次，在测试类还没有实例化就已经被加载，所以用static修饰@Ignore：暂不执行该测试方法","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/MAVEN/Maven仓库管理之Nexus ","date":"2017-10-28T07:18:47.000Z","updated":"2017-10-28T07:18:47.000Z","comments":true,"path":"2017/10/28/Java/JavaEE/MAVEN/Maven仓库管理之Nexus /","link":"","permalink":"http://io.stelawliet.top/2017/10/28/Java/JavaEE/MAVEN/Maven仓库管理之Nexus /","excerpt":"","text":"Maven仓库管理之Nexus [TOC] ​ 我分两部分来介绍，首先介绍一下Maven的仓库，然后在说一下如何通过Nexus来建立我们自己的仓库，以及如何使用。 Maven 仓库​ 在以前使用Ant的时候，我们会建立一个lib目录在存放我们的jar包，比如项目所依赖的第三方包，每建立一个项目都要建立一个lib，不停的做copy工作，不仅是对于磁盘的浪费，而且也造成了版本管理上的麻烦。而且我们还需要通过提交到svn上来对lib进行管理，但是svn对于这种二进制文件的管理并不出色。 ​ Maven仓库的初衷就是为了解决这个问题。 maven仓库是所有常用的第三方依赖包的集中营。这样所有的Maven项目就可以从这个仓库中获取所需要的资源，Maven仓库中对jar通过Group Id, Atifact Id, version 来管理，所以Maven项目可以很方便的进行依赖管理。你不需要自己来管理这个庞大的资源仓库，当然你可以创建一个公司层面的仓库，这个我在这个章节的后面会介绍。 Maven 仓库的两个概念：本地仓库和远程仓库​ 本地仓库是远程仓库的一个缓冲和子集，当你构建Maven项目的时候，首先会从本地仓库查找资源，如果没有，那么Maven会从远程仓库下载到你本地仓库。这样在你下次使用的时候就不需要从远程下载了。如果你所需要的jar包版本在本地仓库没有，而且也不存在于远程仓库，Maven在构建的时候会报错，这种情况可能发生在有些jar包的新版本没有在Maven仓库中及时更新。 ​ Maven缺省的本地仓库地址为${user.home}/.m2/repository 。也就是说，一个用户会对应的拥有一个本地仓库。当然你可以通过修改${user.home}/.m2/settings.xml 配置这个地址： 12345&lt;settings&gt; ... &lt;localRepository&gt; D:/java/repository&lt;/localRepository&gt; ...&lt;/settings&gt; 如果你想让所有的用户使用统一的配置，那么你可以修改${M2_HOME}/conf/setting.xml 还可以通过在运行时指定目录（不推荐这么做）： 1mvn clean install -Dmaven.repo.local=/home/juven/myrepo/ ​ 当我们创建一个简单的Maven项目后(只需要在pom.xml配置好依赖项)，运行mvn clean install就可以把项目构建好，maven会自动从中央仓库下载所需的依赖项(即jar包）。这个中央仓库定义在${M2_HOME}/lib/maven-2.0.10-uber.jar 里面。你可以在里面找到/org/apache/maven/project/pom-4.0.0.xml这个文件，在这个文件里面定义了中央仓库的地址： 1234567891011&lt;repositories&gt; &lt;repository&gt; &lt;id&gt; central&lt;/id&gt; &lt;name&gt; Maven Repository Switchboard&lt;/name&gt; &lt;layout&gt; default&lt;/layout&gt; &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt; &lt;snapshots&gt; &lt;enabled&gt; false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; 在 POM 中配置远程仓库 当某个依赖项存在于第三方的公共仓库时，我们需要配置其他远程仓库呢。下面是在pom.xml里面配置一个远程仓库的例子： 1234567891011121314151617181920212223242526272829303132&lt;repositories&gt; &lt;repository&gt; // 其他远程仓库 &lt;/repository&gt; &lt;repository&gt; &lt;id&gt; maven-net-cn&lt;/id&gt; &lt;name&gt; Maven China Mirror&lt;/name&gt; &lt;url&gt; http://maven.net.cn/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt; true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt; false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;pluginRepositories&gt; &lt;pluginRepository&gt; // 其他maven插件仓库 &lt;/pluginRepository&gt; &lt;pluginRepository&gt; &lt;id&gt; maven-net-cn&lt;/id&gt; &lt;name&gt; Maven China Mirror&lt;/name&gt; &lt;url&gt; http://maven.net.cn/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt; true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt; false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; ​ 这里我们可以看到，允许配置多个repository和 plugin repository，其中true告诉Maven可以从这个仓库下载releases版本的构件，而false告诉Maven不要从这个仓库下载snapshot版本的构件。 Maven在使用第三方构件和插件时是分开来配置的,所以如果我们也希望插件的下载也通过我们的本地仓库来下载,那么我们就需要配置pluginRepository. 之所以不允许从某些仓库下载snapshot版本，是因为snapshot版本不稳定，但是某些snapshot版本，比如公司内部正在开发的项目, 是必须的 至于，这是配置Maven从什么地方下载插件构件，Maven的所有行为都是通过插件来完成的。 的配置与类似，这里就不多说了。 在 settings.xml 中配置远程仓库​ pom.xml的作用范围限于一个项目， 但一个公司/组织通常不只开发一个项目，那么为了避免重复配置，那么我们可以把一些公共配置放在${MAVEN_HOME}/conf/setting.xml(或${user.home}/.m2/setting.xml中。下面是在setting.xml中配置一个远程仓库的例子. 1234567891011121314151617&lt;settings&gt; &lt;profiles&gt; &lt;profile&gt; &lt;!-- 其他profile --&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;myProfiel&lt;/id&gt; &lt;!-- 在这里加入&lt;repositories&gt;及&lt;pluginRepositories&gt; --&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;!-- 声明哪些profile被激活，或根据某些条件激活 --&gt; &lt;activeProfiles&gt; &lt;activeProfile&gt;myProfiel&lt;/activeProfile&gt; &lt;/activeProfiles&gt; &lt;/settings&gt; ​ 这里通过元素来激活这个profile，这样我们就可以全局的使用这个配置，不再需要为每个POM做重复的配置了（也可以针对特定的条件激活，比如某些profile只有在使用JDK 1.4时才生效)。 ​ 在实际的操作过程中，setting.xml最好不要配置远程仓库，最好能够通过nexus建立公司或者组织自己的仓库，然后把地址指向自己的仓库，后面我会介绍为什么要这么做以及怎么做。 配置maven仓库镜像​ 当你连接中央仓库时速度很慢，或有些国外的第三方仓库无法被访问时，你可以在setting.xml中为这些仓库指定一个镜像来加快下载依赖项的速度。下面是一个配置镜像的例子 123456789101112131415&lt;settings&gt; ... &lt;mirrors&gt; &lt;mirror&gt; &lt;!-- 其他镜像库 --&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt; maven-net-cn&lt;/id&gt; &lt;name&gt; Maven China Mirror&lt;/name&gt; &lt;url&gt; http://maven.net.cn/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;/mirrors&gt; ...&lt;/settings&gt; 这里的 必须指定某个的Id. 如果想为所有的仓库做镜像， 那么可以改为：* 利用 Nexus 来构建企业级 Maven 仓库Nexus简介​ Nexus是一个Maven仓库管理器，用来搭建私有仓库服务器。建立公司/组织的私有仓库的的好处是便于管理，节省公网带宽，利用内网下载依赖项速度快，还有一个非常有用的功能就是能有效管理内部项目的SNAPSHOT版本，实现各个模块间的共享. 安装 Nexus​ 可以从http://nexus.sonatype.org/downloads/ 获取最新版本的nexus，本文以1.3.4为例进行说明。 ​ Nexus提供了两种安装方式，内嵌Jetty的捆绑包（bundle）和WAR包。前者解压后即可单独运行，只要系统中安装了JRE， 后者需要一个Servlet容器来运行. 使用捆绑包安装​ 如果你使用Windows，那么下载nexus-webapp-1.3. 4**-bundle.zip，并将其解压至任意目录，如D:/**tools，然后转到D:**tools\\nexus-webapp-1.3.4\\bin\\jsw\\indows-x86-32 ，双击运行Nexus.bat。 如果你是在linux下安装，那么就下载nexus-webapp-1.3. 4 -bundle.tar.gz，解压后运行nexus.sh。nexus还支持solaris,macos等操作系统。​ 当你在控制台看到“Started SelectChannelConnector@0.0.0.0:8081”之后，说明Nexus启动成功了。 打开浏览器，访问http://127.0.0.1:8081/nexus，使用管理员的帐号(admin)和密码(admin123)登录， 会看到如下的页面： img 在这里可以进行管理仓库，配置Nexus系统，管理任务，管理用户，角色，权限，查看系统的RSS源，管理及查看系统日志等操作。 使用War包安装 ​ 下载WAR包，然后将其发布到servlet容器中即可 ​ 到此我们已经安装好Nexus,下面介绍一下Nexus常用的功能和使用方法。 配置**中央仓库** 在左边菜单栏里选择Repositories, 会看到如下的界面： 其中右边栏上半部分列出当前nexus管理的repository，黑体字是类型为group的repository. 这里简单介绍下几种repository的类型: hosted，本地仓库。通常我们会部署自己的构件到这一类型的仓库。比如公司/组织开发的项目 proxy，代理仓库，它们被用来代理远程的公共仓库，如maven中央仓库或一些第三方公共仓库。 group，仓库组，用来合并多个hosted/proxy仓库，当你的项目希望在多个repository使用依赖项时，无需引用多个仓库了，只需要引用一个类型为group的repository即可。 Maven central是Maven的中央仓库，点击它并选择configuration标签栏，我们会看到下面的页面： img 这里有几个配置项是经常用到的： Override local storage location: 该选项允许配置 Nexus本地仓库的存放地址，用来覆盖其默认的存放地址 Remote storage location: 该选项允许配置远程仓库的地址。一般为了提高代理速度，你可以将其修改为国内的镜像地址。默认值是http://repo1.maven.org/maven2/ Download remote indexes: 该选项配置是否下载远程索引文件。 建议配置为true，这样我们便可以通过nexus的搜索功能来搜索我们需要的依赖项。 添加代理仓库(proxy)​ nexus默认提供了Maven central这个代理仓库，如果你需要添加其他代理仓库，那么可以点击左边栏页面上的Repositories链接，然后在右边栏页面上依次点击add -&gt; add proxy repository, 随后出现以下页面： img ​ 根据提示填写相关信息保存即可。 管理本地仓库(hosted)​ Nexus预定义了三种本地仓库，分别是Releases, Snapshots, 3rd Party. 下面分别介绍一下这三种类型仓库的作用 Releases: 存放稳定版本的构件。比如我们完成了一个版本的下数组件的开发,就可以把它发布到这里。 Snapshots: 存放快照版本的构件。 比如一个下数组件在完成所有开发和测试工作之前，是不应该发布到release仓库的，但可能其他项目只需用到这个组件的某些接口，只要这些接口完成了开发并通过测试，就可以拿来使用, 从而实现多个项目并行开发。 3rd Party: 存放其他第三方构件。你可能会问， 不是有中央仓库和其他第三方公共仓库来管理这些依赖项了吗？没错。但由于某些开源项目出现的时间比maven要早，因此他们大都没有采用maven方式进行构建。 其他还包括包括一些非开源或使用maven 1.x构建的组件. 我们可以把这类组件通通添加到这里。创建本地仓库的方法很简单。点击Repository面板上方的Add按钮，然后选择Hosted Repository，然后在下方的配置面板中输入相关信息。 注意根据自己的需要选择本地仓库的类型 仓库组(group)​ 通过前面介绍我们了解到, 可以建立多个代理仓库和本地仓库. 但如果没有仓库组的概念，那么当需要引用这些仓库时, 就需要将他们逐个添加到pom.xml或setting.xml. 仓库组是为了简化仓库的引用而提出的。有了仓库组的概念, 我们可以把仓库根据不同目的进行分组，比如把常用的归到一组或根据访问权限分组， 然后直接声明引用某个仓库组即可. 下面是pom.xml中声明引用一个nexus仓库组的例子： 1234567891011&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;nexus-public&lt;/id&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt;&lt;/repositories&gt; 可以看到声明引用一个仓库组和一个普通的远程仓库，配置的写法完全一样。 maven本身没有仓库组的概念 ​ Nexus中预设了2个仓库组， 分别是public repositories和public snapshot repositories. 如图: img public repository默认包含本地仓库的Releases, snapshots和3rd party以及代理仓库的Maven Central. 你可以在Configuration配置页添加其他仓库到这个仓库组。 如果需要，你还可以创建一个仓库组,方法是点击 Add-&gt;Repository Group, 当New Repository Group界面后,填入ID, name 等相关信息, 然后在右边Available Repositories 栏里可以选择你要添加的仓库到你新建的仓库组. img 通过 Nexus 搜索构件​ 在开发过程中过程中，我们往往只记得某个构件的大致名字，这时我们可以通过nexus提供的构件搜索功能查询该构件的完整配置信息(groupId,artifactId,version)．如果通过nexus搜不到某个的构件，那说明这个构件不在当前nexus所登记的仓库中，可能需要添加额外的代理仓库或手工上传某个构件。 ​ 在使用nexus的搜索功能之前，必须先让nexus所登记的仓库建立索引文件, Nexus默认是不为每个仓库建立索引文件的,因为建立像中央仓库这样的索引文件需要耗费比较大的网络带宽和事件,仅索引文件就要几十兆. 要开启中央仓库的索引文件下载功能需要在Maven Central的配置页中， 把Download Remote Indexes改为true. 如图: img ​ 这样设置之后, Nexus会自动从远程中央仓库下载索引文件, 为了检验索引文件自动下载是否生效,可以切换到Browse标签页，如图： img 如果出现类似于以上文件夹,那说明索引文件已经建立成功. ​ 下面我们试一下搜索功能, 搜索栏输入testing, 查询结果如下： img 这是模糊查询的结果，当然如果你知道更多信息，比如版本号等，你可以使用高级搜索，点击高级搜索后，右边界面会提供集中搜索方式：keyword, classname, GAV, checksum img 比如我们这里选择GAV模式. 假设我只知道artifact的名字（如testng）和版本号（如5.8）, 其他的我不知道, 那么就在artifact 和 version处分别输入testng 和 5.8 , 搜索结果如下: img 如果你不知道知道构件的名称, 只知道classname, 那么你也可以通过class name 的方式搜索,这里就不再赘述。 当你选中某项搜索结果， 页面的下方会出现这个构件的详细信息, 并且会列出这个构件的Maven依赖配置, 你可以直接拷贝到你的pom文件中使用,这是个非常实用的功能: img 在 Maven 中使用**Nexus**​ 到此我们介绍了如何安装和使用Nexus以及其基本配置, 那么如何在Maven来使用Nexus本地仓库呢？其实和配置远程仓库的方法一样。下面是在settings.xml中添加了一个nexus本地仓库的例子： 1234567891011121314151617181920212223242526272829303132333435&lt;profiles&gt; ... &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;/profile&gt; ...&lt;/profiles&gt;&lt;activeProfiles&gt; &lt;activeProfile&gt;dev&lt;/activeProfile&gt;&lt;/activeProfiles&gt; 你也可以在pom.xml中声明引用某个nexus仓库。 构件部署 有些时候我们需要部署构件到Nexus的3rd party, 比如我们在中央仓库找不到我们需要的构件, 我们可以通过Nexus的UI界面来上传构件: 点击左边菜单栏的 Repositories, 然后点击右边界面的3rd party, 选择界面下方的Artifact Upload, 这个时候出现以下界面: img 上传构件需要两个步骤,一个是定义文件的上传,再就是构件的实体文件.第一部分定义文件可以是POM文件, 这也是比较推荐的方式, 如果没有pom文件,可以选择以参数的形式输入。第二部分是上传构件的实体文件。这里简单说一下Classifier和Extension, 这两个都是选填项. Classifier用来区别同功能的构件用于不同的场景, 比如这个构件是分别针对JDK14和JDK15做了2个功能一样的Jar, 这个时候你就需要指定这个构件的Classifier为JDK14还是JDK15. Extension是指扩展名,如果不提供,那么会自动取这个构件的Packaging Type作为扩展名, 比如ear, jar, war 等等. (Packaging Type是在第一步中通过pom文件或者手工输入得到的) ​ 刚才说了3rd party的部署, 对于releases 和 snapshots的部署也是一样的操作过程. ​ 一般我们会通过UI 界面来部署一些缺失的构件。对于自己开发的构件还有另一种简单的部署方式， 即通过命令mvn deploy进行部署。但使用这种部署方式需要在pom.xml中添加一些配置，比如： 12345678910111213141516&lt;project&gt; … &lt;distributionManagement&gt; &lt;repository&gt; &lt;id&gt;nexus-releases&lt;/id&gt; &lt;name&gt;Nexus Release Repository&lt;/name&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/repositories/releases/&lt;/url&gt; &lt;/repository&gt; &lt;snapshotRepository&gt; &lt;id&gt;nexus-snapshots&lt;/id&gt; &lt;name&gt;Nexus Snapshot Repository&lt;/name&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/repositories/snapshots/&lt;/url&gt; &lt;/snapshotRepository&gt; &lt;/distributionManagement&gt; … &lt;/project&gt; 这里告诉Maven当我要发布release版本或者snapshot版本时，把构建好的成品上传到哪个服务器地址。 最后还要在setting.xml里面配置一个有部署权限的Nexus的帐号和密码 12345678910111213141516&lt;settings&gt; … &lt;servers&gt; &lt;server&gt; &lt;id&gt; nexus-releases&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;server&gt; &lt;id&gt; nexus-snapshots&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;/servers&gt; … &lt;/settings&gt; 至此 我们就可以通过命令mvn deploy来发布我们项目到本地仓库了. 这里我们使用了admin来进行部署，一般建议使用一个具有部署权限的账号执行部署操作。 补充1、 发现配置了nexus仓库组之后，下载构件抛异常0-10-3 下午05时09分43秒: Build error for /com.newyulong.iptv.domain.entity/pom.xml; org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.maven.plugins:maven-resources-plugin:2.4.1 or one of its dependencies could not be resolved: Missing:-———1) org.apache.maven.plugins:maven-resources-plugin:maven-plugin:2.4.1 Try downloading the file manually from the project website. Then, install it using the command:​ mvn install:install-file -DgroupId=org.apache.maven.plugins -DartifactId=maven-resources-plugin -Dversion=2.4.1 -Dpackaging=maven-plugin -Dfile=/path/to/file Alternatively, if you host your own repository you can deploy the file there:​ mvn deploy:deploy-file -DgroupId=org.apache.maven.plugins -DartifactId=maven-resources-plugin -Dversion=2.4.1 -Dpackaging=maven-plugin -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id] -———1 required artifact is missing. for artifact: org.apache.maven.plugins:maven-resources-plugin:maven-plugin:2.4.1 from the specified remote repositories: Nexus (http://localhost:8181/nexus/content/groups/public , releases=true, snapshots=false) 这里的主要原因是配置nexus里面的Public Repositories 顺序和条件出错，导致不能下载构件。比如这个public repositories： img 这个是正确的配置顺序。其中左边的是正在使用的定义好的仓库，右边的是候选的仓库。在这个例子中，nexus下载构件的顺序是Releases –&gt;Snapshots –&gt; 3rd party –&gt; Maven Central。 ​ 好多公司处于安全考虑，要求使用用代理访问公网，而nexus经常需要往maven repository中心下载东西，因此需要给nexus的仓库设置代理。 原文地址：&lt;http:// http://blog.csdn.net/cuker919/article/details/5922007&gt;","categories":[],"tags":[]},{"title":"","slug":"Java/JavaEE/MAVEN/MAVEN环境配置","date":"2017-10-27T11:51:59.000Z","updated":"2017-10-27T11:51:59.000Z","comments":true,"path":"2017/10/27/Java/JavaEE/MAVEN/MAVEN环境配置/","link":"","permalink":"http://io.stelawliet.top/2017/10/27/Java/JavaEE/MAVEN/MAVEN环境配置/","excerpt":"","text":"配置maven环境变量（首先要确保java环境变量已经配置好）： 1⃣️ 先双击Binary tar.gz archive文件，解压到文件目录下； 2⃣️ 查看文件路径：1）首先，打开终端； 2）再将apache-maven-3.5.0 文件夹拖入到终端内，文件夹路径就会显示出来； 3⃣️ 在终端打开配置环境变量到文件： 1）在终端输入 vim ~/.bash_profile，进入到环境变量配置文件里面； 2）进入后，是read模式，按下 i (编辑)键，进入insert模式； 3）将环境变量加入其实，环境变量如下： export MAVEN_HOME=/Users/robbie/apache-maven-3.3.3 export PATH=$PATH:$MAVEN_HOME/bin 4）按下 ESC，退出insert模式； 5）输入 :wq (保存修改)退出当前文件； 6）使修改的环境变量bash_profile文件生效，输入 source .bash_profile，按下Enter键即可.","categories":[],"tags":[]},{"title":"Linux——Vim编辑器命令基础","slug":"Linux/command/Vi命令","date":"2017-10-27T09:34:44.000Z","updated":"2018-10-11T11:47:29.000Z","comments":true,"path":"2017/10/27/Linux/command/Vi命令/","link":"","permalink":"http://io.stelawliet.top/2017/10/27/Linux/command/Vi命令/","excerpt":"","text":"Linux——Vim编辑器命令基础参考 Vi是一个命令行界面下的文本编辑工具，Vim是Vi的一个增强版。 vim或vi命令可以启动vim编辑器vim + 目标文件路径 使用vim打开文件如果目标文件存在，则vim打开该文件如果目标文件不存在，则vim会新建该文件，并打开 vi的三种模式：1、命令模式（常规模式）任何模式下按ESC键都会返回命令模式。命令模式下可以通过键入不同的命令完成选择、复制、粘贴、撤销等操作。2、插入模式在命令模式中按“i”键即可进入插入模式，插入模式下可以输入编辑文本内容；按ESC键可返回命令模式。3、ex模式在命令模式下按“：”键可进入ex模式，ex模式下可以保存、修改、退出vim。 命令模式：i 在光标前插入文本o 在当前行的下面插入新行dd 删除整行yy 将当前行的内容放入缓冲区（复制当前行）p 将缓冲区中的内容放入光标后（粘贴）数字+yy 复制N行r 替换当前字符（先按r，再按要替换的新字符）u 撤销上一个操作/关键字 查找关键字（按N键可以在找到的这些关键字之间来回切换） ex模式：w 保存当前修改q 退出q！ 强制退出，不保存任何修改wq 先保存后退出x 保存并退出set nu / set number 显示行号！ 系统命令 执行一条系统命令并显示结果sh 切换到命令行，之后再按Ctrl + D 即可返回vim","categories":[{"name":"Linux","slug":"Linux","permalink":"http://io.stelawliet.top/categories/Linux/"},{"name":"Vim","slug":"Linux/Vim","permalink":"http://io.stelawliet.top/categories/Linux/Vim/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/tags/linux/"},{"name":"vim","slug":"vim","permalink":"http://io.stelawliet.top/tags/vim/"}]},{"title":"","slug":"Java/JavaEE/MAVEN/ntelliJ IDEA 配置Maven","date":"2017-10-27T08:17:41.000Z","updated":"2017-10-27T08:17:41.000Z","comments":true,"path":"2017/10/27/Java/JavaEE/MAVEN/ntelliJ IDEA 配置Maven/","link":"","permalink":"http://io.stelawliet.top/2017/10/27/Java/JavaEE/MAVEN/ntelliJ IDEA 配置Maven/","excerpt":"","text":"使用IntelliJ IDEA 配置Maven（入门）原创 2016年05月20日 13:56:27 [TOC] 1. 下载Maven官方地址：http://maven.apache.org/download.cgi 下载 解压并新建一个本地仓库文件夹 解压新建本地仓库 2.配置本地仓库路径 打开此文件 这里写图片描述 3.配置maven环境变量 点击更改设置 点击环境变量 新建M2_HOME 配置Path 查询是否配置成功 4.在IntelliJ IDEA中配置maven打开-File-Settings 配置maven 5.新建maven WEB项目打开-File-New-Project点击NEXT 创建maven项目 点击NEXT 这里写图片描述 添加的配置为 archetypeCatalog=internal点击NEXT 这里写图片描述 点击NEXT 这里写图片描述 点击Finish后项目开始创建点击右下角查看进去 这里写图片描述 6.maven web模板项目结构 这里写图片描述 这里写图片描述 这里写图片描述 同样在main下新建test测试文件夹,再在此文件夹下新建java测试源码文件夹和resource测试资源文件夹 这里写图片描述 也可以右键项目-选择Open Module Settings打开项目配置页面更改 这里写图片描述 7.配置依赖jar包 这里写图片描述 jar包配置搜索官方地址：http://mvnrepository.com/","categories":[],"tags":[]},{"title":"","slug":"MD/idea/Intellij_IDEA使用","date":"2017-10-26T14:00:22.000Z","updated":"2017-11-03T08:20:21.000Z","comments":true,"path":"2017/10/26/MD/idea/Intellij_IDEA使用/","link":"","permalink":"http://io.stelawliet.top/2017/10/26/MD/idea/Intellij_IDEA使用/","excerpt":"","text":"Intellij IDEA 的使用 前言： 为什么我要选择intellij idea呢？原因有三 1.以前公司的项目 在myeclipse10中不稳定 myeclipse说不定什么时候就崩溃卡死了 而intellij很稳定 2.界面高端洋气 用我朋友的话说 看着跟搞苹果开发一样 3.项目的支持上比较好 基本上web项目都可以导入进来 比如mybatis的官方项目 是maven的 在myeclipse中就不能直接导入 intellij支持了 目前基本上所有的项目 尤其是maven项目 推荐一下黄勇的这篇《使用 IDEA + Maven + Git 快速开发 Java Web 应用》http://my.oschina.net/huangyong/blog/175363 下面步入正题： 1.黑色主题 中文乱码修改修改黑色主题 Settings-&gt;Appearences -&gt;Themes-&gt;Darcula 系统提示重启加载主题 重启后Settings-&gt;Appearences -&gt;勾选Override default fonts by 出现这种情况 不用害怕 只用随便选择一个乱码的 点击保存 中文汉字就出来了 2.WEB项目的部署 以及自动编译Intellij中 web的程序 部署 不同于myeclipse和eclipse 需要把项目打成一个Artifacts(成品包)的war包 然后在 配置的tomcat的Deployment中选择对应的war包 具体的可以看下这个帖子 http://my.oschina.net/tsl0922/blog/94621 我要强调的是 非maven的项目 比如网上下载的eclipse或者myeclipse项目 首选要检查项目设置 F4 或者 Ctrl+ALT+SHIFT+S 或者 快捷栏中 点项目设置 img 以JFinal项目为例子 导入项目后 打开项目设置 img 1.首先修改Modules 选择 SDK 也就是你系统上的JDK 然后把项目中的不支持红色的选项去掉 img 2.添加项目的类型 支持 比如你这个项目 是Spring的项目 可以加上Spring 以及在对应Spring的配置中 手中选中spring的配置文件 加上Web项目的支持 制定web.xml的路径 以为web的目录 如果是maven项目 这些都不用管 但是非maven项目 因为目录结构不同 IDEA默认找的 项目下的web目录 所以项目往往不能正确部署 或者部署不正确 都是这个地方的原因 这个Modules 设置正确后 就可以创建Artifaces了 IDEA右下角也会提示你的Create Artifaces 3.添加项目的lib依赖 img 需要选择项目中的 web-inf中的lib 默认是不会自动加进来的 如果是maven项目 这个就不要管了 4.选择Artifaces的exploded war包 （如果是之前点击右下角系统的提示创建 就不用这样了） img 5修改项目的输出目录 img 修改项目的编译输出目录 最好改为 jfinal_demo_for_jsp\\target\\ROOT（或者项目名） 因为maven的编译目录就是target目录 所以我们最好也按照maven的规则 6.项目 在服务器中的部署 img 选中我们的artifaces的war包 右边可以自定义项目的访问 名 左下角是 我们的项目 在服务器第一次启动时 需要做的事情 1.编译java类 2.打包部署war 这两个项目编译运行过 就可以给两个去掉了 以后我们再启动项目 就不用在去编译打包部署了 7.项目的服务器配置 img 在服务器配置中 注意几个地方 1.start browser 项目启动后 自动打开浏览器 访问对应的连接 2.on update action ：当发现更新时的操作 选择update classes and resources on frame deactivation: 当IDEA 切换时的操作 （比如缩下去 打开网页） 选择update classes and resources 也就是 自动编译 自动部署的功能 很多人说Intellij IDEA 不能自动编译 就是这个这个地方没设置好 3.可以选择端口 一个是jvm的端口 一个是tomcat的端口 如果我们同时运行多个项目 可以选择修改端口 就能直接同时运行多个项目 4.项目运行后 这两个就不需要了 或者我们是maven项目 直接可以在maven中 packages 打包 编译 这两个也都不需要了 然后启动项目 就会弹出我们的项目首页了 总结一下 里面需要注意的几个地方 1.modules里面 添加项目类型 以及配置文件是否指定正确 2.lib文件的添加 3.artifacts 选择exploded 的war包 选择编译目录 4.服务起中 配置 热部署 端口 等 3.多项目的同时部署intellij中工作空间和项目的概念和 myeclipse稍微有点不同 这个大家可以查看相关资料 之前@黄勇 大哥发的java框架对比 就是一个项目中 有多个modules 因为黄勇的项目 都是maven项目 就没有过多需要修改配置的地方 当时modules和artifacts里面好像都没有修改 多个子项目 可以在tomcat的deployment 同时部署 只用给每个项目 在右侧修改一下项目名字就OK了 img 4.相关插件提高工作效率1.JRebel插件 实现热部署可以集成JRebel 实现热部署 安装Tasks插件 集成JIRA等任务管理 1.修改idea.properties 在intellij的安装目录 bin\\目录下 修改到你的非C盘目录目录下 默认使用的 # idea.config.path=${user.home}/.IntelliJIdea/ 这样的好处是 当你更换系统时 intellij的配置和插件都在 可以直接继续使用 2.安装JRebel插件 Settings - Plugins - Browse repositories… 搜索JRebel 然后右键 Download and Install 里面其实有很多插件 具体插件的功能 可以去官网进行查看 http://plugins.jetbrains.com/?idea 插件会下载 安装在 E:.IntelliJIdea\\config\\plugins 也就是刚才配置的 config\\plugins下 3.JRebel 破解 需要替换E:.IntelliJIdea\\config\\plugins\\jr-ide-idea\\lib\\jrebel 下的jrebel.jar 以及在intellij中 指定对应的lrc文件 img img 然后重启下intellij JRebel就可以使用了 热部署效果非常的好 修改东西都不用重启 而且项目在长期运行中也不会出现崩溃 （以前热部署遇到过session崩溃的问题） 如果是maven项目 修改配置文件也都不用重启 比如mybatis的xml文件等 除了web.xml修改好像需要 4 如果JRebel不起作用 可以使用下面的方法 img 在Modules下 添加JRebel的支持 勾选 并点击后面的Generate rebel.xml 在你项目的配置文件中找到生成的rebel.xml 你会发现 它里面有两个目录 一个是java类的编译目录 一个是webroot的目录 也就是JRebel的监控目录 它会监控那个两个目录 如果发生文件变化 就在内存中重新加载对应的资源 非maven项目的静态资源发生变化后 如果不能热部署 可能就是JRebel监控的目录不太对 可以自己指定一下正确的目录 2.Tasks插件 集成任务管理 img img # Intellij中可以安装task插件 与jira等任务跟踪管理系统进行集成安装插件后 会在系统任务栏上显示 任务插件 显示当前的任务 以及最近的任务每个任务 可以创建不同的视图在不同视图下 会自动记录 当前任务下 修改过的页面所以这个功能相当的棒 当我们有多个jira任务时 可以随时切换任务任务完成后 我们可以根据任务对应的changelist 去提交当前任务下 修改过的文件 破解文件的连接地址 http://note.youdao.com/share/?id=33c21fb3c24e81c2781872525e22ade2&amp;type=note 5.其它的一些技巧配置（未完待续）# # PS:2013-11-28 Facets的作用 img img img","categories":[],"tags":[]},{"title":"tomcat�pn�","slug":"MD/tomcat的数据源","date":"2017-10-26T13:58:38.000Z","updated":"2018-07-17T08:42:41.000Z","comments":true,"path":"2017/10/26/MD/tomcat的数据源/","link":"","permalink":"http://io.stelawliet.top/2017/10/26/MD/tomcat的数据源/","excerpt":"","text":"�源](http://www.cnblogs.com/caryfang/p/5581463.html) img 1、F4打开module setting面板，找到facets 配置项，这个配置项非常重要，里面可配置tomcat加载的web.xml和context.xml文件所在的路径，部署的时候IDEA会自动读取。（PS：外部导入的项目，也一定要在这里配置好，不然自动部署时会出现错误。） 2、若没有facets-web项，则自己添加一个，然后点击add application server specific descriptor,选择tomcat context descriptor和默认配置文件路径，保存即可。 3、在web面板里打开META-INF/context.xml文件（这个文件在第2步配置后，会自动创建。），直接把数据源的配置参数填入即可。（IDEA给人的惊喜有很多，越用越坚定要用。） 4、在项目的web.xml文件上，配置引用关系。 5、最后在代码里调用； img","categories":[],"tags":[]},{"title":"","slug":"MD/idea/Intellij_idea_配置","date":"2017-10-26T09:39:29.000Z","updated":"2017-10-26T16:37:02.000Z","comments":true,"path":"2017/10/26/MD/idea/Intellij_idea_配置/","link":"","permalink":"http://io.stelawliet.top/2017/10/26/MD/idea/Intellij_idea_配置/","excerpt":"","text":"IntelliJ IDEA WEB项目的部署配置以下内容是我网上找的比较全面了，其中关于facets配置很多地方都没有说明，其实很重要，我加入了自己的理解。其他来自网络。在导入一个项目有问题时，建议先创建一个正确的web项目，然后对比配置项，一般就能找到导入项目的配置问题在哪里了。 [TOC] 1.前言​ 虽说Intellij IDEA已经用了四个多月，里面大部分功能还是比较熟悉的，但是很多细节地方还是搞不清楚，这几天公司另一个小组也换成了Intellij IDEA，帮他们迁移项目的时候，因为是非maven项目，遇到了很多问题，自己又研究了一番，下面整理一下 2.项目配置（Project Structure）2.1 Projectproject compliler output：配置的是项目中的默认编译输出总目录 里面英文也说明了，每个模块可以自己设置特殊的输出目录 所以这个基本上没用 2.2 Modules项目的模块，一个项目中可以有多个子项目，每个子项目相当于一个模块 一般我们项目只是单独的一个，所以只需要配置一个模块，我们可以给模块添加框架 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180046588-2086383898.png) 根据我们项目中的使用到东西，添加对应的框架，并在框架里面确定一下相关的配置文件（因为不同IDE下，项目的文件结构可能不同 所以导入的项目我们要注意一下配置） 模块配置根目下 分为了三个标签：Sources—— Paths—— Depedencies [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180048682-1561762741.png) Sources标签下 主要显示项目的目录资源 那些是项目部署的时候需要的目录 有颜色提示 （比如绿色是测试目录 橘色是target的目录 这些部署的时候都不需要 大红色是我的项目下没有的 蓝色是真正需要部署） Paths标签下 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180050604-223718264.png) 可以指定项目的编译输出目录 也就是项目类 和 测试类的编译输出地址（替换掉了Project的默认输出地址） Depedencies是项目的依赖 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180052885-1152828564.png) 我们可以点击右侧的+号 添加lib 比如tomcat的lib 默认加进来就是Provided （和maven的里面的jar依赖差不多） Provided 也就是项目部署的时候是忽略的 只是再编译项目的时候进行使用 Compile 是跟随着项目部署的 Test也是不部署的 2.3 Libraries里面可以添加项目jar包 并且可以把多个jar放在一个组里面 类似于jar包整理 这个下添加的jar 会在Depedencies中显示（反之不可以） 2.4 Facts配置的是关于容器的配置文件，比如Tomcat要读取的web.xml和context.xml文件，就在这里指定和配置后，没有的会自动生产，尤其是外部导入的web项目一定要手动到这里配置下。 2.5 Artifacts项目的打包部署设置，这个是项目配置里面比较关键的地方 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180055292-261680886.png) 注意红框的地方 第一个是我们需要添加项目的部署包 注意选择是exploded的war包 第二个是项目的输出目录 非maven项目这个可以设置到任何地方 （ maven项目的需要特殊注意 这个后面再说） 第三个是输出结构（output layout） 参考图中的几个文件 （maven项目如果不使用maven的打包编译 注意图中WEB-INF下的lib要有项目部署的jar） 3.非Maven项目的创建部署创建File——New Project——Java——Web Application （注意New Project里面不是选择的web 而是java） intellij中web项目 默认网页根目录是web 项目配置可参考2中的几个地方 根据自己的需求自己修改 artifact中out directory 可以指定到任何地方 项目打包编译到指定的目录下 在intellij中启动tomcat 都会以对应war包out directory的设置的目录为工作空间 tomcat配置请参考http://my.oschina.net/u/140593/blog/177042#OSC_h1_2 中的2-7 4.Maven项目的部署在intellij中 maven项目还是可以按照maven的打包编译 参考图中的几个生命周期 手动去执行 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180058588-1093447979.png) 因为maven项目的约定 是项目打包编译到 target目录下 所以我们在2中配置都应该去遵循maven的配置约定进行修改 这样我们的项目在文件修改或者热部署的时候 intellij的编译才能和maven项目保持一致 （如果是在intellij中创建maven项目 那个intellij会给你配置好所有的配置 基本不用修改 我们可以创建一个springmvc的例子进行参考） 需要注意的地方是： maven项目 artifact中out directory 的目录名 一定要和pom文件中build的finalName一致 另外pom文件中 要配置\\war\\ 比如pom中配置的项目bulid finalName叫做ROOT 那么我们的out directory为 E:\\项目积累\\test1\\target\\ROOT 通过maven编译以及打包项目后 在服务器的配置中，可以去掉下图红色区域的两个选项，避免每次启动时都重新编译和打包 [ img](http://images2015.cnblogs.com/blog/762929/201606/762929-20160613180101495-1690615514.png) 5.总结本文基本总结了intellij中web项目部署的问题，以及如何去配置。来源： http://blog.csdn.net/z69183787/article/details/41416189","categories":[],"tags":[]},{"title":"firewall-cmd命令记","slug":"firewall","date":"2017-10-20T15:01:31.000Z","updated":"2018-06-25T03:55:54.000Z","comments":true,"path":"2017/10/20/firewall/","link":"","permalink":"http://io.stelawliet.top/2017/10/20/firewall/","excerpt":"","text":"打开tcp传输的8080端口，--permanent重启也有效1firewall-cmd --permanent --zone=public --add-port=8080/tcp 显示以配置的端口1firewall-cmd --list-port 重载配置1firewall-cmd --reload firewall-cmd –permanent –zone=public –add-rich-rule=”rule family=”ipv4” source address=”180.151.83.30/24” service name=”ssh” reject” 123firewall-cmd --permanent --zone=public --add-rich-rule=&quot;rule family=&apos;ipv4&apos; source address=&apos;180.151.83.30/24&apos; port port=80 protocol=tcp reject&quot;firewall-cmd --reload 重新加载防火墙配置，不然firewall-cmd --list-all-zones不会显示刚加上的规则","categories":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://io.stelawliet.top/tags/linux/"},{"name":"firewall-cmd","slug":"firewall-cmd","permalink":"http://io.stelawliet.top/tags/firewall-cmd/"},{"name":"vps","slug":"vps","permalink":"http://io.stelawliet.top/tags/vps/"}]},{"title":"JSP&JavaBean","slug":"Java/JavaEE/JSP&JavaBean","date":"2017-10-18T11:30:33.000Z","updated":"2018-07-04T11:42:09.000Z","comments":true,"path":"2017/10/18/Java/JavaEE/JSP&JavaBean/","link":"","permalink":"http://io.stelawliet.top/2017/10/18/Java/JavaEE/JSP&JavaBean/","excerpt":"","text":"[TOC] ##JSP三大指令 一个jsp页面中，可以有0~N个指令的定义！ page：\\&lt;%@page language=”java” info=”xxx”…%&gt; pageEncoding和contentType： pageEncoding：它指定当前jsp页面的编码，只要不说谎，就不会有乱码！在服务器要把jsp编译成.java时需要使用pageEncoding! contentType：它表示添加一个响应头：Content-Type！等同与response.setContentType(“text/html;charset=utf-8”); 如果两个属性只提供一个，那么另一个的默认值为设置那一个。 如果两个属性都没有设置，那么默认为iso import：导包！可以出现多次 errorPage和isErrorPage errorPage：当前页面如果抛出异常，那么要转发到哪一个页面，由errorPage来指定isErrorPage：它指定当前页面是否为处理错误的页面！当该属性为true时，这个页面会设置状态码为500！而且这个页面可以使用9大内置对象中的exception! 123456789101112131415161718192021&lt;error-page&gt;&lt;error-code&gt;404&lt;/error-code&gt;&lt;location&gt;/error/errorPage.jsp&lt;/location&gt; &lt;/error-page&gt; &lt;error-page&gt; &lt;error-code&gt;500&lt;/error-code&gt; &lt;location&gt;/error/errorPage.jsp&lt;/location&gt; &lt;/error-page&gt; &lt;error-page&gt; &lt;exception-type&gt;java.lang.RuntimeException&lt;/exception-type&gt; &lt;location&gt;/index.jsp&lt;/location&gt; &lt;/error-page&gt; autoFlush和buffer autoFlush：指定jsp的输出流缓冲区满时，是否自动刷新！默认为true，如果为false，那么在缓冲区满时抛出异常！ buffer：指定缓冲区大小，默认为8kb，通常不需要修改！ isELIgnored：是否忽略el表达式，默认值为false，不忽略，即支持！ 基本没有： language：指定当前jsp编译后的语言类型，默认值为java。 info：信息！ isThreadSafe：当前的jsp是否支持并发访问！ session：当前页面是否支持session，如果为false，那么当前页面就没有session这个内置对象！ extends：让jsp生成的servlet去继承该属性指定的类！ include –&gt; 静态包含 与RequestDispatcher的include()方法的功能相似！ \\&lt;%@include%&gt; 它是在jsp编译成java文件时完成的！他们共同生成一个java(就是一个servlet)文件，然后再生成一个class！ RequestDispatcher的include()是一个方法，包含和被包含的是两个servlet，即两个.class！他们只是把响应的内容在运行时合并了！ 作用：把页面分解了，使用包含的方式组合在一起，这样一个页面中不变的部分，就是一个独立jsp，而我们只需要处理变化的页面。 taglib –&gt; 导入标签库 两个属性： prefix：指定标签库在本页面中的前缀！由我们自己来起名称！uri: 指定标签库的位置！\\&lt;%@taglib prefix=”s” uri=”/struts-tags”%&gt; 前缀的用法\\&lt;s:text&gt; JSP九个内置对象 out –&gt; jsp的输出流，用来向客户端响应 page –&gt; 当前jsp对象！ 它的引用类型是Object，即真身中有如下代码：Object page = this; config –&gt; 它对应真身中的ServletConfig对象！ pageContext 一个顶9个！ request –&gt; HttpServletEequest response –&gt; HttpServletResponse exception –&gt; Throwable session –&gt; HttpSession application –&gt; ServletContext pageContext 一个顶9个！ Servlet中有三大域，而JSP中有四大域，它就是最后一个域对象！ ServletContext：整个应用程序session：整个会话(一个会话中只有一个用户)request：一个请求链！pageContext：一个jsp页面！这个域是在当前jsp页面和当前jsp页面中使用的标签之间共享数据！域对象代理其他域：pageContext.setAttribute(“xxx”, “XXX”, PageContext.SESSION_SCOPE);全域查找：pageContext.findAttribute(“xxx”);从小到大，依赖查找！获取其他8个内置对象： JSP动作标签 这些jsp的动作标签，与html提供的标签有本质的区别。 动作标签是由tomcat(服务器)来解释执行！它与java代码一样，都是在服务器端执行的！ html由浏览器来执行！ &lt;jsp:forward&gt;：转发！它与RequestDispatcher的forward方法是一样的，一个是在Servlet中使用，一个是在jsp中使用！ &lt;jsp:include&gt;：包含：它与RequestDispatcher的include方法是一样的，一个是在Servlet中使用，一个是在jsp中使用！ &lt;%@include&gt;和&lt;jsp:include&gt;有什么不同！ &lt;jsp:param&gt;：它用来作为forward和include的子标签！用来给转发或包含的页面传递参数！ JavaBeanjavaBean的规范：1. 必须要有一个默认构造器 2. 提供get/set方法，如果只有get方法，那么这个属性是只读属性！ 3. 属性：有get/set方法的成员，还可以没有成员，只有get/set方法。属性名称由get/set方法来决定！而不是成员名称！ 4. 方法名称满足一定的规范，那么它就是属性！boolean类型的属性，它的读方法可以是is开头，也可以是get开头！ 内省： 内省类 –&gt; Bean信息 –&gt; 属性描述符 –&gt; 属性的get/set对应的Method！ — &gt; 可以反射了！ commons-beanutils，它是依赖内省完成！ 导包： commons-beanutils.jarcommons-logging.jar ​ 12345BeanUtils.getProperty(Object bean, String propertyName)BeanUtils.setProperty(Object bean, String propertyName, String propertyValue)BeanUtils.populate(Map map, Object bean)CommontUtils.toBean(Map map, Class class) jsp中与javaBean相关的标签 jsp:useBean –&gt; 创建或查询bean &lt;jsp:useBean id=&quot;user1&quot; class=&quot;cn.itcast.domain.User&quot; scope=&quot;session&quot;/&gt; 在session域中查找名为user1的bean，如果不存在，创建之 &lt;jsp:useBean id=&quot;user1&quot; class=&quot;cn.itcast.domain.User&quot; scope=&quot;session&quot;/&gt; jsp:setProperty &lt;jsp:setProperty property=&quot;username&quot; name=&quot;user1&quot; value=&quot;admin&quot;/&gt; 设置名为user1的这个javabean的username属性值为admin jsp:getProperty &lt;jsp:getProperty property=&quot;username&quot; name=&quot;user1&quot;/&gt; 获取名为user1的javabean的名为username属性值 EL表达式####EL是JSP内置的表达式语言 jsp2.0开始，不让再使用java脚本，而是使用el表达式和动态标签来替代java脚本！ EL替代的是&lt;%= … %&gt;，也就是说，EL只能做输出！ EL表达式来读取四大域 ${xxx}，全域查找名为xxx的属性，如果不存在，输出空字符串，而不是null。 ${pageScope.xxx}、${requestScope.xxx}、${sessionScope.xxx}、${applicationScope.xxx}，指定域获取属性！ javaBean导航1234567891011121314&lt;%Address address = new Address(); address.setCity(\"北京\"); address.setStreet(\"西三旗\"); Employee emp = new Employee(); emp.setName(\"李小四\"); emp.setSalary(123456); emp.setAddress(address); request.setAttribute(\"emp\", emp);%&gt; &lt;h3&gt;使用el获取request域的emp&lt;/h3&gt; $&#123;requestScope.emp.address.street &#125; &lt;!-- request.getAttribute(\"emp\").getAddress().getStreet() --&gt; EL可以输出的东西都在11个内置对象中！11个内置对象，其中10个是Map！pageContext不是map，它就是PageContext类型，1个项9个。 param：对应参数，它是一个Map，其中key参数名，value是参数值，适用于单值的参数。 paramValues：对应参数，它是一个Map，其中key参数名，value是多个参数值，适用于多值的参数。 header：对应请求头，它是一个Map，其中key表示头名称，value是单个头值，适用于单值请求头 headerValues：对应请求头，它是一个Map，其中key表示头名称，value是多个头值，适用于多值请求头 initParam：获取&lt;context-param&gt;内的参数！ 12345678&lt;context-param&gt; &lt;param-name&gt;xxx&lt;/param-name&gt; &lt;param-value&gt;XXX&lt;/param-value&gt; &lt;/context-param&gt; &lt;context-param&gt; &lt;param-name&gt;yyy&lt;/param-name&gt; &lt;param-value&gt;YYY&lt;/param-value&gt;&lt;/context-param&gt; ${initParam.xxx} cookie：Map&lt;String,Cookie&gt;类型，其中key是cookie的name，value是cookie对象。 ${cookie.username.value} pageContext：它是PageContext类型！${pageContext.request.contextPath} EL函数库（由JSTL提供的）导入标签库：&lt;%@ tablib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot;%&gt;String toUpperCase(String input)：把参数转换成大写String toLowerCase(String input)：把参数转换成小写int indexOf(String input, String substring)：从大串，输出小串的位置！boolean contains(String input, String substring)：查看大串中是否包含小串boolean containsIgnoreCase(String input, String substring)：忽略大小写的，是否包含boolean startsWith(String input, String substring)：是否以小串为前缀boolean endsWith(String input, String substring)：是否以小串为后缀String substring(String input, int beginIndex, int endIndex)：截取子串String substringAfter(String input, String substring)：获取大串中，小串所在位置后面的字符串substringBefore(String input, String substring)：获取大串中，小串所在位置前面的字符串String escapeXml(String input)：把input中“&lt;”、”&gt;”、”&amp;”、”‘“、”””，进行转义String trim(String input)：去除前后空格String replace(String input, String substringBefore, String substringAfter)：替换String[] split(String input, String delimiters)：分割字符串，得到字符串数组int length(Object obj)：可以获取字符串、数组、各种集合的长度！String join(String array[], String separator)：联合字符串数组！ 自定义函数库 写一个java类，类中可以定义0~N个方法，但必须是static，而且有返回值的！ 在WEB-INF目录下创建一个tld文件 1234&lt;function&gt; &lt;name&gt;fun&lt;/name&gt; &lt;function-class&gt;cn.itcast.fn.MyFunction&lt;/function-class&gt; &lt;function-signature&gt;java.lang.String fun()&lt;/function-signature&gt;&lt;/function&gt; 在jsp页面中导入标签库&lt;%@ taglib prefix=&quot;it&quot; uri=&quot;/WEB-INF/tlds/itcast.tld&quot; %&gt; 在jsp页面中使用自定义的函数：${it:fun() }","categories":[{"name":"java","slug":"java","permalink":"http://io.stelawliet.top/categories/java/"},{"name":"javaee","slug":"java/javaee","permalink":"http://io.stelawliet.top/categories/java/javaee/"},{"name":"jsp","slug":"java/javaee/jsp","permalink":"http://io.stelawliet.top/categories/java/javaee/jsp/"}],"tags":[{"name":"javaee","slug":"javaee","permalink":"http://io.stelawliet.top/tags/javaee/"},{"name":"jsp","slug":"jsp","permalink":"http://io.stelawliet.top/tags/jsp/"}]},{"title":"","slug":"MD/未命名","date":"2017-10-10T14:41:32.000Z","updated":"2017-12-25T16:32:49.000Z","comments":true,"path":"2017/10/10/MD/未命名/","link":"","permalink":"http://io.stelawliet.top/2017/10/10/MD/未命名/","excerpt":"","text":"#JAVA this is the first markdown. ##Servlet ###request 吹响上低音号 2233","categories":[],"tags":[]},{"title":"","slug":"JavaScript/jQuery.Cookie","date":"2014-04-27T05:07:14.000Z","updated":"2014-04-27T05:07:14.000Z","comments":true,"path":"2014/04/27/JavaScript/jQuery.Cookie/","link":"","permalink":"http://io.stelawliet.top/2014/04/27/JavaScript/jQuery.Cookie/","excerpt":"","text":"jquery.cookie [ Build Status](https://travis-ci.org/carhartl/jquery-cookie.png?branch=master)](https://travis-ci.org/carhartl/jquery-cookie) [![Code Climate](https://codeclimate.com/github/carhartl/jquery-cookie.png) A simple, lightweight jQuery plugin for reading, writing and deleting cookies. If you’re viewing this at https://github.com/carhartl/jquery-cookie, you’re reading the documentation for the master branch.View documentation for the latest release (1.4.1). Build Status Matrix[ Selenium Test Status](https://saucelabs.com/browser-matrix/jquery-cookie.svg) InstallationInclude script after the jQuery library (unless you are packaging scripts somehow else): 1&lt;script src=\"/path/to/jquery.cookie.js\"&gt;&lt;/script&gt; Do not include the script directly from GitHub (http://raw.github.com/...). The file is being served as text/plain and as such being blockedin Internet Explorer on Windows 7 for instance (because of the wrong MIME type). Bottom line: GitHub is not a CDN. The plugin can also be loaded as AMD or CommonJS module. UsageCreate session cookie: 1$.cookie('the_cookie', 'the_value'); Create expiring cookie, 7 days from then: 1$.cookie('the_cookie', 'the_value', &#123; expires: 7 &#125;); Create expiring cookie, valid across entire site: 1$.cookie('the_cookie', 'the_value', &#123; expires: 7, path: '/' &#125;); Read cookie: 12$.cookie('the_cookie'); // =&gt; \"the_value\"$.cookie('not_existing'); // =&gt; undefined Read all available cookies: 1$.cookie(); // =&gt; &#123; \"the_cookie\": \"the_value\", \"...remaining\": \"cookies\" &#125; Delete cookie: 12345// Returns true when cookie was found, false when no cookie was found...$.removeCookie('the_cookie');// Same path as when the cookie was written...$.removeCookie('the_cookie', &#123; path: '/' &#125;); Note: when deleting a cookie, you must pass the exact same path, domain and secure options that were used to set the cookie, unless you’re relying on the default options that is. ConfigurationrawBy default the cookie value is encoded/decoded when writing/reading, using encodeURIComponent/decodeURIComponent. Bypass this by setting raw to true: 1$.cookie.raw = true; jsonTurn on automatic storage of JSON objects passed as the cookie value. Assumes JSON.stringify and JSON.parse: 1$.cookie.json = true; Cookie OptionsCookie attributes can be set globally by setting properties of the $.cookie.defaults object or individually for each call to $.cookie() by passing a plain object to the options argument. Per-call options override the default options. expiresexpires: 365 Define lifetime of the cookie. Value can be a Number which will be interpreted as days from time of creation or a Date object. If omitted, the cookie becomes a session cookie. pathpath: &apos;/&apos; Define the path where the cookie is valid. By default the path of the cookie is the path of the page where the cookie was created (standard browser behavior). If you want to make it available for instance across the entire domain use path: &#39;/&#39;. Default: path of page where the cookie was created. Note regarding Internet Explorer: Due to an obscure bug in the underlying WinINET InternetGetCookie implementation, IE’s document.cookie will not return a cookie if it was set with a path attribute containing a filename. (From Internet Explorer Cookie Internals (FAQ)) This means one cannot set a path using path: window.location.pathname in case such pathname contains a filename like so: /check.html (or at least, such cookie cannot be read correctly). domaindomain: &apos;example.com&apos; Define the domain where the cookie is valid. Default: domain of page where the cookie was created. securesecure: true If true, the cookie transmission requires a secure protocol (https). Default: false. ConvertersProvide a conversion function as optional last argument for reading, in order to change the cookie’s valueto a different representation on the fly. Example for parsing a value into a number: 12$.cookie('foo', '42');$.cookie('foo', Number); // =&gt; 42 Dealing with cookies that have been encoded using escape (3rd party cookies): 12$.cookie.raw = true;$.cookie('foo', unescape); You can pass an arbitrary conversion function. ContributingCheck out the Contributing Guidelines AuthorsKlaus Hartl","categories":[],"tags":[]}]}